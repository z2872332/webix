{"version":3,"file":"webix.min.js","sources":["../sources/thirdparty/promiz.js","../sources/services.js","../sources/webix/debug.js","../sources/webix/helpers.js","../sources/webix/i18n.js","../sources/webix/stringify.js","../sources/core/eventsystem.js","../sources/webix/customevents.js","../sources/load/drivers/xml.js","../sources/load/drivers/json.js","../sources/load/ajax.js","../sources/load/proxy/binary.js","../sources/load/proxy/debug.js","../sources/load/proxy/rest.js","../sources/load/proxy/json.js","../sources/load/proxy/post.js","../sources/load/proxy/graphql.js","../sources/load/proxy.js","../sources/load/drivers/jsarray.js","../sources/load/drivers/html.js","../sources/webix/env.js","../sources/webix/html.js","../sources/load/drivers/htmltable.js","../sources/load/require.js","../sources/webix/template.js","../sources/load/drivers/excel.js","../sources/load/drivers/index.js","../sources/load/drivers/csv.js","../sources/core/atomdataloader.js","../sources/core/codeparser.js","../sources/core/atomrender.js","../sources/core/autoscroll.js","../sources/webix/htmlevents.js","../sources/webix/type.js","../sources/core/state.js","../sources/ui/core.js","../sources/core/tooltipcontrol.js","../sources/ui/helpers.js","../sources/webix/ready.js","../sources/webix/fullscreen.js","../sources/core/uimanager.js","../sources/core/settings.js","../sources/core/destruction.js","../sources/core/collectionbind.js","../sources/core/valuebind.js","../sources/core/recordbind.js","../sources/core/bindsource.js","../sources/core/basebind.js","../sources/views/baseview.js","../sources/views/view.js","../sources/core/singlerender.js","../sources/core/autotooltip.js","../sources/views/tooltip.js","../sources/core/canvas.js","../sources/webix/animate.js","../sources/css/skins/material/config.js","../sources/webix/skin.js","../sources/css/skins/mini/config.js","../sources/css/skins/flat/config.js","../sources/css/skins/compact/config.js","../sources/css/skins/contrast/config.js","../sources/core/touch.js","../sources/core/dragcontrol.js","../sources/core/movable.js","../sources/core/modality.js","../sources/core/resizearea.js","../sources/views/window.js","../sources/core/contexthelper.js","../sources/webix/clipbuffer.js","../sources/core/copypaste.js","../sources/core/customprint.js","../sources/core/customscroll.js","../sources/core/datamarks.js","../sources/core/datamove.js","../sources/webix/rules.js","../sources/core/validatedata.js","../sources/load/dataprocessor.js","../sources/core/datastore.js","../sources/core/dataloader.js","../sources/core/datastate.js","../sources/core/dragitem.js","../sources/core/dragorder.js","../sources/core/undo.js","../sources/webix/editors.js","../sources/core/editability.js","../sources/core/flexlayout.js","../sources/core/groupmethods.js","../sources/core/groupstore.js","../sources/core/group.js","../sources/core/htmloptions.js","../sources/core/htmlmap.js","../sources/core/idspace.js","../sources/core/keysnavigation.js","../sources/core/mapcollection.js","../sources/core/mouseevents.js","../sources/core/navigationbuttons.js","../sources/core/overlaybox.js","../sources/core/pagingability.js","../sources/core/progressbar.js","../sources/core/renderstack.js","../sources/core/scrollable.js","../sources/core/selectionmodel.js","../sources/webix/color.js","../sources/core/sparklines/svg.js","../sources/core/sparklines/line.js","../sources/core/sparklines/area.js","../sources/core/sparklines/bar.js","../sources/core/sparklines/pie.js","../sources/core/sparklines/spline.js","../sources/core/sparklines/splinearea.js","../sources/core/sparklines.js","../sources/webix/csv.js","../sources/core/tablepaste.js","../sources/core/treeapi.js","../sources/core/treeclick.js","../sources/core/treedataloader.js","../sources/core/treedatamove.js","../sources/core/treerenderstack.js","../sources/core/treestatecheckbox.js","../sources/core/treestore.js","../sources/core/treetablepaste.js","../sources/core/treetype.js","../sources/core/uploaddriver.js","../sources/core/validatecollection.js","../sources/core/values.js","../sources/core/virtualrenderstack.js","../sources/core/vrenderstack.js","../sources/webix/export/common.js","../sources/webix/export/topdf.js","../sources/webix/export/toexcel.js","../sources/webix/message.js","../sources/webix/ie8.js","../sources/i18n/en.js","../sources/core/date.js","../sources/core/number.js","../sources/webix/locale.js","../sources/webix/storage.js","../sources/webix/print.js","../sources/webix/patterns.js","../sources/webix/index.js","../sources/load/remote.js","../sources/ui/fullscreen.js","../sources/ui/datafilter.js","../sources/ui/detect.js","../sources/ui/index.js","../sources/ui/animate.js","../sources/i18n/index.js","../sources/i18n/de.js","../sources/i18n/es.js","../sources/i18n/fr.js","../sources/i18n/it.js","../sources/i18n/ja.js","../sources/i18n/pt.js","../sources/i18n/zh.js","../sources/i18n/ru.js","../sources/i18n/be.js","../sources/views/baselayout.js","../sources/views/template.js","../sources/views/spacer.js","../sources/views/layout.js","../sources/views/scrollview.js","../sources/views/iframe.js","../sources/views/accordion.js","../sources/views/carousel.js","../sources/views/headerlayout.js","../sources/views/accordionitem.js","../sources/views/resizearea.js","../sources/views/resizer.js","../sources/views/align.js","../sources/views/multiview.js","../sources/views/tabview.js","../sources/views/abslayout.js","../sources/views/proxy.js","../sources/views/portlet.js","../sources/views/gridlayout.js","../sources/views/datalayout.js","../sources/views/dashboard.js","../sources/views/panel.js","../sources/views/flexlayout.js","../sources/views/popup.js","../sources/views/flexdatalayout.js","../sources/views/toolbar.js","../sources/views/fieldset.js","../sources/views/form.js","../sources/views/forminput.js","../sources/views/htmlform.js","../sources/views/button.js","../sources/views/property.js","../sources/views/calendar.js","../sources/views/colorboard.js","../sources/core/textpattern.js","../sources/views/label.js","../sources/views/text.js","../sources/core/datacollection.js","../sources/views/select.js","../sources/views/checkbox.js","../sources/views/datepicker.js","../sources/views/radio.js","../sources/views/richselect.js","../sources/views/colorpicker.js","../sources/views/segmented.js","../sources/views/combo.js","../sources/views/counter.js","../sources/views/icon.js","../sources/views/search.js","../sources/views/proto.js","../sources/views/textarea.js","../sources/views/toggle.js","../sources/views/multitext.js","../sources/views/list.js","../sources/views/multiselect.js","../sources/views/multicombo.js","../sources/views/slider.js","../sources/views/rangeslider.js","../sources/views/switch.js","../sources/views/tabbar.js","../sources/views/richtext.js","../sources/views/uploader.js","../sources/views/texthighlight.js","../sources/views/suggest.js","../sources/views/multisuggest.js","../sources/views/checksuggest.js","../sources/views/datasuggest.js","../sources/views/gridsuggest.js","../sources/views/mentionsuggest.js","../sources/views/daterange.js","../sources/views/daterangesuggest.js","../sources/views/daterangepicker.js","../sources/views/excelbar.js","../sources/views/excelviewer.js","../sources/views/pdfbar.js","../sources/views/pdfviewer.js","../sources/views/video.js","../sources/views/geochart.js","../sources/views/gage.js","../sources/views/barcode.js","../sources/views/bulletgraph.js","../sources/views/googlemap.js","../sources/views/organogram.js","../sources/views/chart/dynamic.js","../sources/views/chart.js","../sources/views/chart/pie.js","../sources/views/chart/bar.js","../sources/views/chart/line.js","../sources/views/chart/barh.js","../sources/views/chart/stackedbar.js","../sources/views/chart/stackedbarh.js","../sources/views/chart/spline.js","../sources/views/chart/area.js","../sources/views/chart/radar.js","../sources/views/chart/scatter.js","../sources/views/chart/presets.js","../sources/views/chart/splinearea.js","../sources/views/rangechart.js","../sources/views/grouplist.js","../sources/views/unitlist.js","../sources/views/dbllist.js","../sources/views/tree.js","../sources/views/treemap.js","../sources/views/dataview.js","../sources/views/pager.js","../sources/views/comments.js","../sources/views/timeline.js","../sources/views/menu.js","../sources/views/submenu.js","../sources/views/sidebar.js","../sources/views/sidemenu.js","../sources/views/context.js","../sources/views/contextmenu.js","../sources/views/vscroll.js","../sources/views/datatable/filter.js","../sources/views/datatable/selection.js","../sources/views/datatable/blockselect.js","../sources/views/datatable/resize.js","../sources/views/datatable/touch.js","../sources/views/datatable/edit.js","../sources/views/datatable/dnd.js","../sources/views/datatable.js","../sources/views/datatable/areaselect.js","../sources/views/datatable/print.js","../sources/views/datatable/validation.js","../sources/views/datatable/export.js","../sources/views/datatable/keynav.js","../sources/views/datatable/columns.js","../sources/views/datatable/math.js","../sources/views/datatable/hmenu.js","../sources/views/datatable/size.js","../sources/views/datatable/subs.js","../sources/views/datatable/freeze.js","../sources/views/datatable/spans.js","../sources/views/treetable.js","../sources/views/filter.js","../sources/core/datarecord.js","../sources/core/datavalue.js","../sources/core/treecollection.js","../sources/webix/api.js","../sources/webix/filters.js","../sources/webix/consts.js","../sources/load/send.js","../sources/webix/export/tocsv.js","../sources/webix/export/topng.js"],"sourcesContent":["var global = window;\r\n\r\nvar queueId = 1;\r\nvar queue = {};\r\nvar isRunningTask = false;\r\n\r\nif (!global.setImmediate && global.addEventListener)\r\n\tglobal.addEventListener(\"message\", function (e) {\r\n\t\tif (e.source == global){\r\n\t\t\tif (isRunningTask)\r\n\t\t\t\tnextTick(queue[e.data]);\r\n\t\t\telse {\r\n\t\t\t\tisRunningTask = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tqueue[e.data]();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// eslint-disable-line\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete queue[e.data];\r\n\t\t\t\tisRunningTask = false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nfunction nextTick(fn) {\r\n\tif (global.setImmediate) global.setImmediate(fn);\r\n\t// if inside of web worker\r\n\telse if (global.importScripts || !global.addEventListener) setTimeout(fn);\r\n\telse {\r\n\t\tqueueId++;\r\n\t\tqueue[queueId] = fn;\r\n\t\tglobal.postMessage(queueId, \"*\");\r\n\t}\r\n}\r\n\r\nDeferred.resolve = function (value) {\r\n\tif (!(this._d == 1))\r\n\t\tthrow TypeError();\r\n\r\n\tif (value instanceof Deferred)\r\n\t\treturn value;\r\n\r\n\treturn new Deferred(function (resolve) {\r\n\t\tresolve(value);\r\n\t});\r\n};\r\n\r\nDeferred.reject = function (value) {\r\n\tif (!(this._d == 1))\r\n\t\tthrow TypeError();\r\n\r\n\treturn new Deferred(function (resolve, reject) {\r\n\t\treject(value);\r\n\t});\r\n};\r\n\r\nDeferred.all = function (arr) {\r\n\tif (!(this._d == 1))\r\n\t\tthrow TypeError();\r\n\r\n\tif (!(arr instanceof Array))\r\n\t\treturn Deferred.reject(TypeError());\r\n\r\n\tvar d = new Deferred();\r\n\r\n\tfunction done(e, v) {\r\n\t\tif (v)\r\n\t\t\treturn d.resolve(v);\r\n\r\n\t\tif (e)\r\n\t\t\treturn d.reject(e);\r\n\r\n\t\tvar unresolved = arr.reduce(function (cnt, v) {\r\n\t\t\tif (v && v.then)\r\n\t\t\t\treturn cnt + 1;\r\n\t\t\treturn cnt;\r\n\t\t}, 0);\r\n\r\n\t\tif(unresolved == 0)\r\n\t\t\td.resolve(arr);\r\n\r\n\r\n\t\tarr.map(function (v, i) {\r\n\t\t\tif (v && v.then)\r\n\t\t\t\tv.then(function (r) {\r\n\t\t\t\t\tarr[i] = r;\r\n\t\t\t\t\tdone();\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t}, done);\r\n\t\t});\r\n\t}\r\n\r\n\tdone();\r\n\r\n\treturn d;\r\n};\r\n\r\nDeferred.race = function (arr) {\r\n\tif (!(this._d == 1))\r\n\t\tthrow TypeError();\r\n\r\n\tif (!(arr instanceof Array))\r\n\t\treturn Deferred.reject(TypeError());\r\n\r\n\tif (arr.length == 0)\r\n\t\treturn new Deferred();\r\n\r\n\tvar d = new Deferred();\r\n\r\n\tfunction done(e, v) {\r\n\t\tif (v)\r\n\t\t\treturn d.resolve(v);\r\n\r\n\t\tif (e)\r\n\t\t\treturn d.reject(e);\r\n\r\n\t\tvar unresolved = arr.reduce(function (cnt, v) {\r\n\t\t\tif (v && v.then)\r\n\t\t\t\treturn cnt + 1;\r\n\t\t\treturn cnt;\r\n\t\t}, 0);\r\n\r\n\t\tif(unresolved == 0)\r\n\t\t\td.resolve(arr);\r\n\r\n\t\tarr.map(function (v) {\r\n\t\t\tif (v && v.then)\r\n\t\t\t\tv.then(function (r) {\r\n\t\t\t\t\tdone(null, r);\r\n\t\t\t\t}, done);\r\n\t\t});\r\n\t}\r\n\r\n\tdone();\r\n\r\n\treturn d;\r\n};\r\n\r\nDeferred._d = 1;\r\n\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction Deferred(resolver) {\r\n\t\"use strict\";\r\n\tif (typeof resolver != \"function\" && resolver != undefined)\r\n\t\tthrow TypeError();\r\n\t\t\r\n\tif (typeof this != \"object\" || (this && this.then))\r\n\t\tthrow TypeError();\r\n\r\n\t// states\r\n\t// 0: pending\r\n\t// 1: resolving\r\n\t// 2: rejecting\r\n\t// 3: resolved\r\n\t// 4: rejected\r\n\tvar self = this,\r\n\t\tstate = 0,\r\n\t\tval = 0,\r\n\t\tnext = [],\r\n\t\tfn, er;\r\n\r\n\tself[\"promise\"] = self;\r\n\r\n\tself[\"resolve\"] = function (v) {\r\n\t\tfn = self.fn;\r\n\t\ter = self.er;\r\n\t\tif (!state) {\r\n\t\t\tval = v;\r\n\t\t\tstate = 1;\r\n\r\n\t\t\tnextTick(fire);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tself[\"reject\"] = function (v) {\r\n\t\tfn = self.fn;\r\n\t\ter = self.er;\r\n\t\tif (!state) {\r\n\t\t\tval = v;\r\n\t\t\tstate = 2;\r\n\r\n\t\t\tnextTick(fire);\r\n\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tself[\"_d\"] = 1;\r\n\r\n\tself[\"then\"] = function (_fn, _er) {\r\n\t\tif (!(this._d == 1))\r\n\t\t\tthrow TypeError();\r\n\r\n\t\tvar d = new Deferred();\r\n\r\n\t\td.fn = _fn;\r\n\t\td.er = _er;\r\n\t\tif (state == 3) {\r\n\t\t\td.resolve(val);\r\n\t\t}\r\n\t\telse if (state == 4) {\r\n\t\t\td.reject(val);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnext.push(d);\r\n\t\t}\r\n\r\n\t\treturn d;\r\n\t};\r\n\r\n\tself[\"finally\"] = function(_handler){\r\n\t\tvar _value;\r\n\t\tconst handler = function(value){\r\n\t\t\t_value = value;\r\n\t\t\treturn _handler();\r\n\t\t};\r\n\t\t\r\n\t\tconst value = function(){\r\n\t\t\tconst d = new Deferred();\r\n\t\t\tif(state == 4)\r\n\t\t\t\treturn d.reject(_value);\r\n\t\t\telse\r\n\t\t\t\treturn d.resolve(_value);\r\n\t\t};\r\n\r\n\t\treturn self.then(handler, handler).then(value, value);\r\n\t};\r\n\r\n\tself[\"catch\"] = function (_er) {\r\n\t\treturn self[\"then\"](null, _er);\r\n\t};\r\n\r\n\t//compatibility with old version of promiz lib\r\n\tself[\"fail\"] = function (_er) {\r\n\t\treturn self[\"then\"](null, _er);\r\n\t};\r\n\r\n\tvar finish = function (type) {\r\n\t\tstate = type || 4;\r\n\t\tfor (var i=0; i<next.length; i++){\r\n\t\t\tvar p = next[i];\r\n\t\t\tstate == 3 && p.resolve(val) || p.reject(val);\r\n\t\t}\r\n\t};\r\n\r\n\ttry {\r\n\t\tif (typeof resolver == \"function\")\r\n\t\t\tresolver(self[\"resolve\"], self[\"reject\"]);\r\n\t} catch (e) {\r\n\t\tself[\"reject\"](e);\r\n\t}\r\n\r\n\treturn self;\r\n\r\n\t// ref : reference to 'then' function\r\n\t// cb, ec, cn : successCallback, failureCallback, notThennableCallback\r\n\tfunction thennable (ref, cb, ec, cn) {\r\n\t\t// Promises can be rejected with other promises, which should pass through\r\n\t\tif (state == 2) {\r\n\t\t\treturn cn();\r\n\t\t}\r\n\t\tif ((typeof val == \"object\" || typeof val == \"function\") && typeof ref == \"function\") {\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// cnt protects against abuse calls from spec checker\r\n\t\t\t\tvar cnt = 0;\r\n\t\t\t\tref.call(val, function (v) {\r\n\t\t\t\t\tif (cnt++) return;\r\n\t\t\t\t\tval = v;\r\n\t\t\t\t\tcb();\r\n\t\t\t\t}, function (v) {\r\n\t\t\t\t\tif (cnt++) return;\r\n\t\t\t\t\tval = v;\r\n\t\t\t\t\tec();\r\n\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\tval = e;\r\n\t\t\t\tec();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcn();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fire() {\r\n\t\t// check if it's a thenable\r\n\t\tvar ref;\r\n\t\ttry {\r\n\t\t\tref = val && val.then;\r\n\t\t} catch (e) {\r\n\t\t\tval = e;\r\n\t\t\tstate = 2;\r\n\t\t\treturn fire();\r\n\t\t}\r\n\r\n\t\tthennable(ref, function () {\r\n\t\t\tstate = 1;\r\n\t\t\tfire();\r\n\t\t}, function () {\r\n\t\t\tstate = 2;\r\n\t\t\tfire();\r\n\t\t}, function () {\r\n\t\t\ttry {\r\n\t\t\t\tif (state == 1 && typeof fn == \"function\") {\r\n\t\t\t\t\tval = fn(val);\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (state == 2 && typeof er == \"function\") {\r\n\t\t\t\t\tval = er(val);\r\n\t\t\t\t\tstate = 1;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tval = e;\r\n\t\t\t\treturn finish();\r\n\t\t\t}\r\n\r\n\t\t\tif (val == self) {\r\n\t\t\t\tval = TypeError();\r\n\t\t\t\tfinish();\r\n\t\t\t} else thennable(ref, function () {\r\n\t\t\t\tfinish(3);\r\n\t\t\t}, finish, function () {\r\n\t\t\t\tfinish(state == 1 && 3);\r\n\t\t\t});\r\n\r\n\t\t});\r\n\t}\r\n\r\n\r\n}\r\n\r\n// promise factory\r\nDeferred.defer = function () {\r\n\treturn new Deferred(null);\r\n};\r\n\r\nexport default Deferred;","// resolves circular dependencies\r\n// quick solution, must be removed in the next versions\r\n\r\nconst services = {};\r\nexport function define(name, value){\r\n\tservices[name] = value;\r\n}\r\n\r\nexport function use(name){\r\n\treturn services[name];\r\n}","// debugger helpers\r\n// assert and log calls are removed in min versions\r\n\r\nimport { use } from \"../services\";\r\n\r\n//check some rule, show message as error if rule is not correct\r\nexport function assert(test, msg){\r\n\tif (!test){\r\n\t\tlog(\"error\",msg);\r\n\t\tlet message = use(\"message\");\r\n\t\tif (message && typeof msg == \"string\")\r\n\t\t\tmessage({ type:\"debug\", text:msg, expire:-1 });\r\n\t\t\tdebugger; // eslint-disable-line\r\n\t}\r\n}\r\n\r\n//show log message\r\nexport function log(type,message,details){\r\n\tif (arguments.length == 1){\r\n\t\tmessage = type;\r\n\t\ttype = \"log\";\r\n\t}\r\n\tif (window.console && window.console.log){\r\n\t\ttype=type.toLowerCase();\r\n\t\tif (window.console[type])\r\n\t\t\twindow.console[type](message||\"unknown error\");\r\n\t\telse\r\n\t\t\twindow.console.log(type +\": \"+message);\r\n\r\n\t\tif (details) \r\n\t\t\twindow.console.log(details);\r\n\t}\r\n}\r\n\r\nexport var debug_mode = {};\r\n\r\nexport function debug(mode){\r\n\tif (!mode)\r\n\t\tdebug_mode = {};\r\n\telse if (typeof mode !== \"object\")\r\n\t\tdebug_mode = { events: true };\r\n\telse \r\n\t\tfor (var key in mode) debug_mode[key] = mode[key];\r\n}\r\n\r\nlet debug_size_indent = 0;\r\nfunction debug_size_step(){\r\n\tvar str = \"\";\r\n\tfor (let i=0; i<debug_size_indent; i++)\r\n\t\tstr+=\"|  \";\r\n\treturn str;\r\n}\r\nexport function debug_size_box_start(comp, get){\r\n\tif (!debug_mode.size) return;\r\n\tif (!debug_size_indent)\r\n\t\tlog(get?\"--- get sizes ---\":\"--- set sizes ---\");\r\n\tlog(debug_size_step()+comp.name+\"@\"+comp.config.id);\r\n\tdebug_size_indent++;\r\n}\r\nexport function debug_size_box_end(comp, sizes){\r\n\tif (!debug_mode.size) return;\r\n\tdebug_size_indent--;\r\n\tlog(debug_size_step()+sizes.join(\",\"));\r\n}\r\n\r\nexport function debug_size_box(comp, sizes, get){\r\n\tif (!debug_mode.size) return;\r\n\tif (!debug_size_indent)\r\n\t\tlog(get?\"--- get sizes ---\":\"--- set sizes ---\");\r\n\tlog(debug_size_step()+comp.name+\"@\"+comp.config.id+\" \"+sizes.join(\",\"));\r\n}","import {assert} from \"./debug\";\r\n\r\nlet level = 0;\r\nexport function level_in(){\r\n\tlevel++;\r\n\tassert(level !== 100, \"Attempt to copy object with self reference\");\r\n}\r\nexport function level_out(){\r\n\tlevel--;\r\n}\r\n\r\n//coding helpers\r\nexport function clone(source){\r\n\tvar f = clone._function;\r\n\tf.prototype = source;\r\n\treturn new f();\r\n}\r\nclone._function = function(){};\r\n\r\n//copies methods and properties from source to the target\r\nlet extend = function(base, source, force){\r\n\tassert(base,\"Invalid mixing target\");\r\n\tassert(source,\"Invalid mixing source\");\r\n\r\n\tif (base.$protoWait){\r\n\t\t_power_array.insertAt.call(base.$protoWait, source,1);\r\n\t\treturn base;\r\n\t}\r\n\r\n\t//copy methods, overwrite existing ones in case of conflict\r\n\tfor (var method in source)\r\n\t\tif ((!(method in base)) || force)\r\n\t\t\tbase[method] = source[method];\r\n\r\n\t//in case of defaults - preffer top one\r\n\tif (source.defaults)\r\n\t\textend(base.defaults, source.defaults);\r\n\t\r\n\t//if source object has init code - call init against target\r\n\tif (source.$init)\t\r\n\t\tsource.$init.call(base);\r\n\r\n\treturn base;\t\r\n};\r\n\r\n//copies methods and properties from source to the target from all levels\r\nexport function copy(source){\r\n\tassert(source,\"Invalid mixing target\");\r\n\tif (DEBUG) level_in();\r\n\r\n\tvar esModern = !!window.Map && !!window.Set && !!window.WeakMap && !!window.WeakSet;\r\n\tvar target;\r\n\tif(arguments.length>1){\r\n\t\ttarget = arguments[0];\r\n\t\tsource = arguments[1];\r\n\t} else \r\n\t\ttarget = (isArray(source)?[]:{});\r\n\r\n\tfor (var method in source){\r\n\t\tvar from = source[method];\r\n\t\tif(from && typeof from == \"object\" && !(from instanceof RegExp)){\r\n\t\t\tif (isDate(from))\r\n\t\t\t\ttarget[method] = new Date(from);\r\n\t\t\t/* jshint ignore:start */\r\n\t\t\telse if (esModern && (from instanceof Map || from instanceof Set || from instanceof WeakMap || from instanceof WeakSet))\r\n\t\t\t\ttarget[method] = from;\r\n\t\t\t/* jshint ignore:end */\r\n\t\t\telse {\r\n\t\t\t\ttarget[method] = (isArray(from)?[]:{});\r\n\t\t\t\tcopy(target[method],from);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttarget[method] = from;\r\n\t\t}\r\n\t}\r\n\r\n\tif (DEBUG) level_out();\r\n\treturn target;\t\r\n}\r\n\r\nexport function single(source){ \r\n\tvar instance = null;\r\n\tvar t = function(){\r\n\t\tif (!instance)\r\n\t\t\tinstance = new source({});\r\n\t\t\t\r\n\t\tif (instance._reinit)\r\n\t\t\tinstance._reinit.apply(instance, arguments);\r\n\t\treturn instance;\r\n\t};\r\n\treturn t;\r\n}\r\n\r\n\r\n//creates function with specified \"this\" pointer\r\nexport function bind(functor, object){ \r\n\treturn function(){ return functor.apply(object,arguments); };  \r\n}\r\n\r\n\r\n//evaluate javascript code in the global scoope\r\nexport function exec(code){\r\n\tif (window.execScript)\t//special handling for IE\r\n\t\twindow.execScript(code);\r\n\telse window.eval(code);\r\n}\r\n\r\nexport function wrap(code, wrap){\r\n\tif (!code) return wrap;\r\n\treturn function(){\r\n\t\tvar result = code.apply(this, arguments);\r\n\t\twrap.apply(this,arguments);\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\n//check === undefined\r\nexport function isUndefined(a){\r\n\treturn typeof a == \"undefined\";\r\n}\r\n//delay call to after-render time\r\nexport function delay(method, obj, params, delay){\r\n\treturn window.setTimeout(function(){\r\n\t\tif(!(obj&&obj.$destructed)){\r\n\t\t\tvar ret = method.apply(obj,(params||[]));\r\n\t\t\tmethod = obj = params = null;\r\n\t\t\treturn ret;\r\n\t\t}\r\n\t},delay||1);\r\n}\r\n\r\nexport function once(method){\r\n\tvar flag = true;\r\n\treturn function(){\r\n\t\tif (flag){\r\n\t\t\tflag = false;\r\n\t\t\tmethod.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n//common helpers\r\n\r\n//generates unique ID (unique per window, nog GUID)\r\nlet _seed = (new Date()).valueOf();\r\nexport function uid(){\r\n\t_seed++;\r\n\treturn _seed;\r\n}\r\n//resolve ID as html object\r\nexport function toNode(node){\r\n\tif (typeof node == \"string\") return document.getElementById(node);\r\n\treturn node;\r\n}\r\n//resolve function name\r\nexport function toFunctor(str, scope){ \r\n\tif (typeof(str)==\"string\"){\r\n\t\tvar method = str.replace(\"()\",\"\");\r\n\t\tif (scope && scope[method]) return scope[method];\r\n\t\treturn window[method] || window.eval(str);\r\n\t}\r\n\treturn str;\r\n}\r\n/*checks where an object is instance of Array*/\r\nexport function isArray(obj) {\r\n\treturn Array.isArray?Array.isArray(obj):(Object.prototype.toString.call(obj) === \"[object Array]\");\r\n}\r\nexport function isDate(obj){\r\n\treturn obj instanceof Date;\r\n}\r\n\r\n//adds extra methods for the array\r\nexport function _to_array(array){ \r\n\treturn extend((array||[]),_power_array, true);\r\n}\r\n//can be used by _to_array()\r\nexport const _power_array={\r\n\t//remove element at specified position\r\n\tremoveAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it \r\n\tremove:function(value){\r\n\t\tthis.removeAt(this.find(value));\r\n\t},\t\r\n\t//add element to collection at specific position\r\n\tinsertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0)\t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tthis.splice(pos, 0, data); \r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\tfind:function(data){ \r\n\t\tfor (var i=0; i<this.length; i++) \r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1; \r\n\t},\r\n\t//execute some method for each element of array\r\n\teach:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor \r\n\tmap:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t}, \r\n\tfilter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\n//hook for documentation generator\r\nif (DEBUG){\r\n\tif (window.webix_on_core_ready){\r\n\t\textend = window.webix_on_core_ready({ extend }).extend;\r\n\t}\r\n}\r\n\r\nexport { extend };","const i18n = {\r\n\tparseFormat:\"%Y-%m-%d %H:%i:%s\",\r\n\tparseTimeFormat:\"%H:%i:%s\",\r\n};\r\n\r\n\r\nexport default i18n;","import i18n from \"./i18n.js\";\r\n\r\n// converts an object into a string with respect to dates\r\nexport function stringify(obj){\r\n\tvar origin = Date.prototype.toJSON;\r\n\tDate.prototype.toJSON = function(){\r\n\t\treturn i18n.parseFormatStr(this);\r\n\t};\r\n\r\n\tvar result;\r\n\tif (obj instanceof Date)\r\n\t\tresult = obj.toJSON();\r\n\telse\r\n\t\tresult = JSON.stringify(obj);\r\n\r\n\tDate.prototype.toJSON = origin;\r\n\treturn result;\r\n}","import {extend, toFunctor, bind, uid, _to_array} from \"../webix/helpers.js\";\r\nimport {assert, log, debug_mode} from \"../webix/debug.js\";\r\n\r\n//event system\r\nconst EventSystem={\r\n\t$init:function(){\r\n\t\tif (!this._evs_events){\r\n\t\t\tthis._evs_events = {};\t\t//hash of event handlers, name => handler\r\n\t\t\tthis._evs_handlers = {};\t//hash of event handlers, ID => handler\r\n\t\t\tthis._evs_map = {};\r\n\t\t}\r\n\t},\r\n\t//temporary block event triggering\r\n\tblockEvent : function(){\r\n\t\tthis._evs_events._block = true;\r\n\t},\r\n\t//re-enable event triggering\r\n\tunblockEvent : function(){\r\n\t\tthis._evs_events._block = false;\r\n\t},\r\n\tmapEvent:function(map){\r\n\t\textend(this._evs_map, map, true);\r\n\t},\r\n\ton_setter:function(config){\r\n\t\tif(config){\r\n\t\t\tfor(var i in config){\r\n\t\t\t\tvar method = toFunctor(config[i], this.$scope);\r\n\t\t\t\tvar sub = i.indexOf(\"->\");\r\n\t\t\t\tif (sub !== -1){\r\n\t\t\t\t\tthis[i.substr(0,sub)].attachEvent(i.substr(sub+2), bind(method, this));\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.attachEvent(i, method);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//trigger event\r\n\tcallEvent:function(type,params){\r\n\t\tconst master = this._event_master || this;\r\n\t\tif (this._evs_events._block) return true;\r\n\t\t\r\n\t\ttype = type.toLowerCase();\r\n\t\tvar event_stack =this._evs_events[type.toLowerCase()];\t//all events for provided name\r\n\t\tvar return_value = true;\r\n\r\n\t\tif (DEBUG)\r\n\t\t\tif ((debug_mode.events || this.debug) && type !== \"onmousemoving\" )\t//can slowdown a lot\r\n\t\t\t\tlog(\"info\",\"[\"+this.name+\"@\"+((this._settings||{}).id)+\"] event:\"+type,params);\r\n\t\t\r\n\t\tif (event_stack)\r\n\t\t\tfor(var i=0; i<event_stack.length; i++){\r\n\t\t\t\t/*\r\n\t\t\t\t\tCall events one by one\r\n\t\t\t\t\tIf any event return false - result of whole event will be false\r\n\t\t\t\t\tHandlers which are not returning anything - counted as positive\r\n\t\t\t\t*/\r\n\t\t\t\tif (event_stack[i].apply(master, (params||[]))===false) return_value=false;\r\n\t\t\t}\r\n\t\tif (this._evs_map[type]){\r\n\t\t\tvar target = this._evs_map[type];\r\n\t\t\ttarget.$eventSource = this;\r\n\t\t\tif (!target.callEvent(type,params))\r\n\t\t\t\treturn_value =\tfalse;\r\n\t\t\ttarget.$eventSource = null;\r\n\t\t}\r\n\r\n\t\treturn return_value;\r\n\t},\r\n\t//assign handler for some named event\r\n\tattachEvent:function(type,functor,id){\r\n\t\tassert(functor, \"Invalid event handler for \"+type);\r\n\r\n\t\ttype=type.toLowerCase();\r\n\t\t\r\n\t\tid=id||uid(); //ID can be used for detachEvent\r\n\t\tfunctor = toFunctor(functor, this.$scope);\t//functor can be a name of method\r\n\r\n\t\tvar event_stack=this._evs_events[type]||_to_array();\r\n\t\t//save new event handler\r\n\t\tif (arguments[3])\r\n\t\t\tevent_stack.unshift(functor);\r\n\t\telse\r\n\t\t\tevent_stack.push(functor);\r\n\t\tthis._evs_events[type]=event_stack;\r\n\t\tthis._evs_handlers[id]={ f:functor,t:type };\r\n\t\t\r\n\t\treturn id;\r\n\t},\r\n\t//remove event handler\r\n\tdetachEvent:function(id){\r\n\t\tif(!this._evs_handlers[id]){\r\n\t\t\tvar name = (id+\"\").toLowerCase();\r\n\t\t\tif (this._evs_events[name]){\r\n\t\t\t\tthis._evs_events[name] = _to_array();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar type=this._evs_handlers[id].t;\r\n\t\tvar functor=this._evs_handlers[id].f;\r\n\t\t\r\n\t\t//remove from all collections\r\n\t\tvar event_stack=this._evs_events[type];\r\n\t\tevent_stack.remove(functor);\r\n\t\tdelete this._evs_handlers[id];\r\n\t},\r\n\thasEvent:function(type){\r\n\t\ttype=type.toLowerCase();\r\n\t\tvar stack = this._evs_events[type];\r\n\t\tif (stack && stack.length) return true;\r\n\r\n\t\tvar parent = this._evs_map[type];\r\n\t\tif (parent)\r\n\t\t\treturn parent.hasEvent(type);\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default EventSystem;","import {extend} from \"./helpers\";\r\nimport EventSystem from \"../core/eventsystem\";\r\n\r\nvar evs = {};\r\nextend(evs, EventSystem, true);\r\n\r\nexport const callEvent = (a,b) => evs.callEvent(a, b);\r\nexport const attachEvent = (a,b,c,d) => evs.attachEvent(a, b, c, d);\r\nexport const detachEvent = (a) => evs.detachEvent(a);\r\nexport const blockEvent = () => evs.blockEvent();\r\nexport const unblockEvent = () => evs.unblockEvent();\r\nexport const mapEvent = map => evs.mapEvent(map);\r\nexport const hasEvent = type => evs.hasEvent(type);\r\n","import { assert } from \"../../webix/debug\";\r\n\r\nconst xml={\r\n\t_isValidXML:function(data){\r\n\t\tif (!data || !data.documentElement)\r\n\t\t\treturn null;\r\n\t\tif (data.getElementsByTagName(\"parsererror\").length)\r\n\t\t\treturn null;\r\n\t\treturn data;\r\n\t},\r\n\t//convert xml string to xml object if necessary\r\n\ttoObject:function(text, response){\r\n\t\tvar data = response ? (response.rawxml ? response.rawxml() : response) :null;\r\n\t\tif (this._isValidXML(data))\r\n\t\t\treturn data;\r\n\t\tif (typeof text == \"string\")\r\n\t\t\tdata = this.fromString(text.replace(/^[\\s]+/,\"\"));\r\n\t\telse\r\n\t\t\tdata = text;\r\n\r\n\t\tif (this._isValidXML(data))\r\n\t\t\treturn data;\r\n\t\treturn null;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(data){\r\n\t\treturn this.xpath(data,this.records);\r\n\t},\r\n\trecords:\"/*/item\",\r\n\tchild:\"item\",\r\n\tconfig:\"/*/config\",\r\n\t//get hash of properties for single record\r\n\tgetDetails:function(data){\r\n\t\treturn this.tagToObject(data,{});\r\n\t},\r\n\tgetOptions:function(){ \r\n\t\treturn false;\r\n\t},\r\n\t//get count of data and position at which new data_loading need to be inserted\r\n\tgetInfo:function(data){\r\n\t\t\r\n\t\tvar config = this.xpath(data, this.config);\r\n\t\tif (config.length)\r\n\t\t\tconfig = this.assignTypes(this.tagToObject(config[0],{}));\r\n\t\telse \r\n\t\t\tconfig = null;\r\n\r\n\t\treturn {\r\n\t\t\tsize:(data.documentElement.getAttribute(\"total_count\")||0),\r\n\t\t\tfrom:data.documentElement.getAttribute(\"pos\"),\r\n\t\t\tparent:(data.documentElement.getAttribute(\"parent\")||0),\r\n\t\t\tconfig:config\r\n\t\t};\r\n\t},\r\n\t//xpath helper\r\n\txpath:function(xml,path){\r\n\t\tif (window.XPathResult){\t//FF, KHTML, Opera\r\n\t\t\tvar node=xml;\r\n\t\t\tif(xml.nodeName.indexOf(\"document\")==-1)\r\n\t\t\t\txml=xml.ownerDocument;\r\n\r\n\t\t\tvar res = [];\r\n\t\t\tvar col = xml.evaluate(path, node, null, XPathResult.ANY_TYPE, null);\r\n\t\t\tvar temp = col.iterateNext();\r\n\t\t\twhile (temp){ \r\n\t\t\t\tres.push(temp);\r\n\t\t\t\ttemp = col.iterateNext();\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar test = true;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof(xml.selectNodes)==\"undefined\")\r\n\t\t\t\t\ttest = false;\r\n\t\t\t} catch(e){ /*IE7 and below can't operate with xml object*/ }\r\n\t\t\t//IE\r\n\t\t\tif (test)\r\n\t\t\t\treturn xml.selectNodes(path);\r\n\t\t\telse {\r\n\t\t\t\t//there is no interface to do XPath\r\n\t\t\t\t//use naive approach\r\n\t\t\t\tvar name = path.split(\"/\").pop();\r\n\r\n\t\t\t\treturn xml.getElementsByTagName(name);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tassignTypes:function(obj){\r\n\t\tfor (var k in obj){\r\n\t\t\tvar test = obj[k];\r\n\t\t\tif (typeof test == \"object\")\r\n\t\t\t\tthis.assignTypes(test);\r\n\t\t\telse if (typeof test == \"string\"){\r\n\t\t\t\tif (test === \"\") \r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif (test == \"true\")\r\n\t\t\t\t\tobj[k] = true;\r\n\t\t\t\telse if (test == \"false\")\r\n\t\t\t\t\tobj[k] = false;\r\n\t\t\t\telse if (test == test*1)\r\n\t\t\t\t\tobj[k] = obj[k]*1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\t//convert xml tag to js object, all subtags and attributes are mapped to the properties of result object\r\n\ttagToObject:function(tag,z){\r\n\t\tvar isArray = tag.nodeType == 1 && tag.getAttribute(\"stack\");\r\n\t\tvar hasSubTags = 0;\r\n\r\n\t\tif (!isArray){\r\n\t\t\tz=z||{};\r\n\t\t\t\r\n\r\n\t\t\t//map attributes\r\n\t\t\tlet a=tag.attributes;\r\n\t\t\tif(a && a.length)\r\n\t\t\t\tfor (let i=0; i<a.length; i++){\r\n\t\t\t\t\tz[a[i].name]=a[i].value;\r\n\t\t\t\t\thasSubTags = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t//map subtags\r\n\t\t\tlet b=tag.childNodes;\r\n\t\t\tfor (let i=0; i<b.length; i++)\r\n\t\t\t\tif (b[i].nodeType==1){\r\n\t\t\t\t\tconst name = b[i].tagName;\r\n\t\t\t\t\tif (z[name]){\r\n\t\t\t\t\t\tif (typeof z[name].push != \"function\")\r\n\t\t\t\t\t\t\tz[name] = [z[name]];\r\n\t\t\t\t\t\tz[name].push(this.tagToObject(b[i],{}));\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tz[name]=this.tagToObject(b[i],{});\t//sub-object for complex subtags\r\n\t\t\t\t\thasSubTags = 2;\r\n\t\t\t\t}\r\n\r\n\t\t\tif (!hasSubTags)\r\n\t\t\t\treturn this.nodeValue(tag);\r\n\t\t\t//each object will have its text content as \"value\" property\r\n\t\t\t//only if has not sub tags\r\n\t\t\tif (hasSubTags < 2)\r\n\t\t\t\tz.value = z.value||this.nodeValue(tag);\r\n\r\n\t\t} else {\r\n\t\t\tz = [];\r\n\t\t\tlet b=tag.childNodes;\r\n\t\t\tfor (let i=0; i<b.length; i++)\r\n\t\t\t\tif (b[i].nodeType==1)\r\n\t\t\t\t\tz.push(this.tagToObject(b[i],{}));\r\n\t\t}\r\n\r\n\t\treturn z;\r\n\t},\r\n\t//get value of xml node \r\n\tnodeValue:function(node){\r\n\t\tif (node.firstChild){\r\n\t\t\treturn node.firstChild.wholeText || node.firstChild.data;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t},\r\n\t//convert XML string to XML object\r\n\tfromString:function(xmlString){\r\n\t\ttry{\r\n\t\t\tif (window.DOMParser)\t\t// FF, KHTML, Opera\r\n\t\t\t\treturn (new DOMParser()).parseFromString(xmlString,\"text/xml\");\r\n\t\t\t/* global ActiveXObject */\r\n\t\t\tif (window.ActiveXObject){\t// IE, utf-8 only \r\n\t\t\t\tvar temp=new ActiveXObject(\"Microsoft.xmlDOM\");\r\n\t\t\t\ttemp.loadXML(xmlString);\r\n\t\t\t\treturn temp;\r\n\t\t\t}\r\n\t\t} catch(e){\r\n\t\t\tassert(0, e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tassert(0, \"Load from xml string is not supported\");\r\n\t}\r\n};\r\n\r\nexport default xml;","import { log, assert } from \"../../webix/debug\";\r\nimport {isArray, uid} from \"../../webix/helpers\";\r\n\r\nconst json = {\r\n\t//convert json string to json object if necessary\r\n\ttoObject:function(data){\r\n\t\tif (!data) return null;\r\n\t\tif (typeof data == \"string\"){\r\n\t\t\ttry{\r\n\t\t\t\tif (this.parseDates){\r\n\t\t\t\t\tvar isodate = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(.\\d{1-3})?Z/;\r\n\t\t\t\t\tdata = JSON.parse(data, function(key, value){\r\n\t\t\t\t\t\tif (typeof value == \"string\"){\r\n\t\t\t\t\t\t\tif (isodate.test(value))\r\n\t\t\t\t\t\t\t\treturn new Date(value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata =JSON.parse(data);\r\n\t\t\t\t}\r\n\t\t\t} catch(e){\r\n\t\t\t\tlog(e);\r\n\t\t\t\tlog(data);\r\n\t\t\t\tassert(0, \"Invalid JSON data for parsing\");\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(data){\r\n\t\tif (data && data.data)\r\n\t\t\tdata = data.data;\r\n\r\n\t\tif (data && !isArray(data))\r\n\t\t\treturn [data];\r\n\t\treturn data;\r\n\t},\r\n\t//get hash of properties for single record\r\n\tgetDetails:function(data){\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn { id:(data||uid()), value:data };\r\n\t\treturn data;\r\n\t},\r\n\tgetOptions:function(data){\r\n\t\treturn data.collections;\r\n\t},\r\n\t//get count of data and position at which new data need to be inserted\r\n\tgetInfo:function(data){\r\n\t\treturn {\r\n\t\t\tsize:(data.total_count||0),\r\n\t\t\tfrom:data.pos,\r\n\t\t\tparent:(data.parent||0),\r\n\t\t\tconfig:(data.config)\r\n\t\t};\r\n\t},\r\n\tchild:\"data\",\r\n\tparseDates:false\r\n};\r\n\r\nexport default json;","import { log, assert } from \"../webix/debug\";\r\nimport { isArray, extend } from \"../webix/helpers\";\r\nimport { stringify } from \"../webix/stringify\";\r\nimport { callEvent } from \"../webix/customevents\";\r\nimport promise from \"../thirdparty/promiz\";\r\n\r\nimport xml from \"./drivers/xml\";\r\nimport json from \"./drivers/json\";\r\n\r\nexport function ajax(url,params,call){\r\n\t//if parameters was provided - made fast call\r\n\tif (arguments.length!==0){\r\n\t\treturn (new ajax()).get(url,params,call);\r\n\t}\r\n\r\n\tif (!this || !this.getXHR) return new ajax(); //allow to create new instance without direct new declaration\r\n\r\n\treturn this;\r\n}\r\n\r\najax.count = 0;\r\najax.prototype={\r\n\tmaster:null,\r\n\t//creates xmlHTTP object\r\n\tgetXHR:function(){\r\n\t\treturn new XMLHttpRequest();\r\n\t},\r\n\tstringify:function(obj){\r\n\t\treturn stringify(obj);\r\n\t},\r\n\t/*\r\n\t\tsend data to the server\r\n\t\tparams - hash of properties which will be added to the url\r\n\t\tcall - callback, can be an object with success and error functions\r\n\t*/\r\n\t_send:function(url, params, call, mode){\r\n\t\tvar master;\r\n\t\t//webix.ajax(url, callback) - can be called only by user\r\n\t\tif (params && (isArray(params) || (typeof (params.success || params.error || params) == \"function\"))){\r\n\t\t\tmaster = call;\r\n\t\t\tcall = params;\r\n\t\t\tparams = null;\r\n\t\t}\r\n\r\n\t\tvar defer = promise.defer();\r\n\t\tvar x=this.getXHR();\r\n\t\tvar headers = this._header || {};\r\n\r\n\t\tif (!callEvent(\"onBeforeAjax\", [mode, url, params, x, headers, null, defer])){\r\n\t\t\treturn defer.reject(x);\r\n\t\t}\r\n\r\n\t\t//add content-type to POST|PUT|DELETE\r\n\t\tvar json_mode = false;\r\n\t\tif (mode !== \"GET\"){\r\n\t\t\tvar found = false;\r\n\t\t\tfor (let key in headers)\r\n\t\t\t\tif (key.toString().toLowerCase() == \"content-type\"){\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t\tif (headers[key] == \"application/json\")\r\n\t\t\t\t\t\tjson_mode = true;\r\n\t\t\t\t}\r\n\t\t\tif (!found && !(window.FormData && (params instanceof window.FormData)))\r\n\t\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t}\r\n\r\n\t\t//add extra params to the url\r\n\t\tif (typeof params == \"object\" && !(window.FormData && (params instanceof window.FormData))){\r\n\t\t\tif (json_mode)\r\n\t\t\t\tparams = this.stringify(params);\r\n\t\t\telse {\r\n\t\t\t\tvar t=[];\r\n\t\t\t\tfor (var a in params){\r\n\t\t\t\t\tvar value = params[a];\r\n\t\t\t\t\tif (value === null || value === undefined)\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\tif(typeof value===\"object\")\r\n\t\t\t\t\t\tvalue = this.stringify(value);\r\n\t\t\t\t\tt.push(a+\"=\"+encodeURIComponent(value)); // utf-8 escaping\r\n\t\t\t\t}\r\n\t\t\t\tparams=t.join(\"&\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (params && mode===\"GET\"){\r\n\t\t\turl=url+(url.indexOf(\"?\")!=-1 ? \"&\" : \"?\")+params;\r\n\t\t\tparams = null;\r\n\t\t}\r\n\r\n\t\tx.open(mode, url, !this._sync);\r\n\r\n\t\tvar type = this._response;\r\n\t\tif (type) x.responseType = type;\r\n\r\n\t\t//if header was provided - use it\r\n\t\tfor (let key in headers)\r\n\t\t\tx.setRequestHeader(key, headers[key]);\r\n\t\t\r\n\t\t//async mode, define loading callback\r\n\t\tvar self=this;\r\n\t\tthis.master = this.master || master;\r\n\t\tx.onreadystatechange = function(){\r\n\t\t\tif (!x.readyState || x.readyState == 4){\r\n\t\t\t\tajax.count++;\r\n\r\n\t\t\t\tvar is_error = x.status >= 400 || x.status === 0;\r\n\t\t\t\tvar text, data;\r\n\t\t\t\tif (x.responseType == \"blob\" || x.responseType == \"arraybuffer\"){\r\n\t\t\t\t\ttext = \"\";\r\n\t\t\t\t\tdata = x.response;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttext = x.responseText||\"\";\r\n\t\t\t\t\tdata = self._data(x);\r\n\t\t\t\t}\r\n\t\t\t\tif (is_error){\r\n\t\t\t\t\tcallEvent(\"onAjaxError\", [x]);\r\n\t\t\t\t\tdefer.reject(x);\r\n\t\t\t\t\tif(call)\r\n\t\t\t\t\t\tajax.$callback((self.master || window), call, text, data, x, is_error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefer.resolve(data);\r\n\t\t\t\t\tif(call)\r\n\t\t\t\t\t\tajax.$callback((self.master || window), call, text, data, x, is_error);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (this._timeout)\r\n\t\t\tx.timeout = this._timeout;\r\n\r\n\t\t//IE can use sync mode sometimes, fix it\r\n\t\tif (!this._sync)\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tx.send(params||null);\r\n\t\t\t}, 0);\r\n\t\telse\r\n\t\t\tx.send(params||null);\r\n\t\t\r\n\t\tif (this.master && !this._sync){\r\n\t\t\tdefer.then(function(data){\r\n\t\t\t\t//anti-leak\r\n\t\t\t\tself.master=null;\r\n\t\t\t\tcall=self=master=null;\t\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this._sync?x:defer; //return XHR, which can be used in case of sync. mode\r\n\t},\r\n\t_data:function(x){\r\n\t\treturn {\r\n\t\t\txml:function(){ \r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn xml.tagToObject(xml.toObject(x.responseText, this));\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){\r\n\t\t\t\t\tlog(x.responseText);\r\n\t\t\t\t\tlog(e.toString()); assert(0, \"Invalid xml data for parsing\"); \r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trawxml:function(){ \r\n\t\t\t\tif (!window.XPathResult)\r\n\t\t\t\t\treturn xml.fromString(x.responseText);\r\n\t\t\t\treturn x.responseXML;\r\n\t\t\t},\r\n\t\t\ttext:function(){ return x.responseText; },\r\n\t\t\tjson:function(){\r\n\t\t\t\treturn json.toObject(x.responseText, false);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\t//GET request\r\n\tget:function(url,params,call){\r\n\t\treturn this._send(url,params,call,\"GET\");\r\n\t},\r\n\t//POST request\r\n\tpost:function(url,params,call){\r\n\t\treturn this._send(url,params,call,\"POST\");\r\n\t},\r\n\t//PUT request\r\n\tput:function(url,params,call){\r\n\t\treturn this._send(url,params,call,\"PUT\");\r\n\t},\r\n\t//DELETE request\r\n\tdel:function(url,params,call){\r\n\t\treturn this._send(url,params,call,\"DELETE\");\r\n\t},\r\n\t//PATCH request\r\n\tpatch:function(url,params,call){\r\n\t\treturn this._send(url,params,call,\"PATCH\");\r\n\t},\r\n\r\n\tsync:function(){\r\n\t\tthis._sync = true;\r\n\t\treturn this;\r\n\t},\r\n\ttimeout:function(num){\r\n\t\tthis._timeout = num;\r\n\t\treturn this;\r\n\t},\r\n\tresponse:function(value){\r\n\t\tthis._response = value;\r\n\t\treturn this;\r\n\t},\r\n\theaders:function(header){\r\n\t\tthis._header = extend(this._header||{},header);\r\n\t\treturn this;\r\n\t},\r\n\tbind:function(master){\r\n\t\tthis.master = master;\r\n\t\treturn this;\r\n\t}\r\n};\r\najax.$callback = function(owner, call, text, data, x, is_error){\r\n\tif (owner.$destructed) return;\r\n\r\n\tif (is_error)\r\n\t\tcallEvent(\"onAjaxError\", [x]);\r\n\t\r\n\tif (call){\r\n\t\tvar method = call.success || call;\r\n\t\tif (is_error)\r\n\t\t\tmethod = call.error;\r\n\t\tif (method && method.call)\r\n\t\t\tmethod.call(owner,text,data,x);\r\n\t}\r\n};","import {ajax} from \"../ajax\";\r\n\r\nconst proxy = {\r\n\t$proxy:true,\r\n\tload:function(){\r\n\t\tvar parts = this.source.split(\"@\");\r\n\t\tvar ext = parts[0].split(\".\").pop();\r\n\t\treturn ajax().response(\"arraybuffer\").get(parts[0]).then(function(res){\r\n\t\t\tvar options = { ext:ext, dataurl : parts[1] };\r\n\t\t\treturn { data:res, options:options };\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default proxy;","import {delay} from \"../../webix/helpers\";\r\n\r\n\r\n\r\nconst proxy = {\r\n\t$proxy:true,\r\n\tload:function(){},\r\n\tsave:function(v,u,d){\r\n\t\tdelay(function(){\r\n\t\t\twindow.console.log(\"[DP] \"+u.id+\" -> \"+u.operation, u.data);\r\n\t\t\tvar data = {\r\n\t\t\t\tid:u.data.id,\r\n\t\t\t\tnewid:u.data.id,\r\n\t\t\t\tstatus:u.data.operation\r\n\t\t\t};\r\n\t\t\td.processResult(data, data);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default proxy;","import {ajax} from \"../ajax\";\r\n\r\nconst proxy = {\r\n\t$proxy:true,\r\n\tload:function(){\r\n\t\treturn ajax(this.source);\r\n\t},\r\n\tsave:function(view, update){\r\n\t\treturn proxy._save_logic.call(this, update, ajax());\r\n\t},\r\n\t_save_logic:function(update, ajax){\r\n\t\tvar url = this.source;\r\n\t\tvar query = \"\";\r\n\t\tvar mark = url.indexOf(\"?\");\r\n\r\n\t\tif (mark !== -1){\r\n\t\t\tquery = url.substr(mark);\r\n\t\t\turl = url.substr(0, mark);\r\n\t\t}\r\n\r\n\t\turl += url.charAt(url.length-1) == \"/\" ? \"\" : \"/\";\r\n\t\tvar mode = update.operation;\r\n\r\n\r\n\t\tvar data = update.data;\r\n\t\tif (mode == \"insert\") delete data.id;\r\n\r\n\t\t//call rest URI\r\n\t\tif (mode == \"update\"){\r\n\t\t\treturn ajax.put(url + data.id + query, data);\r\n\t\t} else if (mode == \"delete\") {\r\n\t\t\treturn ajax.del(url + data.id + query, data);\r\n\t\t} else {\r\n\t\t\treturn ajax.post(url + query, data);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default proxy;\r\n","import {ajax} from \"../ajax\";\r\nimport rest from \"./rest\";\r\n\r\nconst proxy = {\r\n\t$proxy:true,\r\n\tload:function(){\r\n\t\treturn ajax(this.source);\r\n\t},\r\n\tsave:function(view, update){\r\n\t\tvar xhr = ajax().headers({ \"Content-Type\":\"application/json\" });\r\n\t\treturn rest._save_logic.call(this, update, xhr);\r\n\t}\r\n};\r\n\r\nexport default proxy;","import {extend} from \"../../webix/helpers\";\r\n\r\nimport {ajax} from \"../ajax\";\r\n\r\nconst proxy = {\r\n\t$proxy:true,\r\n\tload:function(view, params){\r\n\t\tparams = extend(params||{}, this.params || {}, true);\r\n\t\treturn ajax().post(this.source, params);\r\n\t}\r\n};\r\n\r\nexport default proxy;","import {ajax} from \"../ajax\";\r\n\r\nfunction unbox(data){\r\n\tif (!data || !typeof data === \"object\" || Array.isArray(data))\r\n\t\treturn data;\r\n\r\n\tvar lkey =\"\";\r\n\tvar count = 0;\r\n\tfor (var key in data){\r\n\t\tcount++;\r\n\t\tif (count == 2) return data;\r\n\t\tlkey = key;\r\n\t}\r\n\r\n\treturn data[lkey];\r\n}\r\n\r\nconst GraphQL = {\r\n\t$proxy:true,\r\n\tsave:function(data){\r\n\t\treturn this.load(data);\r\n\t},\r\n\tload:function(view){\r\n\t\tvar params = {\r\n\t\t\tquery: this.source\r\n\t\t};\r\n\t\tif (arguments.length === 1){\r\n\t\t\tparams.variables = view;\r\n\t\t}\r\n\r\n\t\treturn ajax()\r\n\t\t\t.headers({ \"Content-type\": \"application/json\" })\r\n\t\t\t.post(this.url, params)\r\n\t\t\t.then(function(data){\r\n\t\t\t\treturn unbox(data.json().data);\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\nexport default GraphQL;","import {assert} from \"../webix/debug\";\r\nimport {extend, copy as makeCopy} from \"../webix/helpers\";\r\n\r\nimport binary from \"./proxy/binary\";\r\nimport debug from \"./proxy/debug\";\r\nimport json from \"./proxy/json\";\r\nimport post from \"./proxy/post\";\r\nimport rest from \"./proxy/rest\";\r\nimport graphql from \"./proxy/graphql\";\r\n\r\nfunction proxy(name, source, extra){\r\n\tassert(proxy[name], \"Invalid proxy name: \"+name);\r\n\r\n\tvar copy = makeCopy(proxy[name]);\r\n\tcopy.source = source;\r\n\r\n\tif (extra)\r\n\t\textend(copy, extra, true);\r\n\r\n\tif (copy.init) copy.init();\r\n\treturn copy;\r\n}\r\n\r\nproxy.$parse = function(value){\r\n\tif (typeof value == \"string\" && value.indexOf(\"->\") != -1){\r\n\t\tvar parts = value.split(\"->\");\r\n\t\treturn proxy(parts[0], parts[1]);\r\n\t}\r\n\treturn value;\r\n};\r\n\r\nproxy.binary = binary;\r\nproxy.debug = debug;\r\nproxy.json = json;\r\nproxy.post = post;\r\nproxy.rest = rest;\r\nproxy.GraphQL = graphql;\r\n\r\nexport default proxy;","const jsarray={\r\n\t//parse jsarray string to jsarray object if necessary\r\n\ttoObject:function(data){\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn JSON.parse(data);\r\n\t\treturn data;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(data){\r\n\t\tif (data && data.data)\r\n\t\t\tdata = data.data;\r\n\t\treturn data;\r\n\t},\r\n\t//get hash of properties for single record, in case of array they will have names as \"data{index}\"\r\n\tgetDetails:function(data){\r\n\t\tvar result = {};\r\n\t\tfor (var i=0; i < data.length; i++)\r\n\t\t\tresult[\"data\"+i]=data[i];\r\n\t\tif (this.idColumn !== null)\r\n\t\t\tresult.id = data[this.idColumn];\r\n\r\n\t\treturn result;\r\n\t},\r\n\tgetOptions:function(){ return false; },\r\n\t//dyn loading is not supported by js-array data source\r\n\tgetInfo:function(){\r\n\t\treturn {\r\n\t\t\tsize:0\r\n\t\t};\r\n\t},\r\n\tidColumn:null\r\n};\r\n\r\nexport default jsarray;","import { toNode } from \"../../webix/helpers.js\";\r\nimport xml from \"./xml.js\";\r\n\r\nconst html = {\r\n\t/*\r\n\t\tincoming data can be\r\n\t\t - ID of parent container\r\n\t\t - HTML text\r\n\t*/\r\n\ttoObject:function(data){\r\n\t\tif (typeof data == \"string\"){\r\n\t\t\tvar t=null;\r\n\t\t\tif (data.indexOf(\"<\")==-1)\t//if no tags inside - probably its an ID\r\n\t\t\t\tt = toNode(data);\r\n\t\t\tif (!t){\r\n\t\t\t\tt=document.createElement(\"DIV\");\r\n\t\t\t\tt.innerHTML = data;\r\n\t\t\t}\r\n\t\t\r\n\t\t\treturn t.firstChild;\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(node){\r\n\t\treturn node.getElementsByTagName(this.tag);\r\n\t},\r\n\t//get hash of properties for single record\r\n\tgetDetails:function(data){\r\n\t\treturn xml.tagToObject(data);\r\n\t},\r\n\tgetOptions:function(){ \r\n\t\treturn false;\r\n\t},\r\n\t//dyn loading is not supported by HTML data source\r\n\tgetInfo:function(){\r\n\t\treturn {\r\n\t\t\tsize:0\r\n\t\t};\r\n\t},\r\n\ttag: \"LI\"\r\n};\r\n\r\nexport default html;","const env = {};\r\n\r\nenv.cdn = \"//cdn.webix.com/\";\r\nenv.codebase = \"\";\r\nenv.zIndexBase = 100;\r\nenv.scrollSize = 17;\r\nenv.strict = !!window.webix_strict;\r\nenv.https = document.location.protocol === \"https:\";\r\n\r\nvar agent = navigator.userAgent;\r\nenv.isMac = agent.indexOf(\"Mac\")!=-1;\r\nif (agent.indexOf(\"Mobile\")!=-1 || agent.indexOf(\"Windows Phone\")!=-1)\r\n\tenv.mobile = true;\r\nif (env.mobile || agent.indexOf(\"iPad\")!=-1 || agent.indexOf(\"Android\")!=-1)\r\n\tenv.touch = true;\r\nif (!env.touch && (navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1))\r\n\tenv.touch = true;\r\nif (agent.indexOf(\"Opera\")!=-1)\r\n\tenv.isOpera=true;\r\nelse{\r\n\t//very rough detection, but it is enough for current goals\r\n\tenv.isIE=!!document.all || (agent.indexOf(\"Trident\") !== -1);\r\n\tif (env.isIE){\r\n\t\tvar version = parseFloat(navigator.appVersion.split(\"MSIE\")[1]);\r\n\t\tif (version == 8)\r\n\t\t\tenv.isIE8 = true;\r\n\t}\r\n\tenv.isEdge=(agent.indexOf(\"Edge\")!=-1);\r\n\tenv.isFF=(agent.indexOf(\"Firefox\")!=-1);\r\n\tenv.isWebKit=(agent.indexOf(\"KHTML\")!=-1);\r\n\tenv.isSafari=env.isWebKit && env.isMac && (agent.indexOf(\"Chrome\")==-1);\r\n\r\n\t//maximum height/width for HTML elements in pixels (rough), bigger values will be ignored by browser\r\n\tif(env.isIE || env.isEdge || env.isFF)\r\n\t\tenv.maxHTMLElementSize = 10000000;\r\n\tif(env.isSafari)\r\n\t\tenv.maxHTMLElementSize = 100000000;\r\n}\r\n\r\nif(agent.toLowerCase().indexOf(\"android\")!=-1){\r\n\tenv.isAndroid = true;\r\n\tif(agent.toLowerCase().indexOf(\"trident\")!=-1){\r\n\t\tenv.isAndroid = false;\r\n\t\tenv.isIEMobile = true;\r\n\t}\r\n}\r\n\r\nenv.transform = false;\r\nenv.transition = false;\r\n\r\nvar found_index = -1;\r\nvar js_list =  [\"\", \"webkit\", \"Moz\", \"O\", \"ms\"];\r\nvar css_list = [\"\", \"-webkit-\", \"-Moz-\", \"-o-\", \"-ms-\"];\r\n\r\n\r\nvar d = document.createElement(\"DIV\");\r\nfor (var j=0; j < js_list.length; j++) {\r\n\tvar name = js_list[j] ? (js_list[j]+\"Transform\") : \"transform\";\r\n\tif(typeof d.style[name] != \"undefined\"){\r\n\t\tfound_index = j;\r\n\t\tbreak;\r\n\t}\r\n}\r\n\r\n\r\nif (found_index > -1){\r\n\tenv.cssPrefix = css_list[found_index];\r\n\tvar jp = env.jsPrefix = js_list[found_index];\r\n\r\n\tenv.transform = jp ? jp+\"Transform\" : \"transform\";\r\n\tenv.transition = jp ? jp+\"Transition\" : \"transition\";\r\n\tenv.transitionDuration = jp ? jp+\"TransitionDuration\" : \"transitionDuration\";\r\n\r\n\td.style[env.transform] = \"translate3d(0,0,0)\";\r\n\tenv.translate = (d.style[env.transform])?\"translate3d\":\"translate\";\r\n\tenv.transitionEnd = ((env.cssPrefix == \"-Moz-\")?\"transitionend\":(jp ? jp+\"TransitionEnd\" : \"transitionend\"));\r\n}\r\n\r\nenv.pointerevents = (!env.isIE ||(new RegExp(\"Trident/.*rv:11\")).exec(agent) !== null);\r\n\r\n//touch events that can be prevented\r\nenv.passiveEventListeners = false;\r\ntry {\r\n\tvar opts = Object.defineProperty({}, \"passive\", {\r\n\t\tget: function() { // eslint-disable-line\r\n\t\t\tenv.passiveEventListeners = true;\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener(\"testPassive\", null, opts);\r\n\twindow.removeEventListener(\"testPassive\", null, opts);\r\n} catch (e) {} // eslint-disable-line\r\n\r\nenv.svg = (function(){\r\n\treturn document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\");\r\n})();\r\n\r\nenv.svganimation = (function(){\r\n\treturn document.implementation.hasFeature(\"https://www.w3.org/TR/SVG11/feature#SVG-animation\", \"1.1\");\r\n})();\r\n\r\nexport default env;","import {delay, uid, toNode, isUndefined} from \"./helpers.js\";\r\nimport env from \"./env.js\";\r\n\r\nlet _native_on_selectstart = 0;\r\nconst _style_element = {};\r\nconst _style_cache = {};\r\n\r\nexport function denySelect(){\r\n\tif (!_native_on_selectstart)\r\n\t\t_native_on_selectstart = document.onselectstart;\r\n\tdocument.onselectstart = stopEvent;\r\n}\r\n\r\nexport function allowSelect(){\r\n\tif (_native_on_selectstart !== 0){\r\n\t\tdocument.onselectstart = _native_on_selectstart||null;\r\n\t}\r\n\t_native_on_selectstart = 0;\r\n\r\n}\r\n\r\nexport function index(node){\r\n\tvar k=0;\r\n\t//must be =, it is not a comparation!\r\n\twhile ((node = node.previousSibling)) k++;\r\n\treturn k;\r\n}\r\n\r\nexport function createCss(rule, sufix){\r\n\tvar text = \"\";\r\n\tsufix = sufix || \"\";\r\n\r\n\tfor (var key in rule)\r\n\t\ttext+= key+\":\"+rule[key]+\";\";\r\n    \r\n\tvar name = _style_cache[text+sufix];\r\n\tif (!name){\r\n\t\tname = \"s\"+uid();\r\n\t\taddStyle(\".\"+name+(sufix||\"\")+\"{\"+text+\"}\");\r\n\t\t_style_cache[text+sufix] = name;\r\n\t}\r\n\treturn name;\r\n}\r\n\r\nexport function addStyle(rule, group){\r\n\tvar style = group ? _style_element[group] :_style_element[\"default\"];\r\n\tif(!style){\r\n\t\tstyle = document.createElement(\"style\");\r\n\t\tstyle.setAttribute(\"type\", \"text/css\");\r\n\t\tstyle.setAttribute(\"media\", \"screen,print\");\r\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(style);\r\n\r\n\t\tif (group)\r\n\t\t\t_style_element[group] = style;\r\n\t\telse\r\n\t\t\t_style_element[\"default\"] = style;\r\n\t}\r\n\t/*IE8*/\r\n\tif (style.styleSheet)\r\n\t\tstyle.styleSheet.cssText += rule;\r\n\telse\r\n\t\tstyle.appendChild(document.createTextNode(rule));\r\n}\r\n\r\nexport function removeStyle(group){\r\n\tvar box = _style_element[group||\"default\"];\r\n\tif (box)\r\n\t\tbox.innerHTML = \"\";\r\n}\r\n\r\nexport function create(name,attrs,html){\r\n\tattrs = attrs || {};\r\n\tvar node = document.createElement(name);\r\n\tfor (var attr_name in attrs)\r\n\t\tnode.setAttribute(attr_name, attrs[attr_name]);\r\n\tif (attrs.style)\r\n\t\tnode.style.cssText = attrs.style;\r\n\tif (attrs[\"class\"])\r\n\t\tnode.className = attrs[\"class\"];\r\n\tif (html)\r\n\t\tnode.innerHTML=html;\r\n\treturn node;\r\n}\r\n\r\n//return node value, different logic for different html elements\r\nexport function getValue(node){\r\n\tnode = toNode(node);\r\n\tif (!node) return \"\";\r\n\treturn isUndefined(node.value)?node.innerHTML:node.value;\r\n}\r\n\r\n//remove html node, can process an array of nodes at once\r\nexport function remove(node){\r\n\tif (node instanceof Array)\r\n\t\tfor (var i=0; i < node.length; i++)\r\n\t\t\tremove(node[i]);\r\n\telse if (node && node.parentNode)\r\n\t\tnode.parentNode.removeChild(node);\r\n}\r\n\r\n//insert new node before sibling, or at the end if sibling doesn't exist\r\nexport function insertBefore(node,before,rescue){\r\n\tif (!node) return;\r\n\tif (before && before.parentNode)\r\n\t\tbefore.parentNode.insertBefore(node, before);\r\n\telse\r\n\t\trescue.appendChild(node);\r\n}\r\n\r\n//return custom ID from html element \r\n//will check all parents starting from event's target\r\nexport function locate(e,id){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||event;\r\n\t\ttrg=e.target;\r\n\t}\r\n    \r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(id);\r\n\t\t\tif (test) return test;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\t\r\n\treturn null;\r\n}\r\n\r\n//returns position of html element on the page\r\nexport function offset(elem) {\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tconst box = elem.getBoundingClientRect();\r\n\t\tconst body = document.body;\r\n\t\tconst docElem = document.documentElement;\r\n\t\tconst scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tconst scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tconst clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tconst clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\tconst top  = box.top +  scrollTop - clientTop;\r\n\t\tconst left = box.left + scrollLeft - clientLeft;\r\n\t\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight };\r\n\t} else { //fallback to naive approach\r\n\t\tlet top=0, left=0;\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\t\treturn { y: top, x: left, width:elem.offsetHeight, height:elem.offsetWidth };\r\n\t}\r\n}\r\n\r\n//returns relative position of event\r\nexport function posRelative(ev){\r\n\tev = ev || event;\r\n\tif (!isUndefined(ev.offsetX))\r\n\t\treturn { x:ev.offsetX, y:ev.offsetY };\t//ie, webkit\r\n\telse\r\n\t\treturn { x:ev.layerX, y:ev.layerY };\t//firefox\r\n}\r\n\r\n//returns position of event\r\nexport function pos(ev){\r\n\tev = ev || event;\r\n\tif (ev.touches && ev.touches[0])\r\n\t\tev = ev.touches[0];\r\n\r\n\tif(ev.pageX || ev.pageY)\t//FF, KHTML\r\n\t\treturn {x:ev.pageX, y:ev.pageY};\r\n\t//IE\r\n\tvar d  =  ((env.isIE)&&(document.compatMode != \"BackCompat\"))?document.documentElement:document.body;\r\n\treturn {\r\n\t\tx:ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty:ev.clientY + d.scrollTop  - d.clientTop\r\n\t};\r\n}\r\n\r\n//prevent event action\r\nexport function preventEvent(e){\r\n\tif(e && e.preventDefault) e.preventDefault();\r\n\tif(e) e.returnValue = false;\r\n\treturn stopEvent(e);\r\n}\r\n\r\n//stop event bubbling\r\nexport function stopEvent(e){\r\n\te = (e||event);\r\n\tif(e.stopPropagation) e.stopPropagation();\r\n\te.cancelBubble=true;\r\n\treturn false;\r\n}\r\n\r\nexport function triggerEvent(node, type, name){\r\n\tif(document.createEventObject){\r\n\t\tconst ev = document.createEventObject();\r\n\t\tif (node.fireEvent)\r\n\t\t\tnode.fireEvent(\"on\"+name, ev);\r\n\t} else{\r\n\t\tconst ev = document.createEvent(type);\r\n\t\tev.initEvent(name, true, true);\r\n\t\tif (node.dispatchEvent)\r\n\t\t\tnode.dispatchEvent(ev);\r\n\t}\r\n}\r\n\r\n//add css class to the node\r\nexport function addCss(node,name,check){\r\n\tif (!check || node.className.indexOf(name) === -1)\r\n\t\tnode.className+=\" \"+name;\r\n}\r\n\r\n//remove css class from the node\r\nexport function removeCss(node,name){\r\n\t//防止node.className不存时报错\tadd by cloud.zhong\r\n\tnode.className=(node.className || \"\").replace(RegExp(\" \"+name,\"g\"),\"\");\r\n}\r\n\r\nexport function getTextSize(text, css, basewidth){\r\n\tvar d = create(\"DIV\",{\"class\":\"webix_view webix_measure_size \"+(css||\"\")},\"\");\r\n\td.style.cssText = \"height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;\"+(basewidth?(\"width:\"+basewidth+\"px;\"):\"width:auto;white-space:nowrap;\");\r\n\tdocument.body.appendChild(d);\r\n\r\n\tvar all = (typeof text !==  \"object\") ? [text] : text;\r\n\tvar width = 0;\r\n\tvar height = 0;\r\n\r\n\tfor (var i = 0; i < all.length; i++) {\r\n\t\td.innerHTML = all[i];\r\n\t\t//we need to add 1 to offsetWidth/Height because these methods return value as an integer\r\n\t\t//we can use ie9+ d.getBoundingClientRect().width\r\n\t\twidth = Math.max(width, d.offsetWidth+1);\r\n\t\theight = Math.max(height, d.offsetHeight+1);\r\n\t}\r\n    \r\n\tremove(d);\r\n\treturn { width:width, height:height };\r\n}\r\n\r\nexport function download(data, filename){\r\n\tvar objUrl = false;\r\n\r\n\tif(typeof data ==\"object\"){//blob\r\n\t\tif(window.navigator.msSaveBlob)\r\n\t\t\treturn window.navigator.msSaveBlob(data, filename);\r\n\t\telse {\r\n\t\t\tdata = window.URL.createObjectURL(data);\r\n\t\t\tobjUrl = true;\r\n\t\t}\r\n\t}\r\n\t//data url or blob url\r\n\tvar link = document.createElement(\"a\");\r\n\tlink.href = data;\r\n\tlink.download = filename;\r\n\tdocument.body.appendChild(link);\r\n\tlink.click(); \r\n\r\n\tdelay(function(){\r\n\t\tif(objUrl) window.URL.revokeObjectURL(data);\r\n\t\tdocument.body.removeChild(link);\r\n\t\tlink.remove();\r\n\t});\r\n}\r\n\r\nexport function _getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn className;\r\n}\r\n\r\nexport function setSelectionRange(node, start, end){\r\n\tstart = start || 0;\r\n\tend  = end || start;\r\n\r\n\tnode.focus();\r\n\tif(node.setSelectionRange)\r\n\t\tnode.setSelectionRange(start, end);\r\n\telse{\r\n\t\t//ie8\r\n\t\tvar textRange = node.createTextRange();\r\n\t\ttextRange.collapse(true);\r\n\t\ttextRange.moveEnd(\"character\", end);\r\n\t\ttextRange.moveStart(\"character\", start);\r\n\t\ttextRange.select();\r\n\t}\r\n}\r\n\r\nexport function getSelectionRange(node){\r\n\tif(\"selectionStart\" in node)\r\n\t\treturn {start:node.selectionStart || 0, end:node.selectionEnd || 0};\r\n\telse{\r\n\t\t//ie8\r\n\t\tnode.focus();\r\n\t\tvar selection = document.selection.createRange();\r\n\t\tvar bookmark = selection.getBookmark();\r\n\t\tvar textRange = node.createTextRange();\r\n\r\n\t\ttextRange.moveToBookmark(bookmark);\r\n\t\tvar length = textRange.text.length;\r\n        \r\n\t\ttextRange.collapse(true);\r\n\t\ttextRange.moveStart(\"character\", -node.value.length);\r\n\r\n\t\tvar start = textRange.text.length;\r\n\t\treturn {start:start, end: start + length};\r\n\t}\r\n}\r\n\r\nexport function addMeta(name, value){\r\n\tdocument.getElementsByTagName(\"head\").item(0).appendChild(create(\"meta\",{\r\n\t\tname:name,\r\n\t\tcontent:value\r\n\t}));\t\r\n}\r\n\r\n","import {assert} from \"../../webix/debug\";\r\nimport {toNode, extend} from \"../../webix/helpers\";\r\nimport {remove} from \"../../webix/html\";\r\n\r\nconst htmltable={\r\n\r\n\t//convert json string to json object if necessary\r\n\ttoObject:function(data){\r\n\t\tdata = toNode(data);\r\n\t\tassert(data, \"table is not found\");\r\n\t\tassert(data.tagName.toLowerCase() === \"table\", \"Incorrect table object\");\r\n\r\n\t\tvar tr = data.rows;\r\n\t\tremove(data);\r\n\t\treturn tr;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(data){\r\n\t\tvar new_data = [];\r\n\t\t//skip header rows if necessary\r\n\t\tvar i = (data[0] && data[0]._webix_skip)?1:0;\r\n\r\n\t\tfor (; i < data.length; i++)\r\n\t\t\tnew_data.push(data[i]);\r\n\t\treturn new_data;\r\n\t},\r\n\t//get hash of properties for single record\r\n\tgetDetails:function(data){\r\n\t\tvar td = data.getElementsByTagName(\"td\");\r\n\t\tdata = {};\r\n\t\t//get hash of properties for single record, data named as \"data{index}\"\r\n\t\tfor (var i=0; i < td.length; i++) {\r\n\t\t\tdata[\"data\" + i] = td[i].innerHTML;\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\t//get count of data and position at which new data need to be inserted\r\n\tgetInfo:function(){\r\n\t\t// dyn loading is not supported for htmltable\r\n\t\treturn { \r\n\t\t\tsize:0\r\n\t\t};\r\n\t},\r\n\tgetOptions:function(){},\r\n\r\n\t/*! gets header from first table row\r\n\t **/\r\n\tgetConfig: function(data) {\r\n\t\tvar columns = [];\r\n\t\tvar td = data[0].getElementsByTagName(\"th\");\r\n\t\tif (td.length) data[0]._webix_skip = true;\r\n\t\tfor (var i = 0; i < td.length; i++) {\r\n\t\t\tvar col = {\r\n\t\t\t\tid: \"data\" + i,\r\n\t\t\t\theader: this._de_json(td[i].innerHTML)\r\n\t\t\t};\r\n\t\t\tvar attrs = this._get_attrs(td[i]);\r\n\t\t\tcol = extend(col, attrs);\r\n\t\t\tcolumns.push(col);\r\n\t\t}\r\n\t\treturn columns;\r\n\t},\r\n\r\n\t_de_json:function(str){\r\n\t\tvar pos = str.indexOf(\"json://\");\r\n\t\t\r\n\t\tif (pos != -1)\r\n\t\t\tstr = JSON.parse(str.substr(pos+7));\r\n\t\treturn str;\r\n\t},\r\n\t\r\n\t/*! gets hash of html-element attributes\r\n\t **/\r\n\t_get_attrs: function(el) {\r\n\t\tvar attr = el.attributes;\r\n\t\tvar hash = {};\r\n\t\tfor (var i = 0; i < attr.length; i++) {\r\n\t\t\thash[attr[i].nodeName] = this._de_json(attr[i].nodeValue);\r\n\t\t}\r\n\t\thash.width = parseInt(hash.width, 10);\r\n\t\treturn hash;\r\n\t}\r\n};\r\n\r\nexport default htmltable;","import {create} from \"../webix/html.js\";\r\nimport {exec} from \"../webix/helpers.js\";\r\nimport {ajax} from \"./ajax.js\";\r\n\r\nimport Promise from \"../thirdparty/promiz\";\r\n\r\nconst _modules = {};\t//hash of already loaded modules\r\n\r\n//loads module from external js file\r\nexport default function require(module, callback, master){\r\n\tvar promise = Promise.defer();\r\n\r\n\tif (callback && callback !== true)\r\n\t\tpromise = promise.then(function(){ callback.call(master || this); });\r\n\r\n\tif (require.disabled){\r\n\t\tpromise.resolve();\r\n\t\treturn promise;\r\n\t}\r\n\r\n\t//multiple files required at once\r\n\tif (typeof module != \"string\"){\r\n\t\tvar count = module.length||0;\r\n\t\t\r\n\t\tif (!count){\r\n\t\t\t// { file: true, other: true }\r\n\t\t\tfor (let file in module) count++; // eslint-disable-line\r\n\t\t\tlet callback2 = function(){\r\n\t\t\t\tcount--;\r\n\t\t\t\tif (count === 0)\r\n\t\t\t\t\tpromise.resolve();\r\n\t\t\t};\r\n\t\t\tfor (let file in module)\r\n\t\t\t\trequire(file).then(callback2, () => promise.reject());\r\n\t\t} else {\r\n\t\t\t// [ file, other ]\r\n\t\t\tlet callback2 = function(){\r\n\t\t\t\tif (count){\r\n\t\t\t\t\tcount--;\r\n\t\t\t\t\trequire(module[module.length - count - 1])\r\n\t\t\t\t\t\t.then(callback2, () => promise.reject());\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpromise.resolve();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tcallback2();\r\n\t\t}\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tif (_modules[module] !== true){\r\n\t\tconst fullpath = module;\r\n\r\n\t\tif (callback === true){\r\n\t\t\t//sync mode\r\n\t\t\texec( ajax().sync().get(fullpath).responseText );\r\n\t\t\t_modules[module]=true;\r\n\t\t\treturn promise.resolve();\r\n\t\t}\r\n\r\n\t\tif (!_modules[module])\t//first call\r\n\t\t\t_modules[module] = [promise];\r\n\t\telse {\r\n\t\t\t_modules[module].push(promise);\r\n\t\t\treturn promise;\r\n\t\t}\r\n\r\n\t\tconst onerror = function(){\r\n\t\t\tconst calls = _modules[module];\r\n\t\t\t_modules[module] = false;\r\n\t\t\tfor (var i=0; i<calls.length; i++)\r\n\t\t\t\tcalls[i].reject();\r\n\t\t};\r\n\r\n\t\tconst onload = function(){\r\n\t\t\tconst calls = _modules[module];\r\n\t\t\t_modules[module] = true;\r\n\t\t\tfor (var i=0; i<calls.length; i++)\r\n\t\t\t\tcalls[i].resolve();\r\n\t\t};\r\n\r\n\t\t//css, async, no waiting\r\n\t\tvar parts = module.split(\"?\");\r\n\t\tif (parts[0].substr(parts[0].length-4) == \".css\") {\r\n\t\t\tvar link = create(\"LINK\",{  type:\"text/css\", rel:\"stylesheet\", href:fullpath});\r\n\t\t\tlink.onload = onload;\r\n\t\t\tlink.onerror = onerror;\r\n\r\n\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(link);\r\n\t\t} else {\r\n\t\t\tvar newScript = document.createElement(\"script\");\r\n\t\t\tnewScript.onload = onload;\r\n\t\t\tnewScript.onerror = onerror;\r\n\r\n\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(newScript);\r\n\t\t\tnewScript.src = fullpath;\r\n\t\t}\r\n\t} else \r\n\t\tpromise.resolve();\r\n\r\n\treturn promise;\r\n}","/*\r\n\tTemplate - handles html templates\r\n*/\r\n\r\nimport {uid} from \"./helpers\";\r\nimport {getValue} from \"./html\";\r\nimport env from \"./env\";\r\nimport {ajax} from \"../load/ajax\";\r\nimport {assert} from \"./debug\";\r\n\r\nimport CodeParser from \"../core/codeparser\";\r\n\r\nvar _cache = {};\r\nvar _csp_cache = {};\r\nvar newlines = new RegExp(\"(\\\\r\\\\n|\\\\n)\",\"g\");\r\nvar quotes   = new RegExp(\"(\\\\\\\")\",\"g\");\r\nvar slashes  = new RegExp(\"(\\\\\\\\)\",\"g\");\r\nvar escape = {\r\n\t\"&\": \"&amp;\",\r\n\t\"<\": \"&lt;\",\r\n\t\">\": \"&gt;\",\r\n\t\"\\\"\": \"&quot;\",\r\n\t\"'\": \"&#x27;\",\r\n\t\"`\": \"&#x60;\"\r\n};\r\nvar badChars = /[&<>\"'`]/g;\r\nvar escapeChar = function(chr) {\r\n\treturn escape[chr] || \"&amp;\";\r\n};\r\n\r\n\r\nfunction template(str){\r\n\tif (typeof str == \"function\") return str;\r\n\tif (_cache[str])\r\n\t\treturn _cache[str];\r\n\t\t\r\n\tstr=(str||\"\").toString();\t\t\t\r\n\tif (str.indexOf(\"->\")!=-1){\r\n\t\tvar teststr = str.split(\"->\");\r\n\t\tswitch(teststr[0]){\r\n\t\t\tcase \"html\": \t//load from some container on the page\r\n\t\t\t\tstr = getValue(teststr[1]);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"http\": \t//load from external file\r\n\t\t\t\tstr = new ajax().sync().get(teststr[1],{uid:uid()}).responseText;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t//do nothing, will use template as is\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t//supported idioms\r\n\t// {obj.attr} => named attribute or value of sub-tag in case of xml\r\n\tstr=(str||\"\").toString();\t\t\r\n\r\n\t// Content Security Policy enabled\r\n\tif(env.strict){\r\n\t\tif (!_csp_cache[str]){\r\n\t\t\t_csp_cache[str] = [];\r\n\r\n\t\t\t// get an array of objects (not sorted by position)\r\n\t\t\tvar temp_res = [];\r\n\t\t\tstr.replace(/\\{obj\\.([^}?]+)\\?([^:]*):([^}]*)\\}/g,function(search,s1,s2,s3,pos){\r\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj){\r\n\t\t\t\t\treturn obj[s1]?s2:s3;\r\n\t\t\t\t}});\r\n\t\t\t});\r\n\t\t\tstr.replace(/\\{common\\.([^}(]*)\\}/g,function(search,s,pos){\r\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(_,common){\r\n\t\t\t\t\treturn common[s]||\"\";\r\n\t\t\t\t}});\r\n\t\t\t});\r\n\t\t\tstr.replace(/\\{common\\.([^}(]*)\\(\\)\\}/g,function(search,s,pos){\r\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\r\n\t\t\t\t\treturn (common[s]?common[s].apply(this, arguments):\"\");\r\n\t\t\t\t}});\r\n\t\t\t});\r\n\t\t\tstr.replace(/\\{obj\\.([^:}]*)\\}/g,function(search,s,pos){\r\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj){\r\n\t\t\t\t\treturn obj[s];\r\n\t\t\t\t}});\r\n\t\t\t});\r\n\t\t\tstr.replace(\"{obj}\",function(search,pos){\r\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj){\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t}});\r\n\t\t\t});\r\n\t\t\tstr.replace(/#([^#'\";, ]+)#/gi,function(search,s,pos){\r\n\t\t\t\tif(s.charAt(0)==\"!\"){\r\n\t\t\t\t\ts = s.substr(1);\r\n\t\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj){\r\n\t\t\t\t\t\tif(s.indexOf(\".\")!= -1)\r\n\t\t\t\t\t\t\tobj = CodeParser.collapseNames(obj); // apply complex properties\r\n\t\t\t\t\t\treturn template.escape(obj[s]);\r\n\t\t\t\t\t}});\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj){\r\n\t\t\t\t\t\tif(s.indexOf(\".\")!= -1)\r\n\t\t\t\t\t\t\tobj = CodeParser.collapseNames(obj); // apply complex properties\r\n\t\t\t\t\t\treturn obj[s];\r\n\t\t\t\t\t}});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t// sort template parts by position\r\n\t\t\ttemp_res.sort(function(a,b){\r\n\t\t\t\treturn (a.pos > b.pos)?1:-1;\r\n\t\t\t});\r\n\r\n\t\t\t// create an array of functions that return parts of html string\r\n\t\t\tif(temp_res.length){\r\n\t\t\t\tvar lastPos = 0;\r\n\t\t\t\tvar addStr = function(str,n0,n1){\r\n\t\t\t\t\t_csp_cache[str].push(function(){\r\n\t\t\t\t\t\treturn str.slice(n0,n1);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tfor(var i = 0; i< temp_res.length; i++){\r\n\t\t\t\t\tvar pos = temp_res[i].pos;\r\n\t\t\t\t\taddStr(str,lastPos,pos);\r\n\t\t\t\t\t_csp_cache[str].push(temp_res[i].fn);\r\n\t\t\t\t\tlastPos = pos + temp_res[i].str.length;\r\n\t\t\t\t}\r\n\t\t\t\taddStr(str,lastPos,str.length);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\t_csp_cache[str].push(function(){return str;});\r\n\t\t}\r\n\t\treturn function(){\r\n\t\t\tvar s = \"\";\r\n\t\t\tfor(var i=0; i < _csp_cache[str].length;i++){\r\n\t\t\t\ts += _csp_cache[str][i].apply(this,arguments);\r\n\t\t\t}\r\n\t\t\treturn s;\r\n\t\t};\r\n\t}\r\n\r\n\tlet helpers = false;\r\n\tstr=str.replace(slashes,\"\\\\\\\\\");\r\n\tstr=str.replace(newlines,\"\\\\n\");\r\n\tstr=str.replace(quotes,\"\\\\\\\"\");\r\n\r\n\tstr=str.replace(/\\{obj\\.([^}?]+)\\?([^:]*):([^}]*)\\}/g,\"\\\"+(obj.$1?\\\"$2\\\":\\\"$3\\\")+\\\"\");\r\n\tstr=str.replace(/\\{common\\.([^}(]*)\\}/g,\"\\\"+(common.$1||'')+\\\"\");\r\n\tstr=str.replace(/\\{common\\.([^}(]*)\\(\\)\\}/g,\"\\\"+(common.$1?common.$1.apply(this, arguments):\\\"\\\")+\\\"\");\r\n\tstr=str.replace(/\\{obj\\.([^}]*)\\}/g,\"\\\"+(obj.$1)+\\\"\");\r\n\tstr=str.replace(\"{obj}\",\"\\\"+obj+\\\"\");\r\n\tstr=str.replace(/#([^#'\";, ]+)#/gi,function(str, key){\r\n\t\tif (key.charAt(0)==\"!\"){\r\n\t\t\thelpers = true;\r\n\t\t\treturn \"\\\"+template.escape(obj.\"+key.substr(1)+\")+\\\"\";\r\n\t\t} else\r\n\t\t\treturn \"\\\"+(obj.\"+key+\")+\\\"\";\r\n\t});\r\n\r\n\ttry {\r\n\t\tif (helpers){\r\n\t\t\tconst temp = Function(\"obj\",\"common\",\"marks\", \"value\", \"template\", \"return \\\"\"+str+\"\\\";\");\r\n\t\t\t_cache[str] = function(a,b,c,d){ \r\n\t\t\t\treturn temp(a,b,c,d,template);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\t_cache[str] = Function(\"obj\",\"common\",\"return \\\"\"+str+\"\\\";\");\r\n\t\t}\r\n\t} catch(e){\r\n\t\tassert(0, \"Invalid template:\"+str);\r\n\t}\r\n\r\n\treturn _cache[str];\r\n}\r\n\r\n\r\n\r\ntemplate.escape  = function(str){\r\n\tif (str === undefined || str === null) return \"\";\r\n\treturn (str.toString() || \"\" ).replace(badChars, escapeChar);\r\n};\r\ntemplate.empty=function(){\treturn \"\";\t};\r\n\r\nexport default template;","import {extend, bind, isDate} from \"../../webix/helpers\";\r\nimport env from \"../../webix/env\";\r\n\r\nimport Promise from \"../../thirdparty/promiz\";\r\nimport i18n from \"../../webix/i18n\";\r\n\r\nimport require from \"../require\";\r\nimport jsarray from \"./jsarray\";\r\n\r\n\r\nconst excel = extend({\r\n\ttoObject:function(data){\r\n\t\tif(!data.excel){\r\n\t\t\tvar opts = data.options || {};\r\n\t\t\tif (opts.dataurl) \r\n\t\t\t\textend(opts, this._urlToOptions(opts.dataurl));\r\n\r\n\t\t\tdata = data.data || data;\r\n\t\t\tvar promise = Promise.defer();\r\n\t\t\t\r\n\t\t\tif(data.name){ //file\r\n\t\t\t\topts.ext = data.name.split(\".\").pop();\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\t\r\n\t\t\t\treader.onload = bind(function (e) {\r\n\t\t\t\t\tpromise.resolve(this.parseData(e.target.result, opts));\r\n\t\t\t\t}, this);\r\n\t\t\t\treader.readAsArrayBuffer(data);\r\n\t\t\t}\r\n\t\t\telse //arraybuffer\r\n\t\t\t\tpromise.resolve(this.parseData(data, opts));\r\n\t\t\t\t\r\n\t\t\treturn promise;\r\n\t\t}\r\n\t\t//plain jsarray or hash\r\n\t\treturn data;\r\n\t},\r\n\tparseData:function(data, options){\r\n\t\tdata = new Uint8Array(data);\r\n\t\tvar arr = [];\r\n\t\tfor(let i = 0; i != data.length; ++i)\r\n\t\t\tarr[i] = String.fromCharCode(data[i]);\r\n\r\n\t\tvar ext = (options.ext || options).toLowerCase();\r\n\t\tif (ext != \"xls\") ext = \"xlsx\";\r\n\t\treturn require(env.cdn + \"/extras/xlsx.core.styles.min.js\").then(bind(function(){\r\n\t\t\t/* global XLS, XLSX */\r\n\t\t\tvar wb = (ext == \"xls\") ?\r\n\t\t\t\tXLS.read(arr.join(\"\"), {type: \"binary\", cellStyles:true, cellDates:true}) :\r\n\t\t\t\tXLSX.read(arr.join(\"\"), {type: \"binary\", cellStyles:true, cellDates:true});\r\n\r\n\t\t\tvar res = {\r\n\t\t\t\tsheets: wb.Sheets,\r\n\t\t\t\tnames: wb.SheetNames,\r\n\t\t\t\toptions:options,\r\n\t\t\t\tranges:wb.Workbook?(wb.Workbook.Names ||[]):[]\r\n\t\t\t};\r\n\t\t\treturn extend(this.getSheet(res, options), res);\r\n\t\t}, this));\r\n\t},\r\n\tgetSheet:function(data, options){\r\n\t\tvar name = options.name || data.names[0];\r\n\t\tdata = this.sheetToArray(data.sheets[name], options);\r\n\t\tif(options.rows && options.rows.length)\r\n\t\t\tdata.data = data.data.splice(options.rows[0], Math.min(options.rows[1], data.data.length)-options.rows[0]);\r\n\t\treturn data;\r\n\t},\r\n\tsheetToArray:function(sheet, options){\r\n\t\tconst all = [];\r\n\t\tconst spans = [];\r\n\t\tconst styles = [];\r\n\t\tconst sizes = [];\r\n\t\tconst types = [];\r\n\r\n\t\tconst cellTypes = { n:\"number\", d:\"date\", s:\"string\", b:\"boolean\"};\r\n\r\n\t\tif(sheet && sheet[\"!ref\"]){\r\n\t\t\tvar range = XLS.utils.decode_range(sheet[\"!ref\"]), \r\n\t\t\t\trow, col, cellCoord, cell,\r\n\t\t\t\txCorrection = range.s.c,\r\n\t\t\t\tyCorrection = range.s.r+(options.rows?options.rows[0]:0);\r\n\r\n\t\t\tfor (row = range.s.r; row <= range.e.r; row++) {\r\n\t\t\t\tvar nrow = [];\r\n\t\t\t\tfor (col = range.s.c; col <= range.e.c; col++) {\r\n\t\t\t\t\tcellCoord = XLS.utils.encode_cell({ r: row, c: col });\r\n\t\t\t\t\tcell = sheet[cellCoord];\r\n\t\t\t\t\tif(!cell)\r\n\t\t\t\t\t\tnrow.push(\"\");\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar ncell = \"\";\r\n\t\t\t\t\t\tif(options.math&&cell.f) // get formula\r\n\t\t\t\t\t\t\tncell = cell.f.charAt(0)==\"=\" ? cell.f : \"=\"+cell.f;\r\n\t\t\t\t\t\telse if (cell.t ==\"d\" && isDate(cell.v))\r\n\t\t\t\t\t\t\tncell  = i18n.dateFormatStr(cell.v);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tncell = cell.v;\r\n\t\t\t\t\t\tnrow.push(ncell);\r\n\r\n\t\t\t\t\t\tif (cell.s)\r\n\t\t\t\t\t\t\tstyles.push([row-yCorrection, col-xCorrection, cell.s]);\r\n\t\t\t\t\t\tif (cell.t)\r\n\t\t\t\t\t\t\ttypes.push([row-yCorrection, col-xCorrection, cellTypes[cell.t]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tall.push(nrow);\r\n\t\t\t}\r\n\r\n\t\t\tif(sheet[\"!merges\"]){\r\n\t\t\t\tvar merges = sheet[\"!merges\"];\r\n\t\t\t\tfor(let i = 0; i<merges.length; i++){\r\n\t\t\t\t\tvar s = merges[i].s;\r\n\t\t\t\t\tvar e = merges[i].e;\r\n\t\t\t\t\tif(!options.rows || (s.r-yCorrection>=0 && e.r-yCorrection<=options.rows[1]))\r\n\t\t\t\t\t\tspans.push([s.r-yCorrection, s.c-xCorrection, e.c-s.c+1, e.r-s.r+1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(sheet[\"!cols\"]){\r\n\t\t\t\tvar widths = sheet[\"!cols\"];\r\n\t\t\t\tfor(let i = 0; i<widths.length; i++)\r\n\t\t\t\t\tif(widths[i]) sizes.push([\"column\", i-xCorrection, Math.round(widths[i].wch/(8.43/70))]); //mode, colind, value\r\n\t\t\t}\r\n\t\t\tif(sheet[\"!rows\"]){\r\n\t\t\t\tvar heights = sheet[\"!rows\"];\r\n\t\t\t\tfor(let i = 0; i<heights.length; i++)\r\n\t\t\t\t\tif(heights[i]) sizes.push([\"row\", i-yCorrection, heights[i].hpx]); //mode (\"row\", \"column\"), rowind, value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn { data:all, spans: spans, styles:styles, sizes:sizes, types:types, excel: true };\r\n\t},\r\n\t_urlToOptions:function(details){\r\n\t\tvar parts = details.split(\"[\");\r\n\t\tvar options = {};\r\n\t\toptions.name = parts[0];\r\n\t\tif(parts[1]){\r\n\t\t\tvar rows = parts[1].split(/[^0-9]+/g);\r\n\t\t\trows[0] = rows[0]*1 || 0;\r\n\t\t\trows[1] = rows[1]*1 || 9999999;\r\n\t\t\toptions.rows = rows;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n}, jsarray);\r\n\r\nexport default excel;","import json from \"./json.js\";\r\nimport jsarray from \"./jsarray.js\";\r\nimport xml from \"./xml.js\";\r\nimport csv from \"./csv.js\";\r\nimport html from \"./html.js\";\r\nimport htmltable from \"./htmltable\";\r\nimport excel from \"./excel\";\r\n\r\nconst DataDriver={ json, jsarray, xml, csv, html, htmltable, excel };\r\n\r\nexport default DataDriver;","const csv = {\r\n\t//incoming data always a string\r\n\ttoObject:function(data){\r\n\t\treturn data;\r\n\t},\r\n\t//get array of records\r\n\tgetRecords:function(data){\r\n\t\treturn data.split(this.row);\r\n\t},\r\n\t//get hash of properties for single record, data named as \"data{index}\"\r\n\tgetDetails:function(data){\r\n\t\tdata = this.stringToArray(data);\r\n\t\tvar result = {};\r\n\t\tfor (var i=0; i < data.length; i++) \r\n\t\t\tresult[\"data\"+i]=data[i];\r\n\r\n\t\tif (this.idColumn !== null)\r\n\t\t\tresult.id = data[this.idColumn];\r\n\r\n\t\treturn result;\r\n\t},\r\n\tgetOptions:function(){ return false; },\r\n\t//dyn loading is not supported by csv data source\r\n\tgetInfo:function(){\r\n\t\treturn {\r\n\t\t\tsize:0\r\n\t\t};\r\n\t},\r\n\t//split string in array, takes string surrounding quotes in account\r\n\tstringToArray:function(data){\r\n\t\tdata = data.split(this.cell);\r\n\t\tfor (var i=0; i < data.length; i++)\r\n\t\t\tdata[i] = data[i].replace(/^[ \\t\\n\\r]*(\"|)/g,\"\").replace(/(\"|)[ \\t\\n\\r]*$/g,\"\");\r\n\t\treturn data;\r\n\t},\r\n\tidColumn:null,\r\n\trow:\"\\n\",\t//default row separator\r\n\tcell:\",\"\t//default cell separator\r\n};\r\n\r\nexport default csv;","import promise from \"../thirdparty/promiz\";\r\nimport proxy from \"../load/proxy\";\r\nimport DataDriver from \"../load/drivers/index\";\r\n\r\n\r\nimport {ajax} from \"../load/ajax\";\r\n\r\nimport {bind} from \"../webix/helpers\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nconst silentErrorMarker = {};\r\n\r\nconst AtomDataLoader={\r\n\t$init:function(config){\r\n\t\t//prepare data store\r\n\t\tthis.data = {};\r\n\t\tthis.waitData = promise.defer();\r\n\r\n\t\tif (config)\r\n\t\t\tthis._settings.datatype = config.datatype||\"json\";\r\n\t\tthis.$ready.push(this._load_when_ready);\r\n\t},\r\n\t_load_when_ready:function(){\r\n\t\tthis._ready_for_data = true;\r\n\t\t\r\n\t\tif (this._settings.url)\r\n\t\t\tthis.url_setter(this._settings.url);\r\n\t\tif (this._settings.data)\r\n\t\t\tthis.data_setter(this._settings.data);\r\n\t},\r\n\turl_setter:function(value){\r\n\t\tvalue = proxy.$parse(value);\r\n\r\n\t\tif (!this._ready_for_data) return value;\r\n\t\tthis.load(value, this._settings.datatype);\t\r\n\t\treturn value;\r\n\t},\r\n\tdata_setter:function(value){\r\n\t\tif (!this._ready_for_data) return value;\r\n\t\tthis.parse(value, this._settings.datatype);\r\n\t\treturn true;\r\n\t},\r\n\t//loads data from external URL\r\n\tload:function(url,call){\r\n\t\tvar type, details = (arguments[2] || null);\r\n\r\n\t\tif (typeof call == \"string\"){\t//second parameter can be a loading type or callback\r\n\t\t\t//we are not using setDriver as data may be a non-datastore here\r\n\t\t\ttype = call;\r\n\t\t\tcall = arguments[2];\r\n\t\t}\r\n\r\n\t\tconst d = this._fetch(url, type, details);\r\n\t\tif (d && d.then)\r\n\t\t\treturn d.then(data => {\r\n\t\t\t\tthis._onLoad(data);\r\n\t\t\t\tif (call)\r\n\t\t\t\t\tajax.$callback(this, call, \"\", data, -1);\r\n\t\t\t\treturn data;\r\n\t\t\t}, x => this._onLoadError(x));\r\n\t},\r\n\t_fetch:function(url, type, details){\r\n\t\tvar result;\r\n\r\n\t\tif (type || !this.data.driver)\r\n\t\t\tthis.data.driver = DataDriver[type||\"json\"];\r\n\r\n\t\tif(!this.callEvent(\"onBeforeLoad\",[]))\r\n\t\t\treturn promise.reject();\t\t\r\n\r\n\t\t//proxy\t\r\n\t\turl = proxy.$parse(url);\r\n\t\tif (url.$proxy && url.load){\r\n\t\t\tresult = url.load(this, details);\r\n\t\t}\r\n\t\t//promize\r\n\t\telse if (typeof url === \"function\"){\r\n\t\t\tresult = url.call(this, details);\r\n\t\t}\r\n\t\t//normal url\r\n\t\telse {\r\n\t\t\tresult = ajax().bind(this).get(url);\r\n\t\t}\r\n\r\n\t\t//we wrap plain data in promise to keep the same processing for it\r\n\t\tif(result && !result.then){\r\n\t\t\tresult = promise.resolve(result);\r\n\t\t}\r\n\r\n\t\tconst gen = this._data_generation;\r\n\t\tif(result && result.then){\r\n\t\t\treturn result.then((data) => {\r\n\t\t\t\t// component destroyed, or clearAll was issued\r\n\t\t\t\tif (this.$destructed || (gen && this._data_generation !== gen))\r\n\t\t\t\t\t// by returning rejection we are preventing the further executing chain\r\n\t\t\t\t\t// if user have used list.load(data).then(do_something)\r\n\t\t\t\t\t// the do_something will not be executed\r\n\t\t\t\t\t// the error handler may be triggered though\r\n\t\t\t\t\treturn promise.reject(silentErrorMarker);\r\n\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\t//loads data from object\r\n\tparse:function(data,type){\r\n\t\tif (data && typeof data.then == \"function\"){\r\n\t\t\tconst generation = this._data_generation;\r\n\t\t\t// component destroyed, or clearAll was issued\r\n\t\t\treturn data.then(bind(function(data){ \r\n\t\t\t\tif (this.$destructed || (generation && this._data_generation !== generation))\r\n\t\t\t\t\treturn promise.reject();\r\n\t\t\t\tthis.parse(data, type); \r\n\t\t\t}, this));\r\n\t\t}\r\n\r\n\t\t//loading data from other component\r\n\t\tif (data && data.sync && this.sync)\r\n\t\t\tthis._syncData(data);\r\n\t\telse if(!this.callEvent(\"onBeforeLoad\",[]))\r\n\t\t\treturn promise.reject();\r\n\t\telse {\r\n\t\t\tif(type || !this.data.driver)\r\n\t\t\t\tthis.data.driver = DataDriver[type||\"json\"];\r\n\t\t\tthis._onLoad(data);\r\n\t\t}\r\n\r\n\t\treturn promise.resolve();\r\n\t},\r\n\t_syncData: function(data){\r\n\t\tif(this.data && this.data.attachEvent)\r\n\t\t\tthis.data.attachEvent(\"onSyncApply\",bind(function(){\r\n\t\t\t\tif(this._call_onready)\r\n\t\t\t\t\tthis._call_onready();\r\n\t\t\t},this));\r\n\r\n\t\tthis.sync(data);\r\n\t},\r\n\t_parse:function(data){\r\n\t\tvar parsed, record,\r\n\t\t\tdriver = this.data.driver;\r\n\r\n\t\trecord = driver.getRecords(data)[0];\r\n\t\tparsed = record?driver.getDetails(record):{};\r\n\r\n\t\tif (this.setValues)\r\n\t\t\tthis.setValues(parsed);\r\n\t\telse\r\n\t\t\tthis.data = parsed;\r\n\t},\r\n\t_onLoadContinue:function(data){\r\n\t\tif (data){\r\n\t\t\tif(!this.$onLoad || !this.$onLoad(data, this.data.driver)){\r\n\t\t\t\tif(this.data && this.data._parse)\r\n\t\t\t\t\tthis.data._parse(data); //datastore\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._parse(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._onLoadError(data);\r\n\r\n\t\t//data loaded, view rendered, call onready handler\r\n\t\tif(this._call_onready)\r\n\t\t\tthis._call_onready();\r\n\r\n\t\tthis.callEvent(\"onAfterLoad\",[]);\r\n\t\tthis.waitData.resolve();\r\n\t},\r\n\t//default after loading callback\r\n\t_onLoad:function(data){\r\n\t\t// webix loading object or uploaded file structure\r\n\t\tif (data && typeof data.text === \"function\" && !data.name){\r\n\t\t\tdata = data.text();\r\n\t\t}\r\n\r\n\t\tdata = this.data.driver.toObject(data);\r\n\t\tif(data && data.then)\r\n\t\t\tdata.then(data => this._onLoadContinue(data));\r\n\t\telse\r\n\t\t\tthis._onLoadContinue(data);\r\n\t},\r\n\t_onLoadError:function(xhttp){\r\n\t\tif (xhttp !== silentErrorMarker){\r\n\t\t\t//ignore error for dead components\r\n\t\t\tif (!this.$destructed){\r\n\t\t\t\tthis.callEvent(\"onAfterLoad\",[]);\r\n\t\t\t\tthis.callEvent(\"onLoadError\",arguments);\r\n\t\t\t}\r\n\r\n\t\t\tcallEvent(\"onLoadError\", [xhttp, this]);\r\n\t\t}\r\n\t\treturn promise.reject(xhttp);\r\n\t},\r\n\t_check_data_feed:function(data){\r\n\t\tif (!this._settings.dataFeed || this._ignore_feed || !data)\r\n\t\t\treturn true;\r\n\r\n\t\tvar url = this._settings.dataFeed;\r\n\t\tif (typeof url == \"function\")\r\n\t\t\treturn url.call(this, (data.id||data), data);\r\n\r\n\t\turl = url+(url.indexOf(\"?\")==-1?\"?\":\"&\")+\"action=get&id=\"+encodeURIComponent(data.id||data);\r\n\t\tif(!this.callEvent(\"onBeforeLoad\",[]))\r\n\t\t\treturn false;\r\n\r\n\t\tajax(url, function(text,xml,loader){\r\n\t\t\tthis._ignore_feed = true;\r\n\t\t\tvar driver = DataDriver.json;\r\n\t\t\tvar data = driver.toObject(text, xml);\r\n\t\t\tif (data)\r\n\t\t\t\tthis.setValues(driver.getDetails(driver.getRecords(data)[0]));\r\n\t\t\telse\r\n\t\t\t\tthis._onLoadError(loader);\r\n\t\t\tthis._ignore_feed = false;\r\n\t\t\tthis.callEvent(\"onAfterLoad\",[]);\r\n\t\t}, this);\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default AtomDataLoader;","import {isDate, isArray} from \"../webix/helpers\";\r\n\r\nconst CodeParser = {\r\n\t//converts a complex object into an object with primitives properties\r\n\tcollapseNames:function(base, prefix, data, filter){\r\n\t\tdata = data || {};\r\n\t\tprefix = prefix || \"\";\r\n\t\tfilter  = filter || function(){ return true; };\r\n\r\n\t\tif(!base || typeof base != \"object\")\r\n\t\t\treturn null;\r\n\r\n\t\tfor(var prop in base){\r\n\t\t\tlet value = base[prop];\r\n\t\t\tlet name = prefix+prop;\r\n\t\t\tif(value && typeof value == \"object\" && !isDate(value) && !isArray(value) && filter(name)){\r\n\t\t\t\tCodeParser.collapseNames(value, name+\".\", data, filter);\r\n\t\t\t} else {\r\n\t\t\t\tdata[name] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\r\n\t//converts an object with primitive properties into an object with complex properties\r\n\texpandNames:function(base){\r\n\t\tvar data = {},\r\n\t\t\ti, lastIndex, name, obj, prop;\r\n\r\n\t\tfor(prop in base){\r\n\t\t\tname = prop.split(\".\");\r\n\t\t\tlastIndex = name.length-1;\r\n\t\t\tobj = data;\r\n\t\t\tfor( i =0; i < lastIndex; i++ ){\r\n\t\t\t\tif(!obj[name[i]])\r\n\t\t\t\t\tobj[name[i]]  = {};\r\n\t\t\t\tobj = obj[name[i]];\r\n\t\t\t}\r\n\t\t\tobj[name[lastIndex]] = base[prop];\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\nexport default CodeParser;","import {bind} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\nconst AtomRender={\r\n\t//convert item to the HTML text\r\n\t_toHTML:function(obj){\r\n\t\tif (obj.$empty )\r\n\t\t\treturn \"\";\r\n\t\treturn this._settings.template(obj, this);\r\n\t},\r\n\t//render self, by templating data object\r\n\trender:function(){\r\n\t\tvar cfg = this._settings;\r\n\t\tif (this.isVisible(cfg.id)){\r\n\t\t\tif (!this.callEvent || this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\t\tif (this.data && !cfg.content){\r\n\t\t\t\t\t//it is critical to have this as two commands\r\n\t\t\t\t\t//its prevent destruction race in Chrome\r\n\t\t\t\t\tthis._dataobj.innerHTML = \"\";\r\n\t\t\t\t\tthis._dataobj.innerHTML = this._toHTML(this.data);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.callEvent) this.callEvent(\"onAfterRender\",[]);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tsync:function(source){\r\n\t\tthis._backbone_sync = false;\r\n\t\tif (source.name != \"DataStore\"){\r\n\t\t\tif (source.data && source.data.name == \"DataStore\"){\r\n\t\t\t\tsource = source.data;\r\n\t\t\t} else {\r\n\t\t\t\tthis._backbone_sync = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._backbone_sync)\r\n\t\t\tsource.bind(\"change\", bind(function(data){\r\n\t\t\t\tif (data.id == this.data.id){\r\n\t\t\t\t\tthis.data = data.attributes;\r\n\t\t\t\t\tthis.refresh();\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\t\telse\r\n\t\t\tsource.attachEvent(\"onStoreUpdated\", bind(function(id){\r\n\t\t\t\tif (!id || id == this.data.id){\r\n\t\t\t\t\tthis.data = source.pull[id];\r\n\t\t\t\t\tthis.refresh();\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\t},\r\n\ttemplate_setter:template\r\n};\r\n\r\nexport default AtomRender;","import {offset} from \"../webix/html\";\r\nimport {delay} from \"../webix/helpers\";\r\n\r\n\r\nconst AutoScroll = {\r\n\t_auto_scroll:function(pos){\r\n\t\tlet yScroll, xScroll;\r\n\t\tlet mode = this._settings.dragscroll;\r\n\r\n\t\tif (typeof mode !== \"string\")\r\n\t\t\tmode = this._settings.layout||\"xy\";\r\n\t\txScroll = mode.indexOf(\"x\") !== -1;\r\n\t\tyScroll = mode.indexOf(\"y\") !== -1;\r\n\r\n\t\tconst data = this._body || this.$view;\r\n\t\tconst box = offset(data);\r\n\r\n\t\tconst sense = Math.max((this._settings.rowHeight||(this.type&&!isNaN(parseFloat(this.type.height))?this.type.height:0))+5, 40); //dnd auto-scroll sensivity\r\n\t\tlet reset = false;\r\n\r\n\t\tif (yScroll && this._auto_y_scroll(pos, box, sense) ) reset = true;\r\n\t\tif (xScroll && this._auto_x_scroll(pos, box, sense) ) reset = true;\r\n\r\n\t\tif (reset)\r\n\t\t\tthis._auto_scroll_delay = delay(this._auto_scroll, this, [pos], 100);\r\n\t},\r\n\t_auto_scroll_column:function(pos){\r\n\t\tconst mode = this._settings.dragscroll;\r\n\t\tif (typeof mode === \"string\" && mode.indexOf(\"x\") === -1)\r\n\t\t\treturn;\r\n\r\n\t\tconst data = this._header || this.$view;\r\n\t\tconst box = offset(data);\r\n\r\n\t\tconst sense = Math.max(this._settings.headerRowHeight||0, 40);\r\n\t\tif ( this._auto_x_scroll(pos, box, sense) )\r\n\t\t\tthis._auto_scroll_delay = delay(this._auto_scroll_column, this, [pos], 100);\r\n\t},\r\n\t_auto_y_scroll:function(pos, box, sense){\r\n\t\tlet top = box.y;\r\n\t\tlet bottom = top + box.height;\r\n\t\tconst scroll = this.getScrollState();\r\n\r\n\t\tconst config = this._settings;\r\n\t\tif(config.topSplit){\r\n\t\t\tconst topSplitPos = this._cellPosition(this.getIdByIndex(config.topSplit-1), this.columnId(0));\r\n\t\t\ttop += topSplitPos.top + topSplitPos.height;\r\n\t\t}\r\n\r\n\t\tif (pos.y < (top + sense)){\r\n\t\t\treturn this._auto_scrollTo(scroll.x, scroll.y-sense*2, pos, \"y\");\r\n\t\t} else if (pos.y > bottom - sense){\r\n\t\t\treturn this._auto_scrollTo(scroll.x, scroll.y+sense*2, pos, \"y\");\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_auto_x_scroll:function(pos, box, sense){\r\n\t\tlet left = box.x;\r\n\t\tlet right = left + box.width;\r\n\t\tconst scroll = this.getScrollState();\r\n\r\n\t\tif (pos.x < (left + sense)){\r\n\t\t\treturn this._auto_scrollTo(scroll.x-sense*2, scroll.y, pos, \"x\");\r\n\t\t} else if (pos.x > right - sense){\r\n\t\t\treturn this._auto_scrollTo(scroll.x+sense*2, scroll.y, pos, \"x\");\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_auto_scrollTo:function(x, y, pos, mode){\r\n\t\tif (this.callEvent(\"onBeforeAutoScroll\", [pos])){\r\n\t\t\tthis.scrollTo(x, y);\r\n\t\t\tthis.callEvent(\"onAfterAutoScroll\", []);\r\n\r\n\t\t\tconst scroll = this.getScrollState();\r\n\t\t\treturn scroll[mode] === (mode === \"x\" ? x : y);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default AutoScroll;","import { assert } from \"./debug\";\r\nimport { toNode, uid, bind, isUndefined } from \"./helpers\";\r\nimport env from \"./env\";\r\n\r\n//hash of attached events\r\nconst _events = {};\r\n\r\nexport function _events_final_destructor(){\r\n\t//detach all known DOM events\r\n\tfor (var a in _events)\r\n\t\teventRemove(a);\r\n}\r\n\r\n//private version of API, do not register ID for event detaching\r\nexport function _event(a,b,c,d){\r\n\td = d || {};\r\n\td.inner = true;\r\n\tevent(a,b,c,d);\r\n}\r\n\r\n//attach event to the DOM element\r\nexport function event(node,event,handler,context){\r\n\tcontext = context || {};\r\n\tnode = toNode(node);\r\n\tassert(node, \"Invalid node as target for webix.event\");\r\n\t\r\n\tvar id = context.id || uid();\r\n\r\n\tif(context.bind)\r\n\t\thandler=bind(handler,context.bind);\r\n\r\n\tvar info = [node,event,handler,context.capture];\r\n\tif (!context.inner)\r\n\t\t_events[id]=info;\t//store event info, for detaching\r\n\r\n\tvar capture = !!context.capture;\r\n\tif(!isUndefined(context.passive) && env.passiveEventListeners)//blockable touch events\r\n\t\tcapture = { passive:context.passive, capture:capture };\r\n\t\t\r\n\t//use IE's of FF's way of event's attaching\r\n\tif (node.addEventListener)\r\n\t\tnode.addEventListener(event, handler, capture);\r\n\telse if (node.attachEvent)\r\n\t\tnode.attachEvent(\"on\"+event, info[2] = function(){\r\n\t\t\treturn handler.apply(node, arguments);\t//IE8 fix\r\n\t\t});\r\n\r\n\treturn id;\t//return id of newly created event, can be used in eventRemove\r\n}\r\n\r\n//remove previously attached event\r\nexport function eventRemove(id){\r\n\t\r\n\tif (!id) return;\r\n\tassert(_events[id],\"Removing non-existing event\");\r\n\t\t\r\n\tvar ev = _events[id];\r\n\t//browser specific event removing\r\n\tif (ev[0].removeEventListener)\r\n\t\tev[0].removeEventListener(ev[1],ev[2],!!ev[3]);\r\n\telse if (ev[0].detachEvent)\r\n\t\tev[0].detachEvent(\"on\"+ev[1],ev[2]);\r\n\r\n\t\t\r\n\tdelete _events[id];\t//delete all traces\r\n}\r\n","import template from \"./template\";\r\nimport {clone} from \"./helpers\";\r\n\r\n/*\r\n\tadds new template-type\r\n\tobj - object to which template will be added\r\n\tdata - properties of template\r\n*/\r\nexport default function type(obj, data){ \r\n\tif (obj.$protoWait){\r\n\t\tif (!obj._webix_type_wait)\r\n\t\t\tobj._webix_type_wait = [];\r\n\t\tobj._webix_type_wait.push(data);\r\n\t\treturn;\r\n\t}\r\n\t\t\r\n\t//auto switch to prototype, if name of class was provided\r\n\tif (typeof obj == \"function\")\r\n\t\tobj = obj.prototype;\r\n\tif (!obj.types){\r\n\t\tobj.types = { \"default\" : obj.type };\r\n\t\tobj.type.name = \"default\";\r\n\t}\r\n\t\r\n\tvar name = data.name;\r\n\tvar type = obj.type;\r\n\tif (name)\r\n\t\ttype = obj.types[name] = clone(data.baseType?obj.types[data.baseType]:obj.type);\r\n\t\r\n\tfor(var key in data){\r\n\t\tif (key.indexOf(\"template\")===0)\r\n\t\t\ttype[key] = template(data[key]);\r\n\t\telse\r\n\t\t\ttype[key]=data[key];\r\n\t}\r\n\r\n\treturn name;\r\n}","import {_to_array} from \"../webix/helpers\";\r\n\r\nconst state = {\r\n\tcodebase:\"./\",\r\n\tcdn:\"//cdn.webix.com\",\r\n\ttop_views:[],\r\n\r\n\t_global_scope:null,\r\n\t_global_collection:null,\r\n\t_child_sizing_active:null,\r\n\t_responsive_exception:null,\r\n\t_responsive_tinkery:null,\r\n\t_freeze_resize:null,\r\n\t_parent_cell:null,\r\n\t_focus_time:null,\r\n\t_ui_creation:0,\r\n\t_edit_open_time:null,\r\n\r\n\t_final_destruction:null,\r\n\t_events:[],\r\n\r\n\tdestructors:[],\r\n\r\n\t_noselect_element:null,\r\n\r\n\t_modality:0,\r\n\t_popups:_to_array(),\r\n\r\n\t_wait_animate:null\r\n};\r\n\r\nexport default state;","import {assert} from \"../webix/debug\";\r\n\r\nimport {uid, isArray, toNode, isUndefined, toFunctor} from \"../webix/helpers\";\r\nimport {attachEvent} from \"../webix/customevents\";\r\nimport {locate} from \"../webix/html\";\r\nimport {use} from \"../services\";\r\n\r\nimport type from \"../webix/type\";\r\nimport state from \"../core/state\";\r\n\r\n//global click events for UI\r\nimport \"./click\";\r\n\r\nconst views = {};\r\n\r\nfunction ui(config, parent, id){\r\n\tvar res;\r\n\tstate._ui_creation++;\r\n\t// save old value of global scope\r\n\tconst temp = state._global_scope;\r\n\t// set global scope to the scope of new UI or to previous value\r\n\t// as result inner webix.ui calls will have access the scope of master view\r\n\t// mainly necessary for suggests\r\n\tstate._global_scope = config.$scope || temp;\r\n\ttry {\r\n\t\tres = _ui_creator(config, parent, id);\r\n\t} finally {\r\n\t\tstate._ui_creation--;\r\n\t\t// restore global scope\r\n\t\tstate._global_scope = temp;\r\n\t}\r\n\treturn res;\r\n}\r\nui.views = views;\r\n\r\n\r\nfunction _ui_creator(config, parent, id){\r\n\tvar multiset = isArray(config);\r\n\tvar node = toNode((config.container||parent)||document.body);\r\n\r\n\t// solve problem with non-unique ids\r\n\tif(node._settings)\r\n\t\tid = _correctId(node, multiset, id);\r\n\r\n\tvar top_node;\r\n\tvar moving = false;\r\n\tvar body_child = (node == document.body);\r\n\tif (config._settings || (node && multiset)){\r\n\t\ttop_node = config;\r\n\t\tmoving = true;\r\n\t} else {\r\n\t\tif (node && body_child)\r\n\t\t\tconfig.$topView = true;\r\n\t\tif (!config._inner)\r\n\t\t\tconfig._inner = {};\r\n\r\n\t\tif (parent && parent.getParentView){\r\n\t\t\tstate._parent_cell = (!id && id!==0) ? parent.getParentView() : parent;\r\n\t\t}\r\n\r\n\t\ttop_node = _view(config);\r\n\t}\r\n\r\n\tif (body_child && !top_node.setPosition && !top_node.$apiOnly)\r\n\t\tuse(\"_fixHeight\")();\r\n\r\n\tif (top_node._settings && top_node._settings._hidden && !node.$view){\r\n\t\ttop_node._settings._container = node;\r\n\t} else if (!top_node.$apiOnly){\r\n\t\tif (node.appendChild)\r\n\t\t\t_appendDom(node, top_node, config);\r\n\t\telse if (node.destructor){\r\n\t\t\tvar target = node;\r\n\r\n\t\t\t//addView or view moving with target id\r\n\t\t\tif (!id && id!==0 && !isArray(top_node)){\r\n\t\t\t\tid = node;\r\n\t\t\t\tnode = node.getParentView();\r\n\t\t\t}\r\n\r\n\t\t\t//if target supports view adding\r\n\t\t\tif (node && node._replace){\r\n\t\t\t\tif (moving && top_node.getParentView){\r\n\t\t\t\t\t//if source supports view removing\r\n\t\t\t\t\tlet parent = top_node.getParentView();\r\n\t\t\t\t\tif (parent  && parent._remove){\r\n\t\t\t\t\t\tparent._remove(top_node);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//adjust parent link and scope\r\n\t\t\t\t\ttop_node._parent_cell = node;\r\n\t\t\t\t\ttop_node.$scope = node.$scope;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnode._replace(top_node, id);\r\n\t\t\t} else {\r\n\t\t\t\tlet parent = target.$view.parentNode;\r\n\t\t\t\ttarget.destructor();\r\n\t\t\t\t_appendDom(parent, top_node, config);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tassert(0, \"Not existing parent:\"+config.container);\r\n\t}\r\n\r\n\treturn top_node;\r\n}\r\n\r\nfunction _appendDom(node, top_node, config){\r\n\tnode.appendChild(top_node._viewobj);\r\n\tif (top_node.getParentView()) return;\r\n\r\n\t//resize window with position center or top\r\n\t//do not resize other windows and elements\r\n\t// which are attached to custom html containers\r\n\tif (((!top_node.setPosition || top_node._settings.fullscreen) && node == document.body) || top_node._settings.position )\r\n\t\tstate.top_views.push(top_node._destructor_handler);\r\n\tif (!config.skipResize)\r\n\t\ttop_node.adjust();\r\n}\r\n\r\nfunction _correctId(target, multiset, id){\r\n\t//replace view\r\n\tvar views = [target];\r\n\t//replace content of layout\r\n\tif (multiset)\r\n\t\tviews = target.getChildViews();\r\n\t//replace content of window\r\n\telse if (target._body_cell)\r\n\t\tviews = [target._body_cell];\r\n\t//add cell in layout by number\r\n\telse if (typeof id == \"number\"){\r\n\t\treturn id;\r\n\t//replace cell in layout by id\r\n\t} else if (id){\r\n\t\tviews = [$$(id)];\r\n\t\t_deleteIds(views);\r\n\t\treturn views[0].config.id;\r\n\t}\r\n\r\n\t_deleteIds(views);\r\n\treturn id;\r\n}\r\n\r\nfunction _deleteIds(uis){\r\n\tfor (var i = uis.length - 1; i >= 0; i--){\r\n\t\tlet current = uis[i];\r\n\t\t//remove original id\r\n\t\tdelete views[current.config.id];\r\n\t\t//create temp id\r\n\t\tcurrent.config.id = \"x\"+uid();\r\n\t\tviews[current.config.id] = current;\r\n\t\t//process childs\r\n\t\tif (current.getChildViews)\r\n\t\t\t_deleteIds(current.getChildViews());\r\n\t\t//process related UI\r\n\t\tif (current._destroy_with_me)\r\n\t\t\t_deleteIds(current._destroy_with_me);\r\n\t}\r\n}\r\n\r\n\r\nfunction _view(config){\r\n\r\n\tif (DEBUG){\r\n\t\t// check for trailing comma\r\n\t\tvar coll = config.cells || config.rows || config.elements || config.cols;\r\n\t\tif (coll)\r\n\t\t\tfor (let i=0; i<coll.length; i++)\r\n\t\t\t\tif (coll[i] === null || typeof coll[i] === \"undefined\")\r\n\t\t\t\t\tassert(0, \"You have trailing comma or Null element in collection's configuration\");\r\n\t}\r\n\r\n\tif (config.view){\r\n\t\tvar view = config.view;\r\n\t\tassert(ui[view], \"unknown view:\"+view);\r\n\t\treturn new ui[view](config);\r\n\t} else if (config.rows || config.cols){\r\n\t\tvar cells = config.rows||config.cols;\r\n\t\tvar accordion = false;\r\n\t\tfor (let i=0; i<cells.length; i++){\r\n\t\t\tif (cells[i].body && !cells[i].view && !cells[i].align)\r\n\t\t\t\taccordion = true;\r\n\t\t}\r\n\t\tif (accordion){\r\n\t\t\treturn new ui.headerlayout(config);\r\n\t\t} else\r\n\t\t\treturn new ui.layout(config);\r\n\t}\r\n\telse if (config.cells)\r\n\t\treturn new ui.multiview(config);\r\n\telse if (config.template || config.content)\r\n\t\treturn new ui.template(config);\t\r\n\telse if (config.align && config.body){\r\n\t\treturn new ui.align(config);\r\n\t} else return new ui.spacer(config);\r\n}\r\n//FIXME\r\nui._view = _view;\r\n\r\nfunction $$(id){\r\n\tif (!id) return null;\r\n\t\r\n\tif (views[id]) return views[id];\r\n\r\n\tvar name = id;\r\n\tif (typeof id == \"object\"){\r\n\t\tif (id._settings)\r\n\t\t\treturn id;\r\n\t\tname = id.target||id;\r\n\t}\r\n\treturn views[locate({ target:toNode(name)},/*@attr*/\"view_id\")];\r\n}\r\nif (typeof window.$$ === \"undefined\") window.$$ = $$;\r\n\t\r\n\t\r\n\r\nlet protoUI = function(){\r\n\tvar origins = arguments;\r\n\tvar selfname = origins[0].name;\r\n\t\r\n\tvar t = function(data){\r\n\t\tif (!t)\r\n\t\t\treturn ui[selfname].prototype;\r\n\r\n\t\tvar origins = t.$protoWait;\r\n\t\tif (origins){\r\n\t\t\tvar params = [origins[0]];\r\n\t\t\t\r\n\t\t\tfor (let i=1; i < origins.length; i++){\r\n\t\t\t\tparams[i] = origins[i];\r\n\r\n\t\t\t\tif (params[i].$protoWait)\r\n\t\t\t\t\tparams[i] = params[i].call(-1, params[i].name);\r\n\r\n\t\t\t\tif (params[i].prototype && params[i].prototype.name)\r\n\t\t\t\t\tui[params[i].prototype.name] = params[i];\r\n\t\t\t}\r\n\t\t\tui[selfname] = proto.apply(-1, params);\r\n\r\n\t\t\tif (t._webix_type_wait)\t\r\n\t\t\t\tfor (let i=0; i < t._webix_type_wait.length; i++)\r\n\t\t\t\t\ttype(ui[selfname], t._webix_type_wait[i]);\r\n\t\t\t\t\r\n\t\t\tt = origins = null;\t\r\n\t\t}\r\n\t\t\t\r\n\t\tif (this != -1)\r\n\t\t\treturn new ui[selfname](data);\r\n\t\telse \r\n\t\t\treturn ui[selfname];\r\n\t};\r\n\tt.$protoWait = Array.prototype.slice.call(arguments, 0);\r\n\treturn (ui[selfname]=t);\r\n};\r\n\r\nlet proto = function(){\r\n\tvar origins = arguments;\r\n\tvar compilation = origins[0];\r\n\tvar has_constructor = !!compilation.$init;\r\n\tvar construct = [];\r\n\t\r\n\tassert(compilation,\"Invalid mixing target\");\r\n\t\t\r\n\tfor (var i=origins.length-1; i>0; i--) {\r\n\t\tassert(origins[i],\"Invalid mixing source\");\r\n\t\tif (typeof origins[i]== \"function\")\r\n\t\t\torigins[i]=origins[i].prototype;\r\n\t\tif (origins[i].$init) \r\n\t\t\tconstruct.push(origins[i].$init);\r\n\t\tif (origins[i].defaults){ \r\n\t\t\tvar defaults = origins[i].defaults;\r\n\t\t\tif (!compilation.defaults)\r\n\t\t\t\tcompilation.defaults = {};\r\n\t\t\tfor (let def in defaults)\r\n\t\t\t\tif (isUndefined(compilation.defaults[def]))\r\n\t\t\t\t\tcompilation.defaults[def] = defaults[def];\r\n\t\t}\r\n\t\tif (origins[i].type && compilation.type){\r\n\t\t\tfor (let def in origins[i].type)\r\n\t\t\t\tif (!compilation.type[def])\r\n\t\t\t\t\tcompilation.type[def] = origins[i].type[def];\r\n\t\t}\r\n\t\t\t\r\n\t\tfor (var key in origins[i]){\r\n\t\t\tif (!compilation[key] && compilation[key] !== false)\r\n\t\t\t\tcompilation[key] = origins[i][key];\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (has_constructor)\r\n\t\tconstruct.push(compilation.$init);\r\n\t\r\n\t\r\n\tcompilation.$init = function(){\r\n\t\tfor (var i=0; i<construct.length; i++)\r\n\t\t\tconstruct[i].apply(this, arguments);\r\n\t};\r\n\tif (compilation.$skin)\r\n\t\tcompilation.$skin();\r\n\r\n\tvar result = function(config){\r\n\t\tthis.$ready=[];\r\n\t\tassert(this.$init,\"object without init method\");\r\n\t\tthis.$init(config);\r\n\t\tif (this._parseSettings)\r\n\t\t\tthis._parseSettings(config, this.defaults);\r\n\t\tfor (var i=0; i < this.$ready.length; i++)\r\n\t\t\tthis.$ready[i].call(this);\r\n\t};\r\n\tresult.prototype = compilation;\r\n\t\r\n\tcompilation = origins = null;\r\n\treturn result;\r\n};\r\n\r\nattachEvent(\"onClick\", function(e){\r\n\tvar element = $$(e);\r\n\tif (element && element.touchable){\r\n\t\tuse(\"UIManager\").applyChanges(element);\r\n\r\n\t\t//for inline elements - restore pointer to the master element\r\n\t\telement.getNode(e);\r\n\t\t//reaction on custom css elements in buttons\r\n\t\tvar trg=e.target;\r\n\t\tif (element.config.disabled)\r\n\t\t\treturn;\r\n\r\n\t\tvar css = \"\";\r\n\t\tif (trg.className && trg.className.toString().indexOf(\"webix_view\")===0) return;\r\n\r\n\t\tif (element)\r\n\t\t\tuse(\"UIManager\")._focus_action(element);\r\n\r\n\t\t//loop through all parents\r\n\t\twhile (trg && trg.parentNode){\r\n\t\t\tif (trg.getAttribute){\r\n\t\t\t\tif (trg.getAttribute(/*@attr*/\"view_id\"))\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\tcss=trg.className;\r\n\t\t\t\tif (css){\r\n\t\t\t\t\tcss = css.toString().split(\" \");\r\n\t\t\t\t\tfor (var i =0; i<css.length; i++){\r\n\t\t\t\t\t\tif (element.on_click[css[i]]){\r\n\t\t\t\t\t\t\tvar res =  element.on_click[css[i]].call(element,e,element._settings.id,trg);\r\n\t\t\t\t\t\t\tif (res===false)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttrg=trg.parentNode;\r\n\t\t}\r\n\r\n\r\n\t\tif (element._settings.click){\r\n\t\t\tvar code = toFunctor(element._settings.click, element.$scope);\r\n\t\t\tif (code && code.call) code.call(element, element._settings.id, e);\r\n\t\t}\r\n\r\n\t\tlet popup = element._settings.popup;\r\n\t\tif (popup && !element._settings.readonly){\r\n\t\t\tif (typeof popup == \"object\" && !popup.name){\r\n\t\t\t\tpopup = element._settings.popup = ui(popup)._settings.id;\r\n\t\t\t\telement._destroy_with_me.push($$(popup));\r\n\t\t\t}\r\n\r\n\t\t\tpopup = $$(popup);\r\n\t\t\tassert(popup, \"Unknown popup\");\r\n\r\n\t\t\tif (!popup.isVisible()){\r\n\t\t\t\tpopup._settings.master = element._settings.id;\r\n\t\t\t\tpopup.show((element.getInputNode()||element.getNode()),null,true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.callEvent(\"onItemClick\", [element._settings.id, e]);\r\n\t}\r\n});\r\n\r\n\r\n//hook for documentation generator\r\nif (DEBUG){\r\n\tif (window.webix_on_core_ready){\r\n\t\tvar mod = window.webix_on_core_ready({ proto, protoUI});\r\n\t\tproto = mod.proto;\r\n\t\tprotoUI = mod.protoUI;\r\n\t}\r\n}\r\n\r\nexport { ui, proto, protoUI, $$ };","import {pos as getPos} from \"../webix/html\";\r\nimport {toNode, _to_array, delay} from \"../webix/helpers\";\r\nimport {event, eventRemove} from \"../webix/htmlevents\";\r\nimport {attachEvent, detachEvent} from \"../webix/customevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {ui} from \"../ui/core\";\r\n\r\n\r\nconst TooltipControl ={\r\n\t_tooltip_masters: _to_array([\"dummy\"]),\r\n\t_tooltip_exist: 0,\r\n\tdelay:400,\r\n\taddTooltip:function(target,config){\r\n\t\tlet node, ctrl;\r\n\t\ttarget = toNode(target);\r\n\t\tassert(target, \"Target isn't defined\");\r\n\r\n\t\tif (target instanceof Element){\r\n\t\t\tnode = target;\r\n\t\t\tif (typeof config === \"string\")\r\n\t\t\t\tnode.setAttribute(\"webix_tooltip\",config);\r\n\t\t\telse ctrl = config;\r\n\t\t} else {\r\n\t\t\tnode = target.$view;\r\n\t\t\tctrl = target;\r\n\t\t}\r\n\t\tctrl = ctrl || this;\r\n\r\n\t\tlet index = this._tooltip_masters.find(ctrl);\r\n\t\tif (index === -1){\r\n\t\t\tindex = this._tooltip_masters.length;\r\n\t\t\tthis._tooltip_masters.push(ctrl);\r\n\t\t}\r\n\t\tnode.webix_tooltip = index;\r\n\t\tthis._tooltip_exist++;\r\n\r\n\t\tif(!this._tooltip){\r\n\t\t\tthis._tooltip = new ui.tooltip({});\r\n\r\n\t\t\tthis._webix_tooltip_mm = event(document,\"mousemove\",this._move_tooltip,{ bind:this });\r\n\t\t\tthis._webix_tooltip_ml = event(document,\"mouseleave\",this._hide_tooltip, { bind:this });\r\n\t\t\tthis._drag_event = attachEvent(\"onDragMode\", () => { this._hide_tooltip(); });\r\n\t\t\tthis._click_event = attachEvent(\"onClick\", () => { this._hide_tooltip(); });\r\n\t\t}\r\n\t},\r\n\tgetTooltip:function(){\r\n\t\treturn this._tooltip;\r\n\t},\r\n\t_move_tooltip:function(e){\r\n\t\tlet node = e.target;\r\n\t\tlet text;\r\n\t\twhile (node instanceof Element && node.tagName != \"HTML\"){\r\n\t\t\tif ( this._tooltip_masters[node.webix_tooltip] ){\r\n\t\t\t\tif(this._last && this._last != node){\r\n\t\t\t\t\tthis.$tooltipOut(this._last,node,e);\r\n\t\t\t\t\tthis._last = null;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!this._last)\r\n\t\t\t\t\tthis._last = this.$tooltipIn(node,e);\r\n\t\t\t\tthis.$tooltipMove(node,e,text);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttext = text || node.getAttribute(\"webix_tooltip\");\r\n\t\t\tnode = node.parentElement;\r\n\t\t}\r\n\t\tif (this._last)\r\n\t\t\tthis._last = this.$tooltipOut(this._last,null,e);\r\n\t},\r\n\t_hide_tooltip:function(){\r\n\t\tclearTimeout(this._before_show_delay);\r\n\t\tthis._tooltip.hide();\r\n\t},\r\n\tgetMaster:function(t){\r\n\t\treturn this._tooltip_masters[t.webix_tooltip];\r\n\t},\r\n\tremoveTooltip:function(target){\r\n\t\tlet node;\r\n\t\tassert(target, \"Target isn't defined\");\r\n\r\n\t\ttarget = toNode(target);\r\n\t\tif (target instanceof Element)\r\n\t\t\tnode = target;\r\n\t\telse node = target.$view;\r\n\r\n\t\tconst tip = node.webix_tooltip;\r\n\t\tif (tip){\r\n\t\t\tif (this._last == node){\r\n\t\t\t\tthis._hide_tooltip();\r\n\t\t\t\tthis._last = null;\r\n\t\t\t}\r\n\t\t\tdelete node.webix_tooltip;\r\n\t\t\tthis._tooltip_exist--;\r\n\r\n\t\t\tthis._tooltip_masters[tip] = null;\r\n\t\t}\r\n\r\n\t\tif (!this._tooltip_exist && this._tooltip){\r\n\t\t\t// detach events first\r\n\t\t\tthis._webix_tooltip_mm = eventRemove(this._webix_tooltip_mm);\r\n\t\t\tthis._webix_tooltip_ml = eventRemove(this._webix_tooltip_ml);\r\n\t\t\tthis._drag_event = detachEvent(this._drag_event);\r\n\t\t\tthis._click_event = detachEvent(this._click_event);\r\n\r\n\t\t\t// then destroy the tooltip\r\n\t\t\tthis._tooltip.destructor();\r\n\t\t\tthis._tooltip = this._last = null;\r\n\t\t\tthis._tooltip_masters = _to_array([\"dummy\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t$tooltipIn:function(t,e){\r\n\t\tlet m = this._tooltip_masters[t.webix_tooltip];\r\n\t\tif (m.$tooltipIn && m!=this) return m.$tooltipIn(t,e);\r\n\t\tthis._tooltip.define( { dx:20, dy:0, template:t.getAttribute(\"webix_tooltip\")||\"\", css:\"\"} );\r\n\t\treturn t;\r\n\t},\r\n\t$tooltipOut:function(t,n,e){\r\n\t\tlet m = this._tooltip_masters[t.webix_tooltip];\r\n\t\tif (m.$tooltipOut && m!=this) return m.$tooltipOut(t,n,e);\r\n\t\tthis._hide_tooltip();\r\n\t\treturn null;\r\n\t},\r\n\t$tooltipMove:function(t,e,text){\r\n\t\tlet m = this._tooltip_masters[t.webix_tooltip];\r\n\t\tif (m.$tooltipMove && m!=this) return m.$tooltipMove(t,e,text);\r\n\t\tthis._tooltip.hide();\r\n\t\tclearTimeout(this._before_show_delay);\r\n\t\tthis._before_show_delay = delay(this._tooltip.show,this._tooltip,[text||{},getPos(e)],this.delay);\r\n\t}\r\n\r\n};\r\n\r\nexport default TooltipControl;","import env  from \"../webix/env\";\r\nimport state from \"../core/state\";\r\n\r\nimport {event} from \"../webix/htmlevents\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nimport {use} from \"../services\";\r\n\r\nexport function _uid(name){\r\n\treturn \"$\"+name+(_namecount[name] = (_namecount[name]||0)+1);\r\n}\r\nconst _namecount = {};\r\n\r\nvar _freeze_resize = false;\r\nexport function freeze(handler, trigger){\r\n\t_freeze_resize = true;\r\n\tvar res = handler();\r\n\tif (res && res.then){\r\n\t\tres = res.then(function(any){\r\n\t\t\t_freeze_resize = false;\r\n\t\t\tif (trigger !== false)\r\n\t\t\t\tresize();\r\n\t\t\treturn any;\r\n\t\t});\r\n\t} else {\r\n\t\t_freeze_resize = false;\r\n\t\tif (trigger !== false)\r\n\t\t\tresize();\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nexport function resize(){\r\n\tuse(\"UIManager\").applyChanges();\r\n\tcallEvent(\"onClick\",[]);\r\n\tstate._force_resize = true;\r\n\tif (!_freeze_resize)\r\n\t\tfor (var i=state.top_views.length - 1; i>=0; i--){\r\n\t\t\tif (state.top_views[i].obj)\r\n\t\t\t\tstate.top_views[i].obj.resize();\r\n\t\t}\r\n\tstate._force_resize = false;\r\n}\r\n\r\nexport function _each(parent, logic, master, include){\r\n\tif (parent){\r\n\t\tvar children = include ? [parent] : parent.getChildViews();\r\n\t\tfor (var i = 0; i < children.length; i++){\r\n\t\t\tif (logic.call((master), children[i]) !== false)\r\n\t\t\t\t_each(children[i], logic, master);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function zIndex(index){\r\n\tif (!isUndefined(index)){\r\n\t\tenv.zIndexBase = Math.max(env.zIndexBase, index+1);\r\n\t\treturn index;\r\n\t}\r\n\treturn env.zIndexBase++;\r\n}\r\n\r\nevent(window, \"resize\", function() {\r\n\t// check for virtual keyboard\r\n\tif(env.touch && ( state._edit_open_time && (new Date())-state._edit_open_time < 1000 || state._focus_time && (new Date())-state._focus_time < 1000)){\r\n\t\treturn;\r\n\t} else {\r\n\t\tresize();\r\n\t}\r\n});","import {assert} from \"./debug\";\r\nimport {event} from \"./htmlevents\";\r\nimport env from \"./env.js\";\r\nimport {isArray, delay} from \"./helpers.js\";\r\n\r\nimport {callEvent, attachEvent} from \"./customevents.js\";\r\n\r\nfunction ready(code){\r\n\tif (_ready) code.call();\r\n\telse _ready_code.push(code);\r\n}\r\nlet _ready = false;\r\nlet _ready_code = [];\r\n\r\n//autodetect codebase folder\r\nvar temp = document.getElementsByTagName(\"SCRIPT\");\t//current script, most probably\r\nassert(temp.length,\"Can't locate codebase\");\r\nif (temp.length){\r\n\t//full path to script\r\n\ttemp = (temp[temp.length-1].getAttribute(\"src\")||\"\").split(\"/\");\r\n\t//get folder name\r\n\ttemp.splice(temp.length-1, 1);\r\n\tenv.codebase = temp.slice(0, temp.length).join(\"/\")+\"/\";\r\n}\r\n\r\nvar handler = function(){\r\n\tif(env.isIE)\r\n\t\tdocument.body.className += \" webix_ie\";\r\n\tcallEvent(\"onReady\",[]);\r\n};\r\n\r\nvar doit = function(){\r\n\t_ready = true;\r\n\r\n\t/* global webix_ready */ \r\n\tif (window.webix_ready && isArray(webix_ready))\r\n\t\t_ready_code = webix_ready.concat(_ready_code);\r\n\r\n\tfor (var i=0; i < _ready_code.length; i++)\r\n\t\t_ready_code[i].call();\r\n\t_ready_code=[];\r\n};\r\n\r\nattachEvent(\"onReady\", function(force){\r\n\tif (force) \r\n\t\tdoit();\r\n\telse \r\n\t\tdelay(doit);\r\n});\r\n\r\nif (document.readyState == \"complete\") handler();\r\nelse event(window, \"load\", handler);\r\n\r\nready(function(){\r\n\tevent(document.body,\"click\", function(e){\r\n\t\tcallEvent(\"onClick\",[e||window.event]);\r\n\t});\r\n});\r\n\r\n\r\nexport default ready;","import {ui, $$} from \"../ui/core\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\nimport {create} from \"../webix/html\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nconst fullscreen = {\r\n\tset:function(view, config){\r\n\t\tconfig = config || {};\r\n\r\n\t\tif(this._view)\r\n\t\t\tthis.exit();\r\n\r\n\t\tif($$(view))\r\n\t\t\tview = $$(view);\r\n\t\telse{\r\n\t\t\tif(typeof view == \"string\")\r\n\t\t\t\tview = document.getElementById(view);\r\n\t\t\tif(view instanceof Element)\r\n\t\t\t\tview = {$view: view, $html: true};\r\n\t\t\tassert(view, \"Incorrect view for fullscreen mode\");\r\n\t\t}\r\n\r\n\t\tthis._view = view;\r\n\t\tthis._pos = this._setPosition();\r\n\r\n\t\tconst viewConfig = view.config;\r\n\t\tif(view.setPosition){\r\n\t\t\tviewConfig.fullscreen = true;\r\n\t\t\tview.resize();\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis._fullscreen = ui({\r\n\t\t\t\tview:\"window\",\r\n\t\t\t\thead: this._getHeadConfig(config),\r\n\t\t\t\tfullscreen:true,\r\n\t\t\t\tborderless:true,\r\n\t\t\t\t//better resize logic\r\n\t\t\t\tbody:{rows:[]}\r\n\t\t\t});\r\n\r\n\t\t\tif(viewConfig)\r\n\t\t\t\tthis._sizes = {\r\n\t\t\t\t\twidth: viewConfig.width, minWidth: viewConfig.minWidth, maxWidth: viewConfig.maxWidth,\r\n\t\t\t\t\theight: viewConfig.height, minHeight: viewConfig.minHeight, maxHeight: viewConfig.maxHeight\r\n\t\t\t\t};\r\n\r\n\t\t\tif(view.getParentView && view.getParentView()){\r\n\t\t\t\tthis._parent = view.getParentView();\r\n\r\n\t\t\t\tif(this._parent.index){\r\n\t\t\t\t\tthis._pos.index = this._parent.index(view);\r\n\t\t\t\t\tthis._pos.active = this._parent.getActiveId ? this._parent.getActiveId() == viewConfig.id : false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._parent = view.$view.parentNode;\r\n\t\t\t\tthis._pos.node = create(\"div\");\r\n\r\n\t\t\t\t//save old position\r\n\t\t\t\tthis._parent.replaceChild(this._pos.node, view.$view);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fullscreen.getBody().addView(view.$html ? {view:\"template\", content:view.$view, css:\"webix_fullscreen_html\"} : view);\r\n\r\n\t\t\tthis._fullscreen.show();\r\n\t\t\tthis._setSizes(view);\r\n\t\t}\r\n\t},\r\n\texit:function(){\r\n\t\tif(this._view){\r\n\t\t\tconst viewConfig = this._view.config;\r\n\t\t\tthis._setPosition(true);\r\n\t\t\tif(this._view.setPosition){\r\n\t\t\t\tviewConfig.fullscreen = false;\r\n\t\t\t\tthis._view.resize();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(this._parent instanceof Element){\r\n\t\t\t\t\tthis._view._parent_cell = null;\r\n\t\t\t\t\tif(this._view._set_inner)\r\n\t\t\t\t\t\tthis._view._set_inner(this._view.config);\r\n\t\t\t\t\tthis._parent.replaceChild(this._view.$view, this._pos.node);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(!isUndefined(this._pos.index)){\r\n\t\t\t\t\t\tthis._parent.addView(this._view, this._pos.index);\r\n\t\t\t\t\t\tif(this._pos.active)\r\n\t\t\t\t\t\t\tthis._view.show(false, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis._view._parent_cell = this._parent;\r\n\t\t\t\t\t\tthis._parent._replace(this._view);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._setSizes(this._view, this._sizes);\r\n\r\n\t\t\t\t//prevent view destruction (with layout)\r\n\t\t\t\tif(!this._view.$html)\r\n\t\t\t\t\tthis._fullscreen.getBody()._cells = [];\r\n\r\n\t\t\t\t//we can't set head false with replace, so we need to close win\r\n\t\t\t\tthis._fullscreen.close();\r\n\t\t\t}\r\n\t\t\tthis._clearValues();\r\n\t\t}\r\n\t},\r\n\t_clearValues:function(){\r\n\t\tdelete this._parent;\r\n\t\tdelete this._view;\r\n\t\tdelete this._sizes;\r\n\t\tdelete this._pos;\r\n\t\tdelete this._fullscreen;\r\n\t},\r\n\t_setPosition(restore){\r\n\t\tconst view = this._view;\r\n\t\tconst oldStyles = {};\r\n\r\n\t\tif(view.setPosition){\r\n\t\t\tif(restore)\r\n\t\t\t\tview.setPosition(this._pos.left, this._pos.top);\r\n\t\t\telse{\r\n\t\t\t\toldStyles.left = view.config.left;\r\n\t\t\t\toldStyles.top = view.config.top;\r\n\t\t\t\tview.setPosition(0,0);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconst rules = [\"position\", \"top\", \"bottom\", \"left\", \"right\"];\r\n\t\t\tconst style = view.$view.style;\r\n\r\n\t\t\trules.forEach(rule => {\r\n\t\t\t\tif(restore)\r\n\t\t\t\t\tstyle[rule] = this._pos[rule];\r\n\t\t\t\telse{\r\n\t\t\t\t\toldStyles[rule] = style[rule];\r\n\t\t\t\t\tstyle[rule] = rule == \"position\" ? \"relative\" : 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn oldStyles;\r\n\t},\r\n\t_setSizes:function(view, sizes){\r\n\t\tif(!view.$html){\r\n\t\t\tsizes = sizes || {height:0, minHeight:0, maxHeight:0, width:0, minWidth:0, maxWidth:0};\r\n\t\t\tview.define(sizes);\r\n\t\t\tview.resize();\r\n\t\t}\r\n\t},\r\n\t_getHeadConfig:function(config){\r\n\t\tif(config.head === false || typeof config.head == \"object\")\r\n\t\t\treturn config.head;\r\n\t\telse{\r\n\t\t\treturn {\r\n\t\t\t\tcols:[\r\n\t\t\t\t\t{template:config.head||\"\", type:\"header\", borderless:true},\r\n\t\t\t\t\t{view:\"icon\", icon:\"wxi-close\", click:()=>{\r\n\t\t\t\t\t\tthis.exit();\r\n\t\t\t\t\t}}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default fullscreen;","import ready from \"../webix/ready\";\r\n\r\nimport {assert} from \"../webix/debug\";\r\nimport {event} from \"../webix/htmlevents\";\r\nimport {delay,uid,_power_array,isUndefined,isArray} from \"../webix/helpers\";\r\nimport {callEvent} from \"../webix/customevents\";\r\nimport {locate,preventEvent} from \"../webix/html\";\r\nimport fullscreen from \"../webix/fullscreen\";\r\n\r\nimport {$$} from \"../ui/core\";\r\nimport state from \"../core/state\";\r\n\r\nimport {define} from \"../services\";\r\n\r\n\r\nconst UIManager = {\r\n\t_view: null,\r\n\t_hotkeys: {},\r\n\t_focus_time:0,\r\n\t_tab_time:0,\r\n\t_mouse_time:0,\r\n\t_controls: {\r\n\t\t\"esc\": \"escape\",\r\n\t\t\"up\": \"arrowup\",\r\n\t\t\"down\": \"arrowdown\",\r\n\t\t\"left\": \"arrowleft\",\r\n\t\t\"right\": \"arrowright\",\r\n\t\t\"pgdown\": \"pagedown\",\r\n\t\t\"pgup\": \"pageup\",\r\n\t\t\"space\": \" \",\r\n\t\t\"multiply\": \"*\",\r\n\t\t\"add\": \"+\",\r\n\t\t\"subtract\": \"-\",\r\n\t\t\"decimal\": \".\",\r\n\t\t\"divide\": \"/\",\r\n\t\t\"pausebreak\":\"pause\",\r\n\t\t\"5numlocked\":\"clear\"\r\n\t},\r\n\t_inputs:{\r\n\t\t\"input\": 1,\r\n\t\t\"button\":1,\r\n\t\t\"textarea\":1,\r\n\t\t\"select\":1\r\n\t},\r\n\t_enable: function() {\r\n\t\t// attaching events here\r\n\t\tevent(document, \"keydown\", this._keypress, { bind:this });\r\n\t\tevent(document.body, \"click\", this._focus_click, { bind:this });\r\n\t\tevent(document.body, \"mousedown\", function(){\r\n\t\t\tthis._mouse_time = new Date();\r\n\t\t}, { bind:this });\r\n\t\tevent(document.body, \"focus\", this._focus_tab, { capture:true, bind:this });\r\n\r\n\t\tstate.destructors.push({obj:this});\r\n\t},\r\n\tdestructor:function(){\r\n\t\tUIManager._view = null;\r\n\t},\r\n\tgetFocus: function() {\r\n\t\treturn this._view;\r\n\t},\r\n\t_focus_action:function(view){\r\n\t\tthis._focus_was_there = this._focus_was_there || view._settings.id;\r\n\t},\r\n\tsetFocus: function(view, only_api, tab){\r\n\t\t//view can be empty\r\n\t\tview = $$(view);\r\n\t\t//unfocus if view is hidden\r\n\t\tif (view && !view.$view) view = null;\r\n\r\n\t\t//store last click time, it is necessary to prevent refocusing\r\n\t\t//for example when user moves focus from onclick handler somewher\r\n\t\t//and we want to prevent autofocusing, when event will reach document.body\r\n\t\tthis._focus_time = state._focus_time = new Date();\r\n\r\n\t\tif (this._view === view) return true;\r\n\t\tif (this._view && this._view.callEvent)\r\n\t\t\tthis._view.callEvent(\"onBlur\", [this._view]);\r\n\r\n\t\tif (view && view.callEvent){\r\n\t\t\tview.callEvent(\"onFocus\", [view, this._view]);\r\n\t\t\tif(tab) view.callEvent(\"onTabFocus\", [view, this._view]);\r\n\t\t}\r\n\t\tcallEvent(\"onFocusChange\", [view, this._view]);\r\n\r\n\t\tif (this._view && this._view.blur && !only_api) this._view.blur();\r\n\t\tthis._view = view;\r\n\t\tif (view && view.focus && !only_api) view.focus();\r\n\t\treturn true;\r\n\t},\r\n\tapplyChanges: function(element){\r\n\t\tvar view = this.getFocus();\r\n\t\tif (view && view != element && view._applyChanges)\r\n\t\t\tview._applyChanges(element);\r\n\t},\r\n\thasFocus: function(view) {\r\n\t\treturn (view === this._view) ? true : false;\r\n\t},\r\n\t_focus: function(e){\r\n\t\tvar view = locate(e, /*@attr*/\"view_id\") || this._focus_was_there;\r\n\r\n\t\t//if html was repainted we can miss the view, so checking last processed one\r\n\t\tview = $$(view);\r\n\t\tthis._focus_was_there = null;\r\n\r\n\t\t//set timer, to fix issue with Android input focusin\r\n\t\tstate._focus_time = new Date();\r\n\r\n\t\tif (view == this._view) return true;\r\n\r\n\t\tif (view){\r\n\t\t\tif (this.canFocus(view)){\r\n\t\t\t\tthis.setFocus(view);\r\n\t\t\t}\r\n\t\t\t//remove focus from an unreachable view\r\n\t\t\telse if (view.$view.contains(e.target))\r\n\t\t\t\te.target.blur();\r\n\t\t}\r\n\t\telse this.setFocus(null);\r\n\r\n\t\treturn true;\r\n\t},\r\n\t_focus_click:function(e){\r\n\t\t// if it was onfocus/onclick less then 100ms behore then we ignore it\r\n\t\tif ((new Date())-this._focus_time < 100) {\r\n\t\t\tthis._focus_was_there = null;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this._focus(e);\r\n\t},\r\n\t_focus_tab: function(e){\r\n\t\tif(!this._inputs[e.target.nodeName.toLowerCase()])\r\n\t\t\treturn false;\r\n\t\treturn this._focus(e);\r\n\t},\r\n\t_top_modal: function(view){\r\n\t\tif (!state._modality) return true;\r\n\r\n\t\tconst top = view.queryView(a => !a.getParentView(), \"parent\") || view;\r\n\t\treturn (top.$view.style.zIndex||0) >= state._modality;\r\n\t},\r\n\tcanFocus:function(view){\r\n\t\treturn view.isVisible() && view.isEnabled() && !view.config.disabled && this._top_modal(view) && !view.queryView({disabled:true}, \"parent\");\r\n\t},\r\n\r\n\t_moveChildFocus: function(check_view){\r\n\t\tvar focus = this.getFocus();\r\n\t\t//we have not focus inside of closing item\r\n\t\tif (check_view && !this._is_child_of(check_view, focus))\r\n\t\t\treturn false;\r\n\r\n\t\tif (!this._focus_logic(\"getPrev\", check_view))\r\n\t\t\tthis._view = null;\r\n\t},\r\n\t_is_child_of: function(parent, child) {\r\n\t\tif (!parent) return false;\r\n\t\tif (!child) return false;\r\n\t\twhile (child) {\r\n\t\t\tif (child === parent) return true;\r\n\t\t\tchild = child.getParentView();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_keypress_timed:function(){\r\n\t\tif (this && this.callEvent)\r\n\t\t\tthis.callEvent(\"onTimedKeyPress\",[]);\r\n\t},\r\n\t_keypress: function(e) {\r\n\t\tlet code = e.which || e.keyCode;\r\n\t\t// numpad keys\r\n\t\tif(code>95 && code< 106)\r\n\t\t\tcode -= 48;\r\n\r\n\t\tconst view = this.getFocus();\r\n\t\tif (view && view.callEvent) {\r\n\t\t\tif (view.callEvent(\"onKeyPress\", [code, e]) === false)\r\n\t\t\t\tpreventEvent(e);\r\n\t\t\tif (view.hasEvent(\"onTimedKeyPress\")){\r\n\t\t\t\tclearTimeout(view._key_press_timeout);\r\n\t\t\t\tview._key_press_timeout = delay(this._keypress_timed, view, [], (view._settings.keyPressTimeout||250));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._check_keycode(e) === false) {\r\n\t\t\tpreventEvent(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\t// dir - getNext or getPrev\r\n\t_focus_logic: function(dir, focus) {\r\n\t\tvar next = focus||this.getFocus();\r\n\t\tif(next){\r\n\t\t\tdir = dir || \"getNext\";\r\n\t\t\tvar start = next;\r\n\t\t\tvar marker = uid();\r\n\r\n\t\t\twhile (true) { // eslint-disable-line\r\n\t\t\t\tnext = this[dir](next);\r\n\t\t\t\t// view with focus ability\r\n\t\t\t\tif (next && this.canFocus(next))\r\n\t\t\t\t\treturn this.setFocus(next);\r\n\r\n\t\t\t\t// elements with focus ability not found\r\n\t\t\t\tif (next === start || next.$fmarker == marker){\r\n\t\t\t\t\tif(focus)\r\n\t\t\t\t\t\tdocument.activeElement.blur();\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//prevents infinity loop\r\n\t\t\t\tnext.$fmarker = marker;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_tab_logic:function(view, e){\r\n\t\tvar mode = !e.shiftKey;\r\n\t\tUIManager._tab_time = new Date();\r\n\t\tif (view && view._custom_tab_handler && !view._custom_tab_handler(mode, e))\r\n\t\t\treturn false;\r\n\r\n\t\tif (view && view._in_edit_mode){\r\n\t\t\tif (view.editNext)\r\n\t\t\t\treturn view.editNext(mode);\r\n\t\t\telse if (view.editStop){\r\n\t\t\t\tview.editStop();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tdelay(function(){\r\n\t\t\t\tview = $$(document.activeElement);\r\n\t\t\t\tif(view && !UIManager.canFocus(view))\r\n\t\t\t\t\treturn UIManager._focus_logic(mode ? \"getNext\" : \"getPrev\", view);\r\n\t\t\t\tUIManager.setFocus(view, true, true);\r\n\t\t\t});\r\n\t},\r\n\tgetTop: function(id) {\r\n\t\tvar next, view = $$(id);\r\n\r\n\t\twhile (view && (next = view.getParentView()))\r\n\t\t\tview = next;\r\n\t\treturn view;\r\n\t},\r\n\r\n\tgetNext: function(view, _inner_call) {\r\n\t\tvar cells = view.getChildViews();\r\n\t\t//tab to first children\r\n\t\tif (cells.length && !_inner_call)\r\n\t\t\tfor (var i = 0; i < cells.length; i++)\r\n\t\t\t\tif(this.canFocus(cells[i]))\r\n\t\t\t\t\treturn cells[i];\r\n\r\n\t\t//unique case - single view without child and parent\r\n\t\tvar parent = view.getParentView();\r\n\t\tif (!parent)\r\n\t\t\treturn view;\r\n\r\n\t\tvar p_cells = parent.getChildViews();\r\n\t\tif (p_cells.length){\r\n\t\t\tvar index = _power_array.find.call(p_cells, view)+1;\r\n\t\t\twhile (index < p_cells.length) {\r\n\t\t\t\t//next visible child\r\n\t\t\t\tif (this.canFocus(p_cells[index])) \r\n\t\t\t\t\treturn p_cells[index];\r\n\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t} \r\n\r\n\t\t//sibling of parent\r\n\t\treturn this.getNext(parent, true);\r\n\t},\r\n\r\n\tgetPrev: function(view, _inner_call) {\r\n\t\tvar cells = view.getChildViews();\r\n\t\t//last child of last child\r\n\t\tif (cells.length && _inner_call)\r\n\t\t\tfor (var i = cells.length - 1; i >= 0; i--)\r\n\t\t\t\tif(this.canFocus(cells[i]))\r\n\t\t\t\t\treturn this.getPrev(cells[i], true);\r\n\r\n\t\tif (_inner_call && this.canFocus(view)) return view;\r\n\r\n\t\t//fallback from top to bottom\r\n\t\tvar parent = view.getParentView();\r\n\t\tif (!parent)\r\n\t\t\treturn this.canFocus(view) ? this.getPrev(view, true) : view;\r\n\r\n\t\tvar p_cells = parent.getChildViews();\r\n\t\tif (p_cells) {\r\n\t\t\tvar index = _power_array.find.call(p_cells, view)-1;\r\n\t\t\twhile (index >= 0) {\r\n\t\t\t\tif (this.canFocus(p_cells[index]))\r\n\t\t\t\t\treturn this.getPrev(p_cells[index], true);\r\n\t\t\t\tindex--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getPrev(parent, true);\r\n\t},\r\n\taddHotKey: function(keys, handler, view) {\r\n\t\tassert(handler, \"Hot key handler is not defined\");\r\n\t\tconst code = this._parse_keys(keys);\r\n\r\n\t\tif (!view) view = null;\r\n\t\tif (!this._hotkeys[code]) this._hotkeys[code] = [];\r\n\t\tthis._hotkeys[code].push({ handler, view });\r\n\r\n\t\treturn keys;\r\n\t},\r\n\tremoveHotKey: function(keys, func, view){\r\n\t\tconst code = this._parse_keys(keys);\r\n\t\tif (!func && !view)\r\n\t\t\tdelete this._hotkeys[code];\r\n\t\telse {\r\n\t\t\tvar t = this._hotkeys[code];\r\n\t\t\tif (t){\r\n\t\t\t\tfor (var i = t.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tif (view && t[i].view !== view) continue;\r\n\t\t\t\t\tif (func && t[i].handler !== func) continue;\r\n\t\t\t\t\tt.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t\tif (!t.length)\r\n\t\t\t\t\tdelete this._hotkeys[code];\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t_keycode: function(key, ctrl, shift, alt, meta) {\r\n\t\t//key can be undefined (browser autofill)\r\n\t\treturn (key||\"\").toLowerCase()+\"_\"+[\"\", (ctrl ? \"1\" : \"0\"), (shift ? \"1\" : \"0\"), (alt ? \"1\" : \"0\"), (meta ? \"1\" : \"0\")].join(\"\");\r\n\t},\r\n\t_check_keycode: function(e){\r\n\t\tconst keyCode = e.which || e.keyCode;\r\n\t\tconst is_any = !e.ctrlKey && !e.altKey && !e.metaKey && (keyCode!=9)&&(keyCode!=27)&&(keyCode!=13);\r\n\t\tconst code = this._keycode(e.key, e.ctrlKey, e.shiftKey, e.altKey, e.metaKey);\r\n\r\n\t\tvar focus = this.getFocus();\r\n\t\tif (this._hotkeys[code])\r\n\t\t\treturn  this._process_calls(this._hotkeys[code], focus, e);\r\n\t\telse if (is_any && this._hotkeys[\"any_0000\"])\r\n\t\t\treturn  this._process_calls(this._hotkeys[\"any_0000\"], focus, e);\r\n\r\n\t\treturn true;\r\n\t},\r\n\t_process_calls:function(calls, focus, e){\r\n\t\tfor (var i = 0; i < calls.length; i++) {\r\n\t\t\tvar key = calls[i];\r\n\t\t\tif ((key.view !== null) &&\t\t//common hot-key\r\n\t\t\t\t(focus !== key.view) &&\t\t//hot-key for current view\r\n\t\t\t\t//hotkey for current type of view\r\n\t\t\t\t(typeof(key.view) !== \"string\" || !focus || focus.name !== key.view)) continue;\r\n\r\n\t\t\tvar temp_result = key.handler(focus, e);\r\n\t\t\tif (!!temp_result === temp_result) return temp_result;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_parse_keys: function(keys) {\r\n\t\tvar controls = this._controls;\r\n\t\tvar parts = keys.toLowerCase().split(/[ +\\-_]/);\r\n\t\tvar ctrl, shift, alt, meta;\r\n\t\tctrl = shift = alt = meta = 0;\r\n\t\tvar letter = \"\";\r\n\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\tif (parts[i] === \"ctrl\") ctrl = 1;\r\n\t\t\telse if (parts[i] === \"shift\") shift = 1;\r\n\t\t\telse if (parts[i] === \"alt\") alt = 1;\r\n\t\t\telse if (parts[i] === \"command\") meta = 1;\r\n\t\t\telse {\r\n\t\t\t\tletter = controls[parts[i]] || parts[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this._keycode(letter, ctrl, shift, alt, meta);\r\n\t},\r\n\tgetState:function(node, children) {\r\n\t\tchildren = (children||false);\r\n\t\tnode = $$(node);\r\n\t\tvar state = {\r\n\t\t\tid: node.config.id,\r\n\t\t\twidth: node.config.width,\r\n\t\t\theight: node.config.height,\r\n\t\t\tgravity: node.config.gravity\r\n\t\t};\r\n\t\tif (!isUndefined(node.config.collapsed)) state.collapsed = node.config.collapsed;\r\n\t\tif (node.name === \"tabs\" || node.name === \"tabbar\") state.activeCell = node.getValue();\r\n\t\t\r\n\t\tif (children) {\r\n\t\t\tstate = [state];\r\n\t\t\tif (node._cells) {\r\n\t\t\t\tfor (var i = 0; i < node._cells.length; i++)\r\n\t\t\t\t\tstate = state.concat(this.getState(node._cells[i], children));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn state;\r\n\t},\r\n\tsetState:function(states) {\r\n\t\tif (!isArray(states)) states = [states];\r\n\t\r\n\t\tfor (var i = 0; i < states.length; i++) {\r\n\t\t\tvar state = states[i];\r\n\t\t\tvar node = $$(state.id);\r\n\t\t\tif (!node) continue;\r\n\t\r\n\t\t\tif (!isUndefined(state.collapsed)) node.define(\"collapsed\", state.collapsed);\r\n\t\t\tif (!isUndefined(state.activeCell)) node.setValue(state.activeCell);\r\n\t\r\n\t\t\tnode.define(\"width\", state.width);\r\n\t\t\tnode.define(\"height\", state.height);\r\n\t\t\tnode.define(\"gravity\", state.gravity);\r\n\t\t}\r\n\t\tvar top = $$(states[0].id);\r\n\t\tif (top) top.resize();\r\n\t}\r\n};\r\n\r\nready(function() {\r\n\tUIManager._enable();\r\n\r\n\tUIManager.addHotKey(\"enter\", function(view, ev){\r\n\t\tif (view && view.callEvent)\r\n\t\t\tview.callEvent(\"onEnter\", [ev]);\r\n\t\tif (view && view.editStop && view._in_edit_mode){\r\n\t\t\tview.editStop();\r\n\t\t\treturn true;\r\n\t\t} else if (view && view.touchable){\r\n\t\t\tvar form = view.getFormView();\r\n\t\t\tif (form && !view._skipSubmit)\r\n\t\t\t\tform.callEvent(\"onSubmit\",[view,ev]);\r\n\t\t}\r\n\t});\r\n\tUIManager.addHotKey(\"esc\", function(view){\r\n\t\tif (view){\r\n\t\t\tif (view.editCancel && view._in_edit_mode){\r\n\t\t\t\tview.editCancel();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar top = view.getTopParentView();\r\n\t\t\tif (top && top.setPosition){\r\n\t\t\t\tif(fullscreen._fullscreen == top)\r\n\t\t\t\t\tfullscreen.exit();\r\n\t\t\t\ttop._hide();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tUIManager.addHotKey(\"shift+tab\", UIManager._tab_logic);\r\n\tUIManager.addHotKey(\"tab\", UIManager._tab_logic);\r\n});\r\n\r\ndefine(\"UIManager\", UIManager);\r\n\r\nexport default UIManager;","import {extend} from \"../webix/helpers\";\r\n\r\nconst Settings={\r\n\t$init:function(){\r\n\t\t/* \r\n\t\t\tproperty can be accessed as this.config.some\r\n\t\t\tin same time for inner call it have sense to use _settings\r\n\t\t\tbecause it will be minified in final version\r\n\t\t*/\r\n\t\tthis._settings = this.config= {}; \r\n\t},\r\n\tdefine:function(property, value){\r\n\t\tif (typeof property == \"object\")\r\n\t\t\treturn this._parseSeetingColl(property);\r\n\t\treturn this._define(property, value);\r\n\t},\r\n\t_define:function(property,value){\r\n\t\t//method with name {prop}_setter will be used as property setter\r\n\t\t//setter is optional\r\n\t\tvar setter = this[property+\"_setter\"];\r\n\t\treturn (this._settings[property]=setter?setter.call(this,value,property):value);\r\n\t},\r\n\t//process configuration object\r\n\t_parseSeetingColl:function(coll){\r\n\t\tif (coll){\r\n\t\t\tfor (var a in coll)\t\t\t\t//for each setting\r\n\t\t\t\tthis._define(a,coll[a]);\t\t//set value through config\r\n\t\t}\r\n\t},\r\n\t//helper for object initialization\r\n\t_parseSettings:function(obj,initial){\r\n\t\t//initial - set of default values\r\n\t\tvar settings = {}; \r\n\t\tif (initial)\r\n\t\t\tsettings = extend(settings,initial);\r\n\t\t\t\t\t\r\n\t\t//code below will copy all properties over default one\r\n\t\tif (typeof obj == \"object\" && !obj.tagName)\r\n\t\t\textend(settings,obj, true);\t\r\n\t\t//call config for each setting\r\n\t\tthis._parseSeetingColl(settings);\r\n\t},\r\n\t_mergeSettings:function(config, defaults){\r\n\t\tfor (var key in defaults)\r\n\t\t\tswitch(typeof config[key]){\r\n\t\t\t\tcase \"object\": \r\n\t\t\t\t\tconfig[key] = this._mergeSettings((config[key]||{}), defaults[key]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tconfig[key] = defaults[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\t//do nothing\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\treturn config;\r\n\t}\r\n};\r\n\r\nexport default Settings;","import state from \"./state\";\r\n\r\nimport {_to_array} from \"../webix/helpers\";\r\nimport {event, _events_final_destructor} from \"../webix/htmlevents\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nimport {ui} from \"../ui/core\";\r\nimport UIManager from \"../core/uimanager\";\r\n\r\n\r\nconst Destruction = {\r\n\t$init:function(){\r\n\t\t//wrap in object to simplify removing self-reference\r\n\t\t//submenu can trigger this handler two times, preserve a single destructor reference\r\n\t\tvar t  = this._destructor_handler = this._destructor_handler || { obj: this};\r\n\r\n\t\t//register self in global list of destructors\r\n\t\tstate.destructors.push(t);\r\n\t},\r\n\t//will be called automatically on unload, can be called manually\r\n\t//simplifies job of GC\r\n\tdestructor:function(){\r\n\t\tvar config = this._settings;\r\n\r\n\t\tif (this._last_editor)\r\n\t\t\tthis.editCancel();\r\n\r\n\t\tif(this.callEvent)\r\n\t\t\tthis.callEvent(\"onDestruct\",[]);\r\n\r\n\t\t//destructor can be called only once\r\n\t\tthis.destructor=function(){};\r\n\t\t//remove self reference from global destructions collection\r\n\t\tthis._destructor_handler.obj = null;\r\n\r\n\t\t//destroy child and related cells\r\n\t\tif (this.getChildViews){\r\n\t\t\tvar cells = this.getChildViews();\r\n\t\t\tif (cells)\r\n\t\t\t\tfor (let i=0; i < cells.length; i++)\r\n\t\t\t\t\tcells[i].destructor();\r\n\r\n\t\t\tif (this._destroy_with_me)\r\n\t\t\t\tfor (let i=0; i < this._destroy_with_me.length; i++)\r\n\t\t\t\t\tthis._destroy_with_me[i].destructor();\r\n\t\t}\r\n\r\n\t\tdelete ui.views[config.id];\r\n\r\n\t\tif (config.$id){\r\n\t\t\tvar top = this.getTopParentView();\r\n\t\t\tif (top && top._destroy_child)\r\n\t\t\t\ttop._destroy_child(config.$id);\r\n\t\t}\r\n\r\n\t\t//html collection\r\n\t\tthis._htmlmap  = null;\r\n\t\tthis._htmlrows = null;\r\n\t\tthis._html = null;\r\n\r\n\r\n\t\tif (this._contentobj) {\r\n\t\t\tthis._contentobj.innerHTML=\"\";\r\n\t\t\tthis._contentobj._htmlmap = null;\r\n\t\t}\r\n\r\n\t\t//removes view container\r\n\t\tif (this._viewobj&&this._viewobj.parentNode){\r\n\t\t\tthis._viewobj.parentNode.removeChild(this._viewobj);\r\n\t\t}\r\n\r\n\t\tif (this.data && this.data.destructor)\r\n\t\t\tthis.data.destructor();\r\n\r\n\t\tif (this.unbind)\r\n\t\t\tthis.unbind();\r\n\r\n\t\tthis.data = null;\r\n\t\tthis._viewobj = this.$view = this._contentobj = this._dataobj = null;\r\n\t\tthis._evs_events = this._evs_handlers = {};\r\n\r\n\t\t//remove focus from destructed view\r\n\t\tif (UIManager._view == this)\r\n\t\t\tUIManager._view = null;\r\n\r\n\t\tvar url = config.url;\r\n\t\tif (url && url.$proxy && url.release)\r\n\t\t\turl.release();\r\n\r\n\t\tthis.$scope = null;\r\n\t\t// this flag is checked in delay method\r\n\t\tthis.$destructed = true;\r\n\t}\r\n};\r\n//global list of destructors\r\nevent(window,\"unload\",function(){\r\n\tcallEvent(\"unload\", []);\r\n\tstate._final_destruction = true;\r\n\t\r\n\t//call all registered destructors\r\n\tfor (var i=0; i<state.destructors.length; i++){\r\n\t\tvar obj = state.destructors[i].obj;\r\n\t\tif (obj)\r\n\t\t\tobj.destructor();\r\n\t}\r\n\tstate.destructors = [];\r\n\tstate._popups = _to_array();\r\n\r\n\t_events_final_destructor();\r\n});\r\n\r\nexport default Destruction;","import {bind} from \"../webix/helpers\";\r\n\r\nconst CollectionBind={\r\n\t$init:function(){\r\n\t\tthis._cursor = null;\r\n\t\tthis.attachEvent(\"onSelectChange\", function(){\r\n\t\t\tvar sel = this.getSelectedId();\r\n\t\t\tthis.setCursor(sel?(sel.id||sel):null);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterCursorChange\", this._update_binds);\t\t\r\n\t\tthis.attachEvent(\"onAfterDelete\", function(id){\r\n\t\t\tif (id == this.getCursor())\r\n\t\t\t\tthis.setCursor(null);\r\n\t\t});\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(function(id, data, mode){\r\n\t\t\t//paint - ignored\r\n\t\t\t//delete - handled by onAfterDelete above\r\n\t\t\tif (id && id == this.getCursor() && mode != \"paint\" && mode != \"delete\")\r\n\t\t\t\tthis._update_binds();\r\n\t\t\t\r\n\t\t},this));\r\n\t\tthis.data.attachEvent(\"onClearAll\", bind(function(){\r\n\t\t\tthis._cursor = null;\r\n\t\t},this));\r\n\t\tthis.data.attachEvent(\"onIdChange\", bind(function(oldid, newid){\r\n\t\t\tif (this._cursor == oldid){\r\n\t\t\t\tthis._cursor = newid;\r\n\t\t\t\tthis._update_binds();\r\n\t\t\t}\r\n\t\t},this));\r\n\t},\r\n\trefreshCursor:function(){\r\n\t\tif (this._cursor)\r\n\t\t\tthis.callEvent(\"onAfterCursorChange\",[this._cursor]);\r\n\t},\r\n\tsetCursor:function(id){\r\n\t\tif (id == this._cursor || (id !== null && !this.getItem(id))) return;\r\n\t\t\r\n\t\tthis.callEvent(\"onBeforeCursorChange\", [this._cursor]);\r\n\t\tthis._cursor = id;\r\n\t\tthis.callEvent(\"onAfterCursorChange\",[id]);\r\n\t},\r\n\tgetCursor:function(){\r\n\t\treturn this._cursor;\r\n\t},\r\n\t_bind_update:function(target, rule, format){\r\n\t\tif (rule == \"$level\" && this.data.getBranch)\r\n\t\t\treturn (target.data || target).importData(this.data.getBranch(this.getCursor()));\r\n\r\n\t\tvar data = this.getItem(this.getCursor())|| this._settings.defaultData || null;\r\n\t\tif (rule == \"$data\"){\r\n\t\t\tif (typeof format === \"function\")\r\n\t\t\t\tformat.call(target, data, this);\r\n\t\t\telse\r\n\t\t\t\ttarget.data.importData(data?data[format]:[]);\r\n\t\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\r\n\t\t} else {\r\n\t\t\tif (format)\r\n\t\t\t\tdata = format(data);\r\n\t\t\tthis._bind_update_common(target, rule, data);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default CollectionBind;","const ValueBind={\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onChange\", this._update_binds);\r\n\t},\r\n\t_bind_update:function(target, rule, format){\r\n\t\trule = rule || \"value\";\r\n\t\tvar data = this.getValue()||\"\";\r\n\t\tif (format) data = format(data);\r\n\t\t\r\n\t\tif (target.setValue)\r\n\t\t\ttarget.setValue(data);\r\n\t\telse if (!target.filter){\r\n\t\t\tvar pod = {}; pod[rule] = data;\r\n\t\t\tif (target._check_data_feed(data))\r\n\t\t\t\ttarget.setValues(pod);\r\n\t\t} else{\r\n\t\t\ttarget.data.silent(function(){\r\n\t\t\t\tthis.filter(rule,data);\r\n\t\t\t});\r\n\t\t}\r\n\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\r\n\t}\r\n};\r\n\r\nexport default ValueBind;","const RecordBind={\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onChange\", this._update_binds);\t\t\r\n\t},\r\n\t_bind_update:function(target, rule, format){\r\n\t\tvar data = this.getValues()||null;\r\n\t\tif (format)\r\n\t\t\tdata = format(data);\r\n\t\tthis._bind_update_common(target, rule, data);\r\n\t}\r\n};\r\n\r\n\r\nexport default RecordBind;","import {extend, clone} from \"../webix/helpers\";\r\n\r\nimport {$$} from \"../ui/core\";\r\n\r\nimport CollectionBind from \"./collectionbind\";\r\nimport ValueBind from \"./valuebind\";\r\nimport RecordBind from \"./recordbind\";\r\n\r\nconst BindSource = {\r\n\t$init:function(){\r\n\t\tthis._bind_hash = {};\t\t//rules per target\r\n\t\tthis._bind_updated = {};\t//update flags\r\n\t\tthis._ignore_binds = {};\r\n\t\t\r\n\t\t//apply specific bind extension\r\n\t\tthis._bind_specific_rules(this);\r\n\t},\r\n\tsaveBatch:function(code){\r\n\t\tthis._do_not_update_binds = true;\r\n\t\tcode.call(this);\r\n\t\tthis._do_not_update_binds = false;\r\n\t\tthis._update_binds();\r\n\t},\r\n\tsetBindData:function(data, key){\r\n\t\t//save called, updating master data\r\n\t\tif (key)\r\n\t\t\tthis._ignore_binds[key] = true;\r\n\r\n\t\tif (this.setValue)\r\n\t\t\tthis.setValue(data);\r\n\t\telse if (this.setValues)\r\n\t\t\tthis.setValues(data);\r\n\t\telse {\r\n\t\t\tvar id = this.getCursor();\r\n\t\t\tif (id)\r\n\t\t\t\tthis.updateItem(id, data);\r\n\t\t\telse\r\n\t\t\t\tthis.add(data);\r\n\t\t}\r\n\t\tthis.callEvent(\"onBindUpdate\", [data, key]);\t\t\r\n\t\tif (this.save)\r\n\t\t\tthis.save();\r\n\t\t\r\n\t\tif (key)\r\n\t\t\tthis._ignore_binds[key] = false;\r\n\t},\r\n\t//fill target with data\r\n\tgetBindData:function(key, update){\r\n\t\t//fire only if we have data updates from the last time\r\n\t\tif (this._bind_updated[key]) return false;\r\n\t\tvar target = $$(key);\r\n\t\t//fill target only when it visible\r\n\t\tif (target.isVisible(target._settings.id)){\r\n\t\t\tthis._bind_updated[key] = true;\r\n\t\t\tthis._bind_update(target, this._bind_hash[key][0], this._bind_hash[key][1]); //trigger component specific updating logic\r\n\t\t\tif (update && target.filter)\r\n\t\t\t\ttarget.refresh();\r\n\t\t}\r\n\t},\r\n\t//add one more bind target\r\n\taddBind:function(source, rule, format){\r\n\t\tthis._bind_hash[source] = [rule, format];\r\n\t},\r\n\tremoveBind:function(source){\r\n\t\tdelete this._bind_hash[source];\r\n\t\tdelete this._bind_updated[source];\r\n\t\tdelete this._ignore_binds[source];\r\n\t},\r\n\t//returns true if object belong to \"collection\" type\r\n\t_bind_specific_rules:function(obj){\r\n\t\tif (obj.filter)\r\n\t\t\textend(this, CollectionBind);\r\n\t\telse if (obj.setValue)\r\n\t\t\textend(this, ValueBind);\r\n\t\telse\r\n\t\t\textend(this, RecordBind);\r\n\t},\r\n\t//inform all binded objects, that source data was updated\r\n\t_update_binds:function(){\r\n\t\tif (!this._do_not_update_binds)\r\n\t\t\tfor (var key in this._bind_hash){\r\n\t\t\t\tif (this._ignore_binds[key]) continue;\r\n\t\t\t\tthis._bind_updated[key] = false;\r\n\t\t\t\tthis.getBindData(key, true);\r\n\t\t\t}\r\n\t},\r\n\t//copy data from source to the target\r\n\t_bind_update_common:function(target, rule, data){\r\n\t\tif (target.setValue)\r\n\t\t\ttarget.setValue((data&&rule)?data[rule]:data);\r\n\t\telse if (!target.filter){\r\n\t\t\tif (!data && target.clear)\r\n\t\t\t\ttarget.clear();\r\n\t\t\telse {\r\n\t\t\t\tif (target._check_data_feed(data))\r\n\t\t\t\t\ttarget.setValues(clone(data));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttarget.data.silent(function(){\r\n\t\t\t\tthis.filter(rule,data);\r\n\t\t\t});\r\n\t\t}\r\n\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\r\n\t}\r\n};\r\n\r\nexport default BindSource;","import {extend, bind} from \"../webix/helpers\";\r\n\r\nimport {$$} from \"../ui/core\";\r\n\r\nimport BindSource from \"./bindsource\";\r\nimport EventSystem from \"./eventsystem\";\r\n\r\nconst BaseBind = {\r\n\tbind:function(target, rule, format){\r\n\t\tif (!this.attachEvent)\r\n\t\t\textend(this, EventSystem);\r\n\r\n\t\tif (typeof target == \"string\")\r\n\t\t\ttarget = $$(target);\r\n\t\t\t\r\n\t\tif (target._initBindSource) target._initBindSource();\r\n\t\tif (this._initBindSource) this._initBindSource();\r\n\t\t\t\r\n\t\tif (!target.getBindData)\r\n\t\t\textend(target, BindSource);\r\n\r\n\t\tthis._bind_ready();\r\n\r\n\t\ttarget.addBind(this._settings.id, rule, format);\r\n\t\tthis._bind_source = target._settings.id;\r\n\t\tthis._bind_id = this._settings.id;\r\n\r\n\t\t//FIXME - check for touchable is not the best solution, to detect necessary event\r\n\t\tthis._bind_refresh_handler = this.attachEvent(this.touchable?\"onAfterRender\":\"onBindRequest\", function(){\r\n\t\t\treturn target.getBindData(this._bind_id);\r\n\t\t});\r\n\r\n\t\tif (this.refresh && this.isVisible(this._bind_id))\r\n\t\t\tthis.refresh();\r\n\t},\r\n\tunbind:function(){\r\n\t\tif (this._bind_source){\r\n\t\t\tvar target = $$(this._bind_source);\r\n\t\t\tif (target)\r\n\t\t\t\ttarget.removeBind(this._bind_id);\r\n\t\t\tthis.detachEvent(this._bind_refresh_handler);\r\n\t\t\tthis._bind_source = this._bind_refresh_handler = null;\r\n\t\t}\r\n\t},\r\n\t_bind_ready:function(){\r\n\t\tvar config = this._settings;\r\n\t\tif (this.filter){\r\n\t\t\tvar key = config.id;\r\n\t\t\tthis.data._on_sync = bind(function(){\r\n\t\t\t\t$$(this._bind_source)._bind_updated[key] = false;\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tvar old_render = this.render;\r\n\t\tthis.render = function(){\r\n\t\t\tif (this._in_bind_processing) return;\r\n\t\t\t\r\n\t\t\tthis._in_bind_processing = true;\r\n\t\t\tvar result = this.callEvent(\"onBindRequest\");\r\n\t\t\tthis._in_bind_processing = false;\r\n\t\t\t\r\n\t\t\treturn old_render.apply(this, ((result === false)?arguments:[]));\r\n\t\t};\r\n\r\n\t\tif (this.getValue||this.getValues)\r\n\t\t\tthis.save = function(data){\r\n\t\t\t\tvar source = $$(this._bind_source);\r\n\t\t\t\tif (data)\r\n\t\t\t\t\tsource.setBindData(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.validate && !this.validate()) return false;\r\n\t\t\t\t\tvar values = this.getValue?this.getValue:this.getValues();\r\n\t\t\t\t\tsource.setBindData(values,this._settings.id);\r\n\t\t\t\t\t//reset form, so it will be counted as saved\r\n\t\t\t\t\tif (this.setDirty)\r\n\t\t\t\t\t\tthis.setDirty(false);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\tthis._bind_ready = function(){};\r\n\t}\r\n};\r\n\r\nexport default BaseBind;","import {assert} from \"../webix/debug\";\r\nimport {debug_size_box} from \"../webix/debug\";\r\n\r\nimport {callEvent} from \"../webix/customevents\";\r\nimport {create, createCss, remove, addCss, removeCss, triggerEvent, preventEvent} from \"../webix/html\";\r\nimport {toNode, extend} from \"../webix/helpers\";\r\nimport env from \"../webix/env\";\r\n\r\nimport {$$,ui,protoUI} from \"../ui/core\";\r\nimport {_uid, _each} from \"../ui/helpers\";\r\n\r\nimport state from \"../core/state\";\r\nimport UIManager from \"../core/uimanager\";\r\n\r\nimport Settings from \"../core/settings\";\r\nimport Destruction from \"../core/destruction\";\r\nimport BaseBind from \"../core/basebind\";\r\n\r\nconst UIExtension = window.webix_view||{};\r\n\r\nconst api = {\r\n\tname:\"baseview\",\r\n\t//attribute , which will be used for ID storing\r\n\t$init:function(config){\r\n\t\tif (!config.id) \r\n\t\t\tconfig.id = _uid(this.name);\r\n\t\t\r\n\t\tthis._parent_cell = state._parent_cell;\r\n\t\tstate._parent_cell = null;\r\n\r\n\t\t// if scope not provided directly, and there is no parent view\r\n\t\t// check if we have a global scope\r\n\t\tthis.$scope = config.$scope || (this._parent_cell ? this._parent_cell.$scope : state._global_scope);\r\n\t\t\r\n\t\tif (!this._viewobj){\r\n\t\t\tthis._contentobj = this._viewobj = create(\"DIV\",{\r\n\t\t\t\t\"class\":\"webix_view\"\r\n\t\t\t});\r\n\t\t\tthis.$view = this._viewobj;\r\n\t\t}\r\n\t},\r\n\t$skin:false,\r\n\tdefaults:{\r\n\t\twidth:0,\r\n\t\theight:0,\r\n\t\tgravity:1\r\n\t},\r\n\tgetNode:function(){\r\n\t\treturn this._viewobj;\r\n\t},\r\n\t// needed only to maintain the deprecated ActiveContent module\r\n\t// do not use it anywhere else\r\n\t$setNode:function(node){\r\n\t\tthis._viewobj = this._dataobj = this.$view = node;\r\n\t},\r\n\tgetParentView:function(){\r\n\t\treturn this._parent_cell||null;\t\r\n\t},\r\n\tgetTopParentView:function(){\r\n\t\tvar parent = this.getParentView();\r\n\t\treturn parent ? parent.getTopParentView() :  this;\r\n\t},\r\n\tgetFormView:function(){\r\n\t\tvar parent = this.getParentView();\r\n\t\treturn (!parent || parent._recollect_elements) ? parent : parent.getFormView();\r\n\t},\r\n\tgetChildViews:function(){ return []; },\r\n\tqueryView:function(search, all){\r\n\t\tvar confirm;\r\n\t\tif (typeof search === \"string\")\r\n\t\t\tsearch = { view:search };\r\n\t\tif (typeof search === \"object\"){\r\n\t\t\t//IE8 compatibility\r\n\t\t\tconfirm = function(test){\r\n\t\t\t\tvar config = test.config;\r\n\t\t\t\tfor (var key in search){\r\n\t\t\t\t\tif (config[key] != search[key])\r\n\t\t\t\t\t\treturn false; \r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t} else\r\n\t\t\tconfirm = search;\r\n\r\n\t\tif (all === \"self\" && confirm(this)) return this;\r\n\t\tvar results = all === \"all\" ? [] : false;\r\n\t\tvar direction = all === \"parent\" ? this._queryGoUp : this._queryGoDown;\r\n\r\n\t\tvar found = this._queryView(confirm, direction, results);\r\n\t\treturn all === \"all\" ? results : found;\r\n\t},\r\n\t_queryGoDown:function(node){\r\n\t\treturn node.getChildViews();\r\n\t},\r\n\t_queryGoUp:function(node){\r\n\t\tvar parent = node.getParentView();\r\n\t\treturn parent ? [parent] : [];\r\n\t},\r\n\t_queryView:function(confirm, next, all){\r\n\t\tvar kids = next(this);\r\n\t\tfor (var i =0; i<kids.length; i++){\r\n\t\t\tif (confirm(kids[i])){\r\n\t\t\t\tif (all)\r\n\t\t\t\t\tall.push(kids[i]);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn kids[i];\r\n\t\t\t}\r\n\r\n\t\t\tvar sub = kids[i]._queryView(confirm, next, all);\r\n\t\t\tif (sub && !all){\r\n\t\t\t\treturn sub;\r\n\t\t\t} \r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tisVisible:function(base_id){\r\n\t\tif (this._settings.hidden){\r\n\t\t\tif(base_id){\r\n\t\t\t\tif (!this._hidden_render) {\r\n\t\t\t\t\tthis._hidden_render = [];\r\n\t\t\t\t\tthis._hidden_hash = {};\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._hidden_hash[base_id]){\r\n\t\t\t\t\tthis._hidden_hash[base_id] =  true;\r\n\t\t\t\t\tthis._hidden_render.push(base_id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tvar parent = this.getParentView();\r\n\t\tif (parent) return parent.isVisible(base_id, this._settings.id);\r\n\t\t\r\n\t\treturn true;\r\n\t},\r\n\tisEnabled:function(){\r\n\t\tif(this._disable_cover)\r\n\t\t\treturn false;\r\n\r\n\t\tvar parent= this.getParentView();\r\n\t\tif(parent)\r\n\t\t\treturn parent.isEnabled();\r\n\r\n\t\treturn true;\r\n\t},\r\n\tdisable:function(){\r\n\t\tremove(this._disable_cover);\r\n\t\tthis._settings.disabled = true;\r\n\r\n\t\tthis._disable_cover = create(\"div\",{\r\n\t\t\t\"class\":\"webix_disabled\"\r\n\t\t});\r\n\r\n\t\tthis._viewobj.appendChild(this._disable_cover);\r\n\t\tthis._viewobj.setAttribute(\"aria-disabled\", \"true\");\r\n\t\taddCss(this._viewobj,\"webix_disabled_view\",true);\r\n\t\tUIManager._moveChildFocus(this);\r\n\t},\r\n\tenable:function(){\r\n\t\tthis._settings.disabled = false;\r\n\r\n\t\tif (this._disable_cover){\r\n\t\t\tremove(this._disable_cover);\r\n\t\t\tremoveCss(this._viewobj,\"webix_disabled_view\");\r\n\t\t\tthis._viewobj.removeAttribute(\"aria-disabled\");\r\n\t\t\tthis._disable_cover = null;\r\n\t\t}\r\n\t},\r\n\tdisabled_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tthis.disable();\r\n\t\telse\r\n\t\t\tthis.enable();\r\n\t\treturn value;\r\n\t},\r\n\tcontainer_setter:function(value){\r\n\t\tassert(toNode(value),\"Invalid container\");\r\n\t\treturn true;\r\n\t},\r\n\tcss_setter:function(value){\r\n\t\tif (typeof value == \"object\")\r\n\t\t\tvalue = createCss(value);\r\n\r\n\t\tthis._viewobj.className += \" \"+value;\r\n\t\treturn value;\r\n\t},\r\n\tid_setter:function(value){\r\n\t\tif (state._global_collection && (state._global_collection != this || this._prev_global_col)){\r\n\t\t\tvar oldvalue = this.config.$id = value;\r\n\t\t\t(this._prev_global_col || state._global_collection)._elements[value] = this;\r\n\t\t\tvalue = _uid(this.name);\r\n\t\t\t(this._prev_global_col || state._global_collection)._translate_ids[value]=oldvalue;\r\n\t\t}\r\n\t\tassert(!ui.views[value], \"Non unique view id: \"+value);\r\n\t\tui.views[value] = this;\r\n\t\tthis._viewobj.setAttribute(/*@attr*/\"view_id\", value);\r\n\t\treturn value;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tvar last = this._last_size;\r\n\t\tif (last && last[0]==x && last[1]==y) {\r\n\t\t\tif (DEBUG) debug_size_box(this, [x,y,\"not changed\"]);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (DEBUG) debug_size_box(this, [x,y]);\r\n\t\t\r\n\t\tthis._last_size = [x,y];\r\n\t\tthis.$width  = this._content_width = x-(this._scroll_y?env.scrollSize:0);\r\n\t\tthis.$height = this._content_height = y-(this._scroll_x?env.scrollSize:0);\r\n\r\n\t\tvar config = this._settings;\r\n\t\tif (!config.flex){\r\n\t\t\tthis._viewobj.style.width = x+\"px\";\r\n\t\t\tthis._viewobj.style.height = y+\"px\";\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar s = this._settings;\r\n\r\n\t\tvar size = [\r\n\t\t\t(s.width || s.minWidth || 0)*1,\r\n\t\t\t(s.width || s.maxWidth || 100000)*1,\r\n\t\t\t(s.height || s.minHeight || 0)*1,\r\n\t\t\t(s.height || s.maxHeight || 100000)*1,\r\n\t\t\ts.gravity\r\n\t\t];\r\n\r\n\t\tif (assert){\r\n\t\t\tvar check = (isNaN(size[0]) || isNaN(size[1]) || isNaN(size[2]) || isNaN(size[3]));\r\n\t\t\tif (check){\r\n\t\t\t\tassert(false, \"Size is not a number \"+this._settings.id);\r\n\t\t\t\ts.width = s.height = s.maxWidth = s.maxHeight = s.minWidth = s.minHeight = 0;\r\n\t\t\t\tsize = [0,0,100000,100000,1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsize[0]+=dx; size[1]+=dx;\r\n\t\tsize[2]+=dy; size[3]+=dy;\r\n\t\treturn size;\r\n\t},\r\n\tshow:function(force, animate_settings){\r\n\t\tvar parent = this.getParentView();\r\n\t\tvar show = !arguments[2];\r\n\t\tif (parent) {\r\n\t\t\tif(!animate_settings && animate_settings !== false && this._settings.animate)\r\n\t\t\t\tif (parent._settings.animate)\r\n\t\t\t\t\tanimate_settings = extend((parent._settings.animate?extend({},parent._settings.animate):{}), this._settings.animate, true);\r\n\r\n\t\t\tif (show?parent._show:parent._hide)\r\n\t\t\t\t(show?parent._show:parent._hide).call(parent, this, animate_settings);\r\n\t\t\tif (show)\r\n\t\t\t\tthis._render_hidden_views();\r\n\r\n\t\t\t//force show of parent view\r\n\t\t\t//stop further processing is view is a part of isolated scope\r\n\t\t\tif (force && show)  \r\n\t\t\t\tparent.show(parent.$$?false:force);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif (this._settings.hidden){\r\n\t\t\t\tif (show){\r\n\t\t\t\t\tvar node = toNode(this._settings._container||document.body);\r\n\t\t\t\t\tnode.appendChild(this._viewobj);\r\n\t\t\t\t\tthis._settings.hidden = false;\r\n\r\n\t\t\t\t\tthis.adjust();\r\n\r\n\t\t\t\t\tif (this.callEvent){\r\n\t\t\t\t\t\tthis.callEvent(\"onViewShow\", []);\r\n\r\n\t\t\t\t\t\tif (this._signal_hidden_cells)\r\n\t\t\t\t\t\t\t_each(this, this._signal_hidden_cells);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._render_hidden_views();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!show){\r\n\t\t\t\t\tthis._settings.hidden = this._settings._hidden = true;\r\n\t\t\t\t\tif (this._viewobj){\r\n\t\t\t\t\t\tthis._settings._container = this._viewobj.parentNode;\r\n\t\t\t\t\t\tremove(this._viewobj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_render_hidden_views:function(){\r\n\t\tif (this._hidden_render){\r\n\t\t\tfor (var i=0; i < this._hidden_render.length; i++){\r\n\t\t\t\tvar ui_to_render = $$(this._hidden_render[i]);\r\n\t\t\t\tif (ui_to_render)\r\n\t\t\t\t\tui_to_render.render();\r\n\t\t\t}\r\n\t\t\tthis._hidden_render = [];\r\n\t\t\tthis._hidden_hash = {};\r\n\t\t}\r\n\t},\r\n\t_onKeyPress:function(code, e){\r\n\t\tvar target = e.target, role = target.getAttribute(\"role\");\r\n\r\n\t\tif((code === 13 || code === 32) && (role == \"button\" || role == \"tab\") && !this._settings.disabled){\r\n\t\t\ttriggerEvent(target, \"MouseEvents\", \"click\");\r\n\t\t\tpreventEvent(e);\r\n\t\t}\r\n\t},\r\n\thidden_setter:function(value){\r\n\t\tif (value) this.hide();\r\n\t\treturn this._settings.hidden;\r\n\t},\r\n\thide:function(){\r\n\t\tthis.show(null, null, true);\r\n\t\tUIManager._moveChildFocus(this);\r\n\t},\r\n\tadjust:function(){\r\n\t\tif(!this._viewobj.parentNode)\r\n\t\t\treturn false;\r\n\r\n\t\tvar x = this._viewobj.parentNode.clientWidth||0;\r\n\t\tvar y = this._viewobj.parentNode.clientHeight||0;\r\n\r\n\t\tvar sizes=this.$getSize(0,0);\r\n\t\tvar fullscreen = (this._viewobj.parentNode == document.body) && !this.setPosition;\r\n\r\n\t\t//minWidth\r\n\t\tif (sizes[0]>x) x = sizes[0];\r\n\t\t//minHeight\r\n\t\tif (sizes[2]>y) y = sizes[2];\r\n\r\n\t\t//maxWidth rule\r\n\t\tif ((!fullscreen || this._settings.width)  && x>sizes[1]) x = sizes[1];\r\n\t\t//maxHeight rule\r\n\t\tif ((!fullscreen || this._settings.height) && y>sizes[3]) y = sizes[3];\r\n\r\n\t\tthis.$setSize(x,y);\r\n\t\tif (state._responsive_exception){\r\n\t\t\tstate._responsive_exception = false;\r\n\t\t\tthis.adjust();\r\n\t\t}\r\n\t},\r\n\tresize:function(){\r\n\t\tif (state._child_sizing_active || state._freeze_resize || state._responsive_tinkery ) return;\r\n\r\n\t\tvar parent = this.getParentView();\r\n\t\tif (parent){\r\n\t\t\tif (parent.resizeChildren)\r\n\t\t\t\tparent.resizeChildren();\r\n\t\t\telse\r\n\t\t\t\tparent.resize();\r\n\t\t} else {\r\n\t\t\tthis.adjust();\r\n\t\t\tcallEvent(\"onResize\",[]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, Settings, Destruction, BaseBind, UIExtension);\r\nexport default { api, view };","import {isUndefined} from \"../webix/helpers\";\r\nimport {debug_size_box} from \"../webix/debug\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\nimport base from \"./baseview\";\r\n\r\nconst api = {\r\n\tname:\"view\",\r\n\t$init:function(config){\r\n\t\tthis._set_inner(config);\r\n\t},\r\n\r\n\t//deside, will component use borders or not\r\n\t_set_inner:function(config){\r\n\t\tvar border_not_set = isUndefined(config.borderless);\r\n\t\tif (border_not_set && !this.setPosition && config.$topView){\r\n\t\t\tconfig.borderless = true;\r\n\t\t\tborder_not_set = false;\r\n\t\t}\r\n\r\n\t\tif ((border_not_set && this.defaults.borderless) || config.borderless){\r\n\t\t\t//button and custom borderless\r\n\t\t\tconfig._inner = { top:true, left:true, bottom:true, right:true };\r\n\t\t} else {\r\n\t\t\t//default borders\r\n\t\t\tif (!config._inner)\r\n\t\t\t\tconfig._inner = {};\r\n\t\t\tthis._contentobj.style.borderWidth=\"1px\";\r\n\t\t}\r\n\t},\r\n\r\n\t$getSize:function(dx, dy){\r\n\r\n\t\tvar _borders = this._settings._inner;\r\n\t\tif (_borders){\r\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\r\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\r\n\t\t}\r\n\t\t\r\n\t\tvar size = base.api.$getSize.call(this, dx, dy);\r\n\t\t\r\n\t\tif (DEBUG) debug_size_box(this, size, true);\r\n\t\treturn size;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (DEBUG) debug_size_box(this, [x,y]);\r\n\t\t\t\r\n\t\tvar _borders = this._settings._inner;\r\n\t\tif (_borders){\r\n\t\t\tx -= (_borders.left?0:1)+(_borders.right?0:1);\r\n\t\t\ty -= (_borders.top?0:1)+(_borders.bottom?0:1);\r\n\t\t}\r\n\t\t\t\r\n\t\treturn base.api.$setSize.call(this,x,y);\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default { api, view };\r\n\r\n//not necessary anymore\r\n//preserving for backward compatibility\r\nview.call(-1);\r\n","import AtomRender from \"../core/atomrender\";\r\nimport {proto} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\n\r\nimport type from \"../webix/type\";\r\n/*\r\n\tREnders single item. \r\n\tCan be used for elements without datastore, or with complex custom rendering logic\r\n\t\r\n\t@export\r\n\t\trender\r\n*/\r\n\r\nconst SingleRender = proto({\r\n\ttemplate_setter:function(value){\r\n\t\tthis.type.template=template(value);\r\n\t},\r\n\t//convert item to the HTML text\r\n\t_toHTML:function(obj){\r\n\t\tvar type = this.type;\r\n\t\treturn (type.templateStart?type.templateStart(obj,type):\"\") + type.template(obj,type) + (type.templateEnd?type.templateEnd(obj,type):\"\");\r\n\t},\r\n\tcustomize:function(obj){\r\n\t\ttype(this,obj);\r\n\t}\r\n}, AtomRender);\r\n\r\n\r\nexport default SingleRender;","import {pos as getPos} from \"../webix/html\";\r\nimport {delay, extend} from \"../webix/helpers\";\r\nimport TooltipControl from \"../core/tooltipcontrol\";\r\n\r\n//indirect UI import\r\nimport \"../views/tooltip\";\r\n\r\n/*\r\n\tBehavior: AutoTooltip - links tooltip to data driven item\r\n*/\r\n\r\nconst AutoTooltip = {\r\n\ttooltip_setter:function(value){\r\n\t\tif (value){\r\n\t\t\tif (typeof value === \"function\" || typeof value === \"string\")\r\n\t\t\t\tvalue = { template:value };\r\n\t\t\tif (typeof value !== \"object\")\r\n\t\t\t\tvalue = {};\r\n\r\n\t\t\tthis._init_tooltip_once();\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\t_init_tooltip_once:function(){\r\n\t\tTooltipControl.addTooltip(this);\r\n\t\tthis.attachEvent(\"onDestruct\",function(){\r\n\t\t\tTooltipControl.removeTooltip(this);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterScroll\", function(){\r\n\t\t\tif (TooltipControl._tooltip_exist)\r\n\t\t\t\tTooltipControl._hide_tooltip();\r\n\t\t});\r\n\r\n\t\tthis._init_tooltip_once = function(){};\r\n\t},\r\n\t$tooltipIn:function(t){\r\n\t\tlet tooltip = TooltipControl._tooltip;\r\n\t\tlet def = extend({dx:20, dy:0, template:\"{obj.value}\", css:\"\"}, this._settings.tooltip, true);\r\n\r\n\t\ttooltip.define( def );\r\n\t\treturn t;\r\n\t},\r\n\t$tooltipOut:function(){\r\n\t\tTooltipControl._hide_tooltip();\r\n\t\treturn null;\r\n\t},\r\n\t$tooltipMove:function(t,e,text){\r\n\t\tTooltipControl._tooltip.hide();\r\n\r\n\t\tclearTimeout(TooltipControl._before_show_delay);\r\n\t\tTooltipControl._before_show_delay = delay(this._show_tooltip,this,[t,e,text],TooltipControl.delay);\r\n\t},\r\n\t_show_tooltip:function(t,e,text){\r\n\t\tlet data = text || this._get_tooltip_data(t,e);\r\n\t\tif (!data || !this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tTooltipControl._tooltip.show(data,getPos(e));\r\n\t},\r\n\t_get_tooltip_data:function(t,e){\r\n\t\tif (this.locate && this.getItem){\r\n\t\t\tlet id = this.locate(e);\r\n\t\t\tif (!id) return null;\r\n\r\n\t\t\treturn this.getItem(id);\r\n\t\t}\r\n\t\treturn this._settings;\r\n\t}\r\n};\r\n\r\nexport default AutoTooltip;","import base from \"../views/view\";\r\nimport SingleRender from \"../core/singlerender\";\r\nimport Settings from \"../core/settings\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {create, createCss, insertBefore} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\n/*\r\n\tUI: Tooltip\r\n\t\r\n\t@export\r\n\t\tshow\r\n\t\thide\r\n*/\r\n\r\n// #include core/template.js\r\n// #include core/single_render.js\r\n\r\nconst api = {\r\n\tname:\"tooltip\",\r\n\tdefaults:{\r\n\t\tdy:0,\r\n\t\tdx:20\r\n\t},\r\n\t$init:function(config){\r\n\t\tif (typeof config == \"string\"){\r\n\t\t\tconfig = { template:config };\r\n\t\t}\r\n\r\n\t\t//create  container for future tooltip\r\n\t\tthis.$view = this._viewobj = this._contentobj = this._dataobj = create(\"DIV\", {role:\"alert\", \"aria-atomic\":\"true\"});\r\n\t\tthis._contentobj.className = \"webix_tooltip\";\r\n\t\tinsertBefore(this._contentobj,document.body.firstChild,document.body);\r\n\t},\r\n\tadjust:function(){  },\r\n\tisVisible:function(){\r\n\t\treturn this._visible;\r\n\t},\r\n\t_alt_render:function(text){\r\n\t\tif (this.callEvent(\"onBeforeRender\",[text])){\r\n\t\t\t//it is critical to have this as two commands\r\n\t\t\t//its prevent destruction race in Chrome\r\n\t\t\tthis._dataobj.innerHTML = \"\";\r\n\t\t\tthis._dataobj.innerHTML = text;\r\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t}\r\n\t},\r\n\tcss_setter:function(value){\r\n\t\tif (typeof value === \"object\")\r\n\t\t\tvalue = createCss(value);\r\n\r\n\t\tthis._viewobj.className = \"webix_tooltip \"+value;\r\n\t\treturn value;\r\n\t},\r\n\t//show tooltip\r\n\t//pos - object, pos.x - left, pox.y - top\r\n\tshow:function(data,pos){\r\n\t\tif (this._disabled) return;\r\n\r\n\t\tthis._visible = true;\r\n\t\tif (typeof data === \"string\")\r\n\t\t\tthis._alt_render(data);\r\n\t\telse {\r\n\t\t\tthis.data = extend({}, data);\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (this._dataobj.firstChild){\r\n\t\t\t//show at specified position\r\n\t\t\tvar w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n\t\t\tvar h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n\t\t\tvar positionX = w - pos.x;\r\n\t\t\tvar positionY = h - pos.y;\r\n\r\n\t\t\tthis._contentobj.style.display = \"block\";\r\n\t\t\t\r\n\t\t\tif (positionX - this._settings.dx > this._contentobj.offsetWidth)\r\n\t\t\t\tpositionX = pos.x;\r\n\t\t\telse {\r\n\t\t\t\tpositionX = (pos.x - (this._settings.dx * 2)) - this._contentobj.offsetWidth;\r\n\t\t\t\tif (positionX < 0) positionX = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (positionY - this._settings.dy > this._contentobj.offsetHeight)\r\n\t\t\t\tpositionY = pos.y;\r\n\t\t\telse {\r\n\t\t\t\tpositionY = (pos.y - (this._settings.dy * 2)) - this._contentobj.offsetHeight;\r\n\t\t\t\tif (positionY < 0) positionY = 0;\r\n\t\t\t}\r\n\t\t\tthis._contentobj.style.left = positionX+this._settings.dx+\"px\";\r\n\t\t\tthis._contentobj.style.top = positionY+this._settings.dy+\"px\";\r\n\t\t} else this.hide();\r\n\t},\r\n\t//hide tooltip\r\n\thide:function(){\r\n\t\tif (this._visible){\r\n\t\t\tthis.data = null; //nulify, to be sure that on next show it will be fresh-rendered\r\n\t\t\tthis._contentobj.style.display = \"none\";\r\n\t\t\tthis._visible = false;\r\n\t\t}\r\n\t},\r\n\tdisable:function(){\r\n\t\tthis._disabled = true;\r\n\t},\r\n\tenable:function(){\r\n\t\tthis._disabled = false;\r\n\t},\r\n\ttype:{\r\n\t\ttemplate:template(\"{obj.value}\"),\r\n\t\ttemplateStart:template.empty,\r\n\t\ttemplateEnd:template.empty\r\n\t}\r\n\r\n};\r\n\r\n\r\nconst view = protoUI(api,  SingleRender, Settings, EventSystem, base.view);\r\nexport default {api, view};","import {create, remove} from \"../webix/html\";\r\nimport {isUndefined, toNode} from \"../webix/helpers\";\r\nimport {proto} from \"../ui/core\";\r\n\r\nconst Canvas = proto({\r\n\t$init:function(container){\r\n\t\tthis._canvas_labels = [];\r\n\t\tthis._canvas_series =  (!isUndefined(container.series)?container.series:container.name);\r\n\t\tthis._obj = toNode(container.container||container);\r\n\t\tvar width = container.width*(window.devicePixelRatio||1);\r\n\t\tvar height = container.height*(window.devicePixelRatio||1);\r\n\t\tvar style = container.style||\"\";\r\n\t\tstyle += \";width:\"+container.width+\"px;height:\"+container.height+\"px;\";\r\n\t\tthis._prepareCanvas(container.name, style ,width, height, container.title);\r\n\t},\r\n\t_prepareCanvas:function(name,style,x,y, title){\r\n\t\t//canvas has the same size as master object\r\n\t\tthis._canvas = create(\"canvas\",{ title:title, width:x, height:y, canvas_id:name, style:(style||\"\")});\r\n\t\tthis._obj.appendChild(this._canvas);\r\n\t\treturn this._canvas;\r\n\t}, \r\n\tgetCanvas:function(context){\r\n\t\tvar ctx = (this._canvas||this._prepareCanvas(this._contentobj)).getContext(context||\"2d\");\r\n\t\tif(!this._webixDevicePixelRatio){\r\n\t\t\tthis._webixDevicePixelRatio = true;\r\n\t\t\tctx.scale(window.devicePixelRatio||1, window.devicePixelRatio||1);\r\n\t\t}\r\n\t\treturn ctx;\r\n\t},\r\n\t_resizeCanvas:function(x, y){\r\n\t\tif (this._canvas){\r\n\t\t\tthis._canvas.setAttribute(\"width\", x*(window.devicePixelRatio||1));\r\n\t\t\tthis._canvas.setAttribute(\"height\", y*(window.devicePixelRatio||1));\r\n\t\t\tthis._canvas.style.width = x+\"px\";\r\n\t\t\tthis._canvas.style.height = y+\"px\";\r\n\t\t\tthis._webixDevicePixelRatio = false;\r\n\t\t}\r\n\t},\r\n\trenderText:function(x,y,text,css,w){\r\n\t\tif (!text) return; //ignore empty text\r\n\t\tif (w) w = Math.max(w,0);\r\n\t\tif (y) y = Math.max(y,0);\r\n\t\tvar t = create(\"DIV\",{\r\n\t\t\t\"class\":\"webix_canvas_text\"+(css?(\" \"+css):\"\"),\r\n\t\t\t\"style\":\"left:\"+x+\"px; top:\"+y+\"px;\",\r\n\t\t\t\"aria-hidden\":\"true\"\r\n\t\t},text);\r\n\t\tthis._obj.appendChild(t);\r\n\t\tthis._canvas_labels.push(t); //destructor?\r\n\t\tif (w)\r\n\t\t\tt.style.width = w+\"px\";\r\n\t\treturn t;\r\n\t},\r\n\trenderTextAt:function(valign,align, x,y,t,c,w){\r\n\t\tvar text=this.renderText.call(this,x,y,t,c,w);\r\n\t\tif (text){\r\n\t\t\tif (valign){\r\n\t\t\t\tif(valign == \"middle\")\r\n\t\t\t\t\ttext.style.top = parseInt(y-text.offsetHeight/2,10) + \"px\";\r\n\t\t\t\telse\r\n\t\t\t\t\ttext.style.top = y-text.offsetHeight + \"px\";\r\n\t\t\t}\r\n\t\t\tif (align){\r\n\t\t\t\tif(align == \"left\")\r\n\t\t\t\t\ttext.style.left = x-text.offsetWidth + \"px\";\r\n\t\t\t\telse\r\n\t\t\t\t\ttext.style.left = parseInt(x-text.offsetWidth/2,10) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn text;\r\n\t},\r\n\tclearCanvas:function(skipMap){\r\n\t\tvar areas=[];\r\n\r\n\t\tremove(this._canvas_labels);\r\n\t\tthis._canvas_labels = [];\r\n\r\n\t\tif (!skipMap&&this._obj._htmlmap){\r\n\r\n\t\t\t//areas that correspond this canvas layer\r\n\t\t\tareas = this._getMapAreas();\r\n\t\t\t//removes areas of this canvas\r\n\t\t\twhile(areas.length){\r\n\t\t\t\tareas[0].parentNode.removeChild(areas[0]);\r\n\t\t\t\tareas.splice(0,1);\r\n\t\t\t}\r\n\t\t\tareas = null;\r\n\r\n\t\t\t//removes _htmlmap object if all its child nodes are removed\r\n\t\t\tif(!this._obj._htmlmap.getElementsByTagName(\"AREA\").length){\r\n\t\t\t\tthis._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);\r\n\t\t\t\tthis._obj._htmlmap = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//FF breaks, when we are using clear canvas and call clearRect without parameters\r\n\t\t//width|height are used insead of offsetWidth|offsetHeight for hidden canvas (series)\r\n\t\tthis.getCanvas().clearRect(0,0,\r\n\t\t\tthis._canvas.offsetWidth||Math.floor(this._canvas.width/(window.devicePixelRatio||1)), \r\n\t\t\tthis._canvas.offsetHeight||Math.floor(this._canvas.height/(window.devicePixelRatio||1))\r\n\t\t);\r\n\t},\r\n\ttoggleCanvas:function(){\r\n\t\tthis._toggleCanvas(this._canvas.style.display==\"none\");\r\n\t},\r\n\tshowCanvas:function(){\r\n\t\tthis._toggleCanvas(true);\r\n\t},\r\n\thideCanvas:function(){\r\n\t\tthis._toggleCanvas(false);\r\n\t},\r\n\t_toggleCanvas:function(show){\r\n\t\tvar areas, i;\r\n\r\n\t\tfor(i=0; i < this._canvas_labels.length;i++)\r\n\t\t\tthis._canvas_labels[i].style.display = (show?\"\":\"none\");\r\n\r\n\t\tif (this._obj._htmlmap){\r\n\t\t\tareas = this._getMapAreas();\r\n\t\t\tfor( i = 0; i < areas.length; i++){\r\n\t\t\t\tif(show)\r\n\t\t\t\t\tareas[i].removeAttribute(\"disabled\");\r\n\t\t\t\telse\r\n\t\t\t\t\tareas[i].setAttribute(\"disabled\",\"true\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t//FF breaks, when we are using clear canvas and call clearRect without parameters\r\n\t\tthis._canvas.style.display = (show?\"\":\"none\");\r\n\t},\r\n\t_getMapAreas:function(){\r\n\t\tvar res = [], areas, i;\r\n\t\tareas = this._obj._htmlmap.getElementsByTagName(\"AREA\");\r\n\t\tfor(i = 0; i < areas.length; i++){\r\n\t\t\tif(areas[i].getAttribute(\"userdata\") == this._canvas_series){\r\n\t\t\t\tres.push(areas[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n});\r\n\r\nexport default Canvas;","import {insertBefore, remove} from \"../webix/html\";\r\nimport state from \"../core/state\";\r\nimport env from \"../webix/env\";\r\nimport {isArray, clone, toNode, delay} from \"../webix/helpers\";\r\nimport {event, eventRemove} from \"../webix/htmlevents\";\r\nimport Settings from \"../core/settings\";\r\n\r\n\r\nconst animate = function(html_element, config){\r\n\tvar animation = config;\r\n\tif (isArray(html_element)){\r\n\t\tfor (var i=0; i < html_element.length; i++) {\r\n\t\t\tif(isArray(config))\r\n\t\t\t\tanimation = config[i];\r\n\r\n\t\t\tif(animation.type == \"slide\"){\r\n\t\t\t\tif(animation.subtype == \"out\" && i===0) { // next\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(animation.subtype == \"in\" && i==1) { // current\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(animation.type == \"flip\"){\r\n\t\t\t\tvar animation_copy = clone(animation);\r\n\t\t\t\tif(i===0) { // next\r\n\t\t\t\t\tanimation_copy.type = \"flipback\";\r\n\t\t\t\t}\r\n\t\t\t\tif(i==1) { // current\r\n\t\t\t\t\tanimation_copy.callback = null;\r\n\t\t\t\t}\r\n\t\t\t\tanimate(html_element[i], animation_copy);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tanimate(html_element[i], animation);\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\tvar node = toNode(html_element);\r\n\tif (node._has_animation)\r\n\t\tanimate.end(node, animation);\r\n\telse\r\n\t\tanimate.start(node, animation);\r\n};\r\nanimate.end = function(node, animation){\r\n\t//stop animation\r\n\tnode.style[env.transitionDuration] = \"1ms\";\r\n\tnode._has_animation = null;\r\n\t//clear animation wait order, if any\r\n\tif (state._wait_animate)\r\n\t\twindow.clearTimeout(state._wait_animate);\r\n\r\n\t//plan next animation, if any\r\n\tstate._wait_animate = delay(animate, this, [node,animation],10);\r\n};\r\nanimate.isSupported=function(){\r\n\treturn !state.$testmode && env.transform && env.transition && !env.isOpera;\r\n};\r\nanimate.formLine=function(next, current, animation){\r\n\tvar direction = animation.direction;\r\n\r\n\t//sometimes user can initiate animation multiple times ( fast clicking )\r\n\t//as result animation may be called against already removed from the dom node\r\n\tif(current.parentNode)\r\n\t\tcurrent.parentNode.style.position = \"relative\";\r\n\t\r\n\tcurrent.style.position = \"absolute\";\r\n\tnext.style.position = \"absolute\";\r\n\r\n\t//this is initial shift of second view in animation\r\n\t//normally we need to have this value as 0\r\n\t//but FF has bug with animation initially invisible elements\r\n\t//so we are adjusting this value, to make 1px of second view visible\r\n\tvar defAniPos = env.isFF ? ( direction == \"top\" || direction == \"left\" ? -1 : 1) : 0;\r\n\r\n\tif(direction==\"top\"||direction==\"bottom\"){\r\n\t\tnext.style.left=\"0px\";\r\n\t\tnext.style.top = (animation.top || defAniPos) + (direction==\"top\"?1:-1)*current.offsetHeight+\"px\";\r\n\t}\r\n\telse{\r\n\t\tnext.style.top = (animation.top || 0) + \"px\";\r\n\t\tnext.style.left = defAniPos + (direction==\"left\"?1:-1)*current.offsetWidth+\"px\";\r\n\t}\r\n\r\n\t// apply 'keepViews' mode, iframe, datatable with x scroll solution\r\n\t//( keepViews won't work in case of \"in\" and \"out\" subtypes )\r\n\tif(current.parentNode == next.parentNode && animation.keepViews)\r\n\t\tnext.style.display = \"\";\r\n\telse\r\n\t\tinsertBefore(next, current.nextSibling, current.parentNode);\r\n\r\n\tif(animation.type == \"slide\" && animation.subtype == \"out\") {\r\n\t\tnext.style.left = \"0px\";\r\n\t\tnext.style.top = (animation.top || 0)+\"px\";\r\n\t\tcurrent.parentNode.removeChild(current);\r\n\t\tinsertBefore(current, next.nextSibling, next.parentNode);\r\n\t}\r\n\treturn [next, current];\r\n};\r\nanimate.breakLine=function(line){\r\n\tif(arguments[1])\r\n\t\tline[1].style.display = \"none\"; // 'keepViews' multiview mode\r\n\telse\r\n\t\tremove(line[1]); // 1 = current\r\n\tanimate.clear(line[0]);\r\n\tanimate.clear(line[1]);\r\n\tline[0].style.position=\"\";\r\n};\r\nanimate.clear=function(node){\r\n\tnode.style[env.transform] = \"none\";\r\n\tnode.style[env.transition] = \"none\";\r\n\tnode.style.top = node.style.left = \"\";\r\n};\r\nanimate.defaults = {\r\n\ttype: \"slide\",\r\n\tdelay: \"0\",\r\n\tduration: \"500\",\r\n\ttiming: \"ease-in-out\",\r\n\tx: 0,\r\n\ty: 0\r\n};\r\nanimate.start = function(node, animation){\r\n\t//getting config object by merging specified and default options\r\n\tif (typeof animation == \"string\")\r\n\t\tanimation = {type: animation};\r\n\r\n\tanimation = Settings._mergeSettings(animation,animate.defaults);\r\n\r\n\tvar prefix = env.cssPrefix;\r\n\tvar settings = node._has_animation = animation;\r\n\tvar skew_options, scale_type;\r\n\r\n\t//jshint -W086:true\r\n\tswitch(settings.type == \"slide\" && settings.direction) { // getting new x, y in case it is slide with direction\r\n\t\tcase \"right\":\r\n\t\t\tsettings.x = node.offsetWidth;\r\n\t\t\tbreak;\r\n\t\tcase \"left\":\r\n\t\t\tsettings.x = -node.offsetWidth;\r\n\t\t\tbreak;\r\n\t\tcase \"top\":\r\n\t\t\tsettings.y = -node.offsetHeight;\r\n\t\t\tbreak;\r\n\t\tcase \"bottom\":\r\n\t\tdefault:\r\n\t\t\tsettings.y = settings.y||node.offsetHeight;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tif(settings.type == \"flip\" || settings.type == \"flipback\") {\r\n\t\tskew_options = [0, 0];\r\n\t\tscale_type = \"scaleX\";\r\n\t\tif(settings.subtype == \"vertical\") {\r\n\t\t\tskew_options[0] = 20;\r\n\t\t\tscale_type = \"scaleY\";\r\n\t\t}\r\n\t\telse\r\n\t\t\tskew_options[1] = 20;\r\n\t\tif(settings.direction == \"right\" || settings.direction == \"bottom\") {\r\n\t\t\tskew_options[0] *= -1; skew_options[1] *= -1;\r\n\t\t}\r\n\t}\r\n\r\n\tvar duration = settings.duration + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\r\n\tvar css_general = prefix+\"TransformStyle: preserve-3d;\"; // general css rules\r\n\tvar css_transition = \"\";\r\n\tvar css_transform = \"\";\r\n\r\n\tswitch(settings.type) {\r\n\t\tcase \"fade\": // changes opacity to 0\r\n\t\t\tcss_transition = \"opacity \" + duration;\r\n\t\t\tcss_general = \"opacity: 0;\";\r\n\t\t\tbreak;\r\n\t\tcase \"show\": // changes opacity to 1\r\n\t\t\tcss_transition = \"opacity \" + duration;\r\n\t\t\tcss_general = \"opacity: 1;\";\r\n\t\t\tbreak;\r\n\t\tcase \"flip\":\r\n\t\t\tduration = (settings.duration/2) + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\r\n\t\t\tcss_transform = \"skew(\"+skew_options[0]+\"deg, \"+skew_options[1]+\"deg) \"+scale_type+\"(0.00001)\";\r\n\t\t\tcss_transition = \"all \"+(duration);\r\n\t\t\tbreak;\r\n\t\tcase \"flipback\":\r\n\t\t\tsettings.delay += settings.duration/2;\r\n\t\t\tduration = (settings.duration/2) + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\r\n\t\t\tnode.style[env.transform] = \"skew(\"+(-1*skew_options[0])+\"deg, \"+(-1*skew_options[1])+\"deg) \"+scale_type+\"(0.00001)\";\r\n\t\t\tnode.style.left = \"0\";\r\n\r\n\t\t\tcss_transform = \"skew(0deg, 0deg) \"+scale_type+\"(1)\";\r\n\t\t\tcss_transition = \"all \"+(duration);\r\n\t\t\tbreak;\r\n\t\tcase \"slide\": // moves object to specified location\r\n\t\t\tvar x = settings.x +\"px\";\r\n\t\t\tvar y = settings.y +\"px\";\r\n\t\t\t// translate(x, y) OR translate3d(x, y, 0)\r\n\t\t\tcss_transform = env.translate+\"(\"+x+\", \"+y+((env.translate==\"translate3d\")?\", 0\":\"\")+\")\";\r\n\t\t\tcss_transition = prefix+\"transform \" + duration;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\t//set styles only after applying transition settings\r\n\tdelay(function(){\r\n\t\tnode.style[env.transition] = css_transition;\r\n\t\tdelay(function(){\r\n\t\t\tif (css_general)\r\n\t\t\t\tnode.style.cssText += css_general;\r\n\t\t\tif (css_transform)\r\n\t\t\t\tnode.style[env.transform] = css_transform;\r\n\t\t\tvar transitionEnded = false;\r\n\t\t\tvar tid = event(node, env.transitionEnd, function(ev){\r\n\t\t\t\tnode._has_animation = null;\r\n\t\t\t\tif (settings.callback) settings.callback.call((settings.master||window), node,settings,ev);\r\n\t\t\t\ttransitionEnded = true;\r\n\t\t\t\teventRemove(tid);\r\n\t\t\t});\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tif(!transitionEnded){\r\n\t\t\t\t\tlet master = settings.master||window;\r\n\t\t\t\t\tnode._has_animation = null;\r\n\t\t\t\t\tif (!master.$destructed && settings.callback) settings.callback.call(master, node,settings);\r\n\t\t\t\t\ttransitionEnded = true;\r\n\t\t\t\t\teventRemove(tid);\r\n\t\t\t\t}\r\n\t\t\t}, (settings.duration*1+settings.delay*1)*1.3);\r\n\t\t});\r\n\t});\r\n};\r\n\r\nexport default animate;","const skin = {\r\n\ttopLayout:\"space\",\r\n\t//bar in accordion\r\n\tbarHeight:44,\t\t\t//!!!Set the same in skin.less!!!\r\n\ttabbarHeight: 42,\r\n\tsidebarTitleHeight: 44,\r\n\trowHeight:36,\r\n\ttoolbarHeight:44,\r\n\tlistItemHeight:36,\t\t//list, grouplist, dataview, etc.\r\n\tinputHeight: 38,\r\n\tbuttonHeight: 38,\r\n\tinputPadding: 3,\r\n\tmenuHeight: 36,\r\n\tlabelTopHeight: 22,\r\n\tpropertyItemHeight: 28,\r\n\ttimelineItemHeight:70,\r\n\tunitHeaderHeight:36,\r\n\r\n\tinputSpacing: 4,\r\n\tborderWidth: 1,\r\n\r\n\tsliderHandleWidth: 14,\r\n\tsliderPadding: 10,\r\n\tsliderBorder: 1,\r\n\tvSliderPadding:15,\r\n\tvSliderHeight:100,\r\n\tswitchHeight:22,\r\n\tswitchWidth:50,\r\n\r\n\t//margin - distance between cells\r\n\tlayoutMargin:{ space:10, wide:10, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 2  },\r\n\t//padding - distance inside cell between cell border and cell content\r\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:2, form:17, accordion: 0  },\r\n\t//space between tabs in tabbar\r\n\ttabMargin: 0,\r\n\ttabOffset: 0,\r\n\ttabBottomOffset: 0,\r\n\ttabTopOffset:0,\r\n\ttabBorder: true,\r\n\r\n\tcustomCheckbox: true,\r\n\tcustomRadio: true,\r\n\tsidebarMarkAll: true,\r\n\tpopupNoPoint: true,\r\n\tborderlessPopup: true,\r\n\r\n\tpopupPadding: 0,\r\n\r\n\tdataPadding: 12,\r\n\r\n\tcalendarWeekHeaderHeight: 18,\r\n\tpadding:0,\r\n\taccordionType: \"accordion\",\r\n\r\n\toptionHeight: 32,\r\n\torganogramLineColor: \"#CCD7E6\",\r\n\ttimelineColor:\"#1CA1C1\",\r\n\r\n\tbackColor:\"#ffffff\"\r\n};\r\n\r\nexport default skin;\r\n","import {assert} from \"../webix/debug\";\r\nimport {ui} from \"../ui/core\";\r\n\r\nimport material from \"../css/skins/material/config\";\r\nimport mini from \"../css/skins/mini/config\";\r\nimport flat from \"../css/skins/flat/config\";\r\nimport compact from \"../css/skins/compact/config\";\r\nimport contrast from \"../css/skins/contrast/config\";\r\n\r\nexport var $active, $name;\r\n\r\nexport function set(name){\r\n\tassert(skin[name], \"Incorrect skin name: \"+name);\r\n\tif ($name === name) return;\r\n\r\n\tskin.$active = $active = skin[name];\r\n\tskin.$name = $name = name;\r\n\r\n\tif (ui){\r\n\t\tfor (var key in ui){\r\n\t\t\tvar view = ui[key];\r\n\t\t\tif (view && view.prototype && view.prototype.$skin)\r\n\t\t\t\tview.prototype.$skin(view.prototype);\r\n\t\t}\r\n\t}\t\t\r\n}\r\n\r\nconst skin = { set, material, mini, flat, compact, contrast };\r\n\r\nset(window.webix_skin || \"material\");\r\n\r\n//necessary for skin builder\r\nexport { skin };","const skin = {\r\n\ttopLayout:\"space\",\r\n\t//bar in accordion\r\n\tbarHeight:36,\t\t\t//!!!Set the same in skin.less!!!\r\n\ttabbarHeight: 34,\r\n\tsidebarTitleHeight: 36,\r\n\trowHeight:28,\r\n\ttoolbarHeight:36,\r\n\tlistItemHeight:28,\t//list, grouplist, dataview, etc.\r\n\tinputHeight: 30,\r\n\tbuttonHeight: 30,\r\n\tinputPadding: 3,\r\n\tmenuHeight: 28,\r\n\tlabelTopHeight: 16,\r\n\tpropertyItemHeight: 24,\r\n\tunitHeaderHeight:28,\r\n\ttimelineItemHeight:50,\r\n\r\n\tinputSpacing: 4,\r\n\tborderWidth: 1,\r\n\r\n\tsliderHandleWidth: 12,\r\n\tsliderPadding: 10,\r\n\tsliderBorder: 1,\r\n\tvSliderPadding:13,\r\n\tvSliderHeight:100,\r\n\tswitchHeight:20,\r\n\tswitchWidth:40,\r\n\r\n\t//margin - distance between cells\r\n\tlayoutMargin:{ space:5, wide:5, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 2  },\r\n\t//padding - distance inside cell between cell border and cell content\r\n\tlayoutPadding:{ space:5, wide:0, clean:0, head:0, line:0, toolbar:2, form:12, accordion: 0  },\r\n\t//space between tabs in tabbar\r\n\ttabMargin: 0,\r\n\ttabOffset: 0,\r\n\ttabBottomOffset: 0,\r\n\ttabTopOffset:0,\r\n\ttabBorder: true,\r\n\r\n\tcustomCheckbox: true,\r\n\tcustomRadio: true,\r\n\tsidebarMarkAll: true,\r\n\tpopupNoPoint: true,\r\n\tborderlessPopup: true,\r\n\r\n\tpopupPadding: 0,\r\n\r\n\tdataPadding: 12,\r\n\r\n\tcalendarWeekHeaderHeight: 18,\r\n\tpadding:0,\r\n\taccordionType: \"accordion\",\r\n\r\n\toptionHeight: 24,\r\n\torganogramLineColor: \"#CCD7E6\",\r\n\ttimelineColor:\"#1CA1C1\",\r\n\r\n\tbackColor:\"#ffffff\"\r\n};\r\n\r\nexport default skin;\r\n","const skin = {\r\n\ttopLayout:\"space\",\r\n\t//bar in accordion\r\n\tbarHeight:46,\t\t\t//!!!Set the same in skin.less!!!\r\n\ttabbarHeight: 46,\r\n\trowHeight:34,\r\n\ttoolbarHeight:46,\r\n\tsidebarTitleHeight:45,\r\n\tlistItemHeight:34,\t\t//list, grouplist, dataview, etc.\r\n\tinputHeight: 38,\r\n\tbuttonHeight: 38,\r\n\tinputPadding: 3,\r\n\tmenuHeight: 34,\r\n\tlabelTopHeight: 22,\r\n\tunitHeaderHeight:20,\r\n\tpropertyItemHeight: 28,\r\n\ttimelineItemHeight:70,\r\n\r\n\tinputSpacing: 4,\r\n\tborderWidth: 1,\r\n\r\n\tsliderHandleWidth: 14,\r\n\tsliderPadding: 10,\r\n\tsliderBorder: 1,\r\n\tvSliderPadding:15,\r\n\tvSliderHeight:100,\r\n\tswitchHeight:22,\r\n\tswitchWidth:50,\r\n\r\n\t//margin - distance between cells\r\n\tlayoutMargin:{ space:10, wide:10, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 10  },\r\n\t//padding - distance insede cell between cell border and cell content\r\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:3, form:17, accordion: 0  },\r\n\t//space between tabs in tabbar\r\n\ttabMargin:4,\r\n\ttabOffset: 0,\r\n\ttabBottomOffset: 6,\r\n\ttabTopOffset:1,\r\n\r\n\tcustomCheckbox: true,\r\n\tcustomRadio: true,\r\n\r\n\tpopupPadding: 8,\r\n\r\n\tdataPadding: 10,\r\n\r\n\tcalendarWeekHeaderHeight: 24,\r\n\tpadding:0,\r\n\taccordionType: \"accordion\",\r\n\r\n\toptionHeight: 32,\r\n\ttimelineColor:\"#3498db\",\r\n\r\n\tbackColor:\"#ffffff\"\r\n};\r\n\r\nexport default skin;","const skin = {\r\n\ttopLayout:\"space\",\r\n\t//bar in accordion\r\n\tbarHeight:34,\t\t\t//!!!Set the same in skin.less!!!\r\n\ttabbarHeight: 34,\r\n\tsidebarTitleHeight: 34,\r\n\trowHeight:24,\r\n\ttoolbarHeight:34,\r\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc.\r\n\tunitHeaderHeight:20,\r\n\tpropertyItemHeight:24,\r\n\ttimelineItemHeight:50,\r\n\tinputHeight: 30,\r\n\tbuttonHeight: 30,\r\n\tinputPadding: 3,\r\n\tmenuHeight: 28,\r\n\tlabelTopHeight: 16,\r\n\r\n\tinputSpacing: 4,\r\n\tborderWidth: 1,\r\n\r\n\tsliderHandleWidth: 12,\r\n\tsliderPadding: 10,\r\n\tsliderBorder: 1,\r\n\tvSliderPadding:13,\r\n\tvSliderHeight:100,\r\n\tswitchHeight:20,\r\n\tswitchWidth:40,\r\n\r\n\t//margin - distance between cells\r\n\tlayoutMargin:{ space:5, wide:5, clean:0, head:4, line:-1, toolbar:4, form:4, accordion: 5  },\r\n\t//padding - distance inside cell between cell border and cell content\r\n\tlayoutPadding:{ space:5, wide:0, clean:0, head:0, line:0, toolbar:1, form:12, accordion: 0  },\r\n\t//space between tabs in tabbar\r\n\ttabMargin:3,\r\n\ttabOffset: 0,\r\n\ttabBottomOffset: 3,\r\n\ttabTopOffset:1,\r\n\r\n\tcustomCheckbox: true,\r\n\tcustomRadio: true,\r\n\r\n\tpopupPadding: 8,\r\n\r\n\tdataPadding: 10,\r\n\r\n\tcalendarWeekHeaderHeight: 24,\r\n\tpadding:0,\r\n\taccordionType: \"accordion\",\r\n\r\n\toptionHeight: 23,\r\n\ttimelineColor:\"#3498db\",\r\n\r\n\tbackColor:\"#ffffff\"\r\n};\r\n\r\nexport default skin;","const skin = {\r\n\ttopLayout:\"space\",\r\n\t//bar in accordion\r\n\tbarHeight:46,\t\t\t// !!!Set the same in skin.less!!!\r\n\ttabbarHeight: 46,\r\n\trowHeight:34,\r\n\ttoolbarHeight:46,\r\n\tsidebarTitleHeight:45,\r\n\tlistItemHeight:34,\t\t// list, grouplist, dataview, etc.\r\n\tunitHeaderHeight:20,\r\n\tinputHeight: 38,\r\n\tbuttonHeight: 38,\r\n\tinputPadding: 3,\r\n\tmenuHeight: 34,\r\n\tlabelTopHeight: 22,\r\n\tpropertyItemHeight: 28,\r\n\ttimelineItemHeight:70,\r\n\r\n\tinputSpacing: 4,\r\n\tborderWidth: 1,\r\n\r\n\tsliderHandleWidth: 14,\r\n\tsliderPadding: 10,\r\n\tsliderBorder: 1,\r\n\tvSliderPadding:15,\r\n\tvSliderHeight:100,\r\n\tswitchHeight:22,\r\n\tswitchWidth:50,\r\n\r\n\t//margin - distance between cells\r\n\tlayoutMargin:{ space:10, wide:10, clean:0, head:4, line:-1, toolbar:8, form:8, accordion: 10  },\r\n\t//padding - distance inside cell between cell border and cell content\r\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:3, form:17, accordion: 0  },\r\n\t//space between tabs in tabbar\r\n\ttabMargin:4,\r\n\ttabOffset: 0,\r\n\ttabBottomOffset: 6,\r\n\ttabTopOffset:1,\r\n\r\n\tcustomCheckbox: true,\r\n\tcustomRadio: true,\r\n\r\n\tpopupPadding: 8,\r\n\tdataPadding: 10,\r\n\r\n\tcalendarWeekHeaderHeight: 24,\r\n\tpadding:0,\r\n\taccordionType: \"accordion\",\r\n\r\n\toptionHeight: 32,\r\n\ttimelineColor:\"#b300b3\",\r\n\r\n\tbackColor:\"#393939\"\r\n};\r\n\r\nexport default skin;","import env from \"../webix/env\";\r\nimport ready from \"../webix/ready\";\r\n\r\nimport {event, eventRemove} from \"../webix/htmlevents\";\r\nimport {callEvent} from \"../webix/customevents\";\r\nimport {preventEvent, removeCss, create, remove, addCss, addStyle} from \"../webix/html\";\r\n\r\n//late binding\r\nimport {ui, $$} from \"../ui/core\";\r\n\r\nconst Touch = {\r\n\tconfig:{\r\n\t\tlongTouchDelay:1000,\r\n\t\tscrollDelay:150,\r\n\t\tgravity:500,\r\n\t\tdeltaStep:30,\r\n\t\tspeed:\"0ms\",\r\n\t\tfinish:1500,\r\n\t\tellastic:true\r\n\t},\r\n\tlimit:function(value){\r\n\t\tTouch._limited = value !== false;\t\r\n\t},\r\n\tdisable:function(){\r\n\t\tTouch._disabled = true;\r\n\t},\r\n\tenable:function(){\r\n\t\tTouch._disabled = false;\r\n\t},\r\n\t$init:function(){\r\n\t\tTouch.$init = function(){};\r\n\r\n\t\tevent(document.body, mouse.down,\tTouch._touchstart, {passive:false});\r\n\t\tevent(document.body, mouse.move, \tTouch._touchmove, {passive:false});\r\n\t\tevent(document.body, mouse.up, \tTouch._touchend);\r\n\r\n\t\tevent(document.body,\"dragstart\",function(e){\r\n\t\t\tif(Touch._disabled || Touch._limited) return;\r\n\t\t\treturn preventEvent(e);\r\n\t\t});\r\n\r\n\t\tTouch._clear_artefacts();\r\n\t\tTouch._scroll = [null, null];\r\n\t\tTouch.$active = true;\r\n\t},\r\n\t_clear_artefacts:function(){\r\n\t\tTouch._start_context = Touch._current_context = Touch._prev_context = Touch._scroll_context = null;\r\n\t\tTouch._scroll_mode = Touch._scroll_node = Touch._scroll_stat = Touch._long_touched = null;\r\n\t\t//remove(Touch._scroll);\r\n\t\t//Touch._scroll = [null, null];\r\n\t\tTouch._delta = \t{ _x_moment:0, _y_moment:0, _time:0 };\r\n\r\n\t\tif (Touch._css_button_remove){\r\n\t\t\tremoveCss(Touch._css_button_remove,\"webix_touch\");\r\n\t\t\tTouch._css_button_remove = null;\r\n\t\t}\r\n\t\t\r\n\t\twindow.clearTimeout(Touch._long_touch_timer);\r\n\t\tTouch._was_not_moved = true;\r\n\t\tTouch._axis_x = true;\r\n\t\tTouch._axis_y = true;\r\n\t\tif (!Touch._active_transion)\r\n\t\t\tTouch._scroll_end();\r\n\t},\r\n\t_touchend:function(e){\r\n\t\tif (Touch._start_context) {\r\n\t\t\tif (!Touch._scroll_mode) {\r\n\t\t\t\tif (!Touch._long_touched) {\r\n\t\t\t\t\tif (Touch._axis_y && !Touch._axis_x) {\r\n\t\t\t\t\t\tTouch._translate_event(\"onSwipeX\");\r\n\t\t\t\t\t} else if (Touch._axis_x && !Touch._axis_y) {\r\n\t\t\t\t\t\tTouch._translate_event(\"onSwipeY\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar temp = Touch._get_matrix(Touch._scroll_node);\r\n\t\t\t\tvar x = temp.e;\r\n\t\t\t\tvar y = temp.f;\r\n\t\t\t\tvar finish = Touch.config.finish;\r\n\r\n\t\t\t\tvar delta = Touch._get_delta(e, true);\r\n\t\t\t\tvar view = $$(Touch._scroll_node);\r\n\r\n\t\t\t\tvar gravity = (view && view.$scroll ? view.$scroll.gravity : Touch.config.gravity);\r\n\t\t\t\tif (delta._time) {\r\n\t\t\t\t\tvar nx = x + gravity * delta._x_moment / delta._time;\r\n\t\t\t\t\tvar ny = y + gravity * delta._y_moment / delta._time;\r\n\r\n\t\t\t\t\tvar cnx = Touch._scroll[0] ? Touch._correct_minmax(nx, false, false, Touch._scroll_stat.dx, Touch._scroll_stat.px) : x;\r\n\t\t\t\t\tvar cny = Touch._scroll[1] ? Touch._correct_minmax(ny, false, false, Touch._scroll_stat.dy, Touch._scroll_stat.py) : y;\r\n\r\n\r\n\t\t\t\t\tvar size = Math.max(Math.abs(cnx - x), Math.abs(cny - y));\r\n\t\t\t\t\tif (size < 150)\r\n\t\t\t\t\t\tfinish = finish * size / 150;\r\n\r\n\t\t\t\t\tif (cnx != x || cny != y)\r\n\t\t\t\t\t\tfinish = Math.round(finish * Math.max((cnx - x) / (nx - x), (cny - y) / (ny - y)));\r\n\r\n\t\t\t\t\tvar result = {e: cnx, f: cny};\r\n\r\n\r\n\t\t\t\t\tview = $$(Touch._scroll_node);\r\n\t\t\t\t\tif (view && view.adjustScroll)\r\n\t\t\t\t\t\tview.adjustScroll(result);\r\n\r\n\r\n\t\t\t\t\t//finish = Math.max(100,(Touch._fast_correction?100:finish));\r\n\t\t\t\t\tfinish = Math.max(100, finish);\r\n\r\n\r\n\t\t\t\t\tif (x != result.e || y != result.f) {\r\n\t\t\t\t\t\tTouch._set_matrix(Touch._scroll_node, result.e, result.f, finish + \"ms\");\r\n\t\t\t\t\t\tif (Touch._scroll_master)\r\n\t\t\t\t\t\t\tTouch._scroll_master._sync_scroll(result.e, result.f, finish + \"ms\");\r\n\t\t\t\t\t\tTouch._set_scroll(result.e, result.f, finish + \"ms\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tTouch._scroll_end();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\t\tTouch._scroll_end();\r\n\t\t\t}\r\n\t\t\tTouch._translate_event(\"onTouchEnd\");\r\n\t\t\tTouch._clear_artefacts();\r\n\t\t}\r\n\t},\r\n\t_touchmove:function(e){\r\n\t\tif (!Touch._scroll_context || !Touch._start_context) return;\r\n\r\n\t\tvar\tdelta = Touch._get_delta(e);\r\n\t\tTouch._translate_event(\"onTouchMove\");\r\n\r\n\t\tif (Touch._scroll_mode){\r\n\t\t\tTouch._set_scroll_pos(delta);\r\n\t\t} else {\r\n\t\t\tTouch._axis_x = Touch._axis_check(delta._x, \"x\", Touch._axis_x);\r\n\t\t\tTouch._axis_y = Touch._axis_check(delta._y, \"y\", Touch._axis_y);\r\n\t\t\tif (Touch._scroll_mode){\r\n\t\t\t\tvar view = Touch._get_event_view(\"onBeforeScroll\", true);\r\n\t\t\t\tif (view){\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\tview.callEvent(\"onBeforeScroll\",[data]);\r\n\t\t\t\t\tif (data.update){\r\n\t\t\t\t\t\tTouch.config.speed = data.speed;\r\n\t\t\t\t\t\tTouch.config.scale = data.scale;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tTouch._init_scroller(delta); //apply scrolling\r\n\t\t\t} else if (env.isMac) {\r\n\t\t\t\tconst view = $$(Touch._start_context);\r\n\t\t\t\tif (view && view.$hasYScroll && view.$hasYScroll()){\r\n\t\t\t\t\treturn preventEvent(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Touch._scroll_mode)\r\n\t\t\treturn preventEvent(e);\r\n\t},\r\n\t_set_scroll_pos:function(){\r\n\t\tif (!Touch._scroll_node) return;\r\n\t\tvar temp = Touch._get_matrix(Touch._scroll_node);\r\n\t\tvar prev = Touch._prev_context || Touch._start_context;\r\n\r\n\t\tvar view = $$(Touch._scroll_node);\r\n\t\tvar ellastic = (view&&view.$scroll)?view.$scroll.ellastic: Touch.config.ellastic;\r\n\t\tif (Touch._scroll[0])\r\n\t\t\ttemp.e = Touch._correct_minmax( temp.e - prev.x + Touch._current_context.x , ellastic, temp.e, Touch._scroll_stat.dx, Touch._scroll_stat.px);\r\n\t\tif (Touch._scroll[1])\r\n\t\t\ttemp.f = Touch._correct_minmax( temp.f - prev.y + Touch._current_context.y , ellastic, temp.f, Touch._scroll_stat.dy, Touch._scroll_stat.py);\r\n\r\n\t\tTouch._set_matrix(Touch._scroll_node, temp.e, temp.f, \"0ms\");\r\n\t\tif (Touch._scroll_master)\r\n\t\t\tTouch._scroll_master._sync_scroll(temp.e, temp.f, \"0ms\");\r\n\t\tTouch._set_scroll(temp.e, temp.f, \"0ms\");\r\n\t},\r\n\t_set_scroll:function(dx, dy, speed){\r\n\t\t\r\n\t\tvar edx = Touch._scroll_stat.px/Touch._scroll_stat.dx * -dx;\r\n\t\tvar edy = Touch._scroll_stat.py/Touch._scroll_stat.dy * -dy;\r\n\t\tif (Touch._scroll[0])\r\n\t\t\tTouch._set_matrix(Touch._scroll[0], edx, 0 ,speed);\r\n\t\tif (Touch._scroll[1])\r\n\t\t\tTouch._set_matrix(Touch._scroll[1], 0, edy ,speed);\r\n\t},\r\n\tscrollTo:function(node, x, y, speed){\r\n\t\tTouch._set_matrix(node,x,y,speed);\r\n\t},\r\n\t_set_matrix:function(node, xv, yv, speed){\r\n\t\tif (!speed){\r\n\t\t\tnode.style[env.transform] = \"\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tTouch._active_transion = true;\r\n\t\tif (node){\r\n\t\t\tvar trans = Touch.config.translate || env.translate;\r\n\t\t\tnode.style[env.transform] = trans+\"(\"+Math.round(xv)+\"px, \"+Math.round(yv)+\"px\"+((trans==\"translate3d\")?\", 0\":\"\")+\")\";\r\n\t\t\tnode.style[env.transitionDuration] = speed;\r\n\t\t}\r\n\t},\r\n\t_get_matrix:function(node){\r\n\t\tvar matrix = window.getComputedStyle(node)[env.transform];\r\n\t\tvar tmatrix;\r\n\r\n\t\tif (matrix == \"none\")\r\n\t\t\ttmatrix = {e:0, f:0};\r\n\t\telse {\r\n\t\t\tif(window.WebKitCSSMatrix)\r\n\t\t\t\t/* global WebKitCSSMatrix */\r\n\t\t\t\ttmatrix = new WebKitCSSMatrix(matrix);\r\n\t\t\telse if (window.MSCSSMatrix)\r\n\t\t\t\t/* global MSCSSMatrix */\r\n\t\t\t\ttmatrix = new MSCSSMatrix(matrix);\r\n\t\t\telse {\r\n\t\t\t\t// matrix(1, 0, 0, 1, 0, 0) --> 1, 0, 0, 1, 0, 0\r\n\t\t\t\tvar _tmatrix = matrix.replace(/(matrix\\()(.*)(\\))/gi, \"$2\");\r\n\t\t\t\t// 1, 0, 0, 1, 0, 0 --> 1,0,0,1,0,0\r\n\t\t\t\t_tmatrix = _tmatrix.replace(/\\s/gi, \"\");\r\n\t\t\t\t_tmatrix = _tmatrix.split(\",\");\r\n\r\n\t\t\t\ttmatrix = {};\r\n\t\t\t\tvar tkey = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\t\t\t\tfor(var i=0; i<tkey.length; i++){\r\n\t\t\t\t\ttmatrix[tkey[i]] = parseInt(_tmatrix[i], 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Touch._scroll_master)\r\n\t\t\tTouch._scroll_master._sync_pos(tmatrix);\r\n\r\n\t\treturn tmatrix;\r\n\t},\t\r\n\t_correct_minmax:function(value, allow, current, dx, px){\r\n\t\tif (value === current) return value;\r\n\t\t\r\n\t\tvar delta = Math.abs(value-current);\r\n\t\tvar sign = delta/(value-current);\r\n\t\t//\tTouch._fast_correction = true;\r\n\t\t\r\n\t\t\r\n\t\tif (value>0) return allow?(current + sign*Math.sqrt(delta)):0;\r\n\t\t\r\n\t\tvar max = dx - px;\r\n\t\tif (max + value < 0)\t\r\n\t\t\treturn allow?(current - Math.sqrt(-(value-current))):-max;\r\n\t\t\t\r\n\t\t//\tTouch._fast_correction = false;\r\n\t\treturn value;\r\n\t},\t\r\n\t_init_scroll_node:function(node){\r\n\t\tif (!node.scroll_enabled){ \r\n\t\t\tnode.scroll_enabled = true;\t\r\n\t\t\tnode.parentNode.style.position=\"relative\";\r\n\t\t\tvar prefix = env.cssPrefix;\r\n\t\t\tnode.style.cssText += prefix+\"transition: \"+prefix+\"transform; \"+prefix+\"user-select:none; \"+prefix+\"transform-style:flat;\";\r\n\t\t\tnode.addEventListener(env.transitionEnd,Touch._scroll_end,false);\r\n\t\t}\r\n\t},\r\n\t_init_scroller:function(){\r\n\t\tif (Touch._scroll_mode.indexOf(\"x\") != -1)\r\n\t\t\tTouch._scroll[0] = Touch._create_scroll(\"x\", Touch._scroll_stat.dx, Touch._scroll_stat.px, \"width\");\r\n\t\tif (Touch._scroll_mode.indexOf(\"y\") != -1)\r\n\t\t\tTouch._scroll[1] = Touch._create_scroll(\"y\", Touch._scroll_stat.dy, Touch._scroll_stat.py, \"height\");\r\n\r\n\t\tTouch._init_scroll_node(Touch._scroll_node);\r\n\t\twindow.setTimeout(function(){\r\n\t\t\tTouch._set_scroll_pos();\r\n\t\t\tif (Touch._scroll_stat && !Touch._scroll_stat.hidden){\r\n\t\t\t\tif (Touch._scroll[0]) Touch._scroll[0].style.visibility = \"visible\";\r\n\t\t\t\tif (Touch._scroll[1]) Touch._scroll[1].style.visibility = \"visible\";\r\n\t\t\t}\r\n\t\t}, 0);\r\n\t},\r\n\t_create_scroll:function(mode, dy, py, dim){\r\n\t\tif (dy - py <2){\r\n\t\t\tvar matrix = Touch._get_matrix(Touch._scroll_node);\r\n\t\t\tvar e = (mode==\"y\"?matrix.e:0);\r\n\t\t\tvar f = (mode==\"y\"?0:matrix.f);\r\n\t\t\tif (!Touch._scroll_master)\r\n\t\t\t\tTouch._set_matrix(Touch._scroll_node, e, f, \"0ms\");\r\n\t\t\tTouch._scroll_mode = Touch._scroll_mode.replace(mode,\"\");\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\r\n\t\tvar scroll = create(\"DIV\", {\r\n\t\t\t\"class\":\"webix_scroll_\"+mode\r\n\t\t},\"\");\r\n\r\n\t\tscroll.style.visibility = \"hidden\";\r\n\t\tscroll.style[dim] = Math.max((py*py/dy-7),10) +\"px\";\r\n\t\tif (Touch._scroll_stat.left){\r\n\t\t\tif (mode === \"x\")\r\n\t\t\t\tscroll.style.left = Touch._scroll_stat.left+\"px\";\r\n\t\t\telse\r\n\t\t\t\tscroll.style.right = (-Touch._scroll_stat.left)+\"px\";\r\n\t\t}\r\n\r\n\t\tTouch._scroll_node.parentNode.appendChild(scroll);\r\n\r\n\t\treturn scroll;\r\n\t},\r\n\t_axis_check:function(value, mode, old){\r\n\t\tif (value > Touch.config.deltaStep){\r\n\t\t\tif (Touch._was_not_moved){\r\n\t\t\t\tTouch._long_move(mode);\r\n\t\t\t\tTouch._locate(mode);\r\n\t\t\t\tif ((Touch._scroll_mode||\"\").indexOf(mode) == -1) Touch._scroll_mode = \"\";\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn old;\r\n\t},\r\n\t_scroll_end:function(){\r\n\t\t//sending event to the owner of the scroll only\r\n\t\tvar result,state,view;\r\n\t\tview = $$(Touch._scroll_node||this);\r\n\t\tif (view){\r\n\t\t\tif (Touch._scroll_node)\r\n\t\t\t\tresult = Touch._get_matrix(Touch._scroll_node);\r\n\t\t\telse if(view.getScrollState){\r\n\t\t\t\tstate = view.getScrollState();\r\n\t\t\t\tresult = {e:-state.x, f:-state.y};\r\n\t\t\t}\r\n\t\t\tcallEvent(\"onAfterScroll\", [result]);\r\n\t\t\tif (view.callEvent)\r\n\t\t\t\tview.callEvent(\"onAfterScroll\",[result]);\r\n\t\t}\r\n\t\tif (!Touch._scroll_mode){\r\n\t\t\tremove(Touch._scroll);\r\n\t\t\tTouch._scroll = [null, null];\r\n\t\t}\r\n\t\tTouch._active_transion = false;\r\n\t},\r\n\t_long_move:function(){\r\n\t\twindow.clearTimeout(Touch._long_touch_timer);\r\n\t\tTouch._was_not_moved = false;\t\r\n\t},\t\r\n\t_stop_old_scroll:function(e){\r\n\t\tif (Touch._scroll[0] || Touch._scroll[1]){\r\n\t\t\tTouch._stop_scroll(e, Touch._scroll[0]?\"x\":\"y\");\r\n\t\t}else\r\n\t\t\treturn true;\r\n\t},\r\n\t_touchstart :function(e){\r\n\t\tvar target = e.target;\r\n\r\n\t\tif (Touch._disabled) return;\r\n\r\n\t\tTouch._long_touched = null;\r\n\t\tTouch._scroll_context = Touch._start_context = mouse.context(e);\r\n\r\n\t\t// in \"limited\" mode we should have possibility to use slider\r\n\t\tvar element = $$(e);\r\n\r\n\t\tif (Touch._limited && !Touch._is_scroll() && !(element && element.$touchCapture)){\r\n\t\t\tTouch._scroll_context = null;\r\n\t\t}\r\n\r\n\t\tTouch._translate_event(\"onTouchStart\");\r\n\r\n\t\tif (Touch._stop_old_scroll(e))\r\n\t\t\tTouch._long_touch_timer = window.setTimeout(Touch._long_touch, Touch.config.longTouchDelay);\r\n\r\n\t\tif (element && element.touchable && (!target.className || target.className.indexOf(\"webix_view\")!==0)){\r\n\t\t\tTouch._css_button_remove = element.getNode(e);\r\n\t\t\taddCss(Touch._css_button_remove,\"webix_touch\");\r\n\t\t}\r\n\t},\r\n\t_long_touch:function(){\r\n\t\tif(Touch._start_context){\r\n\t\t\tTouch._long_touched = true;\r\n\t\t\tTouch._translate_event(\"onLongTouch\");\r\n\t\t\tcallEvent(\"onClick\", [Touch._start_context]);\r\n\t\t\t//Touch._clear_artefacts();\r\n\t\t}\r\n\t},\r\n\t_stop_scroll:function(e, stop_mode){ \r\n\t\tTouch._locate(stop_mode);\r\n\t\tvar scroll = Touch._scroll[0]||Touch._scroll[1];\r\n\t\tif (scroll){\r\n\t\t\tvar view = Touch._get_event_view(\"onBeforeScroll\", true);\r\n\t\t\tif (view)\r\n\t\t\t\tview.callEvent(\"onBeforeScroll\", [Touch._start_context,Touch._current_context]);\r\n\t\t}\r\n\t\tif (scroll && (!Touch._scroll_node || scroll.parentNode != Touch._scroll_node.parentNode)){\r\n\t\t\tTouch._clear_artefacts();\r\n\t\t\tTouch._scroll_end();\r\n\t\t\tTouch._start_context = mouse.context(e);\r\n\t\t}\r\n\t\tTouch._touchmove(e);\r\n\t},\t\r\n\t_get_delta:function(e){\r\n\t\tTouch._prev_context = Touch._current_context;\r\n\t\tTouch._current_context = mouse.context(e);\r\n\t\t\t\r\n\t\tTouch._delta._x = Math.abs(Touch._start_context.x - Touch._current_context.x);\r\n\t\tTouch._delta._y = Math.abs(Touch._start_context.y - Touch._current_context.y);\r\n\t\t\r\n\t\tif (Touch._prev_context){\r\n\t\t\tif (Touch._current_context.time - Touch._prev_context.time < Touch.config.scrollDelay){\r\n\t\t\t\tTouch._delta._x_moment = Touch._delta._x_moment/1.3+Touch._current_context.x - Touch._prev_context.x;\r\n\t\t\t\tTouch._delta._y_moment = Touch._delta._y_moment/1.3+Touch._current_context.y - Touch._prev_context.y;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tTouch._delta._y_moment = Touch._delta._x_moment = 0;\r\n\t\t\t}\r\n\t\t\tTouch._delta._time = Touch._delta._time/1.3+(Touch._current_context.time - Touch._prev_context.time);\r\n\t\t}\r\n\t\t\r\n\t\treturn Touch._delta;\r\n\t},\r\n\t_get_sizes:function(node){\r\n\t\tTouch._scroll_stat = {\r\n\t\t\tdx:node.offsetWidth,\r\n\t\t\tdy:node.offsetHeight,\r\n\t\t\tpx:node.parentNode.offsetWidth,\r\n\t\t\tpy:node.parentNode.offsetHeight\r\n\t\t};\r\n\t},\r\n\t_is_scroll:function(locate_mode){\r\n\t\tvar node = Touch._start_context.target;\r\n\t\tif (!env.touch && !env.transition && !env.transform) return null;\r\n\t\twhile(node && node.tagName!=\"BODY\"){\r\n\t\t\tif(node.getAttribute){\r\n\t\t\t\tvar mode = node.getAttribute(\"touch_scroll\");\r\n\t\t\t\tif (mode && (!locate_mode || mode.indexOf(locate_mode)!=-1))\r\n\t\t\t\t\treturn [node, mode];\r\n\t\t\t}\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t_locate:function(locate_mode){\r\n\t\tvar state = this._is_scroll(locate_mode);\r\n\t\tif (state){\r\n\t\t\tTouch._scroll_mode = state[1];\r\n\t\t\tTouch._scroll_node = state[0];\r\n\t\t\tTouch._get_sizes(state[0]);\r\n\t\t}\r\n\t\treturn state;\r\n\t},\r\n\t_translate_event:function(name){\r\n\t\tcallEvent(name, [Touch._start_context,Touch._current_context]);\r\n\t\tvar view = Touch._get_event_view(name);\r\n\t\tif (view)\r\n\t\t\tview.callEvent(name, [Touch._start_context,Touch._current_context]);\r\n\t},\r\n\t_get_event_view:function(name, active){\r\n\t\tvar view = $$(active ? Touch._scroll_node : Touch._start_context);\r\n\t\tif(!view) return null;\r\n\t\t\r\n\t\twhile (view){\r\n\t\t\tif (view.hasEvent&&view.hasEvent(name))\t\r\n\t\t\t\treturn view;\r\n\t\t\tview = view.getParentView();\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t},\t\r\n\t_get_context:function(e){\r\n\t\tif (!e.touches[0]) {\r\n\t\t\tvar temp = Touch._current_context;\r\n\t\t\ttemp.time = new Date();\r\n\t\t\treturn temp;\r\n\t\t}\r\n\t\t\t\r\n\t\treturn {\r\n\t\t\ttarget:e.target,\r\n\t\t\tx:e.touches[0].pageX,\r\n\t\t\ty:e.touches[0].pageY,\r\n\t\t\ttime:new Date()\r\n\t\t};\r\n\t},\r\n\t_get_context_m:function(e){\r\n\t\treturn {\r\n\t\t\ttarget:e.target,\r\n\t\t\tx:e.pageX,\r\n\t\t\ty:e.pageY,\r\n\t\t\ttime:new Date()\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction touchInit(){\r\n\tif (env.touch){\r\n\t\tTouch.$init();\r\n\t\t//not full screen mode\r\n\t\tif (document.body.className.indexOf(\"webix_full_screen\") == -1)\r\n\t\t\tTouch.limit(true);\r\n\r\n\t\tif (env.isSafari)\r\n\t\t\taddStyle(\".webix_view{ -webkit-overflow-scrolling: touch; }\");\r\n\r\n\t\tif (window.MSCSSMatrix)\r\n\t\t\taddStyle(\".webix_view{ -ms-touch-action: none; }\");\r\n\t} else {\r\n\t\tvar id = event(document.body, \"touchstart\", function(ev){\r\n\t\t\tif (ev.touches.length && ev.touches[0].radiusX > 4){\r\n\t\t\t\tenv.touch = true;\r\n\t\t\t\tsetMouse(mouse);\r\n\t\t\t\ttouchInit();\r\n\t\t\t\tfor (var key in ui.views){\r\n\t\t\t\t\tvar view = ui.views[key];\r\n\t\t\t\t\tif (view && view.$touch)\r\n\t\t\t\t\t\tview.$touch();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\teventRemove(id);\r\n\t\t}, { capture: true });\r\n\t}\r\n}\r\n\r\nfunction setMouse(mouse){\r\n\tmouse.down = \"touchstart\";\r\n\tmouse.move = \"touchmove\";\r\n\tmouse.up   = \"touchend\";\r\n\tmouse.context = Touch._get_context;\r\n}\r\n\r\nready(touchInit);\r\n\r\n\r\nvar mouse = env.mouse = { down:\"mousedown\", up:\"mouseup\", \r\n\tmove:\"mousemove\", context:Touch._get_context_m };\r\n\r\nif (window.navigator.pointerEnabled){\r\n\tmouse.down = \"pointerdown\";\r\n\tmouse.move = \"pointermove\";\r\n\tmouse.up   = \"pointerup\";\r\n} else if (window.navigator.msPointerEnabled){\r\n\tmouse.down = \"MSPointerDown\";\r\n\tmouse.move = \"MSPointerMove\";\r\n\tmouse.up   = \"MSPointerUp\";\r\n} else if (env.touch)\r\n\tsetMouse(mouse);\r\n\t\r\n\r\nexport default Touch;","import {preventEvent, addCss, removeCss, pos as getPos, remove} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport Touch from \"../core/touch\";\r\nimport {zIndex} from \"../ui/helpers\";\r\nimport {_to_array, toNode} from \"../webix/helpers\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\nimport {attachEvent, callEvent} from \"../webix/customevents\";\r\n\r\n\r\n/*\r\n\tBehavior:DND - low-level dnd handling\r\n\t@export\r\n\t\tgetContext\r\n\t\taddDrop\r\n\t\taddDrag\r\n\t\t\r\n\tDND master can define next handlers\r\n\t\tonCreateDrag\r\n\t\tonDragIng\r\n\t\tonDragOut\r\n\t\tonDrag\r\n\t\tonDrop\r\n\tall are optional\r\n*/\r\n\r\nconst DragControl ={\r\n\t//has of known dnd masters\r\n\t_drag_masters : _to_array([\"dummy\"]),\r\n\t/*\r\n\t\tregister drop area\r\n\t\t@param node \t\t\thtml node or ID\r\n\t\t@param ctrl \t\t\toptions dnd master\r\n\t\t@param master_mode \t\ttrue if you have complex drag-area rules\r\n\t*/\r\n\taddDrop:function(node,ctrl,master_mode){\r\n\t\tnode = toNode(node);\r\n\t\tnode.webix_drop=this._getCtrl(ctrl);\r\n\t\tif (master_mode) node.webix_master=true;\r\n\t},\r\n\t//return index of master in collection\r\n\t//it done in such way to prevent dnd master duplication\r\n\t//probably useless, used only by addDrop and addDrag methods\r\n\t_getCtrl:function(ctrl){\r\n\t\tctrl = ctrl||DragControl;\r\n\t\tvar index = this._drag_masters.find(ctrl);\r\n\t\tif (index<0){\r\n\t\t\tindex = this._drag_masters.length;\r\n\t\t\tthis._drag_masters.push(ctrl);\r\n\t\t\tif (ctrl.attachEvent)\r\n\t\t\t\tctrl.attachEvent(\"onDestruct\", () => DragControl.unlink(ctrl));\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\tunlink(ctrl){\r\n\t\tvar index = this._drag_masters.find(ctrl);\r\n\t\tif (index > -1){\r\n\t\t\t// if active view was destroyed, stop dnd\r\n\t\t\tif (DragControl._active && DragControl._active.webix_drag == index)\r\n\t\t\t\tDragControl._stopDrag();\r\n\t\t\t// if last target was destroyed, reset it and continue dnd\r\n\t\t\tif (DragControl._last && DragControl._last.webix_drop == index)\r\n\t\t\t\tDragControl._last = null;\r\n\r\n\t\t\tthis._drag_masters[index] = null;\r\n\t\t}\r\n\t},\r\n\t_createTouchDrag: function(e){\r\n\t\tconst dragCtrl = DragControl;\r\n\t\tconst master = this._getActiveDragMaster();\r\n\t\t// for data items only\r\n\t\tif (master && master._getDragItemPos){\r\n\t\t\tif (!dragCtrl._html && !dragCtrl.createDrag(e)) return;\r\n\t\t\te.longtouch_drag = true;\r\n\r\n\t\t\tconst ctx = dragCtrl._drag_context;\r\n\t\t\tdragCtrl._html.style.left= e.x+dragCtrl.left+ (ctx.x_offset||0)+\"px\";\r\n\t\t\tdragCtrl._html.style.top= e.y+dragCtrl.top+ (ctx.y_offset||0) +\"px\";\r\n\t\t}\r\n\t},\r\n\t/*\r\n\t\tregister drag area\r\n\t\t@param node \thtml node or ID\r\n\t\t@param ctrl \toptions dnd master\r\n\t*/\r\n\taddDrag:function(node,ctrl){\r\n\t\tnode = toNode(node);\r\n\t\tnode.webix_drag=this._getCtrl(ctrl);\r\n\t\t_event(node,env.mouse.down,this._preStart,{ bind:node });\r\n\t\t_event(node,\"dragstart\",preventEvent);\r\n\t},\r\n\t//logic of drag - start, we are not creating drag immediately, instead of that we hears mouse moving\r\n\t_preStart:function(e){\r\n\t\tif (DragControl._active){\r\n\t\t\t//if we have nested drag areas, use the top one and ignore the inner one\r\n\t\t\tif (DragControl._saved_event == e) return;\r\n\t\t\tDragControl._preStartFalse(e);\r\n\t\t\tDragControl.destroyDrag(e);\r\n\t\t}\r\n\t\tDragControl._active = this;\r\n\r\n\t\tconst evobj = env.mouse.context(e);\r\n\t\tDragControl._start_pos = evobj;\r\n\t\tDragControl._saved_event = e;\r\n\r\n\t\tconst passive = env.touch ? { passive:false } : null;\r\n\t\tDragControl._webix_drag_mm = event(document.body,env.mouse.move,DragControl._startDrag,passive);\r\n\t\tDragControl._webix_drag_mu = event(document,env.mouse.up,DragControl._preStartFalse);\r\n\r\n\t\t//need to run here, or will not work in IE\r\n\t\taddCss(document.body,\"webix_noselect\", 1);\r\n\t},\r\n\t//if mouse was released before moving - this is not a dnd, remove event handlers\r\n\t_preStartFalse:function(e){\r\n\t\tDragControl._clean_dom_after_drag();\r\n\t\tDragControl._touch_animation = !e.cancelable;\r\n\t},\r\n\t//mouse was moved without button released - dnd started, update event handlers\r\n\t_startDrag:function(e){\r\n\t\t// check touch scroll animation\r\n\t\tDragControl._touch_animation = !e.cancelable;\r\n\t\tif (env.touch && DragControl._touch_animation){\r\n\t\t\tDragControl._clean_dom_after_drag();\r\n\t\t\treturn DragControl.destroyDrag(e);\r\n\t\t}\r\n\r\n\t\t//prevent unwanted dnd\r\n\t\tvar pos = env.mouse.context(e);\r\n\t\tvar master = DragControl._getActiveDragMaster();\r\n\r\n\t\t// only long-touched elements can be dragged\r\n\t\tvar longTouchLimit = (master && env.touch && master._getDragItemPos && !Touch._long_touched);\r\n\t\tif (longTouchLimit || Math.abs(pos.x-DragControl._start_pos.x)<5 && Math.abs(pos.y-DragControl._start_pos.y)<5)\r\n\t\t\treturn;\r\n\r\n\t\tDragControl._clean_dom_after_drag(true);\r\n\t\tif(!DragControl._html)\r\n\t\t\tif (!DragControl.createDrag(DragControl._saved_event)) return;\r\n\r\n\t\tDragControl.sendSignal(\"start\"); //useless for now\r\n\r\n\t\tconst passive = env.touch ? { passive:false } : null;\r\n\t\tDragControl._webix_drag_mm = event(document.body,env.mouse.move,DragControl._moveDrag,passive);\r\n\t\tDragControl._webix_drag_mu = event(document,env.mouse.up,DragControl._stopDrag);\r\n\t\tDragControl._moveDrag(e);\r\n\t},\r\n\t//mouse was released while dnd is active - process target\r\n\t_stopDrag:function(e){\r\n\t\tDragControl._clean_dom_after_drag();\r\n\t\tDragControl._saved_event = null;\r\n\r\n\t\tif (DragControl._last && e){\t//if some drop target was confirmed\r\n\t\t\tDragControl.$drop(DragControl._active, DragControl._last, e);\r\n\t\t\tDragControl.$dragOut(DragControl._active, DragControl._last, null, e);\r\n\t\t}\r\n\t\tDragControl.destroyDrag(e);\r\n\t\tDragControl.sendSignal(\"stop\");\t//useless for now\r\n\t},\r\n\t_clean_dom_after_drag:function(still_drag){\r\n\t\tthis._webix_drag_mm = eventRemove(this._webix_drag_mm);\r\n\t\tthis._webix_drag_mu = eventRemove(this._webix_drag_mu);\r\n\t\tif (!still_drag)\r\n\t\t\tremoveCss(document.body,\"webix_noselect\");\r\n\t},\r\n\t//dnd is active and mouse position was changed\r\n\t_moveDrag:function(e){\r\n\t\tvar dragCtrl = DragControl;\r\n\t\tvar pos = getPos(e);\r\n\r\n\t\t//give possibility to customize drag position\r\n\t\tvar customPos = dragCtrl.$dragPos(pos, e);\r\n\t\t//adjust drag marker position\r\n\t\tvar ctx = dragCtrl._drag_context;\r\n\t\tdragCtrl._html.style.top=pos.y+dragCtrl.top+(customPos||!ctx.y_offset?0:ctx.y_offset) +\"px\";\r\n\t\tdragCtrl._html.style.left=pos.x+dragCtrl.left+(customPos||!ctx.x_offset?0:ctx.x_offset)+\"px\";\r\n\r\n\t\tvar evobj = e;\r\n\t\tif (dragCtrl._skip)\r\n\t\t\tdragCtrl._skip=false;\r\n\t\telse {\r\n\t\t\tif (env.touch){\r\n\t\t\t\tvar context = env.mouse.context(e);\r\n\t\t\t\tvar target = document.elementFromPoint(context.x, context.y);\r\n\t\t\t\tevobj = new Proxy(e, {\r\n\t\t\t\t\tget: function(obj, prop){\r\n\t\t\t\t\t\tif (prop === \"target\"){\r\n\t\t\t\t\t\t\treturn target;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar res = obj[prop];\r\n\t\t\t\t\t\tif (typeof res === \"function\"){\r\n\t\t\t\t\t\t\treturn res.bind(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdragCtrl._checkLand((evobj.target), evobj);\r\n\t\t}\r\n\t\t\r\n\t\treturn preventEvent(e);\r\n\t},\r\n\t//check if item under mouse can be used as drop landing\r\n\t_checkLand:function(node,e){\r\n\t\twhile (node && node.tagName!=\"BODY\"){\r\n\t\t\tif (node.webix_drop){\t//if drop area registered\r\n\t\t\t\tif (this._last && (this._last!=node || node.webix_master))\t//if this area with complex dnd master\r\n\t\t\t\t\tthis.$dragOut(this._active,this._last,node,e);\t\t\t//inform master about possible mouse-out\r\n\t\t\t\tif (!this._last || this._last!=node || node.webix_master){\t//if this is new are or area with complex dnd master\r\n\t\t\t\t\tthis._last=null;\t\t\t\t\t\t\t\t\t\t//inform master about possible mouse-in\r\n\t\t\t\t\tthis._landing=this.$dragIn(DragControl._active,node,e);\r\n\t\t\t\t\tif (this._landing)\t//landing was rejected\r\n\t\t\t\t\t\tthis._last=node;\r\n\t\t\t\t\treturn;\t\t\t\t\r\n\t\t\t\t} \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnode=node.parentNode;\r\n\t\t}\r\n\t\tif (this._last)\t//mouse was moved out of previous landing, and without finding new one \r\n\t\t\tthis._last = this._landing = this.$dragOut(this._active,this._last,null,e);\r\n\t},\r\n\t//mostly useless for now, can be used to add cross-frame dnd\r\n\tsendSignal:function(signal){\r\n\t\tDragControl.active=(signal==\"start\");\r\n\t\tcallEvent(\"onDragMode\", [signal]);\r\n\t},\r\n\t\r\n\t//return master for html area\r\n\tgetMaster:function(t){\r\n\t\treturn this._drag_masters[t.webix_drag||t.webix_drop];\r\n\t},\r\n\t//return dhd-context object\r\n\tgetContext:function(){\r\n\t\treturn this._drag_context;\r\n\t},\r\n\tgetNode:function(){\r\n\t\treturn this._html;\r\n\t},\r\n\t//called when dnd is initiated, must create drag representation\r\n\tcreateDrag:function(e){ \r\n\t\tvar dragCtl = DragControl;\r\n\t\tvar a=dragCtl._active;\r\n\r\n\t\tdragCtl._drag_context = {};\r\n\t\tvar master = this._drag_masters[a.webix_drag];\r\n\t\tvar drag_container;\r\n\r\n\t\t//if custom method is defined - use it\r\n\t\tif (master.$dragCreate){\r\n\t\t\tdrag_container=master.$dragCreate(a,e);\r\n\t\t\tif (!drag_container) return false;\r\n\t\t\tthis._setDragOffset(e);\r\n\t\t\tdrag_container.style.position = \"absolute\";\r\n\t\t} else {\r\n\t\t//overvise use default one\r\n\t\t\tvar text = dragCtl.$drag(a,e);\r\n\t\t\tdragCtl._setDragOffset(e);\r\n\r\n\t\t\tif (!text) return false;\r\n\t\t\tdrag_container = document.createElement(\"DIV\");\r\n\t\t\tdrag_container.innerHTML=text;\r\n\t\t\tdrag_container.className=\"webix_drag_zone\";\r\n\t\t\tdocument.body.appendChild(drag_container);\r\n\r\n\t\t\tvar context = dragCtl._drag_context;\r\n\t\t\tif (context.html && env.pointerevents){\r\n\t\t\t\tcontext.x_offset = -Math.round(drag_container.offsetWidth  * 0.5);\r\n\t\t\t\tcontext.y_offset = -Math.round(drag_container.offsetHeight * 0.75);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*\r\n\t\t\tdragged item must have topmost z-index\r\n\t\t\tin some cases item already have z-index\r\n\t\t\tso we will preserve it if possible\r\n\t\t*/\r\n\t\tdrag_container.style.zIndex = Math.max(drag_container.style.zIndex,zIndex());\r\n\r\n\t\tDragControl._skipDropH = event(drag_container,env.mouse.move,DragControl._skip_mark);\r\n\r\n\t\tif (!DragControl._drag_context.from)\r\n\t\t\tDragControl._drag_context = {source:a, from:a};\r\n\t\t\r\n\t\tDragControl._html=drag_container;\r\n\t\treturn true;\r\n\t},\r\n\t//helper, prevents unwanted mouse-out events\r\n\t_skip_mark:function(){\r\n\t\tDragControl._skip=true;\r\n\t},\r\n\t//after dnd end, remove all traces and used html elements\r\n\tdestroyDrag:function(e){\r\n\t\tvar a=DragControl._active;\r\n\t\tvar master = this._drag_masters[a.webix_drag];\r\n\r\n\t\tif (master && master.$dragDestroy){\r\n\t\t\tDragControl._skipDropH = eventRemove(DragControl._skipDropH);\r\n\t\t\tif(DragControl._html)\r\n\t\t\t\tmaster.$dragDestroy(a,DragControl._html,e);\r\n\t\t} else\r\n\t\t\tremove(DragControl._html);\r\n\r\n\t\tif (master && master._auto_scroll_delay)\r\n\t\t\tmaster._auto_scroll_delay = window.clearTimeout(master._auto_scroll_delay);\r\n\r\n\t\tif (DragControl._dropHTML)\r\n\t\t\tremove(DragControl._dropHTML);\r\n\r\n\t\tDragControl._landing=DragControl._active=DragControl._last=DragControl._html=DragControl._dropHTML=null;\r\n\t\tDragControl._drag_context = null;\r\n\t},\r\n\t_getActiveDragMaster: function(){\r\n\t\treturn DragControl._drag_masters[DragControl._active.webix_drag];\r\n\t},\r\n\ttop:0,\t //relative position of drag marker to mouse cursor\r\n\tleft:0,\r\n\t_setDragOffset:function(e){\r\n\t\tvar dragCtl = DragControl;\r\n\t\tvar pos = dragCtl._start_pos;\r\n\t\tvar ctx = dragCtl._drag_context;\r\n\r\n\t\tif(typeof ctx.x_offset != \"undefined\" && typeof ctx.y_offset != \"undefined\")\r\n\t\t\treturn null;\r\n\r\n\t\tctx.x_offset = ctx.y_offset = 0;\r\n\t\tif(env.pointerevents){\r\n\t\t\tvar m=DragControl._getActiveDragMaster();\r\n\r\n\t\t\tif (m._getDragItemPos && m!==this){\r\n\t\t\t\tvar itemPos = m._getDragItemPos(pos,e);\r\n\r\n\t\t\t\tif(itemPos){\r\n\t\t\t\t\tctx.x_offset = itemPos.x - pos.x;\r\n\t\t\t\t\tctx.y_offset = itemPos.y - pos.y;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t$dragPos:function(pos, e){\r\n\t\tvar m=this._drag_masters[DragControl._active.webix_drag];\r\n\t\tif (m.$dragPos && m!=this){\r\n\t\t\tm.$dragPos(pos, e, DragControl._html);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t//called when mouse was moved in drop area\r\n\t$dragIn:function(s,t,e){\r\n\t\tvar m=this._drag_masters[t.webix_drop];\r\n\t\tif (m.$dragIn && m!=this) return m.$dragIn(s,t,e);\r\n\t\tt.className=t.className+\" webix_drop_zone\";\r\n\t\treturn t;\r\n\t},\r\n\t//called when mouse was moved out drop area\r\n\t$dragOut:function(s,t,n,e){\r\n\t\tvar m=this._drag_masters[t.webix_drop];\r\n\t\tif (m.$dragOut && m!=this) return m.$dragOut(s,t,n,e);\r\n\t\tt.className=t.className.replace(\"webix_drop_zone\",\"\");\r\n\t\treturn null;\r\n\t},\r\n\t//called when mouse was released over drop area\r\n\t$drop:function(s,t,e){\r\n\t\tvar m=this._drag_masters[t.webix_drop];\r\n\t\tDragControl._drag_context.from = DragControl.getMaster(s);\r\n\t\tif (m.$drop && m!=this) return m.$drop(s,t,e);\r\n\t\tt.appendChild(s);\r\n\t},\r\n\t//called when dnd just started\r\n\t$drag:function(s,e){\r\n\t\tvar m=this._drag_masters[s.webix_drag];\r\n\t\tif (m.$drag && m!=this) return m.$drag(s,e);\r\n\t\treturn \"<div style='\"+s.style.cssText+\"'>\"+s.innerHTML+\"</div>\";\r\n\t}\t\r\n};\r\n\r\n//global touch-drag handler\r\nattachEvent(\"onLongTouch\", function(ev){\r\n\tif(DragControl._active && !DragControl._touch_animation)\r\n\t\tDragControl._createTouchDrag(ev);\r\n});\r\n\r\n\r\nexport default DragControl;","import {offset, pos as getPos} from \"../webix/html\";\r\nimport {toNode, extend} from \"../webix/helpers\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\nconst Movable = {\r\n\tmove_setter:function(value){\r\n\t\tif (value){\r\n\t\t\textend(this, Move, true);\r\n\t\t\tDragControl.addDrag(this._headobj?this._headobj:this.$view, this);\r\n\t\t\tdelete this.move_setter;\t//prevent double initialization\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\nconst Move = {\r\n\t$dragCreate:function(object, e){\r\n\t\tif(this.config.move){\r\n\t\t\tvar elOffset = offset(object);\r\n\t\t\tvar elPos = getPos(e);\r\n\t\t\tDragControl.top = elOffset.y - elPos.y;\r\n\t\t\tDragControl.left = elOffset.x - elPos.x;\r\n\r\n\t\t\treturn toNode(this._viewobj);\r\n\t\t}\r\n\t},\r\n\t$dragDestroy:function(node, drag){\r\n\t\tvar view = this;\r\n\t\tif (view._settings){\r\n\t\t\tview._settings.top = parseInt(drag.style.top,10);\r\n\t\t\tview._settings.left = parseInt(drag.style.left,10);\r\n\t\t}\r\n\r\n\t\tDragControl.top = DragControl.left = 0;\r\n\t\tthis.callEvent(\"onViewMoveEnd\", []);\r\n\t\treturn;\r\n\t},\r\n\t$dragPos:function(pos, e){\r\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\r\n\t}\r\n};\r\n\r\nexport default Movable;","import {create, remove} from \"../webix/html\";\r\nimport {zIndex} from \"../ui/helpers\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\nimport state from \"./state\";\r\n\r\nconst Modality = {\r\n\t_modal_set:function(value){\r\n\t\tif (value){\r\n\t\t\tif (!this._modal_cover){\r\n\t\t\t\tthis._modal_cover = create(\"div\",{\r\n\t\t\t\t\t\"class\":\"webix_modal\"\r\n\t\t\t\t});\r\n\t\t\t\t/*\twith below code we will have the same zIndex for modal layer as for the previous \r\n\t\t\t\t\tabs positioned element, but because of attaching order modal layer will be on top anyway\r\n\t\t\t\t*/\r\n\t\t\t\tconst index = zIndex(this._settings.zIndex);\r\n\r\n\t\t\t\t//set topmost modal layer\r\n\t\t\t\tthis._previous_modality = state._modality;\r\n\t\t\t\tstate._modality = index;\r\n\r\n\t\t\t\tthis._modal_cover.style.zIndex = index-1;\r\n\t\t\t\tthis._viewobj.style.zIndex = index;\r\n\t\t\t\tdocument.body.appendChild(this._modal_cover);\r\n\t\t\t\tdocument.body.style.overflow = \"hidden\";\r\n\t\t\t\t_event( this._modal_cover, \"click\", bind(this._ignore_clicks, this));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this._modal_cover){\r\n\t\t\t\tremove(this._modal_cover);\r\n\t\t\t\tthis._modal_cover = null;\r\n\r\n\t\t\t\t//restore topmost modal layer\r\n\t\t\t\tstate._modality = this._previous_modality;\r\n\r\n\t\t\t\tif (!state._modality)\r\n\t\t\t\t\tdocument.body.style.overflow = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n\r\nexport default Modality;","import {create, offset, addCss, pos as getPos, remove, removeCss} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport {zIndex} from \"../ui/helpers\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\n\r\n\r\nconst ResizeArea = {\r\n\tresize_setter:function(value){\r\n\t\tif (value && !this._resizeHandlers)\r\n\t\t\tthis._renderResizeHandler();\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_renderResizeHandler: function(){\r\n\t\tif(!this._rwHandle){\r\n\t\t\tvar rp = this._viewobj;\r\n\t\t\tif (rp.firstChild){\r\n\t\t\t\trp = rp.firstChild;\r\n\t\t\t\trp.style.position = \"relative\";\r\n\t\t\t}\r\n\r\n\t\t\tthis._rwHandle = create(\"DIV\",{\r\n\t\t\t\t\"class\"\t: \"webix_resize_handle\",\r\n\t\t\t\t/*@attr*/\"webix_disable_drag\" : \"true\"\r\n\t\t\t});\r\n\t\t\trp.appendChild(this._rwHandle);\r\n\t\t\t_event(this._rwHandle, env.mouse.down, this._wrDown, {bind:this});\r\n\t\t}\r\n\t},\r\n\t_showResizeFrame: function(width,height){\r\n\t\tif(!this._resizeFrame){\r\n\t\t\tthis._resizeFrame = create(\"div\", {\"class\":\"webix_resize_frame\"},\"\");\r\n\t\t\tdocument.body.appendChild(this._resizeFrame);\r\n\t\t\tvar elPos = offset(this._viewobj);\r\n\t\t\tthis._resizeFrame.style.left = elPos.x+\"px\";\r\n\t\t\tthis._resizeFrame.style.top = elPos.y+\"px\";\r\n\t\t\tthis._resizeFrame.style.zIndex = zIndex();\r\n\t\t}\r\n\r\n\t\tthis._resizeFrame.style.width = width + \"px\";\r\n\t\tthis._resizeFrame.style.height = height + \"px\";\r\n\t},\r\n\t_wrDown:function(){\r\n\t\tif (this.config.resize){\r\n\t\t\taddCss(document.body,\"webix_noselect webix_resize_cursor\");\r\n\t\t\tthis._wsReady = offset(this._viewobj);\r\n\r\n\t\t\tthis._resizeHandlersMove = event(document.body, env.mouse.move, this._wrMove, {bind:this});\r\n\t\t\tthis._resizeHandlersUp   = event(document.body, env.mouse.up, this._wrUp, {bind:this});\r\n\t\t}\r\n\t},\r\n\t_wrMove:function(e){\r\n\t\tif (this._wsReady !== false){\r\n\t\t\tvar elPos = getPos(e);\r\n\t\t\tvar progress = {x:elPos.x - this._wsReady.x, y: elPos.y - this._wsReady.y};\r\n\r\n\t\t\tif (this.$resizeMove)\r\n\t\t\t\tthis.$resizeMove(progress);\r\n\t\t\telse {\r\n\t\t\t\tvar config = this.config;\r\n\t\t\t\tvar minWidth = config.minWidth||100;\r\n\t\t\t\tvar minHeight = config.minHeight||100;\r\n\r\n\t\t\t\tif (progress.x < minWidth)\r\n\t\t\t\t\tprogress.x = minWidth;\r\n\t\t\t\telse if(progress.x > config.maxWidth)\r\n\t\t\t\t\tprogress.x = config.maxWidth;\r\n\r\n\t\t\t\tif (progress.y < minHeight)\r\n\t\t\t\t\tprogress.y = minHeight;\r\n\t\t\t\telse if(progress.y > config.maxHeight)\r\n\t\t\t\t\tprogress.y = config.maxHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis._wsProgress = progress;\r\n\t\t\tthis._showResizeFrame(progress.x,progress.y);\r\n\t\t}\r\n\t},\r\n\t_wrUp:function(){\r\n\t\t// remove resize frame and css styles\r\n\t\tif (this._resizeFrame)\r\n\t\t\tthis._resizeFrame = remove(this._resizeFrame);\r\n\t\t\r\n\t\tremoveCss(document.body,\"webix_resize_cursor\");\r\n\t\tremoveCss(document.body,\"webix_noselect\");\r\n\t\teventRemove(this._resizeHandlersMove);\r\n\t\teventRemove(this._resizeHandlersUp);\r\n\r\n\t\t// set Window sizes\r\n\t\tif (this._wsProgress){\r\n\t\t\tif (this.$resizeEnd)\r\n\t\t\t\tthis.$resizeEnd(this._wsProgress);\r\n\t\t\telse {\r\n\t\t\t\tthis.config.width = this._wsProgress.x;\r\n\t\t\t\tthis.config.height = this._wsProgress.y;\r\n\t\t\t\tthis.resize();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._wsReady = this._wsProgress = false;\r\n\t\tthis.callEvent(\"onViewResize\",[]);\r\n\t}\r\n};\r\n\r\nexport default ResizeArea;","import {pos as getPos, offset} from \"../webix/html\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport animate from \"../webix/animate\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport state from \"../core/state\";\r\nimport env from \"../webix/env\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport Destruction from \"../core/destruction\";\r\n\r\nimport {zIndex} from \"../ui/helpers\";\r\nimport {toNode, delay, clone, uid, extend} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent, attachEvent} from \"../webix/customevents\";\r\n\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport Movable from \"../core/movable\";\r\nimport Modality from \"../core/modality\";\r\nimport ResizeArea from \"../core/resizearea\";\r\n\r\nimport baseview from \"./baseview\";\r\nimport base from \"./view\";\r\n\r\nconst api = {\r\n\tname:\"window\",\r\n\r\n\t$init:function(config){\r\n\t\tthis._viewobj.innerHTML = \"<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>\";\r\n\t\t\r\n\t\tthis._contentobj = this._viewobj.firstChild;\r\n\t\tthis._headobj = this._contentobj.childNodes[0];\r\n\t\tthis._dataobj = this._bodyobj = this._contentobj.childNodes[1];\r\n\t\tthis._viewobj.className +=\" webix_window\";\r\n\r\n\t\tthis._viewobj.setAttribute(\"role\", \"dialog\");\r\n\t\tthis._viewobj.setAttribute(\"tabindex\", \"0\");\r\n\r\n\t\tthis._head_cell = this._body_cell = null;\r\n\t\tconfig._inner = {top:false, left:false, right:false, bottom:false }; //set border flags\r\n\t\tif (!config.id) config.id = uid();\r\n\r\n\t\t_event(this._contentobj, \"click\", this._ignore_clicks, {bind:this});\r\n\t\t_event(this._contentobj, \"click\", function(){\r\n\t\t\t// brings a window to the front of other windows\r\n\t\t\tif(!this._settings.zIndex && this._settings.toFront){\r\n\t\t\t\tthis._viewobj.style.zIndex = zIndex();\r\n\t\t\t}\r\n\t\t}, {bind:this, capture:true});\r\n\r\n\t\t// hidden_setter handling\r\n\t\tif(config.modal)\r\n\t\t\tthis._modal = true;\r\n\t\t// head_setter handling\r\n\t\tif(config.close)\r\n\t\t\tthis._settings.close = config.close;\r\n\r\n\t\tthis.attachEvent(\"onViewMoveEnd\", function(){\r\n\t\t\tif(this._settings.position)\r\n\t\t\t\tdelete this._settings.position;\r\n\t\t});\r\n\t},\r\n\t_ignore_clicks:function(e){\r\n\t\tvar popups = state._popups;\r\n\t\tvar index = popups.find(this);\r\n\t\tif (index == -1)\r\n\t\t\tindex = popups.length - 1;\r\n\r\n\t\te.click_view = index;\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\tif (this._head_cell)\r\n\t\t\treturn [this._head_cell, this._body_cell];\r\n\t\telse\r\n\t\t\treturn [this._body_cell];\r\n\t},\r\n\tzIndex_setter:function(value){\r\n\t\tthis._viewobj.style.zIndex = value;\r\n\t\treturn value;\r\n\t},\r\n\t_remove:function(){ \r\n\t\tthis.body_setter();\r\n\t},\r\n\t_replace:function(new_view, old_view){\r\n\t\told_view = old_view || this._body_cell;\r\n\t\tconst isBody = old_view == this._body_cell;\r\n\r\n\t\told_view.destructor();\r\n\r\n\t\tif(isBody)\r\n\t\t\tthis._body_cell = new_view;\r\n\t\telse \r\n\t\t\tthis._head_cell = new_view;\r\n\r\n\t\t(isBody ? this._bodyobj : this._headobj).appendChild(new_view._viewobj);\r\n\r\n\t\tconst cell = new_view._viewobj.style;\r\n\r\n\t\tlet settings = { top:true, left:true, right:true, bottom:true };\r\n\t\tlet size = \"0px\";\r\n\r\n\t\tif(new_view.config.borderless === false){\r\n\t\t\tsettings = clone(this._settings._inner);\r\n\t\t\tsize = \"1px\";\r\n\t\t}\r\n\t\tnew_view._settings._inner = settings;\r\n\t\tcell.borderTopWidth = cell.borderBottomWidth = cell.borderLeftWidth = cell.borderRightWidth = size;\r\n\r\n\t\tthis.resize(true);\r\n\t},\r\n\tshow:function(node, mode, point){\r\n\t\tif (node === true){\r\n\t\t\t//recursive call from some child item\r\n\t\t\tif (!this._settings.hidden)\r\n\t\t\t\treturn;\r\n\t\t\tnode = null;\r\n\t\t}\r\n\r\n\t\tif(!this.callEvent(\"onBeforeShow\",arguments))\r\n\t\t\treturn false;\r\n\r\n\t\tthis._settings.hidden = false;\r\n\t\tthis._viewobj.style.zIndex = zIndex(this._settings.zIndex);\r\n\t\tif (this._settings.modal || this._modal){\r\n\t\t\tthis._modal_set(true);\r\n\t\t\tthis._modal = null; // hidden_setter handling\r\n\t\t}\r\n\r\n\t\tvar elPos, dx, dy;\r\n\t\tmode = mode || {};\r\n\t\tif (!mode.pos)\r\n\t\t\tmode.pos = this._settings.relative;\r\n\r\n\t\t//get position of source html node\r\n\t\t//we need to show popup which pointing to that node\r\n\t\tif (node){\r\n\t\t\t//if event was provided - get node info from it\r\n\t\t\tif (typeof node == \"object\" && !node.tagName){\r\n\t\t\t\t/*below logic is far from ideal*/\r\n\t\t\t\tif (node.target){\r\n\t\t\t\t\telPos = getPos(node);\r\n\t\t\t\t\tdx = 20;\r\n\t\t\t\t\tdy = 5;\r\n\t\t\t\t} else\r\n\t\t\t\t\telPos = node;\r\n\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tnode = toNode(node);\r\n\t\t\t\tassert(node,\"Not existing target for window:show\");\r\n\t\t\t\telPos = offset(node);\r\n\t\t\t}\t\r\n\r\n\t\t\t//size of body, we need to fit popup inside\r\n\t\t\tvar x = Math.max(window.innerWidth || 0, document.body.offsetWidth);\r\n\t\t\tvar y = Math.max(window.innerHeight || 0, document.body.offsetHeight);\r\n\r\n\t\t\t//size of node, near which popup will be rendered\r\n\t\t\tdx = dx || node.offsetWidth  || 0;\r\n\t\t\tdy = dy || node.offsetHeight || 0;\r\n\t\t\t//size of popup element\r\n\t\t\tvar size = this._last_size;\r\n\r\n\t\t\tvar fin_x = elPos.x;\r\n\t\t\tvar fin_y = elPos.y;\r\n\t\t\tvar point_y=0;\r\n\t\t\tvar point_x = 0;\r\n\t\t\tvar scrollLeft = 0, scrollTop = 0;\r\n\t\t\tvar fit = this._settings.autofit;\r\n\t\t\tif (fit){\r\n\t\t\t\tvar nochange = (fit === \"node\");\r\n\t\t\t\tvar delta_x = 6; var delta_y=6; var delta_point = 6;\r\n\t\t\t\tif (!this._settings.point)\r\n\t\t\t\t\tdelta_x = delta_y = delta_point = 0;\r\n\r\n\t\t\t\t//default pointer position - top \r\n\t\t\t\tpoint = \"top\";\r\n\t\t\t\tfin_y=0; fin_x = 0;\r\n\r\n\t\t\t\tscrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;\r\n\t\t\t\t//if we want to place menu at righ, but there is no place move it to left instead\r\n\t\t\t\tif (x - elPos.x - dx < size[0] && mode.pos == \"right\" && !nochange)\r\n\t\t\t\t\tmode.pos = \"left\";\r\n\r\n\t\t\t\tif (mode.pos == \"right\"){\r\n\t\t\t\t\tfin_x = elPos.x+delta_x+dx; \r\n\t\t\t\t\tdelta_y = -dy;\r\n\t\t\t\t\tpoint = \"left\";\r\n\t\t\t\t\tpoint_y = Math.round(elPos.y+dy/2);\r\n\t\t\t\t\tpoint_x = fin_x - delta_point;\r\n\t\t\t\t} else if (mode.pos == \"left\"){\r\n\t\t\t\t\tfin_x = elPos.x-delta_x-size[0]-1;\r\n\t\t\t\t\tdelta_y = -dy;\r\n\t\t\t\t\tpoint = \"right\";\r\n\t\t\t\t\tpoint_y = Math.round(elPos.y+dy/2);\r\n\t\t\t\t\tpoint_x = fin_x + size[0]+1;\r\n\t\t\t\t} else  {\r\n\t\t\t\t\t//left border of screen\r\n\t\t\t\t\tif (elPos.x < scrollLeft){\r\n\t\t\t\t\t\tfin_x = scrollLeft;\r\n\t\t\t\t\t//popup exceed the right border of screen\r\n\t\t\t\t\t} else if (x+scrollLeft-elPos.x > size[0]){\r\n\t\t\t\t\t\tfin_x = elPos.x; //aligned\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tfin_x = x+scrollLeft-delta_x-size[0]; //not aligned\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpoint_x = Math.round(elPos.x+dx/2);\r\n\t\t\t\t\t//when we have a small popup, point need to be rendered at center of popup\r\n\t\t\t\t\tpoint_x = Math.min(point_x, fin_x + size[0] - delta_point*3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//if height is not fixed - use default position\r\n\t\t\t\tscrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n\t\t\t\tif (((!size[1] || (y+scrollTop-dy-elPos.y-delta_y > size[1])) || nochange) && mode.pos != \"top\"){\r\n\t\t\t\t\t//bottom\t\r\n\t\t\t\t\tfin_y = dy+elPos.y+delta_y - (!this._settings.point ? 0: 4);\r\n\t\t\t\t\tif (!point_y){\r\n\t\t\t\t\t\tpoint = \"top\";\r\n\t\t\t\t\t\tpoint_y = fin_y-delta_point;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//top\r\n\t\t\t\t\tfin_y = elPos.y-delta_y - size[1];\r\n\t\t\t\t\tif (fin_y < 0){\r\n\t\t\t\t\t\tfin_y = 0; \r\n\t\t\t\t\t\t//left|right point can be used, but there is no place for top point\r\n\t\t\t\t\t\tif (point == \"top\") point = false;\r\n\t\t\t\t\t} else if (!point_y){\r\n\t\t\t\t\t\tpoint = \"bottom\";\r\n\t\t\t\t\t\tfin_y --;\r\n\t\t\t\t\t\tpoint_y = fin_y+size[1]+1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar deltax = (mode.x || 0);\r\n\t\t\tvar deltay = (mode.y || 0);\r\n\r\n\t\t\tvar fixed = this._checkFixedPosition();\r\n\t\t\tthis.$view.style.position = fixed ? \"fixed\" : \"absolute\";\r\n\t\t\tif (fixed){\r\n\t\t\t\tfin_y = fin_y - scrollTop;\r\n\t\t\t\tpoint_y = point_y - scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setPosition(fin_x+deltax, fin_y+deltay);\r\n\t\t\tif (this._set_point){\r\n\t\t\t\tif (point && this._settings.point)\r\n\t\t\t\t\tthis._set_point(point,point_x+deltax, point_y+deltay, fixed);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._hide_point();\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tthis._setPosition(this._settings.left, this._settings.top);\r\n\r\n\t\tthis._viewobj.style.display = \"block\";\r\n\t\tthis._hide_timer = 1;\r\n\t\tdelay(function(){ this._hide_timer = 0; }, this, [], (env.touch ? 400 : 100 ));\r\n\t\t\r\n\t\tthis._render_hidden_views();\r\n\t\t\r\n\t\t\r\n\t\tif (this.config.autofocus){\r\n\t\t\tthis._prev_focus = UIManager.getFocus();\r\n\t\t\tUIManager.setFocus(this);\r\n\t\t}\r\n\r\n\t\tif (-1 == state._popups.find(this))\r\n\t\t\tstate._popups.push(this);\r\n\r\n\t\tthis.callEvent(\"onShow\",[]);\r\n\t}, \r\n\t_hide:function(e){\r\n\t\t//do not hide modal windows\r\n\t\tif (this._settings.hidden || this._settings.modal || !this._settings.escHide || this._hide_timer) return;\r\n\t\t//do not hide submenu when clicking on menu folder\r\n\t\tif (e && e.showpopup && (e.showpopup == this._settings.id || (this.getTopMenu && this.getTopMenu()._settings.id == e.showpopup))) return;\r\n\t\t//do not hide popup, when starting dnd with a long touch\r\n\t\tif (e && env.touch && e.longtouch_drag) return;\r\n\t\t//do not hide popup, when we have modal layer above the popup\r\n\t\tif (state._modality && this._viewobj.style.zIndex <= state._modality) return;\r\n\r\n\t\t//ignore inside clicks and clicks in child-popups\r\n\r\n\t\tif (e){\r\n\t\t\tvar index = e.click_view;\r\n\t\t\tif (!index && index !== 0) index = -1;\r\n\r\n\t\t\tvar myindex = state._popups.find(this);\r\n\r\n\t\t\tif (myindex <= index) return;\r\n\t\t}\r\n\r\n\t\tthis._hide_single();\r\n\t},\r\n\thidden_setter:function(value){\r\n\t\tif(value) \r\n\t\t\tthis.hide();\r\n\t\telse\r\n\t\t\tthis.show();\r\n\t\treturn !!value;\r\n\t},\r\n\thide:function(){\r\n\t\tconst index = this._hide_single();\r\n\t\tthis._hide_sub_popups(index);\r\n\t},\r\n\t_hide_single:function(){\r\n\t\tif (this.$destructed || this._settings.hidden) return;\r\n\r\n\t\tif (this._settings.modal)\r\n\t\t\tthis._modal_set(false);\r\n\r\n\t\tthis._hiding_process();\r\n\r\n\t\tif (this._settings.autofocus){\r\n\t\t\tvar el = document.activeElement;\r\n\t\t\t//as result of hotkey, we can have a activeElement set to document.body\r\n\t\t\tif (el && this._viewobj && (this._viewobj.contains(el) || el === document.body)){\r\n\t\t\t\tUIManager.setFocus(this._prev_focus);\r\n\t\t\t\tthis._prev_focus = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// clear state\r\n\t\tconst index = state._popups.find(this);\r\n\t\tif (index > -1)\r\n\t\t\tstate._popups.removeAt(index);\r\n\r\n\t\treturn index;\r\n\t},\r\n\t_hiding_process:function(){\r\n\t\tif (this._settings.position == \"top\"){\r\n\t\t\tanimate(this._viewobj, {type: \"slide\", x:0, y:-(this._content_height+20), duration: 300,\r\n\t\t\t\tcallback:this._hide_callback, master:this});\r\n\t\t} else \r\n\t\t\tthis._hide_callback();\r\n\t},\r\n\t//hide all child-popups\r\n\t_hide_sub_popups:function(index){\r\n\t\tif (index > -1){\r\n\t\t\tconst order = state._popups;\r\n\t\t\tfor (let i=order.length-1; i>=index; i--)\r\n\t\t\t\tif (order[i]._hide_point)\t//hide only popups, skip windows\r\n\t\t\t\t\torder[i]._hide_single();\r\n\t\t}\r\n\t},\r\n\tdestructor: function() {\r\n\t\tthis.hide();\r\n\t\tDestruction.destructor.apply(this, []);\r\n\t},\r\n\t_hide_callback:function(){\r\n\t\tif (!this.$destructed){\r\n\t\t\tthis._viewobj.style.display = \"none\";\r\n\t\t\tthis._settings.hidden = true;\r\n\t\t\tthis.callEvent(\"onHide\",[]);\r\n\t\t}\r\n\t},\r\n\tclose:function(){\r\n\t\tthis.destructor(); \r\n\t},\r\n\t_inner_body_set:function(value){\r\n\t\tif (typeof value.borderless == \"undefined\")\r\n\t\t\tvalue.borderless = true;\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\tif (typeof value != \"object\")\r\n\t\t\tvalue = {template:value };\r\n\t\tthis._inner_body_set(value);\r\n\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_cell = ui._view(value);\r\n\r\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\r\n\t\treturn value;\r\n\t},\r\n\thead_setter:function(value){\r\n\t\tif (value === false) return value;\r\n\r\n\t\tconst text = typeof value == \"string\";\r\n\t\tconst config = { padding:0, css: \"webix_win_title\", type:\"header\", borderless:true };\r\n\t\tif(text){\r\n\t\t\tthis._viewobj.setAttribute(\"aria-label\", value);\r\n\t\t\tvalue = { template:value };\r\n\t\t}\r\n\t\tif(value.view == \"template\" || (!value.view && value.template)){\r\n\t\t\textend(value, config);\r\n\t\t}\r\n\t\tif(text && this.config.close){\r\n\t\t\tvalue = { padding:{ left: $active.inputHeight+2, right:2 }, cols:[\r\n\t\t\t\tvalue,\r\n\t\t\t\t{ view:\"icon\", icon:\"wxi-close\", click:()=>{\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}}\r\n\t\t\t]};\r\n\t\t}\r\n\t\telse\r\n\t\t\textend(value, {borderless:true});\r\n\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._head_cell = ui._view(value);\r\n\r\n\t\tthis._headobj.appendChild(this._head_cell._viewobj);\r\n\t\treturn value;\r\n\t},\r\n\tgetBody:function(){\r\n\t\treturn this._body_cell;\r\n\t},\r\n\tgetHead:function(){\r\n\t\treturn this._head_cell;\r\n\t},\r\n\tadjust:function(){ return this.resize(); },\r\n\tresizeChildren:function(){\r\n\t\tif (this._body_cell)\r\n\t\t\tthis.resize();\r\n\t},\r\n\tresize:function(){\r\n\t\tbaseview.api.adjust.call(this);\r\n\t\tcallEvent(\"onResize\", []);\r\n\t\tif (this.isVisible()){\r\n\t\t\tthis._setPosition(this._settings.left, this._settings.top);\r\n\t\t}\r\n\t},\r\n\t_checkFixedPosition: function() {\r\n\t\tif(this._settings.master) {\r\n\t\t\tvar top = $$(this._settings.master).getTopParentView().$view;\r\n\t\t\treturn top && top.style.position === \"fixed\";\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_setPosition:function(x,y){\r\n\t\tif ((this._settings.position || this._checkFixedPosition())){\r\n\t\t\tthis.$view.style.position = \"fixed\";\r\n\r\n\t\t\tvar width = this._content_width;\r\n\t\t\tvar height = this._content_height;\r\n\t\t\tif (width <= 0 || height <= 0) return;\r\n\r\n\t\t\tvar maxWidth = (window.innerWidth||document.documentElement.offsetWidth);\r\n\t\t\tvar maxHeight = (window.innerHeight||document.documentElement.offsetHeight);\r\n\t\t\tvar left = Math.round((maxWidth-width)/2);\r\n\t\t\tvar top = Math.round((maxHeight-height)/2);\r\n\r\n\t\t\tif (typeof this._settings.position == \"function\"){\r\n\t\t\t\tvar state = { \tleft:left, top:top, \r\n\t\t\t\t\twidth:width, height:height, \r\n\t\t\t\t\tmaxWidth:maxWidth, maxHeight:maxHeight };\r\n\t\t\t\tthis._settings.position.call(this, state);\r\n\r\n\t\t\t\tif (state.width != width || state.height != height)\r\n\t\t\t\t\tthis.$setSize(state.width, state.height);\r\n\r\n\t\t\t\tthis.setPosition(state.left, state.top);\r\n\t\t\t} else {\r\n\t\t\t\tif (this._settings.position == \"top\"){\r\n\t\t\t\t\tif (animate.isSupported())\r\n\t\t\t\t\t\ttop = -1*height;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ttop = 10;\r\n\t\t\t\t}\r\n\t\t\t\t//popup inside a fixed win\r\n\t\t\t\tif(!this._settings.position){\r\n\t\t\t\t\tleft = this._settings.left || left;\r\n\t\t\t\t\ttop = this._settings.top || top;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosition(left, top);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._settings.position == \"top\")\r\n\t\t\t\tanimate(this._viewobj, {type: \"slide\", x:0, y:height-((this._settings.padding||0)*2), duration: 300 ,callback:this._topPositionCallback, master:this});\r\n\t\t} else \r\n\t\t\tthis.setPosition(x,y);\r\n\t},\r\n\t_topPositionCallback:function(node){\r\n\t\tanimate.clear(node);\r\n\t\tthis._settings.top=-((this._settings.padding||0)*2);\r\n\t\tthis.setPosition(this._settings.left, this._settings.top);\r\n\t},\r\n\tsetPosition:function(x,y){\r\n\t\tthis._viewobj.style.top = y+\"px\";\r\n\t\tthis._viewobj.style.left = x+\"px\";\r\n\t\tthis._settings.left = x; this._settings.top=y;\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar _borders = this._settings._inner;\r\n\t\tif (_borders){\r\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\r\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\r\n\t\t}\r\n\t\t//line between head and body\r\n\t\tif (this._settings.head)\r\n\t\t\tdy += 1;\r\n\r\n\t\tvar size =  this._body_cell.$getSize(0,0);\r\n\t\tvar headMinWidth = 0;\r\n\t\tif (this._head_cell){\r\n\t\t\tvar head_size = this._head_cell.$getSize(0,0);\r\n\t\t\tif (head_size[3]==head_size[2])\r\n\t\t\t\tthis._settings.headHeight = head_size[3];\r\n\t\t\tdy += this._settings.headHeight;\r\n\t\t\theadMinWidth = head_size[0];\r\n\t\t}\r\n\r\n\t\tif (this._settings.fullscreen){\r\n\t\t\tvar width = window.innerWidth || document.body.clientWidth;\r\n\t\t\tvar height = window.innerHeight || document.body.clientHeight;\r\n\t\t\treturn [width, width, height, height];\r\n\t\t}\r\n\r\n\t\t//get layout sizes\r\n\t\tvar self_size = base.api.$getSize.call(this, 0, 0);\r\n\r\n\t\t//use child settings if layout's one was not defined\r\n\t\tif (headMinWidth && size[1] > 100000)\r\n\t\t\tsize[0] = Math.max(headMinWidth, size[0]);\r\n\r\n\t\tself_size[1] = Math.min(self_size[1],(size[1]>=100000&&self_size[1]>=100000?Math.max(size[0], self_size[0]):size[1])+dx);\r\n\t\tself_size[3] = Math.min(self_size[3],(size[3]>=100000&&self_size[3]>=100000?Math.max(size[2], self_size[2]):size[3])+dy);\r\n\r\n\t\tself_size[0] = Math.min(Math.max(self_size[0],size[0] + dx), self_size[1]);\r\n\t\tself_size[2] = Math.min(Math.max(self_size[2],size[2] + dy), self_size[3]);\r\n\r\n\t\treturn self_size;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tbase.api.$setSize.call(this,x,y);\r\n\t\tx = this._content_width;\r\n\t\ty = this._content_height;\r\n\t\tif (this._settings.head === false) {\r\n\t\t\tthis._headobj.style.display=\"none\";\r\n\t\t\tthis._body_cell.$setSize(x,y);\r\n\t\t} else { \r\n\t\t\tthis._head_cell.$setSize(x,this._settings.headHeight);\r\n\t\t\tthis._body_cell.$setSize(x,y-this._settings.headHeight);\r\n\t\t}\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.defaults.headHeight = $active.barHeight;\r\n\t},\r\n\tdefaults:{\r\n\t\ttop:0,\r\n\t\tleft:0,\r\n\t\tautofit:true,\r\n\t\trelative:\"bottom\",\r\n\t\tbody:\"\",\r\n\t\thead:\"\",\r\n\t\thidden: true,\r\n\t\tautofocus:true,\r\n\t\tminWidth:300,\r\n\t\tminHeight:200,\r\n\t\tescHide:true\r\n\t}\r\n};\r\n\r\n//global longtouch handler\r\nattachEvent(\"onLongTouch\", function(ev){\r\n\tif (!ev || !ev.target) return;\r\n\r\n\tlet view = $$(ev.target);\r\n\tif (view){\r\n\t\tview = view.queryView(a => !a.getParentView(), \"parent\")||view;\r\n\r\n\t\tconst popups = state._popups;\r\n\t\tconst index = popups.find(view);\r\n\t\tif (index !== -1) ev.click_view = index;\r\n\t}\r\n});\r\n\r\nconst view = protoUI(api, base.view, Movable, Modality, EventSystem, ResizeArea);\r\nexport default {api, view};","import {preventEvent} from \"../webix/html\";\r\nimport {bind, toNode} from \"../webix/helpers\";\r\nimport window from \"../views/window\";\r\nimport {$$} from \"../ui/core\";\r\nimport {event, eventRemove} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\n\r\nconst ContextHelper = {\r\n\tdefaults:{\r\n\t\tpadding:\"4\",\r\n\t\thidden:true\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\tvalue = window.api.body_setter.call(this, value);\r\n\t\tthis._body_cell._viewobj.style.borderWidth = \"0px\";\r\n\t\treturn value;\r\n\t},\r\n\tattachTo:function(obj){\r\n\t\tassert(obj, \"Invalid target for Context::attach\");\r\n\t\tvar id;\r\n\t\tif (obj.on_context)\r\n\t\t\tid = obj.attachEvent(\"onAfterContextMenu\", bind(this._show_at_ui, this));\r\n\t\telse \r\n\t\t\tid = event(obj, \"contextmenu\", this._show_at_node, {bind:this});\r\n\r\n\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\tif (obj.callEvent)\r\n\t\t\t\tobj.detachEvent(id);\r\n\t\t\telse\r\n\t\t\t\teventRemove(id);\r\n\t\t\tobj = null;\t\t\t\r\n\t\t});\r\n\t},\r\n\tgetContext:function(){\r\n\t\treturn this._area;\r\n\t},\r\n\tsetContext:function(area){\r\n\t\tthis._area = area;\r\n\t},\r\n\t_show_at_node:function(e){\r\n\t\tthis._area = toNode(e||window.event);\r\n\t\treturn this._show_at(e);\r\n\t},\r\n\t_show_at_ui:function(id, e){\r\n\t\tthis._area = { obj:$$(e), id:id };\r\n\t\treturn this._show_at(e);\r\n\t},\r\n\t_show_at:function(e){\r\n\t\tvar result = this.show(e, null, true);\r\n\t\tif (result === false) return result;\r\n\r\n\t\t// ignore contexmenu clicks for the popup or its body\r\n\t\tconst view = $$(e);\r\n\t\tif (view){\r\n\t\t\tconst top = view.queryView(a => !a.getParentView(), \"parent\") || view;\r\n\t\t\tif (top._ignore_clicks) top._ignore_clicks(e);\r\n\t\t}\r\n\t\t\r\n\t\t//event forced to close other popups|context menus\r\n\t\tcallEvent(\"onClick\", [e]);\t\t\r\n\t\treturn preventEvent(e);\r\n\t},\r\n\t_show_on_mouse_out:true,\r\n\tmaster_setter:function(value){\r\n\t\tthis.attachTo(value);\r\n\t\treturn null;\r\n\t}\r\n};\r\n\r\nexport default ContextHelper;","import state from \"../core/state\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {bind, delay} from \"../webix/helpers\";\r\nimport {event} from \"../webix/htmlevents\";\r\n\r\n\r\nconst clipbuffer = {\r\n\r\n\t_area: null,\r\n\t_blur_id: null,\r\n\t_ctrl: 0,\r\n\r\n\t/*! create textarea or returns existing\r\n\t **/\r\n\tinit: function() {\r\n\t\t// returns existing textarea\r\n\t\tif (this._area !== null)\r\n\t\t\treturn this._area;\r\n\r\n\t\tstate.destructors.push({ obj: this });\r\n\t\t// creates new textarea\r\n\t\tthis._area = document.createElement(\"textarea\");\r\n\t\tthis._area.className = \"webix_clipbuffer\";\r\n\t\tthis._area.setAttribute(/*@attr*/\"webixignore\", 1);\r\n\t\tthis._area.setAttribute(\"spellcheck\", \"false\");\r\n\t\tthis._area.setAttribute(\"autocapitalize\", \"off\");\r\n\t\tthis._area.setAttribute(\"autocorrect\", \"off\");\r\n\t\tthis._area.setAttribute(\"autocomplete\", \"off\");\r\n\t\tdocument.body.appendChild(this._area);\r\n\r\n\t\tevent(document.body, \"keydown\", bind(function(e){\r\n\t\t\tvar key = e.keyCode;\r\n\t\t\tvar ctrl = !!(e.ctrlKey || e.metaKey);\r\n\t\t\tif (key === 86 && ctrl){\r\n\t\t\t\tthis._area.value = \"\";\r\n\t\t\t\tdelay(this._paste, this, [e], 100);\r\n\t\t\t}\r\n\t\t}, this));\r\n\r\n\t\treturn this._area;\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis._area = null;\r\n\t},\r\n\t/*! set text into buffer\r\n\t **/\r\n\tset: function(text) {\r\n\t\tthis.init();\r\n\t\ttext = text === \"\" ? \"\\n\" : text;\r\n\t\tthis._area.value = text;\r\n\t\tthis.focus();\r\n\t},\r\n\t/*! select text in textarea\r\n\t **/\r\n\tfocus: function() {\r\n\t\t// if there is native browser selection, skip focus\r\n\t\tif(!this._isSelectRange()){\r\n\t\t\tthis.init();\r\n\t\t\tthis._area.focus();\r\n\t\t\tthis._area.select();\r\n\t\t}\r\n\r\n\t},\r\n\t/*! checks document selection\r\n\t **/\r\n\t_isSelectRange: function() {\r\n\t\tvar text = \"\";\r\n\t\tif (typeof window.getSelection != \"undefined\") {\r\n\t\t\ttext = window.getSelection().toString();\r\n\t\t} else if (typeof document.selection != \"undefined\" && document.selection.type == \"Text\") {\r\n\t\t\ttext = document.selection.createRange().text;\r\n\t\t}\r\n\t\treturn !!text;\r\n\t},\r\n\t/*! process ctrl+V pressing\r\n\t **/\r\n\t_paste: function(e) {\r\n\t\tvar trg = e.target;\r\n\t\tif (trg === this._area) {\r\n\t\t\tvar text = this._area.value;\r\n\t\t\tvar last_active = UIManager.getFocus();\r\n\t\t\tif (last_active && (!last_active.getEditor || !last_active.getEditor())){\r\n\t\t\t\tlast_active.callEvent(\"onPaste\", [text]);\r\n\t\t\t\tthis._area.select();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default clipbuffer;","import UIManager from \"../core/uimanager\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\n\r\nimport clipbuffer from \"../webix/clipbuffer\";\r\nimport env from \"../webix/env\";\r\n\r\nconst CopyPaste = {\r\n\tclipboard_setter: function(value) {\r\n\t\tif (env.touch) return value;\r\n\r\n\t\tif (value === true || value === 1) value = \"modify\";\r\n\t\tthis.attachEvent(\"onAfterSelect\", function(id) {\r\n\t\t\tif (!this.getEditor || !this.getEditor()){\r\n\t\t\t\tvar item = this.getItem(id);\r\n\t\t\t\tvar text = this.type.templateCopy(item);\r\n\t\t\t\tclipbuffer.set(text, this);\r\n\t\t\t\tclipbuffer.focus();\r\n\t\t\t\tUIManager.setFocus(this);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent(\"onPaste\", function(text) {\r\n\t\t\tif (!isUndefined(this._paste[this._settings.clipboard]))\r\n\t\t\t\tthis._paste[this._settings.clipboard].call(this, text);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFocus\", function() {\r\n\t\t\tclipbuffer.focus();\r\n\t\t});\r\n\t\t// solution for clicks on selected items\r\n\t\tthis.attachEvent(\"onItemClick\",function(id){\r\n\t\t\tif(!this._selected || this._selected.find(id)!==-1){\r\n\t\t\t\tclipbuffer.focus();\r\n\t\t\t\tUIManager.setFocus(this);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t},\r\n\t_paste: {\r\n\t\t// insert new item with pasted value\r\n\t\tinsert: function(text) {\r\n\t\t\tthis.add({ value: text });\r\n\t\t},\r\n\t\t// change value of each selected item\r\n\t\tmodify: function(text) {\r\n\t\t\tvar sel = this.getSelectedId(true);\r\n\t\t\tfor (var i = 0; i < sel.length; i++) {\r\n\t\t\t\tthis.getItem(sel[i]).value = text;\r\n\t\t\t\tthis.refresh(sel[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// do nothing\r\n\t\tcustom: function() {}\r\n\t},\r\n\ttemplateCopy_setter: function(value) {\r\n\t\tthis.type.templateCopy = template(value);\r\n\t},\r\n\ttype:{\r\n\t\ttemplateCopy: function(item) {\r\n\t\t\treturn this.template(item);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default CopyPaste;","import {create, insertBefore, remove} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport {extend, bind} from \"../webix/helpers\";\r\n\r\n\r\nconst CustomPrint = {\r\n\t$customPrint:function(options, htmlOnly){\r\n\t\tif(this._prePrint(options, htmlOnly))\r\n\t\t\treturn true;\r\n\r\n\t\tvar tableData = this._getTableArray(options);\r\n\t\tvar table = this._getTableHTML(tableData, options);\r\n\r\n\t\tif(htmlOnly)\r\n\t\t\treturn table;\r\n\r\n\t\tvar doc = create(\"div\", { \"class\":\"webix_ui_print\"});\r\n\t\tdoc.appendChild(table);\r\n\r\n\t\tinsertBefore(doc, options.docFooter, document.body);\r\n\t\twindow.print();\r\n\t\t\r\n\t\tremove(doc);\r\n\t},\r\n\t_prePrint:function(options, htmlOnly){\r\n\t\tif(!htmlOnly && (this.config.layout ==\"y\" || options.scroll || this.config.prerender || this.config.autoheight)) return true;\r\n\t\t\r\n\t\tif(this.config.layout ==\"x\")\r\n\t\t\textend(options || {}, {xCount:this.count(), nobreaks:true}, true);\r\n\t},\r\n\t_getPageWidth:function(options){\r\n\t\tvar size = options.size;\r\n\t\tvar width = size[options.mode == \"portrait\"?\"width\":\"height\"];\r\n\t\t\r\n\t\treturn Math.min(width*env.printPPI-2*env.printMargin);\r\n\t},\r\n\t_getTableArray:function(options, base, start){\r\n\t\tvar maxWidth = options.fit ==\"page\" ? Infinity : this._getPageWidth(options);\r\n\t\tvar xCount = options.xCount || this._getVisibleRange()._dx;\r\n\r\n\t\tvar tableArray = [];\r\n\t\tvar colrow = [];\r\n\t\tvar width = 0;\r\n\t\t\r\n\t\tvar newTableStart, rownum, colnum;\r\n\r\n\t\tstart = start || 0;\r\n\t\tbase = base || [];\r\n\r\n\t\tfor(var i = 0; i<this.data.order.length;){\r\n\t\t\tvar obj = this.data.pull[this.data.order[i]];\r\n\t\t\trownum = parseInt(i/xCount);\r\n\t\t\tcolnum = i-(rownum*xCount);\r\n\r\n\t\t\tif(obj && colnum>=start){\r\n\t\t\t\twidth += this.type.width;\r\n\t\t\t\t\r\n\t\t\t\t//start a new table, if cells do not fit page width\r\n\t\t\t\tif(width > maxWidth && colnum>start){ // 'colnum>start' ensures that a single long cell will have to fit the page\r\n\t\t\t\t\tnewTableStart = colrow.length+start;\r\n\t\t\t\t\ttableArray.push(colrow);\r\n\t\t\t\t\ti = i+(xCount-colrow.length);\r\n\t\t\t\t\tcolrow = [];\r\n\t\t\t\t\twidth = 0;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar cellValue = this.type.template(obj, this.type);\r\n\t\t\t\tvar className = this._itemClassName;\r\n\t\t\t\t\r\n\t\t\t\tvar style  = {\r\n\t\t\t\t\tdisplay:\"table-cell\",\r\n\t\t\t\t\theight:this.type.height + \"px\",\r\n\t\t\t\t\twidth:this.type.width + \"px\"\r\n\t\t\t\t};\r\n\t\t\t\t//push a cell to a row\r\n\t\t\t\tcolrow.push({\r\n\t\t\t\t\ttxt: cellValue,\r\n\t\t\t\t\tclassName: className+\" \"+(obj.$css || \"\"),\r\n\t\t\t\t\tstyle: style\r\n\t\t\t\t});\r\n\t\t\t\t//push a row to a table and start a new row\r\n\t\t\t\tif((i+1)%xCount === 0){\r\n\t\t\t\t\ttableArray.push(colrow);\r\n\t\t\t\t\tcolrow = [];\r\n\t\t\t\t\twidth = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tbase.push(tableArray);\r\n\r\n\t\tif(newTableStart)\r\n\t\t\tthis._getTableArray(options, base, newTableStart);\t\r\n\r\n\t\treturn base;\r\n\t},\r\n\t_getTableHTML:function(tableData, options){\r\n\t\t\r\n\t\tvar container = create(\"div\");\r\n\r\n\t\ttableData.forEach(bind(function(table, i){\r\n\r\n\t\t\tvar tableHTML = create(\"table\", {\r\n\t\t\t\t\"class\":\"webix_table_print \"+this.$view.className,\r\n\t\t\t\t\"style\":\"border-collapse:collapse\"\r\n\t\t\t});\r\n\r\n\t\t\ttable.forEach(function(row){\r\n\t\t\t\tvar tr = create(\"tr\");\r\n\r\n\t\t\t\trow.forEach(function(column){\r\n\t\t\t\t\tvar td = create(\"td\");\r\n\r\n\r\n\t\t\t\t\tif (column.txt) td.innerHTML = column.txt;\r\n\t\t\t\t\tif (column.className) td.className = column.className;\r\n\t\t\t\t\tif (column.style) {\r\n\t\t\t\t\t\tvar keys = Object.keys(column.style);\r\n\t\t\t\t\t\tkeys.forEach(function(key){\r\n\t\t\t\t\t\t\tif (column.style[key])\r\n\t\t\t\t\t\t\t\ttd.style[key] = column.style[key];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(column.span){\r\n\t\t\t\t\t\tif(column.span.colspan > 1)\r\n\t\t\t\t\t\t\ttd.colSpan = column.span.colspan;\r\n\t\t\t\t\t\tif(column.span.rowspan > 1)\r\n\t\t\t\t\t\t\ttd.rowSpan = column.span.rowspan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t});\r\n\t\t\t\ttableHTML.appendChild(tr);\r\n\t\t\t});\r\n\t\t\tcontainer.appendChild(tableHTML);\r\n\r\n\t\t\tif(!options.nobreaks && i+1 < tableData.length){\r\n\t\t\t\tvar br = create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\r\n\t\t\t\tcontainer.appendChild(br);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}, this));\r\n\r\n\t\treturn container;\r\n\t}\r\n};\r\n\r\nexport default CustomPrint;","const temp = null; export default temp;","const DataMarks = {\r\n\taddCss:function(id, css, silent){\r\n\t\tif (!this.addRowCss && !silent){\r\n\t\t\tif (!this.hasCss(id, css)){\r\n\t\t\t\tvar node = this.getItemNode(id);\r\n\t\t\t\tif (node){\r\n\t\t\t\t\tnode.className += \" \"+css;\r\n\t\t\t\t\tsilent = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.data.addMark(id, css, 1, 1, silent);\r\n\t},\r\n\tremoveCss:function(id, css, silent){\r\n\t\tif (!this.addRowCss && !silent){\r\n\t\t\tif (this.hasCss(id, css)){\r\n\t\t\t\tvar node = this.getItemNode(id);\r\n\t\t\t\tif (node){\r\n\t\t\t\t\tnode.className = node.className.replace(css,\"\").replace(\"  \",\" \");\r\n\t\t\t\t\tsilent = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.data.removeMark(id, css, 1, silent);\r\n\t},\r\n\thasCss:function(id, mark){\r\n\t\treturn this.data.getMark(id, mark);\r\n\t},\r\n\tclearCss:function(css, silent){\r\n\t\treturn this.data.clearMark(css, 1, silent);\r\n\t}\r\n};\r\n\r\nexport default DataMarks;","import {isArray, extend, uid} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\n/*\r\n\tBehavior:DataMove - allows to move and copy elements, heavily relays on DataStore.move\r\n\t@export\r\n\t\tcopy\r\n\t\tmove\r\n*/\r\nconst DataMove ={\r\n\t//creates a copy of the item\r\n\tcopy:function(sid,tindex,tobj, details){\r\n\t\tdetails = details || {};\r\n\t\tvar new_id = details.newId || sid;\r\n\t\ttobj = tobj||this;\r\n\r\n\t\tvar data = this.getItem(sid);\r\n\t\tassert(data,\"Incorrect ID in DataMove::copy\");\r\n\t\t\r\n\t\t//make data conversion between objects\r\n\t\tif (tobj)\r\n\t\t\tdata = tobj._externalData(data);\r\n\t\t\r\n\t\t//adds new element same as original\r\n\t\treturn tobj.data.add(tobj._externalData(data,new_id),tindex,(details.parent || 0));\r\n\t},\r\n\t_next_move_index:function(nid, next, source){\r\n\t\tif (next && nid){\r\n\t\t\tvar new_index = this.getIndexById(nid);\r\n\t\t\treturn new_index + ((source == this && source.getIndexById(next) < new_index) ? 0 : 1);\r\n\t\t}\r\n\t},\r\n\t//move item to the new position\r\n\tmove:function(sid,tindex,tobj, details){\r\n\t\tdetails = details || {};\r\n\t\tvar new_id = details.newId || sid;\r\n\r\n\t\ttobj = tobj||this;\r\n\t\tassert(tobj.data, \"moving attempt to component without datastore\");\r\n\t\tif (!tobj.data) return;\r\n\r\n\t\t//can process an arrya - it allows to use it from onDrag \r\n\t\tif (isArray(sid)){\r\n\t\t\t//block separate repaint operations\r\n\t\t\tif (sid.length > 3) //heuristic value, duplicated below\r\n\t\t\t\tthis.$blockRender = tobj.$blockRender = true;\r\n\r\n\t\t\tfor (var i=0; i < sid.length; i++) {\r\n\t\t\t\t//increase index for each next item in the set, so order of insertion will be equal to order in the array\r\n\t\t\t\tconst nid = this.move(sid[i], tindex, tobj, details);\r\n\t\t\t\ttindex = tobj._next_move_index(nid, sid[i+1], this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.$blockRender = tobj.$blockRender = false;\r\n\t\t\tif (sid.length > 3){\r\n\t\t\t\t//repaint whole component\r\n\t\t\t\tthis.refresh();\r\n\t\t\t\tif (tobj != this)\r\n\t\t\t\t\ttobj.refresh();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet nid = sid; //id after moving\r\n\r\n\t\tvar data = this.getItem(sid);\r\n\t\tassert(data,\"Incorrect ID in DataMove::move\");\r\n\t\t\r\n\t\tif (!tobj || tobj == this){\r\n\t\t\tif (tindex < 0) tindex = this.data.order.length - 1;\r\n\t\t\tthis.data.move(this.getIndexById(sid),tindex);\t//move inside the same object\r\n\t\t\tthis.data.callEvent(\"onDataMove\", [sid, tindex, null, this.data.order[tindex+1]]);\r\n\t\t} else {\r\n\t\t\t//copy to the new object\r\n\t\t\tnid = tobj.data.add(tobj._externalData(data,new_id),tindex, (details.parent || 0));\r\n\t\t\tthis.data.remove(sid);//delete in old object\r\n\t\t}\r\n\t\treturn nid;\t//return ID of item after moving\r\n\t},\r\n\t//move item on one position up\r\n\tmoveUp:function(id,step){\r\n\t\tconst index = this.getIndexById(id)-(step||1);\r\n\t\treturn this.move(id,(index<0)?0:index);\r\n\t},\r\n\t//move item on one position down\r\n\tmoveDown:function(id,step){\r\n\t\treturn this.moveUp(id, (step||1)*-1);\r\n\t},\r\n\t//move item to the first position\r\n\tmoveTop:function(id){\r\n\t\treturn this.move(id,0);\r\n\t},\r\n\t//move item to the last position\r\n\tmoveBottom:function(id){\r\n\t\treturn this.move(id,this.data.count()-1);\r\n\t},\r\n\t/*\r\n\t\tthis is a stub for future functionality\r\n\t\tcurrently it just makes a copy of data object, which is enough for current situation\r\n\t*/\r\n\t_externalData:function(data,id){\r\n\t\tvar newdata = extend({},data);\r\n\t\tnewdata.id = (!id || this.data.pull[id])?uid():id;\r\n\t\t\r\n\r\n\t\tnewdata.$template=null;\r\n\r\n\t\tif (this._settings.externalData)\r\n\t\t\tnewdata = this._settings.externalData.call(this, newdata, id, data);\r\n\t\treturn newdata;\r\n\t}\r\n};\r\n\r\nexport default DataMove;","const rules = {\r\n\tisEmail: function(value){\r\n\t\treturn (/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/).test((value || \"\").toString());\r\n\t},\r\n\tisNumber: function(value){\r\n\t\treturn (parseFloat(value) == value);\r\n\t},\r\n\tisChecked: function(value){\r\n\t\treturn (!!value) || value === \"0\";\r\n\t},\r\n\tisNotEmpty: function(value){\r\n\t\treturn (value === 0 || value);\r\n\t}\r\n};\r\n\r\nexport default rules;","import {assert} from \"../webix/debug\";\r\nimport CodeParser from \"../core/codeparser\";\r\nimport rules from \"../webix/rules\";\r\n\r\n\r\n\r\nconst ValidateData = {\r\n\t$init:function(){\r\n\t\tif(this._events)\r\n\t\t\tthis.attachEvent(\"onChange\",this.clearValidation);\r\n\t},\r\n\tclearValidation:function(){\r\n\t\tif(this.elements){\r\n\t\t\tfor(var id in this.elements){\r\n\t\t\t\tthis._clear_invalid(id);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tvalidate:function(mode, obj) {\r\n\t\tassert(this.callEvent, \"using validate for eventless object\");\r\n\t\t\r\n\t\tthis.callEvent(\"onBeforeValidate\", []);\r\n\r\n\t\tvar failed = this._validate_details = {};\r\n\r\n\t\t//optimistic by default :) \r\n\t\tvar result =true;\r\n\t\tvar rules = this._settings.rules;\r\n\t\t\r\n\t\tvar isHidden = this.isVisible && !this.isVisible();\r\n\t\tvar validateHidden = mode && mode.hidden;\r\n\t\tvar validateDisabled = mode && mode.disabled;\r\n\r\n\t\t//prevent validation of hidden elements\r\n\t\tvar elements = {}, hidden = {};\r\n\t\tfor(var i in this.elements){\r\n\t\t\tvar name = this.elements[i].config.name;\r\n\t\t\t//we are ignoring hidden and disabled fields during validation\r\n\t\t\t//if mode doesn not instruct us otherwise\r\n\t\t\t//if form itself is hidden, we can't separate hidden fiels,\r\n\t\t\t//so we will vaidate all fields\r\n\t\t\tif((isHidden || this.elements[i].isVisible() || validateHidden) && (this.elements[i].isEnabled() || validateDisabled))\r\n\t\t\t\telements[name] = this.elements[i];\r\n\t\t\telse{\r\n\t\t\t\thidden[name]=true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules || elements)\r\n\t\t\tif(!obj && this.getValues)\r\n\t\t\t\tobj = this.getValues();\r\n\r\n\t\tif (rules){\r\n\t\t\t//complex rule, which may chcek all properties of object\r\n\t\t\tif (rules.$obj)\r\n\t\t\t\tresult = this._validate(rules.$obj, obj, obj, \"\") && result;\r\n\t\t\t\r\n\t\t\t//all - applied to all fields\r\n\t\t\tvar all = rules.$all;\r\n\t\t\tvar data = obj;\r\n\r\n\t\t\tif (this._settings.complexData)\r\n\t\t\t\tdata = CodeParser.collapseNames(obj, \"\", {}, (v) => !rules[v]);\r\n\r\n\t\t\tif (all)\r\n\t\t\t\tfor (let key in obj){\r\n\t\t\t\t\tif(hidden[key]) continue;\r\n\t\t\t\t\tlet subresult = this._validate(all, data[key], obj, key);\r\n\t\t\t\t\tif (!subresult)\r\n\t\t\t\t\t\tfailed[key] = true;\r\n\t\t\t\t\tresult =  subresult && result;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t//per-field rules\r\n\t\t\tfor (let key in rules){\r\n\t\t\t\tif(hidden[key]) continue;\r\n\t\t\t\tif (key.indexOf(\"$\")!==0 && !failed[key]){\r\n\t\t\t\t\tassert(rules[key], \"Invalid rule for:\"+key);\r\n\t\t\t\t\tlet subresult = this._validate(rules[key], data[key], obj, key);\r\n\t\t\t\t\tif (!subresult)\r\n\t\t\t\t\t\tfailed[key] = true;\r\n\t\t\t\t\tresult = subresult && result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//check personal validation rules\r\n\t\tif (elements){\r\n\t\t\tfor (var key in elements){\r\n\t\t\t\tif (failed[key]) continue;\r\n\r\n\t\t\t\tvar subview = elements[key];\r\n\t\t\t\tif (subview.validate){\r\n\t\t\t\t\tlet subresult = subview.validate();\r\n\t\t\t\t\tresult = subresult && result;\r\n\t\t\t\t\tif (!subresult)\r\n\t\t\t\t\t\tfailed[key] = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar input = subview._settings;\r\n\t\t\t\t\tif (input){\t//ignore non webix inputs\r\n\t\t\t\t\t\tvar validator = input.validate;\r\n\t\t\t\t\t\tif (!validator && input.required)\r\n\t\t\t\t\t\t\tvalidator = rules.isNotEmpty;\r\n\r\n\t\t\t\t\t\tif (validator){\r\n\t\t\t\t\t\t\tlet subresult = this._validate(validator, obj[key], obj, key);\r\n\t\t\t\t\t\t\tif (!subresult)\r\n\t\t\t\t\t\t\t\tfailed[key] = true;\r\n\t\t\t\t\t\t\tresult = subresult && result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tthis.callEvent(\"onAfterValidation\", [result, this._validate_details]);\r\n\t\treturn result;\r\n\t},\r\n\t_validate:function(rule, data, obj, key){\r\n\t\tif (typeof rule == \"string\")\r\n\t\t\trule = rules[rule];\r\n\t\tif (rule.call(this, data, obj, key)){\r\n\t\t\tif(this.callEvent(\"onValidationSuccess\",[key, obj]) && this._clear_invalid)\r\n\t\t\t\tthis._clear_invalid(key);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(this.callEvent(\"onValidationError\",[key, obj]) && this._mark_invalid)\r\n\t\t\t\tthis._mark_invalid(key);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default ValidateData;","import {assert} from \"../webix/debug\";\r\nimport {copy, isUndefined, bind, isArray} from \"../webix/helpers\";\r\nimport {callEvent} from \"../webix/customevents\";\r\nimport {define} from \"../services\";\r\n\r\nimport {$$, proto} from \"../ui/core\";\r\n\r\nimport {ajax} from \"../load/ajax\";\r\nimport proxy from \"../load/proxy\";\r\nimport promise from \"../thirdparty/promiz\";\r\n\r\nimport Settings from \"../core/settings\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport ValidateData from \"../core/validatedata\";\r\n\r\nconst _pull = {};\r\n\r\nexport function dp(name,getOnly){\r\n\tif (typeof name == \"object\" && name._settings)\r\n\t\tname = name._settings.id;\r\n\tif (_pull[name] || getOnly)\r\n\t\treturn _pull[name];\r\n\r\n\tif (typeof name == \"string\"||typeof name == \"number\")\r\n\t\tname = { master:$$(name) };\r\n\r\n\tvar dp = new DataProcessor(name);\r\n\tvar masterId = dp._settings.master._settings.id;\r\n\t_pull[masterId]=dp;\r\n\r\n\t$$(masterId).attachEvent(\"onDestruct\",function(){\r\n\t\t_pull[this._settings.id] = null;\r\n\t\tdelete _pull[this._settings.id];\r\n\t});\r\n\r\n\treturn dp;\r\n}\r\n\r\ndefine(\"dp\", dp);\r\n\r\ndp.$$ = function(id){\r\n\treturn _pull[id];\r\n};\r\n\r\n\r\nexport const DataProcessor = proto({\r\n\tdefaults: {\r\n\t\tautoupdate:true,\r\n\t\tupdateFromResponse:false,\r\n\t\tmode:\"post\",\r\n\t\toperationName:\"webix_operation\",\r\n\t\ttrackMove:false\r\n\t},\r\n\r\n\r\n\t/*! constructor\r\n\t **/\r\n\t$init: function() {\r\n\t\tthis.reset();\r\n\t\tthis._ignore = false;\r\n\t\tthis.name = \"DataProcessor\";\r\n\t\tthis.$ready.push(this._after_init_call);\r\n\t},\r\n\treset:function(){\r\n\t\tthis._updates = [];\r\n\t},\r\n\turl_setter:function(value){\r\n\t\t/*\r\n\t\t\twe can use simple url or mode->url\r\n\t\t*/\r\n\t\tvar mode = \"\";\r\n\t\tif (typeof value == \"string\"){\r\n\t\t\tvar parts = value.split(\"->\");\r\n\t\t\tif (parts.length > 1){\r\n\t\t\t\tvalue = parts[1];\r\n\t\t\t\tmode = parts[0];\r\n\t\t\t}\r\n\t\t} else if (value && value.mode){\r\n\t\t\tmode = value.mode;\r\n\t\t\tvalue = value.url;\r\n\t\t}\r\n\r\n\t\tif (mode)\r\n\t\t\treturn proxy(mode, value);\r\n\r\n\t\treturn value;\r\n\t},\r\n\tmaster_setter:function(value){\r\n\t\tvar store = value;\r\n\t\tif (value.name != \"DataStore\")\r\n\t\t\tstore = value.data;\r\n\r\n\t\tthis._settings.store = store;\r\n\t\treturn value;\r\n\t},\r\n\t_promise:function(handler){\r\n\t\tconst prev = this._waitSave;\r\n\t\tthis._waitSave = [];\r\n\t\t\r\n\t\thandler();\r\n\t\tconst result = Promise.all(this._waitSave);\r\n\r\n\t\tthis._waitSave = prev;\r\n\t\tif (prev)\r\n\t\t\tprev.push(result);\r\n\r\n\t\treturn result;\r\n\t},\r\n\t/*! attaching onStoreUpdated event\r\n\t **/\r\n\t_after_init_call: function(){\r\n\t\tconst store = this._settings.store;\r\n\t\tif (store){\r\n\t\t\tstore.attachEvent(\"onStoreUpdated\", bind(this._onStoreUpdated, this));\r\n\t\t\tstore.attachEvent(\"onDataMove\", bind(this._onDataMove, this));\r\n\t\t}\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tvar temp = this._ignore;\r\n\t\tthis._ignore = true;\r\n\t\tcode.call((master||this));\r\n\t\tthis._ignore = temp;\r\n\t},\r\n\toff:function(){\r\n\t\tthis._ignore = true;\r\n\t},\r\n\ton:function(){\r\n\t\tthis._ignore = false;\r\n\t},\r\n\r\n\t_copy_data:function(source){\r\n\t\tvar obj = {};\r\n\t\tfor (var key in source)\t\r\n\t\t\tif (key.indexOf(\"$\")!==0)\r\n\t\t\t\tobj[key]=source[key];\r\n\t\treturn obj;\r\n\t},\r\n\tsave:function(id, operation, obj){\r\n\t\toperation = operation || \"update\";\r\n\t\treturn this._save_inner(id, obj, operation, true);\r\n\t},\r\n\t_save_inner:function(id, obj, operation, now){\r\n\t\tif (typeof id == \"object\") id = id.toString();\r\n\t\tif (!id || this._ignore === true || !operation || operation == \"paint\") return;\r\n\r\n\t\tvar store = this._settings.store;\r\n\t\tif (store){\r\n\t\t\tobj = obj || this._settings.store.getItem(id);\r\n\t\t\tif (store._scheme_serialize)\r\n\t\t\t\tobj = store._scheme_serialize(obj);\r\n\t\t}\r\n\r\n\t\tvar update = { id: id, data:this._copy_data(obj), operation:operation };\r\n\t\t//save parent id\r\n\t\tif (!isUndefined(obj.$parent)) update.data.parent = obj.$parent;\r\n\r\n\t\tif (update.operation != \"delete\"){\r\n\t\t\t//prevent saving of not-validated records\r\n\t\t\tvar master = this._settings.master;\r\n\t\t\tif (master && master.data && master.data.getMark && master.data.getMark(id, \"webix_invalid\"))\r\n\t\t\t\tupdate._invalid = true;\r\n\r\n\t\t\tif (!this.validate(null, update.data))\r\n\t\t\t\tupdate._invalid = true;\r\n\t\t}\r\n\r\n\t\tif (this._check_unique(update))\r\n\t\t\tthis._updates.push(update);\r\n\r\n\t\tif (this._settings.autoupdate || now)\r\n\t\t\treturn this._sendData(id);\r\n\t\t\t\r\n\t\treturn;\r\n\t},\r\n\t_onDataMove:function(sid, tindex, parent, targetid){\r\n\t\tif (this._settings.trackMove){\r\n\t\t\tvar obj = copy(this._settings.store.getItem(sid));\r\n\r\n\t\t\tobj.webix_move_index = tindex;\r\n\t\t\tobj.webix_move_id = targetid;\r\n\t\t\tobj.webix_move_parent = parent;\r\n\t\t\tthis._save_inner(sid, obj, \"order\");\r\n\t\t}\r\n\t},\r\n\t_onStoreUpdated: function(id, obj, operation){\r\n\t\tswitch (operation) {\r\n\t\t\tcase \"save\":\r\n\t\t\t\toperation = \"update\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"update\":\r\n\t\t\t\toperation = \"update\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"add\":\r\n\t\t\t\toperation = \"insert\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\t\toperation = \"delete\";\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn this._save_inner(id, obj, operation);\r\n\t},\r\n\t_check_unique:function(check){\r\n\t\tfor (var i = 0; i < this._updates.length; i++){\r\n\t\t\tvar one = this._updates[i];\r\n\t\t\tif (one.id == check.id && !one._in_progress){\r\n\t\t\t\tif (check.operation == \"delete\"){\r\n\t\t\t\t\tif (one.operation == \"insert\")\r\n\t\t\t\t\t\tthis._updates.splice(i,1);\r\n\t\t\t\t\telse \r\n\t\t\t\t\t\tone.operation = \"delete\";\r\n\t\t\t\t}\r\n\t\t\t\tone.data = check.data;\r\n\t\t\t\tone._invalid = check._invalid;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tsend:function(){\r\n\t\treturn this._sendData();\r\n\t},\r\n\t_sendData: function(triggerId){\r\n\t\tif (!this._settings.url)\r\n\t\t\treturn;\r\n\r\n\t\tvar wait;\r\n\t\tvar marked = this._updates;\r\n\t\tvar to_send = [];\r\n\t\tvar url = this._settings.url;\r\n\r\n\t\tfor (let i = 0; i < marked.length; i++) {\r\n\t\t\tvar tosave = marked[i];\r\n\r\n\t\t\tif (tosave._in_progress) continue;\r\n\t\t\tif (tosave._invalid) continue;\r\n\r\n\t\t\tvar id = tosave.id;\r\n\t\t\t// call to .save(id) without autoupdate mode will send the specific object only\r\n\t\t\tif (!this._settings.autoupdate && triggerId && triggerId != id)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar operation = tosave.operation;\r\n\t\t\tvar precise_url = proxy.$parse((typeof url == \"object\" && !url.$proxy) ? url[operation] : url);\r\n\t\t\tvar custom = precise_url && (precise_url.$proxy || typeof precise_url === \"function\");\r\n\r\n\t\t\tif (!precise_url) continue;\r\n\r\n\t\t\tconst store = this._settings.store;\r\n\t\t\tif (store && store._scheme_save)\r\n\t\t\t\tstore._scheme_save(tosave.data);\r\n\r\n\t\t\tif (!this.callEvent(\"onBefore\"+operation, [id, tosave]))\r\n\t\t\t\tcontinue;\r\n\t\t\ttosave._in_progress = true;\r\n\r\n\t\t\tif (!this.callEvent(\"onBeforeDataSend\", [tosave])) return;\r\n\r\n\t\t\ttosave.data = this._updatesData(tosave.data);\r\n\r\n\t\t\tlet result;\r\n\t\t\tif (precise_url.$proxy){\r\n\t\t\t\tif (precise_url.save){\r\n\t\t\t\t\t//proxy\r\n\t\t\t\t\tresult = precise_url.save(this.config.master, tosave, this);\r\n\t\t\t\t}\r\n\t\t\t\tto_send.push(tosave);\r\n\t\t\t} else {\r\n\t\t\t\tif (operation == \"insert\")\r\n\t\t\t\t\tdelete tosave.data.id;\r\n\t\t\t\t\r\n\t\t\t\tif (custom){\r\n\t\t\t\t\t//save function\r\n\t\t\t\t\tresult = precise_url.call(this.config.master, tosave.id, tosave.operation, tosave.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//normal url\r\n\t\t\t\t\ttosave.data[this._settings.operationName] = operation;\r\n\r\n\t\t\t\t\tresult = this._send(precise_url, tosave.data, this._settings.mode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (result){\r\n\t\t\t\tresult = this._proxy_on_save(result, { id: tosave.id, status: tosave.operation });\r\n\t\t\t\tif (triggerId && id === triggerId){\r\n\t\t\t\t\twait = result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterDataSend\", [tosave]);\r\n\t\t}\r\n\r\n\t\tif (url.$proxy && url.saveAll && to_send.length){\r\n\t\t\tlet result = url.saveAll(this.config.master, to_send, this);\r\n\t\t\tif (result){\r\n\t\t\t\tresult = this._proxy_on_save(result, null);\r\n\t\t\t\tif (!wait)\r\n\t\t\t\t\twait = result;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn wait;\r\n\t},\r\n\t_proxy_on_save:function(result, state){\r\n\t\tif(result){\r\n\t\t\tif(!result.then)\r\n\t\t\t\tresult = promise.resolve(result);\r\n\r\n\t\t\tresult = result.then((data) => {\r\n\t\t\t\tif (data && typeof data.json == \"function\")\r\n\t\t\t\t\tdata = data.json();\r\n\r\n\t\t\t\tvar processed;\r\n\t\t\t\tif (state === null){\r\n\t\t\t\t\tprocessed = this._processResult(data); //array of responses\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocessed = this._processResult(state, \"\", data, -1); //text, data, loader\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!processed)\r\n\t\t\t\t\tthrow processed; // trigger rejection\r\n\r\n\t\t\t\treturn processed;\r\n\t\t\t}, (x) => {\r\n\t\t\t\tthis._processError(state, \"\", null, x);\r\n\t\t\t\tthrow x;\r\n\t\t\t});\r\n\r\n\t\t\tif (this._waitSave)\r\n\t\t\t\tthis._waitSave.push(result);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t},\r\n\r\n\t/*! process updates list to POST and GET params according dataprocessor protocol\r\n\t *\t@param updates\r\n\t *\t\tlist of objects { id: \"item id\", data: \"data hash\", operation: \"type of operation\"}\r\n\t *\t@return\r\n\t *\t\tobject { post: { hash of post params as name: value }, get: { hash of get params as name: value } }\r\n\t **/\r\n\r\n\r\n\r\n\t_updatesData:function(source){\r\n\t\tvar target = {};\r\n\t\tfor (var j in source){\r\n\t\t\tif (j.indexOf(\"$\")!==0)\r\n\t\t\t\ttarget[j] = source[j];\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\r\n\r\n\r\n\t/*! send dataprocessor query to server\r\n\t *\tand attach event to process result\r\n\t *\t@param url\r\n\t *\t\tserver url\r\n\t *\t@param get\r\n\t *\t\thash of get params\r\n\t *\t@param post\r\n\t *\t\thash of post params\r\n\t *\t@mode\r\n\t *\t\t'post' or 'get'\r\n\t **/\r\n\t_send: function(url, post, mode) {\r\n\t\tassert(url, \"url was not set for DataProcessor\");\r\n\t\treturn ajax()[mode](url, post);\r\n\t},\r\n\tattachProgress:function(start, end, error){\r\n\t\tthis.attachEvent(\"onBeforeDataSend\", start);\r\n\t\tthis.attachEvent(\"onAfterSync\", end);\r\n\t\tthis.attachEvent(\"onAfterSaveError\", error);\r\n\t\tthis.attachEvent(\"onLoadError\", error);\r\n\t},\r\n\t_processError:function(id, text, data, loader){\r\n\t\tif (id)\r\n\t\t\tthis._innerProcessResult(true, id.id, false, id.status, false, {text:text, data:data, loader:loader});\r\n\t\telse {\r\n\t\t\tthis.callEvent(\"onLoadError\", arguments);\r\n\t\t\tcallEvent(\"onLoadError\", [text, data, loader, this]);\r\n\t\t}\r\n\t},\r\n\t_innerProcessResult:function(error, id, newid, status, obj, details){\r\n\t\tvar master = this._settings.master;\r\n\t\tvar update = this.getItemState(id);\r\n\t\tupdate._in_progress = false;\r\n\r\n\r\n\r\n\t\tif (error){\r\n\t\t\tif (this.callEvent(\"onBeforeSaveError\", [id, status, obj, details])){\r\n\t\t\t\tupdate._invalid = true;\r\n\t\t\t\tif(this._settings.undoOnError && master._settings.undo){\r\n\t\t\t\t\tthis.ignore(function(){\r\n\t\t\t\t\t\tmaster.undo(id);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setItemState(id, false);\r\n\t\t\t\t}\r\n\t\t\t\tthis.callEvent(\"onAfterSaveError\", [id, status, obj, details]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else\r\n\t\t\tthis.setItemState(id, false);\r\n\r\n\t\tconst store = this._settings.store;\r\n\t\tif (store && store.exists(id)){\r\n\t\t\t//update from response\r\n\t\t\tif (newid && id != newid)\r\n\t\t\t\tstore.changeId(id, newid);\r\n\r\n\t\t\tif (obj && status != \"delete\" && this._settings.updateFromResponse)\r\n\t\t\t\tthis.ignore(function(){\t\t\t\t\r\n\t\t\t\t\tstore.updateItem(newid || id, obj);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\t\r\n\r\n\t\t//clean undo history, for the saved record\r\n\t\tif(this._settings.undoOnError && master._settings.undo)\r\n\t\t\tmaster.removeUndo(newid||id);\r\n\r\n\t\tthis.callEvent(\"onAfterSave\",[obj, id, details]);\r\n\t\tthis.callEvent(\"onAfter\"+status, [obj, id, details]);\r\n\r\n\t\treturn obj || {};\r\n\t},\r\n\tprocessResult: function(state, hash, details){\r\n\t\t//compatibility with custom json response\r\n\t\tvar error = (hash && (hash.status == \"error\" || hash.status == \"invalid\"));\r\n\t\tvar newid = (hash ? ( hash.newid || hash.id ) : false);\r\n\r\n\t\treturn this._innerProcessResult(error, state.id, newid, state.status, hash, details);\r\n\t},\r\n\t// process saving from result\r\n\t_processResult: function(state, text, data, loader){\r\n\t\tvar finalResult;\r\n\t\tthis.callEvent(\"onBeforeSync\", [state, text, data, loader]);\r\n\r\n\t\tif(isArray(state)){ //saveAll results\r\n\t\t\tfinalResult = [];\r\n\t\t\tstate.forEach((one) => {\r\n\t\t\t\tfinalResult.push(this.processResult(one, one, {}));\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif (loader === -1){\r\n\t\t\t\t//callback from promise\r\n\t\t\t\tfinalResult = this.processResult(state, data, {});\r\n\t\t\t} else {\r\n\t\t\t\tvar proxy = this._settings.url;\r\n\t\t\t\tif (proxy.$proxy && proxy.result){\r\n\t\t\t\t\tfinalResult = proxy.result(state, this._settings.master, this, text,  data, loader) || {};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar hash;\r\n\t\t\t\t\tif (text){\r\n\t\t\t\t\t\thash = data.json();\r\n\t\t\t\t\t\t//invalid response\r\n\t\t\t\t\t\tif (text && (hash === null || typeof hash == \"undefined\"))\r\n\t\t\t\t\t\t\thash = { status:\"error\" };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfinalResult = this.processResult(state, hash,  {text:text, data:data, loader:loader});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterSync\", [state, text, data, loader]);\r\n\t\treturn finalResult;\r\n\t},\r\n\r\n\r\n\t/*! if it's defined escape function - call it\r\n\t *\t@param value\r\n\t *\t\tvalue to escape\r\n\t *\t@return\r\n\t *\t\tescaped value\r\n\t **/\r\n\tescape: function(value) {\r\n\t\tif (this._settings.escape)\r\n\t\t\treturn this._settings.escape(value);\r\n\t\telse\r\n\t\t\treturn encodeURIComponent(value);\r\n\t},\r\n\tgetState:function(){\r\n\t\tif (!this._updates.length) return false;\r\n\t\tfor (var i = this._updates.length - 1; i >= 0; i--)\r\n\t\t\tif (this._updates[i]._in_progress)\r\n\t\t\t\treturn \"saving\";\r\n\r\n\t\treturn true;\r\n\t},\r\n\tgetItemState:function(id){\r\n\t\tvar index = this._get_stack_index(id);\r\n\t\treturn this._updates[index] || null;\r\n\t},\r\n\tsetItemState:function(id, state){\r\n\t\tif (state){\r\n\t\t\tthis._save_inner(id, null, \"update\");\r\n\t\t} else{\r\n\t\t\tvar index = this._get_stack_index(id);\r\n\t\t\tif (index > -1)\r\n\t\t\t\tthis._updates.splice(index, 1);\r\n\t\t}\r\n\t},\r\n\t_get_stack_index: function(id) {\r\n\t\tvar index = -1;\r\n\t\tfor (var i=0; i < this._updates.length; i++)\r\n\t\t\tif (this._updates[i].id == id) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\treturn index;\r\n\t}\r\n\r\n}, Settings, EventSystem, ValidateData);","import {extend, _to_array, uid, isUndefined, copy, isArray, bind} from \"../webix/helpers\";\r\nimport {$$} from \"../ui/core\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nimport EventSystem from \"./eventsystem\";\r\nimport DataDriver from \"../load/drivers/index\";\r\n\r\n\r\n\r\n\r\n/*\r\n\tDataStore is not a behavior, it standalone object, which represents collection of data.\r\n\tCall provideAPI to map data API\r\n\r\n\t@export\r\n\t\texists\r\n\t\tgetIdByIndex\r\n\t\tgetIndexById\r\n\t\tget\r\n\t\tset\r\n\t\trefresh\r\n\t\tcount\r\n\t\tsort\r\n\t\tfilter\r\n\t\tnext\r\n\t\tprevious\r\n\t\tclearAll\r\n\t\tfirst\r\n\t\tlast\r\n*/\r\n\r\nfunction DataStore(){\r\n\tthis.name = \"DataStore\";\r\n\t\r\n\textend(this, EventSystem);\r\n\r\n\tthis.setDriver(\"json\");\t//default data source is an\r\n\tthis.pull = {};\t\t\t\t\t\t//hash of IDs\r\n\tthis.order = _to_array();\t\t//order of IDs\r\n\tthis._marks = {};\r\n}\r\n\r\nDataStore.prototype={\r\n\t//defines type of used data driver\r\n\t//data driver is an abstraction other different data formats - xml, json, csv, etc.\r\n\tsetDriver:function(type){\r\n\t\tassert(DataDriver[type],\"incorrect DataDriver\");\r\n\t\tthis.driver = DataDriver[type];\r\n\t},\r\n\t//process incoming raw data\r\n\t_parse:function(data){\r\n\t\tthis.callEvent(\"onParse\", [this.driver, data]);\r\n\r\n\t\tif (this._filter_order)\r\n\t\t\tthis.filter();\r\n\t\r\n\t\t//get size and position of data\r\n\t\tvar info = this.driver.getInfo(data);\r\n\r\n\t\tif (info.config)\r\n\t\t\tthis.callEvent(\"onServerConfig\",[info.config]);\r\n\r\n\t\tvar options = this.driver.getOptions(data);\r\n\t\tif (options)\r\n\t\t\tthis.callEvent(\"onServerOptions\", [options]);\r\n\r\n\t\t//get array of records\r\n\t\tvar recs = this.driver.getRecords(data);\r\n\r\n\t\tthis._inner_parse(info, recs);\r\n\r\n\t\t//in case of tree store we may want to group data\r\n\t\tif (this._scheme_group && this._group_processing && !this._not_grouped_order)\r\n\t\t\tthis._group_processing(this._scheme_group);\r\n\r\n\t\t//optional data sorting\r\n\t\tif (this._scheme_sort){\r\n\t\t\tthis.blockEvent();\r\n\t\t\tthis.sort(this._scheme_sort);\r\n\t\t\tthis.unblockEvent();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreLoad\",[this.driver, data]);\r\n\t\t//repaint self after data loading\r\n\t\tthis.refresh();\r\n\t},\r\n\t_inner_parse:function(info, recs){\r\n\t\tvar from = info.from;\r\n\t\tvar subload = true;\r\n\t\tvar marks = false;\r\n\r\n\t\t//some data is loaded and new data doesn't have \"pos\" - assuming update\r\n\t\tif (!from && from !== 0 && this.order[0]){\r\n\t\t\tif (this._removeMissed){\r\n\t\t\t\t//update mode, create kill list\r\n\t\t\t\tmarks = {};\r\n\t\t\t\tfor (let i=0; i<this.order.length; i++)\r\n\t\t\t\t\tmarks[this.order[i]]=true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsubload = false;\r\n\t\t\tfrom = this.order.length;\r\n\t\t} else \r\n\t\t\tfrom = (from || 0)*1;\r\n\r\n\t\tvar j=0;\r\n\t\tfor (let i=0; i<recs.length; i++){\r\n\t\t\t//get hash of details for each record\r\n\t\t\tvar temp = this.driver.getDetails(recs[i]);\r\n\t\t\tvar id = this.id(temp); \t//generate ID for the record\r\n\t\t\tif (!this.pull[id]){\t\t//if such ID already exists - update instead of insert\r\n\t\t\t\tthis.order[j+from]=id;\t\r\n\t\t\t\tj++;\r\n\t\t\t} else if (subload && this.order[j+from])\r\n\t\t\t\tj++;\r\n\r\n\t\t\tif(this.pull[id]){\r\n\t\t\t\textend(this.pull[id],temp,true);//add only new properties\r\n\t\t\t\tif (this._scheme_update)\r\n\t\t\t\t\tthis._scheme_update(this.pull[id]);\r\n\t\t\t\t//update mode, remove item from kill list\r\n\t\t\t\tif (marks)\r\n\t\t\t\t\tdelete marks[id];\r\n\t\t\t} else{\r\n\t\t\t\tthis.pull[id] = temp;\r\n\t\t\t\tif (this._scheme_init)\r\n\t\t\t\t\tthis._scheme_init(temp);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t//update mode, delete items which are not existing in the new xml\r\n\t\tif (marks){\r\n\t\t\tthis.blockEvent();\r\n\t\t\tfor (var delid in marks)\r\n\t\t\t\tthis.remove(delid);\r\n\t\t\tthis.unblockEvent();\r\n\t\t}\r\n\r\n\t\tvar endpos = info.size * 1;\r\n\t\tif (endpos) {\r\n\t\t\tif (!this.order[endpos-1])\r\n\t\t\t\tthis.order[endpos-1] = undefined;\r\n\t\t\tif (endpos < this.order.length)\r\n\t\t\t\tthis.order = this.order.slice(0, endpos);\r\n\t\t}\r\n\t},\r\n\t//generate id for data object\r\n\tid:function(data){\r\n\t\treturn data.id||(data.id=uid());\r\n\t},\r\n\tchangeId:function(old, newid){\r\n\t\t//assert(this.pull[old],\"Can't change id, for non existing item: \"+old);\r\n\t\tif(old == newid) return;\r\n\t\t\r\n\t\tif(this.pull[old])\r\n\t\t\tthis.pull[newid] = this.pull[old];\r\n\t\t\r\n\t\tthis.pull[newid].id = newid;\r\n\t\tthis.order[this.order.find(old)]=newid;\r\n\t\tif (this._filter_order)\r\n\t\t\tthis._filter_order[this._filter_order.find(old)]=newid;\r\n\t\tif (this._marks[old]){\r\n\t\t\tthis._marks[newid] = this._marks[old];\r\n\t\t\tdelete this._marks[old];\r\n\t\t}\r\n\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [old, newid]);\r\n\t\tif (this._render_change_id)\r\n\t\t\tthis._render_change_id(old, newid);\r\n\t\tdelete this.pull[old];\r\n\t},\r\n\t//get data from hash by id\r\n\tgetItem:function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\t//assigns data by id\r\n\tupdateItem:function(id, update, mode){\r\n\t\tif (typeof id === \"object\")\r\n\t\t\tid = id.toString();\r\n\r\n\t\tvar data = this.getItem(id);\r\n\t\tvar old = null;\r\n\r\n\t\t//check is change tracking active\r\n\t\tvar changeTrack = this.hasEvent(\"onDataUpdate\");\r\n\t\r\n\t\tassert(data, \"Invalid ID for updateItem\");\r\n\t\tassert(!update || !update.id || update.id == id, \"Attempt to change ID in updateItem\");\r\n\t\tif (!isUndefined(update) && data !== update){\r\n\t\t\t//preserve original object\r\n\t\t\tif (changeTrack)\r\n\t\t\t\told = copy(data);\r\n\r\n\t\t\tid = data.id;\t//preserve id\r\n\t\t\textend(data, update, true);\r\n\t\t\tdata.id = id;\r\n\t\t}\r\n\r\n\t\tif (this._scheme_update)\r\n\t\t\tthis._scheme_update(data);\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",[id, data, (mode||\"update\")]);\r\n\r\n\t\tif (changeTrack)\r\n\t\t\tthis.callEvent(\"onDataUpdate\", [id, data, old]);\r\n\t},\r\n\t//sends repainting signal\r\n\trefresh:function(id){\r\n\t\tif (this._skip_refresh) return; \r\n\t\t\r\n\t\tif (id){\r\n\t\t\tif (this.exists(id))\r\n\t\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\t}else\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\t//converts range IDs to array of all IDs between them\r\n\tgetRange:function(from,to){\t\t\r\n\t\t//if some point is not defined - use first or last id\r\n\t\t//BEWARE - do not use empty or null ID\r\n\t\tif (from)\r\n\t\t\tfrom = this.getIndexById(from);\r\n\t\telse \r\n\t\t\tfrom = (this.$min||this.startOffset)||0;\r\n\t\tif (to)\r\n\t\t\tto = this.getIndexById(to);\r\n\t\telse {\r\n\t\t\tto = this.$max === 0 ? 0 : Math.min((this.$max?this.$max-1:(this.endOffset||Infinity)),(this.count()-1));\r\n\t\t\tif (to<0) to = 0; //we have not data in the store\r\n\t\t}\r\n\r\n\t\tif (from>to){ //can be in case of backward shift-selection\r\n\t\t\tvar a=to; to=from; from=a;\r\n\t\t}\r\n\r\n\t\treturn this.getIndexRange(from,to);\r\n\t},\r\n\t//converts range of indexes to array of all IDs between them\r\n\tgetIndexRange:function(from,to){\r\n\t\tto=Math.min((to === 0 ? 0 :(to||Infinity)),this.count()-1);\r\n\t\t\r\n\t\tvar ret=_to_array(); //result of method is rich-array\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.order[i]));\r\n\t\treturn ret;\r\n\t},\r\n\t//returns total count of elements\r\n\tcount:function(){\r\n\t\treturn this.order.length;\r\n\t},\r\n\t//returns truy if item with such ID exists\r\n\texists:function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\t//nextmethod is not visible on component level, check DataMove.move\r\n\t//moves item from source index to the target index\r\n\tmove:function(sindex,tindex){\r\n\t\tassert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\t\tif (sindex == tindex) return;\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\r\n\t\tif (this._filter_order)\r\n\t\t\tthis._move_inner(this._filter_order, 0, 0, this.getIdByIndex(sindex), this.getIdByIndex(tindex));\r\n\r\n\t\tthis._move_inner(this.order, sindex, tindex);\r\n\t\t\r\n\t\t\r\n\t\t//repaint signal\r\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"move\"]);\r\n\t},\r\n\t_move_inner:function(col, sindex, tindex, sid, tid){\r\n\t\tif (sid||tid){\r\n\t\t\tsindex = tindex = -1;\r\n\t\t\tfor (var i=0; i<col.length; i++){\r\n\t\t\t\tif (col[i] == sid && sindex<0)\r\n\t\t\t\t\tsindex = i;\r\n\t\t\t\tif (col[i] == tid && tindex<0)\r\n\t\t\t\t\ttindex = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar id = col[sindex];\r\n\t\tcol.removeAt(sindex);\t//remove at old position\r\n\t\tcol.insertAt(id,Math.min(col.length, tindex));\t//insert at new position\r\n\t},\r\n\tscheme:function(config){\r\n\t\tthis._scheme = {};\r\n\t\tthis._scheme_save = config.$save;\r\n\t\tthis._scheme_init = config.$init||config.$change;\r\n\t\tthis._scheme_update = config.$update||config.$change;\r\n\t\tthis._scheme_serialize = config.$serialize;\r\n\t\tthis._scheme_group = config.$group;\r\n\t\tthis._scheme_sort = config.$sort;\r\n\t\tthis._scheme_export = config.$export;\r\n\r\n\t\t//ignore $-starting properties, as they have special meaning\r\n\t\tfor (var key in config)\r\n\t\t\tif (key.substr(0,1) != \"$\")\r\n\t\t\t\tthis._scheme[key] = config[key];\r\n\t},\r\n\timportData:function(target, silent){\r\n\t\tvar data = target ? (target.data || target) : [];\r\n\t\tthis._filter_order = null;\r\n\r\n\t\tif (typeof data.serialize == \"function\"){\r\n\t\t\tthis.order = _to_array([].concat(data.order));\r\n\r\n\t\t\t//make full copy, to preserve object properties\r\n\t\t\t//[WE-CAN-DO-BETTER]\r\n\t\t\tif (this._make_full_copy){\r\n\t\t\t\tthis._make_full_copy = false;\r\n\t\t\t\tvar oldpull = this.pull;\r\n\t\t\t\tthis.pull = {};\r\n\t\t\t\tfor (let key in data.pull){\r\n\t\t\t\t\tvar old = oldpull[key];\r\n\t\t\t\t\tthis.pull[key] = copy(data.pull[key]);\r\n\t\t\t\t\tif (old && old.open) this.pull[key].open = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.pull = {};\r\n\t\t\t\tfor (let key in data.pull)\r\n\t\t\t\t\tthis.pull[key] = data.pull[key];\r\n\t\t\t}\r\n\r\n\t\t\tif (data.branch && this.branch){\r\n\t\t\t\tthis.branch = copy(data.branch);\r\n\t\t\t\tthis._filter_branch = null;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthis.order = _to_array();\r\n\t\t\tthis.pull = {};\r\n\t\t\tvar id, obj;\r\n\r\n\t\t\tif (isArray(target))\r\n\t\t\t\tfor (let key=0; key<target.length; key++){\r\n\t\t\t\t\tobj = id = target[key];\r\n\t\t\t\t\tif (typeof obj == \"object\")\r\n\t\t\t\t\t\tobj.id  = obj.id || uid();\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tobj = { id:id, value:id };\r\n\r\n\t\t\t\t\tthis.order.push(obj.id);\r\n\t\t\t\t\tif (this._scheme_init)\r\n\t\t\t\t\t\tthis._scheme_init(obj);\r\n\t\t\t\t\tthis.pull[obj.id] = obj;\r\n\t\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tfor (let key in data){\r\n\t\t\t\t\tthis.order.push(key);\r\n\t\t\t\t\tthis.pull[key] = { id:key, value: data[key] };\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tif (this._extraParser && !data.branch){\r\n\t\t\tthis.branch = { 0:[]};\r\n\t\t\tif (!this._datadriver_child)\r\n\t\t\t\tthis._set_child_scheme(\"data\");\r\n\r\n\t\t\tfor (var i = 0; i<this.order.length; i++){\r\n\t\t\t\tvar key = this.order[i];\r\n\t\t\t\tthis._extraParser(this.pull[key], 0, 0, false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreLoad\",[]);\r\n\t\tif (!silent)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[]);\r\n\t},\r\n\tsync:function(source, filter, silent){\r\n\t\tthis.unsync();\r\n\r\n\t\tvar type = typeof source;\r\n\t\tif (type == \"string\")\r\n\t\t\tsource = $$(source);\r\n\r\n\t\tif (type != \"function\" && type != \"object\"){\r\n\t\t\tsilent = filter;\r\n\t\t\tfilter = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (source.name != \"DataStore\" && source.name != \"TreeStore\"){\r\n\t\t\tif (source.data && (source.data.name === \"DataStore\" || source.data.name === \"TreeStore\"))\r\n\t\t\t\tsource = source.data;\r\n\t\t\telse {\r\n\t\t\t\tthis._sync_source = source;\r\n\t\t\t\treturn callEvent(\"onSyncUnknown\", [this, source, filter]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar\tsync_logic = bind(function(id, data, mode){\r\n\t\t\tif (this._skip_next_sync) return;\r\n\r\n\t\t\t//sync of tree-structure with after-filtering\r\n\t\t\t//we need to make a full copy, to preserve $count\r\n\t\t\t//[WE-CAN-DO-BETTER]\r\n\t\t\tif (filter && this.branch) this._make_full_copy = true;\r\n\t\t\tthis.importData(source, true);\r\n\t\t\t\r\n\t\t\tif (filter)\r\n\t\t\t\tthis.silent(filter);\r\n\t\t\tif (this._on_sync)\r\n\t\t\t\tthis._on_sync();\r\n\r\n\t\t\tif(!(id && data && mode) && !this.count())//clearall\r\n\t\t\t\tthis._marks = {};\r\n\t\t\tif(mode ==\"delete\" && this._marks[id])\r\n\t\t\t\tdelete this._marks[id];\r\n\r\n\t\t\tthis.callEvent(\"onSyncApply\",[]);\r\n\r\n\t\t\tif (!silent) \r\n\t\t\t\tthis.refresh();\r\n\t\t\telse\r\n\t\t\t\tsilent = false;\r\n\t\t}, this);\r\n\r\n\r\n\r\n\t\tthis._sync_events = [\r\n\t\t\tsource.attachEvent(\"onStoreUpdated\", sync_logic),\r\n\t\t\tsource.attachEvent(\"onIdChange\", bind(function(old, nid){ this.changeId(old, nid); this.refresh(nid); }, this))\r\n\t\t];\r\n\t\tthis._sync_source = source;\r\n\r\n\t\t//backward data saving\r\n\t\tthis._back_sync_handler = this.attachEvent(\"onStoreUpdated\", function(id, data, mode){\r\n\t\t\tif (mode == \"update\" || mode == \"save\"){\r\n\t\t\t\tthis._skip_next_sync = 1;\r\n\t\t\t\tsource.updateItem(id, data);\r\n\t\t\t\tthis._skip_next_sync = 0;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsync_logic();\r\n\t},\r\n\tunsync:function(){\r\n\t\tif (this._sync_source){\r\n\t\t\tvar source = this._sync_source;\r\n\r\n\t\t\tif ((source.name != \"DataStore\" && source.name != \"TreeStore\") &&\r\n\t\t\t\t\t(!source.data || source.data.name != \"DataStore\" || source.data.name != \"TreeStore\")){\r\n\t\t\t\t//data sync with external component\r\n\t\t\t\tcallEvent(\"onUnSyncUnknown\", [this, source]);\r\n\t\t\t} else {\r\n\t\t\t\t//data sync with webix component\r\n\t\t\t\tfor (var i = 0; i < this._sync_events.length; i++)\r\n\t\t\t\t\tsource.detachEvent(this._sync_events[i]);\r\n\t\t\t\tthis.detachEvent(this._back_sync_handler);\r\n\t\t\t}\r\n\r\n\t\t\tthis._sync_source = null;\r\n\t\t}\r\n\t},\r\n\tdestructor:function(){\r\n\t\tthis.unsync();\r\n\r\n\t\tthis.pull = this.order = this._marks = null;\r\n\t\tthis._evs_events = this._evs_handlers = {};\r\n\t},\r\n\t//adds item to the store\r\n\tadd:function(obj,index){\r\n\t\t//default values\t\t\r\n\t\tif (this._scheme)\r\n\t\t\tfor (var key in this._scheme)\r\n\t\t\t\tif (isUndefined(obj[key]))\r\n\t\t\t\t\tobj[key] = this._scheme[key];\r\n\t\t\r\n\t\tif (this._scheme_init)\r\n\t\t\tthis._scheme_init(obj);\r\n\t\t\r\n\t\t//generate id for the item\r\n\t\tvar id = this.id(obj);\r\n\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\tvar order = arguments[2]||this.order;\r\n\t\t\r\n\t\t//by default item is added to the end of the list\r\n\t\tvar data_size = order.length;\r\n\t\t\r\n\t\tif (isUndefined(index) || index < 0)\r\n\t\t\tindex = data_size; \r\n\t\t//check to prevent too big indexes\t\t\t\r\n\t\tif (index > data_size){\r\n\t\t\tassert(0, \"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\tindex = Math.min(order.length,index);\r\n\t\t}\r\n\t\tif (this.callEvent(\"onBeforeAdd\", [id, obj, index]) === false) return false;\r\n\r\n\t\tassert(!this.exists(id), \"Not unique ID\");\r\n\t\t\r\n\t\tthis.pull[id]=obj;\r\n\t\torder.insertAt(id,index);\r\n\t\tif (this._filter_order){\t//adding during filtering\r\n\t\t\t//we can't know the location of new item in full dataset, making suggestion\r\n\t\t\t//put at end of original dataset by default\r\n\t\t\tvar original_index = this._filter_order.length;\r\n\t\t\t//if some data exists, put at the same position in original and filtered lists\r\n\t\t\tif (this.order.length)\r\n\t\t\t\toriginal_index = Math.min((index || 0), original_index);\r\n\r\n\t\t\tthis._filter_order.insertAt(id,original_index);\r\n\t\t}\r\n\t\t\r\n\t\t//repaint signal\r\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"add\"]);\r\n\t\tthis.callEvent(\"onAfterAdd\",[id,index]);\r\n\r\n\t\treturn obj.id;\r\n\t},\r\n\t\r\n\t//removes element from datastore\r\n\tremove:function(id){\r\n\t\t//id can be an array of IDs - result of getSelect, for example\r\n\t\tif (isArray(id)){\r\n\t\t\tfor (var i=0; i < id.length; i++)\r\n\t\t\t\tthis.remove(id[i]);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onBeforeDelete\",[id]) === false) return false;\r\n\t\t\r\n\t\tassert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\t//clear from collections\r\n\t\tthis.order.remove(id);\r\n\t\tif (this._filter_order) \r\n\t\t\tthis._filter_order.remove(id);\r\n\t\t\t\r\n\t\tdelete this.pull[id];\r\n\t\tif (this._marks[id])\r\n\t\t\tdelete this._marks[id];\r\n\r\n\t\t//repaint signal\r\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"delete\"]);\r\n\t\tthis.callEvent(\"onAfterDelete\",[id]);\r\n\t},\r\n\t//deletes all records in datastore\r\n\tclearAll:function(soft){\r\n\t\t//instead of deleting one by one - just reset inner collections\r\n\t\tthis.pull = {};\r\n\t\tthis._marks = {};\r\n\t\tthis.order = _to_array();\r\n\t\t//this.feed = null;\r\n\t\tthis._filter_order = null;\r\n\t\tif (!soft)\r\n\t\t\tthis.url = null;\r\n\t\tthis.callEvent(\"onClearAll\",[soft]);\r\n\t\tthis.refresh();\r\n\t},\r\n\t//converts index to id\r\n\tgetIdByIndex:function(index){\r\n\t\tassert(index >= 0,\"DataStore::getIdByIndex Incorrect index\");\r\n\t\treturn this.order[index];\r\n\t},\r\n\t//converts id to index\r\n\tgetIndexById:function(id){\r\n\t\tif (!this.pull[id])\r\n\t\t\treturn -1;\r\n\t\telse\r\n\t\t\treturn this.order.find(id);\t//slower than getIdByIndex\r\n\t},\r\n\t//returns ID of next element\r\n\tgetNextId:function(id,step){\r\n\t\treturn this.order[this.getIndexById(id)+(step||1)];\r\n\t},\r\n\t//returns ID of first element\r\n\tgetFirstId:function(){\r\n\t\treturn this.order[0];\r\n\t},\r\n\t//returns ID of last element\r\n\tgetLastId:function(){\r\n\t\treturn this.order[this.order.length-1];\r\n\t},\r\n\t//returns ID of previous element\r\n\tgetPrevId:function(id,step){\r\n\t\treturn this.order[this.getIndexById(id)-(step||1)];\r\n\t},\r\n\t/*\r\n\t\tsort data in collection\r\n\t\t\tby - settings of sorting\r\n\r\n\t\tor\r\n\t\t\tby - array of settings\r\n\r\n\t\tor\r\n\r\n\t\t\tby - sorting function\r\n\t\t\tdir - \"asc\" or \"desc\"\r\n\r\n\t\tor\r\n\r\n\t\t\tby - property\r\n\t\t\tdir - \"asc\" or \"desc\"\r\n\t\t\tas - type of sortings\r\n\r\n\t\tSorting function will accept 2 parameters and must return 1,0,-1, based on desired order\r\n\t*/\r\n\tsort:function(by, dir, as){\r\n\t\tlet parameters;\r\n\t\tlet sort = by;\r\n\r\n\t\tif (isArray(sort)){\r\n\t\t\tsort = sort.map(a => this._sort_init(a));\r\n\t\t\tparameters = [sort];\r\n\t\t} else {\r\n\t\t\tsort = this._sort_init(by, dir, as);\r\n\t\t\tparameters = [sort.by, sort.dir, sort.as, sort];\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onBeforeSort\", parameters)) return;\r\n\t\tconst sorter = this.sorting.create(sort);\r\n\r\n\t\tthis.order = this._sort_core(sorter, this.order);\r\n\t\tif (this._filter_order && this._filter_order.length != this.order.length)\r\n\t\t\tthis._filter_order = this._sort_core(sorter, this._filter_order);\r\n\r\n\t\t//repaint self\r\n\t\tthis.refresh();\r\n\t\t\r\n\t\tthis.callEvent(\"onAfterSort\", parameters);\r\n\t},\r\n\t_sort_init:function(by, dir, as){\r\n\t\tlet sort = by;\r\n\r\n\t\tif (typeof by == \"function\")\r\n\t\t\tsort = {as:by, dir:dir};\r\n\t\telse if (typeof by == \"string\")\r\n\t\t\tsort = {by:by, dir:dir, as:as};\r\n\r\n\t\tif (typeof sort.by == \"string\")\r\n\t\t\tsort.by = sort.by.replace(/#/g,\"\");\r\n\r\n\t\treturn sort;\r\n\t},\r\n\t_sort_core:function(sorter, order){\r\n\t\tif (this.order.length){\r\n\t\t\tvar pre = order.splice(0, this.$freeze);\r\n\t\t\t//get array of IDs\r\n\t\t\tvar neworder = _to_array();\r\n\t\t\tfor (var i=order.length-1; i>=0; i--)\r\n\t\t\t\tneworder[i] = this.pull[order[i]];\r\n\r\n\t\t\tneworder.sort(sorter);\r\n\t\t\treturn _to_array(pre.concat(neworder.map(function(obj){ \r\n\t\t\t\tassert(obj, \"Client sorting can't be used with dynamic loading\");\r\n\t\t\t\treturn this.id(obj);\r\n\t\t\t},this)));\r\n\t\t}\r\n\t\treturn order;\r\n\t},\r\n\t/*\r\n\t\tFilter datasource\r\n\t\t\r\n\t\ttext - property, by which filter\r\n\t\tvalue - filter mask\r\n\t\t\r\n\t\tor\r\n\t\t\r\n\t\ttext  - filter method\r\n\t\t\r\n\t\tFilter method will receive data object and must return true or false\r\n\t*/\r\n\t_filter_reset:function(preserve){\r\n\t\t//remove previous filtering , if any\r\n\t\tif (this._filter_order && !preserve){\r\n\t\t\tthis.order = this._filter_order;\r\n\t\t\tdelete this._filter_order;\r\n\t\t}\r\n\t},\r\n\t_filter_core:function(filter, value, preserve){\r\n\t\tvar neworder = _to_array();\r\n\t\tvar freeze = this.$freeze || 0;\r\n\t\t\r\n\t\tfor (var i=0; i < this.order.length; i++){\r\n\t\t\tvar id = this.order[i];\r\n\t\t\tif (i < freeze || filter(this.getItem(id),value))\r\n\t\t\t\tneworder.push(id);\r\n\t\t}\r\n\t\t//set new order of items, store original\r\n\t\tif (!preserve ||  !this._filter_order)\r\n\t\t\tthis._filter_order = this.order;\r\n\t\tthis.order = neworder;\r\n\t},\r\n\tfind:function(config, first){\r\n\t\tvar result = [];\r\n\r\n\t\tfor(var i in this.pull){\r\n\t\t\tvar data = this.pull[i];\r\n\r\n\t\t\tvar match = true;\r\n\t\t\tif (typeof config == \"object\"){\r\n\t\t\t\tfor (var key in config)\r\n\t\t\t\t\tif (data[key] != config[key]){\r\n\t\t\t\t\t\tmatch = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t} else if (!config(data))\r\n\t\t\t\tmatch = false;\r\n\r\n\t\t\tif (match)\r\n\t\t\t\tresult.push(data);\r\n\t\t\t\r\n\t\t\tif (first && result.length)\r\n\t\t\t\treturn result[0];\r\n\t\t}\r\n\r\n\t\treturn first ? null : result;\r\n\t},\r\n\tfilter:function(text,value,preserve){\r\n\t\t//unfilter call but we already in not-filtered state\r\n\t\tif (!text && !this._filter_order && !this._filter_branch) return;\r\n\t\tif (!this.callEvent(\"onBeforeFilter\", [text, value])) return;\r\n\t\t\r\n\t\tthis._filter_reset(preserve);\r\n\t\tif (!this.order.length) return;\r\n\t\t\r\n\t\t//if text not define -just unfilter previous state and exit\r\n\t\tif (text){\r\n\t\t\tvar filter = text;\r\n\t\t\tvalue = value||\"\";\r\n\t\t\tif (typeof text == \"string\"){\r\n\t\t\t\ttext = text.replace(/#/g,\"\");\r\n\t\t\t\tif (typeof value == \"function\")\r\n\t\t\t\t\tfilter = function(obj){\r\n\t\t\t\t\t\treturn value(obj[text]);\r\n\t\t\t\t\t};\r\n\t\t\t\telse{\r\n\t\t\t\t\tvalue = value.toString().toLowerCase();\r\n\t\t\t\t\tfilter = function(obj,value){\t//default filter - string start from, case in-sensitive\r\n\t\t\t\t\t\tassert(obj, \"Client side filtering can't be used with dynamic loading\");\r\n\t\t\t\t\t\treturn (obj[text]||\"\").toString().toLowerCase().indexOf(value)!=-1;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._filter_core(filter, value, preserve, this._filterMode);\r\n\t\t}\r\n\t\t//repaint self\r\n\t\tthis.refresh();\r\n\t\t\r\n\t\tthis.callEvent(\"onAfterFilter\", []);\r\n\t},\r\n\t/*\r\n\t\tIterate through collection\r\n\t*/\r\n\t_obj_array:function(){\r\n\t\tvar data = [];\r\n\t\tfor (var i = this.order.length - 1; i >= 0; i--)\r\n\t\t\tdata[i]=this.pull[this.order[i]];\r\n\r\n\t\treturn data;\r\n\t},\r\n\teach:function(method, master, all){\r\n\t\tvar order = this.order;\r\n\t\tif (all)\r\n\t\t\torder = this._filter_order || order;\r\n\r\n\t\tfor (var i=0; i<order.length; i++){\r\n\t\t\tif(order[i])\r\n\t\t\t\tmethod.call((master||this), this.getItem(order[i]), i);\r\n\t\t}\r\n\t},\r\n\t_methodPush:function(object,method){\r\n\t\treturn function(){ return object[method].apply(object,arguments); };\r\n\t},\r\n\t/*\r\n\t\tmap inner methods to some distant object\r\n\t*/\r\n\tprovideApi:function(target,eventable){\r\n\t\t\t\r\n\t\tif (eventable){\r\n\t\t\tthis.mapEvent({\r\n\t\t\t\tonbeforesort:\ttarget,\r\n\t\t\t\tonaftersort:\ttarget,\r\n\t\t\t\tonbeforeadd:\ttarget,\r\n\t\t\t\tonafteradd:\t\ttarget,\r\n\t\t\t\tonbeforedelete:\ttarget,\r\n\t\t\t\tonafterdelete:\ttarget,\r\n\t\t\t\tondataupdate:\ttarget/*,\r\n\t\t\t\tonafterfilter:\ttarget,\r\n\t\t\t\tonbeforefilter:\ttarget*/\r\n\t\t\t});\r\n\t\t}\r\n\t\t\t\r\n\t\tvar list = [\"sort\",\"add\",\"remove\",\"exists\",\"getIdByIndex\",\"getIndexById\",\"getItem\",\"updateItem\",\"refresh\",\"count\",\"filter\",\"find\",\"getNextId\",\"getPrevId\",\"clearAll\",\"getFirstId\",\"getLastId\",\"serialize\",\"sync\"];\r\n\t\tfor (var i=0; i < list.length; i++)\r\n\t\t\ttarget[list[i]] = this._methodPush(this,list[i]);\r\n\t},\r\n\taddMark:function(id, mark, css, value, silent){\r\n\t\tvar obj = this._marks[id]||{};\r\n\t\tthis._marks[id] = obj;\r\n\t\tif (!obj[mark]){\r\n\t\t\tobj[mark] = value||true;\t\r\n\t\t\tif (css){\r\n\t\t\t\tvar old_css = obj.$css||\"\";\r\n\t\t\t\tobj.$css = old_css+\" \"+mark;\r\n\t\t\t}\r\n\t\t\tif (!silent)\r\n\t\t\t\tthis.refresh(id);\r\n\t\t}\r\n\t\treturn obj[mark];\r\n\t},\r\n\tremoveMark:function(id, mark, css, silent){\r\n\t\tvar obj = this._marks[id];\r\n\t\tif (obj){\r\n\t\t\tif (obj[mark])\r\n\t\t\t\tdelete obj[mark];\r\n\t\t\tif (css){\r\n\t\t\t\tvar current_css = obj.$css;\r\n\t\t\t\tif (current_css){\r\n\t\t\t\t\tobj.$css = current_css.replace(mark, \"\").replace(\"  \",\" \");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!silent) \r\n\t\t\t\tthis.refresh(id);\r\n\t\t}\r\n\t},\r\n\tgetMark:function(id, mark){\r\n\t\tvar obj = this._marks[id];\r\n\t\treturn (obj?obj[mark]:false);\r\n\t},\r\n\tclearMark:function(name, css, silent){\r\n\t\tfor (var id in this._marks){\r\n\t\t\tvar obj = this._marks[id];\r\n\t\t\tif (obj[name]){\r\n\t\t\t\tdelete obj[name];\r\n\t\t\t\tif (css && obj.$css)\r\n\t\t\t\t\tobj.$css = obj.$css.replace(name, \"\").replace(\"  \",\" \");\r\n\t\t\t\tif (!silent)\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t}\r\n\t\t}\r\n\t},\t\r\n\t/*\r\n\t\tserializes data to a json object\r\n\t*/\r\n\tserialize: function(all){\r\n\t\tvar ids = this.order;\r\n\t\tif (all && this._filter_order)\r\n\t\t\tids = this._filter_order;\r\n\r\n\t\tvar result = [];\r\n\t\tfor(var i=0; i< ids.length;i++) {\r\n\t\t\tvar el = this.pull[ids[i]];\r\n\t\t\tif (this._scheme_serialize){\r\n\t\t\t\tel = this._scheme_serialize(el);\r\n\t\t\t\tif (el===false) continue;\r\n\t\t\t}\r\n\t\t\tresult.push(el);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tsorting:{\r\n\t\tcreate:function(config){\r\n\t\t\tif (isArray(config))\r\n\t\t\t\treturn this._multi(config);\r\n\t\t\treturn this._dir(config.dir, this._by(config.by, config.as));\r\n\t\t},\r\n\t\tas:{\r\n\t\t\t//handled by dataFeed\r\n\t\t\t\"server\":function(){\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t\"date\":function(a,b){\r\n\t\t\t\ta = a-0; b = b-0;\r\n\t\t\t\tif (isNaN(b)) return 1;\r\n\t\t\t\tif (isNaN(a)) return -1;\r\n\r\n\t\t\t\treturn a>b?1:(a<b?-1:0);\r\n\t\t\t},\r\n\t\t\t\"int\":function(a,b){\r\n\t\t\t\ta = a*1; b = b*1;\r\n\t\t\t\tif (isNaN(b)) return 1;\r\n\t\t\t\tif (isNaN(a)) return -1;\r\n\r\n\t\t\t\treturn a>b?1:(a<b?-1:0);\r\n\t\t\t},\r\n\t\t\t\"string_strict\":function(a,b){\r\n\t\t\t\tif (!b) return 1;\r\n\t\t\t\tif (!a) return -1;\r\n\r\n\t\t\t\ta = a.toString(); b = b.toString();\r\n\t\t\t\treturn a>b?1:(a<b?-1:0);\r\n\t\t\t},\r\n\t\t\t\"string\":function(a,b){\r\n\t\t\t\tif (!b) return 1;\r\n\t\t\t\tif (!a) return -1;\r\n\r\n\t\t\t\ta = a.toString().toLowerCase(); b = b.toString().toLowerCase();\r\n\t\t\t\treturn a>b?1:(a<b?-1:0);\r\n\t\t\t},\r\n\t\t\t\"raw\":function(a,b){\r\n\t\t\t\treturn a>b?1:(a<b?-1:0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_multi:function(methods){\r\n\t\t\tmethods = methods.map(c => this._dir(c.dir, this._by(c.by, c.as)));\r\n\r\n\t\t\treturn function(a,b){\r\n\t\t\t\tlet result, i = 0;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tresult = methods[i](a,b);\r\n\t\t\t\t} while(!result && methods[++i]);\r\n\t\t\t\treturn result;\r\n\t\t\t};\r\n\t\t},\r\n\t\t_by:function(prop, method){\r\n\t\t\tif (!prop)\r\n\t\t\t\treturn method;\r\n\t\t\tif (typeof method != \"function\")\r\n\t\t\t\tmethod = this.as[method||\"string\"];\r\n\r\n\t\t\tassert(method, \"Invalid sorting method\");\r\n\t\t\treturn function(a,b){\r\n\t\t\t\treturn method(a[prop],b[prop]);\r\n\t\t\t};\r\n\t\t},\r\n\t\t_dir:function(prop, method){\r\n\t\t\tif (prop == \"asc\" || !prop)\r\n\t\t\t\treturn method;\r\n\t\t\treturn function(a,b){\r\n\t\t\t\treturn method(a,b)*-1;\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nexport default DataStore;","import {ajax} from \"../load/ajax\";\r\nimport {bind, delay, extend, toFunctor, isArray} from \"../webix/helpers\";\r\nimport {proto} from \"../ui/core\";\r\n\r\nimport {dp} from \"../load/dataprocessor\";\r\nimport proxy from \"../load/proxy\";\r\nimport promise from \"../thirdparty/promiz\";\r\n\r\nimport DataStore from \"../core/datastore\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\n\r\n\r\n/*\r\n\tBehavior:DataLoader - load data in the component\r\n\t\r\n\t@export\r\n\t\tload\r\n\t\tparse\r\n*/\r\nconst DataLoader =proto({\r\n\t$init:function(config){\r\n\t\t//prepare data store\r\n\t\tconfig = config || \"\";\r\n\r\n\t\tthis._feed_last = {};\r\n\t\tthis._data_generation = 1;\r\n\r\n\t\tthis.data = new DataStore();\r\n\t\tthis.data.attachEvent(\"onClearAll\",bind(this._call_onclearall,this));\r\n\t\tthis.data.attachEvent(\"onServerConfig\", bind(this._call_on_config, this));\r\n\t\tthis.attachEvent(\"onDestruct\", this._call_onclearall);\r\n\r\n\t\tthis.data.feed = this._feed;\r\n\t\tthis.data.owner = config.id;\r\n\t},\r\n\t_feed:function(from,count,callback,defer){\r\n\t\t//allow only single request at same time\r\n\t\tif (this._load_count){\r\n\t\t\tdefer = promise.defer();\r\n\t\t\tthis._load_count=[from,count,callback,defer];\t//save last ignored request\r\n\t\t\treturn defer;\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._load_count=true;\r\n\t\tthis._feed_last.from = from;\r\n\t\tthis._feed_last.count = count;\r\n\t\treturn this._feed_common.call(this, from, count, callback, false, false, defer);\r\n\t},\r\n\t_feed_common:function(from, count, callback, url, details, defer){\r\n\t\tvar state = null;\r\n\t\turl = url || this.data.url;\r\n\r\n\t\tif (from<0) from = 0;\r\n\r\n\t\tif(!details)\r\n\t\t\tdetails = { start: from, count:count };\r\n\r\n\t\tif(this.count())\r\n\t\t\tdetails[\"continue\"] = \"true\";\r\n\r\n\t\tif (this.getState)\r\n\t\t\tstate = this.getState();\r\n\r\n\t\t// proxy\r\n\t\tif (url && typeof url != \"string\"){\r\n\t\t\tif (state){\r\n\t\t\t\tif (state.sort)\r\n\t\t\t\t\tdetails.sort = state.sort;\r\n\t\t\t\tif (state.filter)\r\n\t\t\t\t\tdetails.filter = state.filter;\r\n\t\t\t}\r\n\t\t\treturn this.load(url, 0, details).then(\r\n\t\t\t\tdata => this._feed_on_load(data, callback, defer),\r\n\t\t\t\t() => this._feed_callback()\r\n\t\t\t);\r\n\t\t} else { // GET\r\n\t\t\turl = url+((url.indexOf(\"?\")==-1)?\"?\":\"&\");\r\n\r\n\t\t\tvar params = [];\r\n\t\t\tfor(var d in details){\r\n\t\t\t\tparams.push(d+\"=\"+details[d]);\r\n\t\t\t}\r\n\t\t\tif (state){\r\n\t\t\t\tif (state.sort){\r\n\t\t\t\t\tvar sort = isArray(state.sort) ? state.sort : [state.sort];\r\n\t\t\t\t\tfor (var i=0; i<sort.length; i++)\r\n\t\t\t\t\t\tparams.push(\"sort[\"+sort[i].id+\"]=\"+encodeURIComponent(sort[i].dir));\r\n\t\t\t\t}\r\n\t\t\t\tif (state.filter)\r\n\t\t\t\t\tfor (var key in state.filter){\r\n\t\t\t\t\t\tvar filterValue = state.filter[key];\r\n\t\t\t\t\t\tif(typeof filterValue == \"object\")\r\n\t\t\t\t\t\t\tfilterValue = ajax().stringify(filterValue); //server daterangefilter\r\n\t\t\t\t\t\tparams.push(\"filter[\"+key+\"]=\"+encodeURIComponent(filterValue));\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\turl += params.join(\"&\");\r\n\t\t\tif (this._feed_last.url !== url){\r\n\t\t\t\tthis._feed_last.url = url;\r\n\t\t\t\treturn this.load(url).then(\r\n\t\t\t\t\tdata => this._feed_on_load(data, callback, defer),\r\n\t\t\t\t\t() => this._feed_callback()\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis._load_count = false;\r\n\t\t\t\treturn promise.reject();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_feed_on_load:function(data, callback, defer){\r\n\t\tdelay(()=> this._feed_callback(), \"\", \"\", 100);\r\n\t\tif(callback)\r\n\t\t\tajax.$callback(this, callback, data);\r\n\t\tif(defer)\r\n\t\t\tdefer.resolve(data);\r\n\t\treturn data;\r\n\t},\r\n\t_feed_callback:function(){\r\n\t\t//after loading check if we have some ignored requests\r\n\t\tvar temp = this._load_count;\r\n\t\tthis._load_count = false;\r\n\t\tif (typeof temp ==\"object\")\r\n\t\t\tthis.data.feed.apply(this, temp);\t//load last ignored request\r\n\t},\r\n\t//loads data from external URL\r\n\tload:function(url){\r\n\t\turl = proxy.$parse(url);\r\n\t\tvar ajax = AtomDataLoader.load.apply(this, arguments);\r\n\r\n\t\t//prepare data feed for dyn. loading\r\n\t\tif (!this.data.url)\r\n\t\t\tthis.data.url = url;\r\n\r\n\t\treturn ajax;\r\n\t},\r\n\t//load next set of data rows\r\n\tloadNext:function(count, start, callback, url, now){\r\n\t\tvar config = this._settings;\r\n\t\tif (config.datathrottle && !now){\r\n\t\t\tif (this._throttle_request)\r\n\t\t\t\twindow.clearTimeout(this._throttle_request);\r\n\r\n\t\t\tlet defer = promise.defer();\r\n\t\t\tthis._throttle_request = delay(function(){\r\n\t\t\t\tdefer.resolve(this.loadNext(count, start, callback, url, true));\r\n\t\t\t},this, 0, config.datathrottle);\r\n\t\t\treturn defer;\r\n\t\t}\r\n\r\n\t\tif (!start && start !== 0) start = this.count();\r\n\t\tif (!count)\r\n\t\t\tcount = config.datafetch || this.count();\r\n\r\n\t\tthis.data.url = this.data.url || url;\r\n\t\tif (this.callEvent(\"onDataRequest\", [start,count,callback,url]) && this.data.url)\r\n\t\t\treturn this.data.feed.call(this, start, count, callback);\r\n\t\treturn promise.reject();\r\n\t},\r\n\t_maybe_loading_already:function(count, from){\r\n\t\tvar last = this._feed_last;\r\n\t\tif(this._load_count && last.url){\r\n\t\t\tif (last.from<=from && (last.count+last.from >= count + from )) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tremoveMissed_setter:function(value){\r\n\t\treturn (this.data._removeMissed = value);\r\n\t},\r\n\t//init of dataprocessor delayed after all settings processing\r\n\t//because it need to be the last in the event processing chain\r\n\t//to get valid validation state\r\n\t_init_dataprocessor:function(){\r\n\t\tvar url = this._settings.save;\r\n\r\n\t\tif (url === true)\r\n\t\t\turl = this._settings.save = this._settings.url;\r\n\r\n\t\tvar obj = { master: this };\r\n\t\t\r\n\t\tif (url && url.url)\r\n\t\t\textend(obj, url);\r\n\t\telse\r\n\t\t\tobj.url = url;\r\n\r\n\t\tdp(obj);\r\n\t},\r\n\tsave_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tthis.$ready.push(this._init_dataprocessor);\r\n\r\n\t\treturn value;\r\n\t},\r\n\twaitSave:function(handler){\r\n\t\treturn dp(this)._promise(() => {\r\n\t\t\thandler.call(this);\r\n\t\t}).then(many => many.length == 1 ? many[0] : many);\r\n\t},\r\n\tscheme_setter:function(value){\r\n\t\tthis.data.scheme(value);\r\n\t},\r\n\tdataFeed_setter:function(value){\r\n\t\tvalue = proxy.$parse(value);\r\n\r\n\t\tthis.data.attachEvent(\"onBeforeFilter\", bind(function(text, filtervalue){\r\n\t\t\tvar result;\r\n\r\n\t\t\t//complex filtering, can't be routed to dataFeed\r\n\t\t\tif (typeof text == \"function\") return true;\r\n\r\n\t\t\t//we have dataFeed and some text\r\n\t\t\tif (this._settings.dataFeed && (text || filtervalue)){\r\n\t\t\t\ttext = text || \"id\";\r\n\t\t\t\tif (filtervalue && typeof filtervalue == \"object\")\r\n\t\t\t\t\tfiltervalue = filtervalue.id;\r\n\r\n\t\t\t\tvar url = this._settings.dataFeed;\r\n\r\n\t\t\t\t//url data feed\r\n\t\t\t\tif(typeof url ==\"string\"){\r\n\t\t\t\t\tvar urldata = \"filter[\"+text+\"]=\"+encodeURIComponent(filtervalue);\r\n\t\t\t\t\tresult = this._fetch(\r\n\t\t\t\t\t\turl+(url.indexOf(\"?\")<0?\"?\":\"&\")+urldata,\r\n\t\t\t\t\t\tthis._settings.datatype\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t//js data feed\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar filter = {};\r\n\t\t\t\t\tfilter[text] = filtervalue;\r\n\t\t\t\t\tif (typeof url == \"function\"){\r\n\t\t\t\t\t\tresult = url.call(this, filtervalue, filter);\r\n\t\t\t\t\t} else if (url.$proxy && url.load) {\r\n\t\t\t\t\t\tresult = url.load(this, { filter });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result){\r\n\t\t\t\t\tif (!result.then)\r\n\t\t\t\t\t\tresult = promise.resolve(result);\r\n\r\n\t\t\t\t\tresult.then(\r\n\t\t\t\t\t\tdata => {\r\n\t\t\t\t\t\t\tthis.clearAll();\r\n\t\t\t\t\t\t\tthis._onLoad(data);\r\n\t\t\t\t\t\t\tthis.data.callEvent(\"onAfterFilter\", []);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tx => this._onLoadError(x)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},this));\r\n\t\treturn value;\r\n\t},\r\n\t_call_onready:function(){\r\n\t\tif (this._settings.ready && !this._ready_was_used){\r\n\t\t\tvar code = toFunctor(this._settings.ready, this.$scope);\r\n\t\t\tif (code)\r\n\t\t\t\tdelay(code, this, arguments);\r\n\t\t\tif (this.callEvent)\r\n\t\t\t\tdelay(this.callEvent, this, [\"onReady\", []]);\r\n\t\t\tthis._ready_was_used = true;\r\n\t\t}\r\n\t},\r\n\t_call_onclearall:function(soft){\r\n\t\tthis._data_generation++;\r\n\t\tif (!soft){\r\n\t\t\tthis._load_count = false;\r\n\t\t\tthis._feed_last = {};\r\n\t\t\tthis.waitData = promise.defer();\r\n\t\t}\r\n\t},\r\n\t_call_on_config:function(config){\r\n\t\tthis._parseSeetingColl(config);\r\n\t}\r\n},AtomDataLoader);\r\n\r\n\r\n\r\nexport default DataLoader;","import {isArray} from \"../webix/helpers\";\r\n\r\nconst DataState = {\r\n\tgetState:function(){\r\n\t\tvar cols_n = this.config.columns.length;\r\n\t\tvar columns = this.config.columns;\r\n\t\tvar settings = { \r\n\t\t\tids:[],\r\n\t\t\tsize:[],\r\n\t\t\tselect:this.getSelectedId(true),\r\n\t\t\tscroll:this.getScrollState()\r\n\t\t};\r\n\t\tfor(var i = 0; i < cols_n; i++){\r\n\t\t\tvar col = columns[i];\r\n\t\t\tsettings.ids.push(col.id);\r\n\t\t\tsettings.size.push((col.fillspace || col.adjust) ? -1 : col.width);\r\n\t\t}\r\n\r\n\t\tsettings.order = [].concat(this._hidden_column_order.length ? this._hidden_column_order : settings.ids);\r\n\r\n\t\tif (this._last_order.length){\r\n\t\t\tvar sort = this._last_order.map(id => {\r\n\t\t\t\treturn { id:id, dir:this._last_sorted[id].dir };\r\n\t\t\t});\r\n\t\t\tsettings.sort = (sort.length == 1) ? sort[0] : sort;\r\n\t\t}\r\n\r\n\t\t//this method will try to access the rendered values\r\n\t\t//just ignore it if grid is not rendered yet\r\n\t\tif (this._filter_elements && this._dtable_fully_ready) {\r\n\t\t\tvar filter = {};\r\n\t\t\tvar any_filter = 0;\r\n\t\t\tfor (let key in this._filter_elements) {\r\n\t\t\t\tif (this._hidden_column_hash[key]) continue;\r\n\r\n\t\t\t\tvar f = this._filter_elements[key];\r\n\t\t\t\tf[1].value = filter[key] = f[2].getValue(f[0]);\r\n\t\t\t\tany_filter = 1;\r\n\t\t\t}\r\n\t\t\tif (any_filter)\r\n\t\t\t\tsettings.filter=filter;\r\n\t\t}\r\n\r\n\t\tsettings.hidden = [];\r\n\t\tfor (let key in this._hidden_column_hash)\r\n\t\t\tsettings.hidden.push(key);\r\n\t\t\r\n\t\treturn settings;\r\n\t},\r\n\tsetState:function(obj){\r\n\t\tvar columns = this.config.columns;\r\n\t\tif(!obj) return;\r\n\r\n\t\tthis.markSorting();\r\n\t\tthis._last_order = [];\r\n\t\tthis._last_sorted = {};\r\n\r\n\t\tthis.blockEvent();\r\n\r\n\t\tif (obj.order && obj.order.length){\r\n\t\t\tthis._hidden_column_order = [].concat(obj.order);\r\n\t\t\tthis._hidden_split = [ this._settings.leftSplit, obj.order.length - this._settings.rightSplit ];\r\n\t\t}\r\n\r\n\t\tif (obj.hidden){\r\n\t\t\tvar hihash = {};\r\n\t\t\tfor (let i=0; i<obj.hidden.length; i++){\r\n\t\t\t\thihash[obj.hidden[i]] = true;\r\n\t\t\t\tif(!this._hidden_column_order.length)\r\n\t\t\t\t\tthis.hideColumn(obj.hidden[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._hidden_column_order.length){\r\n\t\t\t\tfor (let i=0; i<this._hidden_column_order.length; i++){\r\n\t\t\t\t\tvar hikey = this._hidden_column_order[i];\r\n\t\t\t\t\tif (!!hihash[hikey] == !this._hidden_column_hash[hikey])\r\n\t\t\t\t\t\tthis.hideColumn(hikey, {}, false, !!hihash[hikey]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (obj.ids){\r\n\t\t\tvar reorder = false;\r\n\t\t\tfor (let i=0; i<columns.length; i++)\r\n\t\t\t\tif (columns[i].id != obj.ids[i])\r\n\t\t\t\t\treorder = true;\r\n\t\t\tif (reorder){\r\n\t\t\t\tfor (let i=0; i<obj.ids.length; i++)\r\n\t\t\t\t\tcolumns[i] = this.getColumnConfig(obj.ids[i]) || columns[i];\r\n\t\t\t\tthis.refreshColumns();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (obj.size){\r\n\t\t\tvar cols_n = Math.min(obj.size.length, columns.length);\r\n\t\t\tfor(let i = 0; i < cols_n; i++){\r\n\t\t\t\tvar col = columns[i];\r\n\t\t\t\tif(col && obj.size[i] > 0 && col.width != obj.size[i]){\r\n\t\t\t\t\tdelete col.fillspace;\r\n\t\t\t\t\tdelete col.adjust;\r\n\t\t\t\t\tthis._setColumnWidth( i, obj.size[i], true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.unblockEvent();\r\n\r\n\t\tvar silent = !(this._settings.leftSplit || this._settings.rightSplit);\r\n\t\tthis._updateColsSizeSettings(silent);\r\n\t\tthis.callEvent(\"onStructureUpdate\", []);\r\n\r\n\t\tif (obj.sort){\r\n\t\t\tlet sort = obj.sort, multi = true;\r\n\t\t\tif (!isArray(sort)){\r\n\t\t\t\tsort = [sort]; multi = false;\r\n\t\t\t}\r\n\t\t\tfor (let i=0; i<sort.length; i++){\r\n\t\t\t\tconst col = this.getColumnConfig(sort[i].id);\r\n\t\t\t\tif (col)\r\n\t\t\t\t\tthis._sort(col.id, sort[i].dir, col.sort, multi);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (obj.filter){\r\n\t\t\t//temporary disable filtering \r\n\t\t\tlet temp = this.filterByAll;\r\n\t\t\tthis.filterByAll = function(){};\r\n\r\n\t\t\t//apply defined filters\r\n\t\t\tfor (let key in obj.filter) {\r\n\t\t\t\tlet value = obj.filter[key];\r\n\t\t\t\tif (!value) continue;\r\n\r\n\t\t\t\tif (!this._filter_elements[key]) continue;\r\n\t\t\t\tlet f = this._filter_elements[key];\r\n\t\t\t\tf[2].setValue(f[0], value);\r\n\t\t\t\tvar contentid = f[1].contentId;\r\n\t\t\t\tif (contentid)\r\n\t\t\t\t\tthis._active_headers[contentid].value = value;\r\n\t\t\t}\r\n\r\n\t\t\t//remove old filters\r\n\t\t\tfor (let key in this._filter_elements){\r\n\t\t\t\tif (!obj.filter[key]){\r\n\t\t\t\t\tlet f = this._filter_elements[key];\r\n\t\t\t\t\tf[2].setValue(f[0], \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\t//restore and apply filtering\r\n\t\t\tthis.filterByAll = temp;\r\n\t\t\tthis.filterByAll();\r\n\t\t}\r\n\r\n\t\tif (obj.select && this.select){\r\n\t\t\tlet select = obj.select;\r\n\t\t\tthis.unselect();\r\n\t\t\tfor (let i = 0; i < select.length; i++)\r\n\t\t\t\tif (!select[i].row || this.exists(select[i].row))\r\n\t\t\t\t\tthis._select(select[i], true);\r\n\t\t}\r\n\r\n\t\tif(obj.scroll)\r\n\t\t\tthis.scrollTo(obj.scroll.x, obj.scroll.y);\r\n\t}\r\n};\r\n\r\nexport default DataState;","import {pos, offset} from \"../webix/html\";\r\nimport {use} from \"../services\";\r\nimport env from \"../webix/env\";\r\nimport Touch from \"../core/touch\";\r\nimport {extend, delay, _power_array, isArray} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport DragControl from \"../core/dragcontrol\";\r\nimport AutoScroll from \"../core/autoscroll\";\r\n\r\n\r\n/*\r\n\tBehavior:DragItem - adds ability to move items by dnd\r\n\t\r\n\tdnd context can have next properties\r\n\t\tfrom - source object\r\n\t\tto - target object\r\n\t\tsource - id of dragged item(s)\r\n\t\ttarget - id of drop target, null for drop on empty space\r\n\t\tstart - id from which DND was started\r\n*/\r\n\r\nconst DragItem ={\r\n\t//helper - defines component's container as active zone for dragging and for dropping\r\n\t_initHandlers:function(obj, source, target){\r\n\t\tif (!source) DragControl.addDrop(obj._contentobj,obj,true);\r\n\t\tif (!target) DragControl.addDrag(obj._contentobj,obj);\r\n\t\tthis.attachEvent(\"onDragOut\",function(a,b){ this.$dragMark(a,b); });\r\n\t\tthis.attachEvent(\"onBeforeAutoScroll\",function(){\r\n\t\t\tvar context = DragControl.getContext();\r\n\t\t\treturn !!(DragControl._active && context && (context.to === this || this._auto_scroll_force));\r\n\t\t});\r\n\t},\r\n\tdrag_setter:function(value){\r\n\t\tif (value){\r\n\t\t\textend(this, AutoScroll, true);\r\n\t\t\tif (value == \"order\" || value == \"move\")\r\n\t\t\t\textend(this, use(\"DragOrder\"), true);\r\n\t\t\tif (value == \"inner\" || value == \"order\")\r\n\t\t\t\tthis._inner_drag_only = true;\r\n\r\n\t\t\tthis._initHandlers(this, value == \"source\", value == \"target\");\r\n\t\t\tdelete this.drag_setter;\t//prevent double initialization\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t/*\r\n\t\ts - source html element\r\n\t\tt - target html element\r\n\t\td - drop-on html element ( can be not equal to the target )\r\n\t\te - native html event \r\n\t*/\r\n\t//called when drag moved over possible target\r\n\t$dragIn:function(s,t,e){\r\n\t\tvar id = this.locate(e) || null;\r\n\t\tvar context = DragControl._drag_context;\r\n\r\n\t\t//in inner drag mode - ignore dnd from other components\r\n\t\tif ((this._inner_drag_only || context.from._inner_drag_only) && context.from !== this) return false;\r\n\r\n\t\tvar to = DragControl.getMaster(t);\r\n\t\t//previous target\r\n\t\tvar html = (this.getItemNode(id, e)||this._dataobj);\r\n\t\t//prevent double processing of same target\r\n\t\tif (html == DragControl._landing) return html;\r\n\t\tcontext.target = id;\r\n\t\tcontext.to = to;\r\n\r\n\t\tif (this._auto_scroll_delay)\r\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\r\n\t\tconst fragile = (this.addRowCss && env.touch && !this._settings.prerender);\r\n\t\tif (this._settings.dragscroll !== false  && !fragile)\r\n\t\t\tthis._auto_scroll_delay = delay(function(pos,id){\r\n\t\t\t\tthis._drag_pause(id);\r\n\t\t\t\tthis._auto_scroll(pos,id);\r\n\t\t\t}, this, [pos(e), id], 250);\r\n\r\n\t\tif (!this.$dropAllow(context, e)  || !this.callEvent(\"onBeforeDragIn\",[context, e])){\r\n\t\t\tcontext.to = context.target = null;\r\n\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t//mark target only when landing confirmed\r\n\t\tthis.$dragMark(context,e);\r\n\t\treturn html;\r\n\t},\r\n\t$dropAllow:function(){\r\n\t\treturn true;\r\n\t},\r\n\t_drag_pause:function(){\r\n\t\t//may be reimplemented in some components\r\n\t\t// tree for example\r\n\t},\r\n\t_target_to_id:function(target){\r\n\t\treturn target && typeof target === \"object\" ? target.toString() : target;\r\n\t},\r\n\t//called when drag moved out from possible target\r\n\t$dragOut:function(s,t,n,e){\r\n\t\tvar id = (this._viewobj.contains(n) ? this.locate(e): null) || null;\r\n\t\tvar context = DragControl._drag_context;\r\n\r\n\t\t//still over previous target\r\n\t\tif ((context.target||\"\").toString() == (id||\"\").toString()) return null;\r\n\t\tif (this._auto_scroll_delay)\r\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\r\n\t\t//unmark previous target\r\n\t\tcontext.target = context.to = null;\r\n\t\tthis.callEvent(\"onDragOut\",[context,e]);\r\n\t\treturn null;\r\n\t},\r\n\t//called when drag moved on target and button is released\r\n\t$drop:function(s,t,e){\r\n\t\tvar context = DragControl._drag_context;\r\n\t\t//finalize context details\r\n\t\tcontext.to = this;\r\n\t\tthis._define_index(s,t,context);\r\n\r\n\t\t//unmark last target\r\n\t\tthis.$dragMark({}, e);\r\n\r\n\t\tif( context.from && context.from != context.to && context.from.callEvent ){\r\n\t\t\tif(!context.from.callEvent(\"onBeforeDropOut\", [context,e]))\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onBeforeDrop\",[context,e])) return;\r\n\t\t//moving\r\n\t\tthis._context_to_move(context,e);\r\n\t\t\r\n\t\tthis.callEvent(\"onAfterDrop\",[context,e]);\r\n\t},\r\n\t_define_index:function(s,t,context){\r\n\t\tvar target = this._target_to_id(context.target);\r\n\r\n\t\tif (this.getBranchIndex){\r\n\t\t\tif (target){\r\n\t\t\t\tcontext.parent = this.getParentId(target);\r\n\t\t\t\tcontext.index = this.getBranchIndex(target);\r\n\t\t\t} else context.index = -1;\r\n\t\t} else\r\n\t\t\tcontext.index = target?this.getIndexById(target):this.count();\r\n\t},\r\n\t_context_to_move:function(context){\r\n\t\tassert(context.from, \"Unsopported d-n-d combination\");\r\n\t\tif (context.from && context.from.move){\t//from different component with item dnd\r\n\t\t\tvar details = { parent: context.parent, mode: context.pos };\r\n\t\t\tcontext.from.move(context.source,context.index,context.to, details);\r\n\t\t}\r\n\t},\r\n\t_getDragItemPos: function(pos,e){\r\n\t\tif (this.getItemNode){\r\n\t\t\tvar id = this.locate(e, true);\r\n\t\t\t//in some case, node may be outiside of dom ( spans in datatable for example )\r\n\t\t\t//so getItemNode can return null\r\n\t\t\tvar node = id ? this.getItemNode(id) : null;\r\n\t\t\treturn node ? offset(node) : node;\r\n\t\t}\r\n\t},\r\n\t//called when drag action started\r\n\t$drag:function(s,e){\r\n\t\tvar id = this.locate(e, true);\r\n\t\tif (id){\r\n\t\t\tvar list = [id];\r\n\r\n\t\t\tif (this.getSelectedId){ //has selection model\r\n\t\t\t\t//if dragged item is one of selected - drag all selected\r\n\t\t\t\tvar selection = this.getSelectedId(true, true);\t\r\n\r\n\t\t\t\tif (selection && selection.length > 1 && _power_array.find.call(selection,id)!=-1){\r\n\t\t\t\t\tvar hash = {}; \r\n\t\t\t\t\tlist = [];\r\n\t\t\t\t\tfor (let i=0;i<selection.length; i++)\r\n\t\t\t\t\t\thash[selection[i]]=true;\r\n\t\t\t\t\tfor (let i = 0; i<this.data.order.length; i++){\r\n\t\t\t\t\t\tvar hash_id = this.data.order[i];\r\n\t\t\t\t\t\tif (hash[hash_id])\r\n\t\t\t\t\t\t\tlist.push(hash_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//save initial dnd params\r\n\t\t\tvar context = DragControl._drag_context= { source:list, start:id };\r\n\t\t\tcontext.from = this;\r\n\r\n\t\t\tif (this.callEvent(\"onBeforeDrag\",[context,e])){\r\n\t\t\t\tif (env.touch && this._touch_scroll == \"touch\")\r\n\t\t\t\t\tdelay(function(){ Touch._start_context = null; });\r\n\r\n\t\t\t\t//set drag representation\r\n\t\t\t\treturn context.html||this.$dragHTML(this.getItem(id), e, context);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t$dragHTML:function(obj,e,context){\r\n\t\tlet html = this._toHTML(obj);\r\n\t\tif ( isArray(context.source) && context.source.length > 1 )\r\n\t\t\thtml = this._toMultipleHTML(html, context.source.length);\r\n\t\treturn html;\r\n\t},\r\n\t_toMultipleHTML:function(html, len){\r\n\t\thtml = \"<div class='webix_drag_main'>\"+html+\"</div>\";\r\n\t\tlet multiple = \"<div class='webix_drag_multiple'></div>\";\r\n\t\tif ( len > 2 )\r\n\t\t\tmultiple = \"<div class='webix_drag_multiple_last'></div>\" + multiple;\r\n\t\treturn multiple+html+\"<span class='webix_badge'>\"+len+\"</span>\";\r\n\t},\r\n\t$dragMark:function(context){\r\n\t\tvar target = null;\r\n\t\tif (context.target)\r\n\t\t\ttarget = this._target_to_id(context.target);\r\n\r\n\t\t//touch webkit will stop touchmove event if source node removed\r\n\t\tif (this._marked && this._marked != target){\r\n\t\t\tthis._remove_css([this._marked], \"webix_drag_over\", true);\r\n\t\t\tthis._marked = null;\r\n\t\t}\r\n\r\n\t\tif (!this._marked && target){\r\n\t\t\tthis._marked = target;\r\n\t\t\tthis._add_css([target], \"webix_drag_over\", true);\r\n\t\t\treturn target;\r\n\t\t}\r\n\t\t\r\n\t\tif (context.to){\r\n\t\t\treturn true;\r\n\t\t}else\r\n\t\t\treturn false;\r\n\t},\r\n\t_add_css:function(source, css){\r\n\t\tfor (let i=0; i<source.length; i++)\r\n\t\t\tthis.addCss(source[i], css);\r\n\t},\r\n\t_remove_css:function(source, css){\r\n\t\tfor (let i=0; i<source.length; i++)\r\n\t\t\tthis.removeCss(source[i], css);\r\n\t},\r\n\r\n\t// methods used in order/move modes\r\n\t$dropHTML: function(){\r\n\t\treturn \"\";\r\n\t},\r\n\t_set_drop_area:function(target, t){\r\n\t\tlet node = this.getItemNode(target);\r\n\t\tif (node){\r\n\t\t\tnode.parentNode.insertBefore(DragControl._dropHTML[0], node);\r\n\t\t} else t.children[0].appendChild(DragControl._dropHTML[0]);\r\n\t}\r\n};\r\n\r\nexport default DragItem;","import {offset, pos, remove} from \"../webix/html\";\r\nimport {isArray} from \"../webix/helpers\";\r\nimport {define} from \"../services\";\r\n\r\nimport DragItem from \"../core/dragitem\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\nconst DragOrder ={\r\n\t$drag: function(s,e){\r\n\t\tlet html = DragItem.$drag.apply(this, arguments);\r\n\t\tif (!html) return html;\r\n\r\n\t\tlet context = DragControl._drag_context;\r\n\r\n\t\tif (this._close_branches)\r\n\t\t\tthis._close_branches(context);\r\n\r\n\t\tif (this._inner_drag_only && this.getBranchIndex)\r\n\t\t\tthis._drag_order_stored_left = this._drag_order_complex?((this.getItem(context.start).$level+1) * 20 + 8):0;\r\n\r\n\t\tif (isArray(context.source)){\r\n\t\t\tDragControl._setDragOffset(e);\r\n\t\t\tthis._add_css(context.source, \"webix_invisible\");\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\t$dragIn:function(s,t,e){\r\n\t\tlet html = DragItem.$dragIn.apply(this, arguments);\r\n\t\tif (!html) return html;\r\n\r\n\t\tif (!DragControl._dropHTML)\r\n\t\t\tDragControl._dropHTML = this._init_drop_area();\r\n\r\n\t\tlet context = DragControl._drag_context;\r\n\t\tlet target = \"$webix-last\";\r\n\t\tif (context.target)\r\n\t\t\ttarget = this._target_to_id(context.target);\r\n\r\n\t\tif (target != \"$webix-last\" && target != \"$webix-drop\"){\r\n\t\t\tlet settings = {direction:this._settings.layout||this._drag_direction||\"y\", x:\"width\", y:\"height\"};\r\n\t\t\tlet ofs = offset(html);\r\n\t\t\tlet direction = pos(e)[settings.direction] - ofs[settings.direction];\r\n\t\t\tif ( direction*2 > ofs[settings[settings.direction]] )\r\n\t\t\t\ttarget = this.getNextId(target) || \"$webix-last\";\r\n\t\t}\r\n\r\n\t\tif (target == this._marked_item_id || target == \"$webix-drop\")\r\n\t\t\treturn html;\r\n\r\n\t\tthis._marked_item_id = target;\r\n\t\tthis._set_drop_area(target, t);\r\n\r\n\t\treturn html;\r\n\t},\r\n\t$dragPos:function(pos){\r\n\t\tif (!this._inner_drag_only){\r\n\t\t\tlet context = DragControl._drag_context;\r\n\t\t\tpos.y += context.y_offset;\r\n\t\t\tpos.x += context.x_offset;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet box = offset(this.$view);\r\n\t\tlet xdrag = (this._settings.layout == \"x\");\r\n\r\n\t\tif (xdrag){\r\n\t\t\tbox.x -= 12;\r\n\t\t\tpos.y = box.y - 8;\r\n\t\t\tpos.x = pos.x - 18;\r\n\r\n\t\t\tif (pos.x < box.x)\r\n\t\t\t\tpos.x = box.x;\r\n\t\t\telse {\r\n\t\t\t\tlet max = box.x + box.width;\r\n\t\t\t\tif (pos.x > max)\r\n\t\t\t\t\tpos.x = max;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbox.y += (this._header_height||0) - 12;\r\n\t\t\tpos.x = box.x + 8 + (this._drag_order_stored_left||0);\r\n\t\t\tpos.y = pos.y - 18;\r\n\r\n\t\t\tif (pos.y < box.y)\r\n\t\t\t\tpos.y = box.y;\r\n\t\t\telse {\r\n\t\t\t\tlet max = box.y + box.height - (this._header_height||0);\r\n\t\t\t\tif (pos.y > max)\r\n\t\t\t\t\tpos.y = max;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t$dragOut:function(s,ot,nt){\r\n\t\tif (ot != nt){\r\n\t\t\tremove(DragControl._dropHTML);\r\n\t\t\tthis._marked_item_id = DragControl._dropHTML = null;\r\n\t\t}\r\n\t\treturn DragItem.$dragOut.apply(this, arguments);\r\n\t},\r\n\t_define_index:function(s,t,context){\r\n\t\tvar target = this._marked_item_id == \"$webix-last\" ? null : this._marked_item_id;\r\n\r\n\t\tif (this.getBranchIndex){\r\n\t\t\tif (target){\r\n\t\t\t\tcontext.parent = this.getParentId(target);\r\n\t\t\t\tcontext.index = this.getBranchIndex(target);\r\n\t\t\t\tif (s == t && this.getParentId(context.start) == context.parent && this.getBranchIndex(context.start) < context.index)\r\n\t\t\t\t\tcontext.index -= 1;\r\n\t\t\t} else context.index = -1;\r\n\t\t} else {\r\n\t\t\tcontext.index = target?this.getIndexById(target):this.count();\r\n\t\t\tcontext.index -= (s == t && this.getIndexById(context.start)<context.index?1:0);\r\n\t\t}\r\n\t},\r\n\t$dragDestroy: function(){\r\n\t\tlet context = DragControl._drag_context;\r\n\r\n\t\tif (isArray(context.source))\r\n\t\t\tthis._remove_css(context.source, \"webix_invisible\");\r\n\r\n\t\tremove(DragControl._html);\r\n\t},\r\n\t_init_drop_area: function(){\r\n\t\tlet node = document.createElement(\"div\");\r\n\t\tnode.className = \"webix_drop_area\";\r\n\t\tnode.style.width = this.type.width + \"px\";\r\n\t\tnode.style.height = this.type.height + \"px\";\r\n\t\tnode.innerHTML = this.$dropHTML();\r\n\t\tnode.setAttribute(this._id, \"$webix-drop\");\r\n\r\n\t\treturn [node];\r\n\t},\r\n\t$dragMark: function(){\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\ndefine(\"DragOrder\", DragOrder);\r\n\r\nexport default DragOrder;","import {extend, copy, _power_array} from \"../webix/helpers\";\r\n\r\n\r\nconst Undo = {\r\n\t$init:function(){\r\n\t\tthis._undoHistory = extend([],_power_array,true);\r\n\t\tthis._undoCursor = -1;\r\n\t},\r\n\tundo_setter: function(value){\r\n\t\tif(value){\r\n\t\t\tthis._init_undo();\r\n\t\t\tthis._init_undo = function(){};\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t_init_undo: function(){\r\n\t\tvar view = this;\r\n\r\n\t\t// drag-n-drop\r\n\t\tthis.attachEvent(\"onBeforeDrop\", function(context){\r\n\t\t\tif(context.from == context.to){\r\n\t\t\t\tvar item = view._draggedItem = copy(this.getItem(context.start));\r\n\t\t\t\tif(this.data.branch){\r\n\t\t\t\t\titem.$index = this.getBranchIndex(item.id);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\titem.$index = this.getIndexById(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.data.attachEvent(\"onDataMove\", function( sid ){\r\n\t\t\tif(view._draggedItem && view._draggedItem.id == sid){\r\n\t\t\t\tvar data = view._draggedItem;\r\n\t\t\t\tview._draggedItem = null;\r\n\t\t\t\tview._addToHistory(sid, data, \"move\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// add, remove\r\n\t\tthis.data.attachEvent(\"onBeforeDelete\", function(id){\r\n\t\t\tif(this.getItem(id)){\r\n\t\t\t\tvar item = view._deletedItem = copy(this.getItem(id));\r\n\t\t\t\tif(this.branch){\r\n\t\t\t\t\titem.$index = this.getBranchIndex(id);\r\n\t\t\t\t\tif(this.branch[id])\r\n\t\t\t\t\t\titem.$branch = copy(this.serialize(id));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\titem.$index = this.getIndexById(id);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.data.attachEvent(\"onDataUpdate\", function(id, data, old){\r\n\t\t\tview._addToHistory(id+\"\", old, \"update\");\r\n\t\t});\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tvar data = null;\r\n\t\t\tif(id){\r\n\t\t\t\tif(mode == \"add\"){\r\n\t\t\t\t\tdata = copy(item);\r\n\t\t\t\t}\r\n\t\t\t\telse if( mode == \"delete\") {\r\n\t\t\t\t\tdata = view._deletedItem;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data)\r\n\t\t\t\t\tview._addToHistory(id, data, mode);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// id change\r\n\t\tthis.data.attachEvent(\"onIdChange\", function(oldId,newId){\r\n\t\t\tif(typeof oldId == \"object\")\r\n\t\t\t\toldId = oldId.row;\r\n\t\t\tfor(var i =0; i < view._undoHistory.length; i++){\r\n\t\t\t\tif(view._undoHistory[i].id == oldId){\r\n\t\t\t\t\tview._undoHistory[i].id = newId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t_addToHistory: function(id, data, action){\r\n\t\tif(!this._skipHistory && this._settings.undo){\r\n\t\t\tthis._undoHistory.push({id: id, action: action, data: data});\r\n\t\t\tif(this._undoHistory.length==20)\r\n\t\t\t\tthis._undoHistory.splice(0,1);\r\n\t\t\tif(!this._skipCursorInc)\r\n\t\t\t\tthis._undoCursor = this._undoHistory.length - 1;\r\n\t\t}\r\n\t},\r\n\tignoreUndo: function(func, master){\r\n\t\tthis._skipHistory = true;\r\n\t\tfunc.call(master||this);\r\n\t\tthis._skipHistory = false;\r\n\t},\r\n\tremoveUndo: function(id){\r\n\t\tfor( var i = this._undoHistory.length-1; i >=0; i--){\r\n\t\t\tif(this._undoHistory[i].id == id){\r\n\t\t\t\tif(this._undoHistory[i].action == \"id\"){\r\n\t\t\t\t\tid = this._undoHistory[i].data;\r\n\t\t\t\t}\r\n\t\t\t\tthis._undoHistory.removeAt(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._undoCursor = this._undoHistory.length - 1;\r\n\t},\r\n\tundo: function(id){\r\n\t\tif(id){\r\n\t\t\tthis.ignoreUndo(function(){\r\n\t\t\t\tvar data, i;\r\n\t\t\t\tfor( i = this._undoHistory.length-1; !data && i >=0; i--){\r\n\t\t\t\t\tif(this._undoHistory[i].id == id)\r\n\t\t\t\t\t\tdata = this._undoHistory[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data){\r\n\t\t\t\t\t/*if(data.action == \"id\")\r\n\t\t\t\t\t\tid = data.data;*/\r\n\t\t\t\t\tthis._undoAction(data);\r\n\t\t\t\t\tthis._undoHistory.removeAt(i+1);\r\n\t\t\t\t\tthis._undoCursor = this._undoHistory.length - 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar data = this._undoHistory[this._undoCursor];\r\n\t\t\tif(data){\r\n\t\t\t\tthis.ignoreUndo(function(){\r\n\t\t\t\t\tthis._undoAction(data);\r\n\t\t\t\t\tthis._undoHistory.removeAt(this._undoCursor);\r\n\t\t\t\t});\r\n\t\t\t\tthis._undoCursor--;\r\n\t\t\t\t/*if(data.action == \"id\")\r\n\t\t\t\t\tthis.undo();*/\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_undoAction: function(obj){\r\n\t\tif(obj.action == \"delete\"){\r\n\t\t\tvar branch = null,\r\n\t\t\t\tparentId = obj.data.$parent;\r\n\r\n\t\t\tif(obj.data.$branch){\r\n\t\t\t\tbranch = {\r\n\t\t\t\t\tparent: obj.id,\r\n\t\t\t\t\tdata: copy(obj.data.$branch)\r\n\t\t\t\t};\r\n\t\t\t\tdelete obj.data.$branch;\r\n\t\t\t\tif(parentId && !this.data.branch[parentId])\r\n\t\t\t\t\tparentId = 0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.add(obj.data, obj.data.$index, parentId);\r\n\t\t\tif(branch){\r\n\t\t\t\tthis.parse(branch);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(obj.action == \"add\"){\r\n\t\t\tthis.remove(obj.id);\r\n\t\t}\r\n\t\telse if(obj.action == \"update\"){\r\n\t\t\tthis.updateItem(obj.id, obj.data);\r\n\t\t}\r\n\t\telse if(obj.action == \"move\"){\r\n\t\t\tif(obj.data.$parent){\r\n\t\t\t\tif(this.getItem(obj.data.$parent))\r\n\t\t\t\t\tthis.move(obj.id, obj.data.$index, null, {parent: obj.data.$parent});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.move(obj.id, obj.data.$index);\r\n\t\t}\r\n\t\t/*else if(obj.action == \"id\"){\r\n\t\t\tthis.data.changeId(obj.id, obj.data);\r\n\t\t}*/\r\n\t}\r\n};\r\n\r\nexport default Undo;","\r\n\r\nimport {create, preventEvent} from \"../webix/html\";\r\nimport {isArray, isUndefined, copy, toNode, bind, delay, extend} from \"../webix/helpers\";\r\nimport {ui, $$} from \"../ui/core\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\n\r\nfunction init_suggest(editor, input){\r\n\tvar suggest = editor.config.suggest;\r\n\tif (suggest){\r\n\t\tvar box = editor.config.suggest = create_suggest(suggest);\r\n\t\tvar boxobj = $$(box);\r\n\t\tif (boxobj && input)\r\n\t\t\tboxobj.linkInput(input);\r\n\t\treturn boxobj;\r\n\t}\r\n}\r\n\r\nfunction attach_editend(suggest){\r\n\tif (suggest && suggest.setMasterValue && !suggest._editor_initialized){\r\n\t\tsuggest._editor_initialized = true;\r\n\t\tsuggest.attachEvent(\"onValueSuggest\", function(){\r\n\t\t\tdelay(function(){ callEvent(\"onEditEnd\", []); });\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction create_suggest(config){\r\n\tif (typeof config == \"string\") return config;\r\n\tif (config.linkInput) return config._settings.id;\r\n\r\n\r\n\tif (typeof config == \"object\"){\r\n\t\tif (isArray(config))\r\n\t\t\tconfig = { data: config };\r\n\t\tconfig.view = config.view || \"suggest\";\r\n\t} else if (config === true)\r\n\t\tconfig = { view:\"suggest\" };\r\n\r\n\tvar obj = ui(config);\r\n\treturn obj.config.id;\r\n}\r\n\r\nfunction getLabel(config){\r\n\tvar text = config.header && config.header[0]?config.header[0].text:config.editValue || config.label;\r\n\treturn (text || \"\").toString().replace(/<[^>]*>/g, \"\");\r\n}\r\n\r\n/*\r\nthis.node - html node, available after render call\r\nthis.config - editor config\r\nthis.value - original value\r\nthis.popup - id of popup \r\n*/\r\nconst editors = {\r\n\t\"text\":{\r\n\t\tfocus:function(){\r\n\t\t\tthis.getInputNode(this.node).focus();\r\n\t\t\tthis.getInputNode(this.node).select();\r\n\t\t},\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.getInputNode(this.node).value;\r\n\t\t},\r\n\t\tsetValue:function(value){\r\n\t\t\tconst input = this.getInputNode(this.node);\r\n\t\t\tinput.value = value;\r\n\r\n\t\t\tconst suggest = init_suggest(this, input);\r\n\t\t\tattach_editend(suggest);\r\n\t\t},\r\n\t\tgetInputNode:function(){\r\n\t\t\treturn this.node.firstChild;\r\n\t\t},\r\n\t\trender:function(){\r\n\t\t\treturn create(\"div\", {\r\n\t\t\t\t\"class\":\"webix_dt_editor\"\r\n\t\t\t}, \"<input type='text' aria-label='\"+getLabel(this.config)+\"'>\");\r\n\t\t}\r\n\t},\r\n\t\"inline-checkbox\":{\r\n\t\trender:function(){ return {}; },\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.node.checked;\r\n\t\t},\r\n\t\tsetValue:function(){},\r\n\t\tfocus:function(){\r\n\t\t\tthis.node.focus();\r\n\t\t},\r\n\t\tgetInputNode:function(){},\r\n\t\t$inline:true\r\n\t},\r\n\t\"inline-text\":{\r\n\t\trender:function(){ return {}; },\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.node.value;\r\n\t\t},\r\n\t\tsetValue:function(){},\r\n\t\tfocus:function(){\r\n\t\t\ttry{\t//IE9\r\n\t\t\t\tthis.node.select();\r\n\t\t\t\tthis.node.focus();\r\n\t\t\t} catch(e){} //eslint-disable-line\r\n\t\t},\r\n\t\tgetInputNode:function(){},\r\n\t\t$inline:true\r\n\t},\r\n\t\"checkbox\":{\r\n\t\tfocus:function(){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t},\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.getInputNode().checked;\r\n\t\t},\r\n\t\tsetValue:function(value){\r\n\t\t\tthis.getInputNode().checked = !!value;\r\n\t\t},\r\n\t\tgetInputNode:function(){\r\n\t\t\treturn this.node.firstChild.firstChild;\r\n\t\t},\r\n\t\trender:function(){\r\n\t\t\treturn create(\"div\", {\r\n\t\t\t\t\"class\":\"webix_dt_editor\"\r\n\t\t\t}, \"<div><input type='checkbox' aria-label='\"+getLabel(this.config)+\"'></div>\");\r\n\t\t}\r\n\t},\r\n\t\"select\":{\r\n\t\tfocus:function(){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t},\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.getInputNode().value;\r\n\t\t},\r\n\t\tsetValue:function(value){\r\n\t\t\tthis.getInputNode().value = value;\r\n\t\t},\r\n\t\tgetInputNode:function(){\r\n\t\t\treturn this.node.firstChild;\r\n\t\t},\r\n\t\trender:function(){\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar options = this.config.options || this.config.collection;\r\n\t\t\tassert(options,\"options not defined for select editor\");\r\n\r\n\t\t\tif (options.data && options.data.each)\r\n\t\t\t\toptions.data.each(function(obj){\r\n\t\t\t\t\thtml +=\"<option value='\"+obj.id+\"'>\"+obj.value+\"</option>\";\r\n\t\t\t\t});\r\n\t\t\telse {\r\n\t\t\t\tif (isArray(options)){\r\n\t\t\t\t\tfor (var i=0; i<options.length; i++){\r\n\t\t\t\t\t\tvar rec = options[i];\r\n\t\t\t\t\t\tvar isplain = isUndefined(rec.id);\r\n\t\t\t\t\t\tvar id = isplain ? rec : rec.id;\r\n\t\t\t\t\t\tvar label = isplain ? rec : rec.value;\r\n\r\n\t\t\t\t\t\thtml +=\"<option value='\"+id+\"'>\"+label+\"</option>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else for (var key in options){\r\n\t\t\t\t\thtml +=\"<option value='\"+key+\"'>\"+options[key]+\"</option>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn create(\"div\", {\r\n\t\t\t\t\"class\":\"webix_dt_editor\"\r\n\t\t\t}, \"<select aria-label='\"+getLabel(this.config)+\"'>\"+html+\"</select>\");\r\n\t\t}\r\n\t},\r\n\tpopup:{\r\n\t\tfocus:function(){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t},\r\n\t\tdestroy:function(){\r\n\t\t\tthis.getPopup().hide();\r\n\t\t},\r\n\t\tgetValue:function(){\r\n\t\t\treturn this.getInputNode().getValue()||\"\";\r\n\t\t},\r\n\t\tsetValue:function(value){\r\n\t\t\tthis.getPopup().show(this.node);\r\n\t\t\tthis.getInputNode().setValue(value);\r\n\t\t},\r\n\t\tgetInputNode:function(){\r\n\t\t\treturn this.getPopup().getChildViews()[0];\r\n\t\t},\r\n\t\tgetPopup:function(){\r\n\t\t\tif (!this.config.$popup)\r\n\t\t\t\tthis.config.$popup = this.createPopup();\r\n\r\n\t\t\treturn $$(this.config.$popup);\r\n\t\t},\r\n\t\tcreatePopup:function(){\r\n\t\t\tvar popup = this.config.popup || this.config.suggest;\r\n\t\t\tif (popup){\r\n\t\t\t\tvar pobj;\r\n\t\t\t\tif (typeof popup == \"object\" && !popup.name){\r\n\t\t\t\t\tpopup.view = popup.view || \"suggest\";\r\n\t\t\t\t\tpobj = ui(copy(popup));\r\n\t\t\t\t} else\r\n\t\t\t\t\tpobj = $$(popup);\r\n\r\n\t\t\t\t//custom popup may be linked already\r\n\t\t\t\tif(!pobj._linked){\r\n\t\t\t\t\tif (pobj.linkInput)\r\n\t\t\t\t\t\tpobj.linkInput(document.body);\r\n\t\t\t\t\telse if(this.linkInput)\r\n\t\t\t\t\t\tthis.linkInput(document.body);\r\n\t\t\t\t\tpobj._linked = true;\r\n\t\t\t\t}\r\n\t\t\t\tattach_editend(pobj);\r\n\r\n\t\t\t\treturn pobj;\r\n\t\t\t}\r\n\r\n\t\t\tvar type = editors.$popup[this.popupType];\r\n\t\t\tif (typeof type != \"string\" && !type.name){\r\n\t\t\t\ttype = editors.$popup[this.popupType] = ui(type);\r\n\t\t\t\tthis.popupInit(type);\r\n\r\n\t\t\t\tif(!type.linkInput)\r\n\t\t\t\t\tthis.linkInput(document.body);\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\treturn type._settings.id;\r\n\t\t},\r\n\t\tlinkInput:function(node){\r\n\t\t\t_event(toNode(node), \"keydown\", bind(function(e){\r\n\t\t\t//abort, when editor was not initialized yet\r\n\t\t\t\tif (!this.config.$popup) return;\r\n\r\n\t\t\t\tvar code = e.which || e.keyCode, list = this.getInputNode();\r\n\t\t\t\tif(!list.isVisible()) return;\r\n\r\n\t\t\t\tif(list.moveSelection && code < 41 && code > 32){\r\n\t\t\t\t\tvar dir;\r\n\t\t\t\t\tif(code == 33) dir = \"pgup\";\r\n\t\t\t\t\tif(code == 34) dir = \"pgdown\";\r\n\t\t\t\t\tif(code == 35) dir = \"bottom\";\r\n\t\t\t\t\tif(code == 36) dir = \"top\";\r\n\t\t\t\t\tif(code == 37) dir = \"left\";\r\n\t\t\t\t\tif(code == 38) dir = \"up\";\r\n\t\t\t\t\tif(code == 39) dir = \"right\";\r\n\t\t\t\t\tif(code == 40) dir = \"down\";\r\n\r\n\t\t\t\t\tlist.moveSelection(dir);\r\n\t\t\t\t} \r\n\t\t\t\t// shift+enter support for 'popup' editor\r\n\t\t\t\t// popup中，按enter换行，shift+enter或ctrl+enter完成录入。\tadd by cloud.zhong\r\n\t\t\t\telse if(code === 13 && ( e.target.nodeName !== \"TEXTAREA\" || e.shiftKey || e.ctrlKey))\r\n\t\t\t\t\tcallEvent(\"onEditEnd\", []);\r\n\t\t\t\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tpopupInit:function(){},\r\n\t\tpopupType:\"text\",\r\n\t\trender\t:function(){ return {}; },\r\n\t\t$inline:true\r\n\t}\r\n};\r\n\r\neditors.color = extend({\r\n\tfocus\t:function(){},\r\n\tpopupType:\"color\",\r\n\tpopupInit:function(popup){\r\n\t\tpopup.getChildViews()[0].attachEvent(\"onItemClick\", function(value){\r\n\t\t\tcallEvent(\"onEditEnd\",[value]);\r\n\t\t});\r\n\t}\r\n}, editors.popup);\r\n\r\neditors.date = extend({\r\n\tfocus\t:function(){},\r\n\tpopupType:\"date\",\r\n\tsetValue:function(value){\r\n\t\tthis._is_string = this.config.stringResult || (value && typeof value == \"string\");\r\n\t\teditors.popup.setValue.call(this, value);\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this.getInputNode().getValue(this._is_string?i18n.parseFormatStr:\"\")||\"\";\r\n\t},\r\n\tpopupInit:function(popup){\r\n\t\tpopup.getChildViews()[0].attachEvent(\"onDateSelect\", function(value){\r\n\t\t\tcallEvent(\"onEditEnd\",[value]);\r\n\t\t});\r\n\t}\r\n}, editors.popup);\r\n\r\neditors.combo = extend({\r\n\t_create_suggest:function(config){\r\n\t\tlet suggest, id;\r\n\t\tif (this.config.popup){\r\n\t\t\tsuggest = this.config.popup;\r\n\t\t\tid = suggest.config.id;\r\n\t\t}\r\n\t\telse if (config){\r\n\t\t\tid = create_suggest(config);\r\n\t\t\tsuggest = $$(id);\r\n\t\t} else\r\n\t\t\tid = this._shared_suggest(config);\r\n\r\n\t\tattach_editend(suggest);\r\n\t\treturn id;\r\n\t},\r\n\t_shared_suggest:function(){\r\n\t\tvar e = editors.combo;\r\n\t\treturn (e._suggest = e._suggest || this._create_suggest(true));\r\n\t},\r\n\trender:function(){\r\n\t\tvar node = create(\"div\", {\r\n\t\t\t\"class\":\"webix_dt_editor\"\r\n\t\t}, \"<input type='text' role='combobox' aria-label='\"+getLabel(this.config)+\"'>\");\r\n\r\n\t\t//save suggest id for future reference\t\t\r\n\t\tvar suggest = this.config.suggest = this._create_suggest(this.config.suggest);\r\n\r\n\t\tif (suggest){\r\n\t\t\t$$(suggest).linkInput(node.firstChild, true);\r\n\t\t\t_event(node.firstChild, \"click\", bind(this.showPopup, this));\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\tgetPopup:function(){\r\n\t\treturn $$(this.config.suggest);\r\n\t},\r\n\tshowPopup:function(){\r\n\t\tvar popup = this.getPopup();\r\n\t\tvar list = popup.getList();\r\n\t\tvar input = this.getInputNode();\r\n\t\tvar value = this._initial_value;\r\n\r\n\t\tpopup.show(input);\r\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\r\n\t\tif (value){\r\n\t\t\tassert(list.exists(value), \"Option with ID \"+value+\" doesn't exist\");\r\n\t\t\tif (list.exists(value)){\r\n\t\t\t\tlist.select(value);\r\n\t\t\t\tlist.showItem(value);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlist.unselect();\r\n\t\t\tlist.showItem(list.getFirstId());\r\n\t\t}\r\n\t\tpopup._last_input_target = input;\r\n\t},\r\n\tafterRender:function(){\r\n\t\tthis.showPopup();\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tthis._initial_value = value;\r\n\t\tif (this.config.suggest){\r\n\t\t\tvar sobj = $$(this.config.suggest);\r\n\t\t\tvar data =  this.config.collection || this.config.options;\r\n\t\t\tif (data)\r\n\t\t\t\tsobj.getList().data.importData(data);\r\n\r\n\t\t\tthis.getInputNode(this.node).value = sobj.getItemText(value);\r\n\t\t}\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar value = this.getInputNode().value;\r\n\t\tif (this.config.suggest){\r\n\t\t\tvar suggest = $$(this.config.suggest),\r\n\t\t\t\tlist = suggest.getList();\r\n\t\t\tif (value || (list.getSelectedId && list.getSelectedId()))\t\r\n\t\t\t\tvalue = suggest.getSuggestion(value);\r\n\t\t}\r\n\t\r\n\t\treturn value;\r\n\t}\r\n}, editors.text);\r\n\r\n\r\neditors.richselect = extend({\r\n\tfocus:function(){},\r\n\tgetValue:function(){\r\n\t\treturn this.getPopup().getValue();\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvar suggest =  this.config.collection || this.config.options;\r\n\t\tthis.getInputNode();\r\n\t\tif (suggest)\r\n\t\t\tthis.getPopup().getList().data.importData(suggest);\r\n\r\n\t\tthis.getPopup().show(this.node);\r\n\t\tthis.getPopup().setValue(value);\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn this.getPopup().getList();\r\n\t},\r\n\tpopupInit:function(popup){\r\n\t\tpopup._show_selection = function(){};\r\n\t\tpopup.linkInput(document.body);\r\n\r\n\t\tattach_editend(popup);\r\n\t},\r\n\tpopupType:\"richselect\"\r\n}, editors.popup);\r\n\r\neditors.password = extend({\r\n\trender:function(){\r\n\t\treturn create(\"div\", {\r\n\t\t\t\"class\":\"webix_dt_editor\"\r\n\t\t}, \"<input type='password' aria-label='\"+getLabel(this.config)+\"'>\");\r\n\t}\r\n}, editors.text);\r\n\r\n// 多选标签 add by cloud.zhong\r\neditors.multicombo = extend({\r\n\tpopupType: \"multicombo\",\r\n\tsetValue: function (value) {\r\n\t\tvar suggest = this.config.collection || this.config.options;\r\n\t\tif (suggest) this.getPopup().getChildViews()[0].getList().data.importData(suggest);\r\n\t\tthis.getPopup().show(this.node);\r\n\t\tthis.getPopup().getChildViews()[0].setValue(value);\r\n\t},\r\n\tgetValue: function () {\r\n\t\treturn this.getInputNode().getValue() || \"\";\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn this.getPopup().getChildViews()[0];\r\n\t},\r\n\t// 第一次创建popup时调用\r\n\tpopupInit: function (popup) {\r\n\t\tpopup.getChildViews()[0].getList().attachEvent(\"onItemClick\", function (id, e) {\r\n\t\t\tpreventEvent(e);\r\n\t\t});\r\n\t}\r\n}, editors.popup);\r\n\r\n// 文件上传 add by cloud.zhong\r\neditors.uploader = extend({\r\n\tpopupType: \"uploader\",\r\n\tsetValue: function (value) {\r\n\t\tthis.getPopup().show(this.node);\r\n\t\tthis.getInputNode().setValue(value);\r\n\t},\r\n\tgetValue: function () {\r\n\t\treturn this.getInputNode().getValue() || \"\";\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn this.getPopup().queryView({view: \"uploader\"});\r\n\t}\r\n}, editors.popup);\r\n\r\neditors.$popup = {\r\n\ttext:{\r\n\t\tview:\"popup\", width:250, height:150,\r\n\t\tbody:{ view:\"textarea\" }\r\n\t},\r\n\tcolor:{\r\n\t\tview:\"popup\",\r\n\t\tbody:{ view:\"colorboard\" }\r\n\t},\r\n\tdate:{\r\n\t\tview:\"popup\", width:250, height:250, padding:0,\r\n\t\tbody:{ view:\"calendar\", icons:true, borderless:true }\r\n\t},\r\n\trichselect:{\r\n\t\tview:\"suggest\",\r\n\t\tbody:{ view:\"list\", select:true }\r\n\t},\r\n\tmultiselect:{\r\n\t\tview:\"multisuggest\",\r\n\t\tsuggest:{\r\n\t\t\tbutton:true\r\n\t\t}\r\n\t},\r\n\t// 多选标签 add by cloud.zhong\r\n\tmulticombo: {\r\n\t\tview: \"popup\",\r\n\t\twidth: 500,\r\n\t\theight: 150,\r\n\t\tbody: {\r\n\t\t\tview: \"multicombo\",\r\n\t\t\toptions: [],\r\n\t\t\tsuggest: {selectAll: true, data: []}\r\n\t\t}\r\n\t},\r\n\t// 文件上传 add by cloud.zhong\r\n\tuploader: {\r\n\t\tview: \"popup\",\r\n\t\twidth: 500,\r\n\t\theight: 150,\r\n\t\tbody: {\r\n\t\t\trows: [\r\n\t\t\t\t{view: \"uploader\", link: \"datatable_uploader_list\"},\r\n\t\t\t\t{view: \"list\", id: \"datatable_uploader_list\", type:\"uploader\", height: 0, autoheight: true, borderless: true}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default editors;","import {remove, removeCss, addCss} from \"../webix/html\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {extend, bind, delay, isUndefined} from \"../webix/helpers\";\r\nimport {ui, $$} from \"../ui/core\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {attachEvent, callEvent, detachEvent} from \"../webix/customevents\";\r\nimport Undo from \"../core/undo\";\r\n\r\n\r\nimport globalState from \"../core/state\";\r\nimport editors from \"../webix/editors\";\r\n/*\r\n\tBehavior:EditAbility - enables item operation for the items\r\n\t\r\n\t@export\r\n\t\tedit\r\n\t\tstopEdit\r\n*/\r\n\r\nconst EditAbility ={\r\n\tdefaults:{\r\n\t\teditaction:\"click\"\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis._editors = {};\r\n\t\tthis._in_edit_mode = 0;\r\n\t\tthis._edit_open_time = 0;\r\n\t\tthis._contentobj.style.position = \"relative\";\r\n\t\tif (config)\r\n\t\t\tconfig.onDblClick = config.onDblClick || {};\r\n\r\n\t\tthis.attachEvent(\"onAfterRender\", this._refocus_inline_editor);\r\n\r\n\t\t//when we call extend the editable prop can be already set\r\n\t\tif (this._settings.editable)\r\n\t\t\tthis._init_edit_events_once();\r\n\r\n\t\textend(this,Undo);\r\n\t},\r\n\t_refocus_try:function(newnode){\r\n\t\ttry{ //Chrome throws an error if selectionStart is not accessible\r\n\t\t\tif (typeof newnode.selectionStart == \"number\") {\r\n\t\t\t\tnewnode.selectionStart = newnode.selectionEnd = newnode.value.length;\r\n\t\t\t} else if (typeof newnode.createTextRange != \"undefined\") {\r\n\t\t\t\tvar range = newnode.createTextRange();\r\n\t\t\t\trange.collapse(false);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t} catch(e){} // eslint-disable-line\r\n\t},\r\n\t_refocus_inline_editor:function(){\r\n\t\tvar editor = this.getEditor();\r\n\t\tif (editor && editor.$inline && !editor.getPopup){\r\n\t\t\tvar newnode = this._locateInput(editor);\r\n\t\t\tif (newnode && newnode != editor.node){\r\n\t\t\t\tvar text = editor.node.value;\r\n\t\t\t\teditor.node = newnode;\r\n\t\t\t\tnewnode.value = text;\r\n\t\t\t\tnewnode.focus();\r\n\r\n\t\t\t\tthis._refocus_try(newnode);\r\n\t\t\t} else \r\n\t\t\t\tthis.editStop();\r\n\t\t}\r\n\t},\r\n\teditable_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tthis._init_edit_events_once();\r\n\t\treturn value;\r\n\t},\r\n\t_init_edit_events_once:function(){\r\n\t\t//will close editor on any click outside\r\n\t\tconst e1 = attachEvent(\"onEditEnd\", bind(function(){\r\n\t\t\tif (this._in_edit_mode)\r\n\t\t\t\tthis.editStop();\r\n\t\t}, this));\r\n\t\tconst e2 = attachEvent(\"onClick\", bind(function(e){\r\n\t\t\t//but ignore click which opens editor\r\n\t\t\tif (this._in_edit_mode && (new Date())-this._edit_open_time > 200){\r\n\t\t\t\tif (!this._last_editor || this._last_editor.popupType || !e || ( !this._last_editor.node || !this._last_editor.node.contains(e.target)))\r\n\t\t\t\t\tthis.editStop();\r\n\t\t\t}\r\n\t\t}, this));\r\n\r\n\t\tthis.attachEvent(\"onDestruct\", function(){ detachEvent(e1); detachEvent(e2); });\r\n\t\t\r\n\t\t//property sheet has simple data object, without events\r\n\t\tif (this.data.attachEvent)\r\n\t\t\tthis.data.attachEvent(\"onIdChange\", bind(function(oldid, newid){\r\n\t\t\t\tthis._changeEditorId(oldid, newid);\r\n\t\t\t}, this));\r\n\r\n\t\t//when clicking on row - will start editor\r\n\t\tthis.attachEvent(\"onItemClick\", function(id){\r\n\t\t\tif (this._settings.editable && this._settings.editaction == \"click\")\r\n\t\t\t\tthis.edit(id);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onItemDblClick\", function(id){\r\n\t\t\tif (this._settings.editable && this._settings.editaction == \"dblclick\")\r\n\t\t\t\tthis.edit(id);\r\n\t\t});\r\n\t\t//each time when we clicking on input, reset timer to prevent self-closing\r\n\t\tthis._reset_active_editor = bind(function(){\r\n\t\t\tthis._edit_open_time = new Date();\r\n\t\t},this);\r\n\r\n\t\tthis._init_edit_events_once = function(){};\r\n\r\n\t\tif (this._component_specific_edit_init)\r\n\t\t\tthis._component_specific_edit_init();\r\n\t},\r\n\t_handle_live_edits:function(){\r\n\t\tdelay(function(){\r\n\t\t\tvar editor = this.getEditor();\r\n\t\t\tif (editor && editor.config.liveEdit){\r\n\t\t\t\tvar state = { value:editor.getValue(), old: editor.value };\r\n\t\t\t\tif (state.value == state.old) return;\r\n\r\n\t\t\t\teditor.value = state.value;\r\n\t\t\t\tthis._set_new_value(editor, state.value, false);\r\n\t\t\t\tthis.callEvent(\"onLiveEdit\", [state, editor]);\r\n\t\t\t}\r\n\t\t}, this);\r\n\t},\r\n\t_show_editor_form:function(id){\r\n\t\tvar form = this._settings.form;\r\n\t\tif (typeof form != \"string\")\r\n\t\t\tthis._settings.form = form = ui(form).config.id;\r\n\r\n\t\tform = $$(form);\r\n\t\tvar realform = form.setValues?form:form.getChildViews()[0];\r\n\r\n\t\t\r\n\t\trealform.setValues(this.getItem(id.row || id));\r\n\t\tform.config.master = this.config.id;\r\n\t\tform.show( this.getItemNode(id) );\r\n\r\n\t\tvar first = realform.getChildViews()[0];\r\n\t\tif (first.focus)\r\n\t\t\tfirst.focus();\r\n\t},\r\n\tedit:function(id, preserve, show){\r\n\t\tif (!this._settings.editable || !this.callEvent(\"onBeforeEditStart\", [id])) return;\r\n\t\tif (this._settings.form)\r\n\t\t\treturn this._show_editor_form(id);\r\n\r\n\t\tvar editor = this._get_editor_type(id);\r\n\t\tif (editor){\r\n\t\t\tif (this.getEditor(id)) return;\r\n\t\t\tif (!preserve) this.editStop();\r\n\r\n\t\t\t//render html input\r\n\t\t\tassert(editors[editor], \"Invalid editor type: \"+editor);\r\n\t\t\tvar type = extend({}, editors[editor]);\r\n\r\n\t\t\tvar node = this._init_editor(id, type, show);\r\n\t\t\tif (type.config.liveEdit)\r\n\t\t\t\tthis._live_edits_handler = this.attachEvent(\"onKeyPress\", this._handle_live_edits);\r\n\r\n\t\t\tvar area = type.getPopup?type.getPopup(node)._viewobj:node;\r\n\r\n\t\t\tif (area)\r\n\t\t\t\t_event(area, \"click\", this._reset_active_editor);\r\n\t\t\tif (node)\r\n\t\t\t\t_event(node, \"change\", this._on_editor_change, { bind:{ view:this, id:id }});\r\n\t\t\tif (show !== false)\r\n\t\t\t\ttype.focus();\r\n\r\n\t\t\tif (this.$fixEditor)\r\n\t\t\t\tthis.$fixEditor(type);\r\n\r\n\t\t\t//save time of creation to prevent instant closing from the same click\r\n\t\t\tthis._edit_open_time = globalState.edit_open_time = new Date();\r\n\r\n\t\t\tUIManager.setFocus(this, true);\r\n\t\t\tthis.callEvent(\"onAfterEditStart\", [id]);\r\n\t\t\treturn type;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tgetEditor:function(id){\r\n\t\tif (!id)\r\n\t\t\treturn this._last_editor;\r\n\r\n\t\treturn this._editors[id];\r\n\t},\r\n\t_changeEditorId:function(oldid, newid)\t{\r\n\t\tvar editor = this._editors[oldid];\r\n\t\tif (editor){\r\n\t\t\tthis._editors[newid] = editor;\r\n\t\t\teditor.id = newid;\r\n\t\t\tdelete this._editors[oldid];\r\n\t\t}\r\n\t},\r\n\t_on_editor_change:function(){\r\n\t\tif (this.view.hasEvent(\"onEditorChange\"))\r\n\t\t\tthis.view.callEvent(\"onEditorChange\", [this.id, this.view.getEditorValue(this.id) ]);\r\n\t},\r\n\t_get_edit_config:function(){\r\n\t\treturn this._settings;\r\n\t},\r\n\t_init_editor:function(id, type, show){\r\n\t\ttype.config = this._get_edit_config(id);\r\n\t\tvar node = type.render();\r\n\r\n\t\tif (type.$inline)\r\n\t\t\tnode = this._locateInput(id);\r\n\t\ttype.node = node;\r\n\r\n\t\tvar item = this.getItem(id);\r\n\t\t//value can be configured by editValue option\r\n\t\tvar value = item[this._settings.editValue||\"value\"];\r\n\t\t//if property was not defined - use empty value\r\n\t\tif (isUndefined(value))\r\n\t\t\tvalue = \"\";\r\n\r\n\t\ttype.setValue(value, item);\r\n\t\ttype.value = value;\r\n\r\n\t\tthis._addEditor(id, type);\r\n\r\n\t\t//show it over cell\r\n\t\tif (show !== false)\r\n\t\t\tthis.showItem(id);\r\n\t\tif (!type.$inline)\r\n\t\t\tthis._sizeToCell(id, node, true);\r\n\r\n\t\tif (type.afterRender)\r\n\t\t\ttype.afterRender();\r\n\r\n\t\treturn node;\r\n\t},\r\n\t_locate_cell:function(id){\r\n\t\treturn this.getItemNode(id);\r\n\t},\r\n\t_locateInput:function(id){\r\n\t\tvar cell = this._locate_cell(id);\r\n\t\tif (cell)\r\n\t\t\tcell = cell.getElementsByTagName(\"input\")[0] || cell;\r\n\r\n\t\treturn cell;\r\n\t},\r\n\t_get_editor_type:function(){\r\n\t\treturn this._settings.editor;\r\n\t},\r\n\t_addEditor:function(id, type){\r\n\t\ttype.id = id;\r\n\t\tthis._editors[id]= this._last_editor = type;\r\n\t\tthis._in_edit_mode++;\r\n\t},\r\n\t_removeEditor:function(editor){\r\n\t\tif (this._last_editor == editor)\r\n\t\t\tthis._last_editor = 0;\r\n\t\t\r\n\t\tif (editor.destroy)\r\n\t\t\teditor.destroy();\r\n\r\n\t\tdelete editor.popup;\r\n\t\tdelete editor.node;\r\n\r\n\t\tdelete this._editors[editor.id];\r\n\t\tthis._in_edit_mode--;\r\n\t},\r\n\tfocusEditor:function(){\r\n\t\tvar editor = this.getEditor.apply(this, arguments);\r\n\t\tif (editor && editor.focus)\r\n\t\t\teditor.focus();\r\n\t},\r\n\teditCancel:function(){\r\n\t\tthis.editStop(null, null, true);\r\n\t},\r\n\t_applyChanges: function(el){\r\n\t\tif (el){\r\n\t\t\tvar ed = this.getEditor();\r\n\t\t\tif (ed && ed.getPopup && ed.getPopup() == el.getTopParentView()) return;\r\n\t\t}\r\n\t\tthis.editStop();\r\n\t},\r\n\teditStop:function(id){\r\n\t\tif (this._edit_stop) return;\r\n\t\tthis._edit_stop = 1;\r\n\r\n\r\n\t\tvar cancel = arguments[2];\r\n\t\tvar result = 1;\r\n\t\tif (!id){\r\n\t\t\tthis._for_each_editor(function(editor){\r\n\t\t\t\tresult = result * this._editStop(editor, cancel);\r\n\t\t\t});\r\n\t\t} else \r\n\t\t\tresult = this._editStop(this._editors[id], cancel);\r\n\r\n\t\tthis._edit_stop = 0;\r\n\t\treturn result;\r\n\t},\r\n\t_cellPosition:function(id){\r\n\t\tvar html = this.getItemNode(id);\r\n\t\treturn {\r\n\t\t\tleft:html.offsetLeft, \r\n\t\t\ttop:html.offsetTop,\r\n\t\t\theight:html.offsetHeight,\r\n\t\t\twidth:html.offsetWidth,\r\n\t\t\tparent:this._contentobj\r\n\t\t};\r\n\t},\r\n\t_sizeToCell:function(id, node, inline){\r\n\t\t//fake inputs\r\n\t\tif (!node.style) return;\r\n\r\n\t\tvar pos = this._cellPosition(id, null, true);\r\n\r\n\t\tnode.style.top = pos.top + \"px\";\r\n\t\tnode.style.left = pos.left + \"px\";\r\n\r\n\t\tnode.style.width = pos.width-1+\"px\";\r\n\t\tnode.style.height = pos.height-1+\"px\";\r\n\r\n\t\tnode.top = pos.top; //later will be used during y-scrolling\r\n\r\n\t\tif (inline) pos.parent.appendChild(node);\r\n\t\treturn pos;\r\n\t},\r\n\t_for_each_editor:function(handler){\r\n\t\tfor (var editor in this._editors)\r\n\t\t\thandler.call(this, this._editors[editor]);\r\n\t},\r\n\t_editStop:function(editor, ignore){\r\n\t\tif (!editor || globalState._final_destruction) return;\r\n\t\tvar state = { \r\n\t\t\tvalue : this._get_new_value(editor), \r\n\t\t\told : editor.value\r\n\t\t};\r\n\t\tif (this.callEvent(\"onBeforeEditStop\", [state, editor, ignore])){\r\n\t\t\tif (!ignore){\r\n\t\t\t\t//special case, state.old = 0, state.value = \"\"\r\n\t\t\t\t//we need to state.old to string, to detect the change\r\n\t\t\t\tvar old = state.old;\r\n\t\t\t\tif (typeof state.value == \"string\") old += \"\";\r\n\r\n\t\t\t\tif (old != state.value || editor.config.liveEdit){\r\n\t\t\t\t\tvar item = this._set_new_value(editor, state.value, true);\t\r\n\t\t\t\t\tthis.updateItem(editor.row || editor.id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (editor.$inline)\r\n\t\t\t\teditor.node = null;\r\n\t\t\telse\r\n\t\t\t\tremove(editor.node);\r\n\r\n\t\t\tvar popup = editor.config.suggest;\r\n\t\t\tif (popup && typeof popup == \"string\")\r\n\t\t\t\t$$(popup).hide();\r\n\r\n\t\t\tthis._removeEditor(editor);\r\n\t\t\tif (this._live_edits_handler)\r\n\t\t\t\tthis.detachEvent(this._live_edits_handler);\r\n\r\n\t\t\tthis.callEvent(\"onAfterEditStop\", [state, editor, ignore]);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\tvalidateEditor:function(id){\r\n\t\tvar result = true;\r\n\t\tif (this._settings.rules){\r\n\t\t\tvar editor = this.getEditor(id);\r\n\t\t\tvar key = editor.column||this._settings.editValue||\"value\";\r\n\t\t\tvar rule = this._settings.rules[key];\r\n\t\t\tvar all = this._settings.rules.$all;\r\n\r\n\t\t\tif (rule || all){\r\n\t\t\t\tvar obj = this.data.getItem(editor.row||editor.id);\r\n\t\t\t\tvar value = editor.getValue();\r\n\t\t\t\tvar input = editor.getInputNode();\r\n\r\n\t\t\t\tif (rule)\r\n\t\t\t\t\tresult = rule.call(this, value, obj, key);\r\n\t\t\t\tif (all)\r\n\t\t\t\t\tresult = all.call(this, value, obj, key) && result;\r\n\t\t\t\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tremoveCss(input, \"webix_invalid\");\r\n\t\t\t\telse\r\n\t\t\t\t\taddCss(input, \"webix_invalid\");\r\n\r\n\t\t\t\tcallEvent(\"onLiveValidation\", [editor, result, obj, value]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tgetEditorValue:function(id){\r\n\t\tvar editor;\r\n\t\tif (arguments.length === 0)\r\n\t\t\teditor = this._last_editor;\r\n\t\telse\r\n\t\t\teditor = this.getEditor(id);\r\n\r\n\t\tif (editor)\r\n\t\t\treturn editor.getValue();\r\n\t},\r\n\tgetEditState:function(){\r\n\t\treturn this._last_editor || false;\r\n\t},\r\n\teditNext:function(next, from){ \r\n\t\tnext = next !== false; //true by default\r\n\t\tif (this._in_edit_mode == 1 || from){\r\n\t\t\t//only if one editor is active\r\n\t\t\tvar editor_next = this._find_cell_next((this._last_editor || from), function(id){\r\n\t\t\t\tif (this._get_editor_type(id))\r\n\t\t\t\t\treturn true;\r\n\t\t\t\treturn false;\r\n\t\t\t}, next);\r\n\r\n\t\t\tif (this.editStop()){\t//if we was able to close previous editor\r\n\t\t\t\tif (editor_next){\t//and there is a new target\r\n\t\t\t\t\tthis.edit(editor_next);\t//init new editor\r\n\t\t\t\t\tthis._after_edit_next(editor_next);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//stab, used in datatable\r\n\t_after_edit_next:function(){},\r\n\t_find_cell_next:function(start, check, direction){\r\n\t\tvar row = this.getIndexById(start.id);\r\n\t\tvar order = this.data.order;\r\n\t\t\r\n\t\tif (direction){\r\n\t\t\tfor (let i=row+1; i<order.length; i++){\r\n\t\t\t\tif (check.call(this, order[i]))\r\n\t\t\t\t\treturn order[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i=row-1; i>=0; i--){\r\n\t\t\t\tif (check.call(this, order[i]))\r\n\t\t\t\t\treturn order[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\t_get_new_value(editor){\r\n\t\treturn editor.getValue();\r\n\t},\r\n\t_set_new_value:function(editor, new_value, copy){\r\n\t\tvar item = copy ? {} : this.getItem(editor.id);\r\n\t\titem[this._settings.editValue||\"value\"] = new_value;\r\n\t\treturn item;\r\n\t}\r\n};\r\n\r\nexport default EditAbility;","import {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\n\r\n\r\nconst FlexLayout = {\r\n\t$init:function(){\r\n\t\tthis.$view.className += \" webix_flexlayout\";\r\n\t},\r\n\t_fix_vertical_layout:function(){\r\n\r\n\t},\r\n\t_beforeResetBorders:function(){\r\n\r\n\t},\r\n\t_afterResetBorders:function(){\r\n\r\n\t},\r\n\t$getSize:function(){\r\n\t\tif (DEBUG) debug_size_box_start(this, true);\r\n\t\t\r\n\t\tvar w=0, h=0, g = this._settings.gravity;\r\n\t\tthis._sizes = [];\r\n\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tvar size = this._cells[i].$getSize(0,0);\r\n\t\t\tthis._sizes.push(size);\r\n\r\n\t\t\tw = Math.max(w, size[0]);\r\n\t\t\th = Math.max(h, size[2]);\r\n\t\t}\r\n\r\n\t\tw += this._padding.left + this._padding.right;\r\n\t\th += this._padding.top + this._padding.bottom;\r\n\r\n\t\tif (this._settings.width)\r\n\t\t\tw = Math.max(w, this._settings.width);\r\n\t\tif (this._settings.height)\r\n\t\t\th = Math.max(h, this._settings.height);\r\n\r\n\t\tvar self_size = [w, 100000, h, 100000, g];\r\n\t\tif (DEBUG) debug_size_box_end(this, self_size);\r\n\t\treturn self_size;\r\n\t},\r\n\trender:function(){ this.resize(); },\r\n\t_set_child_size:function(){\r\n\t\tif (!this.isVisible(this._settings.id)) return;\r\n\t\tvar st = this.$view.style;\r\n\t\tvar margin = Math.round(this._margin/2);\r\n\t\tst.paddingTop = this._padding.top-margin + \"px\";\r\n\t\tst.paddingBottom = this._padding.bottom-margin + \"px\";\r\n\t\tst.paddingLeft = this._padding.left-margin + \"px\";\r\n\t\tst.paddingRight = this._padding.right-margin + \"px\";\r\n\r\n\t\tfor (let i=0; i<this._cells.length; i++){\r\n\t\t\tif (this._cells[i]._settings.hidden) continue;\r\n\t\t\tlet view = this._cells[i].$view;\r\n\t\t\tlet size = this._sizes[i];\r\n\t\t\tlet config = this._cells[i]._settings;\r\n\r\n\t\t\tif (view){\r\n\t\t\t\tview.style.minWidth = size[0]+\"px\";\r\n\t\t\t\tif (size[1] < 100000 && size[1] != size[0])\r\n\t\t\t\t\tview.style.maxWidth = size[1]+\"px\";\r\n\r\n\t\t\t\tview.style.flexBasis = config.flexBasis || (size[0])+\"px\";\r\n\t\t\t\tview.style.flexGrow = config.flexGrow || ((size[1] != size[0]) ? size[4] : 0);\r\n\t\t\t\tview.style.height = (size[3] != size[2]) ? \"auto\" : (size[2] + \"px\");\r\n\r\n\t\t\t\tview.style.minHeight = size[2]+\"px\";\r\n\t\t\t\tif (size[3] < 100000 && size[3] != size[2])\r\n\t\t\t\t\tview.style.maxHeight = size[3]+\"px\";\r\n\r\n\t\t\t\tview.style.margin = margin + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar whs = [];\r\n\t\tfor (let i=0; i<this._cells.length; i++){\r\n\t\t\tif (this._cells[i]._settings.hidden) continue;\r\n\t\t\tlet view = this._cells[i].$view;\r\n\t\t\twhs[i] = [view.offsetWidth, view.offsetHeight];\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i=0; i<this._cells.length; i++){\r\n\t\t\tif (this._cells[i]._settings.hidden) continue;\r\n\t\t\tlet cell = this._cells[i];\r\n\t\t\tlet view = cell.$view;\r\n\t\t\tif (view){\r\n\t\t\t\tcell._settings.flex = true;\r\n\t\t\t\tlet size = this._sizes[i];\r\n\t\t\t\tvar h = size[2] == size[3] ? size[2] : whs[i][1];\r\n\t\t\t\tcell.$setSize(whs[i][0], h);\r\n\t\t\t\tcell._settings.flex = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.$height = this._content_height = this.$view.scrollHeight;\r\n\t\tthis.$view.style.height = this._content_height+\"px\";\r\n\t}\r\n};\r\n\r\nexport default FlexLayout;","\r\n\r\nconst GroupMethods = {\r\n\tsum:function(property, data){\r\n\t\tdata = data || this;\r\n\t\tvar summ = 0;\r\n\t\tfor (var i = 0; i < data.length; i++){\r\n\t\t\tconst num = parseFloat(property(data[i]), 10);\r\n\t\t\tif (!isNaN(num))\r\n\t\t\t\tsumm+=num;\r\n\t\t}\r\n\r\n\t\treturn summ;\r\n\t},\r\n\tmin:function(property, data){\r\n\t\tdata = data || this;\r\n\t\tvar min = Infinity;\r\n\r\n\r\n\t\tfor (var i = 0; i < data.length; i++){\r\n\t\t\tconst num = parseFloat(property(data[i]), 10);\r\n\t\t\tif (isNaN(num)) continue;\r\n\t\t\tif (num < min) min = num;\r\n\t\t}\r\n\r\n\t\treturn min === Infinity ? 0 : min*1;\r\n\t},\r\n\tmax:function(property, data){\r\n\t\tdata = data || this;\r\n\t\tvar max = -Infinity;\r\n\r\n\t\tfor (var i = 0; i < data.length; i++){\r\n\t\t\tconst num = parseFloat(property(data[i]), 10);\r\n\t\t\tif (isNaN(num)) continue;\r\n\t\t\tif (num > max) max = num;\r\n\t\t}\r\n\r\n\t\treturn max === -Infinity ? 0 : max*1;\r\n\t},\r\n\tcount:function(property, data){\r\n\t\tvar count = 0;\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tvar some = property(data[i]);\r\n\t\t\tif (some !== null && typeof some !== \"undefined\")\r\n\t\t\t\tcount++;\r\n\t\t}\r\n\t\treturn count;\r\n\t},\r\n\tany:function(property, data){\r\n\t\treturn property(data[0]);\r\n\t},\r\n\tstring:function(property){\r\n\t\treturn property.$name;\r\n\t}\r\n};\r\n\r\nexport default GroupMethods;","import {_to_array, uid} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport GroupMethods from \"../core/groupmethods\";\r\n\r\n\r\nconst GroupStore = {\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onClearAll\", () => this._not_grouped_order = null);\r\n\t\tthis.attachEvent(\"onSyncApply\", () => this._not_grouped_order = null);\r\n\t},\r\n\tungroup:function(target){\r\n\t\tif (this.getBranchIndex){\r\n\t\t\tif (!this._ungroupLevel(target)) return;\r\n\t\t} else {\r\n\t\t\tif (!this._not_grouped_order) return;\r\n\r\n\t\t\tthis.order = this._not_grouped_order;\r\n\t\t\tthis.pull = this._not_grouped_pull;\r\n\t\t}\r\n\t\t\r\n\t\tthis.callEvent(\"onStoreUpdated\",[]);\r\n\t},\r\n\t_ungroupLevel(target){\r\n\t\tconst parent = target || 0;\r\n\t\tconst level = parent == \"0\" ? 1 : this.getItem(parent).$level + 1;\r\n\t\tlet changed = false;\r\n\t\tconst top = this.branch[parent];\r\n\t\tlet order = [];\r\n\r\n\t\tfor (var i=0; i<top.length; i++){\r\n\t\t\tconst id = top[i];\r\n\t\t\tif (this.pull[id].$group){\r\n\t\t\t\tchanged = true;\r\n\t\t\t\tvar group = this.branch[id];\r\n\r\n\t\t\t\tif (group)\r\n\t\t\t\t\tthis.branch[id] = group.filter(a => {\r\n\t\t\t\t\t\tif (!this.pull[a].$footer)\r\n\t\t\t\t\t\t\treturn a;\r\n\t\t\t\t\t\tthis._unregisterItem(a);\r\n\t\t\t\t\t});\r\n\t\t\t\torder = order.concat(this.branch[id] || []);\r\n\t\t\t\tthis._unregisterItem(id);\r\n\t\t\t} else\r\n\t\t\t\torder.push(id);\r\n\t\t}\r\n\r\n\t\tif (!changed) return false;\r\n\t\tthis.branch[parent] = order;\r\n\t\tthis._fix_group_levels(this.branch[parent], parent, level);\r\n\r\n\t\tif (typeof target === \"undefined\")\r\n\t\t\tthis._ungroupLevel();\r\n\r\n\t\treturn true;\r\n\t},\r\n\t_unregisterItem(id){\r\n\t\tdelete this.pull[id];\r\n\t\tdelete this.branch[id];\r\n\t},\r\n\t_group_processing:function(scheme){\r\n\t\tthis.blockEvent();\r\n\t\tthis.group(scheme);\r\n\t\tthis.unblockEvent();\r\n\t},\r\n\t_group_prop_accessor:function(val){\r\n\t\tif (typeof val == \"function\")\r\n\t\t\treturn val;\r\n\t\tconst acc = function(obj){ return obj[val]; };\r\n\t\tacc.$name = val;\r\n\t\treturn acc;\r\n\t},\t\r\n\tgroup:function(config, target){\r\n\t\tassert(config, \"Empty config\");\r\n\t\tlet input;\r\n\r\n\t\tif (typeof config === \"string\"){\r\n\t\t\tinput = config;\r\n\t\t\tconfig = { by:this._group_prop_accessor(config), map:{} };\r\n\t\t} else if (typeof config === \"function\"){\r\n\t\t\tconfig = { by:config, map:{} };\r\n\t\t} else if (typeof config.by === \"string\"){\r\n\t\t\tinput = config.by;\r\n\t\t\tconfig.by = this._group_prop_accessor(config.by);\r\n\t\t}\r\n\t\tconfig.map = config.map || {};\r\n\t\tif (input && !config.map[input])\r\n\t\t\tconfig.map[input] = [input];\r\n\t\tconfig.missing = (config.missing === undefined) ? true : config.missing;\r\n\r\n\t\tif (this.getBranchIndex)\r\n\t\t\treturn this._group_tree(config, target);\r\n\t\t\r\n\t\tif (!this._not_grouped_order){\r\n\t\t\tthis._not_grouped_order = this.order;\r\n\t\t\tthis._not_grouped_pull = this.pull;\r\n\t\t}\r\n\r\n\t\tconst groups = {};\r\n\t\tconst labels = [];\r\n\t\tconst missed = [];\r\n\t\tconst misGroup = config.missing;\r\n\t\tthis.each(function(data){\r\n\t\t\tlet current = config.by(data);\r\n\t\t\tif (!current && current !== 0){\r\n\t\t\t\tif (misGroup === false) return;\r\n\t\t\t\tif (misGroup === true){\r\n\t\t\t\t\tmissed.push(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcurrent = misGroup;\r\n\t\t\t}\r\n\r\n\t\t\tif (!groups[current]){\r\n\t\t\t\tlabels.push({ id:current, value:current, $group:true, $row:config.row });\r\n\t\t\t\tgroups[current] = _to_array();\r\n\t\t\t}\r\n\t\t\tgroups[current].push(data);\r\n\t\t});\r\n\r\n\t\tfor (let i=0; i<labels.length; i++){\r\n\t\t\tlet group = labels[i];\r\n\t\t\tthis._map_group(config.map, group, groups[labels[i].id]);\r\n\r\n\t\t\tif (this.hasEvent(\"onGroupCreated\"))\r\n\t\t\t\tthis.callEvent(\"onGroupCreated\", [group.id, group.value, groups[labels[i].id]]);\r\n\t\t}\r\n\r\n\t\tthis.order = _to_array();\r\n\t\tthis.pull = {};\r\n\t\tthis._fill_pull(labels);\r\n\t\tthis._fill_pull(missed);\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",[]);\r\n\t},\r\n\t_fill_pull:function(arr){\r\n\t\tfor (let i=0; i < arr.length; i++){\r\n\t\t\tlet id = this.id(arr[i]);\r\n\t\t\tif (this.pull[id])\r\n\t\t\t\tid = arr[i].id = uid();\r\n\r\n\t\t\tthis.pull[id] = arr[i];\r\n\t\t\tthis.order.push(id);\r\n\t\t\tif (this._scheme_init)\r\n\t\t\t\tthis._scheme_init(arr[i]);\r\n\t\t}\r\n\t},\r\n\t_map_group:function(map, group, data){\r\n\t\tfor (let prop in map){\r\n\t\t\tlet functor = (map[prop][1]||\"any\");\r\n\t\t\tlet property = this._group_prop_accessor(map[prop][0]);\r\n\t\t\tif (typeof functor != \"function\"){\r\n\t\t\t\tassert(GroupMethods[functor], \"Unknown grouping rule: \"+functor);\r\n\t\t\t\tfunctor = GroupMethods[functor];\r\n\t\t\t}\r\n\r\n\t\t\tgroup[prop] = functor.call(this, property, data);\r\n\t\t}\r\n\t},\r\n\t_group_tree:function(config, parent){\r\n\t\t//prepare\r\n\t\tlet level = 0;\r\n\t\tif (parent)\r\n\t\t\tlevel = this.getItem(parent).$level;\r\n\t\telse parent = 0;\r\n\r\n\t\t//run\r\n\t\tconst topbranch = [];\r\n\t\tconst labels = [];\r\n\t\tconst missed = [];\r\n\r\n\t\tlet order = this.branch[parent];\r\n\t\tlet groups = {};\r\n\t\tfor (let i=0; i<order.length; i++){\r\n\t\t\tconst data = this.getItem(order[i]);\r\n\t\t\tlet current = config.by(data);\r\n\r\n\t\t\tif (!current && current !== 0)\r\n\t\t\t\tif (config.missing === false) continue;\r\n\t\t\t\telse if (config.missing === true){\r\n\t\t\t\t\tmissed.push(data.id);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else current = config.missing;\r\n\r\n\t\t\tlet ancestor = groups[current];\r\n\t\t\tif (!ancestor){\r\n\t\t\t\tlet id = uid();\r\n\t\t\t\tlet newitem = this.pull[id] = { id, value:current, $group:true, $row:config.row};\r\n\t\t\t\tif (this._scheme_init)\r\n\t\t\t\t\tthis._scheme_init(newitem);\r\n\r\n\t\t\t\tlabels.push(newitem);\r\n\t\t\t\tancestor = groups[current] = this.branch[id] = [];\r\n\t\t\t\tancestor._formath = [];\r\n\t\t\t\ttopbranch.push(id);\r\n\t\t\t}\r\n\t\t\tancestor.push(data.id);\r\n\t\t\tancestor._formath.push(data);\r\n\t\t}\r\n\r\n\t\tthis.branch[parent] = topbranch.concat(missed);\r\n\t\tfor (let i=0; i<labels.length; i++){\r\n\t\t\tlet group = labels[i];\r\n\t\t\tthis._map_group(config.map, group, this.branch[labels[i].id]._formath);\r\n\r\n\t\t\tif (this.hasEvent(\"onGroupCreated\"))\r\n\t\t\t\tthis.callEvent(\"onGroupCreated\", [group.id, group.value, this.branch[group.id]._formath]);\r\n\r\n\t\t\tif (config.footer){\r\n\t\t\t\tlet id = \"footer$\"+group.id;\r\n\t\t\t\tlet footer = this.pull[id] = { id:id, $footer:true, value: group.value, $level:level, $count:0, $parent:group.id, $row:config.footer.row};\r\n\r\n\t\t\t\tthis._map_group(config.footer, footer, this.branch[labels[i].id]._formath);\r\n\t\t\t\t\r\n\t\t\t\tthis.branch[group.id].push(footer.id);\r\n\t\t\t\tthis.callEvent(\"onGroupFooter\", [footer.id, footer.value, this.branch[group.id]._formath]);\r\n\t\t\t}\r\n\t\t\tdelete this.branch[group.id]._formath;\r\n\t\t}\r\n\r\n\t\tthis._fix_group_levels(this.branch[parent], parent, level+1);\r\n\t\tthis.callEvent(\"onStoreUpdated\",[]);\r\n\t},\r\n\t_fix_group_levels:function(branch, parent, level){\r\n\t\tif (parent)\r\n\t\t\tthis.getItem(parent).$count = branch.length;\r\n\r\n\t\tfor (let i = 0; i < branch.length; i++) {\r\n\t\t\tconst item = this.pull[branch[i]];\r\n\t\t\titem.$level = level;\r\n\t\t\titem.$parent = parent;\r\n\r\n\t\t\tconst next = this.branch[item.id];\r\n\t\t\tif (next)\r\n\t\t\t\tthis._fix_group_levels(next, item.id, level+1);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default GroupStore;","import {extend} from \"../webix/helpers\";\r\nimport GroupStore from \"../core/groupstore\";\r\n\r\n\r\nconst Group = {\r\n\t$init:function(){\r\n\t\textend(this.data, GroupStore);\r\n\t},\r\n\tgroup:function(config, target){\r\n\t\tif (!target && target !== 0){\r\n\t\t\tthis.$blockRender=true;\r\n\t\t\tthis.data.ungroup();\r\n\t\t\tthis.$blockRender=false;\r\n\t\t}\r\n\t\tthis.data.group(config, target);\r\n\t},\r\n\tungroup:function(target){\r\n\t\tthis.data.ungroup(target);\r\n\t}\r\n};\r\n\r\nexport default Group;","import {preventEvent} from \"../webix/html\";\r\nimport {_power_array} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport UIManager from \"./uimanager\";\r\n\r\n\r\n/*aria-style handling for options of multiple-value controls (radio, segmented, tabbar)*/\r\n\r\nconst HTMLOptions = {\r\n\t$init: function(){\r\n\t\tthis.$ready.push(()=>{\r\n\t\t\tif(!this.customRadio_setter || this.config.customRadio)\r\n\t\t\t\t_event( this.$view, \"keydown\", this._moveSelection, {bind:this});\r\n\t\t});\r\n\t},\r\n\t_focus: function(){\r\n\t\tif(!UIManager.canFocus(this))\r\n\t\t\treturn false;\r\n\r\n\t\tconst input = this._getInputNode();\r\n\t\tif (input)\r\n\t\t\tfor (let i=0; i<input.length; i++)\r\n\t\t\t\tif (input[i].getAttribute(\"tabindex\") == \"0\")\r\n\t\t\t\t\treturn input[i].focus();\r\n\t},\r\n\t_blur: function(){\r\n\t\tconst input = this._getInputNode();\r\n\t\tif (input)\r\n\t\t\tfor (let i=0; i<input.length; i++)\r\n\t\t\t\tif (input[i].getAttribute(\"tabindex\") == \"0\")\r\n\t\t\t\t\treturn input[i].blur();\r\n\t},\r\n\t_moveSelection: function(e){\r\n\t\tconst code = e.which || e.keyCode;\r\n\r\n\t\tif (code>34 && code <41){\r\n\t\t\tconst inp = this._getInputNode();\r\n\t\t\tlet index = false;\r\n\r\n\t\t\tif (!inp.length) return;\r\n\t\t\tpreventEvent(e);\r\n\r\n\t\t\tconst dir = (code === 37 || code === 38 || code === 35)?-1:1;\r\n\t\t\tif (code === 35) index = inp.length-1;\r\n\t\t\telse if (code === 36 ) index = 0;\r\n\t\t\telse {\r\n\t\t\t\tfor (let i=0; i<inp.length; i++)\r\n\t\t\t\t\tif (inp[i].getAttribute(\"tabindex\") == \"0\"){\r\n\t\t\t\t\t\tindex = i + dir;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (index !== false){\r\n\t\t\t\tlet i = index;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tif (i >= inp.length) i = 0;\r\n\t\t\t\t\tif (i < 0) i = inp.length-1;\r\n\r\n\t\t\t\t\tif (!inp[i].getAttribute(\"webix_disabled\")){\r\n\t\t\t\t\t\tconst id = inp[i].getAttribute(/*@attr*/\"button_id\");\r\n\r\n\t\t\t\t\t\tthis.setValue(id);\r\n\t\t\t\t\t\tinp[i].focus();\r\n\t\t\t\t\t\ti = \"success\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse i += dir;\r\n\r\n\t\t\t\t} while(i !== \"success\" && i !== index);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_get_tooltip_data: function(t,e){\r\n\t\tlet id,\r\n\t\t\tnode = e.target;\r\n\t\twhile (node && !node.webix_tooltip){\r\n\t\t\tid = node.getAttribute(\"webix_t_id\");\r\n\t\t\tif (id)\r\n\t\t\t\treturn this.getOption(id);\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\toptionIndex: function(id){\r\n\t\tconst options = this._settings.options;\r\n\t\tfor (let i=0; i<options.length; i++)\r\n\t\t\tif (options[i].id == id)\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t},\r\n\tgetOption: function(id){\r\n\t\tconst index = this.optionIndex(id);\r\n\t\tif (index !== -1)\r\n\t\t\treturn this._settings.options[index];\r\n\t\treturn null;\r\n\t},\r\n\taddOption: function(id, value, show, index){\r\n\t\tlet obj = id;\r\n\t\tif (typeof id != \"object\"){\r\n\t\t\tvalue = value || id;\r\n\t\t\tobj = { id:id, value:value };\r\n\t\t} else {\r\n\t\t\tid = obj.id;\r\n\t\t\tindex = show;\r\n\t\t\tshow = value;\r\n\t\t}\r\n\r\n\t\tif (this.optionIndex(id) === -1){\r\n\t\t\t_power_array.insertAt.call(this._settings.options, obj, index);\r\n\t\t\tthis.refresh();\r\n\r\n\t\t\tthis.callEvent(\"onOptionAdd\", [id, obj]);\r\n\t\t}\r\n\r\n\t\tif (show)\r\n\t\t\tthis.setValue(id);\r\n\t},\r\n\tremoveOption: function(id){\r\n\t\tconst index = this.optionIndex(id);\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tconst options = this._settings.options;\r\n\r\n\t\t\t_power_array.removeAt.call(options, index);\r\n\t\t\tthis.refresh();\r\n\r\n\t\t\t// if we remove a selected option\r\n\t\t\tif (this._settings.value == id)\r\n\t\t\t\tthis._setNextVisible(options, index);\r\n\r\n\t\t\tthis.callEvent(\"onOptionRemove\", [id, this._settings.value]);\r\n\t\t}\r\n\t},\r\n\t_setNextVisible: function(options, index){\r\n\t\tconst size = options.length;\r\n\r\n\t\tif (size && !this.customRadio_setter){\r\n\t\t\tindex = Math.min(index, size-1);\r\n\t\t\t//forward search\r\n\t\t\tfor (let i=index; i<size; i++)\r\n\t\t\t\tif (!options[i].hidden)\r\n\t\t\t\t\treturn this.setValue(options[i].id);\r\n\t\t\t//backward search\r\n\t\t\tfor (let i=index; i>=0; i--)\r\n\t\t\t\tif (!options[i].hidden)\r\n\t\t\t\t\treturn this.setValue(options[i].id);\r\n\t\t}\r\n\r\n\t\t//nothing found\t\t\r\n\t\tthis.setValue(\"\");\r\n\t},\r\n\t_getFirstActive(first){\r\n\t\tconst options = this._settings.options;\r\n\r\n\t\tif (options.length){\r\n\t\t\tfor (let i=0; i<options.length; i++)\r\n\t\t\t\tif (!options[i].hidden && !options[i].disabled)\r\n\t\t\t\t\treturn options[i].id;\r\n\t\t\tif (first)\r\n\t\t\t\treturn options[0].id;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t},\r\n\t_filterOptions: function(options){\r\n\t\tconst copy = [];\r\n\t\tfor(let i=0; i<options.length; i++)\r\n\t\t\tif(!options[i].hidden)\r\n\t\t\t\tcopy.push(options[i]);\r\n\t\treturn copy;\r\n\t},\r\n\t_setOptionState: function(id, field, state){\r\n\t\tconst options = this._settings.options;\r\n\t\tconst index = this.optionIndex(id);\r\n\r\n\t\tif (options[index] && state != !!options[index][field]){\t\t\t\t//new state differs from previous one\r\n\t\t\toptions[index][field] = state;\r\n\r\n\t\t\tif (state && field === \"hidden\" && this._settings.value == id)\t\t//switch to next visible one\r\n\t\t\t\tthis._setNextVisible(options, index);\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\t},\r\n\thideOption: function(id){\r\n\t\tthis._setOptionState(id, \"hidden\", true);\r\n\t},\r\n\tshowOption: function(id){\r\n\t\tthis._setOptionState(id, \"hidden\", false);\r\n\t},\r\n\tdisableOption: function(id){\r\n\t\tthis._setOptionState(id, \"disabled\", true);\r\n\t},\r\n\tenableOption: function(id){\r\n\t\tthis._setOptionState(id, \"disabled\", false);\r\n\t}\r\n};\r\n\r\nexport default HTMLOptions;","import {create} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport {uid} from \"../webix/helpers\";\r\nimport {proto} from \"../ui/core\";\r\n\r\n\r\nconst HtmlMap = proto({\r\n\t$init:function(key){\r\n\t\tthis._id = \"map_\"+uid();\r\n\t\tthis._key = key;\r\n\t\tthis._map = [];\r\n\t\tthis._areas = [];\r\n\t},\r\n\taddRect: function(id,points,userdata) {\r\n\t\tthis._createMapArea(id,\"RECT\",points,userdata);\r\n\t},\r\n\taddPoly: function(id,points,userdata) {\r\n\t\tthis._createMapArea(id,\"POLY\",points,userdata);\r\n\t},\r\n\t_createMapArea:function(id,shape,coords,userdata){\r\n\t\tvar extra_data = \"\";\r\n\t\tif(arguments.length==4) \r\n\t\t\textra_data = \"userdata='\"+userdata+\"'\";\r\n\t\tthis._map.push(\"<area \"+this._key+\"='\"+id+\"' shape='\"+shape+\"' coords='\"+coords.join()+\"' \"+extra_data+\"></area>\");\r\n\t\tthis._areas.push({index: userdata, points:coords});\r\n\r\n\t},\r\n\taddSector:function(id,alpha0,alpha1,x,y,R,ky,userdata){\r\n\t\tvar points = [];\r\n\t\tpoints.push(x);\r\n\t\tpoints.push(Math.floor(y*ky)); \r\n\t\tfor(var i = alpha0; i < alpha1; i+=Math.PI/18){\r\n\t\t\tpoints.push(Math.floor(x+R*Math.cos(i)));\r\n\t\t\tpoints.push(Math.floor((y+R*Math.sin(i))*ky));\r\n\t\t}\r\n\t\tpoints.push(Math.floor(x+R*Math.cos(alpha1)));\r\n\t\tpoints.push(Math.floor((y+R*Math.sin(alpha1))*ky));\r\n\t\tpoints.push(x);\r\n\t\tpoints.push(Math.floor(y*ky)); \r\n\t\t\r\n\t\treturn this.addPoly(id,points,userdata);\r\n\t},\r\n\thide:function(obj, data, mode){\r\n\t\tif (obj.querySelectorAll){\r\n\t\t\tvar nodes = obj.querySelectorAll(\"area[userdata=\\\"\"+data+\"\\\"]\");\r\n\t\t\tfor (var i = 0; i < nodes.length; i++){\r\n\t\t\t\tvar nod = nodes[i];\r\n\t\t\t\tif (mode){\r\n\t\t\t\t\tif (nod.getAttribute(\"coords\")){\r\n\t\t\t\t\t\tnod.coordsdis = nod.getAttribute(\"coords\");\r\n\t\t\t\t\t\tnod.setAttribute(\"coords\", \"\");\r\n\t\t\t\t\t\tnod.coords = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!mode){\r\n\t\t\t\t\tif (nod.coordsdis){\r\n\t\t\t\t\t\tnod.setAttribute(\"coords\", nod.coordsdis);\r\n\t\t\t\t\t\tnod.coords = nod.coordsdis;\r\n\t\t\t\t\t\tnod.coordsdis = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnodes[i].style.display = mode?\"none\":\"\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trender:function(obj){\r\n\t\tvar d = create(\"DIV\");\r\n\t\td.style.cssText=\"position:absolute; width:100%; height:100%; top:0px; left:0px;\";\r\n\t\tobj.appendChild(d);\r\n\t\tvar src = env.isIE?\"\":\"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='\";\r\n\t\td.innerHTML=\"<map id='\"+this._id+\"' name='\"+this._id+\"'>\"+this._map.join(\"\\n\")+\"</map><img \"+src+\" class='webix_map_img' usemap='#\"+this._id+\"'>\";\r\n\t\t\r\n\t\tobj._htmlmap = d; //for clearing routine\r\n\t\t\r\n\t\tthis._map = [];\r\n\t}\r\n});\r\n\r\nexport default HtmlMap;","import {bind} from \"../webix/helpers\";\r\nimport {ui} from \"../ui/core\";\r\nimport state from \"./state\";\r\n\r\nconst IdSpace = {\r\n\t$init:function(){\r\n\t\tthis._elements = {};\r\n\t\tthis._translate_ids = {};\r\n\t\tthis.getTopParentView = this._get_self = bind(function(){ return this;}, this);\r\n\r\n\t\tthis._run_inner_init_logic();\r\n\t\tthis.$ready.push(this._run_after_inner_init_logic);\r\n\t},\r\n\t$$:function(id){\r\n\t\treturn this._elements[id];\r\n\t},\r\n\tinnerId:function(id){\r\n\t\treturn this._translate_ids[id];\r\n\t},\r\n\t_run_inner_init_logic:function(){\r\n\t\tthis._prev_global_col = state._global_collection;\r\n\t\tstate._global_collection = this;\r\n\t},\r\n\t_run_after_inner_init_logic:function(){\r\n\t\tfor (var name in this._elements){\r\n\t\t\tvar input = this._elements[name];\r\n\t\t\tif (this.callEvent && input.mapEvent && !input._evs_map.onitemclick)\r\n\t\t\t\tinput.mapEvent({\r\n\t\t\t\t\tonitemclick:this\r\n\t\t\t\t});\r\n\t\t\tinput.getTopParentView = this._get_self;\r\n\t\t}\r\n\r\n\t\tstate._global_collection = this._prev_global_col;\r\n\t\tthis._prev_global_col = 0;\r\n\t},\r\n\t_destroy_child:function(id){\r\n\t\tdelete this._elements[id];\r\n\t},\r\n\tui:function(){\r\n\t\tthis._run_inner_init_logic();\r\n\t\tvar temp = ui.apply(this, arguments);\r\n\t\tthis._run_after_inner_init_logic();\r\n\t\treturn temp;\r\n\t}\r\n};\r\n\r\n\r\nexport default IdSpace;","import {preventEvent} from \"../webix/html\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {$$} from \"../ui/core\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\nconst KeysNavigation = {\r\n\t$init:function(){\r\n\t\tif(this.getSelectedId)\r\n\t\t\tthis.attachEvent(\"onAfterRender\", this._set_focusable_item);\r\n\t\tif(this.moveSelection)\r\n\t\t\tthis.attachEvent(\"onTabFocus\", this._set_item_focus);\r\n\t},\r\n\t_set_item_focus:function(){\r\n\t\tif(this.getSelectedId){\r\n\t\t\tvar sel = this.getSelectedId(true);\r\n\t\t\tif(!sel.length || !this.getItemNode(sel[0]))\r\n\t\t\t\tthis.moveSelection(\"down\"); //select and show\r\n\t\t}\r\n\t},\r\n\t_set_focusable_item:function(){\r\n\t\tvar sel = this.getSelectedId(true);\r\n\t\tif(!sel.length || !this.getItemNode(sel[0])){\r\n\t\t\tvar node =  this._dataobj.querySelector(\"[\"+this._id+\"]\");\r\n\t\t\tif(node)\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"0\");\r\n\t\t}\r\n\t},\r\n\t_navigation_helper:function(mode){\r\n\t\treturn function(view, e){\r\n\t\t\tvar tag = e.target;\r\n\r\n\t\t\t//ignore clipboard listener\r\n\t\t\tif (!tag.getAttribute(/*@attr*/\"webixignore\")){\r\n\t\t\t\t//ignore hotkeys if focus in the common input\r\n\t\t\t\t//to allow normal text edit operations\r\n\t\t\t\tvar name = tag.tagName;\r\n\t\t\t\tif (name == \"INPUT\" || name == \"TEXTAREA\" || name == \"SELECT\") return true;\r\n\t\t\t}\r\n\r\n\t\t\tif (view && view.moveSelection && view.config.navigation && !view._in_edit_mode){\r\n\t\t\t\tpreventEvent(e);\r\n\t\t\t\treturn view.moveSelection(mode, {shift:e.shiftKey, ctrl:e.ctrlKey});\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmoveSelection:function(mode, details, focus){\r\n\t\tvar config = this._settings;\r\n\t\tif(config.disabled) return;\r\n\t\t//get existing selection\r\n\t\tvar selected = this.getSelectedId(true);\r\n\t\tvar x_layout = (this.count && (config.layout ==\"x\" || config.xCount > 1));\r\n\r\n\t\tif((mode == \"right\" || mode == \"left\") && this._parent_menu){\r\n\t\t\tvar parent = $$(this._parent_menu);\r\n\r\n\t\t\tparent._hide_sub_menu(true);\r\n\t\t\tif(parent.config.layout === \"x\")\r\n\t\t\t\tparent.moveSelection(mode);\r\n\t\t\telse\r\n\t\t\t\tUIManager.setFocus(parent);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!selected.length && this.count()){\r\n\t\t\tif (mode == \"down\" || (mode == \"right\" && x_layout)) mode = \"top\";\r\n\t\t\telse if (mode == \"up\" || (mode == \"left\" && x_layout)) mode = \"bottom\";\r\n\t\t\telse return;\r\n\t\t\tselected = [this.getFirstId()];\r\n\t\t}\r\n\r\n\t\tif (selected.length == 1){  //if we have a selection\r\n\t\t\tselected = selected[0];\r\n\t\t\tvar prev = selected;\r\n\r\n\t\t\tif (mode == \"left\" && this.close)\r\n\t\t\t\treturn this.close(selected);\r\n\t\t\tif (mode == \"right\" && this.open)\r\n\t\t\t\treturn this.open(selected);\r\n\r\n\t\t\telse if (mode == \"top\") {\r\n\t\t\t\tselected = this.getFirstId();\r\n\t\t\t} else if (mode == \"bottom\") {\r\n\t\t\t\tselected = this.getLastId();\r\n\t\t\t} else if (mode == \"up\" || mode == \"left\" || mode == \"pgup\") {\r\n\t\t\t\tlet index = this.getIndexById(selected);\r\n\t\t\t\tlet step = mode == \"pgup\" ? 10 : 1;\r\n\t\t\t\tselected = this.getIdByIndex(Math.max(0, index-step));\r\n\t\t\t} else if (mode == \"down\" || mode == \"right\" || mode == \"pgdown\") {\r\n\t\t\t\tlet index = this.getIndexById(selected);\r\n\t\t\t\tlet step = mode == \"pgdown\" ? 10 : 1;\r\n\t\t\t\tselected = this.getIdByIndex(Math.min(this.count()-1, index+step));\r\n\t\t\t} else {\r\n\t\t\t\tassert(false, \"Not supported selection moving mode\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst dir = (mode == \"up\" || mode == \"left\" || mode == \"pgdown\" || mode == \"bottom\")?-1:1;\r\n\t\t\tif(this._skip_item)\r\n\t\t\t\tselected = this._skip_item(selected, prev, dir);\r\n\r\n\t\t\tthis.showItem(selected);\r\n\t\t\tthis.select(selected);\r\n\r\n\t\t\tif(this.getSubMenu && this.getSubMenu(selected))\r\n\t\t\t\tthis._mouse_move_activation(selected, this.getItemNode(selected));\r\n\r\n\t\t\tif(!this.config.clipboard && focus !== false){\r\n\t\t\t\tvar node = this.getItemNode(selected);\r\n\t\t\t\tif(node) node.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tnavigation_setter:function(value){\r\n\t\t//using global flag to apply hotkey only once\r\n\t\tif (value && !UIManager._global_nav_grid_hotkeys){\r\n\t\t\tUIManager._global_nav_grid_hotkeys = true;\r\n\t\t\t//hotkeys will react on any component but will not work in edit mode\r\n\t\t\t//you can define moveSelection method to handle navigation keys\r\n\t\t\tUIManager.addHotKey(\"up\",         this._navigation_helper(\"up\"));\r\n\t\t\tUIManager.addHotKey(\"down\",       this._navigation_helper(\"down\"));\r\n\t\t\tUIManager.addHotKey(\"right\",      this._navigation_helper(\"right\"));\r\n\t\t\tUIManager.addHotKey(\"left\",       this._navigation_helper(\"left\"));\r\n\r\n\t\t\tUIManager.addHotKey(\"shift+up\",   this._navigation_helper(\"up\"));\r\n\t\t\tUIManager.addHotKey(\"shift+down\", this._navigation_helper(\"down\"));\r\n\t\t\tUIManager.addHotKey(\"shift+right\",   this._navigation_helper(\"right\"));\r\n\t\t\tUIManager.addHotKey(\"shift+left\", this._navigation_helper(\"left\"));\r\n\r\n\t\t\tUIManager.addHotKey(\"ctrl+shift+up\",   this._navigation_helper(\"up\"));\r\n\t\t\tUIManager.addHotKey(\"ctrl+shift+down\", this._navigation_helper(\"down\"));\r\n\t\t\tUIManager.addHotKey(\"ctrl+shift+right\",   this._navigation_helper(\"right\"));\r\n\t\t\tUIManager.addHotKey(\"ctrl+shift+left\", this._navigation_helper(\"left\"));\r\n\r\n\t\t\tUIManager.addHotKey(\"pageup\", \tthis._navigation_helper(\"pgup\"));\r\n\t\t\tUIManager.addHotKey(\"pagedown\",   this._navigation_helper(\"pgdown\"));\r\n\t\t\tUIManager.addHotKey(\"home\", \t    this._navigation_helper(\"top\"));\r\n\t\t\tUIManager.addHotKey(\"end\", \t\tthis._navigation_helper(\"bottom\"));\r\n\r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\nexport default KeysNavigation;","import {uid, isArray} from \"../webix/helpers\";\r\nimport {$$} from \"../ui/core\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\nimport {use} from \"../services\";\r\n\r\nimport template from \"../webix/template\";\r\n\r\n\r\n\r\n/*Data collection mapping logic */\r\n\r\nconst MapCollection = {\r\n\t$init:function(){\r\n\t\tthis.$ready.push(this._create_scheme_init);\r\n\t\tthis.attachEvent(\"onStructureUpdate\", this._create_scheme_init);\r\n\t\tthis.attachEvent(\"onStructureLoad\", function(){\r\n\t\t\tif(!this._scheme_init_order.length)\r\n\t\t\t\tthis._create_scheme_init();\r\n\t\t});\r\n\t},\r\n\t_create_scheme_init:function(){\r\n\t\tvar stack = this._scheme_init_order = [];\r\n\t\tvar config = this._settings;\r\n\r\n\t\tif (config.columns)\r\n\t\t\tthis._build_data_map(config.columns);\r\n\t\tif (this._settings.map)\r\n\t\t\tthis._process_field_map(config.map);\r\n\r\n\t\tif (stack.length){\r\n\t\t\tthis.data._scheme_init = function(obj){\r\n\t\t\t\tfor (var i=0; i<stack.length; i++){\r\n\t\t\t\t\tstack[i](obj);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t_process_field_map:function(map){\r\n\t\tfor (var key in map)\r\n\t\t\tthis._scheme_init_order.push(this._process_single_map(key, map[key]));\r\n\t},\r\n\t_process_single_map:function(target, map, extra){\r\n\t\tvar source = map.replace(/^(\\s|)\\((date|number)\\)/, \"\");\r\n\t\tvar getSource;\r\n\t\tif (source === \"\"){\r\n\t\t\tgetSource = a => a[target];\r\n\t\t} else {\r\n\t\t\tif (source.indexOf(\"#\") === -1 && source.indexOf(\"{\") === -1){\r\n\t\t\t\tsource = \"#\"+source+\"#\";\r\n\t\t\t}\r\n\t\t\tgetSource = template(source);\r\n\t\t}\r\n\r\n\t\tif (map.indexOf(\"(date)\")===0){\r\n\t\t\tif (extra && !extra.format) extra.format = i18n.dateFormatStr;\r\n\r\n\t\t\treturn function(obj){\r\n\t\t\t\tconst dateStr = (getSource(obj) || \"\").toString();\r\n\t\t\t\tobj[target] = i18n.parseFormatDate(dateStr);\r\n\t\t\t};\r\n\t\t} else if (map.indexOf(\"(number)\")===0){\r\n\t\t\treturn function(obj){\r\n\t\t\t\tobj[target] = getSource(obj)*1;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(obj){\r\n\t\t\t\tobj[target] = getSource(obj) || \"\";\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t_build_data_map:function(columns){ //for datatable\r\n\t\tfor (var i=0; i<columns.length; i++){\r\n\t\t\tvar map = columns[i].map;\r\n\t\t\tvar id = columns[i].id;\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = columns[i].id = \"i\"+uid();\r\n\t\t\t\tif (!columns[i].header)\r\n\t\t\t\t\tcolumns[i].header = \"\";\r\n\t\t\t}\r\n\t\t\tif (map)\r\n\t\t\t\tthis._scheme_init_order.push(this._process_single_map(id, map, columns[i]));\r\n\r\n\t\t\tthis._map_options(columns[i]);\r\n\t\t}\r\n\t},\r\n\t_create_collection:function(options){\r\n\t\tif (typeof options === \"string\"){\r\n\t\t\tlet options_view = $$(options);\t\t\t\t\t\t\t\t\t\t//id of some other view\r\n\r\n\t\t\tif (!options_view){\t\t\t\t\t\t\t\t\t\t\t\t\t//or url\r\n\t\t\t\toptions = new (use(\"DataCollection\"))({ url: options });\r\n\t\t\t\tthis._destroy_with_me.push(options);\r\n\t\t\t} else options = options_view;\r\n\t\t\tif (options.getBody)\t\t\t\t\t\t\t\t\t\t\t\t//if it was a view, special check for suggests\r\n\t\t\t\toptions = options_view.getBody();\r\n\r\n\t\t} else if (typeof options === \"function\" || options.$proxy){\t\t\t//proxy or function\r\n\t\t\toptions = new (use(\"DataCollection\"))({ url:options });\r\n\t\t\tthis._destroy_with_me.push(options);\r\n\r\n\t\t} else if (!options.loadNext){\r\n\t\t\tlet array = isArray(options);\r\n\t\t\tlet data = [];\r\n\r\n\t\t\tif (array && typeof options[0] !== \"object\"){\t\t\t\t\t\t//[\"one\", \"two\"]\r\n\t\t\t\tfor (let i=0; i<options.length; i++)\r\n\t\t\t\t\tdata.push({id:options[i], value:options[i]});\r\n\t\t\t\toptions = data;\r\n\t\t\t} else if (!array){\t\t\t\t\t\t\t\t\t\t\t\t\t//{ 1:\"one\", 2:\"two\" }\r\n\t\t\t\tfor (let i in options)\r\n\t\t\t\t\tdata.push({id:i, value:options[i]});\r\n\t\t\t\toptions = data;\r\n\t\t\t} \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// else [{ id:1, value:\"one\"}, ...]\r\n\r\n\t\t\toptions = new (use(\"DataCollection\"))({ data:options });\r\n\t\t\tthis._destroy_with_me.push(options);\r\n\r\n\t\t} \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// else data collection or view\r\n\t\treturn options;\r\n\t},\r\n\t_map_options:function(column){\r\n\t\tlet options = column.options||column.collection;\r\n\t\tif (options){\r\n\t\t\toptions = this._create_collection(options);\r\n\t\t\tthis._bind_collection(options, column);\r\n\t\t}\r\n\t\tif (column.header){\r\n\t\t\tthis._map_header_options(column.header);\r\n\t\t\tthis._map_header_options(column.footer);\r\n\t\t}\r\n\t},\r\n\t_map_header_options:function(arr){\r\n\t\tarr = arr || [];\r\n\t\tfor (let i=0; i<arr.length; i++){\r\n\t\t\tlet config = arr[i];\r\n\r\n\t\t\tif (config && config.options){\r\n\t\t\t\tlet options = config.options;\r\n\t\t\t\tif (!options.loadNext)\r\n\t\t\t\t\toptions = config.options = this._create_collection(options);\r\n\r\n\t\t\t\tlet id = options.data.attachEvent(\"onStoreUpdated\", () => {\r\n\t\t\t\t\tif(this.refreshFilter)\r\n\t\t\t\t\t\tthis.refreshFilter(config.columnId);\r\n\t\t\t\t});\r\n\t\t\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\t\t\tif (!options.$destructed) options.data.detachEvent(id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_bind_collection:function(options, column){\r\n\t\tif (column){\r\n\t\t\tdelete column.options;\r\n\t\t\tcolumn.collection = options;\r\n\t\t\tcolumn.template = column.template || this._bind_template(options, column.id, column.optionslist);\r\n\t\t\tlet id = options.data.attachEvent(\"onStoreUpdated\", () => {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t\tif(this.refreshFilter)\r\n\t\t\t\t\tthis.refreshFilter(column.id);\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\t\tif (!options.$destructed) options.data.detachEvent(id);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_bind_template:function(options, columnId, multi){\r\n\t\tcolumnId = this.getColumnConfig ? columnId : \"value\";\r\n\t\tif (multi) {\r\n\t\t\tlet separator = typeof multi==\"string\" ? multi : \",\";\r\n\t\t\treturn function(obj){\r\n\t\t\t\tlet value = obj[columnId];\r\n\t\t\t\tif (!value) return \"\";\r\n\r\n\t\t\t\tlet ids = value.toString().split(separator);\r\n\t\t\t\tfor (let i = 0; i < ids.length; i++){\r\n\t\t\t\t\tlet data = options.data.pull[ids[i]];\r\n\t\t\t\t\tids[i] = data ? (data.value  || \"\") : \"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn ids.join(\", \");\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(obj){\r\n\t\t\t\tlet data = options.data.pull[ obj[columnId] ];\r\n\t\t\t\tif (data && (data.value || data.value === 0))\r\n\t\t\t\t\treturn data.value;\r\n\t\t\t\treturn \"\";\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default MapCollection;","import {_getClassName, locate} from \"../webix/html\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {extend, delay, toFunctor} from \"../webix/helpers\";\r\nimport env from \"../webix/env\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\n\r\nconst MouseEvents={\r\n\t$init: function(config){\r\n\t\tconfig = config || {};\r\n\r\n\t\tthis._clickstamp = 0;\r\n\t\tthis._dbl_sensetive = 300;\r\n\t\tthis._item_clicked = null;\r\n\r\n\t\tthis._mouse_action_extend(config.onClick, \"on_click\");\r\n\t\tthis._mouse_action_extend(config.onContext, \"on_context\");\r\n\t\tthis._mouse_action_extend(config.onDblClick, \"on_dblclick\");\r\n\t\tthis._mouse_action_extend(config.onMouseMove, \"on_mouse_move\");\r\n\r\n\t\t//attach dom events if related collection is defined\r\n\t\tif (this.on_click){\r\n\t\t\t_event(this._contentobj,\"click\",this._onClick,{bind:this});\r\n\t\t\tif (env.isIE8 && this.on_dblclick)\r\n\t\t\t\t_event(this._contentobj, \"dblclick\", this._onDblClick, {bind:this});\r\n\t\t}\r\n\t\tif (this.on_context)\r\n\t\t\t_event(this._contentobj,\"contextmenu\",this._onContext,{bind:this});\r\n\r\n\t\tif (this.on_mouse_move)\r\n\t\t\tthis._enable_mouse_move();\r\n\t},\r\n\r\n\t_enable_mouse_move:function(){\r\n\t\tif (!this._mouse_move_enabled){\r\n\t\t\tthis.on_mouse_move = this.on_mouse_move || {};\r\n\t\t\t_event(this._contentobj,\"mousemove\",this._onMouse,{bind:this});\r\n\t\t\t_event(this._contentobj,(env.isIE?\"mouseleave\":\"mouseout\"),this._onMouse,{bind:this});\r\n\t\t\tthis._mouse_move_enabled = 1;\r\n\t\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\t\tif (this._mouse_move_timer)\r\n\t\t\t\t\twindow.clearTimeout(this._mouse_move_timer);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_mouse_action_extend:function(config, key){\r\n\t\tif (config){\r\n\t\t\tvar now = this[key];\r\n\t\t\tvar step = now ? extend({}, now) : {};\r\n\t\t\tthis[key] = extend(step, config);\r\n\t\t}\r\n\t},\r\n\r\n\t//inner onclick object handler\r\n\t_onClick: function(e){\r\n\t\tif(!this.isEnabled())\r\n\t\t\treturn false;\r\n\r\n\t\tUIManager._focus_action(this);\r\n\t\tif(this.on_dblclick){\r\n\t\t\t// emulates double click\r\n\t\t\tvar stamp = (new Date()).valueOf();\r\n\r\n\t\t\tif (stamp - this._clickstamp <= this._dbl_sensetive && this.locate){\r\n\t\t\t\tvar item = this.locate(e);\r\n\t\t\t\tif (\"\"+item == \"\"+this._item_clicked) {\r\n\t\t\t\t\tthis._clickstamp = 0;\r\n\t\t\t\t\treturn this._onDblClick(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._clickstamp = stamp;\r\n\t\t}\r\n\r\n\t\tvar result = this._mouseEvent(e,this.on_click,\"ItemClick\");\r\n\t\treturn result;\r\n\t},\r\n\t//inner ondblclick object handler\r\n\t_onDblClick: function(e) {\r\n\t\treturn this._mouseEvent(e,this.on_dblclick,\"ItemDblClick\");\r\n\t},\r\n\t//process oncontextmenu events\r\n\t_onContext: function(e) {\r\n\t\tthis._mouseEvent(e, this.on_context, \"BeforeContextMenu\", \"AfterContextMenu\");\r\n\t},\r\n\t/*\r\n\t\tevent throttler - ignore events which occurs too fast\r\n\t\tduring mouse moving there are a lot of event firing - we need no so much\r\n\t\talso, mouseout can fire when moving inside the same html container - we need to ignore such fake calls\r\n\t*/\r\n\t_onMouse:function(e){\r\n\t\tif (this.$destructed) return;\r\n\t\tif (document.createEventObject)\t//make a copy of event, will be used in timed call\r\n\t\t\te = document.createEventObject(event);\r\n\r\n\t\tif (this._mouse_move_timer)\t//clear old event timer\r\n\t\t\twindow.clearTimeout(this._mouse_move_timer);\r\n\r\n\t\t//this event just inform about moving operation, we don't care about details\r\n\t\tthis.callEvent(\"onMouseMoving\",[e]);\r\n\t\t//set new event timer\r\n\t\tthis._mouse_move_timer = delay(function(e){\r\n\t\t\t//called only when we have at least 100ms after previous event\r\n\t\t\tif (e.type == \"mousemove\")\r\n\t\t\t\tthis._onMouseMove(e);\r\n\t\t\telse\r\n\t\t\t\tthis._onMouseOut(e);\r\n\t\t}, this, [e], (this._settings.mouseEventDelay||500));\r\n\t},\r\n\r\n\t//inner mousemove object handler\r\n\t_onMouseMove: function(e) {\r\n\t\tif (!this._mouseEvent(e,this.on_mouse_move,\"MouseMove\"))\r\n\t\t\tthis._onMouseOut(e);\r\n\t},\r\n\t//inner mouseout object handler\r\n\t_onMouseOut: function(e) {\r\n\t\tthis.callEvent(\"onMouseOut\",[e||event]);\r\n\t},\r\n\t//common logic for click and dbl-click processing\r\n\t_mouseEvent:function(e,hash,name, pair){\r\n\t\te=e||event;\r\n\r\n\t\tif (e.processed || !this._viewobj) return;\r\n\t\te.processed = true;\r\n\r\n\t\tvar trg=e.target;\r\n\r\n\t\t//IE8 can't modify event object\r\n\t\t//so we need to stop event bubbling to prevent double processing\r\n\t\tif (env.isIE8){\r\n\t\t\tvar vid = this._settings.id;\r\n\t\t\tvar wid = trg.w_view;\r\n\r\n\t\t\tif (!wid) trg.w_view = vid; else if (wid !== vid) return;\r\n\t\t}\r\n\r\n\t\tvar css = \"\";\r\n\t\tvar id = null;\r\n\t\tvar found = false;\r\n\t\t//loop through all parents\r\n\t\t//we need to check for this._viewobj as some handler can destroy the view\r\n\t\twhile (trg && trg.parentNode && this._viewobj && trg != this._viewobj.parentNode){\r\n\t\t\tif (!found && trg.getAttribute){\t\t\t\t\t\t\t\t\t\t\t\t\t//if element with ID mark is not detected yet\r\n\t\t\t\tid = trg.getAttribute(this._id);\t\t\t\t\t\t\t//check id of current one\r\n\t\t\t\tif (id){\r\n\t\t\t\t\t// prevent clicking on disabled items\r\n\t\t\t\t\tif (trg.getAttribute(\"webix_disabled\")){\r\n\t\t\t\t\t\tthis._item_clicked = null;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._item_clicked = id;\r\n\t\t\t\t\tif (this.callEvent){\r\n\t\t\t\t\t\t//it will be triggered only for first detected ID, in case of nested elements\r\n\t\t\t\t\t\tif (!this.callEvent(\"on\"+name,[id,e,trg])) return;\r\n\t\t\t\t\t\tif (pair) this.callEvent(\"on\"+pair,[id,e,trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//set found flag\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcss=_getClassName(trg);\r\n\t\t\tif (css){\t\t//check if pre-defined reaction for element's css name exists\r\n\t\t\t\tcss = css.toString().split(\" \");\r\n\t\t\t\tfor (var i=0; i<css.length; i++){\r\n\t\t\t\t\tif (hash[css[i]]){\r\n\t\t\t\t\t\tvar functor = toFunctor(hash[css[i]], this.$scope);\r\n\t\t\t\t\t\tvar res =  functor.call(this,e,id||locate(e, this._id),trg);\r\n\t\t\t\t\t\tif(res === false)\r\n\t\t\t\t\t\t\treturn found;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttrg=trg.parentNode;\r\n\t\t}\r\n\t\t\t\r\n\t\treturn found;\t//returns true if item was located and event was triggered\r\n\t}\r\n};\r\n\r\nexport default MouseEvents;","import {preventEvent, remove, create} from \"../webix/html\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport {$$} from \"../ui/core\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {event} from \"../webix/htmlevents\";\r\n\r\n\r\n/*\r\n    UI: navigation control\r\n*/\r\nconst NavigationButtons = {\r\n\t$init:function(){\r\n\t\tthis.$ready.push(function(){\r\n\t\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t\t});\r\n\t},\r\n\t_moveActive:function(code, e){\r\n\t\tif(code === 37  || code === 39){\r\n\t\t\tpreventEvent(e);\r\n\t\t\tthis._showNavItem(code===37?-1:1);\r\n\r\n\t\t\tvar node = this._navPanel.querySelector(\"[tabindex='0']\");\r\n\t\t\tif(node) node.focus();\r\n\t\t}\r\n\t},\r\n\t_renderPanel:function(){\r\n\t\tremove(this._navPanel);\r\n\r\n\r\n\t\tthis._navPanel = create(\"DIV\",{\r\n\t\t\t\"class\":\"webix_nav_panel \"+\"webix_nav_panel_\"+this._settings.navigation.type,\r\n\t\t\t\"role\":\"tablist\"\r\n\t\t},\"\");\r\n\r\n\t\tthis._viewobj.appendChild(this._navPanel);\r\n\r\n\r\n\t\tthis._renderNavItems();\r\n\t\tthis._renderNavButtons();\r\n\t\tthis._setLinkEventHandler();\r\n\t},\r\n\t_setLinkEventHandler: function(){\r\n\t\tvar h = [];\r\n\t\tif(this._navPanel)\r\n\t\t\th[0] = event(this._navPanel,\"click\", bind(function(e){\r\n\t\t\t\tvar elem = e.target;\r\n\t\t\t\tvar found = false;\r\n\t\t\t\twhile(elem != this._navPanel && !found){\r\n\t\t\t\t\tvar bindId = elem.getAttribute(this._linkAttr);\r\n\t\t\t\t\tif(bindId){\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\tthis._showPanelBind(bindId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telem = elem.parentNode;\r\n\t\t\t\t}\r\n\t\t\t},this));\r\n\t\tif(this._prevNavButton)\r\n\t\t\th[1] = event(this._prevNavButton,\"click\", bind(function(){\r\n\t\t\t\tthis._showNavItem(-1);\r\n\t\t\t},this));\r\n\t\tif(this._nextNavButton)\r\n\t\t\th[1] = event(this._nextNavButton,\"click\", bind(function(){\r\n\t\t\t\tthis._showNavItem(1);\r\n\t\t\t},this));\r\n\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\tfor(var i=0;i< h.length; i++){\r\n\t\t\t\tthis.detachEvent(h[i]);\r\n\t\t\t}\r\n\t\t\th = null;\r\n\t\t});\r\n\t},\r\n\t_showNavItem: function(inc){\r\n\t\tif(this._cells){\r\n\t\t\tvar index = this._active_cell + inc;\r\n\t\t\tif(index >= this._cells.length || index < 0){\r\n\t\t\t\tindex = (index < 0?this._cells.length-1:0);\r\n\t\t\t}\r\n\t\t\tthis.setActiveIndex(index);\r\n\t\t}\r\n\t},\r\n\t_showPanelBind: function(id){\r\n\t\tif(this._cells)\r\n\t\t\t$$(id).show();\r\n\t},\r\n\t_renderNavItems:function(){\r\n\t\tvar item, config;\r\n\t\tconfig = this._settings.navigation;\r\n\t\tif(config.items){\r\n\t\t\tthis._linkAttr = config.linkAttr || /*@attr*/\"bind_id\";\r\n\r\n\t\t\tif(!this._navPanel)\r\n\t\t\t\tthis._renderPanel();\r\n\t\t\telse\r\n\t\t\t\tthis._clearPanel();\r\n\r\n\t\t\tvar data = (this._cells?this._cells:this.data.order);\r\n\t\t\tif(data.length>1){\r\n\t\t\t\tfor (var i=0; i < data.length; i++){\r\n\r\n\t\t\t\t\titem = create(\"DIV\",{\r\n\t\t\t\t\t\t\"class\":\"webix_nav_item webix_nav_\"+(i==this._active_cell?\"active\":\"inactive\"),\r\n\t\t\t\t\t\t\"role\":\"tab\",\r\n\t\t\t\t\t\t\"tabindex\":(i==this._active_cell?\"0\":\"-1\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar id = this._cells?this._cells[i]._settings.id:data[i];\r\n\t\t\t\t\tif(id)\r\n\t\t\t\t\t\titem.setAttribute(this._linkAttr, id);\r\n\t\t\t\t\tthis._navPanel.appendChild(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_clearPanel:function(){\r\n\t\tif (this._navPanel){\r\n\t\t\tvar coll = this._navPanel.childNodes;\r\n\t\t\tfor (var i = coll.length - 1; i >= 0; i--)\r\n\t\t\t\tremove(coll[i]);\r\n\t\t}\r\n\t},\r\n\t_renderNavButtons: function(){\r\n\t\tvar config = this._settings.navigation;\r\n\t\tif(config.buttons){\r\n\r\n\t\t\tif(this._prevNavButton)\r\n\t\t\t\tremove(this._prevNavButton);\r\n\t\t\tif(this._prevNavButton)\r\n\t\t\t\tremove(this._nextNavButton);\r\n\r\n\r\n\t\t\tthis._prevNavButton = create(\r\n\t\t\t\t\"DIV\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"class\":\"webix_nav_button_\"+config.type+\" webix_nav_button_prev \"\r\n\t\t\t\t},\r\n\t\t\t\t\"<div role=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"\"+i18n.aria.prevTab+\"\\\" class=\\\"webix_nav_button_inner\\\"></div>\"\r\n\t\t\t);\r\n\t\t\tthis._viewobj.appendChild(this._prevNavButton);\r\n\r\n\t\t\tthis._nextNavButton = create(\r\n\t\t\t\t\"DIV\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"class\":\"webix_nav_button_\"+config.type+\" webix_nav_button_next \"\r\n\t\t\t\t},\r\n\t\t\t\t\"<div role=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"\"+i18n.aria.prevTab+\"\\\" class=\\\"webix_nav_button_inner\\\"></div>\"\r\n\t\t\t);\r\n\t\t\tthis._viewobj.appendChild(this._nextNavButton);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default NavigationButtons;","import {create, insertBefore, remove} from \"../webix/html\";\r\n\r\n\r\nconst OverlayBox = {\r\n\tshowOverlay:function(message){\r\n\t\tif (!this._overlay){\r\n\t\t\tthis._overlay = create(\"DIV\",{ \"class\":\"webix_overlay\" },(message||\"\"));\r\n\t\t\tinsertBefore(this._overlay, this._viewobj.firstChild, this._viewobj);\r\n\t\t\tthis._viewobj.style.position = \"relative\";\r\n\t\t} else \r\n\t\t\tthis._overlay.innerHTML = message;\r\n\t},\r\n\thideOverlay:function(){\r\n\t\tif (this._overlay){\r\n\t\t\tremove(this._overlay);\r\n\t\t\tthis._overlay = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default OverlayBox;","import {delay} from \"../webix/helpers\";\r\nimport {ui, $$} from \"../ui/core\";\r\n\r\n\r\nconst PagingAbility = {\r\n\tpager_setter:function(pager){\r\n\t\tif (typeof pager == \"string\"){\r\n\t\t\tvar ui_pager = $$(pager);\r\n\t\t\tif (!ui_pager){\r\n\t\t\t\tthis.$blockRender = true;\r\n\t\t\t\tdelay(function(){\r\n\t\t\t\t\tvar obj = $$(pager);\r\n\r\n\t\t\t\t\tthis._settings.pager = this.pager_setter(obj);\r\n\t\t\t\t\tvar s = obj._settings;\r\n\t\t\t\t\ts.count = this.data._count_pager_total(s.level);\r\n\t\t\t\t\tobj.refresh();\r\n\r\n\t\t\t\t\tthis.$blockRender = false;\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tpager = ui_pager;\r\n\t\t}\r\n\r\n\t\tfunction check_pager_sizes(repeat){\r\n\t\t\t// reset topSplit - since now the pager is responsible for rendering\r\n\t\t\tif (this.config.topSplit)\r\n\t\t\t\tthis.config.topSplit = 0;\r\n\r\n\t\t\tif (pager.config.autosize && this.getVisibleCount){\r\n\t\t\t\tvar count = this.getVisibleCount();\r\n\t\t\t\tif (isNaN(count)){\r\n\t\t\t\t\tpager.config.size = 1;\r\n\t\t\t\t\tdelay(check_pager_sizes, this, [true]);\r\n\t\t\t\t} else if (count != pager.config.size){\r\n\t\t\t\t\tpager.config.size = count;\r\n\t\t\t\t\tpager.refresh();\r\n\t\t\t\t\tif (repeat === true)\r\n\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar s = this._settings.pager;\r\n\t\t\t//initial value of pager = -1, waiting for real value\r\n\t\t\tif (s.page == -1) return false;\t\r\n\t\t\t\r\n\t\t\tthis.data.$min = this._count_pager_index(0, s.page*s.size);\t//affect data.getRange\r\n\t\t\tthis.data.$max = this._count_pager_index(this.data.$min, s.size);\r\n\t\t\tthis.data.$pagesize = this.data.$max - this.data.$min;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.attachEvent(\"onBeforeRender\",check_pager_sizes);\r\n\r\n\t\tif (!pager.$view){\r\n\t\t\tpager.view = \"pager\";\r\n\t\t\tpager = ui(pager);\r\n\t\t}\r\n\t\tthis._pager = pager;\r\n\t\tpager.$master = this;\r\n\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\tvar s = pager._settings;\r\n\t\t\ts.count = this._count_pager_total(s.level);\r\n\t\t\tpager.refresh();\r\n\t\t});\r\n\t\tthis.data._count_pager_total = this._count_pager_total;\r\n\r\n\t\treturn pager._settings;\r\n\t},\r\n\t_count_pager_total:function(level){\r\n\t\tif (level && level !== 0){\r\n\t\t\tvar count = 0; \r\n\t\t\tthis.each(function(obj){\r\n\t\t\t\tif (obj.$level == level) count++;\r\n\t\t\t});\r\n\t\t\treturn count;\r\n\t\t} else\r\n\t\t\treturn this.count();\r\n\t},\r\n\t_count_pager_index:function(start, count){\r\n\t\tvar s = this._settings.pager;\r\n\r\n\t\tif (s.level && s.level !== 0){\r\n\t\t\tvar end = start;\r\n\t\t\tvar max = this.data.order.length;\r\n\r\n\t\t\tif (count)\r\n\t\t\t\twhile (end < max){\r\n\t\t\t\t\tif (this.data.order[end] && this.data.getItem(this.data.order[end]).$level == s.level){\r\n\t\t\t\t\t\tif (count === 0)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcount--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\r\n\t\t\treturn end;\r\n\t\t} else\r\n\t\t\treturn start+count;\r\n\t},\r\n\tsetPage:function(value){\r\n\t\tif (this._pager)\r\n\t\t\tthis._pager.select(value);\r\n\t},\r\n\tgetPage:function(){\r\n\t\treturn this._pager._settings.page;\r\n\t},\r\n\tgetPager:function(){\r\n\t\treturn this._pager;\r\n\t}\r\n};\r\n\r\nexport default PagingAbility;","import {create, insertBefore, remove} from \"../webix/html\";\r\nimport Touch from \"../core/touch\";\r\nimport env from \"../webix/env\";\r\nimport {isUndefined, extend, delay} from \"../webix/helpers\";\r\n\r\n\r\nconst ProgressBar = {\r\n\t$init:function(){\r\n\t\tif (isUndefined(this._progress) && this.attachEvent){\r\n\t\t\tthis.attachEvent(\"onBeforeLoad\", () => this.showProgress());\r\n\t\t\tthis.attachEvent(\"onAfterLoad\", () => this.hideProgress());\r\n\t\t\tthis._progress = null;\r\n\t\t}\r\n\t},\r\n\tshowProgress:function(config){\r\n\t\t// { position: 0 - 1, delay: 2000ms by default, css : name of css class to use }\r\n\t\tvar width;\r\n\t\tif (!this._progress){\r\n\r\n\t\t\tconfig = extend({\r\n\t\t\t\tposition:0,\r\n\t\t\t\tdelay: 2000,\r\n\t\t\t\ttype:\"icon\",\r\n\t\t\t\ticon:\"wxi-sync\",\r\n\t\t\t\thide:false\r\n\t\t\t}, (config||{}), true);\r\n\r\n\t\t\tvar incss = (config.type == \"icon\") ? (config.icon+\" webix_spin\") : \"\";\r\n\r\n\t\t\tthis._progress = create(\r\n\t\t\t\t\"DIV\",\r\n\t\t\t\t{\r\n\t\t\t\t\t\"class\":\"webix_progress_\"+config.type,\r\n\t\t\t\t\t\"role\":\"progressbar\",\r\n\t\t\t\t\t\"aria-valuemin\":\"0\",\r\n\t\t\t\t\t\"aria-valuemax\":\"100\",\r\n\t\t\t\t\t\"tabindex\":\"0\"\r\n\t\t\t\t},\r\n\t\t\t\t\"<div class='webix_progress_state \"+incss+\"'></div>\"\r\n\t\t\t);\r\n\r\n\t\t\tif(!this.setPosition)\r\n\t\t\t\tthis._viewobj.style.position = \"relative\";\r\n\r\n\t\t\tinsertBefore(this._progress, this._viewobj.firstChild, this._viewobj);\r\n\t\t\tthis._viewobj.setAttribute(\"aria-busy\", \"true\");\r\n\r\n\t\t\tif(!Touch.$active || this._touch_scroll == \"native\"){\r\n\t\t\t\tif(this.getScrollState){\r\n\t\t\t\t\tvar scroll = this.getScrollState();\r\n\t\t\t\t\tif(this._viewobj.scrollWidth != this.$width){\r\n\t\t\t\t\t\tthis._progress.style.left = scroll.x +\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this._viewobj.scrollHeight != this.$height){\r\n\t\t\t\t\t\tif(config.type != \"bottom\"){\r\n\t\t\t\t\t\t\tthis._progress.style.top = scroll.y +\"px\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._progress.style.top =  scroll.y + this.$height - this._progress.offsetHeight +\"px\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._progress_animate = config.type != \"icon\";\r\n\t\t}\r\n\r\n\t\tif (!config) return;\r\n\r\n\t\tif (this._progress_animate){\r\n\t\t\tvar position = config.position || 1;\r\n\t\t\t//check for css-transition support\r\n\t\t\tif(this._progress.style[env.transitionDuration] !== undefined || !config.delay){\r\n\t\t\t\tif (config.delay){\r\n\t\t\t\t\t// force reflow\r\n\t\t\t\t\twidth = this._viewobj.firstChild.offsetWidth;\r\n\t\t\t\t\tthis._progress.firstChild.style[env.transitionDuration] = config.delay+\"ms\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// animate to new value\r\n\t\t\t\tthis._progress.firstChild.style.width = position*100+\"%\";\r\n\t\t\t} else{\r\n\t\t\t\t//if animation is not supported fallback to timeouts [IE9]\r\n\t\t\t\tvar count = 0,\r\n\t\t\t\t\tstart = 0,\r\n\t\t\t\t\tstep = position/config.delay*30,\r\n\t\t\t\t\tview = this;\r\n\r\n\t\t\t\tif(this._progressTimer){\r\n\t\t\t\t\t//reset the existing progress\r\n\t\t\t\t\twindow.clearInterval(this._progressTimer);\r\n\t\t\t\t\tstart = this._progress.firstChild.offsetWidth/this._progress.offsetWidth*100;\r\n\t\t\t\t}\r\n\t\t\t\tthis._progressTimer = window.setInterval(function(){\r\n\t\t\t\t\tif(count*30 == config.delay){\r\n\t\t\t\t\t\twindow.clearInterval(view._progressTimer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(view._progress && view._progress.firstChild)\r\n\t\t\t\t\t\t\tview._progress.firstChild.style.width = start+count*step*position*100+\"%\";\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t},30);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._progress_hide)\r\n\t\t\tclearTimeout(this._progress_hide);\r\n\r\n\t\tif(config.hide)\r\n\t\t\tthis._progress_hide = delay(this.hideProgress, this, [1], config.delay);\r\n\r\n\t\t// necessary to prevent code optimization\r\n\t\treturn width;\r\n\t},\r\n\thideProgress:function(now){\r\n\t\tif (this._progress){\r\n\t\t\tif (now || !this._progress_animate){\r\n\t\t\t\tif(this._progressTimer)\r\n\t\t\t\t\twindow.clearInterval(this._progressTimer);\r\n\t\t\t\tremove(this._progress);\r\n\t\t\t\tthis._progress = null;\r\n\t\t\t\tthis._viewobj.removeAttribute(\"aria-busy\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.showProgress({ position:1.1, delay:300 , hide:true });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default ProgressBar;","import {locate, insertBefore, remove} from \"../webix/html\";\r\nimport {bind, clone, extend, toFunctor} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport template from \"../webix/template\";\r\n\r\nimport type from \"../webix/type\";\r\n\r\nconst RenderStack ={\r\n\t$init:function(){\r\n\t\tassert(this.data,\"RenderStack :: Component doesn't have DataStore\");\r\n\t\tassert(template,\"template :: template is not accessible\");\r\n\r\n\t\t//used for temporary HTML elements\r\n\t\t//automatically nulified during destruction\r\n\t\tthis._html = document.createElement(\"DIV\");\r\n\t\t\t\t\r\n\t\tthis.data.attachEvent(\"onIdChange\", bind(this._render_change_id, this));\r\n\t\tthis.attachEvent(\"onItemClick\", this._call_onclick);\r\n\t\t\r\n\t\t//create copy of default type, and set it as active one\r\n\t\tif (!this.types){ \r\n\t\t\tthis.types = { \"default\" : this.type };\r\n\t\t\tthis.type.name = \"default\";\r\n\t\t}\r\n\r\n\t\tthis.type = clone(this.type);\r\n\t},\r\n\t\r\n\tcustomize:function(obj){ \r\n\t\ttype(this,obj);\r\n\t},\r\n\titem_setter:function(value){\r\n\t\treturn this.type_setter(value);\r\n\t},\r\n\ttype_setter:function(value){\r\n\t\tif(!this.types[value])\r\n\t\t\tthis.customize(value);\r\n\t\telse {\r\n\t\t\tthis.type = clone(this.types[value]);\r\n\t\t\tif (this.type.css) \r\n\t\t\t\tthis._contentobj.className+=\" \"+this.type.css;\r\n\t\t}\r\n\t\tif (this.type.on_click)\r\n\t\t\textend(this.on_click, this.type.on_click);\r\n\r\n\t\treturn value;\r\n\t},\r\n\t\r\n\ttemplate_setter:function(value){\r\n\t\tthis.type.template=template(value);\r\n\t},\r\n\t//convert single item to HTML text (templating)\r\n\t_toHTML:function(obj){\r\n\t\tvar mark = this.data._marks[obj.id];\r\n\t\t//check if related template exist\r\n\t\tassert((!obj.$template || this.type[\"template\"+obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\r\n\t\tthis.callEvent(\"onItemRender\",[obj]);\r\n\t\treturn this.type.templateStart(obj,this.type, mark)+(obj.$template?this.type[\"template\"+obj.$template]:this.type.template)(obj,this.type,mark)+this.type.templateEnd(obj, this.type,mark);\r\n\t},\r\n\t//convert item to HTML object (templating)\r\n\t_toHTMLObject:function(obj){\r\n\t\tthis._html.innerHTML = this._toHTML(obj);\r\n\t\treturn this._html.firstChild;\r\n\t},\r\n\t_render_change_id:function(old, newid){\r\n\t\tvar obj = this.getItemNode(old);\r\n\t\tif (obj) {\r\n\t\t\tobj.setAttribute(this._id, newid);\r\n\t\t\tthis._htmlmap[newid] = this._htmlmap[old];\r\n\t\t\tdelete this._htmlmap[old];\r\n\t\t}\r\n\t},\r\n\t//calls function that is set in onclick property\r\n\t_call_onclick:function(){\r\n\t\tif (this._settings.click){\r\n\t\t\tvar code = toFunctor(this._settings.click, this.$scope);\r\n\t\t\tif (code && code.call) code.apply(this,arguments);\r\n\t\t}\r\n\t},\r\n\t//return html container by its ID\r\n\t//can return undefined if container doesn't exists\r\n\tgetItemNode:function(search_id){\r\n\t\tif (this._htmlmap)\r\n\t\t\treturn this._htmlmap[search_id];\r\n\t\t\t\r\n\t\t//fill map if it doesn't created yet\r\n\t\tthis._htmlmap={};\r\n\t\t\r\n\t\tvar t = this._dataobj.childNodes;\r\n\t\tfor (var i=0; i < t.length; i++){\r\n\t\t\tvar id = t[i].getAttribute(this._id); //get item's\r\n\t\t\tif (id)\r\n\t\t\t\tthis._htmlmap[id]=t[i];\r\n\t\t}\r\n\t\t//call locator again, when map is filled\r\n\t\treturn this.getItemNode(search_id);\r\n\t},\r\n\t//return id of item from html event\r\n\tlocate:function(e){ return locate(e,this._id); },\r\n\t/*change scrolling state of top level container, so related item will be in visible part*/\r\n\tshowItem:function(id){\r\n\r\n\t\tvar html = this.getItemNode(id);\r\n\t\tif (html&&this.scrollTo){\r\n\t\t\tvar txmin = html.offsetLeft;\r\n\t\t\tvar txmax = txmin + html.offsetWidth;\r\n\t\t\tvar tymin = html.offsetTop;\r\n\r\n\t\t\tvar tymax = tymin + html.offsetHeight;\r\n\t\t\tvar state = this.getScrollState();\r\n\r\n\t\t\tvar x = state.x;\r\n\t\t\tif (x > txmin || x + this._content_width < txmax )\r\n\t\t\t\tx = txmin;\r\n\t\t\tvar y = state.y;\r\n\t\t\tif (y > tymin || y + this._content_height < tymax )\r\n\t\t\t\ty = tymin;\r\n\r\n\t\t\tthis.scrollTo(x,y);\r\n\t\t\tif(this._setItemActive)\r\n\t\t\t\tthis._setItemActive(id);\r\n\t\t}\r\n\t},\r\n\t//update view after data update\r\n\t//method calls low-level rendering for related items\r\n\t//when called without parameters - all view refreshed\r\n\trender:function(id,data,type){\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tif (id){\r\n\t\t\tvar cont = this.getItemNode(id); //get html element of updated item\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"paint\":\r\n\t\t\t\tcase \"update\":\r\n\t\t\t\t\t//in case of update - replace existing html with updated one\r\n\t\t\t\t\tif (!cont) return;\r\n\t\t\t\t\tvar t1 = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\t\tinsertBefore(t1, cont); \r\n\t\t\t\t\tremove(cont);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t//in case of delete - remove related html\r\n\t\t\t\t\tif (!cont) return;\r\n\t\t\t\t\tremove(cont);\r\n\t\t\t\t\tdelete this._htmlmap[id];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"add\":\r\n\t\t\t\t\t//in case of add - put new html at necessary position\r\n\t\t\t\t\tvar t2 = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\t\tinsertBefore(t2, this.getItemNode(this.data.getNextId(id)), this._dataobj);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"move\":\r\n\t\t\t\t\t//moving without repainting the item\r\n\t\t\t\t\tinsertBefore(this.getItemNode(id), this.getItemNode(this.data.getNextId(id)), this._dataobj);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tassert(0, \"Unknown render command: \"+type);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//full reset\r\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\t\t//getRange - returns all elements\r\n\t\t\t\t(this._renderobj||this._dataobj).innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\r\n\t\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\r\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default RenderStack;","import {create} from \"../webix/html\";\r\nimport {delay} from \"../webix/helpers\";\r\nimport env from \"../webix/env\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\nimport CustomScroll from \"../core/customscroll\";\r\n\r\nconst Scrollable= {\r\n\t$init:function(config){\r\n\t\t//do not spam unwanted scroll containers for templates \r\n\t\tif (config && !config.scroll && this._one_time_scroll) \r\n\t\t\treturn (this._dataobj = (this._dataobj||this._contentobj));\r\n\r\n\t\t(this._dataobj||this._contentobj).appendChild(create(\"DIV\",{ \"class\" : \"webix_scroll_cont\" },\"\"));\r\n\t\tthis._dataobj=(this._dataobj||this._contentobj).firstChild;\r\n\r\n\t\tif (this.callEvent && (!env.touch || this._touch_scroll == \"native\"))\r\n\t\t\t_event(this._viewobj, \"scroll\", function(){\r\n\t\t\t\tdelay(function(){\r\n\t\t\t\t\tthis.callEvent(\"onAfterScroll\", []);\r\n\t\t\t\t}, this);\r\n\t\t\t}, { bind:this });\r\n\t},\r\n\t_touch_scroll:\"native\",\r\n\tscroll_setter:function(value){\r\n\t\tif (!value) return false;\r\n\t\tvar auto = value === \"auto\";\r\n\t\tvar marker =  (value ==\"x\"?\"x\":(value==\"xy\"?\"xy\":(auto?\"xy\":\"y\")));\r\n\r\n\t\tif (env.$customScroll){\r\n\t\t\tCustomScroll.enable(this, marker);\r\n\t\t} else {\r\n\t\t\tvar node = this._dataobj.parentNode.style;\r\n\t\t\tif (auto){\r\n\t\t\t\tnode.overflowX = node.overflowY = \"auto\";\r\n\t\t\t} else {\r\n\t\t\t\tif (marker.indexOf(\"x\")!=-1){\r\n\t\t\t\t\tthis._scroll_x = true;\r\n\t\t\t\t\tnode.overflowX = \"scroll\";\r\n\t\t\t\t}\r\n\t\t\t\tif (marker.indexOf(\"y\")!=-1){\r\n\t\t\t\t\tthis._scroll_y = true;\r\n\t\t\t\t\tnode.overflowY = \"scroll\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn marker;\r\n\t},\r\n\t_onoff_scroll:function(mode, dir){\r\n\t\tif (!!this._settings.scroll == !!mode) return;\r\n\r\n\t\tif (!env.$customScroll){\r\n\t\t\tvar style = this._dataobj.parentNode.style;\r\n\t\t\tstyle[dir === \"x\" ? \"overflowX\" : \"overflowY\"] = mode ? \"auto\" : \"hidden\";\r\n\t\t}\r\n\r\n\t\tif (dir === \"x\"){\r\n\t\t\tthis._scroll_x = mode;\r\n\t\t} else {\r\n\t\t\tthis._scroll_y = mode;\r\n\t\t}\r\n\t\tthis._settings.scroll = mode?dir:false;\r\n\t},\r\n\tgetScrollState:function(){\r\n\t\treturn { x: this._dataobj.parentNode.scrollLeft, y: this._dataobj.parentNode.scrollTop };\r\n\t},\r\n\tscrollTo:function(x,y){\r\n\t\tthis._dataobj.parentNode.scrollLeft = x;\r\n\t\tthis._dataobj.parentNode.scrollTop = y;\r\n\t}\r\n};\r\n\r\nexport default Scrollable;","import {addCss, removeCss} from \"../webix/html\";\r\nimport {_to_array, bind, isArray} from \"../webix/helpers\";\r\nimport {_event, event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nimport ready from \"../webix/ready\";\r\nimport state from \"../core/state\";\r\n\r\n\r\n/*\r\n\tBehavior:SelectionModel - manage selection states\r\n\t@export\r\n\t\tselect\r\n\t\tunselect\r\n\t\tselectAll\r\n\t\tunselectAll\r\n\t\tisSelected\r\n\t\tgetSelectedId\r\n*/\r\nconst SelectionModel ={\r\n\t$init:function(){\r\n\t\t//collection of selected IDs\r\n\t\tthis._selected = _to_array();\r\n\t\tassert(this.data, \"SelectionModel :: Component doesn't have DataStore\");\r\n\r\n\t\t//remove selection from deleted items\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\",bind(this._data_updated,this));\r\n\t\tthis.data.attachEvent(\"onStoreLoad\", bind(this._data_loaded,this));\r\n\t\tthis.data.attachEvent(\"onAfterFilter\", bind(this._data_filtered,this));\r\n\t\tthis.data.attachEvent(\"onSyncApply\", bind(this._select_check,this));\r\n\t\tthis.data.attachEvent(\"onIdChange\", bind(this._id_changed,this));\r\n\t\tthis.$ready.push(this._set_noselect);\r\n\t},\r\n\t_set_noselect: function(){\r\n\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect || this._settings.select==\"area\")\r\n\t\t\t_event(this.$view,\"mousedown\", function(e){\r\n\t\t\t\tvar shiftKey = (e||window.event).shiftKey;\r\n\t\t\t\tif(shiftKey){\r\n\t\t\t\t\tstate._noselect_element = this;\r\n\t\t\t\t\taddCss(this,\"webix_noselect\",1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t},\r\n\t_id_changed:function(oldid, newid){\r\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--)\r\n\t\t\tif (this._selected[i]==oldid)\r\n\t\t\t\tthis._selected[i]=newid;\r\n\t},\r\n\t_data_filtered:function(){\r\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--){\r\n\t\t\tif (this.data.getIndexById(this._selected[i]) < 0) {\r\n\t\t\t\tvar id = this._selected[i];\r\n\t\t\t\tthis.removeCss(id, \"webix_selected\", true);\r\n\t\t\t\tthis._selected.splice(i,1);\r\n\t\t\t\tthis.callEvent(\"onSelectChange\",[id]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//helper - linked to onStoreUpdated\r\n\t_data_updated:function(id,obj,type){\r\n\t\tif (type == \"delete\"){\t\t\t\t//remove selection from deleted items\r\n\t\t\tif (this.loadBranch){\r\n\t\t\t\t//hierarchy, need to check all\r\n\t\t\t\tthis._select_check();\r\n\t\t\t} else\r\n\t\t\t\tthis._selected.remove(id);\r\n\t\t}\r\n\t\telse if (!id && !this.data.count() && !this.data._filter_order && !this.data._filter_branch){\t//remove selection for clearAll\r\n\t\t\tthis._selected = _to_array();\r\n\t\t}\r\n\t},\r\n\t_data_loaded:function(){\r\n\t\tif (this._settings.select)\r\n\t\t\tthis.data.each(function(obj){\r\n\t\t\t\tif (obj && obj.$selected) this.select(obj.id);\r\n\t\t\t}, this);\r\n\t},\r\n\t_select_check:function(){\r\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--)\r\n\t\t\tif (!this.exists(this._selected[i]))\r\n\t\t\t\tthis._selected.splice(i,1);\r\n\t},\r\n\t//helper - changes state of selection for some item\r\n\t_select_mark:function(id,state,refresh,need_unselect){\r\n\t\tvar sname = state ? \"onBeforeSelect\" : \"onBeforeUnSelect\";\r\n\t\tif (!this.callEvent(sname,[id,state])) return false;\r\n\r\n\t\tif (need_unselect){\r\n\t\t\tthis._silent_selection = true;\r\n\t\t\tthis.unselectAll();\r\n\t\t\tthis._silent_selection = false;\r\n\t\t}\r\n\t\t\r\n\t\tif (state)\r\n\t\t\tthis.addCss(id, \"webix_selected\", true);\r\n\t\telse\r\n\t\t\tthis.removeCss(id, \"webix_selected\", true);\r\n\r\n\t\tif (refresh)\r\n\t\t\trefresh.push(id);\t\t\t\t//if we in the mass-select mode - collect all changed IDs\r\n\t\telse{\r\n\t\t\tif (state)\r\n\t\t\t\tthis._selected.push(id);\t\t//then add to list of selected items\r\n\t\t\telse\r\n\t\t\t\tthis._selected.remove(id);\r\n\t\t\tthis._refresh_selection(id);\t//othervise trigger repainting\r\n\t\t}\r\n\r\n\t\tvar ename = state ? \"onAfterSelect\" : \"onAfterUnSelect\";\r\n\t\tthis.callEvent(ename,[id]);\r\n\r\n\t\treturn true;\r\n\t},\r\n\t//select some item\r\n\tselect:function(id,preserve){\r\n\t\tvar ctrlKey = arguments[2];\r\n\t\tvar shiftKey = arguments[3];\r\n\t\t//if id not provide - works as selectAll\r\n\t\tif (!id) return this.selectAll();\r\n\r\n\t\t//allow an array of ids as parameter\r\n\t\tif (isArray(id)){\r\n\t\t\tfor (var i=0; i < id.length; i++)\r\n\t\t\t\tthis.select(id[i], (i?1:preserve), ctrlKey, shiftKey);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tassert(this.data.exists(id), \"Incorrect id in select command: \"+id);\r\n\t\t\r\n\t\t//block selection mode\r\n\t\tif (shiftKey && this._selected.length)\r\n\t\t\treturn this.selectAll(this._selected[this._selected.length-1],id);\r\n\r\n\t\t//single selection mode\r\n\t\tvar need_unselect = false;\r\n\t\tif (!ctrlKey && !preserve && (this._selected.length!=1 || this._selected[0]!=id))\r\n\t\t\tneed_unselect = true;\r\n\r\n\t\tif (!need_unselect && this.isSelected(id)){\r\n\t\t\tif (ctrlKey) this.unselect(id);\t//ctrl-selection of already selected item\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._select_mark(id, true, null, need_unselect);\r\n\t},\r\n\t//unselect some item\r\n\tunselect:function(id){\r\n\t\t//if id is not provided  - unselect all items\r\n\t\tif (!id) return this.unselectAll();\r\n\t\tif (!this.isSelected(id)) return;\r\n\t\t\r\n\t\tthis._select_mark(id,false);\r\n\t},\r\n\t//select all items, or all in defined range\r\n\tselectAll:function(from,to){\r\n\t\tvar range;\r\n\t\tvar refresh=[];\r\n\t\t\r\n\t\tif (from||to)\r\n\t\t\trange = this.data.getRange(from||null,to||null);\t//get limited set if bounds defined\r\n\t\telse\r\n\t\t\trange = this.data.getRange();\t\t\t//get all items in other case\r\n\t\t//in case of paging - it will be current page only\r\n\t\trange.each(function(obj){ \r\n\t\t\tif (!this.data.getMark(obj.id, \"webix_selected\")){\r\n\t\t\t\tthis._selected.push(obj.id);\t\r\n\t\t\t\tthis._select_mark(obj.id,true,refresh);\r\n\t\t\t}\r\n\t\t},this);\r\n\t\t//repaint self\r\n\t\tthis._refresh_selection(refresh);\r\n\t},\r\n\t//remove selection from all items\r\n\tunselectAll:function(){\r\n\t\tvar refresh=[];\r\n\t\t\r\n\t\tthis._selected.each(function(id){\r\n\t\t\tthis._select_mark(id,false,refresh);\t//unmark selected only\r\n\t\t},this);\r\n\t\t\r\n\t\tthis._selected=_to_array();\r\n\t\tthis._refresh_selection(refresh);\t//repaint self\r\n\t},\r\n\t//returns true if item is selected\r\n\tisSelected:function(id){\r\n\t\treturn this._selected.find(id)!=-1;\r\n\t},\r\n\t/*\r\n\t\treturns ID of selected items or array of IDs\r\n\t\tto make result predictable - as_array can be used, \r\n\t\t\twith such flag command will always return an array \r\n\t\t\tempty array in case when no item was selected\r\n\t*/\r\n\tgetSelectedId:function(as_array){\t\r\n\t\tswitch(this._selected.length){\r\n\t\t\tcase 0: return as_array?[]:\"\";\r\n\t\t\tcase 1: return as_array?[this._selected[0]]:this._selected[0];\r\n\t\t\tdefault: return ([].concat(this._selected)); //isolation\r\n\t\t}\r\n\t},\r\n\tgetSelectedItem:function(as_array){\r\n\t\tvar sel = this.getSelectedId(true);\r\n\t\tif (sel.length > 1 || as_array){\r\n\t\t\tfor (var i = sel.length - 1; i >= 0; i--)\r\n\t\t\t\tsel[i] = this.getItem(sel[i]);\r\n\t\t\treturn sel;\r\n\t\t} else if (sel.length)\r\n\t\t\treturn this.getItem(sel[0]);\r\n\t},\r\n\t//detects which repainting mode need to be used\r\n\t_is_mass_selection:function(obj){\r\n\t\t// crappy heuristic, but will do the job\r\n\t\treturn obj.length>100 || obj.length > this.data.count/2;\r\n\t},\r\n\t_refresh_selection:function(refresh){\r\n\t\tif (typeof refresh != \"object\") refresh = [refresh];\r\n\t\tif (!refresh.length) return;\t//nothing to repaint\r\n\t\t\r\n\t\tif (this._is_mass_selection(refresh))\t\r\n\t\t\tthis.data.refresh();\t//many items was selected - repaint whole view\r\n\t\telse\r\n\t\t\tfor (var i=0; i < refresh.length; i++)\t//repaint only selected\r\n\t\t\t\tthis.render(refresh[i],this.data.getItem(refresh[i]),\"update\");\r\n\t\t\t\r\n\t\tif (!this._silent_selection)\t\r\n\t\t\tthis.callEvent(\"onSelectChange\",[refresh]);\r\n\t}\r\n};\r\n\r\nready(function(){\r\n\tevent(document.body,\"mouseup\", function(){\r\n\t\tif(state._noselect_element){\r\n\t\t\tremoveCss(state._noselect_element,\"webix_noselect\");\r\n\t\t\tstate._noselect_element = null;\r\n\t\t}\r\n\t});\r\n});\r\n\r\nexport default SelectionModel;","import {isArray} from \"../webix/helpers\";\r\n\r\nconst color = {\r\n\t_toHex:[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],\r\n\ttoHex:function(number, length){\r\n\t\tnumber=parseInt(number,10);\r\n\t\tvar str = \"\";\r\n\t\twhile (number>0){\r\n\t\t\tstr=this._toHex[number%16]+str;\r\n\t\t\tnumber=Math.floor(number/16);\r\n\t\t}\r\n\t\twhile (str.length <length)\r\n\t\t\tstr = \"0\"+str;\r\n\t\treturn str;\r\n\t},\r\n\trgbToHex:function(rgb){\r\n\t\tvar arr=[];\r\n\t\tif(typeof(rgb) === \"string\")\r\n\t\t\trgb.replace(/[\\d+.]+/g, function(v){ \r\n\t\t\t\tarr.push(parseFloat(v));\r\n\t\t\t});\r\n\t\telse if(isArray(rgb))  arr = rgb;\r\n\t\t\r\n\t\t//transparent\r\n\t\tif(arr[3] === 0) return \"\";\r\n\r\n\t\treturn arr.slice(0, 3).map(function(n){\r\n\t\t\treturn color.toHex(Math.floor(n), 2);\r\n\t\t}).join(\"\");\r\n\t},\r\n\thexToDec:function(hex){\r\n\t\treturn parseInt(hex, 16);\r\n\t},\r\n\ttoRgb:function(rgb){\r\n\t\tvar r,g,b,rgbArr;\r\n\t\tif (typeof(rgb) != \"string\") {\r\n\t\t\tr = rgb[0];\r\n\t\t\tg = rgb[1];\r\n\t\t\tb = rgb[2];\r\n\t\t} else if (rgb.indexOf(\"rgb\")!=-1) {\r\n\t\t\trgbArr = rgb.substr(rgb.indexOf(\"(\")+1,rgb.lastIndexOf(\")\")-rgb.indexOf(\"(\")-1).split(\",\");\r\n\t\t\tr = rgbArr[0];\r\n\t\t\tg = rgbArr[1];\r\n\t\t\tb = rgbArr[2];\r\n\t\t} else {\r\n\t\t\tif (rgb.substr(0, 1) == \"#\") {\r\n\t\t\t\trgb = rgb.substr(1);\r\n\t\t\t}\r\n\t\t\tr = this.hexToDec(rgb.substr(0, 2));\r\n\t\t\tg = this.hexToDec(rgb.substr(2, 2));\r\n\t\t\tb = this.hexToDec(rgb.substr(4, 2));\r\n\t\t}\r\n\t\tr = (parseInt(r,10)||0);\r\n\t\tg = (parseInt(g,10)||0);\r\n\t\tb = (parseInt(b,10)||0);\r\n\t\tif (r < 0 || r > 255)\r\n\t\t\tr = 0;\r\n\t\tif (g < 0 || g > 255)\r\n\t\t\tg = 0;\r\n\t\tif (b < 0 || b > 255)\r\n\t\t\tb = 0;\r\n\t\treturn [r,g,b];\r\n\t},\r\n\thsvToRgb:function(h, s, v){\r\n\t\tvar hi,f,p,q,t,r,g,b;\r\n\t\thi = Math.floor((h/60))%6;\r\n\t\tf = h/60-hi;\r\n\t\tp = v*(1-s);\r\n\t\tq = v*(1-f*s);\r\n\t\tt = v*(1-(1-f)*s);\r\n\t\tr = 0;\r\n\t\tg = 0;\r\n\t\tb = 0;\r\n\t\tswitch(hi) {\r\n\t\t\tcase 0:\r\n\t\t\t\tr = v; g = t; b = p;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tr = q; g = v; b = p;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tr = p; g = v; b = t;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tr = p; g = q; b = v;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tr = t; g = p; b = v;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tr = v; g = p; b = q;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tr = Math.floor(r*255);\r\n\t\tg = Math.floor(g*255);\r\n\t\tb = Math.floor(b*255);\r\n\t\treturn [r, g, b];\r\n\t},\r\n\trgbToHsv:function(r, g, b){\r\n\t\tvar r0,g0,b0,min0,max0,s,h,v;\r\n\t\tr0 = r/255;\r\n\t\tg0 = g/255;\r\n\t\tb0 = b/255;\r\n\t\tmin0 = Math.min(r0, g0, b0);\r\n\t\tmax0 = Math.max(r0, g0, b0);\r\n\t\th = 0;\r\n\t\ts = max0===0?0:(1-min0/max0);\r\n\t\tv = max0;\r\n\t\tif (max0 == min0) {\r\n\t\t\th = 0;\r\n\t\t} else if (max0 == r0 && g0>=b0) {\r\n\t\t\th = 60*(g0 - b0)/(max0 - min0)+0;\r\n\t\t} else if (max0 == r0 && g0 < b0) {\r\n\t\t\th = 60*(g0 - b0)/(max0 - min0)+360;\r\n\t\t} else if (max0 == g0) {\r\n\t\t\th = 60*(b0 - r0)/(max0-min0)+120;\r\n\t\t} else if (max0 == b0) {\r\n\t\t\th = 60*(r0 - g0)/(max0 - min0)+240;\r\n\t\t}\r\n\t\treturn [h, s, v];\r\n\t}\r\n};\r\n\r\nexport default color;","import color from \"../../webix/color\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\n\r\nfunction joinAttributes(attrs){\r\n\tvar result = \" \";\r\n\tif(attrs)\r\n\t\tfor(var a in attrs)\r\n\t\t\tresult += a+\"=\\\"\"+attrs[a]+\"\\\" \";\r\n\treturn result;\r\n}\r\n// SVG\r\nvar SVG = {};\r\n\r\nSVG.draw = function(content, width, height, css){\r\n\tvar attrs = {\r\n\t\txmlns: \"http://www.w3.org/2000/svg\",\r\n\t\tversion: \"1.1\",\r\n\t\theight: \"100%\",\r\n\t\twidth: \"100%\",\r\n\t\tviewBox: \"0 0 \"+width+\" \"+height,\r\n\t\t\"class\": css||\"\"\r\n\t};\r\n\treturn \"<svg \"+joinAttributes(attrs)+\">\"+content+\"</svg>\";\r\n};\r\nSVG.styleMap = {\r\n\t\"lineColor\": \"stroke\",\r\n\t\"color\": \"fill\"\r\n};\r\nSVG.group = function(path){\r\n\treturn \"<g>\"+path+\"</g>\";\r\n};\r\nSVG._handlers = {\r\n\t// MoveTo: {x:px,y:py}\r\n\t\"M\": function(p){\r\n\t\treturn \" M \"+ p.x+\" \"+ p.y;\r\n\t},\r\n\t// LineTo: {x:px,y:py}\r\n\t\"L\": function(p){\r\n\t\treturn \" L \"+ p.x+\" \"+ p.y;\r\n\t},\r\n\t// Curve: 3 points {x:px,y:py}: two control points and an end point\r\n\t\"C\": function(cp0, cp1, p){\r\n\t\treturn \" C \"+cp0.x + \" \"+cp0.y+\" \"+cp1.x + \" \"+cp1.y+\" \"+p.x + \" \"+p.y;\r\n\t},\r\n\t// Arc: center point {x:px,y:py}, radius, angle0, angle1\r\n\t\"A\": function(p, radius, angle0, angle1){\r\n\t\tvar x = p.x+Math.cos(angle1)*radius;\r\n\t\tvar y = p.y+Math.sin(angle1)*radius;\r\n\t\tvar bigCircle = angle1-angle0 >= Math.PI;\r\n\t\treturn  \" A \"+radius+\" \"+radius+\" 0 \"+(bigCircle?1:0)+\" 1 \"+x+\" \"+y;\r\n\t}\r\n};\r\n// points is an array of an array with two elements: {string} line type, {array}\r\nSVG.definePath = function(points, close){\r\n\tvar path = \"\";\r\n\tfor(var i =0; i < points.length; i++){\r\n\t\tassert(points[i][0]&&typeof points[i][0] == \"string\", \"Path type must be a string\");\r\n\t\tvar type = (points[i][0]).toUpperCase();\r\n\t\tassert(this._handlers[type], \"Incorrect path type\");\r\n\t\tpath += this._handlers[type].apply(this,points[i].slice(1));\r\n\r\n\t}\r\n\tif(close)\r\n\t\tpath += \" Z\";\r\n\r\n\treturn path;\r\n};\r\nSVG._linePoints = function(points){\r\n\tvar result = [];\r\n\tfor(var i = 0; i< points.length; i++){\r\n\t\tresult.push([i?\"L\":\"M\",points[i]]);\r\n\t}\r\n\treturn result;\r\n};\r\nSVG.setOpacity = function(rawColor,opacity){\r\n\tlet rgbColor = color.toRgb(rawColor);\r\n\trgbColor.push(opacity);\r\n\treturn \"rgba(\"+rgbColor.join(\",\")+\")\";\r\n};\r\nSVG._curvePoints = function(points){\r\n\tvar result = [];\r\n\tfor(var i = 0; i< points.length; i++){\r\n\t\tvar p = points[i];\r\n\t\tif(!i){\r\n\t\t\tresult.push([\"M\",p[0]]);\r\n\t\t}\r\n\t\tresult.push([\"C\",p[1],p[2],p[3]]);\r\n\t}\r\n\treturn result;\r\n};\r\nSVG.getPath = function(path, css, attrs){\r\n\tattrs = joinAttributes(attrs);\r\n\treturn \"<path class=\\\"\"+css+\"\\\" vector-effect=\\\"non-scaling-stroke\\\" d=\\\"\"+path+\"\\\" \"+attrs+\"/>\";\r\n};\r\nSVG.getSector = function(p, radius, angle0, angle1, css, attrs){\r\n\tattrs = joinAttributes(attrs);\r\n\tvar x0 = p.x+Math.cos(angle0)*radius;\r\n\tvar y0 = p.y+Math.sin(angle0)*radius;\r\n\tvar lines = [\r\n\t\t[\"M\",p],\r\n\t\t[\"L\",{x:x0, y:y0}],\r\n\t\t[\"A\", p,radius,angle0,angle1],\r\n\t\t[\"L\",p]\r\n\t];\r\n\r\n\r\n\treturn \"<path class=\\\"\"+css+\"\\\" vector-effect=\\\"non-scaling-stroke\\\" d=\\\"\"+SVG.definePath(lines,true)+\"\\\" \"+attrs+\"/>\";\r\n};\r\nSVG.getCurve = function(points,css, attrs){\r\n\tattrs = joinAttributes(attrs);\r\n\tvar path = this.definePath(this._curvePoints(points));\r\n\treturn \"<path fill=\\\"none\\\" class=\\\"\"+css+\"\\\" vector-effect=\\\"non-scaling-stroke\\\" d=\\\"\"+path+\"\\\" \"+attrs+\"/>\";\r\n};\r\nSVG.getLine = function(p0,p1,css, attrs){\r\n\treturn this.getPath(this.definePath(this._linePoints([p0,p1]),true),css,attrs);\r\n};\r\nSVG.getCircle = function(p, radius, css, attrs){\r\n\tattrs = joinAttributes(attrs);\r\n\treturn \"<circle class=\\\"\"+css+\"\\\" cx=\\\"\"+ p.x+\"\\\" cy=\\\"\"+ p.y+\"\\\" r=\\\"\"+radius+\"\\\" \"+attrs+\"/>\";\r\n};\r\nSVG.getRect = function(x, y, width, height, css, attrs){\r\n\tattrs = joinAttributes(attrs);\r\n\treturn \"<rect class=\\\"\"+css+\"\\\" rx=\\\"0\\\" ry=\\\"0\\\" x=\\\"\"+x+\"\\\" y=\\\"\"+y+\"\\\" width=\\\"\"+width+\"\\\" height=\\\"\"+height+\"\\\" \"+attrs+\"/>\";\r\n};\r\n\r\n\r\nexport default SVG;","import {createCss} from \"../../webix/html\";\r\nimport {extend, copy} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\n\r\nvar defaults = {\r\n\tpaddingX: 6,\r\n\tpaddingY: 6,\r\n\tradius: 2,\r\n\tminHeight: 4,\r\n\teventRadius: 8\r\n};\r\nfunction Line(config){\r\n\tthis.config = extend(copy(defaults),config||{},true);\r\n}\r\n\r\nLine.prototype.draw = function(data, width, height){\r\n\tvar points = this.getPoints(data, width, height);\r\n\tvar config = this.config;\r\n\tvar renderer = SVG;\r\n\tvar styles = config.color?this._applyColor(renderer,config.color):null;\r\n\t// draw line\r\n\tvar path = renderer.definePath(this._getLinePoints(points));\r\n\tvar graph = renderer.group(renderer.getPath(path,\"webix_sparklines_line\"+(styles?\" \"+styles.line:\"\")));\r\n\t// draw items\r\n\tgraph += this._drawItems(renderer, points, config.radius, \"webix_sparklines_item\"+(styles?\" \"+styles.item:\"\"));\r\n\t// draw event items\r\n\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\r\n\tgraph += this._drawEventItems(renderer, points, eventRadius);\r\n\treturn  renderer.draw(graph, width, height, \"webix_sparklines_line_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nLine.prototype._applyColor = function(renderer,color){\r\n\tvar config = {\"line\":{},\"item\":{}},\r\n\t\tmap = renderer.styleMap;\r\n\tif(color){\r\n\t\tconfig.line[map.lineColor] = color;\r\n\t\tconfig.item[map.color] = color;\r\n\t\tfor(var name in config)\r\n\t\t\tconfig[name] = createCss(config[name]);\r\n\t}\r\n\treturn config;\r\n};\r\nLine.prototype._drawItems = function(renderer,points,radius,css,attrs){\r\n\tvar items = [];\r\n\tfor(var i = 0; i< points.length; i++){\r\n\t\titems.push(renderer.getCircle(points[i], radius, css,attrs));\r\n\t}\r\n\treturn renderer.group(items.join(\"\"));\r\n};\r\nLine.prototype._drawEventItems = function(renderer,points,radius){\r\n\tvar items = [];\r\n\tfor(var i = 0; i< points.length; i++){\r\n\t\titems.push(renderer.getCircle(points[i], radius, \"webix_sparklines_event_area\", {webix_area:i}));\r\n\t}\r\n\treturn renderer.group(items.join(\"\"));\r\n};\r\n\r\nLine.prototype._getLinePoints = function(points){\r\n\tvar i, type, result =[];\r\n\tfor( i =0; i< points.length; i++){\r\n\t\ttype = i?\"L\":\"M\";\r\n\t\tresult.push([type,points[i]]);\r\n\t}\r\n\treturn result;\r\n};\r\nLine.prototype.getPoints = function(data, width, height) {\r\n\tvar config = this.config;\r\n\tvar minValue = Math.min.apply(null,data);\r\n\tif (typeof config.origin !== \"undefined\")\r\n\t\tminValue = Math.min(config.origin, minValue);\r\n\r\n\tvar maxValue = Math.max.apply(null,data);\r\n\tvar result = [];\r\n\tvar x = config.paddingX||0;\r\n\tvar y = config.paddingY||0;\r\n\twidth = (width||100)-x*2;\r\n\tvar minHeight = config.minHeight||0;\r\n\theight = (height||100)-y*2;\r\n\tif(data.length){\r\n\t\tif(data.length==1)\r\n\t\t\tresult.push({x: width/2+x, y: height/2+x});\r\n\t\telse{\r\n\t\t\tvar unitX = width/(data.length-1);\r\n\t\t\tvar yNum = config.scale || (maxValue - minValue);\r\n\t\t\tvar unitY = (height- minHeight)/(yNum?yNum:1);\r\n\t\t\tif(!yNum)\r\n\t\t\t\theight /= 2;\r\n\t\t\tfor(var i=0; i < data.length; i++){\r\n\t\t\t\tresult.push({x: Math.ceil(unitX*i)+x, y: height-Math.ceil(unitY*(data[i]-minValue))+y-minHeight});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nexport default Line;","import {createCss} from \"../../webix/html\";\r\nimport {extend, copy} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\nimport BaseLine from \"./line\";\r\n\r\n\r\n\r\nvar defaults = {\r\n\tpaddingX: 3,\r\n\tpaddingY: 4,\r\n\tradius: 1,\r\n\tminHeight: 4,\r\n\teventRadius: 8\r\n};\r\n\r\nfunction Area(config){\r\n\tthis.config = extend(copy(defaults),config||{},true);\r\n}\r\n\r\nArea.prototype.draw = function(data, width, height){\r\n\tvar eventRadius, graph, path, points, styles,\r\n\t\tconfig = this.config,\r\n\t\tLine = BaseLine.prototype,\r\n\t\trenderer = SVG;\r\n\r\n\t// draw area\r\n\tpoints = this.getPoints(data, width, height);\r\n\tpath = renderer.definePath(Line._getLinePoints(points),true);\r\n\r\n\tif(config.color)\r\n\t\tstyles = this._applyColor(renderer,config.color);\r\n\r\n\tgraph = renderer.group(renderer.getPath(path,\"webix_sparklines_area\"+(styles?\" \"+styles.area:\"\")));\r\n\t// draw line\r\n\tpoints.splice(points.length - 3, 3);\r\n\tpath = renderer.definePath(Line._getLinePoints(points));\r\n\tgraph += renderer.group(renderer.getPath(path,\"webix_sparklines_line\"+(styles?\" \"+styles.line:\"\")));\r\n\t// draw items\r\n\tgraph += Line._drawItems(renderer, points, config.radius, \"webix_sparklines_item\"+(styles?\" \"+styles.item:\"\"));\r\n\t// draw event areas\r\n\teventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\r\n\tgraph += Line._drawEventItems(renderer, points, eventRadius);\r\n\treturn  renderer.draw(graph, width, height, \"webix_sparklines_area_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nArea.prototype._applyColor = function(renderer,color){\r\n\tvar config = {\"area\": {}, \"line\":{},\"item\":{}},\r\n\t\tmap = renderer.styleMap;\r\n\tif(color){\r\n\t\tconfig.area[map.color] = renderer.setOpacity(color,0.2);\r\n\t\tconfig.line[map.lineColor] = color;\r\n\t\tconfig.item[map.color] = color;\r\n\t\tfor(var name in config)\r\n\t\t\tconfig[name] = createCss(config[name]);\r\n\t}\r\n\r\n\treturn config;\r\n};\r\nArea.prototype.getPoints = function(data, width, height){\r\n\tvar Line = BaseLine.prototype;\r\n\tvar points =Line.getPoints.call(this, data, width, height);\r\n\tvar x = this.config.paddingX || 0;\r\n\tvar y = this.config.paddingY || 0;\r\n\tpoints.push({x: width - x, y: height - y},{x: x, y: height - y},{x: x, y: points[0].y});\r\n\treturn points;\r\n};\r\n\r\nexport default Area;","import {createCss} from \"../../webix/html\";\r\nimport {extend, copy} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\n\r\n\r\nvar defaults = {\r\n\tpaddingX: 3,\r\n\tpaddingY: 4,\r\n\twidth: 20,\r\n\tmargin: 4,\r\n\tminHeight: 4,\r\n\teventRadius: 8,\r\n\torigin:0,\r\n\titemCss: function(value){return value < (this.config.origin||0)?\" webix_sparklines_bar_negative\":\"\";}\r\n};\r\nfunction Bar(config){\r\n\tthis.config = extend(copy(defaults),config||{},true);\r\n}\r\n\r\nBar.prototype.draw = function(data, width, height){\r\n\tvar i, css, p, y, padding,\r\n\t\tconfig = this.config,\r\n\t\tgraph = \"\", items = [],\r\n\t\tpoints = this.getPoints(data, width, height),\r\n\t\trenderer = SVG;\r\n\r\n\t// draw bars\r\n\tfor( i = 0; i< points.length; i++){\r\n\t\tcss = (typeof config.itemCss == \"function\"?config.itemCss.call(this,data[i]):(config.itemCss||\"\"));\r\n\t\tif (config.negativeColor && data[i] < config.origin)\r\n\t\t\tcss += \" \"+this._applyColor(renderer,config.negativeColor);\r\n\t\telse if(config.color)\r\n\t\t\tcss += \" \"+this._applyColor(renderer,config.color);\r\n\t\tp = points[i];\r\n\t\titems.push(renderer.getRect(p.x, p.y, p.width, p.height,\"webix_sparklines_bar \"+css));\r\n\t}\r\n\tgraph += renderer.group(items.join(\"\"));\r\n\t// origin)\r\n\ty = parseInt(this._getOrigin(data, width, height),10)+0.5;\r\n\tpadding = config.paddingX||0;\r\n\tgraph += renderer.group(renderer.getLine({x:padding, y: y},{x: width-padding, y: y},\"webix_sparklines_origin\"));\r\n\r\n\t// event areas\r\n\tvar evPoints = this._getEventPoints(data, width, height);\r\n\tvar evItems = [];\r\n\tfor( i = 0; i< evPoints.length; i++){\r\n\t\tp = evPoints[i];\r\n\t\tevItems.push(renderer.getRect(p.x, p.y, p.width, p.height,\"webix_sparklines_event_area \",{\"webix_area\":i}));\r\n\t}\r\n\tgraph += renderer.group(evItems.join(\"\"));\r\n\treturn  renderer.draw(graph, width, height, \"webix_sparklines_bar_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nBar.prototype._applyColor = function(renderer,color){\r\n\tvar config = {},\r\n\t\tmap = renderer.styleMap;\r\n\tif(color)\r\n\t\tconfig[map.color] = color;\r\n\treturn createCss(config);\r\n};\r\nBar.prototype._getOrigin = function(data, width, height){\r\n\tvar config = this.config;\r\n\tvar y = config.paddingY||0;\r\n\theight = (height||100)-y*2;\r\n\tvar pos = y+height;\r\n\tif(config.origin !== false){\r\n\t\tvar minValue = Math.min.apply(null,data);\r\n\t\tvar maxValue = Math.max.apply(null,data);\r\n\t\tvar origin = config.origin||-0.000001;\r\n\t\tif(origin >= maxValue){\r\n\t\t\tpos = y;\r\n\t\t}\r\n\t\telse if(origin > minValue){\r\n\t\t\tvar unitY = height/(maxValue - minValue);\r\n\t\t\tpos -= unitY*(origin-minValue);\r\n\t\t}\r\n\t}\r\n\treturn pos;\r\n};\r\nBar.prototype._getEventPoints = function(data, width, height){\r\n\tvar result = [];\r\n\tvar x = this.config.paddingX||0;\r\n\tvar y = this.config.paddingY||0;\r\n\twidth = (width||100)-x*2;\r\n\theight = (height||100)-y*2;\r\n\tif(data.length){\r\n\t\tvar unitX = width/data.length;\r\n\t\tfor(var i=0; i < data.length; i++)\r\n\t\t\tresult.push({x: Math.ceil(unitX*i)+x, y: y, height: height, width: unitX});\r\n\t}\r\n\treturn result;\r\n};\r\nBar.prototype.getPoints = function(data, width, height){\r\n\tvar config = this.config;\r\n\tvar minValue = Math.min.apply(null,data);\r\n\tif (config.origin < minValue) \r\n\t\tminValue = config.origin;\r\n\r\n\tvar maxValue = Math.max.apply(null,data);\r\n\tvar result = [];\r\n\tvar x = config.paddingX;\r\n\tvar y = config.paddingY;\r\n\tvar margin = config.margin;\r\n\tvar barWidth = config.width||20;\r\n\tvar originY = this._getOrigin(data,width,height);\r\n\twidth = (width||100)-x*2;\r\n\theight = (height||100)-y*2;\r\n\tif(data.length){\r\n\t\tvar unitX = width/data.length;\r\n\t\tvar yNum = config.scale || (maxValue - minValue);\r\n\t\tbarWidth = Math.min(unitX-margin,barWidth);\r\n\t\tmargin = unitX-barWidth;\r\n\t\tvar minHeight = 0;\r\n\t\tvar origin = minValue;\r\n\r\n\t\tif(config.origin !== false && config.origin > minValue)\r\n\t\t\torigin = config.origin||0;\r\n\t\telse\r\n\t\t\tminHeight = config.minHeight;\r\n\r\n\t\tvar unitY = (height-minHeight)/(yNum?yNum:1);\r\n\r\n\t\tfor(var i=0; i < data.length; i++){\r\n\t\t\tvar h = Math.ceil(unitY*(data[i]-origin));\r\n\t\t\tresult.push({x: Math.ceil(unitX*i)+x+margin/2, y: originY-(data[i]>=origin?h:0)-minHeight, height: Math.abs(h)+minHeight, width: barWidth});\r\n\t\t}\r\n\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nexport default Bar;","import {extend} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\n\r\nvar defaults = {\r\n\tpaddingY: 2\r\n};\r\n\r\nfunction Pie(config){\r\n\tthis.config = extend(defaults,config||{},true);\r\n}\r\nPie.prototype._defColorsCursor = 0;\r\nPie.prototype._defColors  = [\r\n\t\"#f55b50\",\"#ff6d3f\",\"#ffa521\",\"#ffc927\",\"#ffee54\",\"#d3e153\",\"#9acb61\",\"#63b967\",\r\n\t\"#21a497\",\"#21c5da\",\"#3ea4f5\",\"#5868bf\",\"#7b53c0\",\"#a943ba\",\"#ec3b77\",\"#9eb0b8\"\r\n];\r\nPie.prototype._getColor = function(i,data){\r\n\tvar count = data.length;\r\n\tvar colorsCount = this._defColors.length;\r\n\tif(colorsCount > count){\r\n\t\tif(i){\r\n\t\t\tif(i < colorsCount - count)\r\n\t\t\t\ti = this._defColorsCursor +2;\r\n\t\t\telse\r\n\t\t\t\ti = this._defColorsCursor+1;\r\n\t\t}\r\n\t\tthis._defColorsCursor = i;\r\n\t}\r\n\telse\r\n\t\ti = i%colorsCount;\r\n\treturn this._defColors[i];\r\n};\r\nPie.prototype.draw = function(data, width, height){\r\n\tvar attrs, graph, i, sectors,\r\n\t\tconfig = this.config,\r\n\t\tcolor = config.color||this._getColor,\r\n\t\tpoints = this.getAngles(data),\r\n\t\trenderer = SVG,\r\n\t\ty = config.paddingY|| 0,\r\n\t\t// radius\r\n\t\tr = height/2 - y,\r\n\t\t// center\r\n\t\tx0 = width/2, y0 = height/2;\r\n\r\n\t// draw sectors\r\n\tif(typeof color != \"function\")\r\n\t\tcolor = function(){return color;};\r\n\tsectors = \"\";\r\n\tfor( i =0; i < points.length; i++){\r\n\t\tattrs = {};\r\n\t\tattrs[renderer.styleMap[\"color\"]] = color.call(this,i,data,this._context);\r\n\t\tsectors += renderer.getSector({x:x0,y:y0},r,points[i][0],points[i][1],\"webix_sparklines_sector\", attrs);\r\n\t}\r\n\tgraph = renderer.group(sectors);\r\n\r\n\t// draw event areas\r\n\tsectors = \"\";\r\n\tfor(i =0; i < points.length; i++){\r\n\t\tsectors += renderer.getSector({x:x0,y:y0},r,points[i][0],points[i][1],\"webix_sparklines_event_area\",{\"webix_area\":i});\r\n\t}\r\n\tgraph += renderer.group(sectors);\r\n\r\n\treturn  renderer.draw(graph, width, height, \"webix_sparklines_pie_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nPie.prototype.getAngles = function(data){\r\n\tvar a0 = -Math.PI/ 2, a1,\r\n\t\ti, result = [];\r\n\r\n\tvar ratios = this._getRatios(data);\r\n\r\n\tfor( i =0; i < data.length; i++){\r\n\t\ta1= -Math.PI/2+ratios[i]-0.0001;\r\n\t\tresult.push([a0,a1]);\r\n\t\ta0 = a1;\r\n\t}\r\n\treturn result;\r\n};\r\nPie.prototype._getTotalValue = function(data){\r\n\tvar t=0;\r\n\tfor(var i = 0; i < data.length;i++)\r\n\t\tt += data[i]*1;\r\n\treturn  t;\r\n};\r\nPie.prototype._getRatios = function(data){\r\n\tvar i, value,\r\n\t\tratios = [],\r\n\t\tprevSum = 0,\r\n\t\ttotalValue = this._getTotalValue(data);\r\n\tfor(i = 0; i < data.length;i++){\r\n\t\tvalue = data[i]*1;\r\n\t\tratios[i] = Math.PI*2*(totalValue?((value+prevSum)/totalValue):(1/data.length));\r\n\t\tprevSum += value;\r\n\t}\r\n\treturn ratios;\r\n};\r\n\r\nexport default Pie;","import {createCss} from \"../../webix/html\";\r\nimport {extend, copy} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\nimport Base from \"./line\";\r\n\r\nvar defaults = {\r\n\tpaddingX: 3,\r\n\tpaddingY: 6,\r\n\tradius: 2,\r\n\tminHeight: 4,\r\n\teventRadius: 8\r\n};\r\n\r\nfunction Spline(config){\r\n\tthis.config = extend(copy(defaults),config||{},true);\r\n}\r\n\r\nSpline.prototype.draw = function(data, width, height){\r\n\tvar config = this.config,\r\n\t\tgraph = \"\",\r\n\t\tLine = Base.prototype,\r\n\t\tpoints = this.getPoints(data, width, height),\r\n\t\trenderer = SVG,\r\n\t\tstyles = config.color?this._applyColor(renderer,config.color):null;\r\n\r\n\t// draw spline\r\n\tgraph += renderer.group(renderer.getCurve(points, \"webix_sparklines_line\"+(styles?\" \"+styles.line:\"\")));\r\n\r\n\tvar linePoints = Line.getPoints.call(this,data, width, height);\r\n\t// draw items\r\n\tgraph += Line._drawItems(renderer, linePoints, config.radius, \"webix_sparklines_item\"+(styles?\" \"+styles.item:\"\"));\r\n\t// draw event items\r\n\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\r\n\tgraph += Line._drawEventItems(renderer, linePoints, eventRadius);\r\n\treturn  renderer.draw(graph, width, height,\"webix_sparklines_line_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nSpline.prototype._applyColor = function(renderer,color){\r\n\tvar config = {\"line\":{},\"item\":{}},\r\n\t\tmap = renderer.styleMap;\r\n\tif(color){\r\n\t\tconfig.line[map.lineColor] = color;\r\n\t\tconfig.item[map.color] = color;\r\n\t\tfor(var name in config)\r\n\t\t\tconfig[name] = createCss(config[name]);\r\n\t}\r\n\treturn config;\r\n};\r\nSpline.prototype.getPoints = function(data, width, height){\r\n\tvar i, points, px, py,\r\n\t\tresult = [], x = [], y =[],\r\n\t\tLine = Base.prototype;\r\n\r\n\tpoints = Line.getPoints.call(this, data, width, height);\r\n\r\n\tfor(i = 0; i< points.length; i++){\r\n\t\tx.push(points[i].x);\r\n\t\ty.push(points[i].y);\r\n\t}\r\n\tpx = this._getControlPoints(x);\r\n\tpy = this._getControlPoints(y);\r\n\t/*updates path settings, the browser will draw the new spline*/\r\n\tfor ( i=0;i<points.length-1;i++){\r\n\t\tresult.push([points[i],{x:px[0][i],y:py[0][i]},{x:px[1][i],y:py[1][i]},points[i+1]]);\r\n\t}\r\n\treturn result;\r\n\r\n};\r\n/* code from https://www.particleincell.com/2012/bezier-splines/ */\r\nSpline.prototype._getControlPoints = function(points){\r\n\tvar a=[], b=[], c=[], r=[], p1=[], p2=[],\r\n\t\ti, m, n = points.length-1;\r\n\r\n\ta[0]=0;\r\n\tb[0]=2;\r\n\tc[0]=1;\r\n\tr[0] = points[0] + 2*points[1];\r\n\r\n\tfor (i = 1; i < n - 1; i++){\r\n\t\ta[i]=1;\r\n\t\tb[i]=4;\r\n\t\tc[i]=1;\r\n\t\tr[i] = 4 * points[i] + 2 * points[i+1];\r\n\t}\r\n\r\n\ta[n-1]=2;\r\n\tb[n-1]=7;\r\n\tc[n-1]=0;\r\n\tr[n-1] = 8*points[n-1]+points[n];\r\n\r\n\tfor (i = 1; i < n; i++){\r\n\t\tm = a[i]/b[i-1];\r\n\t\tb[i] = b[i] - m * c[i - 1];\r\n\t\tr[i] = r[i] - m*r[i-1];\r\n\t}\r\n\r\n\tp1[n-1] = r[n-1]/b[n-1];\r\n\tfor (i = n - 2; i >= 0; --i)\r\n\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\r\n\r\n\tfor (i=0;i<n-1;i++)\r\n\t\tp2[i]=2*points[i+1]-p1[i+1];\r\n\r\n\tp2[n-1]=0.5*(points[n]+p1[n-1]);\r\n\r\n\treturn [p1, p2];\r\n};\r\n\r\n\r\n\r\nexport default Spline;","import {createCss} from \"../../webix/html\";\r\nimport {extend, copy} from \"../../webix/helpers\";\r\n\r\nimport SVG from \"./svg\";\r\nimport Spline from \"./spline\";\r\nimport Base from \"./line\";\r\n\r\n\r\nvar defaultsArea = {\r\n\tpaddingX: 3,\r\n\tpaddingY: 6,\r\n\tradius: 1,\r\n\tminHeight: 4,\r\n\teventRadius: 8\r\n};\r\n// spline area\r\nfunction SplineArea(config){\r\n\tthis.config = extend(copy(defaultsArea),config||{},true);\r\n}\r\nSplineArea.prototype = copy(Spline.prototype);\r\nSplineArea.prototype.draw = function(data, width, height){\r\n\tvar config = this.config,\r\n\t\tLine = Base.prototype,\r\n\t\trenderer = SVG,\r\n\t\tstyles = config.color?this._applyColor(renderer,config.color):null;\r\n\r\n\tvar points = this.getPoints(data, width, height);\r\n\t// draw area\r\n\tvar linePoints = points.splice(points.length - 3, 3);\r\n\tvar linePath = renderer._linePoints(linePoints);\r\n\tlinePath[0][0] = \"L\";\r\n\tvar areaPoints = renderer._curvePoints(points).concat(linePath);\r\n\tvar graph = renderer.group(renderer.getPath(renderer.definePath(areaPoints),\"webix_sparklines_area\"+(styles?\" \"+styles.area:\"\"), true));\r\n\t// draw line\r\n\tgraph += renderer.group(renderer.getPath(renderer.definePath(renderer._curvePoints(points)),\"webix_sparklines_line\"+(styles?\" \"+styles.line:\"\")));\r\n\r\n\tvar itemPoints = Line.getPoints.call(this,data, width, height);\r\n\t// draw items\r\n\tgraph += Line._drawItems(renderer, itemPoints, config.radius, \"webix_sparklines_item\"+(styles?\" \"+styles.item:\"\"));\r\n\t// draw event items\r\n\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\r\n\tgraph += Line._drawEventItems(renderer, itemPoints, eventRadius);\r\n\treturn  renderer.draw(graph, width, height, \"webix_sparklines_splinearea_chart\"+(config.css?\" \"+config.css:\"\"));\r\n};\r\nSplineArea.prototype._applyColor = function(renderer,color){\r\n\tvar config = {\"area\": {}, \"line\":{},\"item\":{}},\r\n\t\tmap = renderer.styleMap;\r\n\tif(color){\r\n\t\tconfig.area[map.color] = renderer.setOpacity(color,0.2);\r\n\t\tconfig.line[map.lineColor] = color;\r\n\t\tconfig.item[map.color] = color;\r\n\t\tfor(var name in config)\r\n\t\t\tconfig[name] = createCss(config[name]);\r\n\t}\r\n\treturn config;\r\n};\r\nSplineArea.prototype.getPoints = function(data, width, height){\r\n\tvar points = Spline.prototype.getPoints.call(this, data, width, height);\r\n\tvar x = this.config.paddingX || 0;\r\n\tvar y = this.config.paddingY || 0;\r\n\tpoints.push({x: width - x, y: height - y},{x: x, y: height - y},{x: x, y: points[0][0].y});\r\n\treturn points;\r\n};\r\n\r\nexport default SplineArea;","import {extend, bind} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {attachEvent} from \"../webix/customevents\";\r\n\r\nimport Area from \"./sparklines/area\";\r\nimport Bar from \"./sparklines/bar\";\r\nimport Line from \"./sparklines/line\";\r\nimport Pie from \"./sparklines/pie\";\r\nimport Spline from \"./sparklines/spline\";\r\nimport SplineArea from \"./sparklines/splinearea\";\r\n\r\nfunction Sparklines(){}\r\n\r\nfunction getData(data){\r\n\tvar values = [];\r\n\tfor (var i = data.length - 1; i >= 0; i--) {\r\n\t\tvar value = data[i];\r\n\t\tvalues[i] = (typeof value === \"object\" ? value.value : value);\r\n\t}\r\n\treturn values;\r\n}\r\n\r\n\r\nSparklines.types ={};\r\n\r\nSparklines.getTemplate = function(customConfig){\r\n\tvar config = customConfig||{};\r\n\tif(typeof customConfig == \"string\")\r\n\t\tconfig = { type: customConfig };\r\n\r\n\textend(config,{ type:\"line\" });\r\n\r\n\tvar slConstructor = this.types[config.type];\r\n\tassert(slConstructor,\"Unknown sparkline type\");\r\n\treturn bind(this._template, new slConstructor(config));\r\n};\r\n\r\nSparklines._template =  function(item, common, data, column){\r\n\tif (column)\r\n\t\treturn this.draw(getData(data), column.width, 33);\r\n\telse\r\n\t\treturn this.draw(item.data || item, common.width, common.height);\r\n};\r\n\r\n// add \"sparklines\" type\r\nattachEvent(\"onDataTable\", function(table){\r\n\ttable.type.sparklines = Sparklines.getTemplate();\r\n});\r\n\r\nSparklines.types[\"area\"]=Area;\r\nSparklines.types[\"bar\"]=Bar;\r\nSparklines.types[\"line\"]=Line;\r\nSparklines.types[\"pie\"]=Pie;\r\nSparklines.types[\"spline\"]=Spline;\r\nSparklines.types[\"splineArea\"]=SplineArea;\r\n\r\nexport default Sparklines;","import i18n from \"./i18n\";\r\n\r\nconst csv = {\r\n\tescape:true,\r\n\tdelimiter:{\r\n\t\trows: \"\\n\",\r\n\t\tcols: \"\\t\"\r\n\t},\r\n\tparse:function(text, sep){\r\n\t\tsep = sep||this.delimiter;\r\n\t\tif (!this.escape)\r\n\t\t\treturn this._split_clip_data(text, sep);\r\n\r\n\t\tvar lines = text.replace(/\\n$/,\"\").split(sep.rows);\r\n\r\n\t\tvar i = 0;\r\n\t\twhile (i < lines.length - 1) {\r\n\t\t\tif (this._substr_count(lines[i], \"\\\"\") % 2 === 1) {\r\n\t\t\t\tlines[i] += sep.rows + lines[i + 1];\r\n\t\t\t\tdelete lines[i + 1];\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tvar csv = [];\r\n\r\n\t\tfor (i = 0; i < lines.length; i++) {\r\n\t\t\tif (typeof(lines[i]) !== \"undefined\") {\r\n\t\t\t\tvar tline = lines[i];\r\n\t\t\t\tvar start = 0;\r\n\t\t\t\tvar line = [];\r\n\t\t\t\tvar quoted = false;\r\n\t\t\t\tfor (var j=0; j<=tline.length; j++){\r\n\t\t\t\t\tif (!quoted && tline[j] === sep.cols || j === tline.length){\r\n\t\t\t\t\t\tvar chunk = tline.substr(start, j-start);\r\n\t\t\t\t\t\tif (chunk[0] === chunk[chunk.length-1] && chunk[0] === \"\\\"\"){\r\n\t\t\t\t\t\t\tchunk = chunk.substr(1, chunk.length-2).replace(\"\\\"\\\"\", \"\\\"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tline.push(chunk);\r\n\t\t\t\t\t\tstart = j+1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (tline[j] === \"\\\"\") {\r\n\t\t\t\t\t\tquoted = !quoted;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcsv.push(line);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn csv;\r\n\t},\r\n\t_split_clip_data: function(text, sep) {\r\n\t\tvar lines = text.split(sep.rows);\r\n\t\tfor (var i = 0; i < lines.length; i++) {\r\n\t\t\tlines[i] = lines[i].split(sep.cols);\r\n\t\t}\r\n\t\treturn lines;\r\n\t},\r\n\t/*! counts how many occurances substring in string **/\r\n\t_substr_count: function(string, substring) {\r\n\t\tvar arr = string.split(substring);\r\n\t\treturn arr.length - 1;\r\n\t},\r\n\tstringify:function(data, sep){\r\n\t\tsep = sep||this.delimiter;\r\n\r\n\t\tif (!this.escape){\r\n\t\t\tfor (let i = 0; i < data.length; i++)\r\n\t\t\t\tdata[i] = data[i].join(sep.cols);\r\n\t\t\treturn data.join(sep.rows);\r\n\t\t}\r\n\r\n\t\tvar reg = /\\n|\"|;|,/;\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tfor (var j = 0; j < data[i].length; j++) {\r\n\t\t\t\tvar chunk = data[i][j];\r\n\t\t\t\tif (chunk instanceof Date)\r\n\t\t\t\t\tdata[i][j] = i18n.parseFormatStr(chunk);\r\n\t\t\t\telse if (reg.test(chunk))\r\n\t\t\t\t\tdata[i][j] = \"\\\"\" + chunk.toString().replace(/\"/g, \"\\\"\\\"\") + \"\\\"\";\r\n\t\t\t}\r\n\t\t\tdata[i] = data[i].join(sep.cols);\r\n\t\t}\r\n\t\tdata = data.join(sep.rows);\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\nexport default csv;","import template from \"../webix/template\";\r\nimport UIManager from \"../core/uimanager\";\r\n\r\nimport clipbuffer from \"../webix/clipbuffer\";\r\nimport csv from \"../webix/csv\";\r\nimport env from \"../webix/env\";\r\n\r\nimport {isUndefined} from \"../webix/helpers\";\r\n\r\n\r\nconst TablePaste = {\r\n\tclipboard_setter:function(value){\r\n\t\tif (env.touch) return value;\r\n\t\t\r\n\t\tif (value === true || value === 1) value = \"block\";\r\n\t\tclipbuffer.init();\r\n\t\tthis.attachEvent(\"onSelectChange\",this._sel_to_clip);\r\n\t\t// solution for clicks on selected items\r\n\t\tthis.attachEvent(\"onItemClick\",function(){\r\n\t\t\tif(document.activeElement && this.$view.contains(document.activeElement)){\r\n\t\t\t\tclipbuffer.focus();\r\n\t\t\t\tUIManager.setFocus(this);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent(\"onPaste\", this._clip_to_sel);\r\n\r\n\t\treturn value;\r\n\t},\r\n\ttemplateCopy_setter: template,\r\n\t_sel_to_clip: function() {\r\n\t\tif (!this.getEditor || !this.getEditor()){\r\n\t\t\tvar data = this._get_sel_text();\r\n\t\t\tclipbuffer.set(data);\r\n\t\t\tUIManager.setFocus(this);\r\n\t\t}\r\n\t},\r\n\r\n\t_get_sel_text: function() {\r\n\t\tvar data = [];\r\n\t\tvar filter = this._settings.templateCopy;\r\n\t\tthis.mapSelection(function(value, row, col, row_ind) {\r\n\t\t\tif (!data[row_ind]) data[row_ind] = [];\r\n\t\t\tvar newvalue = filter ? filter(value, row, col) : value;\r\n\t\t\tdata[row_ind].push(newvalue);\r\n\t\t\treturn value;\r\n\t\t});\r\n\t\tvar value = data.length === 1 && data[0].length === 1 ? data[0][0] : csv.stringify(data, this._settings.delimiter);\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_clip_to_sel: function(text) {\r\n\t\tif (!isUndefined(this._paste[this._settings.clipboard])) {\r\n\t\t\tvar data = csv.parse(text, this._settings.delimiter);\r\n\t\t\tthis._paste[this._settings.clipboard].call(this, data);\r\n\t\t}\r\n\t},\r\n\r\n\t_paste: {\r\n\t\tblock: function(data) {\r\n\t\t\tvar leftTop = this.mapSelection(null);\r\n\t\t\tif (!leftTop) return;\r\n\r\n\t\t\t// filling cells with data\r\n\t\t\tthis.mapCells(leftTop.row, leftTop.column, data.length, null, function(value, row, col, row_ind, col_ind) {\r\n\t\t\t\tif (data[row_ind] && data[row_ind].length>col_ind) {\r\n\t\t\t\t\treturn data[row_ind][col_ind];\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\r\n\t\tselection: function(data) {\r\n\t\t\tthis.mapSelection(function(value, row, col, row_ind, col_ind) {\r\n\t\t\t\tif (data[row_ind] && data[row_ind].length>col_ind)\r\n\t\t\t\t\treturn data[row_ind][col_ind];\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\r\n\t\trepeat: function(data) {\r\n\t\t\tthis.mapSelection(function(value, row, col, row_ind, col_ind) {\r\n\t\t\t\trow = data[row_ind%data.length];\r\n\t\t\t\tvalue = row[col_ind%row.length];\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\r\n\t\tcustom: function() {}\r\n\t}\r\n};\r\n\r\nexport default TablePaste;","import {assert} from \"../webix/debug\";\r\n\r\n\r\nconst TreeAPI = {\r\n\topen: function(id, show) {\r\n\t\tif (!id) return;\r\n\t\t//ignore open for leaf items\r\n\t\tvar item = this.getItem(id);\r\n\t\tassert(item,\"Incorrect ID to open: \"+id);\r\n\r\n\t\tif (!item.$count || item.open) return;\r\n\r\n\t\tif (this.callEvent(\"onBeforeOpen\",[id])){\r\n\t\t\titem.open=true;\r\n\t\t\tthis.data.callEvent(\"onStoreUpdated\",[id, 0, \"branch\"]);\r\n\t\t\tthis.callEvent(\"onAfterOpen\",[id]);\r\n\t\t}\r\n\r\n\t\tif (show && id != \"0\")\r\n\t\t\tthis.open(this.getParentId(id), show);\r\n\t},\r\n\tclose: function(id) {\r\n\t\tif (!id) return;\r\n\t\tvar item = this.getItem(id);\r\n\t\tif (!item.open) return;\r\n\r\n\t\tif (this.callEvent(\"onBeforeClose\",[id])){\r\n\t\t\titem.open=false;\r\n\t\t\tthis.data.callEvent(\"onStoreUpdated\",[id, 0, \"branch\"]);\r\n\t\t\tthis.callEvent(\"onAfterClose\",[id]);\r\n\t\t}\r\n\t},\r\n\topenAll: function(id){\r\n\t\tthis.data.eachSubItem((id||0), function(obj, branch){\r\n\t\t\tif (branch)\r\n\t\t\t\tobj.open = true;\r\n\t\t});\r\n\t\tthis.data.refresh();\r\n\t},\r\n\tcloseAll: function(id){\r\n\t\tthis.data.eachSubItem((id||0), function(obj, branch){\r\n\t\t\tif (branch)\r\n\t\t\t\tobj.open = false;\r\n\t\t});\r\n\t\tthis.data.refresh();\r\n\t},\r\n\t_tree_check_uncheck:function(id,mode,e){\r\n\t\tif(this._settings.threeState)\r\n\t\t\treturn this._tree_check_uncheck_3(id,(mode !== null?mode:\"\"));\r\n\r\n\t\tvar value,\r\n\t\t\titem = this.getItem(id),\r\n\t\t\ttrg = (e?e.target:null);\r\n\r\n\t\t//read actual value from HTML tag when possible\r\n\t\t//as it can be affected by dbl-clicks\r\n\t\tif(trg && trg.type == \"checkbox\")\r\n\t\t\tvalue = trg.checked?true:false;\r\n\t\telse\r\n\t\t\tvalue = (mode !== null?mode:!item.checked);\r\n\r\n\t\titem.checked = value;\r\n\t\tthis.callEvent(\"onItemCheck\", [id, item.checked, e]);\r\n\t},\r\n\tisBranchOpen:function(search_id){\r\n\t\tif (search_id == \"0\") return true;\r\n\r\n\t\tvar item = this.getItem(search_id);\r\n\t\tif (item.open)\r\n\t\t\treturn this.isBranchOpen(item.$parent);\r\n\t\treturn false;\r\n\t},\r\n\tgetOpenItems: function() {\r\n\t\tvar open = [];\r\n\t\tfor (var id in this.data.branch) {\r\n\t\t\tif (this.exists(id) && this.getItem(id).open)\r\n\t\t\t\topen.push(id);\r\n\t\t}\r\n\t\treturn open;\r\n\t},\r\n\tgetState: function(){\r\n\t\treturn {\r\n\t\t\topen: this.getOpenItems(),\r\n\t\t\tselect: this.getSelectedId(true)\r\n\t\t};\r\n\t},\r\n\t_repeat_set_state:function(tree, open){\r\n\t\tvar event = this.data.attachEvent(\"onStoreLoad\", function(){\r\n\t\t\ttree.setState.call(tree,open);\r\n\t\t\ttree.data.detachEvent(event);\r\n\t\t\ttree = null;\r\n\t\t});\r\n\t},\r\n\tsetState: function(state){\r\n\t\tif (state.open){\r\n\t\t\tthis.closeAll();\t\r\n\t\t\tvar open = state.open;\r\n\t\t\tfor (let i = 0; i < open.length; i++){\r\n\t\t\t\tvar item = this.getItem(open[i]);\r\n\t\t\t\tif (item && item.$count){\r\n\t\t\t\t\titem.open=true;\r\n\t\t\t\t\t//dynamic loading\r\n\t\t\t\t\tif (item.$count == -1){\r\n\t\t\t\t\t\t//call the same method after data loading\r\n\t\t\t\t\t\tthis._repeat_set_state(this, state);\r\n\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t//end processing\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\r\n\r\n\t\tif (state.select && this.select){\t\t\t\r\n\t\t\tvar select = state.select;\r\n\t\t\tthis.unselect();\r\n\t\t\tfor (let i = 0; i < select.length; i++)\r\n\t\t\t\tif (this.exists(select[i]))\r\n\t\t\t\t\tthis.select(select[i], true);\r\n\t\t}\r\n\r\n\t\treturn 1;\r\n\t}\r\n};\r\n\r\nexport default TreeAPI;","\r\n\r\nconst TreeClick = {\r\n\twebix_tree_open:function(e, id){\r\n\t\tthis.close(id);\r\n\t\treturn false;\r\n\t},\r\n\twebix_tree_close:function(e, id){\r\n\t\tthis.open(id);\r\n\t\treturn false;\r\n\t},\r\n\twebix_tree_checkbox:function(e,id){\r\n\t\tthis._tree_check_uncheck(id, null, e);\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport default TreeClick;","import {bind} from \"../webix/helpers\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport promise from \"../thirdparty/promiz\";\r\n\r\n\r\nconst TreeDataLoader = {\r\n\t$init:function(){\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(this._sync_hierarchy, this), null, true);\r\n\t\t//redefine methods\r\n\t\tthis._feed_common = this._feed_commonA;\r\n\t},\r\n\t_feed_commonA:function(id, count, callback, url){\r\n\t\t// branch loading\r\n\t\tvar details = (count === 0?{parent: encodeURIComponent(id)}:null);\r\n\r\n\t\treturn DataLoader.prototype._feed_common.call(this,id, count, callback, url, details);\r\n\t},\r\n\t//load next set of data rows\r\n\tloadBranch:function(id, callback, url){\r\n\t\tid = id ||0;\r\n\t\tthis.data.url = url || this.data.url;\r\n\t\tif (this.callEvent(\"onDataRequest\", [id,callback,this.data.url]) && this.data.url)\r\n\t\t\treturn this.data.feed.call(this, id, 0, callback, url);\r\n\t\treturn promise.reject();\r\n\t},\r\n\t_sync_hierarchy:function(id, data, mode){\r\n\t\tif (!mode || mode == \"add\" || mode == \"delete\" || mode == \"branch\"){\r\n\t\t\tthis.data._sync_to_order(this);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default TreeDataLoader;","import {isArray, copy as makeCopy, uid, _power_array} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport DataMove from \"../core/datamove\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\n\r\n/*\r\n\tBehavior:DataMove - allows to move and copy elements, heavily relays on DataStore.move\r\n\t@export\r\n\t\tcopy\r\n\t\tmove\r\n*/\r\nconst TreeDataMove ={\r\n\t$init:function(){\r\n\t\tassert(this.data, \"DataMove :: Component doesn't have DataStore\");\r\n\t},\r\n\t//creates a copy of the item\r\n\tcopy:function(sid,tindex,tobj,details){\r\n\t\tdetails = details || {};\r\n\t\tdetails.copy = true;\r\n\t\treturn this.move(sid, tindex, tobj, details);\r\n\t},\r\n\t_next_move_index:function(nid, next, source){\r\n\t\tif (next && nid){\r\n\t\t\tvar new_index = this.getBranchIndex(nid);\r\n\t\t\t// check parent only when moving locally (source == this)\r\n\t\t\treturn new_index + ((source == this && this.getParentId(nid) == this.getParentId(next)\r\n\t\t\t\t&& source.getBranchIndex(next) < new_index) ? 0 : 1);\r\n\t\t}\r\n\t},\r\n\t_check_branch_child:function(parent, child){\r\n\t\tvar t = this.data.branch[parent];\r\n\t\tif (t && t.length){\r\n\t\t\tfor (var i=0; i < t.length; i++) {\r\n\t\t\t\tif (t[i] == child) return true;\r\n\t\t\t\tif (this._check_branch_child(t[i], child)) return true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_remove_childs(ids){\r\n\t\tfor(var i = 0; i < ids.length; i++){\r\n\t\t\tvar id = ids[i];\r\n\t\t\twhile(this.getParentId(id)){\r\n\t\t\t\tid = this.getParentId(id);\r\n\t\t\t\tif(_power_array.find.call(ids, id) != -1){\r\n\t\t\t\t\tids.splice(i,1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ids;\r\n\t},\r\n\t//move item to the new position\r\n\tmove:function(sid,tindex,tobj, details){\r\n\t\tdetails = details || {};\r\n\t\ttindex = tindex || 0;\r\n\t\tvar new_id = details.newId || sid;\r\n\t\tvar target_parent = details.parent || 0;\r\n\t\t\r\n\t\ttobj = tobj||this;\r\n\t\tassert(tobj.data, \"moving attempt to component without datastore\");\r\n\t\tif (!tobj.data) return;\r\n\r\n\t\tif (isArray(sid)){\r\n\t\t\tthis._remove_childs(sid);\r\n\t\t\tfor (var i=0; i < sid.length; i++) {\r\n\t\t\t\t//increase index for each next item in the set, so order of insertion will be equal to order in the array\r\n\t\t\t\tvar nid = this.move(sid[i], tindex, tobj, details);\r\n\t\t\t\ttindex = tobj._next_move_index(nid, sid[i+1], this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (this != tobj || details.copy){\r\n\t\t\tnew_id = tobj.data.add(tobj._externalData(this.getItem(sid),new_id), tindex, (target_parent || 0));\r\n\t\t\tif (this.data.branch[sid] && tobj.getBranchIndex){\r\n\t\t\t\tvar temp = this.data._scheme_serialize;\r\n\t\t\t\tthis.data._scheme_serialize = function(obj){\r\n\t\t\t\t\tvar copy = makeCopy(obj);\r\n\t\t\t\t\tdelete copy.$parent; delete copy.$level; delete copy.$child;\r\n\t\t\t\t\tif (tobj.data.pull[copy.id])\r\n\t\t\t\t\t\tcopy.id = uid();\r\n\t\t\t\t\treturn copy;\r\n\t\t\t\t};\r\n\t\t\t\tvar copy_data = { data:this.serialize(sid, true), parent:new_id };\r\n\t\t\t\tthis.data._scheme_serialize = temp;\r\n\t\t\t\ttobj.parse(copy_data);\r\n\t\t\t}\r\n\t\t\tif (!details.copy)\r\n\t\t\t\tthis.data.remove(sid);\r\n\t\t} else {\r\n\t\t\t//move in self\r\n\t\t\tif (sid == target_parent || this._check_branch_child(sid,target_parent)) return;\r\n\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar tbranch = this.data.branch[target_parent];\r\n\t\t\tif (!tbranch) \r\n\t\t\t\ttbranch = this.data.branch[target_parent] = [];\r\n\t\t\tvar sbranch = this.data.branch[source.$parent];\r\n\r\n\t\t\tvar sindex = _power_array.find.call(sbranch, sid);\r\n\t\t\tif (tindex < 0) tindex = tbranch.length;\r\n\t\t\t//in the same branch and same position\r\n\t\t\tif (sbranch === tbranch && tindex === sindex) return new_id; //return ID\r\n\r\n\t\t\t_power_array.removeAt.call(sbranch, sindex);\r\n\t\t\t_power_array.insertAt.call(tbranch, sid, Math.min(tbranch.length, tindex));\r\n\r\n\t\t\tif (!sbranch.length)\r\n\t\t\t\tdelete this.data.branch[source.$parent];\r\n\t\t\t\r\n\r\n\t\t\tif(source.$parent && source.$parent != \"0\")\r\n\t\t\t\tthis.getItem(source.$parent).$count--;\r\n\r\n\t\t\tif (target_parent && target_parent != \"0\"){\r\n\t\t\t\tvar target = tobj.getItem(target_parent);\r\n\t\t\t\ttarget.$count++;\r\n\t\t\t\tthis._set_level_rec(source, target.$level+1);\r\n\t\t\t} else \r\n\t\t\t\tthis._set_level_rec(source, 1);\r\n\r\n\t\t\tsource.$parent = target_parent;\r\n\t\t\ttobj.data.callEvent(\"onDataMove\", [sid, tindex, target_parent, tbranch[tindex+1]]);\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\treturn new_id;\t//return ID of item after moving\r\n\t},\r\n\t_set_level_rec:function(item, value){\r\n\t\titem.$level = value;\r\n\t\tvar branch = this.data.branch[item.id];\r\n\t\tif (branch)\r\n\t\t\tfor (var i=0; i<branch.length; i++)\r\n\t\t\t\tthis._set_level_rec(this.getItem(branch[i]), value+1);\r\n\t},\r\n\t//reaction on pause during dnd\r\n\t_drag_pause:function(id){\r\n\t\tif (id && !id.header && this.exists(id) && this._target_to_id(id) != DragControl._drag_context.start) //ignore drag other header\r\n\t\t\tthis.open(id);\r\n\t},\r\n\t$dropAllow:function(context){\r\n\t\tif (context.from != context.to) return true;\r\n\t\tfor (let i=0; i<context.source.length; i++)\r\n\t\t\tif (this._check_branch_child(context.source, context.target)) return false;\r\n\r\n\t\treturn true;\r\n\t},\r\n\t/*\r\n\t\tthis is a stub for future functionality\r\n\t\tcurrently it just makes a copy of data object, which is enough for current situation\r\n\t*/\r\n\t_externalData:function(data,id){\r\n\t\tvar new_data = DataMove._externalData.call(this, data, id);\r\n\t\tdelete new_data.open;\r\n\t\treturn new_data;\r\n\t}\r\n};\r\n\r\nexport default TreeDataMove;","import {insertBefore, remove, create} from \"../webix/html\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\nconst TreeRenderStack ={\r\n\t$init:function(){\r\n\t\tassert(this.render,\"TreeRenderStack :: Object must use RenderStack first\");\r\n\t},\r\n\t_toHTMLItem:function(obj){\r\n\t\tvar mark = this.data._marks[obj.id];\r\n\t\tthis.callEvent(\"onItemRender\",[obj]);\r\n\t\treturn this.type.templateStart(obj,this.type,mark)+(obj.$template?this.type[\"template\"+obj.$template](obj,this.type,mark):this.type.template(obj,this.type,mark))+this.type.templateEnd();\r\n\t},\r\n\t_toHTMLItemObject:function(obj){\r\n\t\tthis._html.innerHTML = this._toHTMLItem(obj);\r\n\t\treturn this._html.firstChild;\r\n\t},\r\n\t//convert single item to HTML text (templating)\r\n\t_toHTML:function(obj){\r\n\t\t//check if related template exist\r\n\t\tassert((!obj.$template || this.type[\"template\"+obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\r\n\t\tvar html=\"<div role='presentation' class='webix_tree_branch_\"+obj.$level+\"'>\"+this._toHTMLItem(obj);\r\n\r\n\t\tif (obj.open)\r\n\t\t\thtml+=this._toHTMLLevel(obj.id);\r\n\r\n\t\thtml+=\"</div>\";\r\n\r\n\t\treturn html;\r\n\t},\r\n\t_toHTMLLevel:function(id){\r\n\t\tvar html = \"\";\r\n\t\tvar leaves = this.data.branch[id];\r\n\t\tif (leaves){\r\n\t\t\thtml+=\"<div role='presentation' class='webix_tree_leaves'>\";\r\n\t\t\tvar last = leaves.length-1;\r\n\t\t\tfor (var i=0; i <= last; i++){\r\n\t\t\t\tvar obj = this.getItem(leaves[i]);\r\n\t\t\t\tvar state = this.type._tree_branch_render_state;\r\n\t\t\t\tif (state !== 0) state[obj.$level] = (i == last);\r\n\t\t\t\thtml+=this._toHTML(obj);\r\n\t\t\t}\r\n\t\t\thtml+=\"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\t//return true when some actual rendering done\r\n\trender:function(id,data,type){\r\n\t\tTreeRenderStack._obj = this;\t//can be used from complex render\r\n\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\r\n\t\tif (id){\r\n\t\t\tvar cont, node;\r\n\t\t\tvar item = this.getItem(id);\r\n\t\t\tif (type!=\"add\"){\r\n\t\t\t\tcont = this.getItemNode(id);\r\n\t\t\t\tif (!cont) return;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"branch\":\r\n\t\t\t\t\tvar branch = cont.parentNode;\r\n\t\t\t\t\tnode = this._toHTMLObject(item);\r\n\t\t\t\t\t\r\n\t\t\t\t\tinsertBefore(node, branch); \r\n\t\t\t\t\tremove(branch);\r\n\t\t\t\t\tthis._htmlmap = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"paint\":\r\n\t\t\t\tcase \"update\":\r\n\t\t\t\t\tnode = this._htmlmap[id] = this._toHTMLItemObject(item);\r\n\t\t\t\t\tinsertBefore(node, cont); \r\n\t\t\t\t\tremove(cont);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t//deleting not item , but full branch\r\n\t\t\t\t\tremove(cont.parentNode);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"add\":\r\n\t\t\t\t\tvar parent;\r\n\t\t\t\t\t//we want process both empty value and 0 as string\r\n\t\t\t\t\t//jshint -W041:true\r\n\t\t\t\t\tif (item.$parent == 0){\r\n\t\t\t\t\t\tparent = this._dataobj.firstChild;\r\n\t\t\t\t\t} else if(this.getItem(item.$parent).open){\r\n\t\t\t\t\t\tparent  = this.getItemNode(item.$parent);\r\n\t\t\t\t\t\tif (parent){\r\n\t\t\t\t\t\t\t//when item created by the script, it will miss the container for child notes\r\n\t\t\t\t\t\t\t//create it on demand\r\n\t\t\t\t\t\t\tif (!parent.nextSibling){\r\n\t\t\t\t\t\t\t\tvar leafs = create(\"DIV\", { \"class\" : \"webix_tree_leaves\" },\"\");\r\n\t\t\t\t\t\t\t\tparent.parentNode.appendChild(leafs);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tparent = parent.nextSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (parent){\r\n\t\t\t\t\t\tvar next = this.data.getNextSiblingId(id);\r\n\t\t\t\t\t\tnext = this.getItemNode(next);\r\n\t\t\t\t\t\tif (next)\r\n\t\t\t\t\t\t\tnext = next.parentNode;\r\n\r\n\t\t\t\t\t\tnode = this._toHTMLObject(item);\r\n\t\t\t\t\t\tthis._htmlmap[id] = node.firstChild;\r\n\t\t\t\t\t\tinsertBefore(node, next, parent);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.callEvent(\"onPartialRender\", [id,data,type]);\r\n\t\t} else {\r\n\t\t\t//full reset\r\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\t\t//will be used for lines management\r\n\t\t\t\tthis.type._tree_branch_render_state = [];\r\n\t\t\t\t//getTopRange - returns all elements on top level\r\n\t\t\t\tthis._dataobj.innerHTML = this._toHTMLLevel(0);\r\n\t\t\t\t\t\r\n\t\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\r\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear after usage\r\n\t\tthis.type._tree_branch_render_state = 0;\r\n\t\tTreeRenderStack._obj = null;\r\n\t\treturn true;\r\n\t},\r\n\tgetItemNode:function(search_id){\r\n\t\tif (this._htmlmap)\r\n\t\t\treturn this._htmlmap[search_id];\r\n\t\t\t\r\n\t\t//fill map if it doesn't created yet\r\n\t\tthis._htmlmap={};\r\n\t\t\r\n\t\tvar t = this._dataobj.getElementsByTagName(\"DIV\");\r\n\t\tfor (var i=0; i < t.length; i++){\r\n\t\t\tvar id = t[i].getAttribute(this._id); //get item's\r\n\t\t\tif (id) \r\n\t\t\t\tthis._htmlmap[id]=t[i];\r\n\t\t}\r\n\t\t//call locator again, when map is filled\r\n\t\treturn this.getItemNode(search_id);\r\n\t},\r\n\t_branch_render_supported:1\r\n};\r\n\r\nexport default TreeRenderStack;","\r\n\r\nconst TreeStateCheckbox = {\r\n\t_init_render_tree_state: function(){\r\n\t\tif (this._branch_render_supported){\r\n\t\t\tvar old_render = this.render;\r\n\t\t\tthis.render = function(id,data){\r\n\t\t\t\tvar updated = old_render.apply(this,arguments);\r\n\r\n\t\t\t\tif(this._settings.threeState && updated && data != \"checkbox\")\r\n\t\t\t\t\tthis._setThirdState.apply(this,arguments);\r\n\t\t\t};\r\n\t\t\tthis._init_render_tree_state=function(){};\r\n\t\t}\r\n\t},\r\n\tthreeState_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tthis._init_render_tree_state();\r\n\t\treturn value;\r\n\t},\r\n\t_setThirdState:function(id){\r\n\t\tvar i,leaves,parents,checkedParents,tree;\r\n\t\tparents = [];\r\n\t\ttree = this;\r\n\r\n\t\t/*if item was removed*/\r\n\t\tif(id&&!tree.data.pull[id]){\r\n\t\t\tid = 0;\r\n\t\t}\r\n\t\t/*sets checkbox states*/\r\n\t\t/*if branch or full reloading*/\r\n\t\tif(!id||tree.data.pull[id].$count){\r\n\t\t\tleaves = this._getAllLeaves(id);\r\n\t\t\tleaves.sort(function(a,b){\r\n\t\t\t\treturn tree.data.pull[b].$level - tree.data.pull[a].$level;\r\n\t\t\t});\r\n\t\t\tfor(i=0;i < leaves.length;i++){\r\n\t\t\t\tif(!i||tree.data.pull[leaves[i]].$parent!=tree.data.pull[leaves[i-1]].$parent)\r\n\t\t\t\t\tparents = parents.concat(tree._setParentThirdState(leaves[i]));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\t/*an item is a leaf */\r\n\t\t\tparents = parents.concat(tree._setParentThirdState(id));\r\n\t\t}\r\n\r\n\t\tcheckedParents = {};\r\n\t\tfor(i=0;i<parents.length;i++){\r\n\t\t\tif(!checkedParents[parents[i]]){\r\n\t\t\t\tcheckedParents[parents[i]] = 1;\r\n\t\t\t\tthis._setCheckboxIndeterminate(parents[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttree = null;\r\n\t},\r\n\t_setCheckboxIndeterminate:function(id){\r\n\t\tvar chElem, elem;\r\n\t\telem = this.getItemNode(id);\r\n\t\tif(elem){\r\n\t\t\tthis.render(id,\"checkbox\",\"update\");\r\n\t\t\t/*needed to get the new input obj and to set indeterminate state*/\r\n\t\t\tif(this.getItem(id).indeterminate){\r\n\t\t\t\telem = this.getItemNode(id);\r\n\t\t\t\tchElem = elem.getElementsByTagName(\"input\")[0];\r\n\t\t\t\tif(chElem)\r\n\t\t\t\t\tchElem.indeterminate = this.getItem(id).indeterminate;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_setParentThirdState:function(itemId){\r\n\t\t//we need to use dynamic function creating\r\n\t\t//jshint -W083:true\r\n\r\n\t\tvar checked, checkedCount,indeterminate, parentId,result,unsureCount,needrender;\r\n\t\tparentId = this.getParentId(itemId);\r\n\t\tresult = [];\r\n\t\twhile(parentId && parentId != \"0\"){\r\n\t\t\tunsureCount = 0;\r\n\t\t\tcheckedCount = 0;\r\n\t\t\tthis.data.eachChild(parentId,function(obj){\r\n\t\t\t\tif(obj.indeterminate){\r\n\t\t\t\t\tunsureCount++;\r\n\t\t\t\t}\r\n\t\t\t\telse if(obj.checked){\r\n\t\t\t\t\tcheckedCount++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tchecked = indeterminate = needrender = false;\r\n\t\t\t\r\n\t\t\tvar item = this.getItem(parentId);\r\n\t\t\tif(checkedCount==item.$count){\r\n\t\t\t\tchecked = true;\r\n\t\t\t}\r\n\t\t\telse if(checkedCount>0||unsureCount>0){\r\n\t\t\t\tindeterminate = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//we need to reset indeterminate in any case :(\r\n\t\t\tif (indeterminate || indeterminate != item.indeterminate)\r\n\t\t\t\tneedrender = true;\r\n\t\t\titem.indeterminate = indeterminate;\r\n\t\t\tif (checked || item.checked != checked)\r\n\t\t\t\tneedrender = true;\r\n\t\t\titem.checked = checked;\r\n\r\n\t\t\tif (needrender){\r\n\t\t\t\tresult.push(parentId);\r\n\t\t\t\tparentId = this.getParentId(parentId);\r\n\t\t\t} else\r\n\t\t\t\tparentId = 0;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t},\r\n\t/*get all checked items in tree*/\r\n\tgetChecked:function(){\r\n\t\tvar result=[];\r\n\t\tvar tree = this;\r\n\t\tthis.data.eachSubItem(0,function(obj){\r\n\t\t\tif (tree.isChecked(obj.id))\r\n\t\t\t\tresult.push(obj.id);\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\t_tree_check_uncheck_3:function(id, mode){\r\n\t\tvar item = this.getItem(id);\r\n\t\tif(item){\r\n\t\t\tif (mode === \"\") \r\n\t\t\t\tmode = !item.checked;\r\n\t\t\tif(item.checked != mode || item.indeterminate){\r\n\t\t\t\titem.checked = mode;\r\n\t\t\t\tthis._correctThreeState(id);\r\n\t\t\t\tvar parents = this._setParentThirdState(id);\r\n\t\t\t\tif (this._branch_render_supported && parents.length < 5){\r\n\t\t\t\t\tfor (var i=0; i<parents.length; i++)\r\n\t\t\t\t\t\tthis._setCheckboxIndeterminate(parents[i]);\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.refresh();\r\n\t\t\t\tthis.callEvent(\"onItemCheck\", [id, mode]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/*set checked state for item checkbox*/\r\n\tcheckItem:function(id){\r\n\t\tthis._tree_check_uncheck(id, true);\r\n\t\tthis.updateItem(id);\r\n\t},\r\n\t/*uncheckes an item checkbox*/\r\n\tuncheckItem:function(id){\r\n\t\tthis._tree_check_uncheck(id, false);\r\n\t\tthis.updateItem(id);\r\n\t},\r\n\t_checkUncheckAll: function(id,mode,all){\r\n\t\tvar method = mode?\"checkItem\":\"uncheckItem\";\r\n\t\tif(!id)\r\n\t\t\tid = 0;\r\n\t\telse\r\n\t\t\tthis[method](id);\r\n\t\tif(this._settings.threeState){\r\n\t\t\tif(!id)\r\n\t\t\t\tthis.data.eachChild(0,function(item){\r\n\t\t\t\t\tthis[method](item.id);\r\n\t\t\t\t},this,all);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.data.each(function(item){\r\n\t\t\t\tthis[method](item.id);\r\n\t\t\t},this,all,id);\r\n\r\n\t},\r\n\t/*checkes checkboxes of all items in a branch/tree*/\r\n\tcheckAll: function(id, all){\r\n\t\tthis._checkUncheckAll(id,true,all);\r\n\r\n\t},\r\n\t/*uncheckes checkboxes of all items in a branch/tree*/\r\n\tuncheckAll: function(id, all){\r\n\t\tthis._checkUncheckAll(id,false,all);\r\n\t},\r\n\t_correctThreeState:function(id){\r\n\t\tvar state;\r\n\t\tvar item = this.getItem(id);\r\n\r\n\t\titem.indeterminate = false;\r\n\t\tstate = item.checked;\r\n\r\n\t\tthis.data.eachSubItem(id, function(child){\r\n\t\t\tchild.indeterminate = false;\r\n\t\t\tchild.checked = state;\r\n\t\t});\r\n\t\t\r\n\t\tif(this._branch_render_supported && this.isBranchOpen(item.$parent)){ //for tree-render only\r\n\t\t\tthis.render(id,0,\"branch\");\r\n\t\t}\r\n\t},\r\n\t/*returns checked state of item checkbox*/\r\n\tisChecked:function(id){\r\n\t\treturn this.getItem(id).checked;\r\n\t},\r\n\t/*gets all leaves in a certain branch (in the whole tree if id is not set)*/\r\n\t_getAllLeaves:function(parentId){\r\n\t\tvar result = [];\r\n\t\tthis.data.eachSubItem(parentId, function(obj, branch){\r\n\t\t\tif (!branch)\r\n\t\t\t\tresult.push(obj.id);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\t\r\n};\r\n\r\nexport default TreeStateCheckbox;","import {bind, extend, _to_array, copy, clone, isArray, uid, _power_array} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport DataStore from \"../core/datastore\";\r\nimport DataDriver from \"../load/drivers/index\";\r\n\r\n\r\n// #include core/datastore.js\r\n// #include core/bind.js\r\n// #include core/treemove.js\r\n\r\nconst TreeStore = {\r\n\tname:\"TreeStore\",\r\n\t$init:function() {\r\n\t\tthis._filterMode={\r\n\t\t\t//level:1,\r\n\t\t\tshowSubItems:true\r\n\t\t};\r\n\t\tthis.branch = { 0:[] };\r\n\t\tthis.attachEvent(\"onParse\", function(driver){\r\n\t\t\tthis._set_child_scheme(driver.child);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onClearAll\", bind(function(){\r\n\t\t\tthis._filter_branch = null;\r\n\t\t},this));\r\n\t},\r\n\tfilterMode_setter:function(mode){\r\n\t\treturn extend(this._filterMode, mode, true);\r\n\t},\r\n\t_filter_reset:function(preserve){\r\n\t\t//remove previous filtering , if any\r\n\t\tif (this._filter_branch && !preserve){\r\n\t\t\tthis.branch = this._filter_branch;\r\n\t\t\tthis.order = _to_array(copy(this.branch[0]));\r\n\t\t\tfor (var key in this.branch)\r\n\t\t\t\tif (key != \"0\")\t//exclude 0 - virtual root\r\n\t\t\t\t\tthis.getItem(key).$count = this.branch[key].length;\r\n\t\t\tdelete this._filter_branch;\r\n\t\t}\r\n\t},\r\n\t_filter_core:function(filter, value, preserve, filterMode){\r\n\t\t//for tree we have few filtering options\r\n\t\t//- filter leafs only\r\n\t\t//- filter data on specific level\r\n\t\t//- filter data on all levels\r\n\t\t//- in all cases we can show or hide empty folder\r\n\t\t//- in all cases we can show or hide childs for matched item\r\n\t\t\r\n\t\t//set new order of items, store original\r\n\t\tif (!preserve ||  !this._filter_branch){\r\n\t\t\tthis._filter_branch = this.branch;\r\n\t\t\tthis.branch  = clone(this.branch);\r\n\t\t}\r\n\r\n\t\tthis.branch[0] = this._filter_branch_rec(filter, value, this.branch[0], 1, (filterMode||{}));\r\n\t},\r\n\t_filter_branch_rec:function(filter, value, branch, level, config){\r\n\t\t//jshint -W041\r\n\t\tvar neworder = [];\r\n\t\t\r\n\t\tvar allow = (config.level && config.level != level);\r\n\r\n\t\tfor (var i=0; i < branch.length; i++){\r\n\t\t\tvar id = branch[i];\r\n\t\t\tvar item = this.getItem(id);\r\n\t\t\tvar child_run = false;\r\n\t\t\tvar sub = this.branch[id];\r\n\r\n\t\t\tif (allow){\r\n\t\t\t\tchild_run = true;\r\n\t\t\t} else if (filter(this.getItem(id),value)){\r\n\t\t\t\tneworder.push(id);\r\n\t\t\t\t// open all parents of the found item\r\n\t\t\t\tif (config.openParents !== false){\r\n\t\t\t\t\tvar parentId = this.getParentId(id);\r\n\t\t\t\t\twhile(parentId && parentId != \"0\"){\r\n\t\t\t\t\t\tthis.getItem(parentId).open = 1;\r\n\t\t\t\t\t\tparentId = this.getParentId(parentId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//in case of of fixed level filtering - do not change child-items\r\n\t\t\t\tif (config.level || config.showSubItems)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t//filtering level, not match\r\n\t\t\t\tchild_run = true;\r\n\t\t\t}\t\r\n\r\n\t\t\t//if \"filter by all levels\" - filter childs\r\n\t\t\tif (allow || !config.level){ \r\n\t\t\t\tif (sub){\r\n\t\t\t\t\tvar newsub = this.branch[id] = this._filter_branch_rec(filter, value, sub, level+1, config);\r\n\t\t\t\t\titem.$count = newsub.length;\r\n\t\t\t\t\tif (child_run && newsub.length)\r\n\t\t\t\t\t\tneworder.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn neworder;\r\n\t},\r\n\tcount:function(){\r\n\t\tif (this.order.length)\r\n\t\t\treturn this.order.length;\r\n\r\n\t\t//we must return some non-zero value, or logic of selection will think that we have not data at all\r\n\t\tvar count=0;\r\n\t\tthis.eachOpen(function(){ count++; });\r\n\t\treturn count;\r\n\t},\r\n\t_change_branch_id:function(branches, parent, old, newid){\r\n\t\tif (branches[old]){\r\n\t\t\tvar branch = branches[newid] = branches[old];\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tthis.getItem(branch[i]).$parent = newid;\r\n\t\t\tdelete branches[old];\r\n\t\t}\r\n\t\tif (branches[parent]){\r\n\t\t\tvar index = _power_array.find.call(branches[parent], old);\r\n\t\t\tif (index >= 0)\r\n\t\t\t\tbranches[parent][index] = newid;\r\n\t\t}\r\n\t},\r\n\tchangeId:function(old, newid){\r\n\t\tif(old == newid) return;\r\n\t\t\r\n\t\tvar parent = this.getItem(old).$parent;\r\n\t\tthis._change_branch_id(this.branch, parent, old, newid);\r\n\r\n\t\t//in case of filter applied, update id in filtered state as well\r\n\t\tif (this._filter_branch)\r\n\t\t\tthis._change_branch_id(this._filter_branch, parent, old, newid);\r\n\r\n\t\treturn DataStore.prototype.changeId.call(this, old, newid);\r\n\t},\r\n\tclearAll:function(soft){\r\n\t\tthis.branch = { 0:[] };\r\n\t\tDataStore.prototype.clearAll.call(this, soft);\t\r\n\t},\r\n\tgetPrevSiblingId:function(id){\r\n\t\tvar order = this.branch[this.getItem(id).$parent];\r\n\t\tvar pos = _power_array.find.call(order, id)-1;\r\n\t\tif (pos>=0)\r\n\t\t\treturn order[pos];\r\n\t\treturn null;\r\n\t},\r\n\tgetNextSiblingId:function(id){\r\n\t\tvar order = this.branch[this.getItem(id).$parent];\r\n\t\tvar pos = _power_array.find.call(order, id)+1;\r\n\t\tif (pos<order.length)\r\n\t\t\treturn order[pos];\r\n\t\treturn null;\r\n\t},\r\n\tgetParentId:function(id){\r\n\t\treturn this.getItem(id).$parent;\r\n\t},\r\n\tgetFirstChildId:function(id){\r\n\t\tvar order = this.branch[id];\r\n\t\tif (order && order.length)\r\n\t\t\treturn order[0];\r\n\t\treturn null;\r\n\t},\r\n\tisBranch:function(parent){\r\n\t\treturn !!this.branch[parent];\r\n\t},\r\n\tgetBranchIndex:function(child){\r\n\t\tvar t = this.branch[this.pull[child].$parent];\r\n\t\treturn _power_array.find.call(t, child);\r\n\t},\r\n\t_set_child_scheme:function(parse_name){\r\n\r\n\t\tif (typeof parse_name == \"string\")\r\n\t\t\tthis._datadriver_child = function(obj){\r\n\t\t\t\tvar t = obj[parse_name];\r\n\t\t\t\tif (t)\r\n\t\t\t\t\tdelete obj[parse_name];\r\n\t\t\t\treturn t;\r\n\t\t\t};\r\n\t\telse \r\n\t\t\tthis._datadriver_child = parse_name;\r\n\t},\r\n\t_inner_parse:function(info, recs){ \r\n\t\tvar parent  = info.parent || 0;\r\n\t\t\r\n\t\tfor (var i=0; i<recs.length; i++){\r\n\t\t\t//get hash of details for each record\r\n\t\t\tvar temp = this.driver.getDetails(recs[i]);\r\n\t\t\tvar id = this.id(temp); \t//generate ID for the record\r\n\t\t\tvar update = !!this.pull[id]; //update mode\r\n\r\n\t\t\tif (update){\r\n\t\t\t\ttemp = extend(this.pull[id], temp, true);\r\n\t\t\t\tif (this._scheme_update)\r\n\t\t\t\t\tthis._scheme_update(temp);\r\n\t\t\t} else {\r\n\t\t\t\tif (this._scheme_init)\r\n\t\t\t\t\tthis._scheme_init(temp);\r\n\t\t\t\tthis.pull[id]=temp;\r\n\t\t\t}\r\n\r\n\t\t\tthis._extraParser(temp, parent, 0, update, info.from ? info.from*1+i : 0);\r\n\t\t}\r\n\r\n\t\t//fix state of top item after data loading\r\n\t\tvar pItem = this.pull[parent] || {};\r\n\t\tvar pBranch = this.branch[parent] || [];\r\n\t\tpItem.$count = pBranch.length;\r\n\t\tdelete pItem.webix_kids;\r\n\r\n\t\tif (info.size && info.size != pBranch.length)\r\n\t\t\tpBranch[info.size-1] = undefined;\r\n\t},\r\n\t_extraParser:function(obj, parent, level, update, from){\r\n\t\t//processing top item\r\n\t\tobj.$count = 0;\r\n\t\t//using soft check, as parent can be a both 0 and \"0\" ( second one in case of loading from server side ) \r\n\t\tobj.$parent = parent!=\"0\"?parent:0;\r\n\t\tobj.$level = level||(parent!=\"0\"?this.pull[parent].$level+1:1);\r\n\t\t\r\n\t\tvar parent_branch = this.branch[obj.$parent];\r\n\t\tif (!parent_branch)\r\n\t\t\tparent_branch = this.branch[obj.$parent] = [];\r\n\t\tif (this._filter_branch)\r\n\t\t\tthis._filter_branch[obj.$parent] = parent_branch;\r\n\r\n\t\tif (!update){\r\n\t\t\tvar pos = from || parent_branch.length;\r\n\t\t\tparent_branch[pos] = obj.id;\r\n\t\t}\r\n\r\n\t\tvar child = this._datadriver_child(obj);\r\n\r\n\t\tif (obj.webix_kids){\r\n\t\t\treturn (obj.$count = -1);\r\n\t\t}\r\n\r\n\t\tif (!child) //ignore childless\r\n\t\t\treturn (obj.$count = 0);\t\r\n\r\n\t\t//when loading from xml we can have a single item instead of an array\r\n\t\tif (!isArray(child))\r\n\t\t\tchild = [child];\r\n\t\t\r\n\r\n\t\tfor (var i=0; i < child.length; i++) {\r\n\t\t\t//extra processing to convert strings to objects\r\n\t\t\tvar item = DataDriver.json.getDetails(child[i]);\r\n\t\t\tvar itemid = this.id(item);\r\n\t\t\tupdate = !!this.pull[itemid];\r\n\t\t\t\r\n\t\t\tif (update){\r\n\t\t\t\titem = extend(this.pull[itemid], item, true);\r\n\t\t\t\tif (this._scheme_update)\r\n\t\t\t\t\tthis._scheme_update(item);\r\n\t\t\t} else {\r\n\t\t\t\tif (this._scheme_init)\r\n\t\t\t\t\tthis._scheme_init(item);\r\n\t\t\t\tthis.pull[itemid]=item;\r\n\t\t\t}\r\n\t\t\tthis._extraParser(item, obj.id, obj.$level+1, update);\r\n\t\t}\r\n\r\n\t\t//processing childrens\r\n\t\tvar branch = this.branch[obj.id];\r\n\t\tif (branch)\r\n\t\t\tobj.$count = branch.length;\r\n\t}, \r\n\t_sync_to_order:function(master){\r\n\t\tthis.order = _to_array();\r\n\r\n\t\t// send current order to prevent simultaneous use in synс mode\r\n\t\tthis._sync_each_child(this.order, 0, master);\r\n\t},\r\n\t_sync_each_child:function(order, start, master){\r\n\t\tvar branch = this.branch[start];\r\n\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\tvar id = branch[i];\r\n\t\t\torder.push(id);\r\n\t\t\tvar item = this.pull[id];\r\n\t\t\tif (item && item.open){\r\n\t\t\t\tif (item.$count == -1)\r\n\t\t\t\t\tmaster.loadBranch(id);\r\n\t\t\t\telse if (item.$count)\r\n\t\t\t\t\tthis._sync_each_child(order, id, master);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tprovideApi:function(target,eventable){\r\n\t\tvar list = [\"getPrevSiblingId\",\"getNextSiblingId\",\"getParentId\",\"getFirstChildId\",\"isBranch\",\"getBranchIndex\",\"filterMode_setter\"];\r\n\t\tfor (var i=0; i < list.length; i++)\r\n\t\t\ttarget[list[i]]=this._methodPush(this,list[i]);\r\n\r\n\t\tif (!target.getIndexById)\r\n\t\t\tDataStore.prototype.provideApi.call(this, target, eventable);\r\n\t},\r\n\tgetTopRange:function(){\r\n\t\treturn _to_array([].concat(this.branch[0])).map(function(id){\r\n\t\t\treturn this.getItem(id);\r\n\t\t}, this);\r\n\t},\r\n\teachChild:function(id, functor, master, all){\r\n\t\tvar branch = this.branch;\r\n\t\tif (all && this._filter_branch)\r\n\t\t\tbranch = this._filter_branch;\r\n\r\n\t\tvar stack = branch[id];\r\n\t\tif (stack)\r\n\t\t\tfor (var i=0; i<stack.length; i++){\r\n\t\t\t\tif(stack[i])\r\n\t\t\t\t\tfunctor.call((master||this), this.getItem(stack[i]));\r\n\t\t\t}\r\n\t},\r\n\teach:function(method,master, all, id){\r\n\t\tthis.eachChild((id||0), function(item){\r\n\t\t\tvar branch = this.branch;\r\n\r\n\t\t\tmethod.call((master||this), item);\r\n\r\n\t\t\tif (all && this._filter_branch)\r\n\t\t\t\tbranch = this._filter_branch;\r\n\r\n\t\t\tif (item && branch[item.id])\r\n\t\t\t\tthis.each(method, master, all, item.id);\r\n\t\t}, this, all);\r\n\t},\t\r\n\teachOpen:function(method,master, id){\r\n\t\tthis.eachChild((id||0), function(item){\r\n\t\t\tmethod.call((master||this), item);\r\n\t\t\tif (this.branch[item.id] && item.open)\r\n\t\t\t\tthis.eachOpen(method, master, item.id);\r\n\t\t});\r\n\t},\r\n\teachSubItem:function(id, functor){\r\n\t\tvar top = this.branch[id||0];\r\n\t\tif (top)\r\n\t\t\tfor (var i=0; i<top.length; i++){\r\n\t\t\t\tvar key = top[i];\r\n\t\t\t\tif (this.branch[key]){\r\n\t\t\t\t\tfunctor.call(this, this.getItem(key),true);\r\n\t\t\t\t\tthis.eachSubItem(key, functor);\r\n\t\t\t\t} else\r\n\t\t\t\t\tfunctor.call(this, this.getItem(key), false);\r\n\t\t\t}\r\n\t},\r\n\teachLeaf:function(id, functor){\r\n\t\tvar top = this.branch[id||0];\r\n\t\tif (top)\r\n\t\t\tfor (var i=0; i<top.length; i++){\r\n\t\t\t\tvar key = top[i];\r\n\t\t\t\tif (this.branch[key]){\r\n\t\t\t\t\tthis.eachLeaf(key, functor);\r\n\t\t\t\t} else\r\n\t\t\t\t\tfunctor.call(this, this.getItem(key), false);\r\n\t\t\t}\r\n\t},\r\n\t_sort_core:function(sorter, order){\r\n\t\tfor (var key in this.branch){\r\n\t\t\tvar bset =  this.branch[key];\r\n\t\t\tvar data = [];\r\n\r\n\t\t\tfor (let i=0; i<bset.length; i++)\r\n\t\t\t\tdata.push(this.pull[bset[i]]);\r\n\r\n\t\t\tdata.sort(sorter);\r\n\r\n\t\t\tfor (let i=0; i<bset.length; i++)\r\n\t\t\t\tdata[i] = data[i].id;\r\n\r\n\t\t\tthis.branch[key] = data;\r\n\t\t}\r\n\t\treturn order;\r\n\t},\r\n\tadd:function(obj, index, pid){\r\n\t\tvar refresh_parent = false;\r\n\r\n\t\tvar parent = this.getItem(pid||0);\r\n\t\tif(parent){\r\n\t\t\t//when adding items to leaf item - it need to be repainted\r\n\t\t\tif (!this.branch[parent.id])\r\n\t\t\t\trefresh_parent = true;\r\n\r\n\t\t\tparent.$count++;\r\n\t\t\t//fix for the adding into dynamic loading branch\r\n\t\t\t//dynamic branch has $count as -1\r\n\t\t\tif (!parent.$count) parent.$count = 1;\r\n\t\t}\r\n\r\n\t\tthis.branch[pid||0] = this.order = _to_array(this.branch[pid||0]);\r\n\r\n\t\tobj.$count = obj.webix_kids ? -1 : 0; \r\n\t\tobj.$level= (parent?parent.$level+1:1); \r\n\t\tobj.$parent = (parent?parent.id:0);\r\n\r\n\t\tif (this._filter_branch){\t//adding during filtering\r\n\t\t\tvar origin = this._filter_branch[pid||0];\r\n\t\t\t//newly created branch\r\n\t\t\tif (!origin) origin = this._filter_branch[pid] = this.order;\r\n\r\n\t\t\t//branch can be shared bettwen collections, ignore such cases\r\n\t\t\tif (this.order !== origin){\r\n\t\t\t\t//we can't know the location of new item in full dataset, making suggestion\r\n\t\t\t\t//put at end by default\r\n\t\t\t\tvar original_index = origin.length;\r\n\t\t\t\t//put at start only if adding to the start and some data exists\r\n\t\t\t\tif (!index && this.branch[pid||0].length)\r\n\t\t\t\t\toriginal_index = 0;\r\n\r\n\t\t\t\torigin = _to_array(origin);\r\n\t\t\t\tobj.id = obj.id || uid();\r\n\t\t\t\torigin.insertAt(obj.id,original_index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//call original adding logic\r\n\t\tvar result = DataStore.prototype.add.call(this, obj, index);\r\n\r\n\r\n\t\tif (refresh_parent)\r\n\t\t\tthis.refresh(pid);\r\n\r\n\t\treturn result;\r\n\t},\r\n\t_rec_remove:function(id){\r\n\t\tvar obj = this.pull[id];\r\n\t\tif(this.branch[obj.id] && this.branch[obj.id].length > 0){\r\n\t\t\tvar branch = this.branch[id];\r\n\t\t\tfor(var i=0;i<branch.length;i++)\r\n\t\t\t\tthis._rec_remove(branch[i], true);\r\n\t\t}\r\n\t\tdelete this.branch[id];\r\n\t\tif(this._filter_branch)\r\n\t\t\tdelete this._filter_branch[id];\r\n\t\tdelete this.pull[id];\r\n\t\tif (this._marks[id])\r\n\t\t\tdelete this._marks[id];\r\n\t},\r\n\t_filter_removed:function(pull, parentId, id){\r\n\t\tvar branch = pull[parentId];\r\n\t\tif (branch.length == 1 && branch[0] == id && parentId){\r\n\t\t\tdelete pull[parentId];\r\n\t\t} else\r\n\t\t\t_to_array(branch).remove(id);\r\n\t},\r\n\tremove:function(id){\r\n\t\t//id can be an array of IDs - result of getSelect, for example\r\n\t\tif (isArray(id)){\r\n\t\t\tfor (var i=0; i < id.length; i++)\r\n\t\t\t\tthis.remove(id[i]);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tassert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\t\tvar obj = this.pull[id];\r\n\t\tvar parentId = (obj.$parent||0);\r\n\r\n\t\tif (this.callEvent(\"onBeforeDelete\",[id]) === false) return false;\r\n\t\tthis._rec_remove(id);\r\n\t\tthis.callEvent(\"onAfterDelete\",[id]);\r\n\r\n\t\tvar parent = this.pull[parentId];\r\n\t\tthis._filter_removed(this.branch, parentId, id);\r\n\t\tif (this._filter_branch)\r\n\t\t\tthis._filter_removed(this._filter_branch, parentId, id);\r\n\r\n\t\tvar refresh_parent = 0;\r\n\t\tif (parent){\r\n\t\t\tparent.$count--;\r\n\t\t\tif (parent.$count<=0){\r\n\t\t\t\tparent.$count=0;\r\n\t\t\t\tparent.open = 0;\r\n\t\t\t\trefresh_parent = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//repaint signal\r\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"delete\"]);\r\n\t\tif (refresh_parent)\r\n\t\t\tthis.refresh(parent.id);\r\n\t},\r\n\t/*\r\n\t\tserializes data to a json object\r\n\t*/\r\n\tgetBranch:function(id){\r\n\t\tvar out = [];\r\n\t\tvar items = (this._filter_branch || this.branch)[id];\r\n\t\tif (items)\r\n\t\t\tfor (var i = 0; i < items.length; i++) out[i] = this.pull[items[i]];\r\n\r\n\t\treturn out;\r\n\t},\r\n\tserialize: function(id, all){\r\n\t\tvar coll = this.branch;\r\n\t\t//use original collection of branches\r\n\t\tif (all && this._filter_branch) coll = this._filter_branch;\r\n\r\n\t\tvar ids = coll[id||0];\r\n\t\tvar result = [];\r\n\t\tfor(var i=0; i< ids.length;i++) {\r\n\t\t\tvar obj = this.pull[ids[i]];\r\n\t\t\tvar rel;\r\n\r\n\t\t\tif (this._scheme_serialize){\r\n\t\t\t\trel = this._scheme_serialize(obj);\r\n\t\t\t\tif (rel===false) continue;\r\n\t\t\t} else \r\n\t\t\t\trel = copy(obj);\r\n\t\t\t\t\r\n\t\t\tif (coll[obj.id])\r\n\t\t\t\trel.data = this.serialize(obj.id, all);\r\n\r\n\t\t\tresult.push(rel);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};\r\n\r\nexport default TreeStore;","import {isUndefined, uid} from \"../webix/helpers\";\r\n\r\n\r\nconst TreeTablePaste = {\r\n\tinsert: function(data) {\r\n\t\tvar parent = this.getSelectedId(true, true);\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tvar item = {};\r\n\t\t\tfor (var j = 0; j < this._settings.columns.length; j++) {\r\n\t\t\t\titem[this._settings.columns[j].id] = data[i][j] || \"\";\r\n\t\t\t}\r\n\t\t\tif (!isUndefined(item.id) && this.exists(item.id))\r\n\t\t\t\titem.id = uid();\r\n\t\t\tthis.add(item, null, parent[0]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default TreeTablePaste;","\r\n\r\nconst TreeType ={\r\n\tspace:function(obj){\r\n\t\tvar html = \"\";\r\n\t\tfor (var i=1; i<obj.$level; i++)\r\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\r\n\t\treturn html;\r\n\t},\r\n\ticon:function(obj){\r\n\t\tif (obj.$count){\r\n\t\t\tif (obj.open)\r\n\t\t\t\treturn \"<div class='webix_tree_open'></div>\";\r\n\t\t\telse\r\n\t\t\t\treturn \"<div class='webix_tree_close'></div>\";\r\n\t\t} else\r\n\t\t\treturn \"<div class='webix_tree_none'></div>\";\r\n\t},\r\n\tcheckbox:function(obj){\r\n\t\tif(obj.nocheckbox)\r\n\t\t\treturn \"\";\r\n\t\treturn \"<input type='checkbox' class='webix_tree_checkbox' \"+(obj.checked?\"checked\":\"\")+(obj.disabled?\" disabled\":\"\")+\">\";\r\n\t},\t\r\n\tfolder:function(obj){\r\n\t\tif (obj.icon)\r\n\t\t\treturn \"<div class='webix_tree_file webix_tree_\"+obj.icon+\"'></div>\";\r\n\r\n\t\tif (obj.$count){\r\n\t\t\tif (obj.open)\r\n\t\t\t\treturn \"<div class='webix_tree_folder_open'></div>\";\r\n\t\t\telse\r\n\t\t\t\treturn \"<div class='webix_tree_folder'></div>\";\r\n\t\t}\r\n\t\treturn \"<div class='webix_tree_file'></div>\";\r\n\t}\r\n};\r\n\r\nexport default TreeType;","import {create, preventEvent} from \"../webix/html\";\r\nimport {bind, extend} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nimport env from \"../webix/env\";\r\nimport DataDriver from \"../load/drivers/index\";\r\n\r\n\r\nconst UploadDriver = {\r\n\t$render: function() {\r\n\t\tif (this._upload_area){\r\n\t\t\t//firstChild is webix_el_box container, which have relative position\r\n\t\t\t//as result, file control is placed under the button and not in the top corner\r\n\t\t\tthis._contentobj.firstChild.appendChild(this._upload_area);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.files.attachEvent(\"onBeforeDelete\", this._stop_file);\r\n\r\n\t\tvar input_config =  {\r\n\t\t\t\"type\": \"file\",\r\n\t\t\t\"class\": \"webix_hidden_upload\",\r\n\t\t\ttabindex:-1\r\n\t\t};\r\n\r\n\t\tif (this._settings.accept)\r\n\t\t\tinput_config.accept = this._settings.accept;\r\n\r\n\t\tif (this._settings.multiple)\r\n\t\t\tinput_config.multiple = \"true\";\r\n\r\n\t\tif (this._settings.directory) {\r\n\t\t\tinput_config.webkitdirectory = \"true\";\r\n\t\t\tinput_config.mozdirectory = \"true\";\r\n\t\t\tinput_config.directory = \"true\";\r\n\t\t}\r\n\r\n\t\tvar f = create(\"input\", input_config);\r\n\t\tthis._upload_area = this._contentobj.firstChild.appendChild(f);\r\n\r\n\t\t_event(this._viewobj, \"drop\", bind(function(e) {\r\n\t\t\tthis.$drop(e);\r\n\t\t\tpreventEvent(e);\r\n\t\t}, this));\r\n\t\t_event(f, \"change\", bind(function() {\r\n\t\t\tthis._add_files(f.files);\r\n\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\tvar t = document.createElement(\"form\");\r\n\t\t\t\tt.appendChild(this._upload_area);\r\n\t\t\t\tt.reset();\r\n\t\t\t\tthis._contentobj.firstChild.appendChild(f);\r\n\t\t\t} else\r\n\t\t\t\tf.value = \"\";\r\n\t\t}, this));\r\n\t\t_event(this._viewobj, \"click\", bind(function() {\r\n\t\t\tvar now_date = new Date();\r\n\t\t\tif (now_date - (this._upload_timer_click || 0) > 250) {\r\n\t\t\t\tthis.fileDialog();\r\n\t\t\t}\r\n\t\t}, this));\r\n\r\n\t\t_event(this._viewobj, \"dragenter\", preventEvent);\r\n\t\t_event(this._viewobj, \"dragexit\", preventEvent);\r\n\t\t_event(this._viewobj, \"dragover\", preventEvent);\r\n\t},\r\n\t_directoryEntry: function(value) {\r\n\t\treturn value.isDirectory;\r\n\t},\r\n\t_directoryDrop: function(item, state, path) {\r\n\t\tif (item.isFile){\r\n\t\t\titem.file(function(file){\r\n\t\t\t\tstate.addFile(file, null, null, { name : path+\"/\"+file.name });\r\n\t\t\t});\r\n\t\t} else if (item.isDirectory) {\r\n\t\t\t// Get folder contents\r\n\t\t\tvar dirReader = item.createReader();\r\n\t\t\tdirReader.readEntries(function(entries){\r\n\t\t\t\tfor (var i = 0; i < entries.length; i++){\r\n\t\t\t\t\tstate._directoryDrop(entries[i], state, (path ? (path + \"/\") : \"\") + item.name);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t// adding files by drag-n-drop\r\n\t$drop: function(e) {\r\n\t\tvar files = e.dataTransfer.files;\r\n\t\tvar items = e.dataTransfer.items;\r\n\r\n\t\t// non-file drop\r\n\t\tif (!files.length) return;\r\n\r\n\t\tif (this.callEvent(\"onBeforeFileDrop\", [files, e])) {\r\n\t\t\titems = items || files; //IE10+\r\n\t\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\t\t//https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif (item.webkitGetAsEntry){\r\n\t\t\t\t\titem = item.webkitGetAsEntry();\r\n\t\t\t\t\tif (item.isDirectory){\r\n\t\t\t\t\t\tthis._directoryDrop(item, this, \"\");\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.addFile(files[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterFileDrop\", [files, e]);\r\n\t},\r\n\tfileDialog:function(context){\r\n\t\tthis._upload_timer_click = new Date();\r\n\t\tthis._last_file_context = context;\r\n\t\tvar inputs = this._viewobj.getElementsByTagName(\"INPUT\");\r\n\t\tinputs[inputs.length-1].click();\r\n\t},\r\n\tsend: function(id){\r\n\t\t//alternative syntx send(callback)\r\n\t\tif (typeof id == \"function\"){\r\n\t\t\tthis._last_assigned_upload_callback = id;\r\n\t\t\tid = 0;\r\n\t\t}\r\n\r\n\t\tif (!id){\r\n\t\t\tvar order = this.files.data.order;\r\n\t\t\tvar complete = true;\r\n\r\n\t\t\tif (order.length)\r\n\t\t\t\tfor (var i=0; i<order.length; i++)\r\n\t\t\t\t\tcomplete = (!this.send(order[i])) && complete;\r\n\r\n\t\t\tif (complete)\r\n\t\t\t\tthis._upload_complete();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar item = this.files.getItem(id);\r\n\t\tif (item.status !== \"client\") return false;\r\n\r\n\t\tassert(this._settings.upload, \"You need to define upload url for uploader component\");\r\n\t\titem.status = \"transfer\";\r\n\r\n\t\tvar formData = new FormData();\r\n\r\n\t\tformData.append(this.config.inputName, item.file, item.name);\r\n\t\tformData.append(this.config.inputName+\"_fullpath\", item.name);\r\n\r\n\t\tvar headers = {};\r\n\t\tvar globalData = this._settings.formData || {};\r\n\t\tif (typeof globalData === \"function\")\r\n\t\t\tglobalData = globalData.call(this);\r\n\t\tvar details = extend(item.formData||{} , globalData);\r\n\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\tvar url = this._get_active_url(item);\r\n\t\tif(callEvent(\"onBeforeAjax\",[\"POST\", url, details, xhr, headers, formData])){\r\n\t\t\tfor (let key in details)\r\n\t\t\t\tformData.append(key, details[key]);\r\n\r\n\t\t\titem.xhr = xhr;\r\n\r\n\t\t\txhr.upload.addEventListener(\"progress\", bind(function(e){ this.$updateProgress(id, e.loaded/e.total*100); }, this), false);\r\n\t\t\txhr.onload = bind(function(){ if (!xhr.aborted) this._file_complete(id); }, this);\r\n\t\t\txhr.open(\"POST\", url, true);\r\n\r\n\t\t\tfor (let key in headers)\r\n\t\t\t\txhr.setRequestHeader(key, headers[key]);\r\n\r\n\t\t\txhr.send(formData);\r\n\t\t}\r\n\r\n\t\tthis.$updateProgress(id, 0);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t\r\n\t_file_complete: function(id) {\r\n\t\tvar item = this.files.getItem(id);\r\n\t\tif (item){\r\n\t\t\tvar response = null;\r\n\t\t\tif(item.xhr.status < 400){\r\n\t\t\t\tvar driver = DataDriver[this._settings.datatype||\"json\"];\r\n\t\t\t\tresponse = driver.toObject(item.xhr.responseText);\r\n\t\t\t\tif (response)\r\n\t\t\t\t\tresponse = driver.getDetails(response);\r\n\t\t\t}\r\n\t\t\tif (!response || response.status == \"error\"){\r\n\t\t\t\t// file upload error\r\n\t\t\t\titem.status = \"error\";\r\n\t\t\t\tdelete item.percent;\r\n\t\t\t\tthis.files.updateItem(id);\r\n\t\t\t\tthis.callEvent(\"onFileUploadError\", [item, response]);\r\n\t\t\t} else {\r\n\t\t\t\t// file upload complete\r\n\t\t\t\tassert(\r\n\t\t\t\t\t(!response.status || response.status == \"server\"),\r\n\t\t\t\t\t\"Not supported status value, use 'error' or 'server'\"\r\n\t\t\t\t);\r\n\t\t\t\tthis._complete(id, response);\r\n\t\t\t}\r\n\t\t\tdelete item.xhr;\r\n\t\t}\r\n\t},\r\n\tstopUpload: function(id){\r\n\t\tbind(this._stop_file,this.files)(id);\r\n\t},\r\n\t_stop_file: function(id) {\r\n\t\tvar item = this.getItem(id);\r\n\t\tif (typeof(item.xhr) !== \"undefined\"){\r\n\t\t\titem.xhr.aborted = true;\r\n\t\t\titem.xhr.abort();\r\n\t\t\tdelete item.xhr;\r\n\t\t\titem.status = \"client\";\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nexport default UploadDriver;","import {bind} from \"../webix/helpers\";\r\nimport ValidateData from \"./validatedata\";\r\nimport rules from \"../webix/rules\";\r\n\r\nconst ValidateCollection = {\r\n\t_validate_init_once:function(){\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\",bind(function(id, data, mode){\r\n\t\t\tif (id && (mode == \"add\" || mode == \"update\"))\r\n\t\t\t\tthis.validate(id);\r\n\t\t}, this));\r\n\t\tthis.data.attachEvent(\"onClearAll\",bind(this.clearValidation, this));\r\n\r\n\t\tthis._validate_init_once = function(){};\r\n\t},\r\n\trules_setter:function(value){\r\n\t\tif (value){\r\n\t\t\tthis._validate_init_once();\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tclearValidation:function(){\r\n\t\tthis.data.clearMark(\"webix_invalid\", true);\r\n\t},\r\n\tvalidate:function(id){\r\n\t\tvar result = true;\r\n\t\tif (!id)\r\n\t\t\tfor (var key in this.data.pull)\r\n\t\t\t\tresult = this.validate(key) && result;\r\n\t\telse {\r\n\t\t\tthis._validate_details = {};\r\n\t\t\tvar obj = this.getItem(id);\r\n\t\t\tresult = ValidateData.validate.call(this, null, obj);\r\n\t\t\tif (result){\r\n\t\t\t\tif (this.callEvent(\"onValidationSuccess\",[id, obj]))\r\n\t\t\t\t\tthis._clear_invalid(id);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.callEvent(\"onValidationError\",[id, obj, this._validate_details]))\r\n\t\t\t\t\tthis._mark_invalid(id, this._validate_details);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\t_validate:function(rule, data, obj, key){\r\n\t\tif (typeof rule == \"string\")\r\n\t\t\trule = rules[rule];\r\n\r\n\t\tvar res = rule.call(this, data, obj, key);\r\n\t\tif (!res){\r\n\t\t\tthis._validate_details[key] = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_clear_invalid:function(id){\r\n\t\tthis.data.removeMark(id, \"webix_invalid\", true);\r\n\t},\r\n\t_mark_invalid:function(id){\r\n\t\tthis.data.addMark(id, \"webix_invalid\", true);\r\n\t}\r\n};\r\n\r\nexport default ValidateCollection;","import {addCss, removeCss} from \"../webix/html\";\r\nimport {isUndefined, copy} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nimport CodeParser from \"../core/codeparser\";\r\n\r\n\r\n// #include core/parsing.js\r\n\r\nconst Values = {\r\n\t$init:function(){\r\n\t\tthis.elements = {};\r\n\t},\r\n\tfocus:function(name){\r\n\t\tif (name){\r\n\t\t\tassert(this.elements[name],\"unknown input name: \"+name);\r\n\t\t\tthis._focus(this.elements[name]);\r\n\t\t} else{\r\n\t\t\tfor(var n in this.elements){\r\n\t\t\t\tif(this._focus(this.elements[n]) !== false)\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_focus: function(target){\r\n\t\tif (target && target.focus){\r\n\t\t\treturn target.focus();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tsetValues:function(data, update){\r\n\t\tif (this._settings.complexData)\r\n\t\t\tdata = CodeParser.collapseNames(data, \"\", {}, (v) => !this.elements[v]);\r\n\t\tthis._inner_setValues(data, update);\r\n\t},\r\n\t_inner_setValues:function(data, update){\r\n\t\tthis._is_form_dirty = update;\r\n\t\t//prevent onChange calls from separate controls\r\n\t\tthis.blockEvent();\r\n\r\n\t\tif (!update || !this._values)\r\n\t\t\tthis._values = {};\r\n\r\n\t\tfor (let name in data)\r\n\t\t\tif (!this.elements[name])\r\n\t\t\t\tthis._values[name] = data[name];\r\n\r\n\t\tfor (let name in this.elements){\r\n\t\t\tvar input = this.elements[name];\r\n\t\t\tif (input){\r\n\t\t\t\tif (!isUndefined(data[name]))\r\n\t\t\t\t\tinput.setValue(data[name]);\r\n\t\t\t\telse if (!update && input.$allowsClear)\r\n\t\t\t\t\tinput.setValue(\"\");\r\n\t\t\t\tthis._values[name] = input.getValue();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.unblockEvent();\r\n\t\tthis.callEvent(\"onValues\",[]);\r\n\t},\r\n\tisDirty:function(){\r\n\t\treturn !!this._is_form_dirty || this.getDirtyValues(true) === true;\r\n\t},\r\n\tsetDirty:function(flag){\r\n\t\tthis._is_form_dirty = flag;\r\n\t\tif (!flag)\r\n\t\t\tthis._values = this._inner_getValues();\r\n\t},\r\n\tgetDirtyValues:function(){\r\n\t\tconst result = {};\r\n\t\tif (this._values){\r\n\t\t\tfor (let name in this.elements){\r\n\t\t\t\tconst view = this.elements[name];\r\n\t\t\t\tconst value = view.getValue();\r\n\t\t\t\tconst defaultValue = this._values[name];\r\n\r\n\t\t\t\tconst isDirty = view.$compareValue ? !view.$compareValue(defaultValue, value) : defaultValue != value;\r\n\t\t\t\tif (isDirty){\r\n\t\t\t\t\tresult[name] = value;\r\n\t\t\t\t\tif (arguments[0])\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tgetCleanValues:function(){\r\n\t\treturn this._values;\r\n\t},\r\n\tgetValues:function(filter){\r\n\t\tvar data = this._inner_getValues(filter);\r\n\t\tif (this._settings.complexData)\r\n\t\t\tdata = CodeParser.expandNames(data);\r\n\r\n\t\treturn data;\r\n\t},\r\n\t_inner_getValues:function(filter){\r\n\t\t//get original data\t\t\r\n\t\tvar success,\r\n\t\t\telem = null,\r\n\t\t\tdata = (this._values?copy(this._values):{});\r\n\r\n\t\t//update properties from linked controls\r\n\t\tfor (var name in this.elements){\r\n\t\t\telem = this.elements[name];\r\n\t\t\tsuccess = true;\r\n\t\t\tif(filter){\r\n\t\t\t\tif(typeof filter == \"object\"){\r\n\t\t\t\t\tif(filter.hidden === false)\r\n\t\t\t\t\t\tsuccess = elem.isVisible();\r\n\t\t\t\t\tif(success && filter.disabled === false)\r\n\t\t\t\t\t\tsuccess = elem.isEnabled();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tsuccess = filter.call(this,elem);\r\n\t\t\t}\r\n\t\t\tif(success)\r\n\t\t\t\tdata[name] = elem.getValue();\r\n\t\t\telse\r\n\t\t\t\tdelete data[name]; //in case of this._values[name]\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tclear:function(){\r\n\t\tthis._is_form_dirty = false;\r\n\t\tvar data = {};\r\n\t\tfor (var name in this.elements)\r\n\t\t\tif (this.elements[name].$allowsClear)\r\n\t\t\t\tdata[name] = \"\";\r\n\t\t\r\n\t\tthis._inner_setValues(data);\r\n\t},\r\n\tmarkInvalid: function(name, state){\r\n\t\t// remove 'invalid' mark\r\n\t\tif(state === false){\r\n\t\t\tthis._clear_invalid(name);\r\n\t\t}\r\n\t\t// add 'invalid' mark\r\n\t\telse{\r\n\t\t\t// set invalidMessage\r\n\t\t\tif(typeof state == \"string\"){\r\n\t\t\t\tvar input = this.elements[name];\r\n\t\t\t\tif(input)\r\n\t\t\t\t\tinput._settings.invalidMessage = state;\r\n\t\t\t}\r\n\t\t\t//add mark to current validation process\r\n\t\t\tif (this._validate_details)\r\n\t\t\t\tthis._validate_details[name] = true;\r\n\r\n\t\t\tthis._mark_invalid(name);\r\n\t\t}\r\n\t},\r\n\t_mark_invalid:function(id){\r\n\t\tvar input = this.elements[id];\r\n\t\tif (id && input){\r\n\t\t\tthis._clear_invalid(id,true);\r\n\t\t\taddCss(input._viewobj, \"webix_invalid\");\r\n\t\t\tinput._settings.invalid = true;\r\n\t\t\tvar message = input._settings.invalidMessage;\r\n\t\t\tif(typeof message === \"string\" && input.setBottomText)\r\n\t\t\t\tinput.setBottomText();\r\n\t\t}\r\n\t},\r\n\t_clear_invalid:function(id,silent){\r\n\t\tvar input = this.elements[id];\r\n\t\tif(id && input && input.$view && input._settings.invalid){\r\n\t\t\tremoveCss(input._viewobj, \"webix_invalid\");\r\n\t\t\tinput._settings.invalid = false;\r\n\t\t\tvar message = input._settings.invalidMessage;\r\n\t\t\tif(typeof message === \"string\" && !silent && input.setBottomText)\r\n\t\t\t\tinput.setBottomText();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nexport default Values;","import {insertBefore, remove} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\n/*\r\n\tRenders collection of items\r\n\tAlways shows y-scroll\r\n\tCan be used with huge datasets\r\n\t\r\n\t@export\r\n\t\tshow\r\n\t\trender\r\n*/\r\n\r\nconst VirtualRenderStack ={\r\n\t$init:function(){\r\n\t\tassert(this.render,\"VirtualRenderStack :: Object must use RenderStack first\");\r\n\r\n\t\tthis._htmlmap={}; //init map of rendered elements\r\n\r\n\t\t//we need to repaint area each time when view resized or scrolling state is changed\r\n\t\t_event(this._viewobj,\"scroll\",bind(this._render_visible_rows,this));\r\n\r\n\t\t//here we store IDs of elemenst which doesn't loadede yet, but need to be rendered\r\n\t\tthis._unrendered_area=[];\r\n\t},\r\n\t//return html object by item's ID. Can return null for not-rendering element\r\n\tgetItemNode:function(search_id){\r\n\t\t//collection was filled in _render_visible_rows\r\n\t\treturn this._htmlmap[search_id];\r\n\t},\r\n\t//adjust scrolls to make item visible\r\n\tshowItem:function(id){\r\n\t\tvar range = this._getVisibleRange();\r\n\t\tvar ind = this.data.getIndexById(id);\r\n\t\t//we can't use DOM method for not-rendered-yet items, so fallback to pure math\r\n\t\tvar dy = Math.floor(ind/range._dx)*range._y;\r\n\t\tvar state = this.getScrollState();\r\n\t\tif (dy<state.y || dy + this._settings.height >= state.y + this._content_height)\r\n\t\t\tthis.scrollTo(0, dy);\r\n\t},\r\n\t//repain self after changes in DOM\r\n\t//for add, delete, move operations - render is delayed, to minify performance impact\r\n\trender:function(id,data,type){\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tif (id){\r\n\t\t\tvar cont = this.getItemNode(id);\t//old html element\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"update\":\r\n\t\t\t\t\tif (!cont) return;\r\n\t\t\t\t\t//replace old with new\r\n\t\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\t\tinsertBefore(t, cont); \r\n\t\t\t\t\tremove(cont);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault: // \"move\", \"add\", \"delete\"\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tfor all above operations, full repainting is necessary\r\n\t\t\t\t\t\tbut from practical point of view, we need only one repainting per thread\r\n\t\t\t\t\t\tcode below initiates double-thread-rendering trick\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tthis._render_delayed();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//full repainting\r\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\t\tthis._htmlmap = {}; \t\t\t\t\t//nulify links to already rendered elements\r\n\t\t\t\tthis._render_visible_rows(null, true);\t\r\n\t\t\t\t// clear delayed-rendering, because we already have repaint view\r\n\t\t\t\tthis._wait_for_render = false;\t\t\t\r\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//implement double-thread-rendering pattern\r\n\t_render_delayed:function(){\r\n\t\t//this flag can be reset from outside, to prevent actual rendering \r\n\t\tif (this._wait_for_render) return;\r\n\t\tthis._wait_for_render = true;\t\r\n\t\t\r\n\t\twindow.setTimeout(bind(function(){\r\n\t\t\tthis.render();\r\n\t\t},this),1);\r\n\t},\r\n\t//create empty placeholders, which will take space before rendering\r\n\t_create_placeholder:function(height){\r\n\t\tif(env.maxHTMLElementSize)\r\n\t\t\theight = Math.min(env.maxHTMLElementSize, height);\r\n\t\tvar node = document.createElement(\"DIV\");\r\n\t\tnode.style.cssText = \"height:\"+height+\"px; width:100%; overflow:hidden;\";\r\n\t\treturn node;\r\n\t},\r\n\t/*\r\n\t\tMethods get coordinatest of visible area and checks that all related items are rendered\r\n\t\tIf, during rendering, some not-loaded items was detected - extra data loading is initiated.\r\n\t\treset - flag, which forces clearing of previously rendered elements\r\n\t*/\r\n\t_render_visible_rows:function(e,reset){\r\n\t\tthis._unrendered_area=[]; //clear results of previous calls\r\n\t\t\r\n\t\tvar viewport = this._getVisibleRange();\t//details of visible view\r\n\r\n\t\tif (!this._dataobj.firstChild || reset){\t//create initial placeholder - for all view space\r\n\t\t\tthis._dataobj.innerHTML=\"\";\r\n\t\t\tthis._dataobj.appendChild(this._create_placeholder(viewport._max));\r\n\t\t\t//register placeholder in collection\r\n\t\t\tthis._htmlrows = [this._dataobj.firstChild];\r\n\t\t}\r\n\t\t\r\n\t\t/*\r\n\t\t\tvirtual rendering breaks all view on rows, because we know widht of item\r\n\t\t\twe can calculate how much items can be placed on single row, and knowledge \r\n\t\t\tof that, allows to calculate count of such rows\r\n\t\t\t\r\n\t\t\teach time after scrolling, code iterate through visible rows and render items \r\n\t\t\tin them, if they are not rendered yet\r\n\t\t\t\r\n\t\t\tboth rendered rows and placeholders are registered in _htmlrows collection\r\n\t\t*/\r\n\r\n\t\t//position of first visible row\r\n\t\tvar t = viewport._from;\r\n\t\t\t\r\n\t\twhile(t<=viewport._height){\t//loop for all visible rows\r\n\t\t\t//skip already rendered rows\r\n\t\t\twhile(this._htmlrows[t] && this._htmlrows[t]._filled && t<=viewport._height){\r\n\t\t\t\tt++; \r\n\t\t\t}\r\n\t\t\t//go out if all is rendered\r\n\t\t\tif (t>viewport._height) break;\r\n\t\t\t\r\n\t\t\t//locate nearest placeholder\r\n\t\t\tvar holder = t;\r\n\t\t\twhile (!this._htmlrows[holder]) holder--;\r\n\t\t\tvar holder_row = this._htmlrows[holder];\r\n\t\t\t\r\n\t\t\t//render elements in the row\t\t\t\r\n\t\t\tvar base = t*viewport._dx+(this.data.$min||0);\t//index of rendered item\r\n\t\t\tif (base > (this.data.$max||Infinity)) break;\t//check that row is in virtual bounds, defined by paging\r\n\t\t\tvar nextpoint =  Math.min(base+viewport._dx-1,(this.data.$max?this.data.$max-1:Infinity));\r\n\t\t\tvar node = this._create_placeholder(viewport._y);\r\n\t\t\t//all items in rendered row\r\n\t\t\tvar range = this.data.getIndexRange(base, nextpoint);\r\n\t\t\tif (!range.length) break; \r\n\t\t\t\r\n\t\t\tvar loading = { $template:\"Loading\" };\r\n\t\t\tfor (let i=0; i<range.length; i++){\r\n\t\t\t\tif (!range[i])\r\n\t\t\t\t\tthis._unrendered_area.push(base+i);\r\n\t\t\t\trange[i] = this._toHTML(range[i]||loading);\r\n\t\t\t}\r\n\r\n\t\t\tnode.innerHTML=range.join(\"\"); \t//actual rendering\r\n\t\t\tfor (let i=0; i < range.length; i++)\t\t\t\t\t//register all new elements for later usage in getItemNode\r\n\t\t\t\tthis._htmlmap[this.data.getIdByIndex(base+i)]=node.childNodes[i];\r\n\t\t\t\r\n\t\t\t//correct placeholders\r\n\t\t\tvar h = parseFloat(holder_row.style.height,10);\r\n\t\t\tvar delta = (t-holder)*viewport._y;\r\n\t\t\tvar delta2 = (h-delta-viewport._y);\r\n\t\t\t\r\n\t\t\t//add new row to the DOOM\r\n\t\t\tinsertBefore(node,delta?holder_row.nextSibling:holder_row,this._dataobj);\r\n\t\t\tthis._htmlrows[t]=node;\r\n\t\t\tnode._filled = true;\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\t\tif new row is at start of placeholder - decrease placeholder's height\r\n\t\t\t\telse if new row takes whole placeholder - remove placeholder from DOM\r\n\t\t\t\telse \r\n\t\t\t\t\twe are inserting row in the middle of existing placeholder\r\n\t\t\t\t\tdecrease height of existing one, and add one more, \r\n\t\t\t\t\tbefore the newly added row\r\n\t\t\t*/\r\n\t\t\tif (delta <= 0 && delta2>0){\r\n\t\t\t\tholder_row.style.height = delta2+\"px\";\r\n\t\t\t\tthis._htmlrows[t+1] = holder_row;\r\n\t\t\t} else {\r\n\t\t\t\tif (delta<0)\r\n\t\t\t\t\tremove(holder_row);\r\n\t\t\t\telse\r\n\t\t\t\t\tholder_row.style.height = delta+\"px\";\r\n\t\t\t\tif (delta2>0){ \r\n\t\t\t\t\tvar new_space = this._htmlrows[t+1] = this._create_placeholder(delta2);\r\n\t\t\t\t\tinsertBefore(new_space,node.nextSibling,this._dataobj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tt++;\r\n\t\t}\r\n\t\t\r\n\t\t//when all done, check for non-loaded items\r\n\t\tif (this._unrendered_area.length){\r\n\t\t\t//we have some data to load\r\n\t\t\t//detect borders\r\n\t\t\tvar from = this._unrendered_area[0];\r\n\t\t\tvar to = this._unrendered_area.pop()+1;\r\n\t\t\tif (to>from){\r\n\t\t\t\t//initiate data loading\r\n\t\t\t\tvar count = to - from;\r\n\t\t\t\tif (this._maybe_loading_already(count, from)) return;\r\n\r\n\t\t\t\tcount = Math.max(count, (this._settings.datafetch||this._settings.loadahead||0));\r\n\t\t\t\tthis.loadNext(count, from);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//calculates visible view\r\n\t_getVisibleRange:function(){\r\n\t\tvar state = this.getScrollState();\r\n\t\tvar top = Math.max(0, state.y);\r\n\t\tvar width = this._content_width; \r\n\t\tvar height = this._content_height;\r\n\r\n\t\t//size of single item\r\n\t\tvar t = this.type;\r\n\r\n\t\tvar dx = Math.floor(width/t.width)||1; //at least single item per row\r\n\t\t\r\n\t\tvar min = Math.floor(top/t.height);\t\t\t\t//index of first visible row\r\n\t\tvar dy = Math.ceil((height+top)/t.height)-1;\t\t//index of last visible row\r\n\t\t//total count of items, paging can affect this math\r\n\t\tvar count = this.data.$max?(this.data.$max-this.data.$min):this.data.count();\r\n\t\tvar max = Math.ceil(count/dx)*t.height;\t\t\t//size of view in rows\r\n\r\n\t\treturn { _from:min, _height:dy, _top:top, _max:max, _y:t.height, _dx:dx};\r\n\t},\r\n\t_cellPosition:function(id){\r\n\t\tvar html = this.getItemNode(id);\r\n\t\tif (!html){\r\n\t\t\tthis.showItem(id);\r\n\t\t\tthis._render_visible_rows();\r\n\t\t\thtml = this.getItemNode(id);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:html.offsetLeft, \r\n\t\t\ttop:html.offsetTop,\r\n\t\t\theight:html.offsetHeight,\r\n\t\t\twidth:html.offsetWidth,\r\n\t\t\tparent:this._contentobj\r\n\t\t};\r\n\t}\r\n};\r\n\r\nexport default VirtualRenderStack;","import {offset, insertBefore, remove} from \"../webix/html\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport base from \"../views/view\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport Touch from \"../core/touch\";\r\n\r\n/*\r\n\tRenders collection of items on demand\r\n*/\r\nconst VRenderStack = {\r\n\t$init:function(){\r\n\t\tthis._htmlmap = {};\r\n\r\n\t\t_event(this._viewobj, \"scroll\", bind(function(){\r\n\t\t\tthis.render(null, null, \"paint\");\r\n\t\t}, this));\r\n\t},\r\n\t_sync_scroll:function(x,y,t){\r\n\r\n\t\tif (this._settings.footer)\r\n\t\t\tTouch._set_matrix(this._footer.childNodes[1].firstChild,x,0,t);\r\n\r\n\t\tthis.callEvent(\"onSyncScroll\", [x,y,t]);\r\n\t},\r\n\t//return html container by its ID\r\n\t//can return undefined if container doesn't exists\r\n\tgetItemNode:function(search_id){\r\n\t\treturn this._htmlmap && this._htmlmap[search_id];\r\n\t},\r\n\t/*change scrolling state of top level container, so related item will be in visible part*/\r\n\tshowItem:function(id){\r\n\t\tvar index = this.data.getIndexById(id);\r\n\t\tif (index > -1){\r\n\t\t\tvar top = index*this.type.height;\r\n\t\t\tvar bottom = top + this.type.height;\r\n\t\t\tvar scroll = this.getScrollState();\r\n\t\t\tvar box = offset(this.$view);\r\n\t\t\tif (top < scroll.y)\r\n\t\t\t\tthis.scrollTo(0, top);\r\n\t\t\telse if (bottom > scroll.y+box.height)\r\n\t\t\t\tthis.scrollTo(0, bottom-box.height);\r\n\t\t}\r\n\t},\r\n\t//update view after data update\r\n\t//when called without parameters - all view refreshed\r\n\trender:function(id,data,type){\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar parent = (this._renderobj||this._dataobj);\r\n\r\n\t\tif (id){\r\n\t\t\tif (type == \"paint\" || type == \"update\"){\r\n\t\t\t\tvar cont = this.getItemNode(id); //get html element of updated item\r\n\t\t\t\tif (cont){\r\n\t\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\t\tt.style.top = cont.style.top;\r\n\t\t\t\t\tt.style.position = \"absolute\";\r\n\t\t\t\t\tt.style.left = 0; t.style.width = \"100%\";\r\n\r\n\t\t\t\t\tinsertBefore(t, cont); \r\n\t\t\t\t\tremove(cont);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//updating not rendered yet item\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (type != \"paint\"){\r\n\t\t\t//repaint all\r\n\t\t\tthis._htmlmap = {};\r\n\t\t\tparent.innerHTML = \"\";\r\n\t\t}\r\n\r\n\t\t//full reset\r\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\tvar count = this.data.count();\r\n\t\t\tvar scroll = this.getScrollState();\r\n\t\t\tvar box = offset(this._viewobj);\r\n\r\n\t\t\tvar top = Math.floor(scroll.y / this.type.height)-2;\r\n\t\t\tvar bottom = Math.ceil((scroll.y + box.height)/ this.type.height)+2;\r\n\r\n\t\t\ttop = Math.max(0, top);\r\n\t\t\tbottom = Math.min(this.data.count()-1, bottom);\r\n\r\n\t\t\tvar html = [];\r\n\t\t\tfor (let i=top; i<=bottom; i++){\r\n\t\t\t\tvar sid = this.data.order[i];\r\n\t\t\t\tif (!this._htmlmap[sid]){\r\n\t\t\t\t\tvar item = this.data.getItem(sid);\r\n\t\t\t\t\tif (!item){\r\n\t\t\t\t\t\tthis._run_load_next({ \r\n\t\t\t\t\t\t\tcount:bottom-i+(this._settings.loadahead || 0),\r\n\t\t\t\t\t\t\tstart:i \r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml.push(this._toHTML(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml.push(\"<div></div>\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._html.innerHTML = html.join(\"\");\r\n\r\n\t\t\tparent.style.position = \"relative\";\r\n\t\t\tparent.style.height = count*this.type.height+\"px\";\r\n\r\n\t\t\tvar kids = this._html.childNodes;\r\n\t\t\tfor (let i=kids.length-1; i>=0; i--){\r\n\t\t\t\tvar child = kids[i];\r\n\t\t\t\tvar cid = child.getAttribute(this._id);\r\n\r\n\t\t\t\tif (cid){\r\n\t\t\t\t\tchild.style.position = \"absolute\";\r\n\t\t\t\t\tchild.style.top = (top+i)*this.type.height+\"px\";\r\n\t\t\t\t\tchild.style.left = 0; child.style.width = \"100%\";\r\n\r\n\t\t\t\t\tparent.appendChild(child);\r\n\t\t\t\t\tthis._htmlmap[cid] = child;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t}\r\n\t},\r\n\t$setSize:function(){\r\n\t\tif (base.api.$setSize.apply(this, arguments)){\r\n\t\t\tthis.render(null, null, \"paint\");\r\n\t\t}\r\n\t},\r\n\t_run_load_next:function(conf){\r\n\t\tvar count = Math.max(conf.count, (this._settings.datafetch||this._settings.loadahead||0));\r\n\t\tif (this._maybe_loading_already(conf.count, conf.start)) return;\r\n\t\tthis.loadNext(count, conf.start);\r\n\t}\r\n};\r\n\r\nexport default VRenderStack;","import {$active} from \"../../webix/skin\";\r\nimport {extend, isUndefined} from \"../../webix/helpers\";\r\n\r\nexport const errorMessage = \"non-existing view for export\";\r\n\r\nfunction getDataHelper(key, column, raw){\r\n\tif (!raw && column.format)\r\n\t\treturn function(obj){ return column.format(obj[key]); };\r\n\r\n\treturn function(obj){ return obj[key]; };\r\n}\r\n\r\nfunction getHeaderText(view, header){\r\n\tlet text = header.text;\r\n\tif (header.contentId){\r\n\t\tconst content = view.getHeaderContent(header.contentId);\r\n\t\tif (content && !content.type.$icon)\r\n\t\t\ttext = content.getValue(true);\r\n\t}\r\n\treturn (text||\"\").toString().replace( /<[^>]*>/gi, \"\");\r\n}\r\n\r\nexport function getStyles(r, c, styles){\r\n\t//row index, column index, styles array\r\n\tif(styles[r] && styles[r][c])\r\n\t\treturn styles[r][c];\r\n\treturn \"\";\r\n}\r\n\r\nexport function getExportScheme(view, options){\r\n\tvar scheme = [];\r\n\tvar h_count = 0, f_count = 0;\r\n\tvar isTable = view.getColumnConfig;\r\n\tvar columns = options.columns;\r\n\tvar raw = !!options.rawValues;\r\n\tvar isTree = view.data.name == \"TreeStore\";\r\n\r\n\tvar treeLines = options.treeLines;\r\n\tif(treeLines === true || isUndefined(treeLines))\r\n\t\ttreeLines = \"value\";\r\n\r\n\tscheme.heights = {};\r\n\r\n\tif (!columns){\r\n\t\tif (isTable)\r\n\t\t\tcolumns = [].concat(view._columns);\r\n\t\telse {\r\n\t\t\tcolumns = [];\r\n\t\t\tvar obj = view.data.pull[view.data.order[0]];\r\n\t\t\tfor (let key in obj)\r\n\t\t\t\tif(key !== \"id\" && key[0] != \"$\")\r\n\t\t\t\t\tcolumns.push({id:key, isTree: isTree && key === treeLines});\r\n\t\t}\r\n\t}\r\n\telse if(!columns.length){\r\n\t//export options are set as - columns:{ rank:true, title:{ header:\"custom\"}}\r\n\t\tvar arr = [];\r\n\t\tfor(let key in columns)\r\n\t\t\tarr.push(extend({ id:key}, extend({}, columns[key])));\r\n\t\tcolumns = arr;\r\n\t}\r\n\r\n\tif (options.ignore)\r\n\t\tfor (let i=columns.length-1; i>=0; i--)\r\n\t\t\tif (options.ignore[columns[i].id])\r\n\t\t\t\tcolumns.splice(i,1);\r\n\r\n\tif (options.id)\r\n\t\tscheme.push({ id:\"id\", width:50, header:\" \", template:function(obj){ return obj.id; }});\r\n\r\n\tif (options.flatTree){\r\n\t\tvar flatKey = options.flatTree.id;\r\n\t\tvar copy = [].concat(options.flatTree.columns);\r\n\t\tvar fill = [];\r\n\t\tvar fillMode = !!options.flatTree.fill;\r\n\t\tfor (let i = 1; i <= copy.length; i++)\r\n\t\t\tcopy[i-1].template = (function(i){ \r\n\t\t\t\treturn function(obj){ \r\n\t\t\t\t\treturn obj.$level == i ? (fill[i]=obj[flatKey]) : ((fillMode && i<obj.$level)?fill[i]:\"\"); \r\n\t\t\t\t};\r\n\t\t\t})(i);\r\n\r\n\t\tvar index = 0;\r\n\t\tfor (let i = columns.length-1; i >= 0; i--)\r\n\t\t\tif (columns[i].id === flatKey)\r\n\t\t\t\tindex = i;\r\n\r\n\t\tcolumns = [].concat(columns.slice(0,index)).concat(copy).concat(columns.slice(index+1));\r\n\t}\r\n\r\n\tvar treeColumn;\r\n\r\n\tfor (let j = 0; j < columns.length; j++) {\r\n\t\tlet column = columns[j];\r\n\t\tlet key = column.id;\r\n\r\n\t\tif (column.noExport) continue;\r\n\r\n\t\t// raw mode has sense only for datatable\r\n\t\t// in other cases we don't have built-in data templates\r\n\t\tvar rawColumn = raw && isTable;\r\n\t\tif (isTable){\r\n\t\t\tlet sourceColumn = view._columns_pull[key];\r\n\t\t\t// when these's no column to take raw data from, or custom template defined - ignore raw mode\r\n\t\t\tif (column.template && (!sourceColumn || sourceColumn.template != column.template))\r\n\t\t\t\trawColumn = false;\r\n\t\t\tif(sourceColumn)\r\n\t\t\t\tcolumn = extend(extend({}, column), sourceColumn);\r\n\t\t}\r\n\r\n\t\tlet record = {\r\n\t\t\tid:         column.id,\r\n\t\t\ttemplate:   (( rawColumn || !column.template) ? getDataHelper(key, column, raw)  : column.template ),\r\n\t\t\twidth:      ((column.width   || 200) * (options.export_mode===\"excel\"?8.43/70:1 )),\r\n\t\t\theader:     (column.header!==false?(column.header||key)  : \"\")\r\n\t\t};\r\n\r\n\t\tif(isTree && key === treeLines)\r\n\t\t\trecord.isTree = treeColumn = true;\r\n\r\n\t\tif(options.export_mode === \"excel\"){\r\n\t\t\textend(record, {\r\n\t\t\t\ttype: column.exportType || \"\",\r\n\t\t\t\tformat:column.exportFormat || \"\"\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof record.header === \"string\") record.header = [{text:record.header}];\r\n\t\telse record.header = [].concat(record.header);\r\n\r\n\t\tfor(let i = 0; i<record.header.length; i++)\r\n\t\t\trecord.header[i] = record.header[i] ? getHeaderText(view, record.header[i]) : \"\";\r\n\r\n\t\th_count = Math.max(h_count, record.header.length);\r\n\r\n\t\tif(view.config.footer){\r\n\t\t\tlet footer = column.footer || \"\";\r\n\t\t\tif(typeof footer == \"string\") footer = [{text:footer}];\r\n\t\t\telse footer = [].concat(footer);\r\n\r\n\t\t\tfor(let i = 0; i<footer.length; i++)\r\n\t\t\t\tfooter[i] = footer[i] ? getHeaderText(view, footer[i]) : \"\";\r\n\r\n\t\t\trecord.footer = footer;\r\n\t\t\tf_count = Math.max(f_count, record.footer.length);\r\n\t\t}\r\n\t\tscheme.push(record);\r\n\t}\r\n\r\n\r\n\tif(!treeColumn && isTree && options.treeLines != treeLines && scheme[0])\r\n\t\tscheme[0].isTree = true;\r\n\r\n\tfor(let i =0; i<scheme.length; i++){\r\n\r\n\t\tvar diff = h_count-scheme[i].header.length;\r\n\t\tfor(let d=0; d<diff; d++)\r\n\t\t\tscheme[i].header.push(\"\");\r\n\r\n\t\tif(view.config.footer){\r\n\t\t\tdiff = f_count-scheme[i].footer.length;\r\n\t\t\tfor(let d=0; d<diff; d++)\r\n\t\t\t\tscheme[i].footer.push(\"\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn scheme;\r\n}\r\n\r\n\r\nexport function getExportData(view, options, scheme){\r\n\tvar filterHTML = !!options.filterHTML;\r\n\tvar htmlFilter = /<[^>]*>/gi;\r\n\tvar data = [];\r\n\tvar header, headers;\r\n\tvar mode = options.export_mode;\r\n\r\n\tif((mode === \"excel\" || mode == \"csv\") && options.docHeader){\r\n\t\tdata = [[(options.docHeader.text || options.docHeader).toString()], [\"\"]];\r\n\t\tif(mode === \"excel\" && options.docHeader.height)\r\n\t\t\tscheme.heights[0] = options.docHeader.height;\r\n\t}\r\n\r\n\tif( options.header !== false && scheme.length){\r\n\t\tfor(let h=0; h < scheme[0].header.length; h++){\r\n\t\t\theaders = [];\r\n\t\t\tfor (let i = 0; i < scheme.length; i++){ \r\n\t\t\t\theader = \"\";\r\n\t\t\t\tif(scheme[i].header[h]){\r\n\t\t\t\t\theader = scheme[i].header[h];\r\n\t\t\t\t\tif (filterHTML)\r\n\t\t\t\t\t\theader = scheme[i].header[h] = header.replace(htmlFilter, \"\");\r\n\t\t\t\t}\r\n\t\t\t\theaders.push(header);\r\n\t\t\t}\r\n\r\n\t\t\tif(mode ==\"excel\" && view._columns && options.heights !==false &&\r\n\t\t\t(view._headers[h] !== $active.barHeight || options.heights == \"all\")\r\n\t\t\t) scheme.heights[data.length] = view._headers[h];\r\n\r\n\t\t\tif (mode !== \"pdf\")\r\n\t\t\t\tdata[data.length] = headers;\r\n\t\t}\r\n\t}\r\n\toptions.yCorrection = (options.yCorrection||0)-data.length;\r\n\r\n\tvar treeline = (options.flatTree || options.plainOutput) ? \"\" : \"-\";\r\n\r\n\tview.data.each(function(item){\r\n\t\tif(!options.filter || options.filter(item)){\r\n\t\t\tif(this.data._scheme_export){\r\n\t\t\t\titem = view.data._scheme_export(item);\r\n\t\t\t}\r\n\r\n\t\t\tlet line = [];\r\n\t\t\tfor (let i = 0; i < scheme.length; i++){\r\n\t\t\t\tlet column = scheme[i], cell = null;\r\n\t\t\t\t//spreadsheet can output math\r\n\t\t\t\tif(options.math && item[\"$\"+column.id] && item[\"$\"+column.id].charAt(0) ==\"=\" && !item[\"$\"+column.id].match(/^=(image|sparkline)\\(/i))\r\n\t\t\t\t\tcell = item[\"$\"+column.id];\r\n\t\t\t\tif(this._spans_pull){\r\n\t\t\t\t\tlet span = this.getSpan(item.id, column.id);\r\n\t\t\t\t\tif(span && span[4] && span[0] == item.id && span[1] == column.id){\r\n\t\t\t\t\t\tcell = span[4];\r\n\t\t\t\t\t\tif(filterHTML && typeof cell === \"string\")\r\n\t\t\t\t\t\t\tcell = cell.replace(htmlFilter, \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!cell){\r\n\t\t\t\t\tcell = column.template(item, view.type, item[column.id], column, i);\r\n\t\t\t\t\tif (!cell && cell !== 0) cell = \"\";\r\n\t\t\t\t\tif(column.isTree && treeline)\r\n\t\t\t\t\t\tcell = \" \"+Array(item.$level).join(treeline)+\" \"+cell;\r\n\t\t\t\t\tif (filterHTML && typeof cell === \"string\"){\r\n\t\t\t\t\t\tcell = cell.replace(htmlFilter, \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//remove end/start spaces(ex.hierarchy data)\r\n\t\t\t\t\tif (typeof cell === \"string\" && mode === \"csv\")\r\n\t\t\t\t\t\tcell = cell.trim();\r\n\t\t\t\t\t//for multiline data\r\n\t\t\t\t\tif (typeof cell === \"string\" && (mode === \"excel\" || mode === \"csv\")){\r\n\t\t\t\t\t\tcell = cell.replace(/<br\\s*\\/?>/mg,\"\\n\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tline.push(cell);\r\n\t\t\t}\r\n\r\n\t\t\tif(mode ==\"excel\" && view._columns &&  options.heights !==false &&\r\n\t\t\t((item.$height && item.$height !== $active.rowHeight) || options.heights ==\"all\")\r\n\t\t\t) scheme.heights[data.length] = item.$height || this.config.rowHeight;\r\n\r\n\t\t\tdata.push(line);\r\n\t\t}\r\n\t}, view);\r\n\r\n\tif( options.footer !==false ){\r\n\t\tlet f_count = scheme[0].footer?scheme[0].footer.length:0;\r\n\t\tfor (let f = 0; f < f_count; f++){\r\n\t\t\tlet footers  = [];\r\n\t\t\tfor(let i = 0; i<scheme.length; i++){\r\n\t\t\t\tlet footer = scheme[i].footer[f];\r\n\t\t\t\tif (filterHTML) footer = scheme[i].footer[f] = footer.toString().replace(htmlFilter, \"\");\r\n\t\t\t\tfooters.push(footer);\r\n\t\t\t}\r\n\r\n\t\t\tif(mode ==\"excel\" && view._columns && options.heights !==false &&\r\n\t\t\t(view._footers[f] !== $active.barHeight || options.heights==\"all\")\r\n\t\t\t) scheme.heights[data.length] = view._footers[f];\r\n\r\n\t\t\tif(mode !== \"pdf\")\r\n\t\t\t\tdata.push(footers);\r\n\t\t}\r\n\t}\r\n\r\n\tif(mode ===\"excel\" && options.docFooter){\r\n\t\tdata = data.concat([[], [(options.docFooter.text || options.docFooter).toString()]]);\r\n\t\tif(options.docFooter.height)\r\n\t\t\tscheme.heights[data.length-1] = options.docFooter.height;\r\n\t}\r\n\r\n\treturn data;\r\n}","import {errorMessage, getExportScheme, getExportData, getStyles} from \"./common\";\r\n\r\nimport i18n from \"../../webix/i18n\";\r\nimport promise from \"../../thirdparty/promiz\";\r\nimport require from \"../../load/require\";\r\nimport env from \"../../webix/env\";\r\n\r\nimport {download} from \"../../webix/html\";\r\nimport {isArray} from \"../../webix/helpers\";\r\nimport {extend, isUndefined} from \"../../webix/helpers\";\r\nimport {$$} from \"../../ui/core\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\nlet font = {};\r\nexport const toPDF = function(id, options){\r\n\toptions = options || {};\r\n\r\n\toptions.export_mode = \"pdf\";\r\n\toptions._export_font = font;\r\n\toptions.fontName = options.fontName || \"pt-sans.regular\";\r\n\r\n\tid = isArray(id)?id:[id];\r\n\tlet views = [];\r\n\r\n\tfor (let i = 0; i < id.length; i++) {\r\n\t\tif(!id[i].id) id[i]  = { id:id[i] }; \r\n\r\n\t\tlet view = $$(id[i].id);\r\n\r\n\t\tif(view){\r\n\t\t\tconst viewOptions = extend(id[i].options || {}, options);\r\n\t\t\tconst display = viewOptions.display || \"table\";\r\n\t\t\tif(viewOptions.display == \"image\")\r\n\t\t\t\tdelete viewOptions.styles;\r\n\r\n\t\t\tif(view.$exportView)\r\n\t\t\t\tview = view.$exportView(viewOptions);\r\n\r\n\t\t\t//$exportView returns array\r\n\t\t\tif(isArray(view)){\r\n\t\t\t\tviews = views.concat(view);\r\n\t\t\t\tif(options.autowidth)\r\n\t\t\t\t\tgetAutowidth(viewOptions, options);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//display table should be first (in case of styles:true $exportView adds styles to the first view)\r\n\t\t\t\tif(display == \"table\" || display == \"all\"){\r\n\t\t\t\t\tif(view.data && view.data.pull){\r\n\t\t\t\t\t\tconst scheme = getExportScheme(view, viewOptions);\r\n\t\t\t\t\t\tviews.push({\r\n\t\t\t\t\t\t\tscheme: scheme, \r\n\t\t\t\t\t\t\texportData: getExportData(view, viewOptions, scheme),\r\n\t\t\t\t\t\t\tviewOptions: viewOptions\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(options.autowidth)\r\n\t\t\t\t\t\t\tgetAutowidth(view, options, scheme);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(display == \"image\" || display == \"all\"){\r\n\t\t\t\t\tconst node = viewOptions._hidden ? cloneNodeWithStyles(view.$view) : view.$view;\r\n\r\n\t\t\t\t\tviews.push({ node, viewOptions });\r\n\t\t\t\t\tif(options.autowidth)\r\n\t\t\t\t\t\tgetAutowidth(view, options);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tassert(view, errorMessage);\r\n\t}\r\n\r\n\tif(options.dataOnly)\r\n\t\treturn views;\r\n\r\n\treturn require([\r\n\t\tenv.cdn + \"/extras/pdfjs.js\", env.cdn + \"/extras/html2canvas-1.0.min.js\"\r\n\t]).then(function(){\r\n\t\tif(views.length == 0)\r\n\t\t\treturn promise.reject(errorMessage);\r\n\r\n\t\tif(font[options.fontName]){\r\n\t\t\toptions._export_font = font[options.fontName];\r\n\t\t\treturn getPdfData(views, options).then(function(pdf){\r\n\t\t\t\treturn getBlob(pdf, options);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconst defer = promise.defer();\r\n\t\t\t/* global pdfjs */\r\n\t\t\tpdfjs.load(options.fontURL||env.cdn + \"/extras/\"+options.fontName+\".ttf\", function(err, buf){\r\n\t\t\t\tif(err) throw err;\r\n\t\t\t\toptions._export_font = font[options.fontName] = new pdfjs.TTFFont(buf);\r\n\t\t\t\tdefer.resolve(\r\n\t\t\t\t\tgetPdfData(views, options).then(function(pdf){\r\n\t\t\t\t\t\treturn getBlob(pdf, options);\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\treturn defer;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nfunction getBlob(pdf, options){\r\n\tconst filename = (options.filename || \"Data\")+\".pdf\";\r\n\tconst blob = new Blob([pdf.toString()], { type: \"application/pdf\" });\r\n\r\n\tif(options.download !== false)\r\n\t\tdownload(blob, filename);\r\n\treturn blob;\r\n}\r\n\r\nfunction getPdfData(views, options){\r\n\tconst doc = addPDFDoc(options);\r\n\tlet promises = [];\r\n\tfor (let i = 0; i < views.length; i++) {\r\n\t\tif(views[i].node)\r\n\t\t\tpromises.push(getPDFImage(views[i].node));\r\n\t\telse\r\n\t\t\tpromises.push(promise.resolve());\r\n\t}\r\n\r\n\treturn promise.all(promises).then(function(images){\r\n\t\tfor(let i = 0; i < promises.length; i++){\r\n\t\t\tconst viewOptions = views[i].viewOptions;\r\n\t\t\tif(viewOptions.textBefore)\r\n\t\t\t\taddText(doc, \"before\", viewOptions.textBefore);\r\n\r\n\t\t\tif(images[i])\r\n\t\t\t\tdoc.image(images[i], {align:\"center\"});\r\n\t\t\telse\r\n\t\t\t\taddPDFTable(views[i], doc);\r\n\r\n\t\t\tif(viewOptions.textAfter)\r\n\t\t\t\taddText(doc, \"after\", viewOptions.textAfter);\r\n\t\t\tif(i != views.length - 1)\r\n\t\t\t\tdoc.pageBreak();\r\n\t\t}\r\n\t\treturn addPDFHeader(doc, options);\r\n\t});\r\n}\r\n\r\nfunction addText(doc, type, text){\r\n\tif(type == \"after\")\r\n\t\tdoc.text().br();\r\n\tif(typeof text == \"string\")\r\n\t\ttext = {text:text};\r\n\r\n\tdoc.text(text.text, text.options || {});\r\n\tif(type == \"before\")\r\n\t\tdoc.text().br();\r\n}\r\n\r\nfunction getPDFImage(node){\r\n\tconst hidden = !document.body.contains(node);\r\n\tif(hidden){\r\n\t\t//node is a cloneNode of the real view, so it shouldn't be visible\r\n\t\tdocument.body.appendChild(node);\r\n\t\tnode.style.position = \"absolute\";\r\n\t\tnode.style.left = \"-9999px\";\r\n\t}\r\n\r\n\treturn window.html2canvas(\r\n\t\tnode,\r\n\t\t{\r\n\t\t\tbackground:\"#fff\",\r\n\t\t\tlogging:false,\r\n\t\t\tuseCORS:true\r\n\t\t})\r\n\t\t.then(function(canvas){\r\n\t\t\tconst image = canvas.toDataURL(\"image/jpeg\");\r\n\t\t\tconst binary_string =  window.atob(image.split(\"base64,\")[1]);\r\n\t\t\tconst length = binary_string.length;\r\n\t\t\tconst bytes = new Uint8Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++)\r\n\t\t\t\tbytes[i] = binary_string.charCodeAt(i);\r\n\t\t\treturn new pdfjs.Image(bytes.buffer);\r\n\t\t})\r\n\t\t.finally(function(){\r\n\t\t\tif(hidden)\r\n\t\t\t\tdocument.body.removeChild(node);\r\n\t\t});\r\n}\r\n\r\nexport function getAutowidth(view, options, scheme){\r\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\r\n\tlet width;\r\n\r\n\tif(scheme){\r\n\t\twidth = 80; //paddings\r\n\t\tfor(let i = 0; i<scheme.length; i++)\r\n\t\t\twidth += scheme[i].width;\r\n\t}\r\n\telse if(view.$width)\r\n\t\twidth = view.$width;\r\n\telse //'view' can be local settings and we need to compare them with common ones\r\n\t\twidth = view[prop];\r\n\r\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\r\n}\r\n\r\nfunction addPDFDoc(options){\r\n\tvar width = options.width||595.296, height = options.height || 841.896;// default A4 size\r\n\r\n\tif(options.orientation && options.orientation ===\"landscape\")\r\n\t\theight = [width, width = height][0];\r\n\r\n\treturn new pdfjs.Document({\r\n\t\tpadding: 40,\r\n\t\tfont: options._export_font,\r\n\t\tthreshold:256,\r\n\t\twidth:width,\r\n\t\theight:height\r\n\t});\r\n}\r\n\r\nfunction addPDFTable(view, doc){\r\n\tconst scheme = view.scheme;\r\n\tconst data = view.exportData;\r\n\tconst options = view.viewOptions;\r\n\tconst styles = view.styles;\r\n\r\n\toptions.header = (isUndefined(options.header) || options.header === true) ? {} : options.header;\r\n\toptions.footer = (isUndefined(options.footer) || options.footer === true) ? {} : options.footer;\r\n\toptions.table = options.table || {};\r\n\r\n\t//render table\r\n\tvar h_count = options.header === false ? 0: scheme[0].header.length;\r\n\tvar f_count = (options.footer === false || !scheme[0].footer) ? 0: scheme[0].footer.length;\r\n\r\n\tvar colWidths = [];\r\n\tfor(let i = 0; i<scheme.length; i++)\r\n\t\tcolWidths[i] = scheme[i].width;\r\n\r\n\tvar tableOps = extend(options.table, {\r\n\t\tborderWidth: 1,height:20, lineHeight:1.1,\r\n\t\tborderColor: 0xEEEEEE, backgroundColor: 0xFFFFFF, color:0x666666,\r\n\t\ttextAlign:\"left\", paddingRight:10, paddingLeft:10,\r\n\t\theaderRows:h_count, widths: colWidths.length?colWidths:[\"100%\"]\r\n\t});\r\n\r\n\tvar table = doc.table(tableOps);\r\n\r\n\t//render table header\r\n\tif(h_count){\r\n\t\tvar headerOps = extend(options.header, {\r\n\t\t\tborderRightColor:0xB0CEE3, borderBottomColor:0xB0CEE3,\r\n\t\t\tcolor:0x4A4A4A, backgroundColor:0xD2E3EF,\r\n\t\t\theight:27, lineHeight:1.2\r\n\t\t});\r\n\r\n\t\tfor(let i = 0; i<h_count; i++){\r\n\t\t\tvar header = table.tr(headerOps);\r\n\t\t\tfor(var s=0; s<scheme.length; s++){\r\n\t\t\t\tconst options = styles ? getStyles(i, s, styles) : {};\r\n\t\t\t\theader.td(scheme[s].header[i].toString(), options);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//render table data\r\n\tfor(let r=0; r<data.length;r++){\r\n\t\tlet row = table.tr({});\r\n\t\tfor(let c=0; c< data[r].length; c++){\r\n\t\t\tconst options = styles ? getStyles(r+h_count, c, styles) : {};\r\n\t\t\trow.td(data[r][c], options);\r\n\t\t}\r\n\t}\r\n\r\n\t//render table footer\r\n\tif(f_count){\r\n\t\tlet footerOps = extend(options.footer, {\r\n\t\t\tborderRightColor:0xEEEEEE, borderBottomColor:0xEEEEEE,\r\n\t\t\tbackgroundColor: 0xFAFAFA, color:0x666666,\r\n\t\t\theight:27, lineHeight:1.2\r\n\t\t});\r\n\r\n\t\tfor(let i = 0; i<f_count; i++){\r\n\t\t\tconst beforeCount = h_count + data.length;\r\n\t\t\tlet footer = table.tr(footerOps);\r\n\t\t\tfor(let s=0; s<scheme.length; s++){\r\n\t\t\t\tconst options = styles ? getStyles(i+beforeCount, s, styles) : {};\r\n\t\t\t\tfooter.td(scheme[s].footer[i].toString(), options);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction addPDFHeader(doc, options){\r\n\t//doc footer\r\n\tif(options.docFooter !== false){\r\n\t\tlet ft = doc.footer();\r\n\t\tft.text({\r\n\t\t\tcolor: 0x666666, textAlign:\"center\"\r\n\t\t}).append((i18n.dataExport.page||\"Page\")).pageNumber().append(\"  \"+(i18n.dataExport.of || \"of\")+\"  \").pageCount();\r\n\t}\r\n\r\n\tvar horder = { text:0, image:1};\r\n\r\n\t//doc header, configurable\r\n\tif(options.docHeader){\r\n\t\tif(typeof options.docHeader == \"string\") options.docHeader = {text:options.docHeader};\r\n\t\textend(options.docHeader, {\r\n\t\t\tcolor: 0x666666, textAlign:\"right\", order:0\r\n\t\t});\r\n\t\thorder.text = options.docHeader.order;\r\n\t}\r\n\r\n\tif (options.docHeaderImage){\r\n\t\tif(typeof options.docHeaderImage == \"string\") options.docHeaderImage = {url:options.docHeaderImage};\r\n\t\textend(options.docHeaderImage, {\r\n\t\t\talign:\"right\", order:1\r\n\t\t});\r\n\t\thorder.image = options.docHeaderImage.order;\r\n\t}\r\n\r\n\tif(options.docHeader && horder.image > horder.text)\r\n\t\tdoc.header({paddingBottom:10}).text(options.docHeader.text, options.docHeader);\r\n\r\n\tif (options.docHeaderImage){\r\n\t\tconst defer = promise.defer();\r\n\t\tpdfjs.load(options.docHeaderImage.url, function(err, buffer){\r\n\t\t\tif (!err){\r\n\t\t\t\tvar img = new pdfjs.Image(buffer);\r\n\t\t\t\tdoc.header({paddingBottom:10}).image(img, options.docHeaderImage);\r\n\r\n\t\t\t\tif(options.docHeader && horder.image < horder.text)\r\n\t\t\t\t\tdoc.header({paddingBottom:10}).text(options.docHeader.text, options.docHeader);\r\n\t\t\t}\r\n\t\t\t//render pdf and show in browser\r\n\t\t\tdefer.resolve(doc.render());\r\n\t\t});\r\n\t\treturn defer;\r\n\t}\r\n\telse\r\n\t\treturn promise.resolve(doc.render());\r\n}\r\n\r\nfunction cloneNodeWithStyles(node){\r\n\tconst clone = node.cloneNode(false);\r\n\r\n\tif(node.tagName){\r\n\t\tconst styles = window.getComputedStyle(node);\r\n\t\tclone.style.cssText = styles.cssText;\r\n\t}\r\n\r\n\tfor (let i = 0; i < node.childNodes.length; i++)\r\n\t\tclone.appendChild(cloneNodeWithStyles(node.childNodes[i]));\r\n\r\n\treturn clone;\r\n}","import {errorMessage, getExportScheme, getExportData, getStyles} from \"./common\";\r\n\r\nimport promise from \"../../thirdparty/promiz\";\r\nimport require from \"../../load/require\";\r\nimport env from \"../../webix/env\";\r\n\r\nimport {download} from \"../../webix/html\";\r\nimport {extend, isArray} from \"../../webix/helpers\";\r\nimport {$$} from \"../../ui/core\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\nexport const toExcel = function(id, options){\r\n\toptions = options || {};\r\n\toptions.export_mode = \"excel\";\r\n\r\n\tid = isArray(id)?id:[id];\r\n\tvar views = [];\r\n\r\n\tfor(var i = 0; i<id.length; i++){\r\n\t\tif(!id[i].id) id[i]  = { id:id[i] }; \r\n\t\tvar view = $$(id[i].id);\r\n\t\tconst viewOptions = extend(id[i].options || {}, options);\r\n\t\tif (view && view.$exportView)\r\n\t\t\tview = view.$exportView(viewOptions);\r\n\r\n\t\tassert(view, errorMessage);\r\n\r\n\t\t//$exportView returns array\r\n\t\tif(isArray(view))\r\n\t\t\tviews = views.concat(view);\r\n\t\telse if(view.data && view.data.pull){\r\n\t\t\t//spreadsheet and excelviewer require plain data output first\r\n\t\t\tvar scheme = getExportScheme(view, viewOptions);\r\n\t\t\tviews.push({\r\n\t\t\t\tscheme : scheme,\r\n\t\t\t\texportData:getExportData(view, viewOptions, scheme),\r\n\t\t\t\tspans:(viewOptions.spans ? getSpans(view, viewOptions) : []),\r\n\t\t\t\tviewOptions: viewOptions\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tif(options.dataOnly) return views;\r\n\r\n\tvar defer = promise.defer(); \r\n\r\n\treturn require(env.cdn + \"/extras/xlsx.core.styles.min.js\").then(function(){\r\n\t\tif(!views.length) return defer.reject(errorMessage);\r\n\r\n\t\tvar wb = { SheetNames:[], Sheets:{}, Workbook:{ WBProps :{}, Names:[] }};\r\n\r\n\t\tfor(var i = 0; i<views.length; i++){\r\n\t\t\tconst viewOptions = views[i].viewOptions;\r\n\t\t\tconst scheme = views[i].scheme;\r\n\t\t\tconst result = views[i].exportData;\r\n\t\t\tconst spans  = views[i].spans;\r\n\t\t\tconst ranges =  views[i].ranges || [];\r\n\t\t\tconst styles = views[i].styles || [];\r\n\t\t\tconst data   = getExcelData(result, scheme, spans, styles, viewOptions);\r\n\t\t\tlet sname  = (viewOptions.name || \"Data\"+(i+1)).replace(/[*?:[\\]\\\\/]/g,\"\").replace(/&/g, \"&amp;\").substring(0, 31);\r\n\r\n\t\t\t//avoid name duplication\r\n\t\t\tlet k = i;\r\n\t\t\twhile(wb.SheetNames.indexOf(sname) != -1)\r\n\t\t\t\tsname = \"Data\"+(++k);\r\n\r\n\t\t\twb.SheetNames.push(sname);\r\n\t\t\twb.Sheets[sname] = data;\r\n\t\t\twb.Workbook.Names = wb.Workbook.Names.concat(ranges);\r\n\t\t}\r\n\r\n\t\t/* global XLSX */\r\n\t\tconst xls = XLSX.write(wb, {bookType:\"xlsx\", bookSST:false, type: \"binary\"});\r\n\t\tconst filename =  (options.filename || \"Data\")+\".xlsx\";\r\n\r\n\t\tconst blob = new Blob([str2array(xls)], { type: \"application/xlsx\" });\r\n\t\tif(options.download !== false)\r\n\t\t\tdownload(blob, filename);\r\n\t\tdefer.resolve(blob);\r\n\t\treturn defer;\r\n\t});\r\n};\r\n\r\nfunction str2array(s) {\r\n\tvar buf = new ArrayBuffer(s.length);\r\n\tvar view = new Uint8Array(buf);\r\n\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\treturn buf;\r\n}\r\n\r\nconst types = { number:\"n\", date:\"n\", string:\"s\", boolean:\"b\"};\r\nconst table = \"_table\";\r\nfunction getExcelData(data, scheme, spans, styles, options) {\r\n\tconst ws = {};\r\n\tconst range = {s: {c:10000000, r:10000000}, e: {c:0, r:0 }};\r\n\tfor(let R = 0; R != data.length; ++R) {\r\n\t\tfor(let C = 0; C != data[R].length; ++C) {\r\n\t\t\tif(range.s.r > R) range.s.r = R;\r\n\t\t\tif(range.s.c > C) range.s.c = C;\r\n\t\t\tif(range.e.r < R) range.e.r = R;\r\n\t\t\tif(range.e.c < C) range.e.c = C;\r\n\r\n\t\t\tconst cell = {v: data[R][C]};\r\n\t\t\tif(cell.v === null) continue;\r\n\t\t\tconst cell_ref = XLSX.utils.encode_cell({c:C,r:R});\r\n\r\n\t\t\tconst stringValue = cell.v.toString();\r\n\t\t\tconst isFormula = (stringValue.charAt(0) === \"=\");\r\n\r\n\t\t\tif(styles){\r\n\t\t\t\tconst cellStyle = getStyles(R, C, styles);\r\n\t\t\t\tif(cellStyle.format){\r\n\t\t\t\t\tcell.z = cellStyle.format;\r\n\t\t\t\t\tdelete cellStyle.format;\r\n\t\t\t\t}\r\n\t\t\t\tif(cellStyle.type){\r\n\t\t\t\t\tcell.t = types[cellStyle.type];\r\n\t\t\t\t\tdelete cellStyle.type;\r\n\t\t\t\t}\r\n\t\t\t\tcell.s = cellStyle;\r\n\t\t\t}\r\n\r\n\t\t\t// set type based on column's config\r\n\t\t\t// skip headers and formula based cells\r\n\t\t\tconst header = (options.docHeader?2:0)+scheme[0].header.length;\r\n\t\t\tif(R>=header && !isFormula){\r\n\t\t\t\tconst column = scheme[C];\r\n\t\t\t\tif(column.type && !cell.t) cell.t = (types[column.type] || \"\");\r\n\t\t\t\tif(column.format && !cell.z) cell.z = column.format;\r\n\t\t\t}\r\n\r\n\t\t\t// set type based on cell's value\r\n\t\t\tif(cell.v instanceof Date){\r\n\t\t\t\tcell.t = cell.t || \"n\";\r\n\t\t\t\tcell.z = cell.z || XLSX.SSF[table][14];\r\n\t\t\t\tcell.v = excelDate(cell.v);\r\n\t\t\t}\r\n\t\t\telse if(isFormula){\r\n\t\t\t\tcell.t = cell.t || \"n\";\r\n\t\t\t\tcell.f = cell.v.substring(1);\r\n\t\t\t\tdelete cell.v;\r\n\t\t\t}\r\n\t\t\telse if(!cell.t){\r\n\t\t\t\tif(typeof cell.v === \"boolean\")\r\n\t\t\t\t\tcell.t = \"b\";\r\n\t\t\t\telse if(typeof cell.v === \"number\" || parseFloat(cell.v) == cell.v){\r\n\t\t\t\t\tcell.v = cell.v*1;\r\n\t\t\t\t\tcell.t = \"n\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// convert any other object to a string\r\n\t\t\t\t\tcell.v = stringValue;\r\n\t\t\t\t\tcell.t = \"s\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tws[cell_ref] = cell;\r\n\t\t}\r\n\t}\r\n\tif(range.s.c < 10000000) ws[\"!ref\"] = XLSX.utils.encode_range(range);\r\n\r\n\tws[\"!rows\"] = getRowHeights(scheme.heights);\r\n\tws[\"!cols\"] = getColumnsWidths(scheme);\r\n\tif(spans.length)\r\n\t\tws[\"!merges\"] = spans;\r\n\r\n\treturn ws;\r\n}\r\n\r\nfunction getRowHeights(heights){\r\n\tfor(var i in heights)\r\n\t\theights[i] = {hpx:heights[i], hpt:heights[i]*0.75};\r\n\treturn heights;\r\n}\r\n\r\nfunction getSpans(view, options){\r\n\tvar isTable = view.getColumnConfig;\r\n\tvar pull = view._spans_pull;\r\n\tvar spans = [];\r\n\r\n\tif(isTable){\r\n\t\tif(options.header!==false)\r\n\t\t\tspans = getHeaderSpans(view, options, \"header\", spans); \r\n\r\n\t\tif(pull){\r\n\t\t\tvar xc = options.xCorrection || 0;\r\n\t\t\tvar yc = options.yCorrection || 0;\r\n\t\t\tfor(var row in pull){\r\n\t\t\t\t//{ s:{c:1, r:0}, e:{c:3, r:0} }\r\n\t\t\t\tvar cols = pull[row];\r\n\t\t\t\tfor(var col in cols){\r\n\t\t\t\t\tvar sc = view.getColumnIndex(col) - xc;\r\n\t\t\t\t\tvar sr = view.getIndexById(row) - yc;\r\n\t\t\t\t\tif(sc<0||sr<0) //hidden cols/rows\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tvar ec = sc+cols[col][0]-1;\r\n\t\t\t\t\tvar er = sr+(cols[col][1]-1);\r\n\r\n\t\t\t\t\tspans.push({ s:{c:sc, r:sr}, e:{c:ec, r:er} });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.footer!==false)\r\n\t\t\tspans = getHeaderSpans(view, options, \"footer\", spans);\r\n\t}\r\n\r\n\treturn spans;\r\n}\r\n\r\nfunction getHeaderSpans(view, options, group, spans){\r\n\tvar columns = view.config.columns;\r\n\tvar delta = (options.docHeader?2:0)+(group == \"header\" ? 0 :((options.header!==false?view._headers.length:0)+view.count()));\r\n\r\n\tfor(var i=0; i<columns.length; i++){\r\n\t\tvar header = columns[i][group];\r\n\t\tfor(var h = 0; h<header.length; h++){\r\n\t\t\tif(header[h] && (header[h].colspan || header[h].rowspan)){\r\n\t\t\t\tspans.push({\r\n\t\t\t\t\ts:{ c:i, r:h+delta},\r\n\t\t\t\t\te:{ c:i+(header[h].colspan||1)-1, r:h+(header[h].rowspan ||1)-1+delta }\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn spans;\r\n}\r\n\r\nfunction excelDate(date) {\r\n\tconst returnDateTime = 25569 + ((date.getTime() - (date.getTimezoneOffset() * 60 * 1000)) / (1000 * 60 * 60 * 24));\r\n\treturn returnDateTime.toString().substr(0,20);\r\n}\r\n\r\nfunction getColumnsWidths(scheme){\r\n\tvar wscols = [];\r\n\tfor (var i = 0; i < scheme.length; i++)\r\n\t\twscols.push({ wch: scheme[i].width });\r\n\r\n\treturn wscols;\r\n}","import state from \"../core/state\";\r\nimport i18n from \"../webix/i18n\";\r\nimport rules from \"../webix/rules\";\r\nimport template from \"../webix/template\";\r\n\r\nimport {toNode, isUndefined} from \"../webix/helpers\";\r\nimport { event } from \"../webix/htmlevents\";\r\nimport {define} from \"../services\";\r\nimport Promise from \"../thirdparty/promiz\";\r\nimport {_uid} from \"../ui/helpers\";\r\nimport {create, addCss, removeCss, preventEvent} from \"../webix/html\";\r\n\r\nfunction callback(config, result){\r\n\t// prompt\r\n\tif (config.type.indexOf(\"prompt\") != -1){\r\n\t\tif (result === false){\r\n\t\t\tconfig._promise.reject();\r\n\t\t} else {\r\n\t\t\tconst inputBox = config._box.querySelector(\".webix_popup_input\");\r\n\t\t\tconst input = inputBox.querySelector(\"input\");\r\n\t\t\tif (config.input.required && !input.value){\r\n\t\t\t\tconfig.input.invalid = true;\r\n\t\t\t\taddCss(inputBox, \"webix_popup_invalid\");\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tresult = input.value || \"\";\r\n\t\t\t\tconfig._promise.resolve(result);\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\r\n\r\n\t(config.type.indexOf(\"confirm\") != -1 && result === false) ? config._promise.reject() : config._promise.resolve(result);\r\n\r\n\tconst usercall = config.callback;\r\n\tif (usercall)\r\n\t\tusercall(result, config.details);\r\n\r\n\tmodalbox.hide(config.id);\r\n}\r\nfunction modal_key(e){\r\n\tvar count = modalbox.order.length;\r\n\tif (count > 0 && message.keyboard){\r\n\t\te = e||window.event;\r\n\t\tconst code = e.which||e.keyCode;\r\n\t\tconst lastModalbox = modalbox.pull[modalbox.order[count-1]];\r\n\t\tconst hasInput = lastModalbox.type.indexOf(\"prompt\") != -1;\r\n\r\n\t\tif (code == 13 || (code == 32 && !hasInput))\r\n\t\t\tcallback(lastModalbox, true);\r\n\t\tif (code == 27)\r\n\t\t\tcallback(lastModalbox, false);\r\n\r\n\t\tif (!hasInput)\r\n\t\t\tpreventEvent(e);\r\n\t\treturn !(e.cancelBubble = true);\r\n\t}\r\n}\r\n\r\nevent(document, \"keydown\", modal_key, { capture: true });\r\n\t\r\nfunction modality(mode, container){\r\n\tvar node = container || document.body;\r\n\tvar cover;\r\n\tif(isUndefined(node.modality)){\r\n\t\tcover = create(\"DIV\", {\r\n\t\t\t\"class\":\"webix_modal_cover\",\r\n\t\t\tstyle:\"position:\"+(container ? \"absolute\" : \"fixed\")+\";\"\r\n\t\t});\r\n\t\tcover.onkeydown = modal_key;\r\n\r\n\t\tif(container){\r\n\t\t\tvar position = window.getComputedStyle(container).position;\r\n\t\t\tif(position != \"fixed\" && position != \"absolute\" && position != \"sticky\" && position != \"relative\")\r\n\t\t\t\tnode.style.position = \"relative\";\r\n\t\t}\r\n\t\tnode.appendChild(cover);\r\n\t\tnode.modality = 1;\r\n\t}\r\n\telse\r\n\t\tmode ? node.modality ++ : node.modality --;\r\n\r\n\t//trigger visibility only if necessary\r\n\tif((mode && node.modality === 1) || node.modality === 0){\r\n\t\tif(cover)\r\n\t\t\tcover.style.display = \"inline-block\";\r\n\t\telse{\r\n\t\t\tcover = node.querySelectorAll(\".webix_modal_cover\");\r\n\t\t\tfor(var i = 0; i < cover.length; i++){\r\n\t\t\t\tif(cover[i].parentNode == node){\r\n\t\t\t\t\tcover[i].style.display = node.modality == 1 ? \"inline-block\" : \"none\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\r\n}\r\n\r\nfunction button(text, result, className){\r\n\treturn \"<div role='button' tabindex='0' aria-label='\"+text+\"' class='webix_popup_button\"+(className?(\" \"+className):\"\")+\"' result='\"+result+\"' ><div>\"+text+\"</div></div>\";\r\n}\r\n\r\nfunction input(config){\r\n\treturn \"<div tabindex='0' class='webix_popup_input webix_el_text\"+(config.required?\" webix_required\":\"\")+\"'><input value='\"+template.escape(config.value || \"\")+\"' placeholder='\"+template.escape(config.placeholder || \"\")+\"'></input></div>\";\r\n}\r\n\r\nfunction info(text){\r\n\tif (!t.area){\r\n\t\tt.area = document.createElement(\"DIV\");\r\n\t\tt.area.className = \"webix_message_area\";\r\n\t\tt.area.style[t.position]=\"5px\";\r\n\t\t\r\n\t\tdocument.body.appendChild(t.area);\r\n\t}\r\n\tt.area.setAttribute(\"role\", \"alert\");\r\n\tt.area.setAttribute(\"aria-atomic\", true);\r\n\tt.hide(text.id);\r\n\tvar message = document.createElement(\"DIV\");\r\n\tmessage.innerHTML = \"<div>\"+text.text+\"</div>\";\r\n\tmessage.className = \"webix_message webix_\" + text.type;\r\n\tmessage.onclick = function(){\r\n\t\tif (text) t.hide(text.id);\r\n\t\ttext = null;\r\n\t};\r\n\r\n\tif (state.$testmode)\r\n\t\tmessage.className += \" webix_no_transition\";\r\n\r\n\tif (t.position == \"bottom\" && t.area.firstChild)\r\n\t\tt.area.insertBefore(message,t.area.firstChild);\r\n\telse\r\n\t\tt.area.appendChild(message);\r\n\t\r\n\tif (text.expire > 0)\r\n\t\tt.timers[text.id]=window.setTimeout(function(){\r\n\t\t\tt.hide(text.id);\r\n\t\t}, text.expire);\r\n\r\n\t//styling for animation\r\n\tmessage.style.height = message.offsetHeight-2+\"px\";\r\n\r\n\tt.pull[text.id] = message;\r\n\tmessage = null;\r\n\r\n\treturn text.id;\r\n}\r\nfunction _boxStructure(config, ok, cancel, hasInput){\r\n\tvar box = document.createElement(\"DIV\");\r\n\tvar css = config.css ? \" \"+config.css : \"\";\r\n\tbox.className = \"webix_modal_box webix_\"+config.type+css;\r\n\tbox.setAttribute(\"webixbox\", 1);\r\n\tbox.setAttribute(\"role\", \"alertdialog\");\r\n\tbox.setAttribute(\"aria-label\", config.title || \"\");\r\n\tbox.setAttribute(\"tabindex\", \"0\");\r\n\r\n\tvar inner = \"\";\r\n\tif (config.width)\r\n\t\tbox.style.width = config.width+(rules.isNumber(config.width)?\"px\":\"\");\r\n\tif (config.height)\r\n\t\tbox.style.height = config.height+(rules.isNumber(config.height)?\"px\":\"\");\r\n\tif (config.title)\r\n\t\tinner += \"<div class=\\\"webix_popup_title\\\">\"+config.title+\"</div>\";\r\n\tinner += \"<div class=\\\"webix_popup_text\"+(hasInput?\" webix_popup_label\":\"\")+\"\\\"><span>\"+(config.content?\"\":(config.text || \"\"))+\"</span></div>\";\r\n\tinner += \"<div  class=\\\"webix_popup_controls\\\">\";\r\n\tif (hasInput)\r\n\t\tinner += input(config.input);\r\n\tif (cancel)\r\n\t\tinner += button(config.cancel || i18n.message.cancel, false);\r\n\tif (ok)\r\n\t\tinner += button(config.ok || i18n.message.ok, true,\"confirm\");\r\n\tif (config.buttons && !ok && !cancel){\r\n\t\tfor (var i=0; i<config.buttons.length; i++)\r\n\t\t\tinner += button(config.buttons[i],i);\r\n\t}\r\n\tinner += \"</div>\";\r\n\tbox.innerHTML = inner;\r\n\r\n\tif (config.content){\r\n\t\tvar node = config.content;\r\n\t\tif (typeof node == \"string\") \r\n\t\t\tnode = document.getElementById(node);\r\n\t\tif (node.style.display == \"none\")\r\n\t\t\tnode.style.display = \"\";\r\n\t\tbox.childNodes[config.title?1:0].appendChild(node);\r\n\t}\r\n\r\n\tif (config.type.indexOf(\"prompt\") != -1){\r\n\t\tconst inputBox = box.querySelector(\".webix_popup_input\");\r\n\t\tconst input = inputBox.querySelector(\"input\");\r\n\t\tinput.oninput = function(){\r\n\t\t\tif (config.input.invalid){\r\n\t\t\t\tremoveCss(inputBox, \"webix_popup_invalid\");\r\n\t\t\t\tconfig.input.invalid = false;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tbox.onclick = function(e){\r\n\t\te = e ||window.event;\r\n\t\tvar source = e.target;\r\n\t\tif (!source.className) source = source.parentNode;\r\n\t\tif (source.className.indexOf(\"webix_popup_button\")!=-1){\r\n\t\t\tlet result = source.getAttribute(\"result\");\r\n\t\t\tresult = (result == \"true\")||(result == \"false\"?false:result);\r\n\t\t\tcallback(config, result);\r\n\t\t}\r\n\t\te.cancelBubble = true;\r\n\t};\r\n\tconfig._box = box;\r\n\treturn box;\r\n}\r\n\r\nmodalbox.pull = {};\r\nmodalbox.order = [];\r\n\r\nfunction _createBox(config, ok, cancel, hasInput){\r\n\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel, hasInput);\r\n\r\n\tvar containerWidth = config.container ? config.container.offsetWidth : (window.innerWidth||document.documentElement.offsetWidth);\r\n\tvar containerHeight = config.container ? config.container.offsetHeight : (window.innerHeight||document.documentElement.offsetHeight);\r\n\r\n\tif(config.container)\r\n\t\tbox.style.position = \"absolute\";\r\n\r\n\ttoNode((config.container || document.body).appendChild(box));\r\n\tmodality(true, config.container);\r\n\r\n\tvar x = config.left||Math.abs(Math.floor((containerWidth - box.offsetWidth)/2));\r\n\tvar y = config.top||Math.abs(Math.floor((containerHeight - box.offsetHeight)/2));\r\n\tif (config.position == \"top\")\r\n\t\tbox.style.top = \"-3px\";\r\n\telse\r\n\t\tbox.style.top = y+\"px\";\r\n\tbox.style.left = x+\"px\";\r\n\t//necessary for IE only\r\n\tbox.onkeydown = modal_key;\r\n\r\n\tbox.focus();\r\n\r\n\tif (!config.id)\r\n\t\tconfig.id = _uid(\"modalbox\");\r\n\telse if(modalbox.pull[config.id]){\r\n\t\tmodalbox.hide(config.id);\r\n\t}\r\n\r\n\tmodalbox.order.push(config.id);\r\n\tmodalbox.pull[config.id] = config;\r\n\r\n\tconfig._promise = Promise.defer();\r\n\treturn config._promise;\r\n}\r\n\r\nfunction alertPopup(config){\r\n\treturn _createBox(config, true);\r\n}\r\nfunction confirmPopup(config){\r\n\treturn _createBox(config, true, true);\r\n}\r\nfunction boxPopup(config){\r\n\treturn _createBox(config);\r\n}\r\nfunction promptPopup(config){\r\n\treturn _createBox(config, true, true, true);\r\n}\r\nfunction box_params(text, type, callback){\r\n\tif (typeof text != \"object\"){\r\n\t\tif (typeof type == \"function\"){\r\n\t\t\tcallback = type;\r\n\t\t\ttype = \"\";\r\n\t\t}\r\n\t\ttext = {text:text, type:type, callback:callback };\r\n\t}\r\n\treturn text;\r\n}\r\nfunction params(text, type, expire, id){\r\n\tif (typeof text != \"object\")\r\n\t\ttext = {text:text, type:type, expire:expire, id:id};\r\n\ttext.id = text.id||_uid(\"message\");\r\n\ttext.expire = text.expire||t.expire;\r\n\treturn text;\r\n}\r\nexport function alert(){\r\n\tvar text = box_params.apply(this, arguments);\r\n\ttext.type = text.type || \"alert\";\r\n\treturn alertPopup(text);\r\n}\r\nexport function confirm(){\r\n\tvar text = box_params.apply(this, arguments);\r\n\ttext.type = text.type || \"confirm\";\r\n\treturn confirmPopup(text);\r\n}\r\n\r\nexport function modalbox(){\r\n\tvar text = box_params.apply(this, arguments);\r\n\ttext.type = text.type || \"alert\";\r\n\treturn boxPopup(text);\r\n}\r\n\r\nexport function prompt(){\r\n\tvar text = box_params.apply(this, arguments);\r\n\ttext.type = text.type || \"prompt\";\r\n\ttext.input = text.input || {};\r\n\treturn promptPopup(text);\r\n}\r\n\r\nmodalbox.hide = function(id){\r\n\tif(id && modalbox.pull[id]){\r\n\t\tvar node = modalbox.pull[id]._box;\r\n\t\tif(node){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodalbox.order.splice(modalbox.order.indexOf(id), 1);\r\n\t\t\tmodality(false, modalbox.pull[id].container);\r\n\t\t\tdelete modalbox.pull[id];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodalbox.hideAll = function(){\r\n\tfor (var id in modalbox.pull){\r\n\t\tthis.hide(id);\r\n\t}\r\n};\r\n\r\nexport function message(text, type, expire, id){ //eslint-disable-line\r\n\ttext = params.apply(this, arguments);\r\n\ttext.type = text.type||\"info\";\r\n\r\n\tvar subtype = text.type.split(\"-\")[0];\r\n\tswitch (subtype){\r\n\t\tcase \"alert\":\r\n\t\t\treturn alertPopup(text);\r\n\t\tcase \"confirm\":\r\n\t\t\treturn confirmPopup(text);\r\n\t\tcase \"modalbox\":\r\n\t\t\treturn boxPopup(text);\r\n\t\tcase \"prompt\":\r\n\t\t\treturn promptPopup(text);\r\n\t\tdefault:\r\n\t\t\treturn info(text);\r\n\t}\r\n}\r\n\r\nvar t = message;\r\nt.expire = 4000;\r\nt.keyboard = true;\r\nt.position = \"top\";\r\nt.pull = {};\r\nt.timers = {};\r\n\r\nt.hideAll = function(){\r\n\tfor (var key in t.pull)\r\n\t\tt.hide(key);\r\n};\r\nt.hide = function(id){\r\n\tvar obj = t.pull[id];\r\n\tif (obj && obj.parentNode){\r\n\t\twindow.setTimeout(function(){\r\n\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\tobj = null;\r\n\t\t},2000);\r\n\t\t//styling for animation\r\n\t\tobj.style.height = 0;\r\n\t\tobj.className+=\" hidden\";\r\n\t\tt.area.removeAttribute(\"role\");\r\n\t\t\r\n\t\tif(t.timers[id])\r\n\t\t\twindow.clearTimeout(t.timers[id]);\r\n\t\tdelete t.pull[id];\r\n\t}\r\n};\r\n\r\n//override circualr dependencies\r\ndefine(\"message\", message);\r\nexport default modalbox;","import env from \"./env\";\r\n// Only IE8 doesn't support defineProperty\r\nif (env.isIE8){\r\n\t// Not really a polyfill, silence the esModule flag\r\n\tObject.defineProperty = function(obj, key, data){\r\n\t\tobj[key] = data.value;\r\n\t};\r\n}","const en = {\r\n\tgroupDelimiter:\",\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\".\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%m/%d/%Y\",\r\n\ttimeFormat:\"%h:%i %A\",\r\n\tlongDateFormat:\"%d %F %Y\",\r\n\tfullDateFormat:\"%m/%d/%Y %h:%i %A\",\r\n\tam:[\"am\",\"AM\"],\r\n\tpm:[\"pm\",\"PM\"],\r\n\r\n\tprice:\"${obj}\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\",\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\".\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tfileSize: [\"b\",\"Kb\",\"Mb\",\"Gb\",\"Tb\",\"Pb\",\"Eb\"],\r\n\t\r\n\tcalendar: {\r\n\t\tmonthFull:[\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonthShort:[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tdayFull:[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tdayShort:[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\r\n\t\thours: \"Hours\",\r\n\t\tminutes: \"Minutes\",\r\n\t\tdone:\"Done\",\r\n\t\tclear: \"Clear\",\r\n\t\ttoday: \"Today\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Page\",\r\n\t\tof:\"of\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"of\",\r\n\t\tautomaticZoom:\"Automatic Zoom\",\r\n\t\tactualSize:\"Actual Size\",\r\n\t\tpageFit:\"Page Fit\",\r\n\t\tpageWidth:\"Page Width\",\r\n\t\tpageHeight:\"Page Height\",\r\n\t\tenterPassword:\"Enter password\",\r\n\t\tpasswordError:\"Wrong password\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Calendar\",\r\n\t\tincreaseValue:\"Increase value\",\r\n\t\tdecreaseValue:\"Decrease value\",\r\n\t\tnavMonth:[\"Previous month\", \"Next month\"],\r\n\t\tnavYear:[\"Previous year\", \"Next year\"],\r\n\t\tnavDecade:[\"Previous decade\", \"Next decade\"],\r\n\t\tdateFormat:\"%d %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Hours: %h %A\",\r\n\t\tminuteFormat:\"Minutes: %i\",\r\n\t\tremoveItem:\"Remove item\",\r\n\t\tpages:[\"First page\", \"Previous page\", \"Next page\", \"Last page\"],\r\n\t\tpage:\"Page\",\r\n\t\theadermenu:\"Header menu\",\r\n\t\topenGroup:\"Open column group\",\r\n\t\tcloseGroup:\"Close column group\",\r\n\t\tcloseTab:\"Close tab\",\r\n\t\tshowTabs:\"Show more tabs\",\r\n\t\tresetTreeMap:\"Reset tree map\",\r\n\t\tnavTreeMap:\"Level up\",\r\n\t\tnextTab:\"Next tab\",\r\n\t\tprevTab:\"Previous tab\",\r\n\t\tmultitextSection:\"Add section\",\r\n\t\tmultitextextraSection:\"Remove section\",\r\n\t\tshowChart:\"Show chart\",\r\n\t\thideChart:\"Hide chart\",\r\n\t\tresizeChart:\"Resize chart\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Underline\",\r\n\t\tbold: \"Bold\",\r\n\t\titalic: \"Italic\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Select\",\r\n\t\tselectAll:\"Select all\",\r\n\t\tunselectAll:\"Unselect all\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Cancel\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Send\",\r\n\t\tconfirmMessage: \"The comment will be removed. Are you sure?\",\r\n\t\tedit: \"Edit\",\r\n\t\tremove: \"Remove\",\r\n\t\tplaceholder: \"Type here..\",\r\n\t\tmoreComments:\"More comments\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"less\",\r\n\t\tlessOrEqual: \"less or equal\",\r\n\t\tgreater: \"greater\",\r\n\t\tgreaterOrEqual: \"greater or equal\",\r\n\t\tcontains: \"contains\",\r\n\t\tnotContains: \"not contains\",\r\n\t\tequal: \"equal\",\r\n\t\tnotEqual: \"not equal\",\r\n\t\tbeginsWith: \"begins with\",\r\n\t\tnotBeginsWith: \"not begins with\",\r\n\t\tendsWith: \"ends with\",\r\n\t\tnotEndsWith: \"not ends with\",\r\n\t\tbetween: \"between\",\r\n\t\tnotBetween: \"not between\"\r\n\t}\r\n};\r\n\r\nexport default en;","import env from \"../webix/env\";\r\nimport i18n from \"../webix/i18n\";\r\n\r\n\r\nconst wDate = {\r\n\tstartOnMonday:false,\r\n\r\n\ttoFixed:function(num, ms){\r\n\t\tif( num<10)\tnum = \"0\"+num;\r\n\t\tif( ms && num <100 ) num = \"0\"+num;\r\n\t\treturn num;\r\n\t},\r\n\tweekStart:function(date){\r\n\t\tdate = this.copy(date);\r\n\r\n\t\tvar shift=date.getDay();\r\n\t\tif (this.startOnMonday){\r\n\t\t\tif (shift===0) shift=6;\r\n\t\t\telse shift--;\r\n\t\t}\r\n\t\treturn this.datePart(this.add(date,-1*shift,\"day\"));\r\n\t},\r\n\tmonthStart:function(date){\r\n\t\tdate = this.copy(date);\r\n\r\n\t\tdate.setDate(1);\r\n\t\treturn this.datePart(date);\r\n\t},\r\n\tyearStart:function(date){\r\n\t\tdate = this.copy(date);\r\n\r\n\t\tdate.setMonth(0);\r\n\t\treturn this.monthStart(date);\r\n\t},\r\n\tdayStart:function(date){\r\n\t\treturn this.datePart(date, true);\r\n\t},\r\n\tdateToStr:function(format,utc){\r\n\t\tif (typeof format == \"function\") return format;\r\n\r\n\t\tif(env.strict){\r\n\t\t\treturn function(date){\r\n\t\t\t\tif (!date)\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tif (!date.getMonth)\r\n\t\t\t\t\tdate = i18n.parseFormatDate(date);\r\n\r\n\t\t\t\tvar str = \"\";\r\n\t\t\t\tvar lastPos = 0;\r\n\t\t\t\tformat.replace(/%[a-zA-Z]/g,function(s,pos){\r\n\t\t\t\t\tstr += format.slice(lastPos,pos);\r\n\t\t\t\t\tvar fn = function(date){\r\n\t\t\t\t\t\tif( s == \"%d\")  return wDate.toFixed(date.getDate());\r\n\t\t\t\t\t\tif( s == \"%m\")  return wDate.toFixed((date.getMonth()+1));\r\n\t\t\t\t\t\tif( s == \"%j\")  return date.getDate();\r\n\t\t\t\t\t\tif( s == \"%n\")  return (date.getMonth()+1);\r\n\t\t\t\t\t\tif( s == \"%y\")  return wDate.toFixed(date.getFullYear()%100);\r\n\t\t\t\t\t\tif( s == \"%Y\")  return date.getFullYear();\r\n\t\t\t\t\t\tif( s == \"%D\")  return i18n.calendar.dayShort[date.getDay()];\r\n\t\t\t\t\t\tif( s == \"%l\")  return i18n.calendar.dayFull[date.getDay()];\r\n\t\t\t\t\t\tif( s == \"%M\")  return i18n.calendar.monthShort[date.getMonth()];\r\n\t\t\t\t\t\tif( s == \"%F\")  return i18n.calendar.monthFull[date.getMonth()];\r\n\t\t\t\t\t\tif( s == \"%h\")  return wDate.toFixed((date.getHours()+11)%12+1);\r\n\t\t\t\t\t\tif( s == \"%g\")  return ((date.getHours()+11)%12+1);\r\n\t\t\t\t\t\tif( s == \"%G\")  return date.getHours();\r\n\t\t\t\t\t\tif( s == \"%H\")  return wDate.toFixed(date.getHours());\r\n\t\t\t\t\t\tif( s == \"%i\")  return wDate.toFixed(date.getMinutes());\r\n\t\t\t\t\t\tif( s == \"%a\")  return (date.getHours()>11?i18n.pm[0]:i18n.am[0]);\r\n\t\t\t\t\t\tif( s == \"%A\")  return (date.getHours()>11?i18n.pm[1]:i18n.am[1]);\r\n\t\t\t\t\t\tif( s == \"%s\")  return wDate.toFixed(date.getSeconds());\r\n\t\t\t\t\t\tif( s == \"%S\")\treturn wDate.toFixed(date.getMilliseconds(), true);\r\n\t\t\t\t\t\tif( s == \"%W\")  return wDate.toFixed(Date.getISOWeek(date));\r\n\t\t\t\t\t\tif( s == \"%c\"){\r\n\t\t\t\t\t\t\tvar str = date.getFullYear();\r\n\t\t\t\t\t\t\tstr += \"-\"+wDate.toFixed((date.getMonth()+1));\r\n\t\t\t\t\t\t\tstr += \"-\"+wDate.toFixed(date.getDate());\r\n\t\t\t\t\t\t\tstr += \"T\";\r\n\t\t\t\t\t\t\tstr += wDate.toFixed(date.getHours());\r\n\t\t\t\t\t\t\tstr += \":\"+wDate.toFixed(date.getMinutes());\r\n\t\t\t\t\t\t\tstr += \":\"+wDate.toFixed(date.getSeconds());\r\n\t\t\t\t\t\t\treturn str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstr += fn(date);\r\n\t\t\t\t\tlastPos = pos + 2;\r\n\t\t\t\t});\r\n\t\t\t\tstr += format.slice(lastPos,format.length);\r\n\t\t\t\treturn str;\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tformat=format.replace(/%[a-zA-Z]/g,function(a){\r\n\t\t\tswitch(a){\r\n\t\t\t\tcase \"%d\": return \"\\\"+wDate.toFixed(date.getDate())+\\\"\";\r\n\t\t\t\tcase \"%m\": return \"\\\"+wDate.toFixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\tcase \"%j\": return \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\tcase \"%n\": return \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\tcase \"%y\": return \"\\\"+wDate.toFixed(date.getFullYear()%100)+\\\"\"; \r\n\t\t\t\tcase \"%Y\": return \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\tcase \"%D\": return \"\\\"+i18n.calendar.dayShort[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%l\": return \"\\\"+i18n.calendar.dayFull[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%M\": return \"\\\"+i18n.calendar.monthShort[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%F\": return \"\\\"+i18n.calendar.monthFull[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%h\": return \"\\\"+wDate.toFixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%g\": return \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%G\": return \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\tcase \"%H\": return \"\\\"+wDate.toFixed(date.getHours())+\\\"\";\r\n\t\t\t\tcase \"%i\": return \"\\\"+wDate.toFixed(date.getMinutes())+\\\"\";\r\n\t\t\t\tcase \"%a\": return \"\\\"+(date.getHours()>11?i18n.pm[0]:i18n.am[0])+\\\"\";\r\n\t\t\t\tcase \"%A\": return \"\\\"+(date.getHours()>11?i18n.pm[1]:i18n.am[1])+\\\"\";\r\n\t\t\t\tcase \"%s\": return \"\\\"+wDate.toFixed(date.getSeconds())+\\\"\";\r\n\t\t\t\tcase \"%S\": return \"\\\"+wDate.toFixed(date.getMilliseconds(), true)+\\\"\";\r\n\t\t\t\tcase \"%W\": return \"\\\"+wDate.toFixed(wDate.getISOWeek(date))+\\\"\";\r\n\t\t\t\tcase \"%c\":\r\n\t\t\t\t\tvar str = \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tstr += \"-\\\"+wDate.toFixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tstr += \"-\\\"+wDate.toFixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tstr += \"T\";\r\n\t\t\t\t\tstr += \"\\\"+wDate.toFixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tstr += \":\\\"+wDate.toFixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tstr += \":\\\"+wDate.toFixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tif(utc === true)\r\n\t\t\t\t\t\tstr += \"Z\";\r\n\t\t\t\t\treturn str;\r\n\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (utc===true) format=format.replace(/date\\.get/g,\"date.getUTC\");\r\n\t\tconst temp = new Function(\"date\", \"i18n\", \"wDate\", \"if (!date) return ''; if (!date.getMonth) date=i18n.parseFormatDate(date);  return \\\"\"+format+\"\\\";\");\r\n\t\treturn function(v){ return temp(v, i18n, wDate); };\r\n\t},\r\n\tstrToDate:function(format,utc){\r\n\t\tif (typeof format == \"function\") return format;\r\n\r\n\t\tvar mask=format.match(/%[a-zA-Z]/g);\r\n\t\tvar splt=\"var temp=date.split(/[\\\\s\\\\./\\\\-\\\\:\\\\,]+/g); if(!temp.join('')){return ''}\";\r\n\t\tvar i,t,s;\r\n\r\n\t\tif(!i18n.calendar.monthShort_hash){\r\n\t\t\ts = i18n.calendar.monthShort;\r\n\t\t\tt = i18n.calendar.monthShort_hash = {};\r\n\t\t\tfor (i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]]=i;\r\n\r\n\t\t\ts = i18n.calendar.monthFull;\r\n\t\t\tt = i18n.calendar.monthFull_hash = {};\r\n\t\t\tfor (i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]]=i;\r\n\t\t}\r\n\r\n\t\tif(env.strict){\r\n\t\t\treturn function(date){\r\n\t\t\t\tif (!date) return \"\";\r\n\t\t\t\tif (typeof date == \"object\") return date;\r\n\t\t\t\tvar temp=date.split(/[\\s./\\-:,]+/g);\r\n\r\n\t\t\t\tif(!temp.join(\"\"))\r\n\t\t\t\t\treturn \"\";\r\n\r\n\t\t\t\tvar set=[0,0,1,0,0,0,0];\r\n\t\t\t\tfor (i=0; i<mask.length; i++){\r\n\t\t\t\t\tvar a = mask[i];\r\n\t\t\t\t\tif( a ==  \"%y\")\r\n\t\t\t\t\t\tset[0]=temp[i]*1+(temp[i]>30?1900:2000);\r\n\t\t\t\t\telse if( a ==  \"%Y\"){\r\n\t\t\t\t\t\tset[0]=(temp[i]||0)*1; if (set[0]<30) set[0]+=2000;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if( a == \"%n\" || a == \"%m\")\r\n\t\t\t\t\t\tset[1]=(temp[i]||1)-1;\r\n\t\t\t\t\telse if( a ==  \"%M\")\r\n\t\t\t\t\t\tset[1]=i18n.calendar.monthShort_hash[temp[i]]||0;\r\n\t\t\t\t\telse if( a ==  \"%F\")\r\n\t\t\t\t\t\tset[1]=i18n.calendar.monthFull_hash[temp[i]]||0;\r\n\t\t\t\t\telse if( a == \"%j\" || a == \"%d\")\r\n\t\t\t\t\t\tset[2]=temp[i]||1;\r\n\t\t\t\t\telse if( a == \"%g\" || a == \"%G\" || a == \"%h\" || a == \"%H\")\r\n\t\t\t\t\t\tset[3]=temp[i]||0;\r\n\t\t\t\t\telse if( a == \"%a\")\r\n\t\t\t\t\t\tset[3]=set[3]%12+((temp[i]||\"\")==i18n.am[0]?0:12);\r\n\t\t\t\t\telse if( a == \"%A\")\r\n\t\t\t\t\t\tset[3]=set[3]%12+((temp[i]||\"\")==i18n.am[1]?0:12);\r\n\t\t\t\t\telse if( a ==  \"%i\")\r\n\t\t\t\t\t\tset[4]=temp[i]||0;\r\n\t\t\t\t\telse if( a ==  \"%s\")\r\n\t\t\t\t\t\tset[5]=temp[i]||0;\r\n\t\t\t\t\telse if( a ==  \"%S\")\r\n\t\t\t\t\t\tset[6]=temp[i]||0;\r\n\t\t\t\t\telse if( a ==  \"%c\"){\r\n\t\t\t\t\t\tvar reg = /(\\d+)-(\\d+)-(\\d+)T(\\d+):(\\d+):(\\d+)(\\+.*|)/g;\r\n\t\t\t\t\t\tvar res = reg.exec(date);\r\n\t\t\t\t\t\tset[0]= (res[1]||0)*1; if (set[0]<30) set[0]+=2000;\r\n\t\t\t\t\t\tset[1]= (res[2]||1)-1;\r\n\t\t\t\t\t\tset[2]= res[3]||1;\r\n\t\t\t\t\t\tset[3]= res[4]||0;\r\n\t\t\t\t\t\tset[4]= res[5]||0;\r\n\t\t\t\t\t\tset[5]= res[6]||0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(utc)\r\n\t\t\t\t\treturn new Date(Date.UTC(set[0],set[1],set[2],set[3],set[4],set[5], set[6]));\r\n\t\t\t\treturn new Date(set[0],set[1],set[2],set[3],set[4],set[5], set[6]);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfor (i=0; i<mask.length; i++){\r\n\t\t\tswitch(mask[i]){\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\": splt+=\"set[2]=temp[\"+i+\"]||1;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\": splt+=\"set[1]=(temp[\"+i+\"]||1)-1;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\": splt+=\"set[0]=temp[\"+i+\"]*1+(temp[\"+i+\"]>30?1900:2000);\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\": \r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tsplt+=\"set[3]=temp[\"+i+\"]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tsplt+=\"set[4]=temp[\"+i+\"]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":  splt+=\"set[0]=(temp[\"+i+\"]||0)*1; if (set[0]<30) set[0]+=2000;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tsplt+= \"set[3]=set[3]%12+(temp[\"+i+\"]==i18n.am[0]?0:12);\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tsplt+= \"set[3]=set[3]%12+(temp[\"+i+\"]==i18n.am[1]?0:12);\";\r\n\t\t\t\t\tbreak;\t\t\t\t\t\r\n\t\t\t\tcase \"%s\":  splt+=\"set[5]=temp[\"+i+\"]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%S\":  splt+=\"set[6]=temp[\"+i+\"]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":  splt+=\"set[1]=i18n.calendar.monthShort_hash[temp[\"+i+\"]]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":  splt+=\"set[1]=i18n.calendar.monthFull_hash[temp[\"+i+\"]]||0;\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%c\":\r\n\t\t\t\t\tsplt+= \"var res = date.split('T');\";\r\n\t\t\t\t\tsplt+= \"if(res[0]){ var d = res[0].split('-');\";\r\n\t\t\t\t\tsplt+= \"set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;\";\r\n\t\t\t\t\tsplt+= \"set[1]= (d[1]||1)-1;\";\r\n\t\t\t\t\tsplt+= \"set[2]= d[2]||1;}\";\r\n\t\t\t\t\tsplt+= \"if(res[1]){ var t = res[1].split(':');\";\r\n\t\t\t\t\tsplt+= \"set[3]= t[0]||0;\";\r\n\t\t\t\t\tsplt+= \"set[4]= t[1]||0;\";\r\n\t\t\t\t\tsplt+= \"set[5]= parseInt(t[2])||0;}\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar code =\"set[0],set[1],set[2],set[3],set[4],set[5],set[6]\";\r\n\t\tif (utc) code =\" Date.UTC(\"+code+\")\";\r\n\t\tconst temp = new Function(\"date\", \"i18n\", \"if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; \"+splt+\" return new Date(\"+code+\");\");\r\n\t\treturn function(v){ return temp(v, i18n ); };\r\n\t},\r\n\t\t\r\n\tgetISOWeek: function(ndate) {\r\n\t\tif(!ndate) return false;\r\n\t\tvar nday = ndate.getDay();\r\n\t\tif (nday === 0) {\r\n\t\t\tnday = 7;\r\n\t\t}\r\n\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\tvar ordinal_date = Math.floor( (first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\tvar weekNumber = 1 + Math.floor( ordinal_date / 7);\t\r\n\t\treturn weekNumber;\r\n\t},\r\n\t\r\n\tgetUTCISOWeek: function(ndate){\r\n\t\treturn this.getISOWeek(ndate);\r\n\t},\r\n\t_correctDate: function(d,d0,inc,checkFunc){\r\n\t\tif(!inc)\r\n\t\t\treturn;\r\n\t\tvar incorrect = checkFunc(d,d0);\r\n\t\tif(incorrect){\r\n\t\t\tvar i = (inc>0?1:-1);\r\n\r\n\t\t\twhile(incorrect){\r\n\t\t\t\td.setHours(d.getHours()+i);\r\n\t\t\t\tincorrect = checkFunc(d,d0);\r\n\t\t\t\ti += (inc>0?1:-1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tadd:function(date,inc,mode,copy){\r\n\t\tif (copy) date = this.copy(date);\r\n\t\tvar d = wDate.copy(date);\r\n\t\tswitch(mode){\r\n\t\t\tcase \"day\":\r\n\t\t\t\tdate.setDate(date.getDate()+inc);\r\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\r\n\t\t\t\t\treturn \twDate.datePart(d0,true).valueOf()== wDate.datePart(d,true).valueOf();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"week\":\r\n\t\t\t\tdate.setDate(date.getDate()+7*inc);\r\n\t\t\t\tthis._correctDate(date,d,7*inc,function(d,d0){\r\n\t\t\t\t\treturn \twDate.datePart(d0,true).valueOf()== wDate.datePart(d,true).valueOf();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"month\":\r\n\t\t\t\tdate.setMonth(date.getMonth()+inc);\r\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\r\n\t\t\t\t\treturn \td0.getMonth() == d.getMonth() && d0.getYear() == d.getYear();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"year\":\r\n\t\t\t\tdate.setYear(date.getFullYear()+inc);\r\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\r\n\t\t\t\t\treturn \td0.getFullYear() == d.getFullYear();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"hour\":\r\n\t\t\t\tdate.setHours(date.getHours()+inc);\r\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\r\n\t\t\t\t\treturn \td0.getHours() == d.getHours() && Date.datePart(d0,true)== Date.datePart(d,true);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"minute\": \tdate.setMinutes(date.getMinutes()+inc); break;\r\n\t\t\tdefault:\r\n\t\t\t\twDate.add[mode](date, inc, mode);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn date;\r\n\t},\r\n\tdatePart:function(date, copy){\r\n\t\tif (copy) date = this.copy(date);\r\n\r\n\t\t// workaround for non-existent hours\r\n\t\tvar d = this.copy(date);\r\n\t\td.setHours(0);\r\n\t\tif(d.getDate()!=date.getDate()){\r\n\t\t\tdate.setHours(1);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tdate.setHours(0);\r\n\t\t}\r\n\r\n\t\tdate.setMinutes(0);\r\n\t\tdate.setSeconds(0);\r\n\t\tdate.setMilliseconds(0);\r\n\t\treturn date;\r\n\t},\r\n\ttimePart:function(date, copy){\r\n\t\tif (copy) date = this.copy(date);\r\n\t\treturn (date.valueOf()/1000 - date.getTimezoneOffset()*60)%86400;\r\n\t},\r\n\tcopy:function(date){\r\n\t\treturn new Date(date.valueOf());\r\n\t},\r\n\tequal:function(a,b){\r\n\t\tif (!a || !b) return false;\r\n\t\treturn a.valueOf() === b.valueOf();\r\n\t},\r\n\tisHoliday:function(day){ \r\n\t\tday = day.getDay();\r\n\t\tif (day === 0 || day==6) return \"webix_cal_event\"; \r\n\t}\r\n};\r\n\r\nexport default wDate;","import i18n from \"../webix/i18n\";\r\n\r\nconst Number={\r\n\tgetConfig: function(value){\r\n\t\tvar config = {\r\n\t\t\tdecimalSize:0,\r\n\t\t\tgroupSize:999,\r\n\t\t\tprefix:\"\",\r\n\t\t\tsufix:\"\"\r\n\t\t};\r\n\t\tvar parts = value.split(/[0-9].*[0-9]/g);\r\n\t\tif (parts[0].length)\r\n\t\t\tconfig.prefix = parts[0];\r\n\t\tif (parts[1].length)\r\n\t\t\tconfig.sufix = parts[1];\r\n\t\tif (config.prefix || config.sufix){\r\n\t\t\tvalue = value.substr(config.prefix.length, value.length - config.prefix.length - config.sufix.length);\r\n\t\t}\r\n\r\n\t\tvar num = value.indexOf(\"1\");\r\n\t\tif (num > 0){\r\n\t\t\tconfig.prefix = value.substr(0, num);\r\n\t\t\tvalue = value.substr(num);\r\n\t\t}\r\n\r\n\t\tvar dot = value.indexOf(\"0\");\r\n\t\tif (dot > 0){\r\n\t\t\tconfig.decimalSize = value.length - dot;\r\n\t\t\tconfig.decimalDelimiter = value[dot-1];\r\n\t\t\tvalue = value.substr(0, dot-1);\r\n\t\t}\r\n\t\tvar sep = value.match(/[^0-9]/);\r\n\t\tif (sep){\r\n\t\t\tconfig.groupSize = value.length - sep.index - 1;\r\n\t\t\tconfig.groupDelimiter = value[sep.index];\r\n\t\t}\r\n\t\treturn config;\r\n\t},\r\n\tparse:function(value, config){\r\n\t\tif (!value || typeof value !== \"string\")\r\n\t\t\treturn value;\r\n\r\n\t\tif (config.prefix)\r\n\t\t\tvalue = value.toLowerCase().replace(config.prefix.toLowerCase() || \"\", \"\");\r\n\t\tif (config.sufix)\r\n\t\t\tvalue = value.toLowerCase().replace(config.sufix.toLowerCase() || \"\", \"\");\r\n\r\n\t\tvar decimal = \"\";\r\n\t\tif (config.decimalDelimiter){\r\n\t\t\tvar ind = value.indexOf(config.decimalDelimiter);\r\n\t\t\tif (ind > -1){\r\n\t\t\t\tdecimal = value.substr(ind+1).replace(/[^0-9]/g, \"\");\r\n\t\t\t\tdecimal = decimal.substr(0, Math.min(decimal.length, config.decimalSize));\r\n\t\t\t\tvalue = value.substr(0, ind);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sign = value[0] === \"-\" ? -1 : 1;\r\n\t\tvalue = value.replace(/[^0-9]/g, \"\");\r\n\t\tif (!value)\r\n\t\t\tvalue = \"0\";\r\n\r\n\t\tif (decimal)\r\n\t\t\tvalue += \".\"+decimal;\r\n\r\n\t\treturn parseFloat(value)*sign;\r\n\t},\r\n\tformat: function(value, config){ \r\n\t\tif (value === \"\" || typeof value === \"undefined\") return value;\r\n\t\t\r\n\t\tconfig = config||i18n;\r\n\t\tvalue = parseFloat(value);\r\n\r\n\t\tvar sign = value < 0 ? \"-\":\"\";\r\n\t\tvalue = Math.abs(value);\r\n\r\n\t\tif (!config.decimalOptional)\r\n\t\t\tvalue = value.toFixed(config.decimalSize);\r\n\r\n\t\tvar str = value.toString();\r\n\t\tstr = str.split(\".\");\r\n\r\n\t\tvar int_value = \"\";\r\n\t\tif (config.groupSize){\r\n\t\t\tvar step = config.groupSize;\r\n\t\t\tvar i=str[0].length;\r\n\t\t\tdo {\r\n\t\t\t\ti-=step;\r\n\t\t\t\tvar chunk = (i>0)?str[0].substr(i,step):str[0].substr(0,step+i);\r\n\t\t\t\tint_value = chunk+(int_value?config.groupDelimiter+int_value:\"\");\r\n\t\t\t} while(i>0);\r\n\t\t} else\r\n\t\t\tint_value = str[0];\r\n\r\n\t\tif (config.decimalSize)\r\n\t\t\tstr = sign + int_value + (str[1] ? (config.decimalDelimiter + str[1]) : \"\");\r\n\t\telse\r\n\t\t\tstr = sign + int_value;\r\n\r\n\t\tif (config.prefix || config.sufix){\r\n\t\t\treturn config.prefix + str + config.sufix;\r\n\t\t} else \r\n\t\t\treturn str;\r\n\t},\r\n\tnumToStr:function(config){\r\n\t\treturn function(value){\r\n\t\t\treturn Number.format(value, config);\r\n\t\t};\r\n\t}\r\n};\r\n\r\nexport default Number;","import en from \"../i18n/en\";\r\nimport i18n from \"./i18n\";\r\n\r\nimport wDate from \"../core/date\";\r\nimport Number from \"../core/number\";\r\n\r\nimport {copy, isArray} from \"../webix/helpers\";\r\nimport template from \"./template\";\r\n\r\n\r\nfunction extend(base,source){\r\n\tfor (var method in source){\r\n\t\tif(typeof(source[method]) == \"object\" && !isArray(source[method])){\r\n\t\t\tif(!base[method]){\r\n\t\t\t\tbase[method] = {};\r\n\t\t\t}\r\n\t\t\textend(base[method],source[method]);\r\n\t\t}\r\n\t\telse\r\n\t\t\tbase[method] = source[method];\r\n\t}\r\n}\r\n\r\nconst helpers = [\"fullDateFormat\", \"timeFormat\", \"dateFormat\", \"longDateFormat\", \"parseFormat\", \"parseTimeFormat\"];\r\n\r\ni18n.setLocale = function(locale){\r\n\tif (typeof locale == \"string\")\r\n\t\tlocale = i18n.locales[locale];\r\n\tif (locale){\r\n\t\tlocale.priceSettings  = copy(locale.priceSettings || locale);\r\n\t\textend(i18n, locale);\r\n\t\tdelete i18n.calendar.monthShort_hash;\r\n\t\tdelete i18n.calendar.monthFull_hash;\r\n\t}\r\n\tfor( var i=0; i<helpers.length; i++){\r\n\t\tvar key = helpers[i];\r\n\t\tvar utc = i18n[key+\"UTC\"];\r\n\t\ti18n[key+\"Str\"] = wDate.dateToStr(i18n[key], utc);\r\n\t\ti18n[key+\"Date\"] = wDate.strToDate(i18n[key], utc);\r\n\t}\r\n\r\n\tconst _price_format = template(i18n.price);\r\n\tconst _price_settings = i18n.priceSettings || i18n;\r\n\r\n\ti18n.intFormat = Number.numToStr({ groupSize:i18n.groupSize, groupDelimiter:i18n.groupDelimiter, decimalSize : 0});\r\n\ti18n.priceFormat = function(value){ return _price_format(Number.format(value, _price_settings)); };\r\n\ti18n.numberFormat = Number.format;\r\n};\r\n\r\n\r\ni18n.locales={ \"en-US\" : en };\r\ni18n.setLocale(\"en-US\");\r\n\r\nexport default i18n;","import env from \"../webix/env\";\r\nimport {stringify} from \"./stringify\";\r\nimport DataDriver from \"../load/drivers/index\";\r\n\r\n\r\nconst storage = {};\r\n\r\nstorage.prefix = function(scope, storage){\r\n\tscope = scope + \".\";\r\n\treturn {\r\n\t\tput:function(name, data){\r\n\t\t\treturn storage.put(scope+name, data);\r\n\t\t},\r\n\t\tget:function(name){\r\n\t\t\treturn storage.get(scope+name);\r\n\t\t},\r\n\t\tremove:function(name){\r\n\t\t\treturn storage.remove(scope+name);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nstorage.local = {\r\n\tput:function(name, data){\r\n\t\tif(name && window.JSON && window.localStorage){\r\n\t\t\twindow.localStorage.setItem(name, stringify(data));\r\n\t\t}\r\n\t},\r\n\tget:function(name){\r\n\t\tif(name && window.JSON && window.localStorage){\r\n\t\t\tvar json = window.localStorage.getItem(name);\r\n\t\t\tif(!json)\r\n\t\t\t\treturn null;\r\n\t\t\treturn DataDriver.json.toObject(json);\r\n\t\t}else\r\n\t\t\treturn null;\r\n\t},\r\n\tremove:function(name){\r\n\t\tif(name && window.JSON && window.localStorage){\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t},\r\n\tclear:function(){\r\n\t\twindow.localStorage.clear();\r\n\t}\r\n};\r\n\r\nstorage.session = {\r\n\tput:function(name, data){\r\n\t\tif(name && window.JSON && window.sessionStorage){\r\n\t\t\twindow.sessionStorage.setItem(name, stringify(data));\r\n\t\t}\r\n\t},\r\n\tget:function(name){\r\n\t\tif(name && window.JSON && window.sessionStorage){\r\n\t\t\tvar json = window.sessionStorage.getItem(name);\r\n\t\t\tif(!json)\r\n\t\t\t\treturn null;\r\n\t\t\treturn DataDriver.json.toObject(json);\r\n\t\t}else\r\n\t\t\treturn null;\r\n\t},\r\n\tremove:function(name){\r\n\t\tif(name && window.JSON && window.sessionStorage){\r\n\t\t\twindow.sessionStorage.removeItem(name);\r\n\t\t}\r\n\t},\r\n\tclear:function(){\r\n\t\twindow.sessionStorage.clear();\r\n\t}\r\n};\r\n\r\nstorage.cookie = {\r\n\tput:function(name, data, domain, expires ){\r\n\t\tif(name && window.JSON){\r\n\t\t\tdocument.cookie = name + \"=\" + escape(stringify(data)) +\r\n\t\t\t(( expires && (expires instanceof Date)) ? \";expires=\" + expires.toUTCString() : \"\" ) +\r\n\t\t\t(( domain ) ? \";domain=\" + domain : \"\" ) + \r\n\t\t\t(( env.https ) ? \";secure\" : \"\");\r\n\t\t}\r\n\t},\r\n\tgetRaw:function(check_name){\r\n\t\t// first we'll split this cookie up into name/value pairs\r\n\t\t// note: document.cookie only returns name=value, not the other components\r\n\t\tvar a_all_cookies = document.cookie.split( \";\" );\r\n\t\tvar a_temp_cookie = \"\";\r\n\t\tvar cookie_name = \"\";\r\n\t\tvar cookie_value = \"\";\r\n\t\tvar b_cookie_found = false; // set boolean t/f default f\r\n\r\n\t\tfor (var i = 0; i < a_all_cookies.length; i++ ){\r\n\t\t\t// now we'll split apart each name=value pair\r\n\t\t\ta_temp_cookie = a_all_cookies[i].split( \"=\" );\r\n\r\n\t\t\t// and trim left/right whitespace while we're at it\r\n\t\t\tcookie_name = a_temp_cookie[0].replace(/^\\s+|\\s+$/g, \"\");\r\n\r\n\t\t\t// if the extracted name matches passed check_name\r\n\t\t\tif (cookie_name == check_name ){\r\n\t\t\t\tb_cookie_found = true;\r\n\t\t\t\t// we need to handle case where cookie has no value but exists (no = sign, that is):\r\n\t\t\t\tif ( a_temp_cookie.length > 1 ){\r\n\t\t\t\t\tcookie_value = unescape( a_temp_cookie[1].replace(/^\\s+|\\s+$/g, \"\") );\r\n\t\t\t\t}\r\n\t\t\t\t// note that in cases where cookie is initialized but no value, null is returned\r\n\t\t\t\treturn cookie_value;\r\n\t\t\t}\r\n\t\t\ta_temp_cookie = null;\r\n\t\t\tcookie_name = \"\";\r\n\t\t}\r\n\t\tif ( !b_cookie_found ){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tget:function(name){\r\n\t\tif(name && window.JSON){\r\n\t\t\tvar json = this.getRaw(name);\r\n\t\t\tif(!json)\r\n\t\t\t\treturn null;\r\n\t\t\treturn DataDriver.json.toObject(unescape(json));\r\n\t\t}else\r\n\t\t\treturn null;\r\n\t},\r\n\tremove:function(name, domain){\r\n\t\tif(name && this.getRaw(name)) \r\n\t\t\tdocument.cookie = name + \"=\" + (( domain ) ? \";domain=\" + domain : \"\") + \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\r\n\t},\r\n\tclear:function(domain){\r\n\t\tvar cookies = document.cookie.split(\";\");\r\n\t\tfor (var i = 0; i < cookies.length; i++)\r\n\t\t\tdocument.cookie = /^[^=]+/.exec(cookies[i])[0] + \"=\" + (( domain ) ? \";domain=\" + domain : \"\") + \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\t\t\r\n\t}\r\n};\r\n\r\nexport default storage;","import {addCss, addStyle, removeCss, removeStyle, remove, insertBefore, create} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport {$$} from \"../ui/core\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\nenv.printPPI = 96;\r\nenv.printMargin = 0.75*env.printPPI;\r\n\r\nvar papers = { \"a4\":\"A4\", \"a3\":\"A3\", \"letter\":\"letter\"};\r\nvar fits = { page:true, data:true};\r\nvar modes = { portrait:true, landscape:true};\r\n\r\nvar sizes = {//inches, real size is value*ppi\r\n\t\"A3\": { width: 11.7, height: 16.5 },\r\n\t\"A4\": { width: 8.27, height:11.7 },\r\n\t\"letter\": { width: 8.5, height:11 }\r\n};\r\n\r\nconst print = function(id, options){\r\n\r\n\tvar view = $$(id);\r\n\tif (view && view.$printView)\r\n\t\tview = view.$printView();\r\n\r\n\tassert(view, \"non-existing view for printing\");\r\n\tif(!view) return;\r\n\r\n\tif(view.callEvent)\r\n\t\tview.callEvent(\"onBeforePrint\", [options]);\r\n\r\n\toptions = _checkOptions(options);\r\n\t_beforePrint(options);\r\n\r\n\t//try widget's custom logic first, sometimes it may deny \r\n\tif(!view.$customPrint || view.$customPrint(options) === true) \r\n\t\t_print(view, options);\r\n\r\n\t_afterPrint(options);\r\n};\r\n\r\n/*processing print options*/\r\nfunction _checkOptions(options){\r\n\t\r\n\toptions = options || {};\r\n\toptions.paper = papers[(options.paper || \"\").toLowerCase()] || \"A4\";\r\n\toptions.mode = modes[options.mode] ? options.mode : \"portrait\";\r\n\toptions.fit = fits[options.fit] ? options.fit: \"page\";\r\n\toptions.scroll = options.scroll || false;\r\n\toptions.size = sizes[options.paper];\r\n\toptions.margin = (options.margin || options.margin === 0) ? options.margin : {};\r\n\t\r\n\tconst margin = isNaN(options.margin*1) ? env.printMargin : options.margin;\r\n\toptions.margin = {\r\n\t\ttop:(options.margin.top || options.margin.top === 0) ? options.margin.top: margin, \r\n\t\tbottom:(options.margin.bottom || options.margin.bottom === 0) ? options.margin.bottom: margin, \r\n\t\tright:(options.margin.right || options.margin.right === 0) ? options.margin.right: margin, \r\n\t\tleft:(options.margin.left || options.margin.left === 0) ? options.margin.left: margin\r\n\t};\r\n\r\n\treturn options;\r\n}\r\n\r\n/*preparing printing environment*/\r\nfunction _beforePrint(options){\r\n\taddCss(document.body,\"webix_print\");\r\n\r\n\tif(options.docHeader) _getHeaderFooter(\"Header\", options);\r\n\tif(options.docFooter) _getHeaderFooter(\"Footer\", options);\r\n\r\n\t/* static print styles are located at 'css/print.less'*/\r\n\tvar cssString = \"@media print { \"+\r\n\t\t\"@page{ size:\"+options.paper+\" \"+options.mode+\";\"+\r\n\t\t\t\"margin-top:\"+options.margin.top+\"px;margin-bottom:\"+options.margin.bottom+\r\n\t\t\t\"px;margin-right:\"+options.margin.right+\"px;margin-left:\"+options.margin.left+\r\n\t\t\"px;}\"+\r\n\t\"}\";\r\n\taddStyle(cssString, \"print\");\r\n}\r\n\r\n/*cleaning environment*/\r\nfunction _afterPrint(options){\r\n\tremoveCss(document.body, \"webix_print\");\r\n\tremoveStyle(\"print\");\r\n\r\n\tif(options.docHeader) remove(options.docHeader);\r\n\tif(options.docFooter) remove(options.docFooter);\r\n}\r\n\r\n/*common print actions */\r\nfunction _print(view, options){\r\n\tvar doc = view.$view.cloneNode(true);\r\n\r\n\t//copy data from all canvases\r\n\tvar canvases = view.$view.getElementsByTagName(\"canvas\");\r\n\tif(canvases.length)\r\n\t\tfor(var i = canvases.length-1; i >=0; i--){\r\n\t\t\tvar destCtx = doc.getElementsByTagName(\"canvas\")[i].getContext(\"2d\");\r\n\t\t\tdestCtx.drawImage(canvases[i], 0, 0);\r\n\t\t}\r\n\r\n\tinsertBefore(doc, options.docFooter, document.body);\r\n\r\n\taddCss(doc,\"webix_ui_print\");\r\n\tif(!options.scroll && ((view._dataobj && view.data && view.data.pull) || view.getBody))\r\n\t\taddCss(doc, \"webix_print_noscroll\");\r\n\r\n\twindow.print();\r\n\r\n\tremove(doc);\r\n}\r\n/*custom header nad footer*/\r\nfunction _getHeaderFooter(group, options){\r\n\tvar header =  create(\"div\", { \r\n\t\t\"class\":\"webix_view webix_print_\"+group.toLowerCase(),\r\n\t\t\"style\":\"height:0px;visibility:hidden;\"\r\n\t}, options[\"doc\"+group]);\r\n\r\n\tif(group ===\"Header\")\r\n\t\tinsertBefore(header, document.body.firstChild);\r\n\telse\r\n\t\tdocument.body.appendChild(header);\r\n\r\n\toptions[\"doc\"+group] = header;\r\n}\r\n\r\nexport default print;","const patterns = {\r\n\tphone:{ mask:\"+# (###) ###-####\", allow:/[0-9]/g },\r\n\tcard: { mask:\"#### #### #### ####\", allow:/[0-9]/g },\r\n\tdate: { mask:\"####-##-## ##:##\", allow:/[0-9]/g }\r\n};\r\n\r\nexport default patterns;","/*\r\n\tCommon helpers\r\n*/\r\n\r\nexport * from \"./consts\";\r\nexport * from \"./helpers\";\r\nexport * from \"./htmlevents\";\r\nexport * from \"./customevents\";\r\nexport * from \"./stringify\";\r\nexport * from \"./export\";\r\nexport * from \"./message\";\r\nexport * from \"./api\";\r\nexport * from \"./init\";\r\n\r\nimport \"./ie8\";\r\n\r\n/*\r\n\tNext two ugly blocks are here for IE8 compatibility\r\n\trollup converts \"import * as\" to Object.freeze which doesn't work in IE8\r\n\r\n\tfor modern browsers it can be replaced with \r\n*/\r\n\r\n//\timport * as html from \"./html\";\r\nimport { denySelect, allowSelect, index, createCss, addStyle, removeStyle, create, getValue, remove, insertBefore, locate, offset, posRelative, pos, preventEvent, stopEvent, triggerEvent, addCss, removeCss, getTextSize, download, _getClassName, setSelectionRange, getSelectionRange, addMeta } from \"./html\";\r\nconst html = { denySelect, allowSelect, index, createCss, addStyle, removeStyle, create, getValue, remove, insertBefore, locate, offset, posRelative, pos, preventEvent, stopEvent, triggerEvent, addCss, removeCss, getTextSize, download, _getClassName, setSelectionRange, getSelectionRange, addMeta };\r\nexport { html };\r\n\r\n//\timport * as skin from \"./skin\";\r\nexport { skin } from \"./skin\";\r\n\r\nexport {debug} from \"./debug\";\r\n\r\nexport {default as i18n} from \"./locale\";\r\nexport {default as ready} from \"./ready\";\r\nexport {default as env} from \"./env\";\r\nexport {default as color} from \"./color\";\r\nexport {default as csv} from \"./csv\";\r\nexport {default as clipbuffer} from \"./clipbuffer\";\r\nexport {default as storage} from \"./storage\";\r\nexport {default as template} from \"./template\";\r\nexport {default as type} from \"./type\";\r\nexport {default as editors} from \"./editors\";\r\nexport {default as animate} from \"./animate\";\r\nexport {default as print} from \"./print\";\r\nexport {default as rules} from \"./rules\";\r\nexport {default as filters} from \"./filters\";\r\nexport {default as patterns} from \"./patterns\";\r\nexport {default as fullscreen} from \"./fullscreen\";","import {ajax} from \"../load/ajax\";\r\nimport promise from \"../thirdparty/promiz\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\n\r\nvar error_key = \"__webix_remote_error\";\r\n\r\nfunction RemoteContext(url, config){\r\n\tthis._proxy = {};\r\n\tthis._queue = [];\r\n\tthis._url = url;\r\n\tthis._key = \"\";\r\n\r\n\tif (config)\r\n\t\tthis._process(config);\r\n\telse\r\n\t\tthis._ready = ajax(url)\r\n\t\t\t.then(function(data){\r\n\t\t\t\treturn data.text();\r\n\t\t\t})\r\n\t\t\t.then(bind(function(text){\r\n\t\t\t\ttext = text.split(\"/*api*/\")[1];\r\n\t\t\t\tthis._process(JSON.parse(text));\r\n\t\t\t\treturn this._proxy;\r\n\t\t\t}, this));\r\n}\r\nRemoteContext.prototype = {\r\n\t_process:function(config){\r\n\t\tif (config.$key)\r\n\t\t\tthis._key = config.$key;\r\n\t\tif (config.$vars)\r\n\t\t\tfor (var key in config.$vars)\r\n\t\t\t\tthis._proxy[key] = config.$vars[key];\r\n\r\n\t\tthis._parse(config, this._proxy, \"\");\r\n\t},\r\n\t_parse:function(api, obj, prefix){\r\n\t\tfor (var key in api){\r\n\t\t\tif (key === \"$key\" || key === \"$vars\") continue;\r\n\t\t\tvar val = api[key];\r\n\t\t\tif (typeof val == \"object\"){\r\n\t\t\t\tvar sub = obj[key] = {};\r\n\t\t\t\tthis._parse(val, sub, prefix+key+\".\");\r\n\t\t\t} else\r\n\t\t\t\tobj[key] = this._proxy_call(this, prefix+key);\r\n\t\t}\r\n\t},\r\n\t_call:function(name, args){\r\n\t\tvar def = this._deffer(this, name, args);\r\n\t\tthis._queue.push(def);\r\n\t\tthis._start_queue();\r\n\t\treturn def;\r\n\t},\r\n\t_start_queue:function(){\r\n\t\tif (!this._timer)\r\n\t\t\tthis._timer = setTimeout(bind(this._run_queue, this), 1);\r\n\t},\r\n\t_run_queue:function(){\r\n\t\tvar data = [], defs = this._queue;\r\n\t\tfor (var i=0; i<this._queue.length; i++){\r\n\t\t\tvar def = this._queue[i];\r\n\t\t\tif (def.$sync){\r\n\t\t\t\tdefs.splice(i,1); i--;\r\n\t\t\t} else\r\n\t\t\t\tdata.push({ name: def.$name, args: def.$args });\t\r\n\t\t}\r\n\r\n\t\tif (defs.length){\r\n\t\t\tvar request = ajax();\r\n\t\t\tvar pack = this._pack(data);\r\n\t\t\tcallEvent(\"onBeforeRemoteCall\", [request, pack, {}]);\r\n\t\t\tvar promise = request.post(this._url, pack)\r\n\t\t\t\t.then(function(response){\r\n\t\t\t\t\tvar data = response.json();\r\n\t\t\t\t\tvar results = data.data;\r\n\t\t\t\t\tfor (var i=0; i<results.length; i++){\r\n\t\t\t\t\t\tlet res = results[i];\r\n\t\t\t\t\t\tlet error = results[i] && results[i][error_key];\r\n\t\t\t\t\t\tif (error){\r\n\t\t\t\t\t\t\tcallEvent(\"onRemoteError\", [error]);\r\n\t\t\t\t\t\t\tdefs[i].reject(error);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdefs[i].resolve(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t}, function(res){\r\n\t\t\t\t\tfor (var i=0; i<defs.length; i++)\r\n\t\t\t\t\t\tdefs[i].reject(res);\r\n\t\t\t\t\tthrow res;\r\n\t\t\t\t});\r\n\t\t\tcallEvent(\"onAfterRemoteCall\", [promise]);\r\n\t\t}\r\n\r\n\t\tthis._queue = [];\r\n\t\tthis._timer = null;\r\n\t},\r\n\t_sync:function(){\r\n\t\tvar value = null;\r\n\t\tthis.$sync = true;\r\n\t\tvar data = [{ name: this.$name, args: this.$args }];\r\n\r\n\t\ttry {\r\n\t\t\tvar request = ajax();\r\n\t\t\tvar pack = this.$context._pack(data);\r\n\t\t\tcallEvent(\"onBeforeRemoteCall\", [request, pack, { sync: true }]);\r\n\t\t\tvar xhr = request.sync().post(this.$context._url, pack);\r\n\t\t\tcallEvent(\"onAfterRemoteCall\", [null]);\r\n\t\t\tvalue = JSON.parse(xhr.responseText).data[0];\r\n\t\t\tif (value[error_key])\r\n\t\t\t\tvalue = null;\r\n\t\t} catch(e){} //eslint-disable-line\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_deffer:function(master, name, args){\r\n\t\tvar pr = promise.defer();\r\n\t\tpr.sync = master._sync;\r\n\t\tpr.$name = name;\r\n\t\tpr.$args = args;\r\n\t\tpr.$context = this;\r\n\r\n\t\treturn pr;\r\n\t},\r\n\t_proxy_call:function(master, name){\r\n\t\treturn function(){\r\n\t\t\treturn master._call(name, [].slice.call(arguments));\r\n\t\t};\r\n\t},\r\n\t_getProxy:function(){\r\n\t\treturn this._ready || this._proxy;\r\n\t},\r\n\t_pack:function(obj){\r\n\t\treturn {\r\n\t\t\tkey: this._key,\r\n\t\t\tpayload:obj\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getApi(url, config){\r\n\tvar ctx = new RemoteContext(url, config);\r\n\tvar proxy = ctx._getProxy();\r\n\tfor (var key in proxy)\r\n\t\tremote[key] = proxy[key];\r\n\r\n\treturn proxy;\r\n}\r\n\r\nconst remote = function(url, config){\r\n\tif (typeof url === \"object\"){\r\n\t\tvar scripts = document.getElementsByTagName(\"script\");\r\n\t\tconfig = url;\r\n\t\turl = scripts[scripts.length - 1].src;\r\n\t\treturn getApi(url, config);\r\n\t} else \r\n\t\treturn getApi(url, config);\r\n};\r\n\r\nexport default remote;","import {addMeta, addStyle} from \"../webix/html\";\r\nimport env from \"../webix/env\";\r\nimport state from \"../core/state\";\r\n\r\nimport {isUndefined, delay} from \"../webix/helpers\";\r\nimport {resize} from \"../ui/helpers\";\r\nimport {event} from \"../webix/htmlevents\";\r\nimport {callEvent, attachEvent} from \"../webix/customevents\";\r\n\r\nfunction orientation(){\r\n\tvar new_orientation = !!(window.orientation%180);\r\n\tif (state.orientation === new_orientation) return;\r\n\tstate.orientation = new_orientation;\t\r\n\tcallEvent(\"onRotate\", [new_orientation]);\r\n}\r\n\r\nif(env.touch){\r\n\tstate.orientation = !!((isUndefined(window.orientation)?90:window.orientation)%180);\r\n\tevent(window, (\"onorientationchange\" in window ?\"orientationchange\":\"resize\"), orientation);\r\n}\r\n\r\nexport default function fullScreen(){\r\n\tif (!env.touch) return;\r\n\r\n\taddMeta(\"apple-mobile-web-app-capable\",\"yes\");\r\n\taddMeta(\"viewport\",\"initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no\");\r\n\tif (!env.isMac)\r\n\t\taddStyle(\"body.webix_full_screen{ overflow-y: auto; }\");\r\n\r\n\tvar fix = function(){\r\n\t\tvar x = window.innerWidth;\r\n\t\tvar y = window.innerHeight;\r\n\r\n\t\tif (y){\r\n\t\t\tdocument.body.style.height = y+\"px\";\r\n\t\t\tdocument.body.style.width = x+\"px\";\r\n\t\t}\r\n\r\n\t\tstate._freeze_resize = false;\r\n\t\tresize();\r\n\t};\r\n\r\n\tvar onrotate = function(){ \r\n\t\tstate._freeze_resize = true;\r\n\t\tdelay(fix,null, [], 500);\r\n\t};\r\n\r\n\r\n\tattachEvent(\"onRotate\", onrotate);\r\n\torientation();\r\n\tdelay(onrotate);\r\n\r\n}","import {preventEvent} from \"../webix/html\";\r\nimport template from \"../webix/template\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport {$$} from \"../ui/core\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport wDate from \"../core/date\";\r\n\r\n\r\nconst datafilter = {\r\n\ttextWaitDelay:500,\r\n\t\"summColumn\":{\r\n\t\tgetValue:function(node){ return node.firstChild.innerHTML; },\r\n\t\tsetValue: function(){},\r\n\t\trefresh:function(master, node, value){ \r\n\t\t\tvar result = 0;\r\n\t\t\tmaster.mapCells(null, value.columnId, null, 1, function(value){\r\n\t\t\t\tvalue = value*1;\r\n\t\t\t\tif (!isNaN(value))\r\n\t\t\t\t\tresult+=value;\r\n\t\t\t}, true);\r\n\r\n\t\t\tif (value.format)\r\n\t\t\t\tresult = value.format(result);\r\n\t\t\tif (value.template)\r\n\t\t\t\tresult = value.template({value:result});\r\n\r\n\t\t\tnode.firstChild.innerHTML = result;\r\n\t\t},\r\n\t\ttrackCells:true,\r\n\t\trender:function(master, config){ \r\n\t\t\tif (config.template)\r\n\t\t\t\tconfig.template = template(config.template);\r\n\t\t\treturn \"\"; \r\n\t\t}\r\n\t},\r\n\t\"masterCheckbox\":{\r\n\t\tgetValue:function(){},\r\n\t\tsetValue:function(){},\r\n\t\tgetHelper:function(node, config){\r\n\t\t\treturn {\r\n\t\t\t\tcheck:function(){ config.checked = false; node.onclick(); },\r\n\t\t\t\tuncheck:function(){ config.checked = true; node.onclick(); },\r\n\t\t\t\tisChecked:function(){ return config.checked; }\r\n\t\t\t};\r\n\t\t},\r\n\t\trefresh:function(master, node, config){\r\n\t\t\tnode.onclick = function(){\r\n\t\t\t\tthis.getElementsByTagName(\"input\")[0].checked = config.checked = !config.checked;\r\n\t\t\t\tvar column = master.getColumnConfig(config.columnId);\r\n\t\t\t\tvar checked = config.checked ? column.checkValue : column.uncheckValue;\r\n\t\t\t\tmaster.data.each(function(obj){\r\n\t\t\t\t\tobj[config.columnId] = checked;\r\n\t\t\t\t\tmaster.callEvent(\"onCheck\", [obj.id, config.columnId, checked]);\r\n\t\t\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"save\"]);\r\n\t\t\t\t});\r\n\t\t\t\tmaster.refresh();\r\n\t\t\t};\r\n\t\t},\r\n\t\trender:function(master, config){ \r\n\t\t\treturn \"<input type='checkbox' \"+(config.checked?\"checked='1'\":\"\")+\">\"; \r\n\t\t}\r\n\t},\r\n\t\"textFilter\":{\r\n\t\tgetInputNode:function(node){ return node.firstChild?node.firstChild.firstChild:{ value: null }; },\r\n\t\tgetValue:function(node){ return this.getInputNode(node).value;  },\r\n\t\tsetValue:function(node, value){ this.getInputNode(node).value = value;  },\r\n\t\trefresh:function(master, node, value){\r\n\t\t\tnode.component = master._settings.id;\r\n\t\t\tmaster.registerFilter(node, value, this);\r\n\t\t\tnode._comp_id = master._settings.id;\r\n\t\t\tif (value.value && this.getValue(node) != value.value) this.setValue(node, value.value);\r\n\t\t\tnode.onclick = preventEvent;\r\n\t\t\t_event(node, \"keydown\", this._on_key_down);\r\n\t\t},\r\n\t\trender:function(master, config){\r\n\t\t\tif (this.init) this.init(config);\r\n\t\t\tconfig.css = (config.css||\"\") + \" webix_ss_filter\";\r\n\t\t\treturn \"<input \"+(config.placeholder?(\"placeholder=\\\"\"+config.placeholder+\"\\\" \"):\"\")+\"type='text'>\"; \r\n\t\t},\r\n\t\t_on_key_down:function(e){\r\n\t\t\tvar id = this._comp_id;\r\n\r\n\t\t\t//tabbing through filters must not trigger filtering\r\n\t\t\t//we can improve this functionality by preserving initial filter value\r\n\t\t\t//and comparing new one with it\r\n\t\t\tif ((e.which || e.keyCode) == 9) return;\r\n\r\n\t\t\tif (this._filter_timer) window.clearTimeout(this._filter_timer);\r\n\t\t\tthis._filter_timer=window.setTimeout(function(){\r\n\t\t\t\tvar ui = $$(id);\r\n\t\t\t\t//ensure that ui is not destroyed yet\r\n\t\t\t\tif (ui) ui.filterByAll();\r\n\t\t\t},datafilter.textWaitDelay);\r\n\t\t}\r\n\t},\r\n\t\"selectFilter\":{\r\n\t\tgetInputNode:function(node){ return node.firstChild?node.firstChild.firstChild:{ value: null}; },\r\n\t\tgetValue:function(node){ return this.getInputNode(node).value;  },\r\n\t\tsetValue:function(node, value){ this.getInputNode(node).value = value;  },\r\n\t\trefresh:function(master, node, value){\r\n\t\t\t//value - config from header { contet: }\r\n\t\t\tvalue.compare = value.compare || function(a,b){ return a == b; };\r\n\r\n\t\t\tnode.component = master._settings.id;\r\n\t\t\tmaster.registerFilter(node, value, this);\r\n\r\n\t\t\tconst data = datafilter._get_data(master, value);\r\n\t\t\tif (value.emptyOption !== false)\r\n\t\t\t\tdata.unshift({id:\"\", value:value.emptyOption||\"\"});\r\n\r\n\t\t\t//slow in IE\r\n\t\t\t//http://jsperf.com/select-options-vs-innerhtml\r\n\r\n\t\t\tlet select = document.createElement(\"select\");\r\n\t\t\tfor (let i = 0; i < data.length; i++){\r\n\t\t\t\tlet option = document.createElement(\"option\");\r\n\t\t\t\toption.value = data[i].id;\r\n\t\t\t\toption.text = data[i].value;\r\n\t\t\t\tselect.add(option);\r\n\t\t\t}\r\n\r\n\t\t\tnode.firstChild.innerHTML = \"\";\r\n\t\t\tnode.firstChild.appendChild(select);\r\n\r\n\t\t\tif (value.value) this.setValue(node, value.value);\r\n\t\t\tnode.onclick = preventEvent;\r\n\r\n\t\t\tselect._comp_id = master._settings.id;\r\n\t\t\t_event(select, \"change\", this._on_change);\r\n\t\t},\r\n\t\trender:function(master, config){\r\n\t\t\tif (this.init) this.init(config);\r\n\t\t\tconfig.css = (config.css||\"\") + \" webix_ss_filter\";\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\t_on_change:function(){ \r\n\t\t\t$$(this._comp_id).filterByAll();\r\n\t\t}\r\n\t},\r\n\t_get_data:function(master, value){\r\n\t\tlet data;\r\n\t\tlet options = value.options;\r\n\r\n\t\tif (options){\r\n\t\t\tdata = master._collectValues.call(options, \"id\", \"value\");\r\n\t\t} else\r\n\t\t\tdata = master.collectValues(value.columnId, value.collect);\r\n\r\n\t\treturn data;\r\n\t}\r\n};\r\n\r\ndatafilter.serverFilter = extend({\r\n\t$server: true,\r\n\t_on_key_down:function(e){\r\n\t\tvar id = this._comp_id,\r\n\t\t\tcode = (e.which || e.keyCode);\r\n\r\n\t\t//ignore tab and navigation keys\r\n\t\tif (code == 9 || ( code >= 33 &&  code <= 40)) return;\r\n\t\tif (this._filter_timer) window.clearTimeout(this._filter_timer);\r\n\t\tthis._filter_timer=window.setTimeout(function(){\r\n\t\t\t$$(id).filterByAll();\r\n\t\t},datafilter.textWaitDelay);\r\n\t}\r\n}, datafilter.textFilter);\r\n\r\ndatafilter.serverSelectFilter = extend({\r\n\t$server: true,\r\n\t_on_change:function(){\r\n\t\tvar id = this._comp_id;\r\n\t\t$$(id).filterByAll();\r\n\t}\r\n}, datafilter.selectFilter);\r\n\r\ndatafilter.numberFilter = extend({\r\n\tinit:function(config){\r\n\t\tconfig.prepare = function(value){\r\n\t\t\tvar equality = (value.indexOf(\"=\") != -1);\r\n\t\t\tvar intvalue = this.format(value);\r\n\t\t\tif (intvalue === \"\") return \"\";\r\n\r\n\t\t\tvar compare;\r\n\t\t\tif (value.indexOf(\">\") != -1){\r\n\t\t\t\tcompare = this._greater;\r\n\t\t\t}\r\n\t\t\telse if (value.indexOf(\"<\") != -1){\r\n\t\t\t\tcompare = this._lesser;\r\n\t\t\t}\r\n\r\n\t\t\tif (compare && equality) {\r\n\t\t\t\tconfig.compare = (a,b) => this._equal(a,b) || compare(a,b);\r\n\t\t\t} else {\r\n\t\t\t\tconfig.compare = compare || this._equal; \r\n\t\t\t}\r\n\r\n\t\t\treturn intvalue;\r\n\t\t};\r\n\t},\r\n\tformat:function(value){\r\n\t\treturn value.replace(/[^\\-.0-9]/g,\"\");\r\n\t},\r\n\t_greater:function(a,b){ return a*1>b; },\r\n\t_lesser:function(a,b){ return a!==\"\" && a*1<b; },\r\n\t_equal:function(a,b){ return a !== \"\" && a*1==b; }\r\n}, datafilter.textFilter);\r\n\r\ndatafilter.dateFilter = extend({\r\n\tformat:function(value){\r\n\t\tif (value === \"\") return \"\";\r\n\t\tvar date = new Date();\r\n\r\n\t\tif (value.indexOf(\"today\") != -1){\r\n\t\t\tdate = wDate.dayStart(date);\r\n\t\t} else if (value.indexOf(\"now\") == -1){\r\n\t\t\tvar parts = value.match(/[0-9]+/g);\r\n\t\t\tif (!parts||!parts.length) return \"\";\r\n\t\t\tif (parts.length < 3){\r\n\t\t\t\tparts.reverse();\r\n\t\t\t\tdate = new Date(parts[0], (parts[1]||1)-1, 1);\r\n\t\t\t} else\r\n\t\t\t\tdate = i18n.dateFormatDate(value.replace(/^[>< =]+/,\"\"));\r\n\t\t}\r\n\t\treturn date.valueOf();\r\n\t}\r\n}, datafilter.numberFilter);\r\n\r\nexport default datafilter;","import Touch from \"../core/touch\";\r\nimport env  from \"../webix/env\";\r\nimport ready from \"../webix/ready\";\r\nimport {set as setSkin} from \"../webix/skin\";\r\nimport {create, addStyle} from \"../webix/html\";\r\nimport {define} from \"../services\";\r\n\r\n\r\nenv.scrollSize = ((env.touch||env.$customScroll)?0:17);\r\nready(function(){\r\n\tvar size = _detectScrollSize();\r\n\tenv.scrollSize = env.touch ? 0 : size;\r\n});\r\n\r\n\r\nfunction _detectScrollSize(){\r\n\tvar div = create(\"div\");\r\n\tdiv.className = \"webix_skin_mark\";\r\n\tdiv.style.cssText=\"position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tvar name = { 200:\"flat\" , 210:\"compact\", 230: \"contrast\", 240:\"material\", 250:\"mini\" }[Math.floor(div.offsetHeight/10)*10];\r\n\tdocument.body.removeChild(div);\r\n\r\n\tif (name)\r\n\t\tsetSkin(name);\r\n\r\n\tif (env.$customScroll) return 0;\r\n\treturn width;\r\n}\r\n\r\n\r\nlet fixed = false;\r\nfunction _fixHeight(){\r\n\tif (fixed) return;\r\n\r\n\taddStyle(\"html, body{ height:100%; }\");\r\n\tdocument.body.className+=\" webix_full_screen\";\r\n\tTouch.limit(false);\r\n\tfixed = true;\r\n}\r\n\r\ndefine(\"_fixHeight\", _fixHeight);","export {proto, protoUI, $$} from \"./core\";\r\n\r\nimport {ui} from \"./core\";\r\n\r\nimport {animate, animateView} from \"./animate\";\r\nimport {freeze, resize, zIndex} from \"./helpers\";\r\nimport fullScreen from \"./fullscreen\";\r\n\r\n// filters\r\nimport datafilter from \"./datafilter\";\r\nimport \"./datafilter_pro\";\r\n\r\n// detect scroll\r\nimport \"./detect\";\r\n\r\n\r\nui.animate = animate;\r\nui.animateView = animateView;\r\n\r\nui.freeze = freeze;\r\nui.resize = resize;\r\nui.zIndex = zIndex;\r\nui.datafilter = datafilter;\r\nui.fullScreen = fullScreen;\r\n\r\nexport {ui};","import {ui, $$} from \"./core\";\r\nimport {create} from \"../webix/html\";\r\nimport ani from \"../webix/animate\";\r\n\r\nexport function animate(obj, parent, config){\r\n\tvar pobj = $$(parent);\r\n\tif (pobj){\r\n\t\tvar aniset = config || { type:\"slide\", direction:\"left\" };\r\n\t\tvar d = pobj._viewobj.cloneNode(true);\r\n\t\tvar view = ui(obj, parent);\r\n\r\n\t\tview._viewobj.parentNode.appendChild(d);\r\n\t\tvar line = ani.formLine(\r\n\t\t\tview._viewobj,\r\n\t\t\td,\r\n\t\t\taniset\r\n\t\t);\r\n\r\n\t\taniset.callback = function(){\r\n\t\t\tani.breakLine(line);\r\n\t\t};\r\n\t\tani(line, aniset);\r\n\r\n\t\treturn view;\r\n\t}\r\n}\r\n\r\nexport function animateView(view, stateHandler, config){\r\n\tview = $$(view);\r\n\tif (view){\r\n\t\tconfig = config || { type:\"slide\", direction:\"left\" };\r\n\r\n\t\tvar getHTML = function(view){\r\n\t\t\tvar el = view._viewobj;\r\n\t\t\tvar css = el.className;\r\n\t\t\tvar content =el.innerHTML;\r\n\t\t\treturn \"<div class='\"+css+\"' style='width:\"+el.offsetWidth+\"px;height:\"+el.offsetHeight+\"px;'>\"+content+\"</div>\";\r\n\t\t};\r\n\r\n\t\t// get 'display' state of child nodes\r\n\t\tvar display = [];\r\n\t\tfor(let i=0; i<view._viewobj.childNodes.length; i++){\r\n\t\t\tvar node = view._viewobj.childNodes[i];\r\n\t\t\tvar value = node.currentStyle ?node.currentStyle.display : getComputedStyle(node, null).display;\r\n\t\t\tdisplay.push(value||\"\");\r\n\t\t}\r\n\t\t// get current html content\r\n\t\tvar currentState = getHTML(view);\r\n\r\n\t\t// apply new state\r\n\t\tif(typeof stateHandler == \"function\"){\r\n\t\t\tstateHandler.call(this);\r\n\t\t}\r\n\r\n\t\t// get new html content\r\n\t\tvar newState = getHTML(view);\r\n\r\n\t\t// insert elements into the view\r\n\t\tvar tempParent = view._viewobj.insertBefore(create(\"DIV\",{\r\n\t\t\t\"class\" : \"webix_view_animate\",\r\n\t\t\t\"style\" : \"width:\"+view._viewobj.offsetWidth+\"px;height:\"+view._viewobj.offsetHeight+\"px;\"\r\n\t\t}, newState+currentState),view._viewobj.firstChild);\r\n\r\n\t\t// hide child nodes\r\n\t\tfor(let i =1; i<view._viewobj.childNodes.length; i++){\r\n\t\t\tview._viewobj.childNodes[i].style.display = \"none\";\r\n\t\t}\r\n\r\n\t\t// animate inserted elements\r\n\t\tvar line = ani.formLine(\r\n\t\t\ttempParent.childNodes[0],\r\n\t\t\ttempParent.childNodes[1],\r\n\t\t\tconfig\r\n\t\t);\r\n\t\tconfig.callback = function(){\r\n\t\t\tif(tempParent){\r\n\t\t\t\tview._viewobj.removeChild(tempParent);\r\n\t\t\t\ttempParent = null;\r\n\t\t\t\t// restore 'display' state of child nodes\r\n\t\t\t\tfor(var i =0; i< view._viewobj.childNodes.length;i++){\r\n\t\t\t\t\tview._viewobj.childNodes[i].style.display = display[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tani(line, config);\r\n\r\n\t\treturn view;\r\n\t}\r\n}","// en-EN locale is bundled by default\r\nimport i18n from \"../webix/i18n\";\r\n\r\n// germany\r\nimport de from \"./de\";\r\ni18n.locales[\"de-DE\"] = de;\r\n\r\n// spain\r\nimport es from \"./es\";\r\ni18n.locales[\"es-ES\"] = es;\r\n\r\n// france\r\nimport fr from \"./fr\";\r\ni18n.locales[\"fr-FR\"] = fr;\r\n\r\n// italy\r\nimport it from \"./it\";\r\ni18n.locales[\"it-IT\"] = it;\r\n\r\n// japan\r\nimport ja from \"./ja\";\r\ni18n.locales[\"ja-JP\"] = ja;\r\n\r\n// portuguese\r\nimport pt from \"./pt\";\r\ni18n.locales[\"pt-BR\"] = pt;\r\n\r\n// chinese\r\nimport zh from \"./zh\";\r\ni18n.locales[\"zh-CN\"] = zh;\r\n\r\n// russian\r\nimport ru from \"./ru\";\r\ni18n.locales[\"ru-RU\"] = ru;\r\n\r\n// belarus\r\nimport be from \"./be\";\r\ni18n.locales[\"be-BY\"] = be;","/*German (Germany) locale*/\r\nconst de = {\r\n\tgroupDelimiter:\".\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\tdateFormat:\"%d.%n.%Y\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%j. %F %Y\",\r\n\tfullDateFormat:\"%j. %F %Y %H:%i\",\r\n\tam:null,\r\n\tpm:null,\r\n\tprice:\"{obj} €\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\".\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\",\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tcalendar:{\r\n\t\tmonthFull:[\"Januar\",\"Februar\",\"März\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"],\r\n\t\tmonthShort:[\"Jan\",\"Feb\",\"Mrz\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],\r\n\t\tdayFull:[\"Sonntag\",\"Montag\",\"Dienstag\",\"Mittwoch\",\"Donnerstag\",\"Freitag\",\"Samstag\"],\r\n\t\tdayShort:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"],\r\n\t\thours: \"Stunden\",\r\n\t\tminutes: \"Minuten\",\r\n\t\tdone:\"Fertig\",\r\n\t\tclear: \"Entfernen\",\r\n\t\ttoday: \"Heute\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Seite\",\r\n\t\tof:\"von\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"von\",\r\n\t\tautomaticZoom:\"Automatisch Zoom\",\r\n\t\tactualSize:\"Aktuelles Ausmaß\",\r\n\t\tpageFit:\"Seite Ausmaß\",\r\n\t\tpageWidth:\"Seite Breite\",\r\n\t\tpageHeight:\"Seite Höhe\",\r\n\t\tenterPassword:\"Passwort eingeben\",\r\n\t\tpasswordError:\"Falsches passwort\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Kalender\",\r\n\t\tincreaseValue:\"Wert erhöhen\",\r\n\t\tdecreaseValue:\"Wert verringern\",\r\n\t\tnavMonth:[\"Vorheriger Monat\", \"Nächsten Monat\"],\r\n\t\tnavYear:[\"Vorheriges Jahr\", \"Nächstes Jahr\"],\r\n\t\tnavDecade:[\"Zurück Jahrzehnt\", \"Als nächstes Jahrzehnt\"],\r\n\t\tdateFormat:\"%j. %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Stunden: %H\",\r\n\t\tminuteFormat:\"Minuten: %i\",\r\n\t\tremoveItem:\"Element entfernen\",\r\n\t\tpages:[\"Erste Seite\", \"Vorherige Seite\", \"Folgeseite\", \"Letzte Seite\"],\r\n\t\tpage:\"Seite\",\r\n\t\theadermenu:\"Titelmenü\",\r\n\t\topenGroup:\"Öffnen Spaltengruppe \",\r\n\t\tcloseGroup:\"Schließen Spaltengruppe \",\r\n\t\tcloseTab:\"Tab schließen\",\r\n\t\tshowTabs:\"Weitere Tabs\",\r\n\t\tresetTreeMap:\"Zurück zur ursprünglichen Ansicht\",\r\n\t\tnavTreeMap:\"Aufleveln\",\r\n\t\tnextTab:\"Weiter tab\",\r\n\t\tprevTab:\"Zurück tab\",\r\n\t\tmultitextSection:\"Element hinzufügen\",\r\n\t\tmultitextextraSection:\"Element entfernen\",\r\n\t\tshowChart:\"Chart anzeigen\",\r\n\t\thideChart:\"Chart verstecken\",\r\n\t\tresizeChart:\"Chart Größe ändern\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Unterstreichen\",\r\n\t\tbold: \"Fettgedruckt\",\r\n\t\titalic: \"Kursiv\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Auswählen\",\r\n\t\tselectAll:\"Alles auswählen\",\r\n\t\tunselectAll:\"Alles widerrufen\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Abbrechen\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Absenden\",\r\n\t\tconfirmMessage: \"Der Kommentar wird entfernt. Sind Sie sicher?\",\r\n\t\tedit: \"Redigieren\",\r\n\t\tremove: \"Löschen\",\r\n\t\tplaceholder: \"Geben Sie hier ein..\",\r\n\t\tmoreComments:\"Mehr Kommentare\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"weniger\",\r\n\t\tlessOrEqual: \"weniger oder gleich\",\r\n\t\tgreater: \"mehr\",\r\n\t\tgreaterOrEqual: \"größer oder gleich\",\r\n\t\tcontains: \"enthält\",\r\n\t\tnotContains: \"nicht enthält\",\r\n\t\tequal: \"gleich\",\r\n\t\tnotEqual: \"ungleich\",\r\n\t\tbeginsWith: \"beginnt mit\",\r\n\t\tnotBeginsWith: \"nicht beginnt mit\",\r\n\t\tendsWith: \"endet mit\",\r\n\t\tnotEndsWith: \"nicht endet mit\",\r\n\t\tbetween: \"zwischen\",\r\n\t\tnotBetween: \"nicht zwischen\"\r\n\t}\r\n};\r\n\r\nexport default de;","/*Spanish (Spain, International Sort) locale*/\r\nconst es = {\r\n\tgroupDelimiter:\".\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\tdateFormat:\"%d/%n/%Y\",\r\n\ttimeFormat:\"%G:%i\",\r\n\tlongDateFormat:\"%d %F %Y\",\r\n\tfullDateFormat:\"%d %F %Y %G:%i\",\r\n\tam:null,\r\n\tpm:null,\r\n\tprice:\"{obj} €\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\".\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\",\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tcalendar:{\r\n\t\tmonthFull:[\"enero\",\"febrero\",\"marzo\",\"abril\",\"mayo\",\"junio\",\"julio\",\"agosto\",\"septiembre\",\"octubre\",\"noviembre\",\"diciembre\"],\r\n\t\tmonthShort:[\"ene\",\"feb\",\"mar\",\"abr\",\"may\",\"jun\",\"jul\",\"ago\",\"sep\",\"oct\",\"nov\",\"dic\"],\r\n\t\tdayFull:[\"domingo\",\"lunes\",\"martes\",\"miércoles\",\"jueves\",\"viernes\",\"sábado\"],\r\n\t\tdayShort:[\"dom\",\"lun\",\"mar\",\"mié\",\"jue\",\"vie\",\"sáb\"],\r\n\t\thours: \"Horas\",\r\n\t\tminutes: \"Minutos\",\r\n\t\tdone:\"Listo\",\r\n\t\tclear: \"Reinicio\",\r\n\t\ttoday: \"Hoy\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Página\",\r\n\t\tof:\"de\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"de\",\r\n\t\tautomaticZoom:\"Zoom automático\",\r\n\t\tactualSize:\"Tamaño real\",\r\n\t\tpageFit:\"Tamaño de página\",\r\n\t\tpageWidth:\"Ancho de página\",\r\n\t\tpageHeight:\"Altura de la página\",\r\n\t\tenterPassword:\"Introduzca la contraseña\",\r\n\t\tpasswordError:\"Contraseña incorrecta\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Сalendario\",\r\n\t\tincreaseValue:\"Aumentar el valor\",\r\n\t\tdecreaseValue:\"Disminuye el valor\",\r\n\t\tnavMonth:[\"Mes anterior\", \"Próximo mes\"],\r\n\t\tnavYear:[\"Año anterior\", \"Próximo año\"],\r\n\t\tnavDecade:[\"Década anterior\", \"Próxima década\"],\r\n\t\tdateFormat:\"%d %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Horas: %G\",\r\n\t\tminuteFormat:\"Minutos: %i\",\r\n\t\tremoveItem:\"Retire el elemento\",\r\n\t\tpages:[\"Primera página\", \"Pagina anterior\", \"Siguiente página\", \"Última página\"],\r\n\t\tpage:\"Página\",\r\n\t\theadermenu:\"Menú de títulos\",\r\n\t\topenGroup:\"Grupo de columnas abiertas\",\r\n\t\tcloseGroup:\"Primer grupo de columnas\",\r\n\t\tcloseTab:\"Cerrar tab\",\r\n\t\tshowTabs:\"Mostrar más tabs\",\r\n\t\tresetTreeMap:\"Volver a la vista original\",\r\n\t\tnavTreeMap:\"Elevar a mismo nivel\",\r\n\t\tnextTab:\"Siguiente tab\",\r\n\t\tprevTab:\"Tab anterior\",\r\n\t\tmultitextSection:\"Añadir elemento\",\r\n\t\tmultitextextraSection:\"Retire el elemento\",\r\n\t\tshowChart:\"Espectáculo chart\",\r\n\t\thideChart:\"Esconder chart\",\r\n\t\tresizeChart:\"Cambiar el tamaño el chart\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Subrayar\",\r\n\t\tbold: \"Negrita\",\r\n\t\titalic: \"Itálico\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Seleccionar\",\r\n\t\tselectAll:\"Seleccionar todo\",\r\n\t\tunselectAll:\"Deselecciona todo\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Cancelar\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Enviar\",\r\n\t\tconfirmMessage: \"El comentario será eliminado. Estás seguro?\",\r\n\t\tedit: \"Corregir\",\r\n\t\tremove: \"Suprimir\",\r\n\t\tplaceholder: \"Escriba aquí..\",\r\n\t\tmoreComments:\"Más comentarios\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"menos\",\r\n\t\tlessOrEqual: \"menor o igual\",\r\n\t\tgreater: \"mayor\",\r\n\t\tgreaterOrEqual: \"mayor o igual\",\r\n\t\tcontains: \"contiene\",\r\n\t\tnotContains: \"not contiene\",\r\n\t\tequal: \"igual\",\r\n\t\tnotEqual: \"no es igual\",\r\n\t\tbeginsWith: \"comienza con\",\r\n\t\tnotBeginsWith: \"no comienza con\",\r\n\t\tendsWith: \"termina con\",\r\n\t\tnotEndsWith: \"no termina con\",\r\n\t\tbetween: \"entre\",\r\n\t\tnotBetween: \"no entre\"\r\n\t}\r\n};\r\n\r\nexport default es;","const fr = {\r\n\tgroupDelimiter:\" \",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%d/%m/%Y\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%d %F %Y\",\r\n\tfullDateFormat:\"%d.%m.%Y %H:%i\",\r\n\r\n\tprice:\"{obj} €\",\r\n\tpriceSettings:null, //use number defaults\r\n\t\r\n\tcalendar:{\r\n\t\tmonthFull:[\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\t\tmonthShort:[\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Aôu\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"],\t\r\n\t\tdayFull:[\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tdayShort:[\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"],\r\n\t\thours: \"Heures\",\r\n\t\tminutes: \"Minutes\",\r\n\t\tdone:\"Fini\",\r\n\t\tclear: \"Effacer\",\r\n\t\ttoday: \"Aujourd'hui\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Page\",\r\n\t\tof:\"sur\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"sur\",\r\n\t\tautomaticZoom:\"Zoom automatique\",\r\n\t\tactualSize:\"Taille actuelle\",\r\n\t\tpageFit:\"Taille de la page\",\r\n\t\tpageWidth:\"Largeur de la page\",\r\n\t\tpageHeight:\"Hauteur de page\",\r\n\t\tenterPassword:\"Entrez le mot de passe\",\r\n\t\tpasswordError:\"Mauvais mot de passe\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Сalendrier\",\r\n\t\tincreaseValue:\"Augmenter la valeur\",\r\n\t\tdecreaseValue:\"Diminution de la valeur\",\r\n\t\tnavMonth:[\"Le mois précédent\", \"Le mois prochain\"],\r\n\t\tnavYear:[\"Année précédente\", \"L'année prochaine\"],\r\n\t\tnavDecade:[\"Décennie précédente\", \"Suivant décennie\"],\r\n\t\tdateFormat:\"%d %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Heures: %H\",\r\n\t\tminuteFormat:\"Minutes: %i\",\r\n\t\tremoveItem:\"Retirer l'élément\",\r\n\t\tpages:[\"Première page\", \"Page précédente\", \"Page suivante\", \"Dernière page\"],\r\n\t\tpage:\"Page\",\r\n\t\theadermenu:\"Menu de titre\",\r\n\t\topenGroup:\"Ouvrir groupe de colonnes \",\r\n\t\tcloseGroup:\"Fermer groupe de colonnes\",\r\n\t\tcloseTab:\"Fermer tab\",\r\n\t\tshowTabs:\"Montrer plus tabs\",\r\n\t\tresetTreeMap:\"Revenir à la vue originale\",\r\n\t\tnavTreeMap:\"Niveau supérieur\",\r\n\t\tnextTab:\"Prochain tab\",\r\n\t\tprevTab:\"Précédent tab\",\r\n\t\tmultitextSection:\"Ajouter l'élément\",\r\n\t\tmultitextextraSection:\"Retirer l'élément\",\r\n\t\tshowChart:\"Montrer chart\",\r\n\t\thideChart:\"Cacher chart\",\r\n\t\tresizeChart:\"Redimensionner chart\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Souligner\",\r\n\t\tbold: \"Gras\",\r\n\t\titalic: \"Italique\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Sélectionner\",\r\n\t\tselectAll:\"Tout sélectionner\",\r\n\t\tunselectAll:\"Tout déselectionner\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Annuler\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Envoyer\",\r\n\t\tconfirmMessage: \"Le commentaire sera supprimé. Êtes-vous sûr?\",\r\n\t\tedit: \"Modifier\",\r\n\t\tremove: \"Effacer\",\r\n\t\tplaceholder: \"Écrivez ici..\",\r\n\t\tmoreComments:\"Plus de commentaires\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"moins\",\r\n\t\tlessOrEqual: \"inférieur ou égal\",\r\n\t\tgreater: \"plus grand\",\r\n\t\tgreaterOrEqual: \"supérieur ou égal\",\r\n\t\tcontains: \"contient\",\r\n\t\tnotContains: \"ne contient\",\r\n\t\tequal: \"égal\",\r\n\t\tnotEqual: \"pas égal\",\r\n\t\tbeginsWith: \"commence par\",\r\n\t\tnotBeginsWith: \"ne commence par\",\r\n\t\tendsWith: \"se termine par\",\r\n\t\tnotEndsWith: \"pas se termine par\",\r\n\t\tbetween: \"entre\",\r\n\t\tnotBetween: \"pas entre\"\r\n\t}\r\n};\r\n\r\nexport default fr;","/*Italian (Italy) locale*/\r\nconst it = {\r\n\tgroupDelimiter:\".\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\tdateFormat:\"%d/%m/%Y\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%j %F %Y\",\r\n\tfullDateFormat:\"%j %F %Y %H:%i\",\r\n\tam:null,\r\n\tpm:null,\r\n\tprice:\"€ {obj}\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\".\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\",\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tcalendar:{\r\n\t\tmonthFull:[\"gennaio\",\"febbraio\",\"marzo\",\"aprile\",\"maggio\",\"giugno\",\"luglio\",\"agosto\",\"settembre\",\"ottobre\",\"novembre\",\"dicembre\"],\r\n\t\tmonthShort:[\"gen\",\"feb\",\"mar\",\"apr\",\"mag\",\"giu\",\"lug\",\"ago\",\"set\",\"ott\",\"nov\",\"dic\"],\r\n\t\tdayFull:[\"domenica\",\"lunedì\",\"martedì\",\"mercoledì\",\"giovedì\",\"venerdì\",\"sabato\"],\r\n\t\tdayShort:[\"dom\",\"lun\",\"mar\",\"mer\",\"gio\",\"ven\",\"sab\"],\r\n\t\thours: \"Orario\",\r\n\t\tminutes: \"Minuti\",\r\n\t\tdone:\"Pronto\",\r\n\t\tclear: \"Pulisci\",\r\n\t\ttoday: \"Oggi\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Pagina\",\r\n\t\tof:\"di\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"di\",\r\n\t\tautomaticZoom:\"Zoom automatico\",\r\n\t\tactualSize:\"Dimensione reale\",\r\n\t\tpageFit:\"Dimensioni della pagina\",\r\n\t\tpageWidth:\"Larghezza della pagina\",\r\n\t\tpageHeight:\"Altezza della pagina\",\r\n\t\tenterPassword:\"Inserisci la password\",\r\n\t\tpasswordError:\"Password errata\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Calendario\",\r\n\t\tincreaseValue:\"Aumenta il valore\",\r\n\t\tdecreaseValue:\"Riduci il valore\",\r\n\t\tnavMonth:[\"Il mese scorso\", \"Il prossimo mese\"],\r\n\t\tnavYear:[\"L'anno scorso\", \"L'anno prossimo\"],\r\n\t\tnavDecade:[\"Decennio precedente\", \"Prossimo decennio\"],\r\n\t\tdateFormat:\"%j %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Orario: %H\",\r\n\t\tminuteFormat:\"Minuti: %i\",\r\n\t\tremoveItem:\"Rimuovere l'elemento\",\r\n\t\tpages:[\"Prima pagina\", \"Pagina precedente\", \"Pagina successiva\", \"Ultima pagina\"],\r\n\t\tpage:\"Pagina\",\r\n\t\theadermenu:\"Menu del titolo\",\r\n\t\topenGroup:\"Aperto gruppo di colonne\",\r\n\t\tcloseGroup:\"Chiudi gruppo di colonne\",\r\n\t\tcloseTab:\"Chiudi tab\",\r\n\t\tshowTabs:\"Mostra più tabs\",\r\n\t\tresetTreeMap:\"Tornare alla vista originale\",\r\n\t\tnavTreeMap:\"Livello superiore\",\r\n\t\tnextTab:\"Tab successivo\",\r\n\t\tprevTab:\"Tab precedente\",\r\n\t\tmultitextSection:\"Aggiungi elemento\",\r\n\t\tmultitextextraSection:\"Rimuovere l'elemento\",\r\n\t\tshowChart:\"Mostrare grafico\",\r\n\t\thideChart:\"Nascondere grafico\",\r\n\t\tresizeChart:\"Ridimensionare grafico\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Sottolineare\",\r\n\t\tbold: \"Grassetto\",\r\n\t\titalic: \"Corsivo\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Selezionare\",\r\n\t\tselectAll:\"Seleziona tutto\",\r\n\t\tunselectAll:\"Deseleziona tutto\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Annullare\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Inviare\",\r\n\t\tconfirmMessage: \"Il commento verrà rimosso. Sei sicuro?\",\r\n\t\tedit: \"Correggere\",\r\n\t\tremove: \"Elimina\",\r\n\t\tplaceholder: \"Digitare qui..\",\r\n\t\tmoreComments:\"Altri commenti\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"meno\",\r\n\t\tlessOrEqual: \"minore o uguale\",\r\n\t\tgreater: \"maggiore\",\r\n\t\tgreaterOrEqual: \"maggiore o uguale\",\r\n\t\tcontains: \"contiene\",\r\n\t\tnotContains: \"non contiene\",\r\n\t\tequal: \"uguale\",\r\n\t\tnotEqual: \"non uguale\",\r\n\t\tbeginsWith: \"inizia con\",\r\n\t\tnotBeginsWith: \"non inizia con\",\r\n\t\tendsWith: \"finisce con\",\r\n\t\tnotEndsWith: \"non termina con\",\r\n\t\tbetween: \"tra\",\r\n\t\tnotBetween: \"non tra\"\r\n\t}\r\n};\r\n\r\nexport default it;","const ja = {\r\n\tgroupDelimiter:\",\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\".\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%Y.%m.%d\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%Y年%m月%d日\",\r\n\tfullDateFormat:\"%Y.%m.%d %H:%i\",\r\n\r\n\tprice:\"¥{obj}\",\r\n\tpriceSettings:{\r\n\t\tgroupSize:3,\r\n\t\tgroupDelimiter:\",\",\r\n\t\tdecimalDelimiter:\"\",\r\n\t\tdecimalSize:0\r\n\t},\r\n\r\n\tcalendar:{\r\n\t\tmonthFull:[\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tmonthShort:[ \"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tdayFull:[\"日曜日\", \"月曜日\", \"火曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"],\r\n\t\tdayShort:[\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"],\r\n\t\thours: \"営業時間\",\r\n\t\tminutes: \"分\",\r\n\t\tdone: \"レディー\",\r\n\t\tclear: \"削除する\",\r\n\t\ttoday: \"今日\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"ページ\",\r\n\t\tof:\"から\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"から\",\r\n\t\tautomaticZoom:\"自動ズーム\",\r\n\t\tactualSize:\"実サイズ\",\r\n\t\tpageFit:\"ページサイズ\",\r\n\t\tpageWidth:\"ページ幅\",\r\n\t\tpageHeight:\"ページの高さ\",\r\n\t\tenterPassword:\"パスワードを入力する\",\r\n\t\tpasswordError:\"間違ったパスワード\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"カレンダー\",\r\n\t\tincreaseValue:\"増加値\",\r\n\t\tdecreaseValue:\"数字を小さく\",\r\n\t\tnavMonth:[\"前の月\", \"来月\"],\r\n\t\tnavYear:[\"前年\", \"来年\"],\r\n\t\tnavDecade:[\"前の十年\", \"次の10年\"],\r\n\t\tdateFormat:\"%Y年%m月%d日\",\r\n\t\tmonthFormat:\"%Y年%m月\",\r\n\t\tyearFormat:\"%Y年\",\r\n\t\thourFormat:\"営業時間: %H\",\r\n\t\tminuteFormat:\"分: %i\",\r\n\t\tremoveItem:\"要素を削除します\",\r\n\t\tpages:[\"一ページ目\", \"前のページ\", \"次のページ\", \"最後のページ\"],\r\n\t\tpage:\"ページ\",\r\n\t\theadermenu:\"ヘッダメニュー\",\r\n\t\topenGroup:\"オープン列グループ\",\r\n\t\tcloseGroup:\"閉じる列グループ\",\r\n\t\tcloseTab:\"タブを閉じます\",\r\n\t\tshowTabs:\"複数のタブを表示します\",\r\n\t\tresetTreeMap:\"元の表示に戻ります\",\r\n\t\tnavTreeMap:\"レベルパック\",\r\n\t\tnextTab:\"次のタブ\",\r\n\t\tprevTab:\"前のタブ\",\r\n\t\tmultitextSection:\"要素を追加します。\",\r\n\t\tmultitextextraSection:\"要素を削除します\",\r\n\t\tshowChart:\"靴チャート\",\r\n\t\thideChart:\"隠すチャート\",\r\n\t\tresizeChart:\"グラフのサイズを変更\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"アンダーライン\",\r\n\t\tbold: \"大胆な\",\r\n\t\titalic: \"イタリック\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"選択する\",\r\n\t\tselectAll:\"すべて選択\",\r\n\t\tunselectAll:\"すべての選択を解除する\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"取り消す\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"送信\",\r\n\t\tconfirmMessage: \"コメントは削除されます. 本気ですか？\",\r\n\t\tedit: \"編集\",\r\n\t\tremove: \"削除\",\r\n\t\tplaceholder: \"ここに入力..\",\r\n\t\tmoreComments:\"その他のコメント\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"レス\",\r\n\t\tlessOrEqual: \"以下\",\r\n\t\tgreater: \"大きいです\",\r\n\t\tgreaterOrEqual: \"以上\",\r\n\t\tcontains: \"含まれています\",\r\n\t\tnotContains: \"含まれていません\",\r\n\t\tequal: \"等しいです\",\r\n\t\tnotEqual: \"等しくありません\",\r\n\t\tbeginsWith: \"で始まります\",\r\n\t\tnotBeginsWith: \"ないで始まります\",\r\n\t\tendsWith: \"で終わります\",\r\n\t\tnotEndsWith: \"で終わりではありません\",\r\n\t\tbetween: \"間に\",\r\n\t\tnotBetween: \"いない間\"\r\n\t}\r\n};\r\n\r\nexport default ja;","const pt = {\r\n\tgroupDelimiter:\".\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%d/%m/%Y\",\r\n\ttimeFormat:\"%G:%i\",\r\n\tlongDateFormat:\"%d de %F de %Y\",\r\n\tfullDateFormat:\"%d de %F de %Y %G:%i\",\r\n\r\n\tam:null,\r\n\tpm:null,\r\n\tprice:\"R$ {obj}\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\".\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\",\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tfileSize: [\"b\",\"Kb\",\"Mb\",\"Gb\",\"Tb\",\"Pb\",\"Eb\"],\r\n\tcalendar:{\r\n\t\tmonthFull:[\"Janeiro\",\"Fevereiro\",\"Março\",\"Abril\",\"Maio\",\"Junho\",\"Julho\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Dezembro\"],\r\n\t\tmonthShort:[\"Jan\",\"Fev\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dez\"],\r\n\t\tdayFull:[\"Domingo\",\"Segunda-Feira\",\"Terça-Feira\",\"Quarta-Feira\",\"Quinta-Feira\",\"Sexta-Feira\",\"Sábado\"],\r\n\t\tdayShort:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sáb\"],\r\n\t\thours: \"Horas\",\r\n\t\tminutes: \"Minutos\",\r\n\t\tdone:\"Feito\",\r\n\t\tclear: \"Limpar\",\r\n\t\ttoday: \"Hoje\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Página\",\r\n\t\tof:\"de\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"de\",\r\n\t\tautomaticZoom:\"Zoom automático\",\r\n\t\tactualSize:\"Tamanho atual\",\r\n\t\tpageFit:\"Tamanho da página\",\r\n\t\tpageWidth:\"Largura da página\",\r\n\t\tpageHeight:\"Altura da página\",\r\n\t\tenterPassword:\"Digite a senha\",\r\n\t\tpasswordError:\"Senha incorreta\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Calendário\",\r\n\t\tincreaseValue:\"Aumentar o valor\",\r\n\t\tdecreaseValue:\"Diminuir o valor\",\r\n\t\tnavMonth:[\"Mês anterior\", \"Próximo mês\"],\r\n\t\tnavYear:[\"Ano anterior\", \"Próximo ano\"],\r\n\t\tnavDecade:[\"Década anterior\", \"Próxima década\"],\r\n\t\tdateFormat:\"%d de %F de %Y\",\r\n\t\tmonthFormat:\"%F de %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Horas: %G\",\r\n\t\tminuteFormat:\"Minutos: %i\",\r\n\t\tremoveItem:\"Remover elemento\",\r\n\t\tpages:[\"Primeira página\", \"Página anterior\", \"Próxima página\", \"Última página\"],\r\n\t\tpage:\"Página\",\r\n\t\theadermenu:\"Menu de títulos\",\r\n\t\topenGroup:\"Grupo coluna aberta\",\r\n\t\tcloseGroup:\"Fechar grupo de colunas\",\r\n\t\tcloseTab:\"Fechar tab\",\r\n\t\tshowTabs:\"Mostre mais tabs\",\r\n\t\tresetTreeMap:\"Мoltar à vista original\",\r\n\t\tnavTreeMap:\"Upar\",\r\n\t\tnextTab:\"Próximo tab\",\r\n\t\tprevTab:\"Anterior tab\",\r\n\t\tmultitextSection:\"Adicionar elemento\",\r\n\t\tmultitextextraSection:\"Remover elemento\",\r\n\t\tshowChart:\"Exposição chart\",\r\n\t\thideChart:\"Esconder chart\",\r\n\t\tresizeChart:\"Redimensionar chart\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Sublinhado\",\r\n\t\tbold: \"Negrito\",\r\n\t\titalic: \"itálico\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Selecionar\",\r\n\t\tselectAll:\"Selecionar tudo\",\r\n\t\tunselectAll:\"Desmarque todos\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Cancelar\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Enviar\",\r\n\t\tconfirmMessage: \"Comentário será removido. Você tem certeza?\",\r\n\t\tedit: \"Editar\",\r\n\t\tremove: \"Excluir\",\r\n\t\tplaceholder: \"Digite aqui..\",\r\n\t\tmoreComments:\"Mais comentários\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"menos\",\r\n\t\tlessOrEqual: \"menor ou igual\",\r\n\t\tgreater: \"maior\",\r\n\t\tgreaterOrEqual: \"maior ou igual\",\r\n\t\tcontains: \"contém\",\r\n\t\tnotContains: \"não contém\",\r\n\t\tequal: \"igual\",\r\n\t\tnotEqual: \"não é igual\",\r\n\t\tbeginsWith: \"começa com\",\r\n\t\tnotBeginsWith: \"não começa com\",\r\n\t\tendsWith: \"termina com\",\r\n\t\tnotEndsWith: \"não termina com\",\r\n\t\tbetween: \"entre\",\r\n\t\tnotBetween: \"não entre\"\r\n\t}\r\n};\r\n\r\nexport default pt;","/*Chinese (Simplified, PRC) locale*/\r\nconst zh = {\r\n\tgroupDelimiter:\",\",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\".\",\r\n\tdecimalSize:2,\r\n\tdateFormat:\"%Y/%m/%j\",\r\n\ttimeFormat:\"%G:%i\",\r\n\tlongDateFormat:\"%Y'年'%m'月'%j'日'\",\r\n\tfullDateFormat:\"%Y'年'%m'月'%j'日' %G:%i\",\r\n\tam:[\"上午\",\"上午\"],\r\n\tpm:[\"下午\",\"下午\"],\r\n\tprice:\"¥{obj}\",\r\n\tpriceSettings:{\r\n\t\tgroupDelimiter:\",\",\r\n\t\tgroupSize:3,\r\n\t\tdecimalDelimiter:\".\",\r\n\t\tdecimalSize:2\r\n\t},\r\n\tcalendar:{\r\n\t\tmonthFull:[\"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\"],\r\n\t\tmonthShort:[\"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\"],\r\n\t\tdayFull:[\"星期日\",\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\"],\r\n\t\tdayShort:[\"周日\",\"周一\",\"周二\",\"周三\",\"周四\",\"周五\",\"周六\"],\r\n\t\thours: \"小时\",\r\n\t\tminutes: \"分钟\",\r\n\t\tdone:\"完成\",\r\n\t\tclear: \"清除\",\r\n\t\ttoday: \"今天\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"页\",\r\n\t\tof:\"从\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"从\",\r\n\t\tautomaticZoom:\"自动设置页面大小\",\r\n\t\tactualSize:\"实际尺寸\",\r\n\t\tpageFit:\"页面大小\",\r\n\t\tpageWidth:\"页面宽度\",\r\n\t\tpageHeight:\"页面高度\",\r\n\t\tenterPassword:\"输入密码\",\r\n\t\tpasswordError:\"密码错误\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"日历\",\r\n\t\tincreaseValue:\"增加值\",\r\n\t\tdecreaseValue:\"减少值\",\r\n\t\tnavMonth:[\"上个月\", \"下个月\"],\r\n\t\tnavYear:[\"上年\", \"明年\"],\r\n\t\tnavDecade:[\"过去十年\", \"下个十年\"],\r\n\t\tdateFormat:\"%Y'年'%m'月'%j'日'\",\r\n\t\tmonthFormat:\"%Y'年'%m'月\",\r\n\t\tyearFormat:\"%Y'年\",\r\n\t\thourFormat:\"小时: %G\",\r\n\t\tminuteFormat:\"分钟: %i\",\r\n\t\tremoveItem:\"删除元素\",\r\n\t\tpages:[\"第一页\", \"上一页\", \"下一页\", \"最后一页\"],\r\n\t\tpage:\"页\",\r\n\t\theadermenu:\"标题菜单\",\r\n\t\topenGroup:\"打开栏目组\",\r\n\t\tcloseGroup:\"关闭栏目组\",\r\n\t\tcloseTab:\"关闭标签\",\r\n\t\tshowTabs:\"显示更多选项卡\",\r\n\t\tresetTreeMap:\"回到原来的视图\",\r\n\t\tnavTreeMap:\"升级\",\r\n\t\tnextTab:\"下一个标签\",\r\n\t\tprevTab:\"前一个标签\",\r\n\t\tmultitextSection:\"加元\",\r\n\t\tmultitextextraSection:\"删除元素\",\r\n\t\tshowChart:\"显示图表\",\r\n\t\thideChart:\"隐藏图表\",\r\n\t\tresizeChart:\"调整图\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"强调\",\r\n\t\tbold: \"粗體\",\r\n\t\titalic: \"斜体\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"选择\",\r\n\t\tselectAll:\"全选\",\r\n\t\tunselectAll:\"全部取消选择\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"好\",\r\n\t\tcancel:\"取消\"  \r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"发送\",\r\n\t\tconfirmMessage: \"评论将被删除. 你确定吗?\",\r\n\t\tedit: \"编辑\",\r\n\t\tremove: \"去掉\",\r\n\t\tplaceholder: \"在此输入..\",\r\n\t\tmoreComments:\"更多评论\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"减\",\r\n\t\tlessOrEqual: \"少于或等于\",\r\n\t\tgreater: \"更大\",\r\n\t\tgreaterOrEqual: \"大于或等于\",\r\n\t\tcontains: \"包含\",\r\n\t\tnotContains: \"不包含\",\r\n\t\tequal: \"等于\",\r\n\t\tnotEqual: \"不平等\",\r\n\t\tbeginsWith: \"开始于\",\r\n\t\tnotBeginsWith: \"不开始\",\r\n\t\tendsWith: \"结束\",\r\n\t\tnotEndsWith: \"不是以\",\r\n\t\tbetween: \"之间\",\r\n\t\tnotBetween: \"不在之间\"\r\n\t}\r\n};\r\n\r\nexport default zh;","const ru = {\r\n\tgroupDelimiter:\" \",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%d.%m.%Y\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%d %F %Y\",\r\n\tfullDateFormat:\"%d.%m.%Y %H:%i\",\r\n\r\n\tprice:\"{obj} руб.\",\r\n\tpriceSettings:null, //use number defaults\r\n\t\r\n\tcalendar:{\r\n\t\tmonthFull:[\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Maй\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Oктябрь\", \"Ноябрь\", \"Декабрь\"],\r\n\t\tmonthShort:[\"Янв\", \"Фев\", \"Maр\", \"Aпр\", \"Maй\", \"Июн\", \"Июл\", \"Aвг\", \"Сен\", \"Окт\", \"Ноя\", \"Дек\"],\r\n\t\tdayFull:[ \"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\"],\r\n\t\tdayShort:[\"Вс\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"],\r\n\t\thours: \"Часы\",\r\n\t\tminutes: \"Минуты\",\r\n\t\tdone: \"Гoтовo\",\r\n\t\tclear: \"Очистить\",\r\n\t\ttoday: \"Сегодня\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Страница\",\r\n\t\tof:\"из\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"из\",\r\n\t\tautomaticZoom:\"Автоматический зум\",\r\n\t\tactualSize:\"Настоящий размер\",\r\n\t\tpageFit:\"Размер страницы\",\r\n\t\tpageWidth:\"Ширина страницы\",\r\n\t\tpageHeight:\"Высота страницы\",\r\n\t\tenterPassword:\"Введите пароль\",\r\n\t\tpasswordError:\"Неверный пароль\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Календарь\",\r\n\t\tincreaseValue:\"Увеличить значение\",\r\n\t\tdecreaseValue:\"Уменьшить значение\",\r\n\t\tnavMonth:[\"Предыдущий месяц\", \"Следующий месяц\"],\r\n\t\tnavYear:[\"Предыдущий год\", \"Следующий год\"],\r\n\t\tnavDecade:[\"Предыдущие десять лет\", \"Следующие десять лет\"],\r\n\t\tdateFormat:\"%d %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Часы: %H\",\r\n\t\tminuteFormat:\"Минуты: %i\",\r\n\t\tremoveItem:\"Удалить элемент\",\r\n\t\tpages:[\"Первая страница\", \"Предыдущая страница\", \"Следующая страница\", \"Последняя страница\"],\r\n\t\tpage:\"Страница\",\r\n\t\theadermenu:\"Меню шапки таблицы\",\r\n\t\topenGroup:\"Развернуть группу столбцов\",\r\n\t\tcloseGroup:\"Свернуть группу столбцов\",\r\n\t\tcloseTab:\"Закрыть вкладку\",\r\n\t\tshowTabs:\"Показать больше вкладок\",\r\n\t\tresetTreeMap:\"Вернуться к первоначальному представлению\",\r\n\t\tnavTreeMap:\"Перейти на уровень выше\",\r\n\t\tnextTab:\"Следующая вкладка\",\r\n\t\tprevTab:\"Предыдущая вкладка\",\r\n\t\tmultitextSection:\"Добавить элемент\",\r\n\t\tmultitextextraSection:\"Удалить элемент\",\r\n\t\tshowChart:\"Показать чарт\",\r\n\t\thideChart:\"Спрятать чарт\",\r\n\t\tresizeChart:\"Изменить размер чарта\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Подчеркивание\",\r\n\t\tbold: \"Жирный\",\r\n\t\titalic: \"Курсив\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Выбрать\",\r\n\t\tselectAll:\"Выбрать все\",\r\n\t\tunselectAll:\"Сброс выбора\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"OK\",\r\n\t\tcancel:\"Отмена\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Отправить\",\r\n\t\tconfirmMessage: \"Комментарий будет удален. Вы уверены?\",\r\n\t\tedit: \"Редактировать\",\r\n\t\tremove: \"Удалить\",\r\n\t\tplaceholder: \"Введите текст..\",\r\n\t\tmoreComments:\"Больше комментариев\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"меньше\",\r\n\t\tlessOrEqual: \"меньше или равно\",\r\n\t\tgreater: \"больше\",\r\n\t\tgreaterOrEqual: \"больше или равно\",\r\n\t\tcontains: \"содержит\",\r\n\t\tnotContains: \"не содержит\",\r\n\t\tequal: \"равно\",\r\n\t\tnotEqual: \"не равно\",\r\n\t\tbeginsWith: \"начинается с\",\r\n\t\tnotBeginsWith: \"не начинается с\",\r\n\t\tendsWith: \"заканчиватся\",\r\n\t\tnotEndsWith: \"не заканчиватся\",\r\n\t\tbetween: \"между\",\r\n\t\tnotBetween: \"не между\"\r\n\t}\r\n};\r\n\r\nexport default ru;","const be = {\r\n\tgroupDelimiter:\" \",\r\n\tgroupSize:3,\r\n\tdecimalDelimiter:\",\",\r\n\tdecimalSize:2,\r\n\r\n\tdateFormat:\"%d.%m.%Y\",\r\n\ttimeFormat:\"%H:%i\",\r\n\tlongDateFormat:\"%d %F %Y\",\r\n\tfullDateFormat:\"%d.%m.%Y %H:%i\",\r\n\r\n\tprice:\"{obj} руб.\",\r\n\tpriceSettings:{\r\n\t\tgroupSize:3,\r\n\t\tgroupDelimiter:\" \",\r\n\t\tdecimalDelimiter:\"\",\r\n\t\tdecimalSize:0\r\n\t},\r\n\r\n\tcalendar:{\r\n\t\tmonthFull:[\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Травень\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],\r\n\t\tmonthShort:[\"Студз\", \"Лют\", \"Сак\", \"Крас\", \"Трав\", \"Чэр\", \"Ліп\", \"Жнів\", \"Вер\", \"Каст\", \"Ліст\", \"Снеж\"],\r\n\t\tdayFull:[ \"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\"],\r\n\t\tdayShort:[\"Нд\", \"Пн\", \"Аўт\", \"Ср\", \"Чцв\", \"Пт\", \"Сб\"],\r\n\t\thours: \"Гадзіны\",\r\n\t\tminutes: \"Хвіліны\",\r\n\t\tdone: \"Гатова\",\r\n\t\ttoday: \"Cёння\",\r\n\t\tclear: \"Ачысціць\"\r\n\t},\r\n\r\n\tdataExport:{\r\n\t\tpage:\"Старонка\",\r\n\t\tof:\"з\"\r\n\t},\r\n\tPDFviewer:{\r\n\t\tof:\"з\",\r\n\t\tautomaticZoom:\"Аўтаматычны зум\",\r\n\t\tactualSize:\"Сапраўдны памер\",\r\n\t\tpageFit:\"Памер старонкі\",\r\n\t\tpageWidth:\"Шырыня старонкі\",\r\n\t\tpageHeight:\"Вышыня старонкі\",\r\n\t\tenterPassword:\"Увядзіце пароль\",\r\n\t\tpasswordError:\"Няправільны пароль\"\r\n\t},\r\n\taria:{\r\n\t\tcalendar:\"Каляндар\",\r\n\t\tincreaseValue:\"Павялічыць значэнне\",\r\n\t\tdecreaseValue:\"Паменшыць значэнне\",\r\n\t\tnavMonth:[\"Папярэдні месяц\", \"Наступны месяц\"],\r\n\t\tnavYear:[\"Папярэдні год\", \"Наступны год\"],\r\n\t\tnavDecade:[\"Папярэднія дзесяць год\", \"Наступныя дзесяць год\"],\r\n\t\tdateFormat:\"%d %F %Y\",\r\n\t\tmonthFormat:\"%F %Y\",\r\n\t\tyearFormat:\"%Y\",\r\n\t\thourFormat:\"Hours: %h\",\r\n\t\tminuteFormat:\"Гадзіны: %i\",\r\n\t\tremoveItem:\"Прыбраць элемент\",\r\n\t\tpages:[\"Першая старонка\", \"Папярэдняя старонка\", \"Наступная старонка\", \"Апошняя старонка\"],\r\n\t\tpage:\"Старонка\",\r\n\t\theadermenu:\"Меню загалоўка\",\r\n\t\topenGroup:\"Адкрыць групу слупкоў\",\r\n\t\tcloseGroup:\"Закрыць групу слупкоў\",\r\n\t\tcloseTab:\"Закрыць укладку\",\r\n\t\tshowTabs:\"Паказаць больш укладак\",\r\n\t\tresetTreeMap:\"Вярнуцца да першапачатковага выгляду\",\r\n\t\tnavTreeMap:\"Падняцца на ўзровень вышэй\",\r\n\t\tnextTab:\"Наступная ўкладка\",\r\n\t\tprevTab:\"Папярэдняя ўкладка\",\r\n\t\tmultitextSection:\"Дадаць элемент\",\r\n\t\tmultitextextraSection:\"Прыбраць элемент\",\r\n\t\tshowChart:\"Паказаць графік\",\r\n\t\thideChart:\"Схаваць графік\",\r\n\t\tresizeChart:\"Змяніць памер графіка\"\r\n\t},\r\n\trichtext:{\r\n\t\tunderline: \"Падкрэсліванне\",\r\n\t\tbold: \"Паўтлусты\",\r\n\t\titalic: \"Курсіў\"\r\n\t},\r\n\tcombo:{\r\n\t\tselect:\"Абраць\",\r\n\t\tselectAll:\"Абраць усё\",\r\n\t\tunselectAll:\"Ачысціць ўсе\"\r\n\t},\r\n\tmessage:{\r\n\t\tok:\"ОК\",\r\n\t\tcancel:\"Адмена\"\r\n\t},\r\n\tcomments:{\r\n\t\tsend: \"Даслаць\",\r\n\t\tconfirmMessage: \"Каментарый будзе выдалены. Вы ўпэўнены?\",\r\n\t\tedit: \"Рэдагаваць\",\r\n\t\tremove: \"Выдаліць\",\r\n\t\tplaceholder: \"Пішыце тут..\",\r\n\t\tmoreComments:\"Больш каментарыяў\"\r\n\t},\r\n\tfilter:{\r\n\t\tless: \"менш\",\r\n\t\tlessOrEqual: \"менш або роўна\",\r\n\t\tgreater: \"больш\",\r\n\t\tgreaterOrEqual: \"больш або роўна\",\r\n\t\tcontains: \"змяшчае\",\r\n\t\tnotContains: \"не змяшчае\",\r\n\t\tequal: \"роўныя\",\r\n\t\tnotEqual: \"не роўныя\",\r\n\t\tbeginsWith: \"пачынаецца з\",\r\n\t\tnotBeginsWith: \"не пачынаецца з\",\r\n\t\tendsWith: \"заканчваецца\",\r\n\t\tnotEndsWith: \"не сканчаецца\",\r\n\t\tbetween: \"паміж\",\r\n\t\tnotBetween: \"не паміж\"\r\n\t}\r\n};\r\n\r\nexport default be;","import {assert} from \"../webix/debug\";\r\nimport {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\n\r\nimport {callEvent} from \"../webix/customevents\";\r\nimport {insertBefore, remove} from \"../webix/html\";\r\nimport {extend, _power_array, isUndefined, copy} from \"../webix/helpers\";\r\nimport {_each} from \"../ui/helpers\";\r\n\r\nimport {$$,ui,protoUI} from \"../ui/core\";\r\n\r\nimport state from \"../core/state\";\r\nimport IdSpace from \"../core/idspace\";\r\nimport EventSystem from \"../core/eventsystem\";\r\n\r\nimport base from \"./baseview\";\r\n\r\nconst api = {\r\n\tname:\"baselayout\",\r\n\trestore:function(state, factory, configOnly){\r\n\t\tvar out = this._restore(copy(state), factory);\r\n\t\tif (configOnly)\r\n\t\t\treturn out;\r\n\t\telse\r\n\t\t\tui((out.cols || out.rows), this);\r\n\t},\r\n\t_restore:function(state, factory){\r\n\t\tif (state.$layout){\r\n\t\t\tvar sub = state.cols || state.rows;\r\n\t\t\tfor (var i = 0; i < sub.length; i++) {\r\n\t\t\t\tsub[i] = this._restore(sub[i], factory);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn factory.call(this, state);\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t},\r\n\tserialize:function(serializer){\r\n\t\tvar out = [];\r\n\t\tvar childs = this.getChildViews();\r\n\r\n\t\tfor (var i=0; i<childs.length; i++){\r\n\t\t\tvar sub = childs[i];\r\n\t\t\tif (sub.movePortlet){\r\n\t\t\t\tvar child = sub.getChildViews();\r\n\t\t\t\tout.push(serializer.call(this, child[child.length-1]));\r\n\t\t\t} else if (sub.serialize){\r\n\t\t\t\t// some kind of layout\r\n\t\t\t\tout.push(sub.serialize(serializer, true));\r\n\t\t\t} else {\r\n\t\t\t\t// leaf view\r\n\t\t\t\tout.push(serializer.call(this, sub));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar obj = { $layout: true, type: this.config.type };\r\n\t\tif (this.config.rows)\r\n\t\t\tobj.rows = out;\r\n\t\telse\r\n\t\t\tobj.cols = out;\r\n\r\n\t\treturn obj;\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.$ready.push(this._parse_cells);\r\n\t\tthis._dataobj  = this._contentobj;\r\n\t\tthis._layout_sizes = [];\r\n\t\tthis._responsive = [];\r\n\t\tthis._padding = { top:0, left:0, right:0, bottom:0 };\r\n\r\n\t\tif (config.$topView){\r\n\t\t\tconfig.borderless = true;\r\n\t\t\tconfig._inner = { top:true, left:true, bottom:true, right:true };\r\n\t\t}\r\n\r\n\t\tif (config.isolate)\r\n\t\t\textend(this, IdSpace);\r\n\t},\r\n\trows_setter:function(value){\r\n\t\tthis._vertical_orientation = 1;\r\n\t\tthis._collection = value;\r\n\t\treturn true;\r\n\t},\r\n\tcols_setter:function(value){\r\n\t\tthis._vertical_orientation = 0;\r\n\t\tthis.$view.style.whiteSpace = \"nowrap\";\r\n\t\tthis._collection = value;\r\n\t\treturn true;\r\n\t},\r\n\t_remove:function(view){\r\n\t\tvar index = _power_array.find.call(this._cells, view);\r\n\t\tif(this._beforeRemoveView)\r\n\t\t\tthis._beforeRemoveView(index);\r\n\t\t_power_array.removeAt.call(this._cells, index);\r\n\t\tthis._fix_hidden_cells(true);\r\n\t},\r\n\t_fix_hidden_cells(resize){\r\n\t\tthis._hiddencells = 0;\r\n\t\tfor (let i = 0; i < this._cells.length; i++){\r\n\t\t\tconst cell = this._cells[i];\r\n\t\t\tif (cell._settings.hidden || cell.$nospace)\r\n\t\t\t\tthis._hiddencells++;\r\n\t\t}\r\n\r\n\t\tif (resize)\r\n\t\t\tthis.resizeChildren(true);\r\n\t},\r\n\t_replace:function(new_view,target_id){\r\n\t\tif (isUndefined(target_id)){\r\n\t\t\tfor (var i=0; i < this._cells.length; i++)\r\n\t\t\t\tthis._cells[i].destructor();\r\n\t\t\tthis._collection = new_view;\r\n\t\t\tthis._parse_cells();\r\n\t\t} else {\r\n\t\t\tvar source;\r\n\t\t\tif (typeof target_id == \"number\"){\r\n\t\t\t\tif (target_id<0 || target_id > this._cells.length)\r\n\t\t\t\t\ttarget_id = this._cells.length;\r\n\t\t\t\t_power_array.insertAt.call(this._cells, new_view, target_id);\r\n\t\t\t\tif (!new_view._settings.hidden)\r\n\t\t\t\t\tthis._insertBeforeView(new_view, this._cells[target_id]);\r\n\t\t\t} else {\r\n\t\t\t\tsource = $$(target_id);\r\n\t\t\t\ttarget_id = _power_array.find.call(this._cells, source);\r\n\t\t\t\tassert(target_id!=-1, \"Attempt to replace the non-existing view\");\r\n\t\t\t\tif (!new_view._settings.hidden)\r\n\t\t\t\t\tthis._insertBeforeView(new_view, source);\r\n\t\t\t\tsource.destructor();\t\r\n\t\t\t\tthis._cells[target_id] = new_view;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._vertical_orientation)\r\n\t\t\t\tthis._fix_vertical_layout(new_view);\r\n\t\t}\r\n\t\tthis._fix_hidden_cells(true);\r\n\r\n\t\tvar form = this.elements ? this : this.getFormView();\r\n\t\tif (form && !this._fill_data) form._recollect_elements();\r\n\r\n\t\tcallEvent(\"onReconstruct\",[this]);\r\n\t},\r\n\t_fix_vertical_layout:function(cell){\r\n\t\tcell._viewobj.style.display = \"inline-block\";\r\n\t\tcell._viewobj.style.verticalAlign = \"top\";\r\n\t},\r\n\taddView:function(view, index){\r\n\t\tif (isUndefined(index))\r\n\t\t\tindex = this._cells.length;\r\n\t\tvar top = this.$$ ? this : this.getTopParentView();\r\n\t\t\r\n\t\tstate._parent_cell = this;\r\n\t\tvar newui = (top && top.ui) ? top.ui(view, this, index) : ui(view, this, index);\r\n\t\tstate._parent_cell = null;\r\n\r\n\t\treturn newui._settings.id;\r\n\t},\r\n\tremoveView:function(id){\r\n\t\tvar view;\r\n\t\tif (typeof id != \"object\")\r\n\t\t\tview = $$(id) || (this.$$ ? this.$$(id) : null);\r\n\t\telse\r\n\t\t\tview = id;\r\n\r\n\t\tvar target = _power_array.find.call(this._cells, view);\r\n\t\tif (target >= 0){\r\n\t\t\tif (this._beforeRemoveView)\r\n\t\t\t\tthis._beforeRemoveView(target, view);\r\n\r\n\t\t\tvar form = this.elements ? this : this.getFormView();\r\n\r\n\t\t\tthis._cells.splice(target, 1);\r\n\t\t\tif (form)\r\n\t\t\t\t_each(view, function(sub){\r\n\t\t\t\t\tif (sub.name)\r\n\t\t\t\t\t\tdelete form.getCleanValues()[sub.config.name];\r\n\t\t\t\t}, form, true);\t\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\tview.destructor();\r\n\t\t\tthis._fix_hidden_cells(true);\r\n\t\t\t\r\n\t\t\tif (form)\r\n\t\t\t\tform._recollect_elements();\r\n\t\t} else\r\n\t\t\tassert(false, \"Attemp to remove not existing view: \"+id);\r\n\r\n\t\tcallEvent(\"onReconstruct\",[this]);\r\n\t},\r\n\treconstruct:function(){\r\n\t\tthis._hiddencells = 0;\r\n\t\tthis._replace(this._collection);\r\n\t},\r\n\t_hide:function(obj, settings, silent){\r\n\t\tif (obj._settings.hidden) return;\r\n\t\tobj._settings.hidden = true;\r\n\t\tremove(obj._viewobj);\r\n\t\tthis._hiddencells++;\r\n\t\tif (!silent && !state._ui_creation)\r\n\t\t\tthis.resizeChildren(true);\t\r\n\t},\r\n\t_signal_hidden_cells:function(view){\r\n\t\tif (view.callEvent)\r\n\t\t\tview.callEvent(\"onViewShow\",[]);\r\n\t},\r\n\tresizeChildren:function(){\r\n\t\tif (state._freeze_resize) return;\r\n\r\n\t\tif (this._layout_sizes){\r\n\t\t\tvar parent = this.getParentView();\r\n\t\t\tif (parent){\r\n\t\t\t\tif (parent.resizeChildren)\r\n\t\t\t\t\treturn parent.resizeChildren();\r\n\t\t\t\telse\r\n\t\t\t\t\treturn parent.resize();\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tvar sizes = this.$getSize(0,0);\r\n\r\n\t\t\tvar x,y,nx,ny;\r\n\t\t\tnx = x = this._layout_sizes[0] || 0;\r\n\t\t\tny = y = this._layout_sizes[1] || 0;\r\n\r\n\t\t\t//for auto-fill content, use adjust strategy\r\n\t\t\tif ((sizes[1]>=100000 || sizes[3] >= 100000) && this._viewobj.parentNode){\r\n\t\t\t\t//in hidden container adjust doesn't work, so fallback to last known size\r\n\t\t\t\t//also, ensure that min-size is not violated\r\n\t\t\t\tnx = x = Math.max(sizes[0], (this._settings.width || this._viewobj.parentNode.offsetWidth || x || 0));\r\n\t\t\t\tny = y = Math.max(sizes[2], (this._settings.height || this._viewobj.parentNode.offsetHeight || y || 0));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!parent){\r\n\t\t\t\t//minWidth\r\n\t\t\t\tif (sizes[0]>x) nx = sizes[0];\r\n\t\t\t\t//minHeight\r\n\t\t\t\tif (sizes[2]>y) ny = sizes[2];\r\n\r\n\t\t\t\tvar fullscreen = (this._viewobj.parentNode == document.body) && !this.setPosition;\r\n\t\t\t\t//maxWidth rule\r\n\t\t\t\tif (!fullscreen && x>sizes[1]) nx = sizes[1];\r\n\t\t\t\t//maxHeight rule\r\n\t\t\t\tif (!fullscreen && y>sizes[3]) ny = sizes[3];\r\n\r\n\t\t\t\tthis.$setSize(nx,ny);\r\n\t\t\t} else\r\n\t\t\t\tthis._set_child_size(x,y);\r\n\r\n\t\t\tif (state._responsive_exception){\r\n\t\t\t\tstate._responsive_exception = false;\r\n\t\t\t\tthis.resizeChildren();\r\n\t\t\t}\r\n\r\n\t\t\tcallEvent(\"onResize\",[]);\r\n\t\t}\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn this._cells;\r\n\t},\r\n\tindex:function(obj){\r\n\t\tif (obj._settings)\r\n\t\t\tobj = obj._settings.id;\r\n\t\tfor (var i=0; i < this._cells.length; i++)\r\n\t\t\tif (this._cells[i]._settings.id == obj)\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t},\r\n\t_insertBeforeView:function(view, before){\r\n\t\tif (before){\r\n\t\t\tif (before._settings.hidden || view === before){\r\n\t\t\t\t//index of sibling cell, next to which new item will appear\r\n\t\t\t\tvar index = this.index(before)+1;\r\n\t\t\t\t//locate nearest visible cell\r\n\t\t\t\twhile (this._cells[index] && this._cells[index]._settings.hidden) index++;\r\n\t\t\t\tbefore = this._cells[index] ? this._cells[index]._viewobj : null;\r\n\t\t\t} else {\r\n\t\t\t\tbefore = before._viewobj;\r\n\t\t\t}\r\n\t\t}\r\n\t\tinsertBefore(view._viewobj, before, (this._dataobj||this._viewobj));\r\n\t},\r\n\t_show:function(obj, settings, silent){\r\n\t\tif (!obj._settings.hidden) return;\r\n\t\tthis._insertBeforeView(obj, obj);\r\n\t\tobj._settings.hidden = false;\r\n\r\n\t\tthis._hiddencells--;\r\n\r\n\t\tif (!silent){\r\n\t\t\tthis.resizeChildren(true);\r\n\t\t\tif (obj.refresh)\r\n\t\t\t\tobj.refresh();\r\n\t\t}\r\n\r\n\t\tif (obj.callEvent){\r\n\t\t\tobj.callEvent(\"onViewShow\", []);\r\n\t\t\t_each(obj, this._signal_hidden_cells);\r\n\t\t}\r\n\t},\r\n\tshowBatch:function(name, mode){\r\n\t\tvar preserve = typeof mode != \"undefined\";\r\n\t\tmode = mode !== false;\r\n\r\n\t\tif (!preserve){\r\n\t\t\tif (this._settings.visibleBatch == name ) return;\r\n\t\t\tthis._settings.visibleBatch = name;\r\n\t\t} else \r\n\t\t\tthis._settings.visibleBatch = \"\";\r\n\r\n\t\tvar show = [];\r\n\t\tfor (let i=0; i < this._cells.length; i++){\r\n\t\t\tif (!this._cells[i]._settings.batch && !this._cells[i]._settings.hidden) \r\n\t\t\t\tshow.push(this._cells[i]);\r\n\t\t\telse if (this._cells[i]._settings.batch == name){\r\n\t\t\t\tif (mode)\r\n\t\t\t\t\tshow.push(this._cells[i]);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._hide(this._cells[i], null, true);\r\n\t\t\t} else if (!preserve)\r\n\t\t\t\tthis._hide(this._cells[i], null, true);\r\n\t\t}\r\n\r\n\t\tfor (let i=0; i < show.length; i++){\r\n\t\t\tthis._show(show[i], null, true);\r\n\t\t\tshow[i]._render_hidden_views();\r\n\t\t}\r\n\t\t\t\r\n\t\tthis.resizeChildren(true);\r\n\t},\r\n\t_parse_cells:function(collection){\r\n\t\tthis._cells=[];\r\n\r\n\t\tassert(collection,this.name+\" was incorrectly defined. <br><br> You have missed rows|cols|cells|elements collection\"); \r\n\t\tfor (var i=0; i<collection.length; i++){\r\n\t\t\tstate._parent_cell = this;\r\n\t\t\tif (!collection[i]._inner)\r\n\t\t\t\tcollection[i].borderless = true;\r\n\r\n\t\t\tthis._cells[i]=ui._view(collection[i], this);\r\n\t\t\tif (!this._vertical_orientation)\r\n\t\t\t\tthis._fix_vertical_layout(this._cells[i]);\r\n\t\t\t\r\n\t\t\tif (this._settings.visibleBatch && this._settings.visibleBatch != this._cells[i]._settings.batch && this._cells[i]._settings.batch){\r\n\t\t\t\tthis._cells[i]._settings.hidden = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this._cells[i]._settings.hidden){\r\n\t\t\t\t(this._dataobj||this._contentobj).appendChild(this._cells[i]._viewobj);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._fix_hidden_cells();\r\n\t\tif (this._parse_cells_ext_end)\r\n\t\t\tthis._parse_cells_ext_end(collection);\t\r\n\t},\r\n\t_fix_container_borders:function(style, inner){\r\n\t\tif (inner.top) \r\n\t\t\tstyle.borderTopWidth=\"0px\";\r\n\t\tif (inner.left) \r\n\t\t\tstyle.borderLeftWidth=\"0px\";\r\n\t\tif (inner.right) \r\n\t\t\tstyle.borderRightWidth=\"0px\";\r\n\t\tif (inner.bottom) \r\n\t\t\tstyle.borderBottomWidth=\"0px\";\r\n\t},\r\n\t_bubble_size:function(prop, size, vertical){\r\n\t\tif (this._vertical_orientation != vertical)\r\n\t\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\t\tthis._cells[i]._settings[prop] = size;\r\n\t\t\t\tif (this._cells[i]._bubble_size)\r\n\t\t\t\t\tthis._cells[i]._bubble_size(prop, size, vertical);\r\n\t\t\t}\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tif (DEBUG) debug_size_box_start(this, true);\r\n\t\tvar minWidth = 0; \r\n\t\tvar maxWidth = 100000;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\t\tif (this._vertical_orientation) maxHeight=0; else maxWidth = 0;\r\n\t\t\r\n\t\tvar fixed = 0;\r\n\t\tvar fixed_count = 0;\r\n\t\tvar gravity = 0;\r\n\t\tthis._sizes=[];\r\n\r\n\t\tfor (var i=0; i < this._cells.length; i++) {\r\n\t\t\t//ignore hidden cells\r\n\t\t\tif (this._cells[i]._settings.hidden)\r\n\t\t\t\tcontinue;\r\n\t\t\t\r\n\t\t\tvar sizes = this._sizes[i] = this._cells[i].$getSize(0,0);\r\n\r\n\t\t\tif (this._cells[i].$nospace){\r\n\t\t\t\tfixed_count++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (this._vertical_orientation){\r\n\t\t\t\t//take max minSize value\r\n\t\t\t\tif (sizes[0]>minWidth) minWidth = sizes[0];\r\n\t\t\t\t//take min maxSize value\r\n\t\t\t\tif (sizes[1]<maxWidth) maxWidth = sizes[1];\r\n\t\t\t\t\r\n\t\t\t\tminHeight += sizes[2];\r\n\t\t\t\tmaxHeight += sizes[3];\r\n\r\n\t\t\t\tif (sizes[2] == sizes[3] && sizes[2] != -1){ fixed+=sizes[2]; fixed_count++; }\r\n\t\t\t\telse gravity += sizes[4];\r\n\t\t\t} else {\r\n\t\t\t\t//take max minSize value\r\n\t\t\t\tif (sizes[2]>minHeight) minHeight = sizes[2];\r\n\t\t\t\t//take min maxSize value\r\n\t\t\t\tif (sizes[3]<maxHeight) maxHeight = sizes[3];\r\n\t\t\t\t\r\n\t\t\t\tminWidth += sizes[0];\r\n\t\t\t\tmaxWidth += sizes[1];\r\n\r\n\t\t\t\tif (sizes[0] == sizes[1] && sizes[0] != -1){ fixed+=sizes[0]; fixed_count++; }\r\n\t\t\t\telse gravity += sizes[4];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (minHeight>maxHeight)\r\n\t\t\tmaxHeight = minHeight;\r\n\t\tif (minWidth>maxWidth)\r\n\t\t\tmaxWidth = minWidth;\r\n\r\n\t\tthis._master_size = [fixed, this._cells.length - fixed_count, gravity];\r\n\t\tthis._desired_size = [minWidth+dx, minHeight+dy];\r\n\r\n\t\t//get layout sizes\r\n\t\tvar self_size = base.api.$getSize.call(this, 0, 0);\r\n\t\t//use child settings if layout's one was not defined\r\n\t\tif (self_size[1] >= 100000) self_size[1]=0;\r\n\t\tif (self_size[3] >= 100000) self_size[3]=0;\r\n\r\n\t\tself_size[0] = (self_size[0] || minWidth ) +dx;\r\n\t\tself_size[1] = Math.max(self_size[0], (self_size[1] || maxWidth ) +dx);\r\n\t\tself_size[2] = (self_size[2] || minHeight) +dy;\r\n\t\tself_size[3] = Math.max(self_size[2], (self_size[3] || maxHeight) +dy);\r\n\r\n\t\tif (DEBUG) debug_size_box_end(this, self_size);\r\n\r\n\t\tif (!this._vertical_orientation && this._settings.responsive)\r\n\t\t\tself_size[0] = 0;\r\n\r\n\t\treturn self_size;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tthis._layout_sizes = [x,y];\r\n\t\tif (DEBUG) debug_size_box_start(this);\r\n\r\n\t\tbase.api.$setSize.call(this,x,y);\r\n\t\tthis._set_child_size(x,y);\r\n\r\n\t\tif (DEBUG) debug_size_box_end(this, [x,y]);\r\n\t},\r\n\t_set_child_size_a:function(sizes, min, max){\r\n\t\tmin = sizes[min]; max = sizes[max];\r\n\t\tvar height = min;\r\n\r\n\t\tif (min != max){\r\n\t\t\tvar ps = this._set_size_delta * sizes[4]/this._set_size_gravity;\r\n\t\t\tif (ps < min){\r\n\t\t\t\theight = min;\r\n\t\t\t\tthis._set_size_gravity -= sizes[4]; \r\n\t\t\t\tthis._set_size_delta -= height;\r\n\t\t\t} else  if (ps > max){\r\n\t\t\t\theight = max;\r\n\t\t\t\tthis._set_size_gravity -= sizes[4]; \r\n\t\t\t\tthis._set_size_delta -= height;\r\n\t\t\t} else {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn height;\r\n\t},\r\n\t_responsive_hide:function(cell, mode){\r\n\t\tvar target =  $$(mode);\r\n\r\n\t\tif (target === \"hide\" || !target){\r\n\t\t\tcell.hide();\r\n\t\t\tcell._responsive_marker = \"hide\";\r\n\t\t} else{\r\n\t\t\t//for SideBar in Webix 1.9\r\n\t\t\tif (!target)\r\n\t\t\t\ttarget = ui({ view:\"popup\", body:[{}]});\r\n\r\n\t\t\tcell._responsive_width = cell._settings.width;\r\n\t\t\tcell._responsive_height = cell._settings.height;\r\n\t\t\tcell._responsive_marker = target._settings.id;\r\n\t\t\tcell._settings.width = 0;\r\n\t\t\tif (!cell._settings.height)\r\n\t\t\t\tcell._settings.autoheight = true;\r\n\r\n\t\t\tui(cell, target, this._responsive.length);\r\n\t\t}\r\n\r\n\t\tthis._responsive.push(cell);\r\n\t},\r\n\t_responsive_show:function(cell){\r\n\t\tvar target = cell._responsive_marker;\r\n\t\tcell._responsive_marker = 0;\r\n\r\n\t\tif (target === \"hide\" || !target){\r\n\t\t\tcell.show();\r\n\t\t} else {\r\n\t\t\tcell._settings.width = cell._responsive_width;\r\n\t\t\tcell._settings.height = cell._responsive_height;\r\n\t\t\tdelete cell._settings.autoheight;\r\n\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (this._cells[index] && this._cells[index]._settings.responsiveCell === false) index++;\r\n\t\t\tui(cell, this, index);\r\n\t\t}\r\n\t\tthis._responsive.pop();\r\n\t},\r\n\t_responsive_cells:function(x){\r\n\t\tstate._responsive_tinkery = true;\r\n\t\tif (x + this._padding.left + this._padding.right + this._margin * (this._cells.length-1)< this._desired_size[0]){\r\n\t\t\tvar max = this._cells.length - 1;\r\n\t\t\tfor (var i = 0; i < max; i++){\r\n\t\t\t\tlet cell = this._cells[i];\r\n\t\t\t\tif (!cell._responsive_marker){\r\n\t\t\t\t\tif (cell._settings.responsiveCell !== false){\r\n\t\t\t\t\t\tthis._responsive_hide(cell, this._settings.responsive);\r\n\t\t\t\t\t\tcallEvent(\"onResponsiveHide\", [cell._settings.id]);\r\n\t\t\t\t\t\tstate._responsive_exception = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmax = this._cells.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else  if (this._responsive.length){\r\n\t\t\tlet cell = this._responsive[this._responsive.length-1];\r\n\t\t\tvar dx = cell._responsive_marker == \"hide\" ? 0 : cell._responsive_width;\r\n\t\t\tvar px = cell.$getSize(dx,0);\r\n\t\t\tif (px[0] + this._desired_size[0] + this._margin + 20 <= x ){\r\n\t\t\t\tthis._responsive_show(cell);\r\n\t\t\t\tcallEvent(\"onResponsiveShow\", [cell._settings.id]);\r\n\t\t\t\tstate._responsive_exception = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstate._responsive_tinkery = false;\r\n\t},\r\n\t_set_child_size:function(x,y){ \r\n\t\tstate._child_sizing_active = (state._child_sizing_active||0)+1;\r\n\r\n\t\tif (!this._vertical_orientation && this._settings.responsive)\r\n\t\t\tthis._responsive_cells(x,y);\r\n\r\n\r\n\t\tthis._set_size_delta = (this._vertical_orientation?y:x) - this._master_size[0];\r\n\t\tthis._set_size_gravity = this._master_size[2];\r\n\t\tlet width = x; let height = y;\r\n\r\n\t\tvar auto = [];\r\n\t\tfor (let i=0; i < this._cells.length; i++){\r\n\t\t\t//ignore hidden cells\r\n\t\t\tif (this._cells[i]._settings.hidden || !this._sizes[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tlet sizes = this._sizes[i];\r\n\r\n\t\t\tif (this._vertical_orientation){\r\n\t\t\t\theight = this._set_child_size_a(sizes,2,3);\r\n\t\t\t\tif (height < 0)\t{ auto.push({oldIndex:i, view:this._cells[i]}); continue; }\r\n\t\t\t} else {\r\n\t\t\t\twidth = this._set_child_size_a(sizes,0,1);\r\n\t\t\t\tif (width < 0)\t{ auto.push({oldIndex:i, view:this._cells[i]}); continue; }\r\n\t\t\t}\r\n\t\t\tthis._cells[i].$setSize(width,height);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < auto.length; i++){\r\n\t\t\tvar index = auto[i].oldIndex;\r\n\t\t\tlet sizes = this._sizes[index];\r\n\t\t\tvar dx = Math.round(this._set_size_delta * sizes[4]/this._set_size_gravity);\r\n\t\t\tthis._set_size_delta -= dx; this._set_size_gravity -= sizes[4];\r\n\t\t\tif (this._vertical_orientation)\r\n\t\t\t\theight = dx;\r\n\t\t\telse {\r\n\t\t\t\twidth = dx;\r\n\t\t\t}\r\n\r\n\t\t\tauto[i].view.$setSize(width,height);\r\n\t\t}\r\n\r\n\t\tstate._child_sizing_active -= 1;\r\n\t},\r\n\t_next:function(obj, mode){\r\n\t\tvar index = this.index(obj);\r\n\t\tif (index == -1) return null;\r\n\t\treturn this._cells[index+mode];\r\n\t}, \r\n\t_first:function(){\r\n\t\treturn this._cells[0];\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, EventSystem, base.view);\r\nexport default { api, view };","import {protoUI} from \"../ui/core\";\r\n\r\nimport {extend,bind,toNode,delay} from \"../webix/helpers\";\r\nimport {ajax} from \"../load/ajax\";\r\nimport {create, getTextSize} from \"../webix/html\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\n\r\nimport base from \"./view\";\r\nimport template from \"../webix/template\";\r\n\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport AtomRender from \"../core/atomrender\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport Scrollable from \"../core/scrollable\";\r\n\r\n\r\nconst api = {\r\n\tname:\"template\",\r\n\t$init:function(config){\r\n\t\tconst subtype = this._template_types[config.type];\r\n\t\tif (subtype){\r\n\t\t\tif (subtype.css && config.css)\r\n\t\t\t\tthis._viewobj.className += \" \"+subtype.css;\r\n\t\t\textend(config, subtype);\r\n\r\n\t\t\t//will reset borders for \"section\"\r\n\t\t\tif (config.borderless){\r\n\t\t\t\tdelete config._inner;\r\n\t\t\t\tthis._set_inner(config);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._dataobj == this._viewobj){\r\n\t\t\tthis._dataobj = create(\"DIV\");\r\n\t\t\tthis._dataobj.className = \" webix_template\";\r\n\t\t\tthis._viewobj.appendChild(this._dataobj);\r\n\t\t} else \r\n\t\t\tthis._dataobj.className += \" webix_template\";\r\n\r\n\t\tthis.attachEvent(\"onAfterRender\", this._correct_height);\r\n\t},\r\n\tsetValues:function(obj, update){\r\n\t\tthis.data = update?extend(this.data, obj, true):obj;\r\n\t\tthis.render();\r\n\t},\r\n\tgetValues:function(){\r\n\t\treturn this.data;\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis._template_types.header.height = $active.barHeight - $active.borderWidth*2;\r\n\t\tthis._template_types.section.height = $active.barHeight;\r\n\t},\r\n\t_template_types:{\r\n\t\t\"header\":{\r\n\t\t\tcss:\"webix_header\"\r\n\t\t},\r\n\t\t\"section\":{\r\n\t\t\tcss:\"webix_section\",\r\n\t\t\tborderless:true\r\n\t\t},\r\n\t\t\"clean\":{\r\n\t\t\tcss:\"webix_clean\",\r\n\t\t\tborderless:true\r\n\t\t}\r\n\t},\r\n\tonClick_setter:function(value){\r\n\t\tthis.on_click = extend((this.on_click || {}), value, true);\r\n\r\n\t\tif (!this._onClick)\r\n\t\t\textend(this, MouseEvents);\r\n\r\n\t\treturn value;\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:template.empty\r\n\t},\r\n\t_render_me:function(){\r\n\t\tthis._not_render_me = false;\r\n\t\tthis._probably_render_me();\r\n\t\tthis.resize();\r\n\t},\r\n\t_probably_render_me:function(){\r\n\t\tif (!this._not_render_me){\r\n\t\t\tthis._not_render_me = true;\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tsrc_setter:function(value){\r\n\t\tthis._not_render_me = true;\r\n\t\t\r\n\t\tif(!this.callEvent(\"onBeforeLoad\",[])) \r\n\t\t\treturn \"\";\r\n\t\tajax(value, bind(function(text){\r\n\t\t\tthis._settings.template = template(text);\r\n\t\t\tthis._render_me();\r\n\t\t\tthis.callEvent(\"onAfterLoad\",[]);\r\n\t\t}, this));\r\n\t\treturn value;\r\n\t},\r\n\tcontent_setter:function(config){\r\n\t\tif (config){\r\n\t\t\tthis._not_render_me = true;\r\n\t\t\tthis.render = function(){};\r\n\t\t\tthis._dataobj.appendChild(toNode(config));\r\n\t\t\tthis._correct_height();\r\n\t\t}\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis.render();\r\n\t},\r\n\tsetHTML:function(html){\r\n\t\tthis._settings.template = function(){ return html; };\r\n\t\tthis.refresh();\r\n\t},\r\n\tsetContent:function(content){\r\n\t\tthis._dataobj.innerHTML = \"\";\r\n\t\tthis.content_setter(content);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (base.api.$setSize.call(this,x,y)){\r\n\t\t\tthis._probably_render_me();\r\n\t\t\tif (this._settings.autoheight){\r\n\t\t\t\tvar top =this.getTopParentView();\r\n\t\t\t\tclearTimeout(top._template_resize_timer);\r\n\t\t\t\ttop._template_resize_timer = delay(this.resize, this);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t$getSize:function(x,y){\r\n\t\tif (this._settings.autoheight && (!this._settings.type || this._settings.type == \"clean\"))\r\n\t\t\tthis._settings.height = this._get_auto_height();\r\n\r\n\t\treturn base.api.$getSize.call(this,x,y);\r\n\t},\r\n\t_correct_height:function(){\r\n\t\t//we need to force auto height calculation after content change\r\n\t\t//dropping the last_size flag will ensure that inner logic of $setSize will be processed\r\n\t\tif (this._settings.autoheight){\r\n\t\t\tthis._last_size = null;\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t},\r\n\t_get_auto_height:function(){\r\n\t\tvar size;\r\n\t\tvar padding = $active.layoutPadding.space;\r\n\t\t\r\n\t\tthis._probably_render_me();\r\n\r\n\t\tif(!this.isVisible()){ //try getting height of a hidden template\r\n\t\t\tsize = getTextSize(\r\n\t\t\t\tthis._toHTML(this.data) || this._dataobj.innerHTML, //check for config.content \r\n\t\t\t\t\"webix_template\",\r\n\t\t\t\t(this.$width || (this.getParentView() ? this.getParentView().$width :0))-padding\r\n\t\t\t).height;\r\n\t\t}\r\n\t\telse{ \r\n\t\t\tthis._dataobj.style.height = \"auto\";\r\n\t\t\tsize = this._dataobj.scrollHeight;\r\n\t\t\tthis._dataobj.style.height = \"\";\r\n\t\t}\r\n\t\treturn size;\r\n\t},\r\n\t_one_time_scroll:true //scroll will appear only if set directly in config\r\n};\r\n\r\nconst view = protoUI(api, Scrollable, AutoTooltip, AtomDataLoader, AtomRender, EventSystem, base.view);\r\nexport default { api, view };","import {protoUI} from \"../ui/core\";\r\n\r\nimport base from \"./view\";\r\n\r\nconst api = {\r\n\tname:\"spacer\",\r\n\tdefaults:{\r\n\t\tborderless:true\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className += \" webix_spacer\";\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default { api, view };","import {protoUI} from \"../ui/core\";\r\nimport state from \"../core/state\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport {clone, extend} from \"../webix/helpers\";\r\nimport {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\n\r\n\r\nimport base from \"./baselayout\";\r\nimport baseview from \"./baseview\";\r\nimport viewA from \"./view\";\r\n\r\nconst api = {\r\n\tname:\"layout\",\r\n\t$init:function(){\r\n\t\tthis._hiddencells = 0;\r\n\t},\r\n\tdefaults:{\r\n\t\ttype:\"line\"\r\n\t},\r\n\t_parse_cells:function(){\r\n\t\tif (this._parse_cells_ext)\r\n\t\t\tcollection = this._parse_cells_ext(collection);\r\n\r\n\t\tif (!this._parse_once){\r\n\t\t\tthis._viewobj.className += \" webix_layout_\"+(this._settings.type||\"\");\r\n\t\t\tthis._parse_once = 1;\r\n\t\t}\r\n\r\n\t\tif (this._settings.margin !== undefined)\r\n\t\t\tthis._margin = this._settings.margin;\r\n\r\n\t\tif (this._settings.padding !== undefined && typeof this._settings.padding !== \"object\" )\r\n\t\t\tthis._padding.left = this._padding.right = this._padding.top = this._padding.bottom = this._settings.padding;\r\n\t\tif (this._settings.paddingX !== undefined)\r\n\t\t\tthis._padding.left = this._padding.right = this._settings.paddingX;\r\n\t\tif (this._settings.paddingY !== undefined)\r\n\t\t\tthis._padding.top = this._padding.bottom = this._settings.paddingY;\r\n\t\tif (typeof this._settings.padding === \"object\")\r\n\t\t\textend(this._padding, this._settings.padding, true);\r\n\r\n\t\tif (this._padding.left || this._padding.right || this._padding.top || this._padding.bottom)\r\n\t\t\tthis._padding.defined = true;\r\n\r\n\t\t//if layout has paddings we need to set the visible border \r\n\t\tif (this._hasBorders() && !this._settings.borderless){\r\n\t\t\tthis._contentobj.style.borderWidth=\"1px\";\r\n\t\t\t//if layout has border - normal bordering rules are applied\r\n\t\t\tthis._render_borders = true;\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\tvar collection = this._collection;\r\n\t\r\n\t\tif (this._settings.borderless)\r\n\t\t\tthis._settings._inner = { top:true, left:true, right:true, bottom:true};\r\n\r\n\t\tthis._beforeResetBorders(collection);\r\n\t\tbase.api._parse_cells.call(this, collection);\r\n\t\tthis._afterResetBorders(collection);\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tdx=dx||0; dy=dy||0;\r\n\r\n\t\tvar correction = this._margin*(this._cells.length-this._hiddencells-1);\r\n\t\tif (this._render_borders || this._hasBorders()){\r\n\t\t\tvar _borders = this._settings._inner;\r\n\t\t\tif (_borders){\r\n\t\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\r\n\t\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._settings.height)\r\n\t\t\tdy += this._padding.top + this._padding.bottom + (this._vertical_orientation ? correction : 0);\r\n\r\n\t\tif (!this._settings.width)\r\n\t\t\tdx += this._padding.left + this._padding.right + (this._vertical_orientation ? 0 : correction);\r\n\t\t\t\t\r\n\t\treturn base.api.$getSize.call(this, dx, dy);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tthis._layout_sizes = [x,y];\r\n\t\tif (DEBUG) debug_size_box_start(this);\r\n\r\n\t\tif (this._hasBorders()||this._render_borders)\r\n\t\t\tviewA.api.$setSize.call(this,x,y);\r\n\t\telse\t\r\n\t\t\tbaseview.api.$setSize.call(this,x,y);\r\n\r\n\t\t//form with scroll\r\n\t\ty = this._content_height;\r\n\t\tx = this._content_width;\r\n\r\n\t\tvar config = this._settings;\r\n\t\tif (config.scroll){\r\n\t\t\ty = Math.max(y, this._desired_size[1]);\r\n\t\t\tx = Math.max(x, this._desired_size[0]);\r\n\t\t}\r\n\t\t\r\n\t\tthis._set_child_size(x, y);\r\n\r\n\t\tif (DEBUG) debug_size_box_end(this, [x,y]);\r\n\t},\r\n\t_set_child_size:function(x,y){\r\n\t\tvar correction = this._margin*(this._cells.length-this._hiddencells-1);\r\n\r\n\t\ty -= this._padding.top + this._padding.bottom;\r\n\t\tx -= this._padding.left + this._padding.right;\r\n\t\tif (this._vertical_orientation)\r\n\t\t\ty-=correction;\r\n\t\telse x-=correction;\r\n\r\n\t\treturn base.api._set_child_size.call(this, x, y);\r\n\t},\r\n\tresizeChildren:function(structure_changed){ \r\n\t\tif (structure_changed){\r\n\t\t\tthis._last_size = null; //forces children resize\r\n\t\t\tvar config = [];\r\n\t\t\tfor (var i = 0; i < this._cells.length; i++){\r\n\t\t\t\tvar cell = this._cells[i];\r\n\t\t\t\tconfig[i] = cell._settings;\r\n\t\t\t\tvar n = ((cell._layout_sizes && !cell._render_borders) || cell._settings.borderless)?\"0px\":\"1px\";\r\n\r\n\t\t\t\tcell._viewobj.style.borderTopWidth=cell._viewobj.style.borderBottomWidth=cell._viewobj.style.borderLeftWidth=cell._viewobj.style.borderRightWidth=n;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._beforeResetBorders(config);\r\n\t\t\tfor (let i=0; i<config.length; i++)\r\n\t\t\t\tif (config[i].borderless && this._cells[i]._set_inner)\r\n\t\t\t\t\tthis._cells[i]._set_inner(config[i]);\r\n\t\t\tthis._afterResetBorders(this._cells);\r\n\t\t}\r\n\r\n\t\tif (state._responsive_tinkery) return;\r\n\t\tbase.api.resizeChildren.call(this);\r\n\t},\r\n\t_hasBorders:function(){\r\n\t\treturn this._padding.defined && this._margin>0 && !this._cleanlayout;\r\n\t},\r\n\t_beforeResetBorders:function(collection){\r\n\t\tif (this._hasBorders() && (!this._settings.borderless || this._settings.type == \"space\")){\r\n\t\t\tfor (let i=0; i < collection.length; i++){\r\n\t\t\t\tif (!collection[i]._inner || !collection[i].borderless)\r\n\t\t\t\t\tcollection[i]._inner={ top:false, left:false, right:false, bottom:false};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i=0; i < collection.length; i++)\r\n\t\t\t\tcollection[i]._inner=clone(this._settings._inner);\r\n\t\t\tvar mode = false;\r\n\t\t\tif (this._cleanlayout)\r\n\t\t\t\tmode = true;\r\n\t\t\t\t\r\n\t\t\tvar maxlength = collection.length;\t\t\t\t\r\n\t\t\tif (this._vertical_orientation){\r\n\t\t\t\tfor (let i=1; i < maxlength-1; i++)\r\n\t\t\t\t\tcollection[i]._inner.top = collection[i]._inner.bottom = mode;\r\n\t\t\t\tif (maxlength>1){\r\n\t\t\t\t\tif (this._settings.type!=\"head\")\r\n\t\t\t\t\t\tcollection[0]._inner.bottom = mode;\r\n\r\n\t\t\t\t\twhile (collection[maxlength-1].hidden && maxlength>1)\r\n\t\t\t\t\t\tmaxlength--;\r\n\t\t\t\t\tif (maxlength>0)\r\n\t\t\t\t\t\tcollection[maxlength-1]._inner.top = mode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfor (let i=1; i < maxlength-1; i++)\r\n\t\t\t\t\tcollection[i]._inner.left = collection[i]._inner.right= mode;\r\n\t\t\t\tif (maxlength>1){\r\n\t\t\t\t\tif (this._settings.type!=\"head\")\r\n\t\t\t\t\t\tcollection[0]._inner.right= mode;\r\n\t\t\t\t\tcollection[maxlength-1]._inner.left = mode;\r\n\r\n\t\t\t\t\twhile (maxlength>1 && collection[maxlength-1].hidden)\r\n\t\t\t\t\t\tmaxlength--;\r\n\t\t\t\t\tif (maxlength>0)\r\n\t\t\t\t\t\tcollection[maxlength-1]._inner.left = mode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t_afterResetBorders:function(collection){\r\n\t\tvar start = 0; \r\n\t\tfor (let i=0; i<collection.length; i++){\r\n\t\t\tvar cell = this._cells[i];\r\n\r\n\t\t\tvar s_inner = cell._settings._inner;\r\n\t\t\tif (cell._settings.hidden && this._cells[i+1]){\r\n\t\t\t\tvar s_next = this._cells[i+1]._settings._inner;\r\n\t\t\t\tif (!s_inner.top)\r\n\t\t\t\t\ts_next.top = false;\r\n\t\t\t\tif (!s_inner.left)\r\n\t\t\t\t\ts_next.left = false;\r\n\r\n\t\t\t\tif (i==start) start++;\r\n\t\t\t}\r\n\t\t\tthis._fix_container_borders(cell._viewobj.style, cell._settings._inner);\r\n\t\t}\r\n\r\n\t\tvar style = this._vertical_orientation?\"marginLeft\":\"marginTop\";\r\n\t\tvar contrstyle = this._vertical_orientation?\"marginTop\":\"marginLeft\";\r\n\t\tvar padding = this._vertical_orientation?this._padding.left:this._padding.top;\r\n\t\tvar contrpadding = this._vertical_orientation?this._padding.top:this._padding.left;\r\n\r\n\t\t//add top offset to all\r\n\t\tfor (let i=0; i<collection.length; i++)\r\n\t\t\tthis._cells[i]._viewobj.style[style] = padding + \"px\";\r\n\r\n\t\t//add left offset to first cell\r\n\t\tif (this._cells.length)\r\n\t\t\tthis._cells[start]._viewobj.style[contrstyle] = contrpadding + \"px\";\r\n\r\n\t\t//add offset between cells\r\n\t\tfor (var index=start+1; index<collection.length; index++)\r\n\t\t\tthis._cells[index]._viewobj.style[contrstyle]=this._margin+\"px\";\r\n\t\t\r\n\t},\r\n\ttype_setter:function(value){\r\n\t\tthis._margin = (typeof this._margin_set[value] !== \"undefined\"? this._margin_set[value]: this._margin_set[\"line\"]);\r\n\t\tthis._padding.left = this._padding.right = this._padding.top = this._padding.bottom =\r\n\t\t\t(typeof this._margin_set[value] !== \"undefined\") ? this._padding_set[value] : this._padding_set[\"line\"];\r\n\t\tthis._cleanlayout = (value==\"material\" || value==\"clean\");\r\n\t\tif (value == \"material\")\r\n\t\t\tthis._settings.borderless = true;\r\n\r\n\t\treturn value;\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis._margin_set = $active.layoutMargin;\r\n\t\tthis._padding_set = $active.layoutPadding;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default { api, view };\r\n\r\n//not necessary anymore\r\n//preserving for backward compatibility\r\nview.call(-1);","import base from \"../views/view\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\nimport state from \"../core/state\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\n\r\n/*scrollable view with another view insize*/\r\nconst api = {\r\n\tname:\"scrollview\",\r\n\tdefaults:{\r\n\t\tscroll:\"y\",\r\n\t\tscrollSpeed:\"300ms\"\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className += \" webix_scrollview\";\r\n\t},\r\n\tbody_setter:function(config){\r\n\t\tconfig.borderless = true;\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_cell = ui._view(config);\r\n\r\n\t\tthis._dataobj.appendChild(this._body_cell._viewobj);\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn [this._body_cell];\r\n\t},\r\n\tgetBody:function(){\r\n\t\treturn this._body_cell;\r\n\t},\r\n\tresizeChildren:function(){\r\n\t\tif (!this._body_cell) return;\r\n\r\n\t\tthis._desired_size = this._body_cell.$getSize(0, 0);\r\n\t\tthis._resizeChildren();\r\n\t\tcallEvent(\"onResize\",[]);\r\n\t},\r\n\t_resizeChildren:function(){\r\n\t\tconst cx = Math.max(this._content_width, this._desired_size[0]);\r\n\t\tconst cy = Math.max(this._content_height, this._desired_size[2]);\r\n\t\tthis._body_cell.$setSize(cx, cy);\r\n\t\tif (env.touch){\r\n\t\t\tconst scroll = this.getScrollState();\r\n\t\t\tconst top = this._body_cell._content_height - this._content_height;\r\n\t\t\tif (top < scroll.y)\r\n\t\t\t\tthis.scrollTo(null, top);\r\n\t\t}\r\n\t\tif (state._responsive_exception){\r\n\t\t\tstate._responsive_exception = false;\r\n\t\t\tthis._desired_size = this._body_cell.$getSize(0, 0);\r\n\t\t\tthis._resizeChildren();\r\n\t\t}\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tconst desired_size = this._desired_size = this._body_cell.$getSize(0, 0);\r\n\t\tconst self_sizes = base.api.$getSize.call(this, dx, dy);\r\n\t\tconst scroll_size = this._native_scroll || env.scrollSize;\r\n\r\n\t\tif(this._settings.scroll==\"x\"){\r\n\t\t\tself_sizes[2] = Math.max(self_sizes[2], desired_size[2]) + scroll_size;\r\n\t\t\tself_sizes[3] = Math.min(self_sizes[3], desired_size[3]) + scroll_size;\r\n\t\t}\r\n\t\telse if(this._settings.scroll==\"y\"){\r\n\t\t\tself_sizes[0] = Math.max(self_sizes[0], desired_size[0]) + scroll_size;\r\n\t\t\tself_sizes[1] = Math.min(self_sizes[1], desired_size[1]) + scroll_size;\r\n\t\t}\r\n\t\treturn self_sizes;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tconst temp = env.scrollSize;\r\n\t\tenv.scrollSize = this._native_scroll || temp;\r\n\r\n\t\tif (base.api.$setSize.call(this,x,y) || state._force_resize)\r\n\t\t\tthis._resizeChildren();\r\n\r\n\t\tenv.scrollSize = temp;\r\n\t},\r\n\tscroll_setter:function(value){\r\n\t\tconst custom = env.$customScroll;\r\n\t\tif (typeof value == \"string\" && value.indexOf(\"native-\") === 0){\r\n\t\t\tthis._native_scroll = 17;\r\n\t\t\tvalue = value.replace(\"native-\", \"\");\r\n\t\t\tenv.$customScroll = false;\r\n\t\t}\r\n\r\n\t\tvalue =  Scrollable.scroll_setter.call(this, value);\r\n\r\n\t\tenv.$customScroll = custom;\r\n\t\treturn value;\r\n\t},\r\n\t_replace:function(new_view){\r\n\t\tthis._body_cell.destructor();\r\n\t\tthis._body_cell = new_view;\r\n\r\n\t\tthis._dataobj.appendChild(this._body_cell._viewobj);\r\n\t\tthis.resizeChildren();\r\n\t},\r\n\tshowView: function(id){\r\n\t\tconst topPos = $$(id).$view.offsetTop-$$(id).$view.parentNode.offsetTop;\r\n\t\tthis.scrollTo(0, topPos);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  Scrollable, EventSystem, base.view);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\n\r\nconst api = {\r\n\tname:\"iframe\",\r\n\t$init:function(){\r\n\t\tthis._dataobj = this._contentobj;\r\n\t\tthis._contentobj.innerHTML = \"<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\\\"view_id\\\")); if (t) t.callEvent(\\\"onAfterLoad\\\",[]);' src='about:blank'></iframe>\";\r\n\t},\r\n\tload:function(value){\r\n\t\tthis.src_setter(value);\r\n\t},\r\n\tsrc_setter:function(value){\r\n\t\tif(!this.callEvent(\"onBeforeLoad\",[])) \r\n\t\t\treturn \"\";\r\n\t\tthis.getIframe().src = value;\r\n\t\treturn value;\r\n\t},\r\n\tgetIframe:function(){\r\n\t\treturn this._contentobj.getElementsByTagName(\"iframe\")[0];\r\n\t},\r\n\tgetWindow:function(){\r\n\t\treturn this.getIframe().contentWindow;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  base.view, EventSystem);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {_each} from \"../ui/helpers\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\nimport {$active} from \"../webix/skin\";\r\nimport base from \"./layout\";\r\n\r\nconst api = {\r\n\tname:\"accordion\",\r\n\tdefaults:{\r\n\t\tpanelClass:\"accordionitem\",\r\n\t\tmulti:false,\r\n\t\tcollapsed:false\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.setAttribute(\"role\", \"tablist\");\r\n\t\tthis._viewobj.setAttribute(\"aria-multiselectable\", \"true\");\r\n\t},\r\n\t_replace:function(newview){\r\n\t\tbase.api._replace.apply(this, arguments);\r\n\t\tif (newview.collapsed_setter && newview.refresh){\r\n\t\t\tnewview.refresh();\r\n\t\t}\r\n\t},\r\n\t_parse_cells:function(){\r\n\t\tvar panel = this._settings.panelClass;\r\n\t\tvar cells = this._collection;\r\n\r\n\t\tfor (var i=0; i<cells.length; i++){\r\n\t\t\tif ((cells[i].body || cells[i].header)&& !cells[i].view && !cells[i].align)\r\n\t\t\t\tcells[i].view = panel;\r\n\t\t\tif (isUndefined(cells[i].collapsed))\r\n\t\t\t\tcells[i].collapsed = this._settings.collapsed;\r\n\r\n\t\t}\r\n\r\n\t\r\n\t\tthis._skin_render_collapse = true;\r\n\t\tbase.api._parse_cells.call(this);\r\n\t\tthis._skin_render_collapse = false;\r\n\r\n\t\tfor (let i=0; i < this._cells.length; i++){\r\n\t\t\tif (this._cells[i].name == panel) \r\n\t\t\t\tthis._cells[i].refresh();\r\n\t\t\tthis._cells[i]._accLastChild = false;\r\n\t\t}\r\n\t\tvar found = false;\r\n\t\tfor (let i=this._cells.length-1; i>=0 &&!found; i--){\r\n\t\t\tif(!this._cells[i]._settings.hidden){\r\n\t\t\t\tthis._cells[i]._accLastChild = true;\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\t_afterOpen:function(view){\r\n\t\tif (this._settings.multi === false && this._skin_render_collapse !== true){\r\n\t\t\tfor (var i=0; i < this._cells.length; i++) {\r\n\t\t\t\tif (view != this._cells[i] && !this._cells[i]._settings.collapsed && this._cells[i].collapse)\r\n\t\t\t\t\tthis._cells[i].collapse();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (view.callEvent){\r\n\t\t\tview.callEvent(\"onViewShow\",[]);\r\n\t\t\t_each(view, this._signal_hidden_cells);\r\n\t\t}\r\n\t},\r\n\t_canCollapse:function(view){\r\n\t\tif (this._settings.multi === true || this._skin_render_collapse) return true;\r\n\t\t//can collapse only if you have other item to open\r\n\t\tfor (var i=0; i < this._cells.length; i++)\r\n\t\t\tif (view != this._cells[i] && !this._cells[i]._settings.collapsed && this._cells[i].isVisible() && !this._cells[i].$nospace)\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t},\r\n\t$skin:function(){\r\n\t\tbase.api.$skin.call(this);\r\n\r\n\t\tif($active.accordionType)\r\n\t\t\tthis.defaults.type = $active.accordionType;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default {api, view};","import {protoUI, ui, $$} from \"../ui/core\";\r\nimport {copy, extend, bind} from \"../webix/helpers\";\r\nimport {_each} from \"../ui/helpers\";\r\nimport animate from \"../webix/animate\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {attachEvent, detachEvent} from \"../webix/customevents\";\r\n\r\nimport state from \"../core/state\";\r\nimport Touch from \"../core/touch\";\r\n\r\nimport base from \"../views/view\";\r\nimport baseview from \"../views/baseview\";\r\n\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport NavigationButtons from \"../core/navigationbuttons\";\r\n\r\n\r\nconst api = {\r\n\tname:\"carousel\",\r\n\tdefaults:{\r\n\t\tscrollSpeed:\"300ms\",\r\n\t\ttype: \"clean\",\r\n\t\tnavigation: {},\r\n\t\tanimate:true\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className += \" webix_carousel\";\r\n\t\tthis._layout = null;\r\n\t\tthis._dataobj = null;\r\n\t\tthis._active_cell = 0;\r\n\t\tthis.$ready.unshift(this._initLayout);\r\n\t\tthis.$ready.push(this._after_init_call);\r\n\t},\r\n\taddView: function(view, index){\r\n\t\tvar t = this._layout.addView(view, index);\r\n\t\tthis._fix_after_view_add();\r\n\t\treturn t;\r\n\t},\r\n\tremoveView: function(id){\r\n\t\tthis._layout.removeView(id);\r\n\t\tthis._fix_after_view_add();\r\n\t},\r\n\t_replace: function(new_view,target_id){\r\n\t\tthis._layout._replace(new_view, target_id);\r\n\t\tthis._fix_after_view_add();\r\n\t},\r\n\t_fix_after_view_add: function(){\r\n\t\tthis._cells = this._layout._cells;\r\n\t\tthis._renderPanel();\r\n\t\tthis.setActiveIndex(Math.min(this._active_cell, this._cells.length-1));\r\n\t},\r\n\t_initLayout: function(){\r\n\t\tif(this._layout && this._layout.destructor)\r\n\t\t\tthis._layout.destructor();\r\n\r\n\t\tvar layout = \"\";\r\n\r\n\t\tif(this.config.cols){\r\n\t\t\tlayout = \"cols\";\r\n\t\t\tthis._vertical_orientation = 0;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tlayout = \"rows\";\r\n\t\t\tthis._vertical_orientation = 1;\r\n\t\t}\r\n\r\n\t\tvar config = {borderless: true, type: \"clean\"};\r\n\t\tconfig[layout] = copy(this._settings[layout]);\r\n\t\tvar layoutProp = [\"type\", \"margin\", \"marginX\", \"marginY\", \"padding\", \"paddingX\", \"paddingY\"];\r\n\t\tvar layoutConfig = {};\r\n\t\tfor(var i=0; i< layoutProp.length; i++){\r\n\t\t\tif(this._settings[layoutProp[i]]){\r\n\t\t\t\tlayoutConfig[layoutProp[i]] = this._settings[layoutProp[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t\textend(config,layoutConfig,true);\r\n\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._layout = ui._view(config);\r\n\r\n\t\tthis._viewobj.appendChild(this._layout._viewobj);\r\n\t\tthis._cells = this._layout._cells;\r\n\r\n\t\tthis._layout._show = bind(api._show,this);\r\n\t\tthis._layout.adjustScroll = bind(api.adjustScroll,this);\r\n\r\n\t\tconst e1 = attachEvent(\"onReconstruct\",  view => {\r\n\t\t\tif(view == this._layout)\r\n\t\t\t\tthis._setScroll();\r\n\t\t});\r\n\t\tthis.attachEvent(\"onDestruct\", function(){ detachEvent(e1); });\r\n\r\n\t\tthis._contentobj = this._viewobj.firstChild;\r\n\t},\r\n\t_onKeyPress:function(code, e){\r\n\t\tif(this._settings.navigation.items && e.target.getAttribute(\"role\") === \"tab\")\r\n\t\t\tthis._moveActive(code, e);\r\n\r\n\t\tbaseview.api._onKeyPress.call(this, code, e);\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn [this._layout];\r\n\t},\r\n\tgetLayout:function(){\r\n\t\treturn this._layout;\r\n\t},\r\n\t_after_init_call:function(){\r\n\t\tthis._contentobj.setAttribute(\"touch_scroll\", (this._vertical_orientation?\"y\":\"x\"));\r\n\r\n\t\tthis._layout.attachEvent(\"onAfterScroll\",bind(function(){\r\n\t\t\tthis.callEvent(\"onShow\",[this.getActiveId()]);\r\n\t\t},this));\r\n\r\n\t\t_each(this._layout, function(view){\r\n\t\t\tview._viewobj.setAttribute(\"role\", \"tabpanel\");\r\n\t\t});\r\n\t},\r\n\tadjustScroll:function(matrix){\r\n\t\tvar size =  (this._vertical_orientation?this._content_height:this._content_width);\r\n\r\n\t\tvar correction;\r\n\t\tif (this._vertical_orientation) {\r\n\t\t\tcorrection = Math.round(matrix.f/size);\r\n\t\t\tmatrix.f = correction*size;\r\n\t\t} else {\r\n\t\t\tcorrection = Math.round(matrix.e/size);\r\n\t\t\tmatrix.e = correction*size;\r\n\t\t}\r\n\t\t\r\n\t\tthis._active_cell = - correction;\r\n\r\n\t\tif(this._settings.navigation)\r\n\t\t\tthis._renderNavItems();\r\n\r\n\t\treturn true;\r\n\t},\r\n\t_show:function(obj){\r\n\t\tvar i, layout, _nextCell, _size, x, y;\r\n\t\t_nextCell = -1;\r\n\t\tlayout = this._layout;\r\n\t\tfor (i=0; i < layout._cells.length; i++){\r\n\t\t\tif (layout._cells[i]==obj){\r\n\t\t\t\t_nextCell = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (_nextCell < 0 || _nextCell == this._active_cell)\r\n\t\t\treturn;\r\n\r\n\t\tthis._active_cell = _nextCell;\r\n\t\t_size =  (layout._vertical_orientation?this._content_height:this._content_width);\r\n\r\n\t\tx = -(layout._vertical_orientation?0:_nextCell*_size);\r\n\t\ty = -(layout._vertical_orientation?_nextCell*_size:0);\r\n\r\n\t\tthis.scrollTo(x,y);\r\n\t\tthis.callEvent(\"onShow\",[layout._cells[this._active_cell]._settings.id]);\r\n\t\tif(this._settings.navigation)\r\n\t\t\tthis._renderPanel();\r\n\t},\r\n\tscrollTo:function(x,y){\r\n\t\tif (Touch && animate.isSupported() && this._settings.animate)\r\n\t\t\tTouch._set_matrix(this._contentobj, x,y, this._settings.scrollSpeed||\"100ms\");\r\n\t\telse{\r\n\t\t\tthis._contentobj.style.marginLeft = x+\"px\";\r\n\t\t\tthis._contentobj.style.marginTop =  y+\"px\";\r\n\t\t}\r\n\t},\r\n\tnavigation_setter:function(config){\r\n\t\tthis._mergeSettings(config,{\r\n\t\t\ttype: \"corner\",\r\n\t\t\tbuttons: true,\r\n\t\t\titems: true\r\n\t\t});\r\n\t\treturn config;\r\n\t},\r\n\tshowNext:function(){\r\n\t\tif (this._active_cell < this._layout._cells.length - 1)\r\n\t\t\tthis.setActiveIndex(this._active_cell+1);\r\n\t},\r\n\tshowPrev:function(){\r\n\t\tif (this._active_cell > 0)\r\n\t\t\tthis.setActiveIndex(this._active_cell-1);\r\n\t},\r\n\tsetActiveIndex:function(value){\r\n\t\tassert(value < this._layout._cells.length, \"Not existing index in collection\");\r\n\r\n\t\tvar id = this._layout._cells[value]._settings.id;\r\n\t\t$$(id).show();\r\n\t},\r\n\tgetActiveIndex:function(){\r\n\t\treturn this._active_cell;\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar layoutSizes = this._layout.$getSize(0, 0);\r\n\t\tvar selfSizes   = base.api.$getSize.call(this, dx, dy);\r\n\t\tif(this._layout._vertical_orientation){\r\n\t\t\tselfSizes[0] = Math.max(selfSizes[0], layoutSizes[0]);\r\n\t\t\tselfSizes[1] = Math.min(selfSizes[1], layoutSizes[1]);\r\n\r\n\t\t} else{\r\n\t\t\tselfSizes[2] = Math.max(selfSizes[2], layoutSizes[2]);\r\n\t\t\tselfSizes[3] = Math.min(selfSizes[3], layoutSizes[3]);\r\n\t\t}\r\n\t\treturn selfSizes;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tvar layout = this._layout;\r\n\t\tvar c = layout._cells.length;\r\n\r\n\t\tvar changed = base.api.$setSize.call(this,x,y);\r\n\t\tvar yc = this._content_height*(layout._vertical_orientation?c:1);\r\n\t\tvar xc = this._content_width*(layout._vertical_orientation?1:c);\r\n\r\n\t\tif (changed){\r\n\t\t\tthis._contentobj.style.height = yc+\"px\";\r\n\t\t\tthis._contentobj.style.width = xc+\"px\";\r\n\t\t\tlayout.$setSize(xc,yc);\r\n\t\t\tthis._setScroll();\r\n\t\t} else\r\n\t\t\tlayout.$setSize(xc,yc);\r\n\t},\r\n\t_setScroll: function(){\r\n\t\tvar layout = this._layout;\r\n\t\tvar activeCell = this._active_cell||0;\r\n\t\tvar size =  (layout._vertical_orientation?this._content_height:this._content_width);\r\n\r\n\t\tvar x = -(layout._vertical_orientation?0:activeCell*size);\r\n\t\tvar y = -(layout._vertical_orientation?activeCell*size:0);\r\n\r\n\r\n\t\tthis.scrollTo(x,y);\r\n\r\n\t\tif(this._settings.navigation)\r\n\t\t\tthis._renderPanel();\r\n\t},\r\n\tgetActiveId:function(){\r\n\t\tvar cell = this._layout._cells[this._active_cell];\r\n\t\treturn cell?cell._settings.id:null;\r\n\t},\r\n\tsetActive:function(value){\r\n\t\t$$(value).show();\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  EventSystem,NavigationButtons, base.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport base from \"./accordion\";\r\n\r\n\r\nconst api = {\r\n\tname:\"headerlayout\",\r\n\tdefaults:{\r\n\t\ttype: \"accordion\",\r\n\t\tmulti:\"mixed\",\r\n\t\tcollapsed:false\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default {api, view};","import {removeCss, addCss} from \"../webix/html\";\r\nimport {debug_size_box} from \"../webix/debug\";\r\nimport {protoUI, ui} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport state from \"../core/state\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport env from \"../webix/env\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport EventSystem from \"../core/eventsystem\";\r\n\r\nimport template from \"../webix/template\";\r\n\r\nimport base from \"./view\";\r\nimport baseview from \"./baseview\";\r\nimport animate from \"../webix/animate\";\r\n\r\nconst api = {\r\n\tname:\"accordionitem\",\r\n\t$init:function(config){\r\n\t\tthis._viewobj.innerHTML = \"<div tabindex='0' \"+/*@attr*/\"webix_ai_id\"+\"='\"+config.id+\"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>\";\r\n\t\tthis._contentobj = this._viewobj;\r\n\t\tthis._headobj = this._contentobj.childNodes[0];\r\n\t\tif(!config.header)\r\n\t\t\tthis._headobj.style.display = \"none\";\r\n\t\tthis._headlabel = this._contentobj.childNodes[0].childNodes[1];\r\n\t\tthis._headbutton = this._contentobj.childNodes[0].childNodes[0];\r\n\t\tthis._bodyobj = this._contentobj.childNodes[1];\r\n\t\tthis._viewobj.className +=\" webix_accordionitem\";\r\n\t\tthis._head_cell = this._body_cell = null;\r\n\t\tthis._cells = true;\r\n\r\n\t\tthis._bodyobj.setAttribute(\"role\", \"tabpanel\");\r\n\t\tthis._headobj.setAttribute(\"role\", \"tab\");\r\n\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t},\r\n\t_remove:function(){\r\n\t\tthis.body_setter();\r\n\t},\r\n\t_replace:function(new_view){\r\n\t\tthis._body_cell.destructor();\r\n\t\tthis._body_cell = new_view;\r\n\t\t\r\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\r\n\t\tthis.resize();\r\n\t},\r\n\t_id:/*@attr*/\"webix_ai_id\",\r\n\tgetChildViews:function(){\r\n\t\treturn [this._body_cell];\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\tif (typeof value != \"object\")\r\n\t\t\tvalue = {template:value };\r\n\r\n\t\tvalue._inner = { top:true, left:true, right:true, bottom:true};\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_cell = ui._view(value);\r\n\r\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\r\n\t\treturn value;\r\n\t},\r\n\theader_setter:function(value){\r\n\t\tif(value)\r\n\t\t\tvalue = template(value);\r\n\t\treturn value;\r\n\t},\r\n\theaderAlt_setter:function(value){\r\n\t\tif(value)\r\n\t\t\tvalue = template(value);\r\n\t\treturn value;\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar size =  this._body_cell.$getSize(0, 0);\r\n\r\n\t\t//apply external border to inner content sizes\r\n\t\tvar _borders = this._settings._inner;\r\n\t\tif (_borders){\r\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\r\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\r\n\t\t}\r\n\r\n\t\tvar header = 0;\r\n\t\tvar self_size = baseview.api.$getSize.call(this, 0, 0);\r\n\r\n\t\t//use child settings if layout's one was not defined\r\n\t\tself_size[0] = (self_size[0] || size[0] ) +dx;\r\n\t\tif (self_size[1] >= 100000)\r\n\t\t\tself_size[1] = size[1];\r\n\t\tself_size[1] +=\tdx;\r\n\t\t\r\n\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\r\n\t\tvar fixedHeight = (self_size[3]< 100000);\r\n\t\tif (!fixedHeight)\r\n\t\t\tself_size[3] = size[3];\r\n\r\n\t\tself_size[3] += dy;\r\n\t\tif(this.getParentView()._vertical_orientation){\r\n\t\t\tif (this._settings.collapsed){\r\n\t\t\t\tself_size[2] = self_size[3] = this._getHeaderSize()+dy;\r\n\t\t\t} else if(this._settings.header)\r\n\t\t\t\theader = this._settings.headerHeight;\r\n\t\t} else {\r\n\t\t\tif (this._settings.collapsed)\r\n\t\t\t\tself_size[0] = self_size[1] = this._getHeaderSize()+dx;\r\n\t\t\tif(this._settings.header)\r\n\t\t\t\theader = this._settings.headerHeight;\r\n\t\t}\r\n\r\n\t\t//include header in total height calculation\r\n\t\tif(!fixedHeight){\r\n\t\t\tself_size[2] += header;\r\n\t\t\tself_size[3] += header;\r\n\t\t}\r\n\r\n\t\tif (DEBUG) debug_size_box(this, self_size, true);\r\n\t\treturn self_size;\r\n\t},\r\n\ton_click:{\r\n\t\twebix_accordionitem_header:function(e){\r\n\t\t\tthis._toggle(e);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_accordionitem_header_v:function(e){\r\n\t\t\tthis._toggle(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\t_toggle:function(){\r\n\t\tthis.define(\"collapsed\", !this._settings.collapsed);\r\n\t},\r\n\tcollapsed_setter:function(value){\r\n\t\tif (this._settings.header === false) return;\r\n\t\t//use last layout element if parent is not known yet\r\n\t\tvar parent = this.getParentView();\r\n\t\tif(parent){\r\n\t\t\tif(!value)\r\n\t\t\t\tthis._expand();\r\n\t\t\telse{\r\n\t\t\t\tif ( parent._canCollapse(this))\r\n\t\t\t\t\tthis._collapse();\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar success = 0;\r\n\t\t\t\t\tif(parent._cells.length > 1)\r\n\t\t\t\t\t\tfor (var i=0; i < parent._cells.length; i++){\r\n\t\t\t\t\t\t\tvar sibl = parent._cells[i];\r\n\t\t\t\t\t\t\tif (this != sibl && sibl.isVisible() && sibl.expand){\r\n\t\t\t\t\t\t\t\tsibl.expand();\r\n\t\t\t\t\t\t\t\tthis._collapse();\r\n\t\t\t\t\t\t\t\tsuccess = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tif (!success) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._settings.collapsed = value;\r\n\t\t\tif (!value) parent._afterOpen(this);\r\n\r\n\t\t\tthis.refresh();\r\n\t\t\tif (!state._ui_creation)\r\n\t\t\t\tthis.resize();\r\n\r\n\t\t\tparent.callEvent(\"onAfter\"+(value?\"Collapse\":\"Expand\"), [this._settings.id]);\r\n\r\n\t\t\tthis._settings.$noresize = value;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tcollapse:function(){\r\n\t\tthis.define(\"collapsed\", true);\r\n\t\tUIManager._moveChildFocus(this);\r\n\t},\r\n\texpand:function(){\r\n\t\tthis.define(\"collapsed\", false);\r\n\t},\r\n\t_show: function() {\r\n\t\tthis.show();\r\n\t},\r\n\t_hide: function() {\r\n\t\tthis.hide();\r\n\t},\r\n\t_expand:function(){\r\n\t\tthis._bodyobj.style.display = \"\";\r\n\t\tremoveCss(this.$view, \"collapsed\");\r\n\t\tremoveCss(this._headobj, \"collapsed\");\r\n\r\n\t\tthis._headobj.setAttribute(\"aria-expanded\", \"true\");\r\n\t},\r\n\t_collapse:function(){\r\n\t\tif(this._settings.headerAlt)\r\n\t\t\tthis._headlabel.innerHTML = this._settings.headerAlt();\r\n\t\tthis._bodyobj.style.display = \"none\";\r\n\t\taddCss(this.$view, \"collapsed\");\r\n\t\taddCss(this._headobj, \"collapsed\");\r\n\r\n\t\tthis._headobj.setAttribute(\"aria-expanded\", \"false\");\r\n\t},\r\n\trefresh:function(){\r\n\t\tvar template = this._settings[this._settings.collapsed?\"headerAlt\":\"header\"] ||this._settings.header;\r\n\t\tif (template){\r\n\t\t\tthis._headlabel.innerHTML = template();\r\n\t\t\tthis._headbutton.setAttribute(\"aria-label\", template());\r\n\t\t}\r\n\t\t\t\r\n\t\tvar css = (this.getParentView()._vertical_orientation?\"vertical\":\"horizontal\");\r\n\t\tif(this._viewobj.className.indexOf(\" \"+css) < 0 ){\r\n\t\t\taddCss(this._viewobj, css);\r\n\t\t}\r\n\t\t//fix collapsed columns in IE8\r\n\t\tif(!env.transform){\r\n\t\t\taddCss(this._viewobj,\"webix_ie\",true);\r\n\t\t}\r\n\t},\r\n\t_getHeaderSize:function(){\r\n\t\treturn (this._settings.collapsed?this._settings.headerAltHeight:this._settings.headerHeight);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (base.api.$setSize.call(this,x,y) || this._getHeaderSize() != this._last_set_header_size){\r\n\t\t\tx = this._content_width;\r\n\t\t\ty = this._content_height;\r\n\r\n\t\t\tvar headerSize = this._last_set_header_size = this._getHeaderSize();//-(this._settings._inner.top?0:1);\r\n\t\t\tif (this._settings.header){\r\n\r\n\t\t\t\tthis._headobj.style.height=headerSize+\"px\";\r\n\t\t\t\tthis._headobj.style.width=\"auto\";\r\n\t\t\t\tthis._headobj.style[env.transform]=\"\";\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis._headobj.style.borderBottomWidth = (this._settings.collapsed?0:1)+\"px\";\r\n\r\n\t\t\t\tif(this.getParentView()._vertical_orientation||!this._settings.collapsed){\r\n\t\t\t\t\ty-=this._getHeaderSize();\r\n\t\t\t\t} else if (this._settings.collapsed){\r\n\t\t\t\t\t//-2 - borders\r\n\t\t\t\t\tif (animate.isSupported()){\r\n\t\t\t\t\t\tthis._headobj.style.width = y + \"px\";\r\n\t\t\t\t\t\tthis._headobj.style.height = x + 3 + \"px\";\r\n\t\t\t\t\t\tvar d = Math.floor(y/2-x/2)+(x-this._settings.headerAltHeight)/2;\r\n\t\t\t\t\t\tthis._headobj.style[env.transform]=\"rotate(90deg) translate(\"+d+\"px, \"+(d+1)+\"px)\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { //IE8 fix\r\n\t\t\t\t\t\tthis._headobj.style.width = x + \"px\";\r\n\t\t\t\t\t\tthis._headobj.style.height = y + 3 + \"px\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!this._settings.collapsed){\r\n\t\t\t\tthis._body_cell.$setSize(x,y);\r\n\t\t\t\tthis._last_size_y = y;\r\n\t\t\t}\r\n\t\t} else if (!this._settings.collapsed){\r\n\t\t\tvar body = this._body_cell;\r\n\t\t\tif (this._last_size_y)\r\n\t\t\t\tbody.$setSize(this._content_width, this._last_size_y);\r\n\t\t}\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.defaults.headerAltHeight = this.defaults.headerHeight = $active.barHeight - $active.borderWidth*2;\r\n\t},\r\n\tdefaults:{\r\n\t\theader:false,\r\n\t\theaderAlt:false,\r\n\t\tbody:\"\"\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, MouseEvents, EventSystem, base.view);\r\nexport default {api, view};","\r\n\r\nimport {create, stopEvent, remove, pos as getPos} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {toNode} from \"../webix/helpers\";\r\nimport env from \"../webix/env\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\nimport Settings from \"../core/settings\";\r\n\r\n\r\nconst api = {\r\n\tname:\"resizearea\",\r\n\tdefaults:{\r\n\t\tdir:\"x\"\r\n\t},\r\n\t$init:function(config){\r\n\t\tvar dir = config.dir||\"x\";\r\n\t\tvar node = toNode(config.container);\r\n\t\tvar size = (dir==\"x\"?\"width\":\"height\");\r\n\t\tvar margin = (config.margin? config.margin+\"px\":0);\r\n\r\n\t\tthis._key_property = (dir == \"x\"?\"left\":\"top\");\r\n\r\n\t\tthis._viewobj = create(\"DIV\",{\r\n\t\t\t\"class\"\t: \"webix_resize_area webix_dir_\"+dir\r\n\t\t});\r\n\t\t//[[COMPAT]] FF12 can produce 2 move events\r\n\t\t_event(this._viewobj, env.mouse.down, stopEvent);\r\n\r\n\t\tif(margin){\r\n\t\t\tif(dir==\"x\")\r\n\t\t\t\tmargin = margin+\" 0 \"+margin;\r\n\t\t\telse\r\n\t\t\t\tmargin = \"0 \"+margin+\" 0 \"+margin;\r\n\t\t}\r\n\t\tthis._dragobj = create(\"DIV\",{\r\n\t\t\t\"class\"\t: \"webix_resize_handle_\"+dir,\r\n\t\t\t\"style\" : (margin?\"padding:\"+margin:\"\")\r\n\t\t},\"<div class='webix_handle_content'></div>\");\r\n\r\n\t\tthis._originobj = create(\"DIV\",{\r\n\t\t\t\"class\"\t: \"webix_resize_origin_\"+dir\r\n\t\t});\r\n\r\n\t\tif(config[size]){\r\n\t\t\tthis._originobj.style[size] = config[size]+(config.border?1:0)+\"px\";\r\n\t\t\tthis._dragobj.style[size] = config[size]+\"px\";\r\n\t\t}\r\n\t\tif (config.cursor)\r\n\t\t\tthis._dragobj.style.cursor = this._originobj.style.cursor = this._viewobj.style.cursor = config.cursor;\r\n\t\tthis._moveev =\tevent(node, env.mouse.move, this._onmove, {bind:this});\r\n\t\tthis._upev =\tevent(document.body, env.mouse.up, this._onup, {bind:this});\r\n\r\n\t\tthis._dragobj.style[this._key_property] = this._originobj.style[this._key_property] = config.start+\"px\";\r\n\r\n\t\tnode.appendChild(this._viewobj);\r\n\t\tnode.appendChild(this._dragobj);\r\n\t\tnode.appendChild(this._originobj);\r\n\t},\r\n\t_onup:function(){\r\n\r\n\t\tthis.callEvent(\"onResizeEnd\", [this._last_result]);\r\n\r\n\t\teventRemove(this._moveev);\r\n\t\teventRemove(this._upev);\r\n\r\n\t\tremove(this._viewobj);\r\n\t\tremove(this._dragobj);\r\n\t\tremove(this._originobj);\r\n\t\tthis._viewobj = this._dragobj = this._originobj = null;\r\n\t},\r\n\t_onmove:function(e){\r\n\t\tvar eventPos = getPos(e);\r\n\t\tthis._last_result = (this._settings.dir == \"x\" ? eventPos.x : eventPos.y)+this._settings.start-this._settings.eventPos;\r\n\t\tthis._dragobj.style[this._key_property] = this._last_result+\"px\";\r\n\t\tthis.callEvent(\"onResize\", [this._last_result]);\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, EventSystem, Settings);\r\nexport default {api, view};","import {pos as getPos, offset, addCss, removeCss} from \"../webix/html\";\r\nimport {ui, protoUI} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\n\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport Destruction from \"../core/destruction\";\r\n\r\nimport base from \"./view\";\r\n\r\n//used inderectly through ui\r\nimport \"./resizearea\";\r\n\r\nimport {bind} from \"../webix/helpers\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\n\r\nconst api = {\r\n\tname:\"resizer\",\r\n\tdefaults:{\r\n\t\twidth:7, height:7\r\n\t},\r\n\t$init:function(config){\r\n\t\tassert(this.getParentView(), \"Resizer can't be initialized outside a layout\");\r\n\t\tthis._viewobj.className += \" webix_resizer\";\r\n\t\tvar space = this.getParentView()._margin;\r\n\t\t\r\n\t\t_event(this._viewobj, env.mouse.down, this._rsDown, {bind:this});\r\n\t\tvar dir = this._getResizeDir();\r\n\r\n\t\tthis._rs_started = false;\r\n\t\tthis._resizer_dir = dir;\r\n\r\n\t\tthis._resizer_dim = (dir==\"x\"?\"width\":\"height\");\r\n\t\t\r\n\t\tif (dir==\"x\")\r\n\t\t\tconfig.height = 0;\r\n\t\telse \r\n\t\t\tconfig.width = 0;\r\n\r\n\t\tif (space>0){\r\n\t\t\tthis._viewobj.className += \" webix_resizer_v\"+dir;\r\n\t\t\tthis._viewobj.style.marginRight = \"-\"+space+\"px\";\r\n\t\t\tif (dir == \"x\")\t\r\n\t\t\t\tconfig.width = space;\r\n\t\t\telse\r\n\t\t\t\tconfig.height = space;\r\n\t\t\tthis.$nospace = true;\r\n\t\t} else\r\n\t\t\tthis._viewobj.className += \" webix_resizer_\"+dir;\r\n\t\t\r\n\t\tthis._viewobj.innerHTML = \"<div class='webix_resizer_content'></div>\";\r\n\t\tif (dir == \"y\" && space>0) this._viewobj.style.marginBottom = \"-\"+(config.height||this.defaults.height)+\"px\";\r\n\t\tthis._viewobj.setAttribute(/*@attr*/\"webix_disable_drag\", \"true\");\r\n\t\tthis._viewobj.setAttribute(\"tabindex\", \"-1\");\r\n\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"false\");\r\n\r\n\t},\r\n\t_rsDown:function(e){\r\n\t\tvar cells = this._getResizerCells();\r\n\t\t//some sibling can block resize\r\n\t\tif(cells && !this._settings.disabled){\r\n\t\t\te = e||window.event;\r\n\t\t\tthis._rs_started = true;\r\n\t\t\tthis._rs_process = getPos(e);\r\n\t\t\tthis._rsLimit = [];\r\n\t\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"true\");\r\n\t\t\t\r\n\t\t\tfor(var i=0; i<2; i++)\r\n\t\t\t\tcells[i].$view.setAttribute(\"aria-dropeffect\", \"move\");\r\n\t\t\tthis._viewobj.setAttribute(\"aria-dropeffect\", \"move\");\r\n\t\t\t\r\n\t\t\tthis._rsStart(e, cells[0]);\r\n\t\t\tconst handler = event(document.body, env.mouse.up, e => {\r\n\t\t\t\teventRemove(handler);\r\n\t\t\t\treturn this._rsUp(e);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_rsUp:function(){\r\n\t\tthis._rs_started = false;\r\n\t\tthis._rs_process = false;\r\n\t},\r\n\t_rsStart:function(e, cell){\r\n\r\n\t\tvar dir, cellOffset, pos,posParent,start;\r\n\t\te = e||window.event;\r\n\t\tdir = this._resizer_dir;\r\n\r\n\t\t/*layout position:relative to place absolutely positioned elements in it*/\r\n\t\tthis.getParentView()._viewobj.style.position = \"relative\";\r\n\t\tpos = offset(this._viewobj);\r\n\t\tposParent = offset(this.getParentView()._viewobj);\r\n\t\tstart = pos[dir]-posParent[dir];\r\n\t\tcellOffset = offset(cell.$view)[dir]- offset(this.getParentView().$view)[dir];\r\n\r\n\t\tthis._rs_progress = [dir, cell, start, cellOffset];\r\n\t\t/*resizer stick (resizerea ext)*/\r\n\r\n\t\tthis._resizeStick = new ui.resizearea({\r\n\t\t\tcontainer:this.getParentView()._viewobj,\r\n\t\t\tdir:dir,\r\n\t\t\teventPos:this._rs_process[dir],\r\n\t\t\tstart:start-1,\r\n\t\t\theight: this.$height,\r\n\t\t\twidth: this.$width,\r\n\t\t\tborder: 1,\r\n\t\t\tmargin: this.getParentView()._padding[dir === \"x\"? \"left\" : \"top\"]\r\n\t\t});\r\n\r\n\t\t/*stops resizing on stick mouseup*/\r\n\t\tthis._resizeStick.attachEvent(\"onResizeEnd\", bind(this._rsEnd, this));\r\n\t\t/*needed to stop stick moving when the limit for dimension is reached*/\r\n\t\tthis._resizeStick.attachEvent(\"onResize\", bind(this._rsResizeHandler, this));\r\n\r\n\t\taddCss(document.body,\"webix_noselect\",1);\r\n\t},\r\n\t_getResizeDir: function(){\r\n\t\treturn this.getParentView()._vertical_orientation?\"y\":\"x\";\r\n\t},\r\n\t_rsResizeHandler:function(){\r\n\t\tlet cells,cDiff,diff,dir,i,limits,limitSizes,sizes,totalSize;\r\n\t\tif(this._rs_progress){\r\n\t\t\tcells = this._getResizerCells();\r\n\t\t\tdir = this._rs_progress[0];\r\n\t\t\t/*vector distance between resizer and stick*/\r\n\t\t\tdiff = this._resizeStick._last_result -this._rs_progress[2];\r\n\t\t\t/*new sizes for the resized cells, taking into account the stick position*/\r\n\t\t\tsizes = this._rsGetDiffCellSizes(cells,dir,diff);\r\n\t\t\t/*sum of cells dimensions*/\r\n\t\t\ttotalSize = cells[0][\"$\"+this._resizer_dim]+cells[1][\"$\"+this._resizer_dim];\r\n\t\t\tfor(i=0;i<2;i++){\r\n\t\t\t\tcDiff = (i?-diff:diff);/*if cDiff is positive, the size of i cell is increased*/\r\n\r\n\t\t\t\t/*max and min limits*/\r\n\t\t\t\tlimits = cells[i].$getSize(0,0);\r\n\t\t\t\t/*if size is bigger than max limit or size is smaller than min limit*/\r\n\t\t\t\tlet min = (dir==\"y\")?limits[2]:limits[0];\r\n\t\t\t\tlet max = (dir==\"y\")?limits[3]:limits[1];\r\n\r\n\t\t\t\t//if size is fixed, treat it as responsive (default behavior)\r\n\t\t\t\tif (min === max){\r\n\t\t\t\t\tmin = cells[i]._settings[ (dir==\"y\")?\"minHeight\":\"minWidth\" ]||3;\r\n\t\t\t\t\tmax = cells[i]._settings[ (dir==\"y\")?\"maxHeight\":\"maxWidth\" ]||100000;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(cDiff>0&&max&&max<=sizes[i] || cDiff<0&&min&&min>=sizes[i]){\r\n\t\t\t\t\tthis._rsLimit[i] = (cDiff>0?max:min);\r\n\t\t\t\t\t/*new sizes, taking into account max and min limits*/\r\n\t\t\t\t\tlimitSizes = this._rsGetLimitCellSizes(cells,dir);\r\n\t\t\t\t\t/*stick position*/\r\n\t\t\t\t\tthis._resizeStick._dragobj.style[(dir==\"y\"?\"top\":\"left\")] = this._rs_progress[3] + limitSizes[0]+\"px\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(sizes[i]<3){/*cells size can not be less than 1*/\r\n\t\t\t\t\tthis._resizeStick._dragobj.style[(dir==\"y\"?\"top\":\"left\")] = this._rs_progress[3] + i*totalSize+1+\"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._rsLimit[i] = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_getResizerCells:function(){\r\n\t\tvar cells,i,res;\r\n\t\tcells = this.getParentView()._cells;\r\n\t\tfor(i=0; i< cells.length;i++){\r\n\t\t\tif(cells[i]==this){\r\n\t\t\t\tres = [this._getRsCell(cells, i, 1, -1), this._getRsCell(cells, i, 1, 1)];\r\n\t\t\t\tif (!res[0] || !res[1])\r\n\t\t\t\t\tres = null;\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_getRsCell:function(cells, i, step, dir){\r\n\t\tvar cell = cells[i+(dir*step)];\r\n\t\tif(cell && cell._settings.hidden)\r\n\t\t\treturn this._getRsCell(cells, i, step+1, dir);\r\n\t\telse if(cell && cell._settings.$noresize)\r\n\t\t\treturn null;\r\n\t\telse\r\n\t\t\treturn cell;\r\n\t},\r\n\t_rsEnd:function(result){\r\n\t\tif (typeof result == \"undefined\") return;\r\n\r\n\t\tvar cells,dir,diff,size;\r\n\t\tvar vertical = this.getParentView()._vertical_orientation;\r\n\t\tthis._resizerStick = null;\r\n\t\tif (this._rs_progress){\r\n\t\t\tdir = this._rs_progress[0];\r\n\t\t\tdiff = result-this._rs_progress[2];\r\n\t\t\tcells = this._getResizerCells();\r\n\t\t\tif(cells[0]&&cells[1]){\r\n\t\t\t\t/*new cell sizes*/\r\n\t\t\t\tsize = this._rsGetCellSizes(cells,dir,diff);\r\n\r\n\t\t\t\tfor (let i=0; i<2; i++){\r\n\t\t\t\t\t//cell has not fixed size, of fully fixed layout\r\n\t\t\t\t\tvar cell_size = cells[i].$getSize(0,0);\r\n\t\t\t\t\tif (vertical?(cell_size[2] == cell_size[3]):(Math.abs(cell_size[1]-cell_size[0])<3)){\r\n\t\t\t\t\t\t/*set fixed sizes for both cells*/\r\n\t\t\t\t\t\tcells[i]._settings[this._resizer_dim]=size[i];\r\n\t\t\t\t\t\tif (cells[i]._bubble_size)\r\n\t\t\t\t\t\t\tcells[i]._bubble_size(this._resizer_dim, size[i], vertical);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar actualSize = cells[i].$view[vertical?\"offsetHeight\":\"offsetWidth\"];//cells[i][\"$\"+this._resizer_dim];\r\n\t\t\t\t\t\tcells[i]._settings.gravity = size[i]/actualSize*cells[i]._settings.gravity;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcells[0].resize();\r\n\r\n\t\t\t\tfor (let i = 0; i < 2; i++){\r\n\t\t\t\t\tif (cells[i].callEvent)\r\n\t\t\t\t\t\tcells[i].callEvent(\"onViewResize\",[]);\r\n\t\t\t\t\tcells[i].$view.removeAttribute(\"aria-dropeffect\");\r\n\t\t\t\t}\r\n\t\t\t\tcallEvent(\"onLayoutResize\", [cells]);\r\n\t\t\t}\r\n\t\t\tthis._rs_progress = false;\r\n\t\t}\r\n\t\tthis._rs_progress = false;\r\n\t\tthis._rs_started = false;\r\n\t\tthis._rsLimit = null;\r\n\t\tremoveCss(document.body,\"webix_noselect\");\r\n\r\n\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"false\");\r\n\t\tthis._viewobj.removeAttribute(\"aria-dropeffect\");\r\n\t},\r\n\t_rsGetLimitCellSizes: function(cells){\r\n\t\tvar size1,size2,totalSize;\r\n\t\ttotalSize = cells[0][\"$\"+this._resizer_dim]+cells[1][\"$\"+this._resizer_dim];\r\n\t\tif(this._rsLimit[0]){\r\n\t\t\tsize1 = this._rsLimit[0];\r\n\t\t\tsize2 = totalSize-size1;\r\n\t\t}\r\n\t\telse if(this._rsLimit[1]){\r\n\t\t\tsize2 = this._rsLimit[1];\r\n\t\t\tsize1 = totalSize-size2;\r\n\t\t}\r\n\t\treturn [size1,size2];\r\n\t},\r\n\t_rsGetDiffCellSizes:function(cells,dir,diff){\r\n\t\tvar sizes =[];\r\n\t\tvar styleDim = this._resizer_dim==\"height\"?\"offsetHeight\":\"offsetWidth\";\r\n\t\tfor(var i=0;i<2;i++)\r\n\t\t\tsizes[i] = cells[i].$view[styleDim]+(i?-1:1)*diff;\r\n\t\treturn sizes;\r\n\t},\r\n\t_rsGetCellSizes:function(cells,dir,diff){\r\n\t\tvar i,sizes,totalSize;\r\n\t\t/*if max or min dimentsions are set*/\r\n\t\tif(this._rsLimit[0]||this._rsLimit[1]){\r\n\t\t\tsizes = this._rsGetLimitCellSizes(cells,dir);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tsizes = this._rsGetDiffCellSizes(cells,dir,diff);\r\n\t\t\tfor(i =0; i<2;i++ ){\r\n\t\t\t\t/*if stick moving is stopped outsize cells borders*/\r\n\t\t\t\tif(sizes[i]<0){\r\n\t\t\t\t\ttotalSize = sizes[0]+sizes[1];\r\n\t\t\t\t\tsizes[i] =1;\r\n\t\t\t\t\tsizes[1-i] = totalSize-1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn sizes;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, MouseEvents, Destruction, base.view);\r\nexport default {api, view};","import {protoUI, ui} from \"../ui/core\";\r\nimport state from \"../core/state\";\r\n\r\nimport base from \"./view\";\r\nimport baseview from \"./baseview\";\r\n\r\n\r\nconst api = {\r\n\tname:\"align\",\r\n\tdefaults:{\r\n\t\tborderless:true,\r\n\t\tleft:0, top:0, right:0, bottom:0\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className\t+= \" webix_view_align\";\r\n\t},\r\n\t_remove:function(){\r\n\t\tthis.body_setter({ });\r\n\t},\r\n\t_replace:function(new_view){\r\n\t\tthis._body_cell.destructor();\r\n\t\tthis._body_cell = new_view;\r\n\r\n\t\tthis._viewobj.appendChild(this._body_cell._viewobj);\r\n\t\tthis.resize();\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn [this._body_cell];\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\tvalue._inner = { top:false, left:false, right:false, bottom:false};\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_cell = ui._view(value);\r\n\r\n\t\tthis._viewobj.appendChild(this._body_cell._viewobj);\r\n\t\treturn value;\r\n\t},\r\n\talign_setter:function(value){\r\n\t\tif (typeof value === \"string\")\r\n\t\t\tvalue = value.split(\",\");\r\n\r\n\t\tthis._x_align = this._y_align = this._p_align = \"\";\r\n\t\tfor (var i=0; i<value.length; i++){\r\n\t\t\tvar c = value[i];\r\n\t\t\tif (c === \"center\" || c === \"left\" || c === \"right\")\r\n\t\t\t\tthis._x_align = c;\r\n\t\t\tif (c === \"top\" || c === \"bottom\" || c === \"middle\")\r\n\t\t\t\tthis._y_align = c;\r\n\t\t\tif (c === \"absolute\")\r\n\t\t\t\tthis._x_align = this._y_align = this._p_align = \"precise\";\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t},\r\n\tgetBody:function(){\r\n\t\treturn this._body_cell;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tbase.api.$setSize.call(this, x,y);\r\n\r\n\t\tvar dx, dy;\r\n\t\tif (this._p_align){\r\n\t\t\tdx = x - this._settings.left - this._settings.right;\r\n\t\t\tdy = y - this._settings.top - this._settings.bottom;\r\n\t\t} else {\r\n\t\t\tdx = this._desired_size[0] || x;\r\n\t\t\tdy = this._desired_size[2] || y;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tthis._body_cell.$setSize(dx, dy);\r\n\r\n\t\tvar box = this._body_cell._viewobj;\r\n\r\n\t\tif (this._x_align == \"center\")\r\n\t\t\tbox.style.marginLeft = Math.ceil((x-dx)/2)+\"px\";\r\n\t\telse if (this._x_align == \"right\")\r\n\t\t\tbox.style.marginLeft = (x-dx)+\"px\";\r\n\t\telse\r\n\t\t\tbox.style.marginLeft = (this._p_align ? this._settings.left : 0) +\"px\";\r\n\r\n\t\tif (this._y_align == \"middle\") \r\n\t\t\tbox.style.marginTop = Math.ceil((y-dy)/2)+\"px\";\r\n\t\telse if (this._y_align == \"bottom\")\r\n\t\t\tbox.style.marginTop = (y-dy)+\"px\";\r\n\t\telse\r\n\t\t\tbox.style.marginTop = (this._p_align ? this._settings.top : 0) + \"px\";\r\n\t},\r\n\t$getSize:function(dx,dy){\r\n\t\tvar size = this._desired_size = this._body_cell.$getSize(0,0);\r\n\t\tvar self_size = baseview.api.$getSize.call(this, 0, 0);\r\n\t\r\n\t\tif (this._p_align){\r\n\t\t\tdx += this._settings.left + this._settings.right;\r\n\t\t\tdy += this._settings.top + this._settings.bottom;\r\n\t\t}\r\n\r\n\t\tif (!this._x_align || this._p_align){\r\n\t\t\tself_size[0] = size[0]+dx;\r\n\t\t\tself_size[1] = size[1]+dx;\r\n\t\t} else {\r\n\t\t\tself_size[0] = (self_size[0] || size[0] ) +dy;\r\n\t\t\tself_size[1] +=\tdx;\r\n\t\t}\r\n\r\n\t\tif (!this._y_align || this._p_align){\r\n\t\t\tself_size[2] = size[2]+dy;\r\n\t\t\tself_size[3] = size[3]+dy;\r\n\t\t} else {\r\n\t\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\r\n\t\t\tself_size[3] +=\tdy;\r\n\t\t}\r\n\r\n\t\treturn self_size;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view);\r\nexport default {api, view};","import {remove} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {clone, extend, isUndefined} from \"../webix/helpers\";\r\nimport {_each} from \"../ui/helpers\";\r\nimport promise from \"../thirdparty/promiz\";\r\nimport {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nimport baselayout from \"../views/baselayout\";\r\nimport baseview from \"../views/baseview\";\r\nimport base from \"../views/view\";\r\n\r\nimport Settings from \"../core/settings\";\r\nimport animate from \"../webix/animate\";\r\n\r\n\r\n// #include ui/view.js\r\n\r\nconst api = {\r\n\tname:\"multiview\",\r\n\tdefaults:{\r\n\t\tanimate:{\r\n\t\t}\r\n\t},\r\n\tsetValue:function(val){\r\n\t\t$$(val).show();\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this.getActiveId();\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._active_cell = 0;\r\n\t\tthis._vertical_orientation = 1;\r\n\t\tthis._viewobj.style.position = \"relative\";\r\n\t\tthis._viewobj.className += \" webix_multiview\";\r\n\t\tthis._back_queue = [];\r\n\t},\r\n\t_ask_render:function(cell_id, view_id){\r\n\t\tvar cell = $$(cell_id);\r\n\t\tif (!cell._render_hash){\r\n\t\t\tcell._render_queue = [];\r\n\t\t\tcell._render_hash = {};\t\t\t\r\n\t\t}\r\n\t\tif (!cell._render_hash[view_id]){\r\n\t\t\tcell._render_hash[view_id]=true;\r\n\t\t\tcell._render_queue.push(view_id);\r\n\t\t}\r\n\t},\r\n\t_render_activation:function(cell_id){ \r\n\t\tvar cell = $$(cell_id);\r\n\t\tif(this._settings.keepViews)\r\n\t\t\tcell._viewobj.style.display = \"\";\r\n\t\t/*back array*/\r\n\t\tif(this._back_queue[this._back_queue.length-2]!=cell_id){\r\n\t\t\tif(this._back_queue.length==10)\r\n\t\t\t\tthis._back_queue.splice(0,1);\r\n\t\t\tthis._back_queue.push(cell_id);\r\n\t\t}\r\n\t\telse \r\n\t\t\tthis._back_queue.splice(this._back_queue.length-1,1);\t\r\n\t\t\r\n\t\tif (cell._render_hash){\r\n\t\t\tfor (var i=0; i < cell._render_queue.length; i++){\r\n\t\t\t\tvar subcell = $$(cell._render_queue[i]);\r\n\t\t\t\t//cell can be already destroyed\r\n\t\t\t\tif (subcell)\r\n\t\t\t\t\tsubcell.render();\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tcell._render_queue = [];\r\n\t\t\tcell._render_hash = {};\t\t\t\r\n\t\t}\r\n\t},\r\n\taddView:function(view, index){\r\n\t\tvar inc = !isUndefined(index) && index <= this._active_cell ? 1 : 0;\r\n\t\tvar id = baselayout.api.addView.apply(this, arguments);\r\n\r\n\t\tif(this._cells.length > 1){\r\n\t\t\tif(this._settings.keepViews)\r\n\t\t\t\t$$(id)._viewobj.style.display = \"none\";\r\n\t\t\telse\r\n\t\t\t\tremove($$(id)._viewobj);\r\n\r\n\t\t\tthis._active_cell += inc;\r\n\t\t}\r\n\r\n\t\treturn id;\r\n\t},\r\n\t_replace:function(view){\r\n\t\tif(!view._settings.borderless){\r\n\t\t\tconst settings = clone(this._settings._inner);\r\n\t\t\tview._settings._inner = settings;\r\n\t\t\tlet style = view._viewobj.style;\r\n\t\t\tstyle.borderTopWidth = style.borderBottomWidth = style.borderLeftWidth = style.borderRightWidth = \"1px\";\r\n\t\t\tthis._fix_container_borders(style, settings);\r\n\t\t}\r\n\t\tbaselayout.api._replace.apply(this, arguments);\r\n\t},\r\n\t_beforeRemoveView:function(index){\r\n\t\t//removing current view\r\n\t\tif (index == this._active_cell){\r\n\t\t\tvar next = index ? index-1 : 1;\r\n\t\t\tif (this._cells[next]){\r\n\t\t\t\tthis._animation_promise = null;\r\n\t\t\t\tthis._show(this._cells[next], false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (index < this._active_cell)\r\n\t\t\tthis._active_cell--;\r\n\t},\r\n\t//necessary, as we want to ignore hide calls for elements in multiview\r\n\t_hide:function(){},\r\n\t_parse_cells:function(collection){\r\n\t\tcollection = collection || this._collection; \r\n\r\n\t\tfor (let i=0; i < collection.length; i++)\r\n\t\t\tcollection[i]._inner = this._settings.borderless?{top:1, left:1, right:1, bottom:1}:(this._settings._inner||{});\r\n\r\n\t\tbaselayout.api._parse_cells.call(this, collection);\r\n\r\n\t\tfor (let i=1; i < this._cells.length; i++){\r\n\t\t\tif(this._settings.keepViews)\r\n\t\t\t\tthis._cells[i]._viewobj.style.display = \"none\";\r\n\t\t\telse\r\n\t\t\t\tremove(this._cells[i]._viewobj);\r\n\t\t}\r\n\r\n\t\tfor (let i=0; i<collection.length; i++){\r\n\t\t\tvar cell = this._cells[i];\r\n\t\t\tif (cell._cells && !cell._render_borders) continue;\r\n\r\n\t\t\tthis._fix_container_borders(cell._viewobj.style, cell._settings._inner);\r\n\r\n\t\t\tcell._viewobj.setAttribute(\"role\", \"tabpanel\");\r\n\t\t}\r\n\t\tthis._render_activation(this.getActiveId());\r\n\t},\r\n\tcells_setter:function(value){\r\n\t\tassert(value && value.length,\"Multiview must have at least one view in 'cells'\");\r\n\t\tthis._collection = value;\r\n\t},\r\n\t_getDirection:function(next, active){\r\n\t\tvar dir = (this._settings.animate || {}).direction;\r\n\t\tvar vx = (dir == \"top\" || dir == \"bottom\");\r\n\t\treturn \t next < active ? (vx?\"bottom\":\"right\"):(vx?\"top\":\"left\");\r\n\t},\r\n\t_show:function(obj, animation_options){\r\n\t\tconst parent = this.getParentView();\r\n\t\tif (parent && parent.getTabbar){\r\n\t\t\tconst tabBar = parent.getTabbar();\r\n\t\t\ttabBar.blockEvent();\r\n\t\t\ttabBar.setValue(obj._settings.$id || obj._settings.id);\r\n\t\t\ttabBar.unblockEvent();\r\n\t\t}\r\n\r\n\t\tif (this._animation_promise)\r\n\t\t\treturn this._animation_promise.then(() => this._show.apply(this, arguments));\r\n\r\n\t\tvar _next_cell = -1;\r\n\t\tfor (var i=0; i < this._cells.length; i++)\r\n\t\t\tif (this._cells[i]==obj){\r\n\t\t\t\t_next_cell = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\tif (_next_cell < 0 || _next_cell == this._active_cell)\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar prev = this._cells[this._active_cell];\r\n\t\tvar next = this._cells[ _next_cell ];\r\n\t\tprev.$getSize(0,0);\r\n\r\n\t\t//need to be moved in animate\r\n\t\tif((animation_options||typeof animation_options==\"undefined\")&&animate.isSupported() && this._settings.animate) {\r\n\t\t\tvar aniset = extend({}, this._settings.animate);\r\n\t\t\tif(this._settings.keepViews)\r\n\t\t\t\taniset.keepViews = true;\r\n\t\t\taniset.direction = this._getDirection(_next_cell,this._active_cell);\r\n\t\t\taniset = Settings._mergeSettings(animation_options||{}, aniset);\r\n\r\n\t\t\tvar line = animate.formLine(\r\n\t\t\t\tnext._viewobj,\r\n\t\t\t\tprev._viewobj,\r\n\t\t\t\taniset);\r\n\t\t\tnext.$getSize(0,0);\r\n\t\t\tnext.$setSize(this._content_width,this._content_height);\r\n\r\n\t\t\tvar callback_original = aniset.callback;\r\n\t\t\taniset.callback = function(){\r\n\t\t\t\tanimate.breakLine(line,this._settings.keepViews);\r\n\t\t\t\tthis._animation_promise = null;\r\n\t\t\t\taniset.wait_animation.resolve();\r\n\t\t\t\tif (callback_original) callback_original.call(this);\r\n\t\t\t\tcallback_original = aniset.master = aniset.callback = null;\r\n\t\t\t\tthis.resize();\r\n\t\t\t};\r\n\t\t\taniset.master = this;\r\n\r\n\t\t\tthis._active_cell = _next_cell;\r\n\t\t\tthis._render_activation(this.getActiveId());\r\n\r\n\t\t\tanimate(line, aniset);\r\n\t\t\tthis._animation_promise = aniset.wait_animation = promise.defer();\r\n\t\t}\r\n\t\telse { // browsers which don't support transform and transition, or animate:false in config\r\n\t\t\tif(this._settings.keepViews){\r\n\t\t\t\tprev._viewobj.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tremove(prev._viewobj);\r\n\t\t\t\tthis._viewobj.appendChild(this._cells[i]._viewobj);\r\n\t\t\t}\r\n\r\n\t\t\tthis._active_cell = _next_cell;\r\n\t\t\tthis.resizeChildren();\r\n\t\t\tthis._render_activation(this.getActiveId());\r\n\t\t}\r\n\r\n\t\tif (next.callEvent){\r\n\t\t\tnext.callEvent(\"onViewShow\",[]);\r\n\t\t\t_each(next, this._signal_hidden_cells);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onViewChange\",[prev._settings.id, next._settings.id]);\r\n\t\t\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tif (!this._cells.length) return baseview.api.$getSize.call(this, 0, 0);\r\n\t\tif (DEBUG) debug_size_box_start(this, true);\r\n\t\tvar size = this._cells[this._active_cell].$getSize(0, 0);\r\n\t\tif (this._settings.fitBiggest){\r\n\t\t\tfor (var i=0; i<this._cells.length; i++)\r\n\t\t\t\tif (i != this._active_cell){\r\n\t\t\t\t\tvar other = this._cells[i].$getSize(0, 0);\r\n\t\t\t\t\tfor (var j = 0; j < 4; j++)\r\n\t\t\t\t\t\tsize[j] = Math.max(size[j], other[j]);\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//get layout sizes\r\n\t\tvar self_size = baseview.api.$getSize.call(this, 0, 0);\r\n\t\t//use child settings if layout's one was not defined\r\n\t\tif (self_size[1] >= 100000) self_size[1]=0;\r\n\t\tif (self_size[3] >= 100000) self_size[3]=0;\r\n\r\n\t\tself_size[0] = (self_size[0] || size[0] ) +dx;\r\n\t\tself_size[1] = (self_size[1] || size[1] ) +dx;\r\n\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\r\n\t\tself_size[3] = (self_size[3] || size[3] ) +dy;\r\n\t\t\r\n\t\tif (DEBUG) debug_size_box_end(this, self_size);\r\n\t\t\r\n\t\treturn self_size;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (!this._cells.length) return;\r\n\t\tthis._layout_sizes = [x,y];\r\n\t\tbaseview.api.$setSize.call(this,x,y);\r\n\t\tthis._cells[this._active_cell].$setSize(x,y);\r\n\t},\r\n\tisVisible:function(base_id, cell_id){\r\n\t\tif (cell_id && cell_id != this.getActiveId()){\r\n\t\t\tif (base_id)\r\n\t\t\t\tthis._ask_render(cell_id, base_id);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn base.api.isVisible.call(this, base_id, this._settings.id);\r\n\t},\r\n\tgetActiveId:function(){\r\n\t\treturn this._cells.length?this._cells[this._active_cell]._settings.id:null;\r\n\t},\r\n\tback:function(step){\t\t\r\n\t\tstep=step||1;\r\n\t\tif(this.callEvent(\"onBeforeBack\",[this.getActiveId(), step])){\r\n\t\t\tif(this._back_queue.length>step){\r\n\t\t\t\tvar viewId = this._back_queue[this._back_queue.length-step-1];\r\n\t\t\t\t$$(viewId).show();\r\n\t\t\t\treturn viewId;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn null;\r\n\r\n\t},\r\n\t_insertBeforeView:function(view, before){\r\n\t\tif (this._settings.keepViews || (!before || before == this._cells[this._active_cell]))\r\n\t\t\tbaselayout.api._insertBeforeView.call(this, view, before);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, baselayout.view);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {uid, extend} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\nconst api = {\r\n\tname:\"tabview\",\r\n\tsetValue:function(val){\r\n\t\tthis._cells[0].setValue(val);\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._cells[0].getValue();\r\n\t},\r\n\tgetTabbar:function(){\r\n\t\treturn this._cells[0];\r\n\t},\r\n\tgetMultiview:function(){\r\n\t\treturn this._cells[1];\r\n\t},\r\n\taddView:function(obj){\r\n\t\tvar nid = this.getMultiview().addView(obj.body);\r\n\r\n\t\tobj.id = nid;\r\n\t\tobj.value = obj.header;\r\n\t\tdelete obj.body;\r\n\t\tdelete obj.header;\r\n\r\n\t\tvar t = this.getTabbar();\r\n\t\tt.addOption(obj);\r\n\r\n\t\treturn nid;\r\n\t},\r\n\tremoveView:function(id){\r\n\t\tvar t = this.getTabbar();\r\n\t\tt.removeOption(id);\r\n\t\tt.refresh();\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.$ready.push(this._init_tabview_handlers);\r\n\r\n\t\tvar cells = config.cells;\r\n\t\tvar tabs = [];\r\n\r\n\t\tassert(cells && cells.length, \"tabview must have cells collection\");\r\n\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--){\r\n\t\t\tvar view = cells[i].body||cells[i];\r\n\t\t\tif (!view.id) view.id = \"view\"+uid();\r\n\t\t\ttabs[i] = { value:cells[i].header, id:view.id, close:cells[i].close, width:cells[i].width, hidden:  !!cells[i].hidden};\r\n\t\t\tcells[i] = view;\r\n\t\t}\r\n\r\n\t\tvar tabbar = { view:\"tabbar\", multiview:true };\r\n\t\tvar mview = { view:\"multiview\", cells:cells, animate:(!!config.animate) };\r\n\r\n\t\tif (config.value)\r\n\t\t\ttabbar.value = config.value;\r\n\r\n\t\tif (config.tabbar)\r\n\t\t\textend(tabbar, config.tabbar, true);\r\n\t\tif (config.multiview)\r\n\t\t\textend(mview, config.multiview, true);\r\n\t\t\r\n\t\ttabbar.options = tabbar.options || tabs;\r\n\r\n\t\tconfig.rows = [\r\n\t\t\ttabbar, mview\r\n\t\t];\r\n\r\n\t\tdelete config.cells;\r\n\t\tdelete config.tabs;\r\n\t},\r\n\t_init_tabview_handlers:function(){\r\n\t\tthis.getTabbar().attachEvent(\"onOptionRemove\", function(id){\r\n\t\t\tvar view = $$(id);\r\n\t\t\tif (view){\r\n\t\t\t\tvar parent = view.getParentView();\r\n\t\t\t\tif(parent)\r\n\t\t\t\t\tparent.removeView(view);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  layout.view);\r\nexport default {api, view};","import baselayout from \"../views/baselayout\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport baseview from \"../views/baseview\";\r\nimport {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\n\r\n\r\nconst api = {\r\n\tname:\"abslayout\",\r\n\t$init:function(){\r\n\t\tthis.$view.className += \" webix_abslayout\";\r\n\t\tdelete this.rows_setter;\r\n\t\tdelete this.cols_setter;\r\n\t\tthis._collection = [];\r\n\t},\r\n\tcells_setter:function(cells){\r\n\t\tthis._collection = cells;\r\n\t},\r\n\t_parse_cells:function(){\r\n\t\tbaselayout.api._parse_cells.call(this, this._collection);\r\n\t},\r\n\t$getSize:function(){\r\n\t\tvar self_size = baseview.api.$getSize.call(this, 0, 0);\r\n\t\tvar sub = null;\r\n\r\n\t\tfor (var i=0; i<this._cells.length; i++)\r\n\t\t\tif (this._cells[i]._settings.relative)\r\n\t\t\t\tsub = this._cells[i].$getSize(0,0);\r\n\r\n\t\tif (sub){\r\n\t\t\t//use child settings if layout's one was not defined\r\n\t\t\tif (self_size[1] >= 100000) self_size[1]=0;\r\n\t\t\tif (self_size[3] >= 100000) self_size[3]=0;\r\n\r\n\t\t\tself_size[0] = Math.max(self_size[0], sub[0]);\r\n\t\t\tself_size[1] = Math.max(self_size[1], sub[1]);\r\n\t\t\tself_size[2] = Math.max(self_size[2], sub[2]);\r\n\t\t\tself_size[3] = Math.max(self_size[3], sub[3]);\r\n\t\t}\r\n\r\n\t\treturn self_size;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tthis._layout_sizes = [x,y];\r\n\t\tif (DEBUG) debug_size_box_start(this);\r\n\r\n\t\tbaseview.api.$setSize.call(this,x,y);\r\n\t\tthis._set_child_size(x,y);\r\n\r\n\t\tif (DEBUG) debug_size_box_end(this, [x,y]);\r\n\t},\r\n\t_set_child_size:function(x,y){\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tvar view = this._cells[i];\r\n\t\t\tvar conf = view._settings;\r\n\r\n\t\t\tvar sizes = view.$getSize(0,0);\r\n\t\t\tif (conf.relative){\r\n\t\t\t\tconf.left = conf.top = 0;\r\n\t\t\t\tview.$setSize(x,y);\r\n\t\t\t} else {\r\n\t\t\t\tview.$setSize(sizes[0], sizes[2]);\r\n\t\t\t}\r\n\r\n\t\t\tvar node = view.$view;\r\n\t\t\tvar options = [\"left\", \"right\", \"top\", \"bottom\"];\r\n\r\n\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\tvar key = options[j];\r\n\t\t\t\tif (key in conf)\r\n\t\t\t\t\tnode.style[key] = conf[key] + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  baselayout.view);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport {protoUI, ui} from \"../ui/core\";\r\nimport state from \"../core/state\";\r\n\r\n\r\nconst api = {\r\n\tname:\"proxy\",\r\n\tbody_setter:function(value){\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_cell = ui._view(value);\r\n\t\tthis._viewobj.appendChild(this._body_cell._viewobj);\r\n\t\treturn value;\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn [this._body_cell];\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tbase.api.$setSize.call(this, x,y);\r\n\t\tthis._body_cell.$setSize(this.$width, this.$height);\r\n\t},\r\n\t$getSize:function(dx,dy){\r\n\t\tvar selfSize = base.api.$getSize.call(this, dx, dy);\r\n\t\tvar size = this._body_cell.$getSize(dx, dy);\r\n\r\n\t\tsize[0] = Math.max(selfSize[0], size[0]);\r\n\t\tsize[1] = Math.min(selfSize[1], size[1]);\r\n\t\tsize[2] = Math.max(selfSize[2], size[2]);\r\n\t\tsize[3] = Math.min(selfSize[3], size[3]);\r\n\t\tsize[4] = Math.max(selfSize[4], size[4]);\r\n\r\n\t\treturn size;\r\n\t},\r\n\t_replace:function(n){\r\n\t\tthis._body_cell.destructor();\r\n\t\tthis._body_cell = n;\r\n\t\tthis._viewobj.appendChild(n._viewobj);\r\n\t\tthis.resize();\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  base.view);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport {create, remove, addCss, removeCss, offset, pos as getPos} from \"../webix/html\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\nimport {isArray} from \"../webix/helpers\";\r\nimport {_each as each} from \"../ui/helpers\";\r\nimport {attachEvent, callEvent} from \"../webix/customevents\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\nimport state from \"../core/state\";\r\n\r\n\r\nconst api = {\r\n\tname:\"portlet\",\r\n\tdefaults:{\r\n\t\tlayoutType:\"wide\",\r\n\t\ticon:\"wxi-drag\",\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis._viewobj.style.position = \"relative\";\r\n\r\n\t\tif (config.header && config.body)\r\n\t\t\tconfig.body = [ { template:config.header, type:\"header\" }, config.body ];\r\n\r\n\t\tthis.$ready.push(this._init_drag_area);\r\n\t\t// refresh scroll state of datatables\r\n\t\tattachEvent(\"onAfterPortletMove\", this._refreshChildScrolls);\r\n\t},\r\n\t_refreshChildScrolls: function(source){\r\n\t\teach(source, function(view){\r\n\t\t\tif(view._restore_scroll_state)\r\n\t\t\t\tview._restore_scroll_state();\r\n\t\t});\r\n\t},\r\n\t_init_drag_area:function(){\r\n\t\tvar childs = this.getChildViews();\r\n\r\n\t\tif (childs.length > 1)\r\n\t\t\tDragControl.addDrag(childs[0].$view, this);\r\n\t\telse if (this._settings.icon){\r\n\t\t\tvar drag = create(\"div\", { \"class\":\"portlet_drag\" }, \"<span class='webix_icon \"+this._settings.icon+\"'></span>\");\r\n\t\t\tthis._viewobj.appendChild(drag);\r\n\t\t\tDragControl.addDrag(drag, this);\r\n\t\t} else {\r\n\t\t\tDragControl.addDrag(this.$view, this);\r\n\t\t}\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\treturn this.rows_setter(isArray(value) ? value:[value]);\r\n\t},\r\n\tmarkDropArea:function(target, mode){\r\n\t\tif (!target)\r\n\t\t\treturn remove(this._markerbox);\r\n\r\n\t\ttarget = $$(target);\r\n\r\n\t\tif (!this._markerbox)\r\n\t\t\tthis._markerbox = create(\"div\",null,\"&nbsp;\");\r\n\r\n\t\ttarget.$view.appendChild(this._markerbox);\r\n\t\tthis._markerbox.className = \"portlet_marker\"+mode;\r\n\t},\r\n\tmovePortlet:function(target, mode){\r\n\t\tvar parent = target.getParentView();\r\n\t\tvar source = this.getParentView();\r\n\r\n\t\tvar tindex = parent.index(target);\r\n\t\tvar sindex = source.index(this);\r\n\r\n\t\tif (!callEvent(\"onBeforePortletMove\", [source, parent, this, target, mode])) return;\r\n\r\n\t\tstate._freeze_resize = true;\r\n\r\n\t\tvar shift = (source != parent ? 1 : 0);\r\n\t\tvar isv = parent._vertical_orientation;\t\t\r\n\t\tif ((mode == \"top\" || mode == \"bottom\")){\r\n\t\t\tif (isv !== 1){\r\n\t\t\t\tparent = ui({ type:target._settings.layoutType, rows:[] }, parent, tindex+shift);\r\n\t\t\t\tui(target, parent, 0);\r\n\t\t\t\ttindex = 0; shift = 1;\r\n\t\t\t}\r\n\t\t\tif (mode == \"bottom\") shift+=1;\r\n\t\t} else if ((mode == \"left\" || mode == \"right\")){\r\n\t\t\tif (isv !== 0){\r\n\t\t\t\tparent = ui({ type:target._settings.layoutType, cols:[] }, parent, tindex+shift);\r\n\t\t\t\tui(target, parent, 0);\r\n\t\t\t\ttindex = 0; shift = 1;\r\n\t\t\t}\r\n\t\t\tif (mode == \"right\") shift+=1;\r\n\t\t}\r\n\r\n\t\tif (sindex < tindex) shift -= 1;\r\n\t\tui(this, parent, tindex+shift );\r\n\t\tif (mode == \"replace\")\r\n\t\t\tui(target, source, sindex);\r\n\r\n\t\tthis._removeEmptySource(source);\r\n\r\n\t\tstate._freeze_resize = false;\r\n\r\n\t\ttarget.resize();\r\n\t\tsource.resize();\r\n\r\n\t\tcallEvent(\"onAfterPortletMove\", [source, parent, this, target, mode]);\r\n\t},\r\n\t_removeEmptySource:function(view){\r\n\t\tvar childview;\r\n\t\tvar maxcount = 0;\r\n\r\n\t\twhile (view.getChildViews().length <= maxcount){\r\n\t\t\tchildview = view;\r\n\t\t\tview = view.getParentView();\r\n\r\n\t\t\tmaxcount = 1;\r\n\t\t}\r\n\r\n\t\tif (maxcount)\r\n\t\t\tview.removeView(childview);\r\n\t},\r\n\t$drag:function(object){\r\n\t\taddCss(this._viewobj, \"portlet_in_drag\");\r\n\t\tDragControl._drag_context = {source:object, from:object};\r\n\t\treturn this._viewobj.innerHTML;\r\n\t},\r\n\t$dragDestroy:function(target, html){\r\n\t\tremoveCss(this._viewobj, \"portlet_in_drag\");\r\n\t\tremove(html);\r\n\t\tif (this._portlet_drop_target){\r\n\t\t\tthis.movePortlet(this._portlet_drop_target, this._portlet_drop_mode);\r\n\t\t\tthis.markDropArea();\r\n\t\t\tthis._portlet_drop_target = null;\r\n\t\t}\r\n\t},\r\n\t_getDragItemPos: function(){\r\n\t\treturn offset(this.$view);\r\n\t},\r\n\t$dragPos: function(pos, e, html){\r\n\t\thtml.style.left = \"-10000px\";\r\n\t\tvar evObj = env.mouse.context(e);\r\n\r\n\r\n\t\tvar top = document.body.scrollTop || document.documentElement.scrollTop || 0;\r\n\t\tvar left = document.body.scrollLeft ||  document.documentElement.scrollLeft || 0;\r\n\t\t// elementFromPoint need to be corrected on scroll value\r\n\t\tvar node = document.elementFromPoint(evObj.x-left, evObj.y-top);\r\n\r\n\t\tvar view = null;\r\n\t\tif (node)\r\n\t\t\tview = $$(node);\r\n\r\n\t\tthis._portlet_drop_target = this._getPortletTarget(view);\r\n\t\tthis._portlet_drop_mode = this._markPortletDrag(this._portlet_drop_target, e);\r\n\r\n\t\tpos.x = pos.x - this._content_width + 10;\r\n\t\tpos.y = pos.y - 20;\r\n\r\n\t\tDragControl._skip = true;\r\n\t},\r\n\t_markPortletDrag:function(view, ev){\r\n\t\tvar drop = \"\";\r\n\t\tvar mode = \"\";\r\n\r\n\t\tif (ev && view){\r\n\t\t\tvar box = offset(view.$view);\r\n\t\t\tvar pos = getPos(ev);\r\n\t\t\tvar erx = (pos.x-box.x) - box.width/2;\r\n\t\t\tvar ery = (pos.y-box.y) - box.height/2;\r\n\r\n\t\t\tmode = view._settings.mode;\r\n\t\t\tif (!mode)\r\n\t\t\t\tmode = Math.abs(erx)*(box.height/box.width) > Math.abs(ery) ? \"cols\" : \"rows\";\r\n\r\n\t\t\tif (mode == \"cols\"){\r\n\t\t\t\tdrop = erx >=0 ? \"right\" :\"left\";\r\n\t\t\t} else if (mode == \"rows\"){\r\n\t\t\t\tdrop = ery >=0 ? \"bottom\" : \"top\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.markDropArea(view, drop);\r\n\t\t}\r\n\r\n\t\tthis.markDropArea(view, drop);\r\n\t\treturn drop || mode;\r\n\t},\r\n\t_getPortletTarget:function(view){\r\n\t\twhile(view){\r\n\t\t\tif (view.movePortlet)\r\n\t\t\t\treturn view;\r\n\t\t\telse\r\n\t\t\t\tview = view.getParentView();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  layout.view);\r\nexport default {api, view};","import abslayout from \"../views/abslayout\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {isUndefined, extend, copy} from \"../webix/helpers\";\r\nimport baselayout from \"../views/baselayout\";\r\nimport baseview from \"../views/baseview\";\r\n\r\n\r\nconst api = {\r\n\tname:\"gridlayout\",\r\n\tdefaults:{\r\n\t\tautoplace:true,\r\n\t\tgridColumns:2,\r\n\t\tgridRows:2,\r\n\t\tmargin:10,\r\n\t\tpadding:10\r\n\t},\r\n\tgridRows_setter:function(value){\r\n\t\treturn (this._actual_rows = value);\r\n\t},\r\n\t_parse_cells:function(){\r\n\t\tfor (var i = 0; i < this._collection.length; i++) {\r\n\t\t\tthis._collection[i]._inner = {};\r\n\t\t}\r\n\t\tbaselayout.api._parse_cells.call(this, this._collection);\r\n\t},\r\n\tremoveView:function(id){\r\n\t\tabslayout.api.removeView.call(this, id);\r\n\t\tthis._do_compact();\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\t_check_default_pos:function(config){\r\n\t\tconfig.dx = config.dx || 1;\r\n\t\tconfig.dy = config.dy || 1;\r\n\r\n\t\tif (isUndefined(config.y) || isUndefined(config.x)){\r\n\t\t\tvar matrix = this._buildMatrix();\r\n\t\t\tfor (var y=0; y<this._actual_rows; y++)\r\n\t\t\t\tfor (var x=0; x<this._settings.gridColumns; x++){\r\n\t\t\t\t\tif (!matrix[x][y] && this._isFree(matrix, x, y, x+config.dx, y+config.dy)){\r\n\t\t\t\t\t\tconfig.x = x;\r\n\t\t\t\t\t\tconfig.y = y;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tconfig.x = 0;\r\n\t\t\tconfig.y = this._actual_rows;\r\n\t\t}\r\n\r\n\t\t//ensure that view is not wider than grid\r\n\t\tvar exceed = config.x+config.dx - this._settings.gridColumns;\r\n\t\tif (exceed > 0)\r\n\t\t\tconfig.dx -= exceed;\r\n\t},\r\n\t_replace:function(new_view){\r\n\t\tthis._check_default_pos(new_view.config);\r\n\t\tthis._cells.push(new_view);\r\n\r\n\t\tthis.$view.appendChild(new_view._viewobj);\r\n\r\n\t\tthis._reserveSpace(new_view.config, new_view.config.id);\r\n\t\tthis._do_compact(true);\r\n\r\n\t\tif (!this._silent)\r\n\t\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\t_isFree:function(matrix, sx,sy, dx, dy){\r\n\t\tfor (var x=sx; x<dx; x++)\r\n\t\t\tfor (var y=sy; y<dy; y++){\r\n\t\t\t\tif (!matrix[x] || matrix[x][y])\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_markMatrix:function(matrix, sub, id){\r\n\t\tfor (var x=0; x<sub.dx; x++)\r\n\t\t\tfor (var y=0; y<sub.dy; y++)\r\n\t\t\t\tmatrix[x+sub.x][y+sub.y] = id;\r\n\t},\r\n\t_canMoveRight:function(matrix, obj, sub){\r\n\t\tvar mx = this._settings.gridColumns;\r\n\t\tfor (var x=obj.x+obj.dx; (x+sub.dx)<=mx; x++){\r\n\t\t\tif (this._isFree(matrix, x, sub.y, x+sub.dx, sub.y+sub.dy))\r\n\t\t\t\treturn x-sub.x;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t_canMoveLeft:function(matrix, obj, sub){\r\n\t\tfor (var x=obj.x-sub.dx; x>=0; x--){\r\n\t\t\tif (this._isFree(matrix, x, sub.y, x+sub.dx, sub.y+sub.dy))\r\n\t\t\t\treturn sub.x-x;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t_canMoveTop:function(matrix, obj, sub){\r\n\t\tfor (var y=obj.y-sub.dy; y>=0; y--){\r\n\t\t\tif (this._isFree(matrix, sub.x, y, sub.x+sub.dx, y+sub.dy))\r\n\t\t\t\treturn sub.y-y;\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t_buildMatrix:function(id){\r\n\t\tvar m = [];\r\n\t\tfor (var x=0; x<this._settings.gridColumns; x++)\r\n\t\t\tm[x] = [];\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tvar sub = this._cells[i].config;\r\n\t\t\tif (sub.id === id || sub.hidden) continue;\r\n\r\n\t\t\tthis._markMatrix(m, sub, sub.id);\r\n\t\t}\r\n\t\treturn m;\r\n\t},\r\n\t_do_compact:function(force){\r\n\t\t//do not correct places or grid, if autoplace disabled\r\n\t\tif (this._compact() || force)\r\n\t\t\tthis._apply_new_grid();\r\n\t},\r\n\t_compact:function(){\r\n\t\tif (!this._settings.autoplace) return false;\r\n\r\n\t\tvar mx = this._settings.gridColumns;\r\n\t\tvar my = this._actual_rows;\r\n\t\tvar matrix = this._buildMatrix();\r\n\t\tvar compacted = false;\r\n\r\n\t\ttop: for (var y=my-1; y>=0; y--){\r\n\t\t\tfor (var x=mx-1; x>=0; x--)\r\n\t\t\t\tif (matrix[x][y])\r\n\t\t\t\t\tcontinue top;\r\n\r\n\t\t\tcompacted = true;\r\n\t\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\t\tvar sub = this._cells[i].config;\r\n\t\t\t\tif (!sub.hidden && sub.y >= y){\r\n\t\t\t\t\tsub.y -= 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn compacted;\r\n\t},\r\n\t_reserveSpace:function(conf, id){\r\n\t\t//prevent x-overflow\r\n\t\tconf.x -= Math.max(0, conf.x + conf.dx - this._settings.gridColumns);\r\n\r\n\t\t//do not move other cells in non-compact mode\r\n\t\tif (!this._settings.autoplace){\r\n\t\t\tconf.y -= Math.max(0, conf.y + conf.dy - this._settings.gridRows);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar cross = [];\r\n\t\tvar matrix = this._buildMatrix(id);\r\n\r\n\t\tfor (let i=0; i<this._cells.length; i++){\r\n\t\t\tlet sub = this._cells[i].config;\r\n\t\t\tif (sub.id === id || sub.hidden) continue;\r\n\r\n\t\t\t//console.log(sub.y +\"<\"+ (conf.y+conf.dy), (sub.y+sub.dy) + \">\" +conf.y , sub.x +\"<\"+ (conf.x+conf.dx), (sub.x+sub.dx) + \">\" + conf.x);\r\n\t\t\tif (sub.y < conf.y+conf.dy && sub.y+sub.dy > conf.y &&\r\n\t\t\t\tsub.x < conf.x+conf.dx && sub.x+sub.dx > conf.x ){\r\n\t\t\t\t//intersection\r\n\t\t\t\tcross.push(sub);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar next = [];\r\n\t\tfor (let i=0; i<cross.length; i++){\r\n\t\t\t// check right\r\n\t\t\tlet sub = cross[i];\r\n\t\t\tthis._markMatrix(matrix, sub, 0);\r\n\r\n\t\t\tvar right = this._canMoveRight(matrix, conf, sub);\r\n\t\t\tif (right){\r\n\t\t\t\tsub.x += right;\r\n\t\t\t} else {\r\n\t\t\t\t// check left\r\n\t\t\t\tvar left = this._canMoveLeft(matrix, conf, sub);\r\n\t\t\t\tif (left){\r\n\t\t\t\t\tsub.x -= left;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//check top\r\n\t\t\t\t\tvar top = this._canMoveTop(matrix, conf, sub);\r\n\t\t\t\t\tif (top){\r\n\t\t\t\t\t\tsub.y -= top;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//move bottom\r\n\t\t\t\t\t\tsub.y = conf.y + conf.dy;\r\n\t\t\t\t\t\tnext.push(sub);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._markMatrix(matrix, sub, sub.id);\r\n\t\t}\r\n\t\t\r\n\t\t//when moving bottom, we need to iterate one more time, to resolve new intersections\r\n\t\tfor (let i=0; i<next.length; i++){\r\n\t\t\t//console.log(\"after correction for \"+next[i].id);\r\n\t\t\tthis._reserveSpace(next[i], next[i].id);\r\n\t\t}\r\n\t},\r\n\t_apply_new_grid:function(){\r\n\t\tvar rows = this._settings.gridRows;\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tvar cell = this._cells[i].config;\r\n\t\t\tif (!cell.hidden)\r\n\t\t\t\trows = Math.max(rows, cell.y + cell.dy);\r\n\t\t}\r\n\r\n\t\tif (this._actual_rows != rows){\r\n\t\t\tthis._actual_rows = rows;\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t\tthis._set_child_size();\r\n\t},\r\n\tmoveView:function(id, obj){\r\n\t\tobj = extend($$(id).config, obj, true);\r\n\t\tthis._reserveSpace(obj, id);\r\n\t\tthis._do_compact(true);\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\tserialize:function(serializer){\r\n\t\tvar state = [];\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tif (serializer){\r\n\t\t\t\tstate.push(serializer.call(this, this._cells[i]));\r\n\t\t\t} else {\r\n\t\t\t\tvar conf = this._cells[i].config;\r\n\t\t\t\tstate.push({ id:conf.id, name:conf.name, x:conf.x, y:conf.y, dx:conf.dx, dy:conf.dy });\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn state;\r\n\t},\r\n\tclearAll:function(){\r\n\t\tfor (var i=0; i < this._cells.length; i++)\r\n\t\t\tthis._cells[i].destructor();\r\n\t\tthis._cells = [];\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\trestore:function(state, factory){\r\n\t\tfactory = factory || this._settings.factory;\r\n\t\tstate = copy(state);\r\n\r\n\t\tthis._silent = true;\r\n\t\tvar ids = {};\r\n\r\n\t\tfor (let i = 0; i < state.length; i++) {\r\n\t\t\tvar conf = state[i];\r\n\t\t\tvar view = $$(conf.id);\r\n\t\t\tvar id;\r\n\t\t\tif (view){\r\n\t\t\t\textend(view.config, conf, true);\r\n\t\t\t\tid = view.config.id;\r\n\t\t\t} else {\r\n\t\t\t\tview = factory.call(this, conf);\r\n\t\t\t\tid = this.addView(view);\r\n\t\t\t}\r\n\t\t\tids[id] = 1;\r\n\t\t}\r\n\t\tfor (let i = this._cells.length-1; i >= 0; i--) {\r\n\t\t\tif (!ids[this._cells[i].config.id]){\r\n\t\t\t\tthis._cells[i].destructor();\r\n\t\t\t\tthis._cells.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._apply_new_grid();\r\n\t\tthis._silent = false;\r\n\t},\r\n\t$getSize:function(){\r\n\t\tvar self_size = baseview.api.$getSize.call(this, 0, 0);\r\n\r\n\t\tfor (var i=0; i<this._cells.length; i++)\r\n\t\t\tthis._cells[i].$getSize(0,0);\r\n\r\n\t\tvar width = this._settings.cellWidth;\r\n\t\tvar height = this._settings.cellHeight;\r\n\t\tvar box = this._getActualSize(0,0, this._settings.gridColumns, this._actual_rows);\r\n\r\n\t\tif (width)\r\n\t\t\tself_size[0] = box.dx+box.x*2;\r\n\t\tif (height)\r\n\t\t\tself_size[2] = box.dy+box.y*2;\r\n\r\n\t\treturn self_size;\r\n\t},\r\n\t_getActualSize:function(x,y,w,h){\r\n\t\tvar margin = this._settings.margin;\r\n\t\tvar paddingX = this._settings.paddingX || this._settings.padding;\r\n\t\tvar paddingY = this._settings.paddingY || this._settings.padding;\r\n\r\n\t\tvar dx = this._settings.cellWidth;\r\n\t\tif (!dx) dx = (this.$width - 2 * paddingX + margin) / this._settings.gridColumns - margin;\r\n\t\tvar dy = this._settings.cellHeight;\r\n\t\tif (!dy) dy = (this.$height - 2 * paddingY + margin) / this._actual_rows - margin;\r\n\r\n\t\tvar left = paddingX+(dx+margin)*x;\r\n\t\tvar top = paddingY+(dy+margin)*y;\r\n\t\tvar width = Math.ceil(dx+(dx+margin)*(w-1));\r\n\t\tvar height = Math.ceil(dy+(dy+margin)*(h-1));\r\n\r\n\t\treturn { x:left, y:top, dx:width, dy:height };\r\n\t},\r\n\t_set_child_size:function(){\r\n\t\tfor (var i=0; i<this._cells.length; i++){\r\n\t\t\tvar view = this._cells[i];\r\n\t\t\tvar conf = view._settings;\r\n\r\n\t\t\tvar size = this._getActualSize(conf.x, conf.y, conf.dx, conf.dy);\t\t\t\r\n\t\t\tview.$getSize(0,0); //need to be called before $setSize\r\n\t\t\tview.$setSize(size.dx, size.dy);\r\n\r\n\t\t\tvar node = view.$view;\r\n\t\t\tnode.style.left = size.x + \"px\";\r\n\t\t\tnode.style.top = size.y + \"px\";\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  abslayout.view);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {bind, extend, copy} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"datalayout\",\r\n\t$init:function(){\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(this.render, this));\r\n\t},\r\n\t_parse_cells:function(){\r\n\t\tif (!this._origin_cells){\r\n\t\t\tthis._origin_cells = this._collection;\r\n\t\t\tthis._collection = [{}];\r\n\t\t}\r\n\r\n\t\treturn layout.api._parse_cells.call(this, this._collection);\r\n\t},\r\n\tsetValue:function(obj){\r\n\t\tthis.parse(obj);\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar subcount = this._origin_cells.length;\r\n\t\tfor (var i = 0; i < this._cells.length; i++) {\r\n\t\t\tvar id = this.data.order[Math.floor(i/subcount)];\r\n\t\t\tvar item = this.data.getItem(id);\r\n\t\t\tthis._save_data(this._cells[i], item);\r\n\t\t}\r\n\t\treturn this.data.serialize();\r\n\t},\r\n\t_save_data:function(view, prop){\r\n\t\tvar name = view._settings.name;\r\n\t\tif (name){\r\n\t\t\tvar data = null;\r\n\t\t\tif (view.getValues) data = view.getValues();\r\n\t\t\telse if (view.getValue) data = view.getValue();\r\n\t\t\telse if (view.serialize) data = view.serialize();\r\n\r\n\t\t\tif (name == \"$value\")\r\n\t\t\t\textend(prop, data, true);\r\n\t\t\telse \r\n\t\t\t\tprop[name] = data;\r\n\t\t} else {\r\n\t\t\tvar collection = view._cells;\r\n\t\t\tif (collection)\r\n\t\t\t\tfor (var i = 0; i < collection.length; i++)\r\n\t\t\t\t\tthis._save_data(collection[i], prop);\r\n\t\t}\r\n\t},\r\n\t_fill_data:function(view, prop){\r\n\t\tvar obj, name = view._settings.name;\r\n\t\tif (name){\r\n\t\t\tif (name == \"$value\")\r\n\t\t\t\tobj = prop;\r\n\t\t\telse\r\n\t\t\t\tobj = prop[name];\r\n\r\n\t\t\tif (view.setValues) view.setValues(obj);\r\n\t\t\telse if (view.setValue) view.setValue(obj);\r\n\t\t\telse if (view.parse){\r\n\t\t\t\t//make copy of data for treestore parsers\r\n\t\t\t\tif (view.openAll)\r\n\t\t\t\t\tobj = copy(obj);\r\n\t\t\t\tview.parse(obj);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar collection = view._cells;\r\n\t\t\tif (collection)\r\n\t\t\t\tfor (var i = 0; i < collection.length; i++)\r\n\t\t\t\t\tthis._fill_data(collection[i], prop);\r\n\t\t}\r\n\t},\r\n\trender:function(id, obj, mode){\r\n\t\tvar subcount = this._origin_cells.length;\r\n\r\n\t\tif (id && mode === \"update\"){\r\n\t\t\t//update mode, change only part of layout\r\n\t\t\tvar item = this.getItem(id);\r\n\t\t\tvar index = this.getIndexById(id);\r\n\r\n\t\t\tfor(let i=0; i<subcount; i++)\r\n\t\t\t\tthis._fill_data(this._cells[index*subcount+i], item);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//full repainting\r\n\t\tvar cells = this._collection = [];\r\n\t\tvar order = this.data.order;\r\n\r\n\t\tfor (let i = 0; i < order.length; i++) {\r\n\t\t\tif (subcount)\r\n\t\t\t\tfor (let j = 0; j < subcount; j++)\r\n\t\t\t\t\tcells.push(copy(this._origin_cells[j]));\r\n\t\t\telse\r\n\t\t\t\tcells.push(this.getItem(order[i]));\r\n\t\t}\r\n\r\n\t\tif (!cells.length) cells.push({});\r\n\r\n\t\tthis.reconstruct();\r\n\r\n\t\tif (subcount)\r\n\t\t\tfor (let i = 0; i < order.length; i++) {\r\n\t\t\t\tvar prop = this.getItem(order[i]);\r\n\t\t\t\tfor (let j = 0; j < subcount; j++) {\r\n\t\t\t\t\tvar view = this._cells[i*subcount + j];\r\n\t\t\t\t\tthis._fill_data(view, prop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  DataLoader, layout.view);\r\nexport default {api, view};","import gridlayout from \"../views/gridlayout\";\r\nimport {offset, pos as getPos, create, remove} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\nimport {uid, extend} from \"../webix/helpers\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\n\r\nconst api = {\r\n\tname:\"dashboard\",\r\n\t$init:function(){\r\n\t\tDragControl.addDrag(this.$view, this);\r\n\t\tDragControl.addDrop(this.$view, this, true);\r\n\t},\r\n\t_isDragNode:function(target){\r\n\t\tif (!target.getAttribute || target.getAttribute(/*@attr*/\"webix_disable_drag\") || target.getAttribute(/*@attr*/\"webixignore\")) return false;\r\n\r\n\t\tvar css = (target.className || \"\").toString();\r\n\t\tif (css.indexOf(\"panel_drag\") != -1)\r\n\t\t\treturn target;\r\n\t\tif (target.parentNode && target != this.$view)\r\n\t\t\treturn this._isDragNode(target.parentNode);\r\n\r\n\t\treturn false;\r\n\t},\r\n\t$dragCreate:function(object, e){\r\n\t\tif (!e.target) return;\r\n\r\n\t\tif (!this._isDragNode(e.target)) return false;\r\n\t\t\r\n\t\t// ok, it seem the dnd need to be started\r\n\t\tvar sview = $$(e);\r\n\t\tif (!sview.$resizeMove)\r\n\t\t\tsview = sview.queryView(function(a){ return !!a.config.dx; }, \"parent\" );\r\n\r\n\t\tvar box = offset(this.$view);\r\n\t\tvar pos = getPos(e);\r\n\r\n\t\tvar context = DragControl._drag_context = { \r\n\t\t\tsource:sview, from:this,\r\n\t\t\tdashboard:{\r\n\t\t\t\tsx: pos.x - box.x - parseInt(sview.$view.style.left)+ this._settings.margin/2,\r\n\t\t\t\tsy: pos.y - box.y - parseInt(sview.$view.style.top)+ this._settings.margin/2\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif(this.callEvent(\"onBeforeDrag\", [context, e])){\r\n\t\t\tthis._addDragMarker(sview._settings.dx, sview._settings.dy);\r\n\t\t\treturn sview.$view;\r\n\t\t}\r\n\t},\r\n\t_addDragMarker:function(x, y){\r\n\t\tvar drag = this._dragMarker = create(\"div\", { \"class\":\"panel_target\" });\r\n\t\tvar size = this._getActualSize(0,0, x, y);\r\n\t\tdrag.style.width = size.dx+\"px\";\r\n\t\tdrag.style.height = size.dy+\"px\";\r\n\r\n\t\tthis.$view.appendChild(this._dragMarker);\r\n\t},\r\n\t$drop:function(s,t,e){\r\n\t\tvar context = DragControl._drag_context;\r\n\t\tvar obj = {\r\n\t\t\tx: context.dashboard.x,\r\n\t\t\ty: context.dashboard.y\r\n\t\t};\r\n\r\n\t\tif(this.callEvent(\"onBeforeDrop\", [context, e])){\r\n\t\t\tif (context.from === this){\r\n\t\t\t\tvar conf = context.source.config;\r\n\t\t\t\tthis.moveView(conf.id, obj);\r\n\t\t\t} else {\r\n\t\t\t\tif(context.from && context.from.callEvent && context.from.callEvent(\"onBeforeDropOut\", [context,e])){\r\n\t\t\t\t\tobj.name = context.source[0];\r\n\t\t\t\t\tobj.dx = context.dashboard.dx;\r\n\t\t\t\t\tobj.dy = context.dashboard.dy;\r\n\t\t\t\t\tobj.id = obj.name+\":\"+uid();\r\n\r\n\t\t\t\t\tobj = this._settings.factory.call(this, obj);\r\n\t\t\t\t\tif (obj){\r\n\t\t\t\t\t\tthis.addView(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.callEvent(\"onAfterDrop\", [context, e]);\r\n\t\t}\r\n\t},\r\n\t$dragDestroy:function(target, html){\r\n\t\thtml.style.zIndex = 1;\r\n\t\tremove(this._dragMarker);\r\n\t\tthis._dragMarker = null;\r\n\r\n\t\tthis._apply_new_grid();\r\n\t},\r\n\t_getPosFromCoords:function(x,y){\r\n\t\tvar margin = this._settings.margin;\r\n\t\tvar paddingX = this._settings.paddingX || this._settings.padding;\r\n\t\tvar paddingY = this._settings.paddingY || this._settings.padding;\r\n\r\n\t\tvar dx = this._settings.cellWidth;\r\n\t\tif (!dx) dx = (this.$width - 2 * paddingX + margin) / this._settings.gridColumns - margin;\r\n\t\tvar dy = this._settings.cellHeight;\r\n\t\tif (!dy) dy = (this.$height - 2 * paddingY + margin) / this._actual_rows - margin;\r\n\r\n\t\tx = Math.round(-0.2 + (x - paddingX)/(dx+margin/2));\r\n\t\ty = Math.round(-0.2 + (y - paddingX)/(dy+margin/2));\r\n\r\n\t\tx = Math.max(0, Math.min(x, this._settings.gridColumns));\r\n\t\ty = Math.max(0, Math.min(y, this._actual_rows));\r\n\t\t\r\n\t\treturn {\r\n\t\t\tx:x, y:y,\r\n\t\t\twidth: dx, height:dy, margin:margin,\t\r\n\t\t\trx: x*dx+margin*x+paddingX,\r\n\t\t\try: y*dy+margin*y+paddingY\r\n\t\t};\r\n\t},\r\n\t$dragOut:function(s,t,d,e){\r\n\t\tvar context = DragControl._drag_context;\r\n\t\tthis.callEvent(\"onDragOut\", [context,e]);\r\n\t\tif (this._dragMarker && context.external){\r\n\t\t\tremove(this._dragMarker);\r\n\t\t\tthis._dragMarker = null;\r\n\t\t}\r\n\t},\r\n\t$dragIn:function(to, from, e){\r\n\t\tvar context = DragControl._drag_context;\r\n\r\n\t\tif(this.callEvent(\"onBeforeDragIn\", [context,e])){\r\n\t\t\tif (!this._dragMarker){\r\n\t\t\t\t// drag source must provide getItem method\r\n\t\t\t\tif (!context.from || !context.from.getItem) return false;\r\n\t\t\t\t// when factory not defined, do not allow external drag-n-drop\r\n\t\t\t\tif (!this._settings.factory)\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\tcontext.external = true;\r\n\t\t\t\tvar item = context.from.getItem(context.source);\r\n\t\t\t\tcontext.dashboard = { dx : item.dx, dy : item.dy };\r\n\r\n\t\t\t\tthis._addDragMarker(item.dx, item.dy);\r\n\t\t\t}\r\n\t\t\tif (context.external){\r\n\t\t\t\tvar drag = this._dragMarker;\r\n\t\t\t\tvar evObj = env.mouse.context(e);\r\n\t\t\t\tvar box = offset(this.$view);\r\n\r\n\t\t\t\tvar inpos = this._getPosFromCoords(evObj.x - box.x, evObj.y - box.y);\r\n\t\t\t\textend(context.dashboard , inpos, true);\r\n\t\t\t\tdrag.style.left = inpos.rx+\"px\";\r\n\t\t\t\tdrag.style.top = inpos.ry+\"px\";\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t$dragPos: function(pos, e, html){\r\n\t\tvar context = DragControl._drag_context;\r\n\t\thtml.style.left = \"-10000px\";\r\n\r\n\t\tvar evObj = env.mouse.context(e);\r\n\t\tvar box = offset(this.$view);\r\n\t\tvar dash = context.dashboard;\r\n\r\n\t\tvar inpos = this._getPosFromCoords(evObj.x - box.x - dash.sx , evObj.y - box.y - dash.sy);\r\n\t\tpos.x = evObj.x - dash.sx - box.x;\r\n\t\tpos.y = evObj.y - dash.sy - box.y;\r\n\r\n\t\t//drag marker\r\n\t\tvar drag = this._dragMarker;\r\n\t\tdrag.style.left = inpos.rx+\"px\";\r\n\t\tdrag.style.top = inpos.ry+\"px\";\r\n\r\n\t\textend(dash , inpos, true);\r\n\t},\r\n};\r\n\r\n\r\nconst view = protoUI(api,  gridlayout.view);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport ResizeArea from \"../core/resizearea\";\r\nimport {addCss, create} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {isArray} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"panel\",\r\n\t$init:function(config){\r\n\t\tif (config.header && config.body){\r\n\t\t\tvar header = config.header;\r\n\t\t\tif (typeof header !== \"object\")\r\n\t\t\t\theader = { template:config.header, type:\"header\", css:\"webix_header\" };\r\n\t\t\tconfig.body = [ header, config.body ];\r\n\t\t}\r\n\r\n\t\taddCss(this.$view, \"panel_drag_view\");\r\n\t\tthis.$ready.push(this._init_drag_area);\r\n\t},\r\n\t_init_drag_area:function(){\r\n\t\tvar childs = this.getChildViews();\r\n\t\tvar parent = childs.length === 1 ? this : childs[1];\r\n\r\n\t\tif (this._settings.icon){\r\n\t\t\tvar drag = create(\"div\", { \"class\":\"panel_icon\" }, \"<span class='webix_icon \"+this._settings.icon+\" panel_icon_span'></span>\");\r\n\t\t\tif (parent != this)\r\n\t\t\t\tparent.$view.style.position = \"relative\";\r\n\t\t\tparent.$view.appendChild(drag);\r\n\t\t}\r\n\t},\r\n\tbody_setter:function(value){\r\n\t\treturn this.rows_setter(isArray(value) ? value:[value]);\r\n\t},\r\n\t$resizeEnd:function(pos){\r\n\t\tvar parent = this.getParentView();\r\n\t\tif (parent && parent._getPosFromCoords){\r\n\t\t\tvar end = parent._getPosFromCoords(pos.x, pos.y);\r\n\r\n\t\t\tvar dx = Math.max(end.x, 1);\r\n\t\t\tvar dy = Math.max(end.y, 1);\r\n\t\t\tparent.moveView(this._settings.id, { dx:dx, dy:dy });\r\n\t\t}\r\n\t},\r\n\t$resizeMove:function(pos){\r\n\t\tvar parent = this.getParentView();\r\n\t\tif (parent && parent._getPosFromCoords){\r\n\t\t\tvar fx = parent._getPosFromCoords(pos.x, pos.y);\r\n\t\t\tpos.x = fx.width*fx.x+fx.margin*(fx.x-1);\r\n\t\t\tpos.y = fx.height*fx.y+fx.margin*(fx.y-1);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  layout.view, ResizeArea);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport FlexLayout from \"../core/flexlayout\";\r\n\r\n\r\nconst api = {\r\n\t$init:function(){\r\n\t\textend(this, FlexLayout, true);\r\n\t},\r\n\tname:\"flexlayout\"\r\n};\r\n\r\n\r\nconst view = protoUI(api,  layout.view);\r\nexport default {api, view};","import {remove, create} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport window from \"../views/window\";\r\nimport base from \"../views/view\";\r\n\r\nimport {attachEvent, detachEvent} from \"../webix/customevents\";\r\n\r\n\r\nconst api = {\r\n\tname:\"popup\",\r\n\t$init:function(){\r\n\t\tthis._settings.head = false;\r\n\t\tthis.$view.className += \" webix_popup\";\r\n\t\tconst clickHandler = attachEvent(\"onClick\", (e)=>this._hide(e));\r\n\t\tthis.attachEvent(\"onDestruct\", function(){ detachEvent(clickHandler); });\r\n\t\tthis.attachEvent(\"onHide\", this._hide_point);\r\n\t},\r\n\t$skin:function(){\r\n\t\twindow.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.padding = $active.popupPadding;\r\n\t\tthis.defaults.point = !$active.popupNoPoint;\r\n\t\tthis.defaults.borderless = $active.borderlessPopup;\r\n\t},\r\n\tclose:function(){\r\n\t\tremove(this._point_element);\r\n\t\twindow.api.close.call(this);\r\n\t},\r\n\t$getSize:function(x,y){\r\n\t\treturn window.api.$getSize.call(this, x+this._settings.padding*2,y+this._settings.padding*2);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tbase.api.$setSize.call(this,x,y);\r\n\t\tx = this._content_width-this._settings.padding*2;\r\n\t\ty = this._content_height-this._settings.padding*2;\r\n\t\tthis._contentobj.style.padding = this._settings.padding+\"px\";\r\n\t\tthis._headobj.style.display=\"none\";\r\n\t\tthis._body_cell.$setSize(x,y);\r\n\t},\r\n\t//redefine to preserve inner borders\r\n\t//_inner_body_set:function(){}, //same as win?\r\n\t_inner_body_set:function(value){\r\n\t\tif (typeof value.borderless == \"undefined\")\r\n\t\t\tvalue.borderless = false;\r\n\t},\r\n\thead_setter:function(){\r\n\t},\r\n\t_set_point:function(mode, left, top, fixed){\r\n\t\tthis._hide_point();\r\n\t\tdocument.body.appendChild(this._point_element = create(\"DIV\",{ \"class\":\"webix_point_\"+mode },\"\"));\r\n\t\tthis._point_element.style.zIndex = this._viewobj.style.zIndex;\r\n\t\tthis._point_element.style.position = fixed ? \"fixed\":\"absolute\";\r\n\r\n\t\tthis._point_element.style.top = top+\"px\";\r\n\t\tthis._point_element.style.left = left+\"px\";\r\n\t},\r\n\t_hide_point:function(){\r\n\t\tthis._point_element = remove(this._point_element);\r\n\t}\r\n};\r\n\r\n\r\n\r\nconst view = protoUI(api, window.view);\r\nexport default {api, view};","import datalayout from \"../views/datalayout\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport FlexLayout from \"../core/flexlayout\";\r\n\r\n\r\nconst api = {\r\n\t$init:function(){\r\n\t\textend(this, FlexLayout, true);\r\n\t},\r\n\tname:\"flexdatalayout\"\r\n};\r\n\r\n\r\nconst view = protoUI(api,  datalayout.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\n\r\nimport {_each} from \"../ui/helpers\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport {debug_size_box} from \"../webix/debug\";\r\n\r\nimport layout from \"../views/layout\";\r\n\r\nimport Scrollable from \"../core/scrollable\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport Values from \"../core/values\";\r\nimport ValidateData from \"../core/validatedata\";\r\n\r\n\r\nconst api = {\r\n\tname:\"toolbar\",\r\n\tdefaults:{\r\n\t\ttype:\"toolbar\"\r\n\t},\r\n\t_render_borders:true,\r\n\t_form_classname:\"webix_toolbar\",\r\n\t_form_vertical:false,\r\n\t$init:function(config){\r\n\t\tif (!config.borderless){\r\n\t\t\tthis._contentobj.style.borderWidth=\"1px\";\r\n\t\t\tthis._settings._inner = {top:false, left:false, right:false, bottom:false };\r\n\t\t}\r\n\r\n\t\tthis._contentobj.className+=\" \"+this._form_classname;\r\n\t\tthis._viewobj.setAttribute(\"role\", \"toolbar\");\r\n\t},\r\n\t_recollect_elements:function(){\r\n\t\tvar form = this;\r\n\t\tform.elements = {};\r\n\t\t_each(this, function(view){\r\n\t\t\tif (view._settings.name && view.getValue && view.setValue){\r\n\t\t\t\tform.elements[view._settings.name] = view;\r\n\t\t\t\tif (view.mapEvent)\r\n\t\t\t\t\tview.mapEvent({\r\n\t\t\t\t\t\tonbeforetabclick:form,\r\n\t\t\t\t\t\tonaftertabclick:form,\r\n\t\t\t\t\t\tonitemclick:form,\r\n\t\t\t\t\t\tonchange:form\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (view.setValues) return false;\r\n\t\t});\r\n\t\tvar old = this._values;\r\n\t\tthis.setDirty(false);\r\n\t\tif (old) {\r\n\t\t\t//restore dirty state after form reconstructing\r\n\t\t\tvar now = this._values;\r\n\t\t\tfor (var key in form.elements) \r\n\t\t\t\tif (old[key] && now[key] != old[key]){\r\n\t\t\t\t\tnow[key] = old[key];\r\n\t\t\t\t\tthis.setDirty(true);\r\n\t\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_parse_cells_ext_end:function(){\r\n\t\tthis._recollect_elements();\r\n\t},\r\n\t_parse_cells_ext:function(collection){\r\n\t\tvar config = this._settings;\r\n\t\tif (config.elements && !collection){\r\n\t\t\tthis._collection = collection = config.elements;\r\n\t\t\tthis._vertical_orientation = this._form_vertical;\r\n\t\t\tdelete config.elements;\r\n\t\t}\r\n\r\n\t\tif (this._settings.elementsConfig)\r\n\t\t\tthis._rec_apply_settings(this._collection, config.elementsConfig);\r\n\t\t\r\n\t\treturn collection;\r\n\t},\r\n\t_rec_apply_settings:function(col, settings){\r\n\t\tfor (var i=0; i<col.length; i++){\r\n\t\t\tvar element = col[i];\r\n\t\t\textend( element, settings );\r\n\t\t\tvar nextsettings = settings;\r\n\r\n\t\t\tif (element.elementsConfig)\r\n\t\t\t\tnextsettings = extend(extend({}, element.elementsConfig), settings);\r\n\r\n\t\t\tvar sub;\r\n\t\t\tif (element.body)\r\n\t\t\t\tsub = [element.body];\r\n\t\t\telse\r\n\t\t\t\tsub = element.rows || element.cols || element.cells || element.body;\r\n\r\n\t\t\tif (sub)\r\n\t\t\t\tthis._rec_apply_settings(sub, nextsettings);\r\n\t\t}\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar sizes = layout.api.$getSize.call(this, dx, dy);\r\n\t\tvar parent = this.getParentView();\r\n\t\tvar index = this._vertical_orientation?3:1;\r\n\t\tif (parent && this._vertical_orientation != parent._vertical_orientation)\r\n\t\t\tsizes[index]+=100000;\r\n\t\t\r\n\t\tif (DEBUG) debug_size_box(this, sizes, true);\r\n\t\treturn sizes;\r\n\t},\r\n\trender:function(){\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis.render();\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, Scrollable, AtomDataLoader, Values, layout.view, ValidateData);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport {protoUI, ui} from \"../ui/core\";\r\nimport state from \"../core/state\";\r\nimport {debug_size_box_start, debug_size_box_end} from \"../webix/debug\";\r\n\r\n\r\nconst api = {\r\n\tname:\"fieldset\",\r\n\tdefaults:{\r\n\t\tborderless:true,\r\n\t\t$cssName:\"webix_fieldset\",\r\n\t\tpaddingX: 18,\r\n\t\tpaddingY: 30\r\n\t},\r\n\t$init:function(obj){\r\n\t\tobj.body = obj.body || {};\r\n\r\n\t\tlet css = this.defaults.$cssName;\r\n\t\tthis._viewobj.className += \" \"+css;\r\n\t\tthis._viewobj.innerHTML =  \"<fieldset><legend class='\"+css+\"_label\"+(obj.required?\" webix_required\":\"\")+\r\n\t\t\t\"'></legend><div class='\"+css+\"_body'></div></fieldset>\";\r\n\t},\r\n\tlabel_setter:function(value){\r\n\t\tthis._viewobj.firstChild.childNodes[0].innerHTML = value;\r\n\t\treturn value;\r\n\t},\r\n\tgetChildViews:function(){\r\n\t\treturn [this._body_view];\r\n\t},\r\n\tbody_setter:function(config){\r\n\t\tstate._parent_cell = this;\r\n\t\tthis._body_view = ui(config, this._viewobj.firstChild.childNodes[1]);\r\n\t\treturn config;\r\n\t},\r\n\tgetBody:function(){\r\n\t\treturn this._body_view;\r\n\t},\r\n\tresizeChildren:function(){\r\n\t\tif (!this._body_view) return;\r\n\t\tvar x = this.$width - this._settings.paddingX;\r\n\t\tvar y = this.$height - this._settings.paddingY;\r\n\t\tvar sizes=this._body_view.$getSize(0,0);\r\n\r\n\t\t//minWidth\r\n\t\tif (sizes[0]>x) x = sizes[0];\r\n\t\t//minHeight\r\n\t\tif (sizes[2]>y) y = sizes[2];\r\n\r\n\t\tthis._body_view.$setSize(x,y);\r\n\t\tthis.resize();\r\n\t},\r\n\t$getSize:function(x, y){\r\n\t\tif (DEBUG) debug_size_box_start(this, true);\r\n\r\n\t\tx += this._settings.paddingX;\r\n\t\ty += this._settings.paddingY;\r\n\t\t\r\n\t\tvar t = this._body_view.$getSize(x, y);\r\n\t\tvar s = this._last_body_size = base.api.$getSize.call(this, x, y);\r\n\r\n\t\t//inner content minWidth > outer\r\n\t\tif (s[0] < t[0]) s[0] = t[0];\r\n\t\tif (s[2] < t[2]) s[2] = t[2];\r\n\t\t//inner content maxWidth < outer\r\n\t\tif (s[1] > t[1]) s[1] = t[1];\r\n\t\tif (s[3] > t[3]) s[3] = t[3];\r\n\t\t//make max size not less than min size\r\n\t\tif (s[1] < s[0]) s[1] = s[0];\r\n\t\tif (s[3] < s[2]) s[3] = s[2];\r\n\r\n\t\tif (DEBUG) debug_size_box_end(this, s);\r\n\t\treturn s;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (base.api.$setSize.call(this, x,y)){\r\n\t\t\tx = Math.min(this._last_body_size[1], x);\r\n\t\t\ty = Math.min(this._last_body_size[3], y);\r\n\t\t\tthis._body_view.$setSize(x - this._settings.paddingX, y - this._settings.paddingY);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  base.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\n\r\nimport layout from \"../views/layout\";\r\nimport toolbar from \"../views/toolbar\";\r\n\r\n\r\nconst api = {\r\n\tname:\"form\",\r\n\tdefaults:{\r\n\t\ttype:\"form\",\r\n\t\tautoheight:true\r\n\t},\r\n\t_default_height:-1,\r\n\t_form_classname:\"webix_form\",\r\n\t_form_vertical:true,\r\n\t$init:function(){\r\n\t\tthis._viewobj.setAttribute(\"role\", \"form\");\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tif (this._scroll_y && !this._settings.width) dx += env.scrollSize;\r\n\r\n\t\tvar sizes = layout.api.$getSize.call(this, dx, dy);\r\n\r\n\t\tif (this._settings.scroll || !this._settings.autoheight){\r\n\t\t\tsizes[2] =  this._settings.height || this._settings.minHeight || 0;\r\n\t\t\tsizes[3] = this._settings.height || 100000;\r\n\t\t}\r\n\t\t\r\n\t\treturn sizes;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, toolbar.view);\r\nexport default {api, view};","import fieldset from \"../views/fieldset\";\r\nimport {remove, create} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"forminput\",\r\n\tdefaults:{\r\n\t\t$cssName:\"webix_forminput\",\r\n\t\tlabelWidth: 80,\r\n\t\tlabelAlign : \"left\",\r\n\t\t// remove fieldset sizing\r\n\t\tpaddingY:0, paddingX:0\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tif(this._body_view.setValue)\r\n\t\t\tthis._body_view.setValue(value);\r\n\t\telse if (this._body_view.setValues)\r\n\t\t\tthis._body_view.setValues(value);\r\n\t},\r\n\tfocus:function(){\r\n\t\tif (this._body_view.focus){\r\n\t\t\treturn this._body_view.focus();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetValue:function(){\r\n\t\tif(this._body_view.getValue)\r\n\t\t\treturn this._body_view.getValue();\r\n\t\telse if (this._body_view.getValues)\r\n\t\t\treturn this._body_view.getValues();\r\n\t},\r\n\tgetBody:function(){\r\n\t\treturn this._body_view;\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis._inputPadding = $active.inputPadding;\r\n\t\tthis._inputSpacing = $active.inputSpacing;\r\n\t\tthis._labelTopHeight = $active.labelTopHeight;\r\n\t},\r\n\t$init:function(obj){\r\n\t\tthis.$ready.push(function(){\r\n\t\t\tlet label = this._viewobj.firstChild.childNodes[0];\r\n\t\t\tlet body = this._viewobj.firstChild.childNodes[1];\r\n\r\n\t\t\tif (!this._settings.label || (!this._settings.labelWidth && this._settings.labelPosition != \"top\")){\r\n\t\t\t\tlabel.style.display = \"none\";\r\n\t\t\t\tbody.style.padding = \"0 \" + this._inputSpacing/2 + \"px\";\r\n\t\t\t\tthis._settings.paddingX = this._inputSpacing;\r\n\t\t\t\tthis._settings.paddingY = 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this._settings.labelPosition == \"top\"){\r\n\t\t\t\tlabel.style.lineHeight = this._labelTopHeight - this._inputPadding + \"px\";\r\n\t\t\t\tlabel.className += \" \"+this.defaults.$cssName+\"_label_top\";\r\n\t\t\t\tbody.style.padding = \"0 \" + this._inputSpacing/2 + \"px\";\r\n\t\t\t}\r\n\t\t\telse label.style.width = this._settings.paddingX - this._inputSpacing/2 + \"px\";\r\n\r\n\t\t\tlabel.style.textAlign = this._settings.labelAlign;\r\n\r\n\t\t\tif(this._settings.value) this.setValue(this._settings.value);\r\n\t\t});\r\n\r\n\t\tif (obj.labelPosition != \"top\"){\r\n\t\t\tvar lw = isUndefined(obj.labelWidth) ? this.defaults.labelWidth : obj.labelWidth;\r\n\t\t\tobj.paddingX = lw + this._inputSpacing;\r\n\t\t} else {\r\n\t\t\tobj.paddingY = this._labelTopHeight;\r\n\t\t\tobj.paddingX = this._inputSpacing;\r\n\t\t}\r\n\t},\r\n\tlabelWidth_setter:function(value){\r\n\t\treturn value ? Math.max(value, $active.dataPadding) : 0;\r\n\t},\r\n\tsetBottomText: function(text) {\r\n\t\tvar config = this._settings;\r\n\t\tif (typeof text != \"undefined\"){\r\n\t\t\tif (config.bottomLabel == text) return;\r\n\t\t\tconfig.bottomLabel = text;\r\n\t\t}\r\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\") || config.bottomLabel;\r\n\t\tif(this._invalidMessage) {\r\n\t\t\tremove(this._invalidMessage);\r\n\t\t}\r\n\t\tif(message) {\r\n\t\t\tthis.$view.style.position = \"relative\";\r\n\t\t\tthis._invalidMessage = create(\"div\", { \"class\":\"webix_inp_bottom_label\", role:config.invalid?\"alert\":\"\", \"aria-relevant\":\"all\", style:\"position:absolute; bottom:0px; padding:2px 0; background: white; left:\"+(this._inputSpacing/2+(config.label?config.labelWidth:0))+\"px; \" }, message);\r\n\t\t\tthis._viewobj.appendChild(this._invalidMessage);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  fieldset.view);\r\nexport default {api, view};","import template from \"../views/template\";\r\nimport Values from \"../core/values\";\r\nimport {addCss, removeCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {toNode} from \"../webix/helpers\";\r\n\r\n\r\nfunction _tagname(el) {\r\n\tif (!el.tagName) return null;\r\n\treturn el.tagName.toLowerCase();\r\n}\r\nfunction _attribute(el, name) {\r\n\tif (!el.getAttribute) return null;\r\n\tvar attr = el.getAttribute(name);\r\n\treturn attr ? attr.toLowerCase() : null;\r\n}\r\nfunction _get_html_value() {\r\n\tvar tagname = _tagname(this);\r\n\tif (_get_value[tagname])\r\n\t\treturn _get_value[tagname](this);\r\n\treturn _get_value.other(this);\r\n}\r\n\r\nvar _get_value = {\r\n\tradio: function(el){\r\n\t\tfor (var i = 0; i < el.length; i++)\r\n\t\t\tif (el[i].checked) return el[i].value;\r\n\t\treturn \"\";\r\n\t},\r\n\tinput: function(el) {\r\n\t\tvar type = _attribute(el, \"type\");\r\n\t\tif (type === \"checkbox\")\r\n\t\t\treturn el.checked;\t\t\t\r\n\t\treturn el.value;\r\n\t},\r\n\ttextarea: function(el) {\r\n\t\treturn el.value;\r\n\t},\r\n\tselect: function(el) {\r\n\t\tvar index = el.selectedIndex;\r\n\t\treturn el.options[index].value;\r\n\t},\r\n\tother: function(el) {\r\n\t\treturn el.innerHTML;\r\n\t}\r\n};\r\n\r\nfunction  _set_html_value(value) {\r\n\tvar tagname = _tagname(this);\r\n\tif (_set_value[tagname])\r\n\t\treturn _set_value[tagname]( this, value);\r\n\treturn _set_value.other( this, value);\r\n}\r\n\r\nvar _set_value = {\r\n\tradio:function(el, value){\r\n\t\tfor (var i = 0; i < el.length; i++)\r\n\t\t\tel[i].checked = (el[i].value == value);\r\n\t},\r\n\tinput: function(el, value) {\r\n\t\tvar type = _attribute(el, \"type\");\r\n\t\tif (type === \"checkbox\")\r\n\t\t\tel.checked = (value) ? true : false;\r\n\t\telse\r\n\t\t\tel.value = value;\r\n\t},\r\n\ttextarea: function(el, value) {\r\n\t\tel.value = value;\r\n\t},\r\n\tselect: function(el, value) {\r\n\t\tel.value = value;\r\n\t\t//incorrect option applied, select first option\r\n\t\tif(el.selectedIndex === -1) el.value = el.firstElementChild.value;\r\n\t},\r\n\tother: function(el, value) {\r\n\t\tel.innerHTML = value;\r\n\t}\r\n};\r\n\r\n\r\nconst api = {\r\n\tname:\"htmlform\",\r\n\t$init: function(config) {\r\n\t\tthis.elements = {};\r\n\t\tthis._default_values  = false;\r\n\r\n\t\tif (config.content && (config.container == config.content || !config.container && config.content == document.body))\r\n\t\t\tthis._copy_inner_content = true;\r\n\t},\r\n\tcontent_setter:function(content){\r\n\t\tcontent = toNode(content);\r\n\t\tif (this._copy_inner_content){\r\n\t\t\twhile (content.childNodes.length > 1)\r\n\t\t\t\tthis._viewobj.childNodes[0].appendChild(content.childNodes[0]);\r\n\t\t} else {\r\n\t\t\tthis._viewobj.childNodes[0].appendChild(content);\r\n\t\t}\r\n\t\tthis._parse_inputs();\r\n\t\treturn true;\r\n\t},\r\n\trender:function(){\r\n\t\ttemplate.api.render.apply(this, arguments);\r\n\t\tthis._parse_inputs();\r\n\t},\r\n\t_parse_inputs: function() {\r\n\t\tvar inputs = this._viewobj.querySelectorAll(\"[name]\");\r\n\t\tthis.elements = {};\r\n\r\n\r\n\t\tfor (var i=0; i<inputs.length; i++){\r\n\t\t\tvar el = inputs[i];\r\n\t\t\tvar name = _attribute(el, \"name\");\r\n\t\t\tif (name){\r\n\t\t\t\tvar tag = _tagname(el) === \"button\";\r\n\t\t\t\tvar type = _attribute(el, \"type\");\r\n\r\n\t\t\t\tvar cant_clear = tag || type === \"button\" || type === \"submit\";\r\n\r\n\t\t\t\tif (type === \"radio\"){\r\n\t\t\t\t\tvar stack = this.elements[name] || [];\r\n\t\t\t\t\tstack.tagName = \"radio\";\r\n\t\t\t\t\tstack.push(el);\r\n\t\t\t\t\tel = stack;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.elements[name] = el;\r\n\r\n\t\t\t\tel.getValue =  _get_html_value;\r\n\t\t\t\tel.setValue =  _set_html_value;\r\n\t\t\t\tel.$allowsClear = !cant_clear;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.elements;\r\n\t},\r\n\t_mark_invalid:function(id,obj){\r\n\t\tthis._clear_invalid(id,obj);\r\n\t\tvar el = this._viewobj.querySelector(\"[name=\\\"\" + id + \"\\\"]\");\r\n\t\tif (el) addCss(el, \"invalid\");\r\n\t},\r\n\t_clear_invalid:function(id){\r\n\t\tvar el = this._viewobj.querySelector(\"[name=\\\"\" + id + \"\\\"]\");\r\n\t\tif (el) removeCss(el, \"invalid\");\r\n\t},\r\n\tfocus:function(name){\r\n\t\tif (!name && this.$view.contains(document.activeElement)){\r\n\t\t\t// focus already inside of form, leaving\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tValues.focus.apply(this, arguments);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  template.view, Values);\r\nexport default {api, view};","import {triggerEvent, preventEvent, getTextSize, locate} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {isUndefined, isArray} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport template from \"../webix/template\";\r\n\r\nimport baseview from \"../views/baseview\";\r\nimport base from \"../views/view\";\r\n\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport AtomRender from \"../core/atomrender\";\r\nimport Settings from \"../core/settings\";\r\n\r\n\r\nconst api = {\r\n\tname:\"button\",\r\n\ttouchable:true,\r\n\t$skin:function(){\r\n\t\tthis.defaults.height = $active.buttonHeight||$active.inputHeight;\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tvar text = common.$renderInput(obj, common);\r\n\t\t\tif (obj.badge||obj.badge===0) text = text.replace(\"</button>\", \"<span class='webix_badge'>\"+obj.badge+\"</span></button>\");\r\n\t\t\treturn \"<div class='webix_el_box' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+ text + \"</div>\";\r\n\t\t},\r\n\t\tlabel:\"\",\r\n\t\tvalue:\"\",\r\n\t\tborderless:true\r\n\t},\r\n\t$renderInput:function(obj){\r\n\t\treturn \"<button type='button' \"+(obj.popup?\"aria-haspopup='true'\":\"\")+\" class='webix_button'>\"+(obj.label||obj.value)+\"</button>\";\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis._viewobj.className += \" webix_control webix_el_\"+(this.$cssName||this.name);\r\n\r\n\t\tthis._destroy_with_me = [];\r\n\t\tthis._set_default_css(config);\r\n\r\n\t\tthis.data = this._settings;\r\n\t\tthis._dataobj = this._viewobj;\r\n\r\n\t\tthis.$ready.push(function(){ this._calc_size(this.config); });\r\n\t},\r\n\thotkey_setter: function(key){\r\n\t\tvar control = this;\r\n\t\tthis._addElementHotKey(key, function(view,ev){\r\n\t\t\tif(control.isVisible()){\r\n\t\t\t\tvar elem = control.$view.firstChild;\r\n\t\t\t\ttriggerEvent(elem, \"MouseEvents\", \"click\");\r\n\t\t\t\tpreventEvent(ev);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t_set_default_css: function(config){\r\n\t\tif (!config.css || !this._get_class(config.css) || (this.defaults.css && !this._get_class(this.defaults.css))){\r\n\t\t\tthis._viewobj.className += \" webix_secondary\";\r\n\t\t}\r\n\t},\r\n\t_get_class:function(css){\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tconst classes = { webix_danger:1, webix_transparent:1, webix_primary:1 };\r\n\t\t\tfor(let i in classes){\r\n\t\t\t\tif(css.indexOf(i)!==-1)\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_addElementHotKey: function(key, func, view){\r\n\t\tvar keyCode = UIManager.addHotKey(key, func, view);\r\n\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\tUIManager.removeHotKey(keyCode, func, view);\r\n\t\t});\r\n\t},\r\n\ttype_setter:function(value){\r\n\t\tif (this._types[value])\r\n\t\t\tthis.$renderInput = template(this._types[value]);\r\n\t\treturn value;\r\n\t},\r\n\t_set_inner_size:false,\r\n\t_types:{\r\n\t\timage:\"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'>#label#</button>\",\r\n\t\timageTop:\"<button type='button' class='webix_button webix_img_btn_top'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'><div class='webix_img_btn_text'>#label#</div></button>\",\r\n\r\n\t\ticon:\"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;'></span>#label#</button>\",\r\n\t\ticonTop:\"<button type='button' class='webix_button webix_img_btn_top' style='width:100%;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#label#</div></button>\",\r\n\t},\r\n\t_findAllInputs: function(){\r\n\t\tvar result = [];\r\n\t\tvar tagNames = [\"input\",\"select\",\"textarea\",\"button\"];\r\n\t\tfor(var i=0; i< tagNames.length; i++){\r\n\t\t\tvar inputs = this.$view.getElementsByTagName(tagNames[i]);\r\n\t\t\tfor(var j = 0; j< inputs.length; j++){\r\n\t\t\t\tresult.push(inputs[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tdisable: function(){\r\n\t\tvar i, node, elem = this._getBox();\r\n\t\tbaseview.api.disable.apply(this, arguments);\r\n\t\tif(elem && elem.className.indexOf(\" webix_disabled_box\")== -1){\r\n\t\t\telem.className += \" webix_disabled_box\";\r\n\t\t\tvar inputs = this._findAllInputs();\r\n\t\t\tfor(i=0; i< inputs.length; i++)\r\n\t\t\t\tinputs[i].setAttribute(\"disabled\",true);\r\n\r\n\t\t\t// richselect and based on it\r\n\t\t\tnode = this.getInputNode();\r\n\t\t\tif(node && node.tagName.toLowerCase() == \"div\"){\r\n\t\t\t\tthis._disabledTabIndex = node.getAttribute(\"tabIndex\");\r\n\t\t\t\tnode.removeAttribute(\"tabIndex\");\r\n\t\t\t}\r\n\r\n\t\t\tif(this._settings.labelPosition == \"top\"){\r\n\t\t\t\tvar label = this._dataobj.firstChild;\r\n\t\t\t\tif(label)\r\n\t\t\t\t\tlabel.className += \" webix_disabled_top_label\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tenable: function(){\r\n\t\tbaseview.api.enable.apply(this, arguments);\r\n\t\tvar node,\r\n\t\t\telem = this._getBox();\r\n\t\tif(elem){\r\n\t\t\telem.className = elem.className.replace(\" webix_disabled_box\",\"\");\r\n\t\t\tvar inputs = this._findAllInputs();\r\n\t\t\tfor(var i=0; i< inputs.length; i++)\r\n\t\t\t\tinputs[i].removeAttribute(\"disabled\");\r\n\r\n\t\t\tnode = this.getInputNode();\r\n\t\t\tif(node && !isUndefined(this._disabledTabIndex))\r\n\t\t\t\tnode.setAttribute(\"tabIndex\",this._disabledTabIndex);\r\n\r\n\t\t\tif(this._settings.labelPosition == \"top\"){\r\n\t\t\t\tvar label = this._dataobj.firstChild;\r\n\t\t\t\tif(label)\r\n\t\t\t\t\tlabel.className = label.className.replace(\" webix_disabled_top_label\",\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif(base.api.$setSize.call(this,x,y)){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvalue = this.$prepareValue(value);\r\n\t\tconst oldvalue = this._settings.value;\r\n\r\n\t\tif (this.$compareValue(oldvalue, value)){\r\n\t\t\tif (this._rendered_input && value != this.$getValue())\r\n\t\t\t\tthis.$setValue(value);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._settings.value = value;\r\n\t\tif (this._rendered_input)\r\n\t\t\tthis.$setValue(value);\r\n\r\n\t\tthis.callEvent(\"onChange\", [value, oldvalue]);\r\n\t},\r\n\t$compareValue:function(oldvalue, value){ \r\n\t\tif (typeof value === \"number\") value = value.toString();\r\n\t\tif (typeof oldvalue === \"number\") oldvalue = oldvalue.toString();\r\n\t\treturn oldvalue == value;\r\n\t},\r\n\t$prepareValue:function(value){ return value === 0 ? \"0\" : (value || \"\").toString(); },\r\n\tvalue_setter:function(value){\r\n\t\treturn this.$prepareValue(value);\r\n\t},\r\n\t//visual part of setValue\r\n\t$setValue:function(value){\r\n\t\tconst node = this.getInputNode();\r\n\t\tif (node && !this._types[this._settings.type]){\r\n\t\t\tvalue = this._settings.label || value;\r\n\t\t\tif (node.tagName==\"BUTTON\") node.innerHTML = value;\r\n\t\t\telse node.value = value;\r\n\t\t}\r\n\t},\r\n\tgetValue:function(){\r\n\t\t//if button was rendered - returning actual value\r\n\t\t//otherwise - returning last set value\r\n\t\tvar value = this._rendered_input? this.$getValue() : this._settings.value;\r\n\t\treturn (typeof value == \"undefined\") ? \"\" : value;\r\n\t},\r\n\t$getValue:function(){\r\n\t\treturn this._settings.value||\"\";\t\r\n\t},\r\n\tfocus:function(){\r\n\t\tif(!UIManager.canFocus(this))\r\n\t\t\treturn false;\r\n\t\t\r\n\t\tvar input = this.getInputNode();\r\n\t\tif (input && input.focus) input.focus();\r\n\t},\r\n\tblur:function() {\r\n\t\tvar input = this.getInputNode();\r\n\t\tif (input && input.blur) input.blur();\r\n\t},\r\n\t//get input element\r\n\tgetInputNode: function() {\r\n\t\treturn this._dataobj.getElementsByTagName(\"input\")[0]||this._dataobj.getElementsByTagName(\"button\")[0];\r\n\t},\r\n\t//get top-level sub-container\r\n\t_getBox:function(){\r\n\t\tfor(var i=0;i< this._dataobj.childNodes.length;i++){\r\n\t\t\tif(this._dataobj.childNodes[i].className.indexOf(\"webix_el_box\")>=0)\r\n\t\t\t\treturn this._dataobj.childNodes[i];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t_get_tooltip_data:function(t,e){\r\n\t\tlet node = e.target;\r\n\t\tlet box = this._getBox();\r\n\r\n\t\tconst isTopLabel = this._settings.labelPosition == \"top\" && this._dataobj.firstChild.contains(node);\r\n\r\n\t\tif (isTopLabel || box && box.contains(node))\r\n\t\t\treturn this._settings;\r\n\t\treturn null;\r\n\t},\r\n\t_sqrt_2:Math.sqrt(2),\r\n\t_calc_size:function(config){\r\n\t\tconfig = config || this._settings;\r\n\t\tif (config.autowidth){\r\n\t\t\tlet width = getTextSize((config.value||config.label || \"\"), \"webixbutton\").width +\r\n\t\t\t\t(config.badge||config.badge===0 ? getTextSize(config.badge, \"webix_badge\").width * 2 - 32 : 0) +\r\n\t\t\t\t(config.type === \"icon\" ? 24 : 0) +\r\n\t\t\t\t(config.type === \"image\" ? config.height-$active.inputPadding : 0);\r\n\r\n\t\t\twidth = Math.max(config.minWidth || 0, width);\r\n\t\t\tconfig.width = Math.min(config.maxWidth || Infinity, width);\r\n\t\t}\r\n\t},\r\n\t_calck_input_size:function(){\r\n\t\t//use width for both width and inputWidth settings in clever way\r\n\t\t//in form, we can define width for some element smaller than for siblings\r\n\t\t//it will use inputWidth to render the desired view\r\n\t\tthis._input_width = this._settings.inputWidth || \r\n\t\t\t((this._content_width - this._settings.width > 2)?this._settings.width:0) || this._content_width;\r\n\t\tthis._input_height = this._settings.inputHeight||this._inputHeight||0;\r\n\t},\r\n\tresize: function(){\r\n\t\tthis._calc_size();\r\n\t\treturn base.api.resize.apply(this,arguments);\r\n\t},\r\n\trender:function(){\r\n\t\tthis._calck_input_size();\r\n\t\tthis._settings.awidth  = this._input_width||this._content_width;\r\n\t\tthis._settings.aheight = this._input_height||this._content_height;\r\n\r\n\t\t//image button - image width\r\n\t\tthis._settings.bheight = this._settings.aheight+2;\r\n\t\tthis._settings.cheight = this._settings.aheight- 2*$active.inputPadding;\r\n\t\tthis._settings.dheight = this._settings.cheight - 2; // - borders\r\n\r\n\t\tif(AtomRender.render.call(this)){\r\n\t\t\tthis._rendered_input = true;\r\n\t\t\tif (this._set_inner_size) this._set_inner_size();\r\n\t\t\tif (this._settings.align){\r\n\t\t\t\tvar handle = this._dataobj.firstChild;\r\n\t\t\t\tif (this._settings.labelPosition == \"top\" && handle.nextSibling)\r\n\t\t\t\t\thandle = handle.nextSibling;\r\n\r\n\t\t\t\tswitch(this._settings.align){\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\thandle.style.cssFloat = \"right\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\thandle.style.display = \"inline-block\";\r\n\t\t\t\t\t\thandle.parentNode.style.textAlign = \"center\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\thandle.style.marginTop = Math.round((this._content_height-this._input_height)/2)+\"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"bottom\": \r\n\t\t\t\t\t\thandle.style.marginTop = (this._content_height-this._input_height)+\"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\thandle.style.cssFloat = \"left\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tassert(false, \"Unknown align mode: \"+this._settings.align);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$render)\r\n\t\t\t\tthis.$render(this.data);\r\n\r\n\t\t\tif (this._settings.disabled)\r\n\t\t\t\tthis.disable();\r\n\r\n\t\t\tif (this._init_once){\r\n\t\t\t\tthis._init_once(this.data);\r\n\t\t\t\tthis._init_once = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh:function(){ this.render(); },\r\n\r\n\ton_click:{\r\n\t\t_handle_tab_click: function(ev){\r\n\t\t\tconst id = locate(ev, /*@attr*/\"button_id\");\r\n\t\t\tconst opt = this.getOption(id);\r\n\r\n\t\t\tif (opt && !opt.disabled && this.callEvent(\"onBeforeTabClick\", [id, ev])){\r\n\t\t\t\tthis.setValue(id);\r\n\t\t\t\tthis.focus();\r\n\t\t\t\tthis.callEvent(\"onAfterTabClick\", [id, ev]);\r\n\t\t\t}\r\n\t\t},\r\n\t\twebix_all_segments:function(ev, button){\r\n\t\t\tthis.on_click._handle_tab_click.call(this, ev, button);\r\n\t\t},\r\n\t\twebix_all_tabs:function(ev, button){\r\n\t\t\tthis.on_click._handle_tab_click.call(this, ev, button);\r\n\t\t},\r\n\t\twebix_inp_counter_next:function(){\r\n\t\t\tif (!this._settings.readonly)\r\n\t\t\t\tthis.next();\r\n\t\t},\r\n\t\twebix_inp_counter_prev:function(){\r\n\t\t\tif (!this._settings.readonly)\r\n\t\t\t\tthis.prev();\r\n\t\t},\r\n\t\twebix_input_icon:function(){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t},\r\n\t\twebix_inp_checkbox_border: function(e) {\r\n\t\t\tif (!this._settings.disabled && e.target.tagName != \"DIV\" && !this._settings.readonly)\r\n\t\t\t\tthis.toggle();\r\n\t\t},\r\n\t\twebix_inp_checkbox_label: function() {\r\n\t\t\tif (!this._settings.readonly)\r\n\t\t\t\tthis.toggle();\r\n\t\t},\r\n\t\twebix_inp_radio_border: function(e) {\r\n\t\t\tconst id = locate(e, /*@attr*/\"radio_id\");\r\n\t\t\tconst opt = this.getOption(id);\r\n\r\n\t\t\tif (opt && !opt.disabled){\r\n\t\t\t\tthis.setValue(id);\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\twebix_tab_more_icon: function(ev,obj,node){\r\n\t\t\tconst popup = this.getPopup();\r\n\t\t\tif (!popup.isVisible()){\r\n\t\t\t\tpopup.resize();\r\n\t\t\t\tpopup.show(node, null, true);\r\n\t\t\t} else\r\n\t\t\t\tpopup.hide();\r\n\t\t},\r\n\t\twebix_tab_close:function(e){\r\n\t\t\tconst id = locate(e, /*@attr*/\"button_id\");\r\n\t\t\tconst opt = this.getOption(id);\r\n\r\n\t\t\tif (opt && !opt.disabled && this.callEvent(\"onBeforeTabClose\", [id, e]))\r\n\t\t\t\tthis.removeOption(id);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\t//method do not used by button, but  used by other child-views\r\n\t_check_options:function(opts){\r\n\t\tassert(!!opts, this.name+\": options not defined\");\r\n\t\tassert(isArray(opts), this.name+\": options must be an array\");\r\n\r\n\t\tfor(var i=0;i<opts.length;i++){\r\n\t\t\t// asserts need to be removed in final version\t\t\t\r\n\t\t\tassert(!opts[i].text, \"Please replace .text with .value in control config\");\r\n\t\t\tassert(!opts[i].label, \"Please replace .label with .value in control config\");\r\n\r\n\t\t\tif(typeof opts[i]==\"string\"){\r\n\t\t\t\topts[i] = {id:opts[i], value:opts[i]};\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif(isUndefined(opts[i].id))\r\n\t\t\t\t\topts[i].id = opts[i].value;\r\n\r\n\t\t\t\tif(isUndefined(opts[i].value))\r\n\t\t\t\t\topts[i].value = opts[i].id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn opts;\r\n\t},\r\n\t_get_div_placeholder: function(obj){\r\n\t\tvar placeholder = (obj?obj.placeholder:this._settings.placeholder);\r\n\t\treturn (placeholder?\"<span class='webix_placeholder'>\"+placeholder+\"</span>\":\"\");\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, base.view, AutoTooltip, AtomRender, Settings, EventSystem);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport EditAbility from \"../core/editability\";\r\nimport MapCollection from \"../core/mapcollection\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport SingleRender from \"../core/singlerender\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {locate, createCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {uid, extend, clone, isUndefined} from \"../webix/helpers\";\r\nimport {addCss, removeCss} from \"../webix/html\";\r\nimport RenderStack from \"../core/renderstack\";\r\nimport CodeParser from \"../core/codeparser\";\r\n\r\n\r\nconst api = {\r\n\tname:\"property\",\r\n\t$init:function(){\r\n\t\tthis._contentobj.className+=\" webix_property\";\r\n\t\tthis._contentobj.setAttribute(\"role\", \"listbox\");\r\n\t\tthis._destroy_with_me = [];\r\n\r\n\t\tthis.attachEvent(\"onAfterEditStart\", function(id){\r\n\t\t\tvar node = this.getItemNode(id);\r\n\t\t\taddCss(node, \"webix_focused\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterEditStop\", function(id, editor){\r\n\t\t\tvar node = this.getItemNode(editor.config.id);\r\n\t\t\tremoveCss(node, \"webix_focused\");\r\n\t\t});\r\n\t},\r\n\tdefaults:{\r\n\t\tnameWidth:100,\r\n\t\teditable:true\r\n\t},\r\n\ton_render:{\r\n\t\tcheckbox:function(value){\r\n\t\t\treturn  \"<input type='checkbox' class='webix_property_check' \"+(value?\"checked\":\"\")+\">\";\r\n\t\t},\r\n\t\tcolor:function(value){\r\n\t\t\treturn  \"<div class=\\\"webix_property_col_val\\\"><div class='webix_property_col_ind' style=\\\"background-color:\"+(value||\"#FFFFFF\")+\";\\\"></div><span>\" +value+\"</span></div>\";\r\n\t\t}\r\n\t},\r\n\ton_edit:{\r\n\t\tlabel:false\r\n\t},\r\n\t_id:/*@attr*/\"webix_f_id\",\r\n\ton_click:{\r\n\t\twebix_property_check:function(ev){\r\n\t\t\tvar id = this.locate(ev);\r\n\t\t\tthis.getItem(id).value = !this.getItem(id).value;\r\n\t\t\tthis.callEvent(\"onCheck\",[id, this.getItem(id).value]);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t},\r\n\tregisterType:function(name, data){\r\n\t\tif (!isUndefined(data.template))\r\n\t\t\tthis.on_render[name] = data.template;\r\n\t\tif (!isUndefined(data.editor))\r\n\t\t\tthis.on_edit[name] = data.editor;\r\n\t\tif (!isUndefined(data.click))\r\n\t\t\tfor (var key in data.click)\r\n\t\t\t\tthis.on_click[key] = data.click[key];\r\n\t},\r\n\telements_setter:function(data){\r\n\t\tthis._idToLine = {};\r\n\t\tfor(var i =0; i < data.length; i++){\r\n\t\t\tvar line = data[i];\r\n\t\t\tif (line.type == \"multiselect\")\r\n\t\t\t\tline.optionslist = true;\r\n\r\n\t\t\t//line.type \t= \tline.type||\"label\";\r\n\t\t\tline.id \t=\tline.id||uid();\r\n\t\t\tline.label \t=\tline.label||\"\";\r\n\t\t\tline.value \t=\tline.value||\"\";\r\n\t\t\tthis._idToLine[line.id] = i;\r\n\t\t\tthis._map_options(data[i]);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tshowItem:function(id){\r\n\t\tRenderStack.showItem.call(this, id);\r\n\t},\r\n\tlocate:function(){\r\n\t\treturn locate(arguments[0], this._id);\r\n\t},\r\n\tgetItemNode:function(id){\r\n\t\treturn this._dataobj.childNodes[this._idToLine[id]];\r\n\t},\r\n\tgetItem:function(id){\r\n\t\treturn this._settings.elements[this._idToLine[id]];\r\n\t},\r\n\t_get_editor_type:function(id){\r\n\t\tvar type = this.getItem(id).type;\r\n\t\tif (type == \"checkbox\") return \"inline-checkbox\";\r\n\t\tvar alter_type = this.on_edit[type];\r\n\t\treturn (alter_type === false)?false:(alter_type||type);\r\n\t},\r\n\t_get_edit_config:function(id){\r\n\t\treturn this.getItem(id);\r\n\t},\r\n\t_find_cell_next:function(start, check , direction){\r\n\t\tlet row = this._idToLine[start.id];\r\n\t\tlet order = this._settings.elements;\r\n\t\t\r\n\t\tif (direction){\r\n\t\t\tfor (let i=row+1; i<order.length; i++){\r\n\t\t\t\tif (check.call(this, order[i].id))\r\n\t\t\t\t\treturn order[i].id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i=row-1; i>=0; i--){\r\n\t\t\t\tif (check.call(this, order[i].id))\r\n\t\t\t\t\treturn order[i].id;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\tupdateItem:function(key, data){\r\n\t\tdata = data || {};\r\n\r\n\t\tvar line = this.getItem(key);\r\n\t\tif (line)\r\n\t\t\textend(line, data, true);\r\n\r\n\t\tthis.refresh();\r\n\t},\r\n\t_cellPosition:function(id){\r\n\t\tvar html = this.getItemNode(id);\r\n\t\treturn {\r\n\t\t\tleft:html.offsetLeft+this._settings.nameWidth,\r\n\t\t\ttop:html.offsetTop,\r\n\t\t\theight:html.firstChild.offsetHeight,\r\n\t\t\twidth:this._data_width,\r\n\t\t\tparent:this._contentobj\r\n\t\t};\r\n\t},\r\n\t_clear:function(){\r\n\t\tvar lines = this._settings.elements;\r\n\t\tfor (var i=0; i<lines.length; i++)\r\n\t\t\tlines[i].value = \"\";\r\n\t},\r\n\tclear:function(){\r\n\t\tthis._clear();\r\n\t\tthis._props_dataset = {};\r\n\t\tthis.refresh();\r\n\t},\r\n\tsetValues:function(data, update){\r\n\t\tif (this._settings.complexData)\r\n\t\t\tdata = CodeParser.collapseNames(data, \"\", {}, (v) => isUndefined(this._idToLine[v]));\r\n\r\n\t\tif(!update) this._clear();\r\n\t\tfor(var key in data){\r\n\t\t\tvar line = this.getItem(key);\r\n\t\t\tif (line)\r\n\t\t\t\tline.value = data[key];\r\n\t\t}\r\n\t\t\r\n\t\tthis._props_dataset = data;\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetValues:function(){\r\n\t\tvar data = clone(this._props_dataset||{});\r\n\t\tfor (var i = 0; i < this._settings.elements.length; i++) {\r\n\t\t\tvar line = this._settings.elements[i];\r\n\t\t\tif (line.type != \"label\")\r\n\t\t\t\tdata[line.id] = line.value;\r\n\t\t}\r\n\r\n\t\tif (this._settings.complexData)\r\n\t\t\tdata = CodeParser.expandNames(data);\r\n\r\n\t\treturn data;\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis.render();\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (base.api.$setSize.call(this, x, y)){\r\n\t\t\tthis._data_width = this._content_width - this._settings.nameWidth;\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\t$getSize:function(dx,dy){\r\n\t\tif (this._settings.autoheight){\r\n\t\t\tvar count = this._settings.elements.length;\r\n\t\t\tthis._settings.height = Math.max(this.type.height * count,this._settings.minHeight||0);\r\n\t\t}\r\n\t\treturn base.api.$getSize.call(this, dx, dy);\r\n\t},\r\n\t_toHTML:function(){\r\n\t\tvar html = [];\r\n\t\tvar els = this._settings.elements;\r\n\t\tif (els)\r\n\t\t\tfor (var i=0; i<els.length; i++){\r\n\t\t\t\tvar data = els[i];\r\n\t\t\t\tif (data.css && typeof data.css == \"object\")\r\n\t\t\t\t\tdata.css = createCss(data.css);\r\n\r\n\t\t\t\tvar pre = \"<div \"+/*@attr*/\"webix_f_id\"+\"=\\\"\"+data.id+\"\\\"\"+(data.type!==\"label\"?\"role=\\\"option\\\" tabindex=\\\"0\\\"\":\"\")+\" class=\\\"webix_property_line \"+(data.css||\"\")+\"\\\">\";\r\n\t\t\t\tif (data.type == \"label\")\r\n\t\t\t\t\thtml[i] = pre+\"<div class='webix_property_label_line'>\"+data.label+\"</div></div>\";\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar render = this.on_render[data.type],\r\n\t\t\t\t\t\tcontent;\r\n\t\t\t\t\tvar post = \"<div class='webix_property_label' style='width:\"+this._settings.nameWidth+\"px'>\"+data.label+\"</div><div class='webix_property_value' style='width:\"+this._data_width+\"px'>\";\r\n\t\t\t\t\tif(data.collection || data.options){\r\n\t\t\t\t\t\tcontent = data.template(data);\r\n\t\t\t\t\t}else if(data.format)\r\n\t\t\t\t\t\tcontent = data.format(data.value);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcontent = data.value;\r\n\t\t\t\t\tif (render)\r\n\t\t\t\t\t\tcontent = render.call(this, data.value, data);\r\n\t\t\t\t\thtml[i] = pre+post+content+\"</div></div>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\ttype:{\r\n\t\theight:24,\r\n\t\ttemplateStart:template(\"\"),\r\n\t\ttemplateEnd:template(\"</div>\")\r\n\t},\r\n\t$skin: function(){\r\n\t\tthis.type.height = $active.propertyItemHeight;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, AutoTooltip, EditAbility, MapCollection, MouseEvents, Scrollable, SingleRender, AtomDataLoader, EventSystem, base.view);\r\nexport default {api, view};","import {index} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport env from \"../webix/env\";\r\nimport {bind, isUndefined, extend, copy, toFunctor, isArray} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport base from \"../views/view\";\r\nimport DateHelper from \"../core/date\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\n\r\n\r\nconst api = {\r\n\tname:\"calendar\",\r\n\r\n\tdefaults:{\r\n\t\tdate: new Date(), //selected date, not selected by default\r\n\t\tselect: false,\r\n\t\tnavigation: true,\r\n\t\tmonthSelect: true,\r\n\t\tweekHeader: true,\r\n\t\tmonthHeader: true,\r\n\t\tweekNumber: false,\r\n\t\tskipEmptyWeeks: false,\r\n\t\tcalendarHeader: \"%F %Y\",\r\n\t\t//calendarTime: \"%H:%i\",\r\n\t\tevents:DateHelper.isHoliday,\r\n\t\tminuteStep: 5,\r\n\t\ttimeIcon:\"wxi-clock\",\r\n\t\ticons: false,\r\n\t\ttimepickerHeight: 30,\r\n\t\theaderHeight: 30,\r\n\t\tdayTemplate: function(d){\r\n\t\t\treturn d.getDate();\r\n\t\t},\r\n\t\twidth: 260,\r\n\t\theight: 250\r\n\t},\r\n\r\n\tdayTemplate_setter: template,\r\n\tcalendarHeader_setter:DateHelper.dateToStr,\r\n\tcalendarTime_setter:function(format){\r\n\t\tthis._calendarTime = format;\r\n\t\treturn DateHelper.dateToStr(format);\r\n\t},\r\n\tdate_setter:function(date){\r\n\t\treturn this._string_to_date(date);\r\n\t},\r\n\tmaxDate_setter:function(date){\r\n\t\treturn this._string_to_date(date);\r\n\t},\r\n\tminDate_setter:function(date){\r\n\t\treturn this._string_to_date(date);\r\n\t},\r\n\tminTime_setter:function(time){\r\n\t\tif(typeof(time) == \"string\"){\r\n\t\t\ttime = i18n.parseTimeFormatDate(time);\r\n\t\t\ttime = [time.getHours(),time.getMinutes()];\r\n\r\n\t\t}\r\n\r\n\t\treturn time;\r\n\t},\r\n\tmaxTime_setter:function(time){\r\n\t\tif(typeof(time) == \"string\"){\r\n\t\t\ttime = i18n.parseTimeFormatDate(time);\r\n\t\t\ttime = [time.getHours(),time.getMinutes()];\r\n\t\t}\r\n\t\treturn time;\r\n\t},\r\n\t_ariaFocus:function(){\r\n\t\tvar ev = \"focus\"+(env.isIE?\"in\":\"\");\r\n\t\t\r\n\t\tif(!env.touch){\r\n\t\t\t_event(this.$view, ev, bind(function(e){\r\n\t\t\t\tvar t = e.target.className;\r\n\t\t\t\tvar css = t.indexOf(\"webix_cal_day\")!==-1 ? \"webix_cal_day\" : (t.indexOf(\"webix_cal_block\")!==-1?\"webix_cal_block\":\"\");\r\n\r\n\t\t\t\tif(new Date() - UIManager._tab_time > 300 && new Date() - UIManager._mouse_time >100 && css){\r\n\t\t\t\t\tvar prev = e.relatedTarget;\r\n\t\t\t\t\tif(prev && !isUndefined(prev.className)){\r\n\t\t\t\t\t\tvar date = (css==\"webix_cal_day\")?\r\n\t\t\t\t\t\t\tthis._locate_day(e.target):\r\n\t\t\t\t\t\t\tthis._locate_date(e.target);\r\n\t\t\t\t\t\tthis._moveSelection(date);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this), {capture:!env.isIE});\r\n\t\t}\r\n\t},\r\n\t$init: function() {\r\n\t\tthis._viewobj.className += \" webix_calendar\";\r\n\t\tthis._viewobj.setAttribute(\"role\", \"region\");\r\n\t\tthis._viewobj.setAttribute(\"aria-label\", i18n.aria.calendar);\r\n\r\n\t\t//special dates\r\n\t\tthis._special_dates = {};\r\n\t\tthis._selected_days = {};\r\n\t\tthis._zoom_level = 0;\r\n\r\n\t\t//navigation and aria\r\n\t\tthis._ariaFocus();\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t},\r\n\tminuteStep_setter(value){\r\n\t\treturn Math.max( Math.min(value, 60), this.defaults.minuteStep );\r\n\t},\r\n\ttype_setter: function(value){\r\n\t\tif(value == \"time\"){\r\n\t\t\tthis._zoom_in = true;\r\n\t\t\tthis._zoom_level = -1;\r\n\t\t}\r\n\t\telse if(value == \"year\"){\r\n\t\t\tthis._fixed = true;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\r\n\t\tif(base.api.$setSize.call(this,x,y)){\r\n\t\t\t//repaint calendar when size changed\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tconst s = this._settings;\r\n\t\tif (s.cellHeight && !s.type){\r\n\t\t\tconst state = this._getDateBoundaries(s.date);\r\n\t\t\ts.height = s.cellHeight * state._rows + s.headerHeight + (s.weekHeader?$active.calendarWeekHeaderHeight:0) +\r\n\t\t\t\t(s.timepicker||this._icons?s.timepickerHeight:0) + (this._content_padding+$active.borderWidth)*2;\r\n\t\t}\r\n\t\treturn base.api.$getSize.call(this, dx,dy);\r\n\t},\r\n\tmoveSelection:function(mode, details, focus){\r\n\t\tif(this.config.master) return; //in daterange\r\n\t\tvar start = this.getSelectedDate();\r\n\t\tif (this.config.multiselect)\r\n\t\t\tstart = start[0];\r\n\t\tvar date = DateHelper.copy(start || this.getVisibleDate());\r\n\t\tthis._moveSelection(date, mode, focus);\r\n\t\t\r\n\t},\r\n\t_moveSelection:function(date, mode, focus){\r\n\t\tvar css = this._zoom_logic[this._zoom_level]._keyshift(date, mode, this);\r\n\t\t\r\n\t\tif(focus !==false){\r\n\t\t\tvar sel = this._viewobj.querySelector(\".\"+css+\"[tabindex='0']\");\r\n\t\t\tif(sel) sel.focus();\r\n\t\t}\r\n\t},\r\n\t_getDateBoundaries: function(date, reset) {\r\n\t\t// addition information about rendering event:\r\n\t\t// how many days from the previous month,\r\n\t\t// next,\r\n\t\t// number of weeks to display and so on\r\n\t\t\r\n\t\tif (!this._set_date_bounds || reset){\r\n\t\t\tvar month = date.getMonth();\r\n\t\t\tvar year = date.getFullYear();\r\n\r\n\t\t\tvar next = new Date(year, month+1, 1);\r\n\t\t\tvar start = DateHelper.weekStart(new Date(year, month, 1));\r\n\r\n\t\t\tvar days = Math.round((next.valueOf() - start.valueOf())/(60*1000*60*24));\r\n\t\t\tvar rows = this._settings.skipEmptyWeeks?Math.ceil(days/7):6;\r\n\r\n\t\t\tthis._set_date_bounds = { _month: month, _start:start, _next:next, _rows: rows};\r\n\t\t}\r\n\r\n\t\treturn this._set_date_bounds;\r\n\t},\r\n\t$skin:function(){\r\n\t\tif($active.calendar){\r\n\t\t\tif( $active.calendar.width)\r\n\t\t\t\tthis.defaults.width = $active.calendar.width;\r\n\t\t\tif( $active.calendar.height)\r\n\t\t\t\tthis.defaults.height = $active.calendar.height;\r\n\t\t\tif( $active.calendar.headerHeight)\r\n\t\t\t\tthis.defaults.headerHeight = $active.calendar.headerHeight;\r\n\t\t\tif( $active.calendar.timepickerHeight)\r\n\t\t\t\tthis.defaults.timepickerHeight = $active.calendar.timepickerHeight;\r\n\t\t}\r\n\t\tthis._content_padding = $active.layoutPadding.form;\r\n\t},\r\n\t_getColumnConfigSizes: function(date){ \r\n\t\tvar bounds = this._getDateBoundaries(date);\r\n\r\n\t\tvar s = this._settings;\r\n\t\tvar _columnsHeight = [];\r\n\t\tvar _columnsWidth = [];\r\n\t\tvar min = Infinity;\r\n\r\n\t\tvar containerWidth = this._content_width - (this._content_padding+$active.borderWidth)*2;\r\n\r\n\t\tvar containerHeight = this._content_height - (s.monthHeader?s.headerHeight:0) - (s.weekHeader?$active.calendarWeekHeaderHeight:0) -\r\n\t\t\t(s.timepicker||this._icons?s.timepickerHeight:0) - (this._content_padding+$active.borderWidth)*2;\r\n\r\n\t\tvar columnsNumber = (s.weekNumber)?8:7;\r\n\t\tfor(var i=0; i<columnsNumber; i++) {\r\n\t\t\t_columnsWidth[i] = Math.ceil(containerWidth/(columnsNumber-i));\r\n\t\t\tcontainerWidth -= _columnsWidth[i];\r\n\t\t\tmin = Math.min(min, _columnsWidth[i]);\r\n\t\t}\r\n\r\n\t\tvar rowsNumber = bounds._rows;\r\n\t\tfor (var k = 0; k < rowsNumber; k++) {\r\n\t\t\t_columnsHeight[k] = Math.ceil(containerHeight/(rowsNumber-k) );\r\n\t\t\tcontainerHeight -= _columnsHeight[k];\r\n\t\t\tmin = Math.min(min, _columnsHeight[k]);\r\n\t\t}\r\n\t\treturn [_columnsWidth, _columnsHeight, min];\r\n\t},\r\n\ticons_setter: function(value){\r\n\t\tif(!value)\r\n\t\t\tthis._icons = null;\r\n\t\telse if(typeof value == \"object\")\r\n\t\t\tthis._icons = value;\r\n\t\telse\r\n\t\t\tthis._icons = this._icons2;\r\n\t},\r\n\t_icons: [],\r\n\t_icons2: [\r\n\r\n\t\t{\r\n\t\t\ttemplate: function(){\r\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>\"+i18n.calendar.today+\"</span>\";\r\n\t\t\t},\r\n\t\t\ton_click:{\r\n\t\t\t\t\"webix_cal_icon_today\": function(){\r\n\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\tif(!this._settings.timepicker)\r\n\t\t\t\t\t\tdate = DateHelper.datePart(date);\r\n\t\t\t\t\tthis.setValue(date);\r\n\t\t\t\t\tthis.callEvent(\"onTodaySet\",[this.getSelectedDate()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttemplate: function(){\r\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>\"+i18n.calendar.clear+\"</span>\";\r\n\t\t\t},\r\n\t\t\ton_click:{\r\n\t\t\t\t\"webix_cal_icon_clear\": function(){\r\n\t\t\t\t\tthis.setValue(\"\");\r\n\t\t\t\t\tthis.callEvent(\"onDateClear\",[this.getSelectedDate()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t],\r\n\trefresh:function(){ this.render(); },\r\n\trender: function() {\r\n\t\t//reset zoom level\r\n\t\tthis._zoom_level = 0;\r\n\t\tthis._zoom_size = false;\r\n\r\n\t\tvar s = this._settings;\r\n\r\n\t\tif (!this.isVisible(s.id)) return;\r\n\t\tthis._current_time = DateHelper.datePart(new Date());\r\n\r\n\t\tthis.callEvent(\"onBeforeRender\",[]);\r\n\r\n\t\tvar date = this._settings.date;\r\n\r\n\t\tvar bounds = this._getDateBoundaries(date, true);\r\n\t\tvar sizes = this._getColumnConfigSizes(date);\r\n\t\tvar cpad = this._content_padding + \"px\";\r\n\t\tvar width = sizes[0];\r\n\t\tvar height = sizes[1];\r\n\r\n\t\tvar html = \"\";\r\n\t\tif (s.monthHeader){\r\n\t\t\thtml += \"<div class='webix_cal_month' style='margin:0 \"+cpad+\"'><span aria-live='assertive' aria-atomic='true' class='webix_cal_month_name\"+((!s.monthSelect || !s.navigation)?\" webix_readonly'\":\"' role='button' tabindex='0'\")+\">\"+s.calendarHeader(date)+\"</span>\";\r\n\t\t\tif (s.navigation)\r\n\t\t\t\thtml += \"<div role='button' tabindex='0' aria-label='\"+i18n.aria.navMonth[0]+\"' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='\"+i18n.aria.navMonth[1]+\"' class='webix_cal_next_button'></div>\";\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\r\n\t\tif(s.weekHeader)\r\n\t\t\thtml += \"<div class='webix_cal_header' style='margin:0 \"+cpad+\"' aria-hidden='true'>\"+this._week_template(width)+\"</div>\";\r\n\t\thtml += \"<div class='webix_cal_body' style='margin:0 \"+cpad+\"'>\"+this._body_template(width, height, bounds, sizes[2])+\"</div>\";\r\n\r\n\t\tif (this._settings.timepicker || this._icons){\r\n\t\t\thtml += \"<div class='webix_cal_footer' style='margin:0 \"+cpad+\"'>\";\r\n\t\t\tif(this._settings.timepicker)\r\n\t\t\t\thtml += this._timepicker_template(date);\r\n\r\n\t\t\tif(this._icons)\r\n\t\t\t\thtml += this._icons_template();\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\r\n\t\tthis._contentobj.innerHTML = html;\r\n\t\tthis._contentobj.firstChild.style.marginTop = cpad;\r\n\r\n\t\tif(this._settings.type == \"time\"){\r\n\t\t\tvar time = this._settings.date;\r\n\t\t\tif(time){\r\n\t\t\t\tif(typeof(time) == \"string\"){\r\n\t\t\t\t\tdate = i18n.parseTimeFormatDate(time);\r\n\t\t\t\t}\r\n\t\t\t\telse if(isArray(time)){\r\n\t\t\t\t\tdate.setHours(time[0]);\r\n\t\t\t\t\tdate.setMinutes(time[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._changeZoomLevel(-1,date);\r\n\t\t}\r\n\t\telse if(this._settings.type == \"month\"){\r\n\t\t\tthis._changeZoomLevel(1,date);\r\n\t\t}\r\n\t\telse if(this._settings.type == \"year\"){\r\n\t\t\tthis._changeZoomLevel(2,date);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t},\r\n\t_icons_template: function(date){\r\n\t\tvar html =\t\"<div class='webix_cal_icons'>\";\r\n\t\tvar icons = this._icons;\r\n\r\n\t\tfor(var i=0; i < icons.length; i++){\r\n\t\t\tif(icons[i].template){\r\n\t\t\t\tvar template = (typeof(icons[i].template) == \"function\"?icons[i].template: template(icons[i].template));\r\n\t\t\t\thtml += template.call(this,date);\r\n\t\t\t}\r\n\t\t\tif(icons[i].on_click){\r\n\t\t\t\textend(this.on_click,icons[i].on_click);\r\n\t\t\t}\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t},\r\n\t_timepicker_template:function(date){\r\n\t\tvar timeFormat = this._settings.calendarTime||i18n.timeFormatStr;\r\n\t\tvar clock = this._settings.timeIcon;\r\n\t\tvar tpl = \"\";\r\n\r\n\t\tif(!this._settings.master)\r\n\t\t\ttpl = \"<div role='button' tabindex='0' class='webix_cal_time\"+(this._icons?\" webix_cal_time_icons\":\"\")+\"'><span class='webix_icon \"+clock+\"'></span> \"+timeFormat(date)+\"</div>\";\r\n\t\telse{\r\n\t\t\t//daterange needs two clocks\r\n\t\t\tvar range_date = copy($$(this._settings.master)._settings.value);\r\n\t\t\tif(DateHelper.equal(range_date.end, date))\r\n\t\t\t\trange_date.start = range_date.end;\r\n\t\t\t\t\r\n\t\t\tfor(var i in range_date){\r\n\t\t\t\ttpl += \"<div role='button' tabindex='0' class='webix_range_time_\"+i+\" webix_cal_time'><span class='webix_icon \"+clock+\"'></span> \"+timeFormat(range_date[i])+\"</div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn tpl;\r\n\t},\r\n\t_week_template: function(widths){\r\n\t\tvar s = this._settings;\r\n\t\tvar week_template = \"\";\r\n\t\tvar correction = 0;\r\n\r\n\t\tif(s.weekNumber) {\r\n\t\t\tcorrection = 1;\r\n\t\t\tweek_template += \"<div class='webix_cal_week_header' style='width: \"+widths[0]+\"px;' >\"+(s.calendarWeekHeader||\"\")+\"</div>\";\r\n\t\t}\r\n\t\t\r\n\t\tvar k = (DateHelper.startOnMonday)?1:0;\r\n\t\tfor (var i=0; i<7; i++){ // 7 days total\r\n\t\t\tvar day_index = (k + i) % 7; // 0 - Sun, 6 - Sat as in Locale.date.day_short\r\n\t\t\tvar day = i18n.calendar.dayShort[day_index]; // 01, 02 .. 31\r\n\t\t\tweek_template += \"<div day='\"+day_index+\"' style='width: \"+widths[i+correction]+\"px;' >\"+day+\"</div>\";\r\n\t\t}\r\n\t\t\r\n\t\treturn week_template;\r\n\t},\r\n\tblockDates_setter:function(value){\r\n\t\treturn toFunctor(value, this.$scope);\r\n\t},\r\n\t_day_css:function(day, bounds){\r\n\t\tvar css = \"\", isOutside = false;\r\n\t\tif (DateHelper.equal(day, this._current_time))\r\n\t\t\tcss += \" webix_cal_today\";\r\n\t\tif (!this._checkDate(day))\r\n\t\t\tcss+= \" webix_cal_day_disabled\";\r\n\t\tif (day.getMonth() != bounds._month){\r\n\t\t\tisOutside = true;\r\n\t\t\tcss += \" webix_cal_outside\";\r\n\t\t}\r\n\t\tif (!isOutside && this._selectedDay(day))\r\n\t\t\tcss += \" webix_cal_select\";\r\n\t\tif (this._settings.events)\r\n\t\t\tcss+=\" \"+(this._settings.events(day, isOutside) || \"\");\r\n\t\tcss += \" webix_cal_day\";\r\n\t\treturn css;\r\n\t},\r\n\t_body_template: function(widths, heights, bounds, sqSize){\r\n\t\tvar s = this._settings;\r\n\t\tvar html = \"\";\r\n\t\tvar day = DateHelper.datePart(DateHelper.copy(bounds._start));\r\n\t\tvar start = s.weekNumber?1:0;\r\n\t\tvar weekNumber = DateHelper.getISOWeek(DateHelper.add(day,2,\"day\", true));\r\n\r\n\t\tfor (var y=0; y<heights.length; y++){\r\n\t\t\thtml += \"<div class='webix_cal_row' style='height:\"+heights[y]+\"px;line-height:\"+heights[y]+\"px'>\";\r\n\r\n\t\t\tif (start){\r\n\t\t\t\t// recalculate week number for the first week of a year\r\n\t\t\t\tif(!day.getMonth() && day.getDate()<7)\r\n\t\t\t\t\tweekNumber =  DateHelper.getISOWeek(DateHelper.add(day,2,\"day\", true));\r\n\t\t\t\thtml += \"<div class='webix_cal_week_num' aria-hidden='true' style='width:\"+widths[0]+\"px'>\"+weekNumber+\"</div>\";\r\n\t\t\t}\r\n\r\n\t\t\tfor (var x=start; x<widths.length; x++){\r\n\t\t\t\tvar css = this._day_css(day, bounds);\r\n\t\t\t\tvar d = this._settings.dayTemplate.call(this,day);\r\n\t\t\t\tvar sel = this._selectedDay(day);\r\n\t\t\t\tvar alabel = \"\";\r\n\t\t\t\tvar isOutside = day.getMonth() != bounds._month;\r\n\r\n\t\t\t\tif(typeof d == \"object\"){\r\n\t\t\t\t\talabel = d.aria || alabel;\r\n\t\t\t\t\td = d.text;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\talabel = DateHelper.dateToStr(i18n.aria.dateFormat)(day);\r\n\r\n\t\t\t\thtml += \"<div day='\"+x+\"' role='gridcell' \"+(isOutside?\"aria-hidden='true'\":\"\")+\" aria-label='\"+alabel+\r\n\t\t\t\t\t\"' tabindex='\"+(sel && !isOutside?\"0\":\"-1\")+\"' aria-selected='\"+(sel && !isOutside?\"true\":\"false\")+\"' class='\"+css+\"' style='text-align:center; width:\"+widths[x]+\r\n\t\t\t\t\t\"px'><span aria-hidden='true' class='webix_cal_day_inner' style='display:inline-block; \"+this._getCalSizesString(sqSize,sqSize)+\"'>\"+d+\"</span></div>\";\r\n\t\t\t\tday = DateHelper.add(day, 1, \"day\");\r\n\r\n\t\t\t\tif(day.getHours()){\r\n\t\t\t\t\tday = DateHelper.datePart(day);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thtml += \"</div>\";\r\n\t\t\tweekNumber++;\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\t_changeDate:function(dir, step){\r\n\t\tvar now = this._settings.date;\r\n\t\tif(!step) { step = this._zoom_logic[this._zoom_level]._changeStep; }\r\n\t\tif(!this._zoom_level){\r\n\t\t\tnow = DateHelper.copy(now);\r\n\t\t\tnow.setDate(1);\r\n\t\t}\r\n\t\tvar next = DateHelper.add(now, dir*step, \"month\", true);\r\n\t\tthis._changeDateInternal(now, next);\r\n\t},\r\n\t_changeDateInternal:function(now, next){\r\n\t\tif(this.callEvent(\"onBeforeMonthChange\", [now, next])){\r\n\t\t\tif (this._zoom_level){\r\n\t\t\t\tthis._update_zoom_level(next);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.showCalendar(next);\r\n\t\t\t}\r\n\t\t\tthis.callEvent(\"onAfterMonthChange\", [next, now]);\r\n\t\t}\r\n\t},\r\n\t_zoom_logic:{\r\n\t\t\"-2\":{\r\n\t\t\t_isBlocked: function(i){\r\n\t\t\t\tvar config = this._settings,\r\n\t\t\t\t\tdate = config.date,\r\n\t\t\t\t\tisBlocked = false;\r\n\r\n\t\t\t\tvar minHour = (config.minTime ? config.minTime[0] : 0);\r\n\t\t\t\tvar maxHour = (config.maxTime ? (config.maxTime[0] + ( config.maxTime[1] ? 1 : 0 )) : 24);\r\n\r\n\t\t\t\tvar minMinute = (config.minTime && (date.getHours()==minHour) ? config.minTime[1] : 0);\r\n\t\t\t\tvar maxMinute = (config.maxTime && config.maxTime[1] && (date.getHours()==(maxHour-1)) ? config.maxTime[1] : 60);\r\n\r\n\t\t\t\tif(this._settings.blockTime){\r\n\t\t\t\t\tvar d = DateHelper.copy(date);\r\n\t\t\t\t\td.setMinutes(i);\r\n\t\t\t\t\tisBlocked = this._settings.blockTime(d);\r\n\t\t\t\t}\r\n\t\t\t\treturn (i < minMinute || i >= maxMinute || isBlocked);\r\n\r\n\t\t\t},\r\n\t\t\t_setContent:function(next, i){ next.setMinutes(i); },\r\n\t\t\t_findActive:function(date, mode, calendar){\r\n\t\t\t\tif(!this._isBlocked.call(calendar, date.getMinutes()))\r\n\t\t\t\t\treturn date;\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar step = calendar._settings.minuteStep;\r\n\t\t\t\t\tvar newdate = DateHelper.add(date, mode ==\"right\"?step:-step, \"minute\", true);\r\n\t\t\t\t\tif(date.getHours() === newdate.getHours())\r\n\t\t\t\t\t\treturn  this._findActive(newdate, mode, calendar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"-1\":{\r\n\t\t\t_isBlocked: function(i){\r\n\t\t\t\tvar config = this._settings,\r\n\t\t\t\t\tdate = config.date;\r\n\r\n\t\t\t\tvar minHour = (config.minTime? config.minTime[0]:0);\r\n\t\t\t\tvar maxHour = (config.maxTime? config.maxTime[0]+(config.maxTime[1]?1:0):24);\r\n\r\n\t\t\t\tif (i < minHour || i >= maxHour) return true;\r\n\r\n\t\t\t\tif(config.blockTime){\r\n\t\t\t\t\tvar d = DateHelper.copy(date);\r\n\t\t\t\t\td.setHours(i);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar minMinute = (config.minTime && (i==minHour) ? config.minTime[1] : 0);\r\n\t\t\t\t\tvar maxMinute = (config.maxTime && config.maxTime[1] && (i==(maxHour-1)) ? config.maxTime[1] : 60);\r\n\r\n\t\t\t\t\tfor (var j=minMinute; j<maxMinute; j+= config.minuteStep){\r\n\t\t\t\t\t\td.setMinutes(j);\r\n\t\t\t\t\t\tif (!config.blockTime(d))\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_setContent:function(next, i){ next.setHours(i); },\r\n\t\t\t_keyshift:function(date, mode, calendar){\r\n\t\t\t\tvar newdate, inc, step = calendar._settings.minuteStep;\r\n\t\t\t\t\r\n\t\t\t\tif(mode === \"bottom\" || mode === \"top\"){\r\n\t\t\t\t\tdate.setHours(mode===\"bottom\"?23:0);\r\n\t\t\t\t\tdate.setMinutes(mode===\"bottom\"?55:0);\r\n\t\t\t\t\tdate.setSeconds(0);\r\n\t\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\t\t\tnewdate = date;\r\n\t\t\t\t}\r\n\t\t\t\telse if(mode === \"left\" || mode === \"right\"){//minutes\r\n\r\n\t\t\t\t\tinc = (mode===\"right\"?step:-step);\r\n\t\t\t\t\tif(mode === \"left\" && date.getMinutes() < step ) inc = 60-step;\r\n\t\t\t\t\tif(mode === \"right\" && date.getMinutes() >= (60-step)) inc = step-60;\r\n\t\t\t\t\tinc -= date.getMinutes()%step;\r\n\t\t\t\t\tnewdate = calendar._zoom_logic[\"-2\"]._findActive(DateHelper.add(date, inc, \"minute\"), mode, calendar);\r\n\t\t\t\t}\r\n\t\t\t\telse if(mode === \"up\" || mode === \"down\"){ //hours\r\n\t\t\t\t\tinc = mode===\"down\"?1:-1;\r\n\t\t\t\t\tif(mode === \"down\" && date.getHours() === 23) inc = -23;\r\n\t\t\t\t\tif(mode === \"up\" && date.getHours() === 0) inc = 23;\r\n\t\t\t\t\tnewdate = this._findActive(DateHelper.add(date, inc, \"hour\"), mode, calendar);\r\n\t\t\t\t}\r\n\t\t\t\telse if(mode === false)\r\n\t\t\t\t\tnewdate = this._findActive(date, mode, calendar);\r\n\r\n\t\t\t\tcalendar.selectDate(newdate, false);\r\n\r\n\t\t\t\tif(newdate){\r\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\r\n\t\t\t\t\tcalendar.selectDate(newdate, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"webix_cal_block\"+(mode === \"left\" || mode === \"right\"?\"_min\":\"\");\r\n\t\t\t},\r\n\t\t\t_findActive:function(date, mode, calendar){\r\n\t\t\t\tif(!this._isBlocked.call(calendar, date.getHours()))\r\n\t\t\t\t\treturn date;\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar newdate = DateHelper.add(date, mode ==\"down\"?1:-1, \"hour\", true);\r\n\t\t\t\t\tif(date.getDate() === newdate.getDate())\r\n\t\t\t\t\t\treturn  this._findActive(newdate, mode, calendar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"0\":{//days\r\n\t\t\t_changeStep:1,\r\n\t\t\t_keyshift:function(date, mode, calendar){\r\n\t\t\t\tvar newdate = date;\r\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"pgdown\"?1:-1), \"month\");\r\n\t\t\t\telse if(mode === \"bottom\")\r\n\t\t\t\t\tnewdate = new Date(date.getFullYear(), date.getMonth()+1, 0);\r\n\t\t\t\telse if(mode === \"top\")\r\n\t\t\t\t\tnewdate = new Date(date.setDate(1));\r\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"right\"?1:-1), \"day\");\r\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"down\"?1:-1), \"week\");\r\n\t\t\t\t\r\n\t\t\t\tif(!calendar._checkDate(newdate))\r\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\r\n\t\t\t\t\r\n\t\t\t\tif(newdate)\r\n\t\t\t\t\tcalendar.selectDate(newdate, true);\r\n\t\t\t\treturn \"webix_cal_day\";\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\t\t\"1\":{\t//months\r\n\t\t\t_isBlocked: function(i,calendar){\r\n\t\t\t\tvar blocked = false,\r\n\t\t\t\t\tmin = calendar._settings.minDate,\r\n\t\t\t\t\tmax = calendar._settings.maxDate,\r\n\t\t\t\t\tyear = calendar._settings.date.getFullYear();\r\n\r\n\t\t\t\tif (min){\r\n\t\t\t\t\tvar minYear = min.getFullYear();\r\n\t\t\t\t\tblocked = year<minYear || (year==minYear&&min.getMonth()>i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (max && !blocked){\r\n\t\t\t\t\tvar maxYear = max.getFullYear();\r\n\t\t\t\t\tblocked = year>maxYear || (year==maxYear&&max.getMonth()<i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn blocked;\r\n\t\t\t},\r\n\t\t\t_correctDate: function(date,calendar){\r\n\t\t\t\tdate = DateHelper.monthStart(date);\r\n\r\n\t\t\t\tif (date < calendar._settings.minDate){\r\n\t\t\t\t\tdate = DateHelper.copy(calendar._settings.minDate);\r\n\t\t\t\t}\r\n\t\t\t\telse if (date > calendar._settings.maxDate){\r\n\t\t\t\t\tdate = DateHelper.copy(calendar._settings.maxDate);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn date;\r\n\t\t\t},\r\n\t\t\t_getTitle:function(date){ return date.getFullYear(); },\r\n\t\t\t_getContent:function(i){ return i18n.calendar.monthShort[i]; },\r\n\t\t\t_setContent:function(next, i){ if(i!=next.getMonth()) next.setDate(1);next.setMonth(i); },\r\n\t\t\t_changeStep:12,\r\n\t\t\t_keyshift:function(date, mode, calendar){\r\n\t\t\t\tvar newdate = date;\r\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"pgdown\"?1:-1), \"year\");\r\n\t\t\t\telse if(mode === \"bottom\")\r\n\t\t\t\t\tnewdate = new Date(date.setMonth(11));\r\n\t\t\t\telse if(mode === \"top\")\r\n\t\t\t\t\tnewdate = new Date(date.setMonth(0));\r\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"right\"?1:-1), \"month\");\r\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"down\"?4:-4), \"month\");\r\n\r\n\t\t\t\tnewdate = calendar._correctDate(newdate);\r\n\r\n\t\t\t\tif(!calendar._checkDate(newdate)){\r\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(newdate){\r\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\r\n\t\t\t\t\tcalendar.selectDate(newdate, false);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn \"webix_cal_block\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"2\":{\t//years\r\n\t\t\t_isBlocked: function(i,calendar){\r\n\t\t\t\ti += calendar._zoom_start_date;\r\n\t\t\t\tvar min = calendar._settings.minDate;\r\n\t\t\t\tvar max = calendar._settings.maxDate;\r\n\r\n\t\t\t\tif ((min && min.getFullYear() > i) || (max && max.getFullYear()<i))\r\n\t\t\t\t\treturn true;\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\t_correctDate: function(date,calendar){\r\n\t\t\t\tdate = DateHelper.yearStart(date);\r\n\t\t\t\tif (date < calendar._settings.minDate){\r\n\t\t\t\t\tdate = DateHelper.copy(calendar._settings.minDate);\r\n\t\t\t\t}\r\n\t\t\t\telse if (date > calendar._settings.maxDate){\r\n\t\t\t\t\tdate = DateHelper.copy(calendar._settings.maxDate);\r\n\t\t\t\t}\r\n\t\t\t\treturn date;\r\n\t\t\t},\r\n\t\t\t_getTitle:function(date, calendar){\r\n\t\t\t\tvar start = date.getFullYear();\r\n\t\t\t\tcalendar._zoom_start_date = start = start - start%10 - 1;\r\n\t\t\t\treturn start+\" - \"+(start+10 + 1);\r\n\t\t\t},\r\n\t\t\t_getContent:function(i, calendar){ return calendar._zoom_start_date+i; },\r\n\t\t\t_setContent:function(next, i, calendar){ next.setFullYear(calendar._zoom_start_date+i); },\r\n\t\t\t_changeStep:12*10,\r\n\t\t\t_keyshift:function(date, mode, calendar){\r\n\t\t\t\tvar newdate = date;\r\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"pgdown\"?10:-10), \"year\");\r\n\t\t\t\telse if(mode === \"bottom\")\r\n\t\t\t\t\tnewdate = new Date(date.setYear(calendar._zoom_start_date+10));\r\n\t\t\t\telse if(mode === \"top\")\r\n\t\t\t\t\tnewdate = new Date(date.setYear(calendar._zoom_start_date));\r\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"right\"?1:-1), \"year\");\r\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\r\n\t\t\t\t\tnewdate = DateHelper.add(date, (mode===\"down\"?4:-4), \"year\");\r\n\r\n\t\t\t\tnewdate = calendar._correctDate(newdate);\r\n\r\n\t\t\t\tif(!calendar._checkDate(newdate))\r\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\r\n\t\t\t\t\r\n\t\t\t\tif(newdate){\r\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\r\n\t\t\t\t\tcalendar.selectDate(newdate, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"webix_cal_block\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_correctBlockedTime: function(){\r\n\t\tvar i, isDisabledHour, isDisabledMinutes;\r\n\t\tisDisabledHour = this._zoom_logic[-1]._isBlocked.call(this,this._settings.date.getHours());\r\n\t\tif(isDisabledHour){\r\n\t\t\tfor (i= 0; i< 24; i++){\r\n\t\t\t\tif(!this._zoom_logic[-1]._isBlocked.call(this,i)){\r\n\t\t\t\t\tthis._settings.date.setHours(i);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tisDisabledMinutes = this._zoom_logic[-2]._isBlocked.call(this,this._settings.date.getMinutes());\r\n\t\tif(isDisabledMinutes){\r\n\t\t\tfor (i=0; i<60; i+=this._settings.minuteStep){\r\n\t\t\t\tif(!this._zoom_logic[-2]._isBlocked.call(this,i)){\r\n\t\t\t\t\tthis._settings.date.setMinutes(i);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_update_zoom_level:function(date){\r\n\t\tvar config, css, height, i, index,  sections, selected, type, width, zlogic, temp, sqSize;\r\n\t\tvar html = \"\";\r\n\t\tvar cpad = this._content_padding + \"px\";\r\n\r\n\t\tconfig = this._settings;\r\n\t\tindex = 2 - (config.weekHeader?0:1) - (config.monthHeader?0:1);\r\n\t\tzlogic = this._zoom_logic[this._zoom_level];\r\n\t\tsections  = this._contentobj.childNodes;\r\n\r\n\t\tif (date){\r\n\t\t\tconfig.date = date;\r\n\t\t}\r\n\r\n\t\ttype = config.type;\r\n\r\n\r\n\r\n\t\t//store width and height of draw area\r\n\t\tif (!this._zoom_size){\r\n\r\n\t\t\tthis._reserve_box_height = this._contentobj.offsetHeight - (config.monthHeader||this._zoom_in?config.headerHeight:0) -\r\n\t\t\t\t(this._content_padding+$active.borderWidth)*2;\r\n\t\t\tif(type != \"year\" && type != \"month\")\r\n\t\t\t\tthis._reserve_box_height -= config.timepickerHeight;\r\n\r\n\t\t\tthis._reserve_box_width = sections[index].offsetWidth;\r\n\t\t\tthis._zoom_size = 1;\r\n\t\t}\r\n\r\n\t\t//main section\r\n\t\tif (this._zoom_in){\r\n\t\t\t//hours and minutes\r\n\t\t\theight = this._reserve_box_height/6;\r\n\t\t\tvar timeColNum = 6;\r\n\t\t\tvar timeFormat = this._calendarTime||i18n.timeFormat;\r\n\t\t\tvar enLocale = timeFormat.match(/%([a,A])/);\r\n\t\t\tif(enLocale)\r\n\t\t\t\ttimeColNum++;\r\n\t\t\twidth = parseInt((this._reserve_box_width-3)/timeColNum,10);\r\n\t\t\tsqSize = Math.min(width,height);\r\n\r\n\t\t\thtml += \"<div class='webix_time_header' style='margin:0 \"+cpad+\"'>\"+this._timeHeaderTemplate(width,enLocale)+\"</div>\";\r\n\t\t\thtml += \"<div  class='webix_cal_body' style='height:\"+this._reserve_box_height+\"px; margin:0 \"+cpad+\";'>\";\r\n\r\n\t\t\t// check and change blocked selected time\r\n\t\t\tthis._correctBlockedTime();\r\n\r\n\t\t\thtml += \"<div class='webix_hours'>\";\r\n\t\t\tselected = config.date.getHours();\r\n\t\t\ttemp = DateHelper.copy(config.date);\r\n\r\n\t\t\tfor (i= 0; i< 24; i++){\r\n\t\t\t\tcss=\"\";\r\n\t\t\t\tif(enLocale){\r\n\t\t\t\t\tif(i%4===0){\r\n\t\t\t\t\t\tvar label = (!i ? i18n.am[0] : (i==12?i18n.pm[0]:\"\"));\r\n\t\t\t\t\t\thtml += \"<div class='webix_cal_block_empty\"+css+\"' style='\"+this._getCalSizesString(width,height)+\"clear:both;\"+\"'>\"+label+\"</div>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this._zoom_logic[-1]._isBlocked.call(this,i)){\r\n\t\t\t\t\tcss += \" webix_cal_day_disabled\";\r\n\t\t\t\t}\r\n\t\t\t\telse if(selected ==  i)\r\n\t\t\t\t\tcss += \" webix_selected\";\r\n\r\n\t\t\t\t\r\n\t\t\t\ttemp.setHours(i);\r\n\r\n\t\t\t\thtml += \"<div aria-label='\"+DateHelper.dateToStr(i18n.aria.hourFormat)(temp)+\"' role='gridcell'\"+\r\n\t\t\t\t\t\" tabindex='\"+(selected==i?\"0\":\"-1\")+\"' aria-selected='\"+(selected==i?\"true\":\"false\")+\r\n\t\t\t\t\t\"' class='webix_cal_block\"+css+\"' data-value='\"+i+\"' style='\"+this._getCalSizesString(width,height)+(i%4===0&&!enLocale?\"clear:both;\":\"\")+\r\n\t\t\t\t\t\"'><span style='display:inline-block; \"+this._getCalSizesString(sqSize,sqSize)+\"'>\"+DateHelper.toFixed(enLocale?(!i||i==12?12:i%12):i)+\"</span></div>\";\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\r\n\t\t\thtml += \"<div class='webix_minutes'>\";\r\n\t\t\tselected = config.date.getMinutes();\r\n\t\t\ttemp = DateHelper.copy(config.date);\r\n\r\n\r\n\t\t\tfor (i=0; i<60; i+=config.minuteStep){\r\n\t\t\t\tcss = \"\";\r\n\t\t\t\tif(this._zoom_logic[-2]._isBlocked.call(this,i)){\r\n\t\t\t\t\tcss = \" webix_cal_day_disabled\";\r\n\t\t\t\t}\r\n\t\t\t\telse if(selected ==  i)\r\n\t\t\t\t\tcss = \" webix_selected\";\r\n\r\n\t\t\t\ttemp.setMinutes(i);\r\n\r\n\t\t\t\thtml += \"<div aria-label='\"+DateHelper.dateToStr(i18n.aria.minuteFormat)(temp)+\"' role='gridcell' tabindex='\"+(selected==i?\"0\":\"-1\")+\r\n\t\t\t\t\t\"' aria-selected='\"+(selected==i?\"true\":\"false\")+\"' class='webix_cal_block webix_cal_block_min\"+css+\"' data-value='\"+i+\"' style='\"+\r\n\t\t\t\t\tthis._getCalSizesString(width,height)+((i/config.minuteStep)%2===0?\"clear:both;\":\"\")+\"'><span style='display:inline-block; \"+\r\n\t\t\t\t\tthis._getCalSizesString(sqSize,sqSize)+\"'>\"+DateHelper.toFixed(i)+\"</span></div>\";\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\r\n\t\t\thtml += \"</div>\";\r\n\t\t\thtml += \"<div class='webix_time_footer' style='margin:0 \"+cpad+\"'>\"+this._timeButtonsTemplate()+\"</div>\";\r\n\t\t\tthis._contentobj.innerHTML = html;\r\n\t\t\tthis._contentobj.firstChild.style.marginTop = cpad;\r\n\t\t} else {\r\n\t\t\t//years and months\r\n\t\t\t\r\n\t\t\t//reset header\r\n\t\t\tif (config.monthHeader){\r\n\t\t\t\tvar header = sections[0].childNodes;\r\n\t\t\t\tvar labels = i18n.aria[\"nav\"+(this._zoom_level==1?\"Year\":\"Decade\")];\r\n\t\t\t\theader[0].innerHTML = zlogic._getTitle(config.date, this);\r\n\t\t\t\theader[0].blur();\r\n\t\t\t\tif (config.navigation){\r\n\t\t\t\t\theader[1].setAttribute(\"aria-label\", labels[0]);\r\n\t\t\t\t\theader[2].setAttribute(\"aria-label\", labels[1]);\r\n\t\t\t\t}\r\n\t\t\t} else\t//needed for \"year\" to set start value\r\n\t\t\t\tzlogic._getTitle(config.date, this);\r\n\r\n\t\t\theight = Math.floor(this._reserve_box_height/3);\r\n\t\t\twidth = Math.floor(this._reserve_box_width/4);\r\n\t\t\tsqSize = Math.min(height, width);\r\n\r\n\t\t\tif (this._checkDate(config.date))\r\n\t\t\t\tselected = (this._zoom_level==1?config.date.getMonth():config.date.getFullYear());\r\n\t\t\tfor (i=0; i<12; i++){\r\n\t\t\t\tcss = (selected == (this._zoom_level==1?i:zlogic._getContent(i, this)) ? \" webix_selected\" : \"\");\r\n\t\t\t\tif(zlogic._isBlocked(i,this)){\r\n\t\t\t\t\tcss += \" webix_cal_day_disabled\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar format = i18n.aria[(this._zoom_level==1?\"month\":\"year\")+\"Format\"];\r\n\t\t\t\thtml+=\"<div role='gridcell' aria-label='\"+DateHelper.dateToStr(format)(config.date)+\r\n\t\t\t\t\t\"' tabindex='\"+(css.indexOf(\"selected\")!==-1?\"0\":\"-1\")+\r\n\t\t\t\t\t\"' aria-selected='\"+(css.indexOf(\"selected\")!==-1?\"true\":\"false\")+\r\n\t\t\t\t\t\"' class='webix_cal_block\"+css+\"' data-value='\"+i+\"' style='\"+this._getCalSizesString(width,height)+\r\n                    \"'><span style='display:inline-block; \"+this._getCalSizesString(sqSize,sqSize)+\"'>\"+zlogic._getContent(i, this)+\"</span></div>\";\r\n\t\t\t}\r\n\t\t\tif (config.weekHeader){\r\n\t\t\t\tsections[index-1].style.display = \"none\";\r\n\t\t\t\tif (index === 1) sections[index].style.marginTop = cpad;\r\n\t\t\t}\r\n\t\t\tsections[index].innerHTML = html;\r\n\t\t\tif (type != \"year\" && type != \"month\"){\r\n\t\t\t\tif(!sections[index+1])\r\n\t\t\t\t\tthis._contentobj.innerHTML += \"<div class='webix_time_footer' style='margin:0 \"+cpad+\"'>\"+this._timeButtonsTemplate()+\"</div>\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsections[index+1].innerHTML = this._timeButtonsTemplate();\r\n\t\t\t} else if (sections[index+1]){\r\n\t\t\t\tsections[index+1].style.display = \"none\";\r\n\t\t\t}\r\n\t\t\tsections[index].style.height = this._reserve_box_height+\"px\";\r\n\t\t}\r\n\t},\r\n\t_getCalSizesString: function(width,height){\r\n\t\treturn \"width:\"+width+\"px; height:\"+height+\"px; line-height:\"+height+\"px;\";\r\n\t},\r\n\t_timeButtonsTemplate: function(){\r\n\t\treturn \"<input type='button' style='width:100%' class='webix_cal_done' value='\"+i18n.calendar.done+\"'>\";\r\n\t},\r\n\t_timeHeaderTemplate: function(width,enLocale){\r\n\t\tvar w1 = width*(enLocale?5:4);\r\n\t\tvar w2 = width*2;\r\n\t\treturn \"<div class='webix_cal_hours' style='width:\"+w1+\"px'>\"+i18n.calendar.hours+\"</div><div class='webix_cal_minutes' style='width:\"+w2+\"px'>\"+i18n.calendar.minutes+\"</div>\";\r\n\t},\r\n\t_changeZoomLevel: function(zoom,date){\r\n\t\tvar oldzoom = this._zoom_level;\r\n\t\tif(this.callEvent(\"onBeforeZoom\",[zoom, oldzoom])){\r\n\t\t\tthis._zoom_level = zoom;\r\n\r\n\t\t\tif(zoom)\r\n\t\t\t\tthis._update_zoom_level(date);\r\n\t\t\telse\r\n\t\t\t\tthis.showCalendar(date);\r\n\t\t\tthis.callEvent(\"onAfterZoom\",[zoom, oldzoom]);\r\n\t\t}\r\n\t},\r\n\t_correctDate:function(date){\r\n\t\tif(!this._checkDate(date) && this._zoom_logic[this._zoom_level]._correctDate)\r\n\t\t\tdate = this._zoom_logic[this._zoom_level]._correctDate(date,this);\r\n\t\treturn date;\r\n\t},\r\n\t_mode_selected:function(target){\r\n\r\n\t\tvar next = this._locate_date(target);\r\n\t\tvar zoom = this._zoom_level-(this._fixed?0:1);\r\n\r\n\t\tnext = this._correctDate(next);\r\n\t\tif(this._checkDate(next)){\r\n\t\t\tthis._changeZoomLevel(zoom, next);\r\n\t\t\tvar type = this._settings.type;\r\n\t\t\tif(type == \"month\" || type == \"year\")\r\n\t\t\t\tthis._selectDate(next);\r\n\t\t}\r\n\t},\r\n\t// selects date and redraw calendar\r\n\t_selectDate: function(date, add){\r\n\t\tif(this.callEvent(\"onBeforeDateSelect\", [date])){\r\n\t\t\tthis.selectDate(date, true, add);\r\n\t\t\tthis.callEvent(\"onDateSelect\", [date]);       // should be deleted in a future version\r\n\t\t\tthis.callEvent(\"onAfterDateSelect\", [date]);\r\n\t\t}\r\n\t},\r\n\t_locate_day:function(target){\r\n\t\tvar cind = index(target) - (this._settings.weekNumber?1:0);\r\n\t\tvar rind = index(target.parentNode);\r\n\t\tvar date = DateHelper.add(this._getDateBoundaries()._start, cind + rind*7, \"day\", true);\r\n\t\tif (this._settings.timepicker){\r\n\t\t\tdate.setHours(this._settings.date.getHours());\r\n\t\t\tdate.setMinutes(this._settings.date.getMinutes());\r\n\t\t}\r\n\t\treturn date;\r\n\t},\r\n\t_locate_date:function(target){\r\n\t\tvar value = target.getAttribute(\"data-value\")*1;\r\n\t\tvar level = (target.className.indexOf(\"webix_cal_block_min\")!=-1?this._zoom_level-1:this._zoom_level);\r\n\t\tvar now = this._settings.date;\r\n\t\tvar next = DateHelper.copy(now);\r\n\r\n\t\tthis._zoom_logic[level]._setContent(next, value, this);\r\n\r\n\t\treturn next;\r\n\t},\r\n\ton_click:{\r\n\t\twebix_cal_prev_button: function(){\r\n\t\t\tthis._changeDate(-1);\r\n\t\t},\r\n\t\twebix_cal_next_button: function(){\r\n\t\t\tthis._changeDate(1);\r\n\t\t},\r\n\t\twebix_cal_day_disabled: function(){\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_cal_outside: function(){\r\n\t\t\tif(!this._settings.navigation)\r\n\t\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_cal_day: function(e, id, target){\r\n\t\t\tvar date = this._locate_day(target);\r\n\t\t\tvar add = this._settings.multiselect === \"touch\"  || (e.ctrlKey || e.metaKey);\r\n\t\t\tthis._selectDate(date, add);\r\n\t\t},\r\n\t\twebix_cal_time:function(){\r\n\t\t\tif(this._zoom_logic[this._zoom_level-1]){\r\n\t\t\t\tthis._zoom_in = true;\r\n\t\t\t\tvar zoom = this._zoom_level - 1;\r\n\t\t\t\tthis._changeZoomLevel(zoom);\r\n\t\t\t}\r\n\t\t},\r\n\t\twebix_range_time_start:function(){\r\n\t\t\t$$(this._settings.master)._time_mode = \"start\";\r\n\t\t},\r\n\t\twebix_range_time_end:function(){\r\n\t\t\t$$(this._settings.master)._time_mode = \"end\";\r\n\t\t},\r\n\t\twebix_cal_done:function(){\r\n\t\t\tvar date = DateHelper.copy(this._settings.date);\r\n\t\t\tdate = this._correctDate(date);\r\n\t\t\tthis._selectDate(date);\r\n\t\t},\r\n\t\twebix_cal_month_name:function(){\r\n\t\t\tif (!this._settings.navigation) return;\r\n\r\n\t\t\tthis._zoom_in = false;\r\n\t\t\t//maximum zoom reached\r\n\t\t\tif (this._zoom_level == 2 || !this._settings.monthSelect) return;\r\n\r\n\t\t\tvar zoom = Math.max(this._zoom_level, 0) + 1;\r\n\t\t\tthis._changeZoomLevel(zoom);\r\n\t\t},\r\n\t\twebix_cal_block:function(e, id, trg){\r\n\t\t\tif(this._zoom_in){\r\n\t\t\t\tif(trg.className.indexOf(\"webix_cal_day_disabled\")!==-1)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tvar next = this._locate_date(trg);\r\n\t\t\t\tthis._update_zoom_level(next);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(trg.className.indexOf(\"webix_cal_day_disabled\")==-1)\r\n\t\t\t\t\tthis._mode_selected(trg);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_string_to_date: function(date, format){\r\n\t\tif (!date){\r\n\t\t\treturn DateHelper.datePart(new Date());\r\n\t\t}\r\n\t\tif(typeof date == \"string\"){\r\n\t\t\tif (format)\r\n\t\t\t\tdate = DateHelper.strToDate(format)(date);\r\n\t\t\telse\r\n\t\t\t\tdate=i18n.parseFormatDate(date);\r\n\t\t}\r\n\r\n\t\treturn date;\r\n\t},\r\n\t_checkDate: function(date){\r\n\t\tvar blockedDate = (this._settings.blockDates && this._settings.blockDates.call(this,date));\r\n\t\tvar minDate = this._settings.minDate;\r\n\t\tvar maxDate = this._settings.maxDate;\r\n\t\tvar outOfRange = (date < minDate || date > maxDate);\r\n\t\treturn !blockedDate &&!outOfRange;\r\n\t},\r\n\t_findActive:function(date, mode){\r\n\t\tvar dir = (mode === \"top\" || mode ===\"left\" || mode === \"pgup\" || mode === \"up\") ? -1 : 1;\r\n\t\tvar newdate = DateHelper.add(date, dir, \"day\", true);\r\n\t\tif(this._checkDate(newdate))\r\n\t\t\treturn newdate;\r\n\t\telse{\r\n\t\t\tvar compare;\r\n\t\t\tif(this._zoom_level === 0) compare = (date.getMonth() === newdate.getMonth());\r\n\t\t\telse if(this._zoom_level === 1 ) compare = (date.getFullYear() === newdate.getFullYear());\r\n\t\t\telse if(this._zoom_level === 2) compare = (newdate.getFullYear() > this._zoom_start_date && newdate.getFullYear() < this._zoom_start_date+10);\r\n\r\n\t\t\tif(compare)\r\n\t\t\t\treturn this._findActive(newdate, mode);\r\n\t\t}\r\n\t},\r\n\tshowCalendar: function(date) {\r\n\t\tdate = this._string_to_date(date);\r\n\t\tthis._settings.date = date;\r\n\t\tthis.render();\r\n\t\tthis.resize();\r\n\t},\r\n\t_selectedDay: function(day){\r\n\t\treturn day && this._selected_days[day.valueOf()];\r\n\t},\r\n\tgetSelectedDate: function() {\r\n\t\tvar result = [];\r\n\t\tfor (var key in this._selected_days)\r\n\t\t\tresult.push(DateHelper.copy(this._selected_days[key]));\r\n\t\t\r\n\t\treturn this.config.multiselect ? result : (result[0] || null);\r\n\t},\r\n\tgetVisibleDate: function() {\r\n\t\treturn DateHelper.copy(this._settings.date);\r\n\t},\r\n\tsetValue: function(date){\r\n\t\tthis.selectDate(date, true);\r\n\t},\r\n\tgetValue: function(format){\r\n\t\tvar date = this.getSelectedDate();\r\n\t\tif (format)\r\n\t\t\tdate = DateHelper.dateToStr(format)(date);\r\n\t\treturn date;\r\n\t},\r\n\tselectDate: function(date, show, add){\r\n\t\tif (!date || !add || !this.config.multiselect)\r\n\t\t\tthis._selected_days = {};\r\n\r\n\t\tif(date){\r\n\t\t\tif (!isArray(date))\r\n\t\t\t\tdate = [date];\r\n\t\t\tfor (var i=0; i<date.length; i++){\r\n\t\t\t\tvar days = this._string_to_date(date[i]);\r\n\t\t\t\tvar key = DateHelper.datePart(DateHelper.copy(days)).valueOf();\r\n\t\t\t\tif (this._selected_days[key] && add)\r\n\t\t\t\t\tdelete this._selected_days[key];\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._selected_days[key] = days;\r\n\r\n\t\t\t\tif (!this.config.multiselect)\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (date.length && show)\r\n\t\t\t\tthis.showCalendar(date[0]);\r\n\t\t}\r\n\r\n\t\tif(show !== false)\r\n\t\t\tthis.render();\r\n\r\n\t\tthis.callEvent(\"onChange\",[date]);\r\n\t}, \r\n\tlocate:function(){ return null; }\r\n};\r\n\r\n\r\nconst view = protoUI(api, KeysNavigation, MouseEvents, base.view, EventSystem);\r\nexport default {api, view};","import {locate} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {bind} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\nimport color from \"../webix/color\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport base from \"../views/view\";\r\n\r\nconst api = {\r\n\tname:\"colorboard\",\r\n\tdefaults:{\r\n\t\ttemplate:\"<div style=\\\"width:100%;height:100%;background-color:{obj.val}\\\"></div>\",\r\n\t\tpalette:null,\r\n\t\theight:220,\r\n\t\twidth:220,\r\n\t\tcols:12,\r\n\t\trows:10,\r\n\t\tminLightness:0.15,\r\n\t\tmaxLightness:1,\r\n\t\tnavigation:true\r\n\t},\r\n\t$init:function(){\r\n\t\t_event(this._viewobj, \"click\", bind(function(e){\r\n\t\t\tlet value = locate(e, /*@attr*/\"webix_val\");\r\n\t\t\t// locate can return null in case of drag\r\n\t\t\tif (value){\r\n\t\t\t\tconst oldvalue = this._settings.value;\r\n\t\t\t\tvalue = this.setValue(value);\r\n\r\n\t\t\t\tthis.callEvent(\"onItemClick\", [value, e]);\r\n\t\t\t\tif (value != oldvalue)\r\n\t\t\t\t\tthis.callEvent(\"onSelect\", [value]);\r\n\t\t\t}\r\n\t\t}, this));\r\n\r\n\t\tthis.$view.setAttribute(\"role\", \"grid\");\r\n\t\tthis._viewobj.setAttribute(\"aria-readonly\", \"true\");\r\n\t},\r\n\t_set_item_focus:function(){\r\n\t\tif(!this.getValue())\r\n\t\t\tthis.moveSelection(\"up\");\r\n\t},\r\n\t_findIndex:function(value){\r\n\t\tvar pal = this._settings.palette;\r\n\t\tvalue = (value || \"\").toUpperCase();\r\n\t\tfor(var r= 0, rows= pal.length; r < rows; r++)\r\n\t\t\tfor(var c= 0, cols = pal[r].length; c < cols; c++){\r\n\t\t\t\tif(pal[r][c].toUpperCase() == value){\r\n\t\t\t\t\treturn {row:r, col:c};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif(base.api.$setSize.call(this,x,y)){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\t_getBox:function(){\r\n\t\treturn this._viewobj.firstChild;\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tvalue = value ? value.toString(16) : \"\";\r\n\t\tif (value && value.charAt(0) != \"#\" && /^[0-9a-fA-F]+$/.test(value))\r\n\t\t\tvalue = \"#\" + value;\r\n\t\treturn value;\r\n\t},\r\n\tvalue_setter:function(value){\r\n\t\treturn this.$prepareValue(value);\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvalue = this.$prepareValue(value);\r\n\t\tconst oldvalue = this._settings.value;\r\n\r\n\t\tthis._settings.value = value;\r\n\t\tthis.$setValue(value, oldvalue);\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_selectBox:null,\r\n\t_getSelectBox:function(){\r\n\t\tif( this._selectBox && this._selectBox.parentNode ){\r\n\t\t\treturn this._selectBox;\r\n\t\t}else{\r\n\t\t\tvar div = this._selectBox = document.createElement(\"div\");\r\n\t\t\tdiv.className = \"webix_color_selector\";\r\n\t\t\tthis._viewobj.lastChild.appendChild(div);\r\n\t\t\treturn div;\r\n\t\t}\r\n\t},\r\n\t$setValue:function(value, oldvalue){\r\n\t\tif(this.isVisible(this._settings.id)){\r\n\t\t\tvar cell, div, ind, parent, style,\r\n\t\t\t\tleft = 0, top = 0;\r\n\r\n\t\t\t//remove tabindex for previous selection\r\n\t\t\tif(oldvalue) ind = this._findIndex(oldvalue);\r\n\t\t\tif(!ind) ind = {row:0, col:0};\r\n\t\t\tthis._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col].setAttribute(\"tabindex\", \"-1\");\r\n\r\n\t\t\tind = this._findIndex(value);\r\n\t\t\tif(ind){\r\n\t\t\t\tcell = this._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col];\r\n\t\t\t}\r\n\r\n\t\t\tif(cell && cell.parentNode && cell.parentNode.parentNode){\r\n\t\t\t\tparent = cell.parentNode;\r\n\t\t\t\tleft = cell.offsetLeft - parent.offsetLeft ;\r\n\t\t\t\ttop = - (this.$height - (cell.offsetTop -parent.parentNode.offsetTop ));\r\n\r\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\r\n\t\t\t\tcell.setAttribute(\"aria-selected\", \"true\");\r\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\r\n\t\t\t\tcell.setAttribute(\"aria-selected\", \"true\");\r\n\t\t\t}else{\r\n\t\t\t\tif (this._selectBox)\r\n\t\t\t\t\tthis._selectBox.style.left = \"-100px\";\r\n\t\t\t\tthis._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute(\"tabindex\", \"0\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdiv = this._getSelectBox();\r\n\t\t\tdiv.setAttribute(\"webix_val\", value);\r\n\t\t\tstyle =  [\r\n\t\t\t\t\"left:\" + left + \"px\",\r\n\t\t\t\t\"top:\" + top+\"px\",\r\n\t\t\t\t\"width:\" + cell.style.width,\r\n\t\t\t\t\"height:\" + cell.style.height\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\tif( typeof( div.style.cssText ) !== \"undefined\" ) {\r\n\t\t\t\tdiv.style.cssText = style;\r\n\t\t\t} else {\r\n\t\t\t\tdiv.setAttribute(\"style\",style);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t_initPalette:function(config){\r\n\t\tfunction numToHex(n){\r\n\t\t\treturn color.toHex(n, 2);\r\n\t\t}\r\n\t\tfunction rgbToHex(r,g,b){\r\n\t\t\treturn \"#\"+numToHex( Math.floor(r)) +numToHex( Math.floor(g)) + numToHex(Math.floor(b));\r\n\t\t}\r\n\t\tfunction hslToRgb(h, s, l){\r\n\t\t\tvar r, g, b;\r\n\t\t\tif(!s){\r\n\t\t\t\tr = g = b = l; // achromatic\r\n\t\t\t}else{\r\n\t\t\t\tvar q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n\t\t\t\tvar p = 2 * l - q;\r\n\t\t\t\tr = hue2rgb(p, q, h + 1/3);\r\n\t\t\t\tg = hue2rgb(p, q, h);\r\n\t\t\t\tb = hue2rgb(p, q, h - 1/3);\r\n\t\t\t}\r\n\r\n\t\t\treturn {r:r * 255, g:g * 255, b:b * 255};\r\n\t\t}\r\n\t\tfunction hue2rgb(p, q, t){\r\n\t\t\tif(t < 0) t += 1;\r\n\t\t\tif(t > 1) t -= 1;\r\n\t\t\tif (t < 1/6)\r\n\t\t\t\treturn p + (q - p) * 6 * t; \r\n\t\t\telse if (t <= 1/2)\r\n\t\t\t\treturn q;\r\n\t\t\telse if (t < 2/3) \r\n\t\t\t\treturn p + (q - p) * (2/3 - t) * 6;\r\n\t\t\telse\r\n\t\t\t\treturn p;\r\n\t\t}\r\n\r\n\t\tfunction renderGrayBar(colCount){\r\n\t\t\tvar gray = [],\r\n\t\t\t\tval = 255,\r\n\t\t\t\tstep = val / colCount;\r\n\r\n\t\t\tfor(var i=0; i < colCount; i++){\r\n\t\t\t\tval = Math.round(val > 0 ? val : 0);\r\n\t\t\t\tgray.push(rgbToHex(val, val, val));\r\n\t\t\t\tval -= step;\r\n\t\t\t}\r\n\t\t\tgray[gray.length - 1] = \"#000000\";\r\n\t\t\treturn gray;\r\n\t\t}\r\n\r\n\t\tvar colors = [];\r\n\t\tvar colorRows = config.rows - 1;\r\n\t\tvar colorStep = 1/config.cols;\r\n\t\tvar lightStep = (config.maxLightness - config.minLightness)/colorRows;\r\n\t\tvar colorRange = null;\r\n\r\n\t\tcolors.push(renderGrayBar(config.cols));\r\n\r\n\t\tfor(var step = 0, lt = config.minLightness; step < colorRows; step++){\r\n\t\t\tcolorRange = [];\r\n\t\t\tfor(var c = 0, col = 0; c < config.cols; c++ ){\r\n\t\t\t\tvar val = hslToRgb(col, 1, lt );\r\n\t\t\t\tcolorRange.push(rgbToHex(val.r, val.g, val.b));\r\n\t\t\t\tcol += colorStep;\r\n\t\t\t}\r\n\t\t\tcolors.push(colorRange);\r\n\t\t\tlt+=lightStep;\r\n\t\t}\r\n\r\n\t\tthis._settings.palette = colors;\r\n\t},\r\n\tmoveSelection:function(mode, details, focus){\r\n\t\tvar value = this.getValue(), ind, cell;\r\n\r\n\t\tif(value) ind = this._findIndex(value);\r\n\t\tif(!ind) ind = {row:0, col:0};\r\n\r\n\t\tif(ind){\r\n\t\t\tif(mode == \"up\" || mode == \"down\")\r\n\t\t\t\tind.row = ind.row + (mode == \"up\"?-1:1);\r\n\t\t\telse if(mode == \"right\" || mode == \"left\")\r\n\t\t\t\tind.col = ind.col +(mode == \"right\"?1:-1);\r\n\t\t\telse if(mode == \"top\" )\r\n\t\t\t\tind.row = ind.col = 0;\r\n\t\t\telse if(mode == \"bottom\"){\r\n\t\t\t\tind.row = this._viewobj.lastChild.querySelectorAll(\".webix_color_row\").length-1;\r\n\t\t\t\tind.col = this._viewobj.lastChild.childNodes[ind.row].childNodes.length-1;\r\n\t\t\t}\r\n\t\t\tind.row = Math.max(ind.row, 0);\r\n\t\t\tif(ind.row>=0)\r\n\t\t\t\tcell = this._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col];\r\n\t\t\tif(cell){\r\n\t\t\t\tvalue =  cell.getAttribute(/*@attr*/\"webix_val\");\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t\tthis.callEvent(\"onSelect\", [this._settings.value]);\r\n\r\n\t\t\t\tif(focus !==false){\r\n\t\t\t\t\tvar sel = this._viewobj.querySelector(\"div[tabindex='0']\");\r\n\t\t\t\t\tif(sel)  sel.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trender:function(){\r\n\t\tif(!this.isVisible(this._settings.id))\r\n\t\t\treturn;\r\n\r\n\t\tif(!this._settings.palette)\r\n\t\t\tthis._initPalette(this._settings);\r\n\t\tvar palette = this._settings.palette;\r\n\r\n\t\tthis.callEvent(\"onBeforeRender\",[]);\r\n\t\tvar config = this._settings,\r\n\t\t\titemTpl = template(\"<div role='gridcell' tabindex='-1' aria-label=\\\"{obj.val}\\\" style=\\\"width:{obj.width}px;height:{obj.height}px;\\\" \"+/*@attr*/\"webix_val\"+\"=\\\"{obj.val}\\\">\" + (config.template||\"\") + \"</div>\"),\r\n\t\t\tdata = {width: 0, height:0, val:0},\r\n\t\t\twidth = this.$width,\r\n\t\t\theight =  this.$height,\r\n\t\t\twidths = [];\r\n\r\n\t\tvar html = \"<div class=\\\"webix_color_palette\\\"role=\\\"rowgroup\\\">\";\r\n\r\n\t\tvar firstRow = (typeof palette[0] == \"object\") ? palette[0] : palette;\r\n\t\tfor(var i=0; i < firstRow.length; i++){\r\n\t\t\twidths[i] = Math.floor(width/(firstRow.length - i));\r\n\t\t\twidth -= widths[i];\r\n\t\t}\r\n\r\n\t\tif(typeof palette[0] == \"object\"){\r\n\t\t\tfor(var r=0; r < palette.length; r++){\r\n\t\t\t\tvar cellHeight = Math.floor(height/(palette.length - r));\r\n\t\t\t\theight -= cellHeight;\r\n\t\t\t\tvar row = palette[r];\r\n\t\t\t\thtml += renderRow(row, widths, cellHeight);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\thtml+= renderRow(palette, widths, height);\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\tthis._viewobj.innerHTML = html;\r\n\r\n\t\tfunction renderRow(row, widths, height){\r\n\t\t\tvar rowHtml = \"<div class=\\\"webix_color_row\\\" role=\\\"row\\\">\";\r\n\t\t\tfor(var cell = 0; cell < row.length; cell++){\r\n\t\t\t\tdata.width = widths[cell];\r\n\t\t\t\tdata.height = height;\r\n\t\t\t\tdata.val = row[cell];\r\n\t\t\t\trowHtml += itemTpl(data);\r\n\t\t\t}\r\n\t\t\trowHtml += \"</div>\";\r\n\t\t\treturn rowHtml;\r\n\t\t}\r\n\t\tthis._selectBox = null;\r\n\t\tif(this._settings.value)\r\n\t\t\tthis.$setValue(this._settings.value);\r\n\t\telse\r\n\t\t\tthis._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute(\"tabindex\", \"0\");\r\n\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t},\r\n\trefresh:function(){ this.render(); }\r\n};\r\n\r\nconst view = protoUI(api, KeysNavigation, base.view, EventSystem);\r\nexport default {api, view};","import UIManager from \"../core/uimanager\";\r\nimport Number from \"../core/number\";\r\n\r\nimport env from \"../webix/env\";\r\nimport patterns from \"../webix/patterns\";\r\n\r\nimport {preventEvent, getSelectionRange, setSelectionRange} from \"../webix/html\";\r\nimport {bind, isUndefined} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\n\r\nvar controls = {};\r\nfor(var i in UIManager._controls){\r\n\tcontrols[UIManager._controls[i]] = i;\r\n}\r\nvar nav_controls = {\r\n\t9:\"tab\",\r\n\t38:\"up\",\r\n\t40:\"down\",\r\n\t37:\"left\",\r\n\t39:\"right\"\r\n};\r\n\r\n\r\nconst TextPattern = {\r\n\t$init:function(config){\r\n\t\tvar pattern =  this.defaults.pattern || config.pattern;\r\n\t\tvar format = this.defaults.format || config.format;\r\n\t\tconfig.value = isUndefined(config.value) ? \"\" :config.value;\r\n\r\n\t\tif (pattern || (format && !this.format_setter)){\r\n\t\t\tthis.attachEvent(\"onKeyPress\", function(code, e){\r\n\t\t\t\tif(e.ctrlKey || e.altKey || this._settings.readonly || this._custom_format)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif(code>105 && code<112) //numpad operators\r\n\t\t\t\t\tcode -=64;\r\n\r\n\t\t\t\tif(controls[code] && code !== 8 && code !==46){  //del && bsp\r\n\t\t\t\t\tif(!nav_controls[code])\r\n\t\t\t\t\t\tpreventEvent(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpreventEvent(e);\r\n\t\t\t\tthis._on_key_pressed(e, code);\r\n\t\t\t});\r\n\r\n\t\t\tthis.attachEvent(\"onAfterRender\", this._after_render);\r\n\t\t\tthis.getText = function(){ return this.getInputNode().value; };\r\n\t\t\tthis.$prepareValue = function(value){ return this._pattern(value, false); };\r\n\t\t\tthis._pattern = function(value, mode){\r\n\t\t\t\tif (mode === false)\r\n\t\t\t\t\treturn this._getRawValue(value);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn this._matchPattern(value);\r\n\t\t\t};\r\n\r\n\t\t\tif (format){\r\n\t\t\t\tif (typeof format === \"object\"){\r\n\t\t\t\t\tthis._custom_format = format;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tformat = Number.getConfig(format);\r\n\t\t\t\t\tthis._custom_format = {\r\n\t\t\t\t\t\tparse : function(value){ return Number.parse(value, format); },\r\n\t\t\t\t\t\tedit : function(value){ return Number.format(value, format); },\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// initialize pattern before value_setter\r\n\t\tif (pattern){\r\n\t\t\tthis._settings.pattern = this.pattern_setter(pattern);\r\n\t\t\tdelete config.pattern;\r\n\t\t}\r\n\t},\r\n\tpattern_setter:function(value){\r\n\t\tvar pattern = patterns[value] || value;\r\n\r\n\t\tif (typeof pattern == \"string\") pattern = { mask: pattern };\r\n\t\tpattern.allow = pattern.allow || /[A-Za-z0-9]/g;\r\n\r\n\t\tthis._patternScheme(pattern);\r\n\t\treturn pattern;\r\n\t},\r\n\t_init_validation:function(){\r\n\t\tthis.config.validate = this.config.validate || bind(function(){\r\n\t\t\tvar value = this.getText();\r\n\t\t\tvar raw = value.replace(this._pattern_chars, \"\");\r\n\t\t\tvar matches = (value.toString().match(this._pattern_allows) || []).join(\"\");\r\n\t\t\treturn (matches.length == raw.length && value.length == this._settings.pattern.mask.length);\r\n\t\t}, this);\r\n\t},\r\n\t_after_render:function(){\r\n\t\tvar ev =  env.isIE8?\"propertychange\":\"input\";\r\n\t\t\r\n\t\tif (!this._custom_format) \r\n\t\t\t_event(this.getInputNode(), ev, function(){\r\n\t\t\t\tvar stamp =  (new Date()).valueOf();\r\n\t\t\t\t//dark ie8 magic\r\n\t\t\t\tvar width = this.$view.offsetWidth; //eslint-disable-line\r\n\t\t\t\tif(!this._property_stamp || stamp-this._property_stamp>100){\r\n\t\t\t\t\tthis._property_stamp = stamp;\r\n\t\t\t\t\tthis.$setValue(this.getText());\r\n\t\t\t\t}\r\n\t\t\t}, {bind:this});\r\n\r\n\t\t_event(this.getInputNode(), \"blur\", function(){\r\n\t\t\tthis._applyChanges();\r\n\t\t}, {bind:this});\r\n\t},\r\n\t_patternScheme:function(pattern){\r\n\t\tvar mask = pattern.mask, scheme = {}, chars = \"\", count = 0;\r\n\t\t\r\n\t\tfor(var i = 0; i<mask.length; i++){\r\n\t\t\tif(mask[i] === \"#\"){\r\n\t\t\t\tscheme[i] = count; count++;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tscheme[i] = false;\r\n\t\t\t\tif(chars.indexOf(mask[i]) === -1) chars+=\"\\\\\"+mask[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._pattern_allows = pattern.allow;\r\n\t\tthis._pattern_chars = new RegExp(\"[\"+chars+\"]\", \"g\");\r\n\t\tthis._pattern_scheme = scheme;\r\n\r\n\t\tthis._init_validation();\r\n\t},\r\n\t_on_key_pressed:function(e, code){\r\n\t\tvar node = this.getInputNode();\r\n\t\tvar value = node.value;\r\n\t\tvar pos = getSelectionRange(node);\r\n\t\tvar chr = \"\";\r\n\r\n\t\tif(code == 8 || code == 46){\r\n\t\t\tif(pos.start == pos.end){\r\n\t\t\t\tif(code == 8) pos.start--;\r\n\t\t\t\telse pos.end++;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tchr = String.fromCharCode(code);\r\n\t\t\tconst isCapsLock = e.getModifierState(\"CapsLock\");\r\n\t\t\tif (!e.shiftKey && !isCapsLock || e.shiftKey && isCapsLock) chr = chr.toLowerCase();\r\n\t\t}\r\n\r\n\t\tvalue = value.substr(0, pos.start) + chr +value.substr(pos.end);\r\n\t\tpos = this._getCaretPos(chr, value.length, pos.start, code);\r\n\r\n\t\tthis._input_code = code;\r\n\t\tthis.$setValue(value);\r\n\r\n\t\tsetSelectionRange(node, pos);\r\n\t},\r\n\t_getCaretPos:function(chr, len, pos, code){\r\n\t\tif((chr && chr.match(this._pattern_allows)) || (code ==8 || code ==46)){\r\n\t\t\tpos = chr ? pos+1 : pos;\r\n\t\t\tpos = this._fixCaretPos(pos, code);\r\n\t\t}\r\n\t\telse if(len-1 == pos && code !==8 && code !==46){\r\n\t\t\tvar rest = this._settings.pattern.mask.indexOf(\"#\", pos);\r\n\t\t\tif(rest>0) pos += rest;\r\n\t\t}\r\n\t\treturn pos;\r\n\t},\r\n\t_fixCaretPos:function(pos, code){\r\n\t\tvar prev = pos-(code !== 46)*1;\r\n\r\n\t\tif(this._pattern_scheme[prev] === false){\r\n\t\t\tpos = pos+(code ==8 ? -1: 1);\r\n\t\t\treturn this._fixCaretPos(pos, code);\r\n\t\t}\r\n\t\tif(this._pattern_scheme[pos] === false && code !==8)\r\n\t\t\treturn this._fixCaretPos(pos+1, code)-1;\r\n\t\treturn pos;\r\n\t},\r\n\t_getRawValue:function(value){\r\n\t\tif (this._custom_format)\r\n\t\t\treturn this._custom_format.parse(value);\r\n\r\n\t\tvalue = value || value === 0 ? value : \"\";\r\n\t\tvar matches = value.toString().match(this._pattern_allows) || [];\r\n\t\treturn matches.join(\"\").replace(this._pattern_chars, \"\");\r\n\t},\r\n\t_matchPattern:function(value){\r\n\t\tif (this._custom_format)\r\n\t\t\treturn this._custom_format.edit(this._custom_format.parse(value));\r\n\r\n\t\tvar raw = this._getRawValue(value),\r\n\t\t\tpattern = this._settings.pattern.mask,\r\n\t\t\tmask = this._settings.pattern.mask,\r\n\t\t\tscheme = this._pattern_scheme,\r\n\t\t\tend = false,\r\n\t\t\tindex = 0,\r\n\t\t\trawIndex = 0,\r\n\t\t\trawLength = 0;\r\n\r\n\t\tfor(var i in scheme){\r\n\t\t\tif(scheme[i]!==false){\r\n\t\t\t\tif(!end){\r\n\t\t\t\t\tindex = i*1;\r\n\t\t\t\t\trawIndex = scheme[i];\r\n\t\t\t\t\tvar rchar = raw[rawIndex]||\"\";\r\n\t\t\t\t\tvar next = raw[rawIndex+1];\r\n\r\n\t\t\t\t\tpattern = (rchar?pattern.substr(0, index):\"\") + rchar +(rchar && next?pattern.substr(index + 1):\"\");\r\n\t\t\t\t\tif(!next) end = true;\r\n\t\t\t\t}\r\n\t\t\t\trawLength++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//finalize value with subsequent mask chars \r\n\t\tvar icode = this._input_code;\r\n\t\tif((icode && icode !== 8) || (!icode && rawLength-1 === rawIndex && pattern.length < mask.length)){\r\n\t\t\tif(raw){\r\n\t\t\t\tvar nind = index+1;\r\n\t\t\t\tif(mask.charAt(nind)!==\"#\" && pattern.length < mask.length){\r\n\t\t\t\t\tvar lind = mask.indexOf(\"#\", nind);\r\n\t\t\t\t\tif(lind<0) lind = mask.length;\r\n\t\t\t\t\tpattern += mask.substr(nind, lind-nind);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(icode !==46){\r\n\t\t\t\tpattern += mask.substr(0, mask.indexOf(\"#\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._input_code = null;\r\n\t\treturn pattern;\r\n\t}\r\n};\r\n\r\nexport default TextPattern;","import {getTextSize} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport button from \"../views/button\";\r\n\r\nconst api = {\r\n\tname:\"label\",\r\n\tdefaults:{\r\n\t\ttemplate:\"<div class='webix_el_box' style='width:#awidth#px;height:#aheight#px;line-height:#cheight#px'>#label#</div>\"\r\n\t},\r\n\t$skin:function(){\r\n\t\tbutton.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.height = $active.inputHeight;\r\n\t},\r\n\tfocus:function(){ return false; },\r\n\t_getBox:function(){\r\n\t\treturn this._dataobj.firstChild;\r\n\t},\r\n\tsetHTML:function(html){\r\n\t\tthis._settings.label = html;\r\n\t\tthis.refresh();\r\n\t},\r\n\tsetValue: function(value){\r\n\t\tthis._settings.label = value;\r\n\t\tbutton.api.setValue.apply(this,arguments);\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tthis._dataobj.firstChild.innerHTML = value;\r\n\t},\r\n\t$render:function(config){\r\n\t\tif (config.align === \"right\")\r\n\t\t\tthis._dataobj.firstChild.style.textAlign = \"right\";\r\n\t},\r\n\t_set_inner_size:false,\r\n\t_set_default_css:function(){},\r\n\t_calc_size:function(config){\r\n\t\tconst css = \"webix_el_box webixlabel\" + (this.queryView(\"toolbar\", \"parent\") ? \" webixtoolbarlabel\" : \"\");\r\n\t\tconfig = config || this._settings;\r\n\t\tif (config.autowidth)\r\n\t\t\tconfig.width = getTextSize(config.label, css).width;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, button.view);\r\nexport default {api, view};","import {protoUI, ui, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {isUndefined, isArray, extend, uid} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {setSelectionRange} from \"../webix/html\";\r\nimport {assert} from \"../webix/debug\";\r\nimport template from \"../webix/template\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\nimport rules from \"../webix/rules\";\r\nimport button from \"./button\";\r\nimport base from \"../views/view\";\r\n\r\nimport TextPattern from \"../core/textpattern\";\r\n\r\nconst api = {\r\n\tname:\"text\",\r\n\t$allowsClear:true,\r\n\t_init_onchange:function(){\r\n\t\tif (this.$allowsClear){\r\n\t\t\t//attach onChange handler only for controls which do not manage blur on their own\r\n\t\t\t//for example - combo\r\n\t\t\tif (!this._onBlur)\r\n\t\t\t\t_event(this.getInputNode(), \"change\", this._applyChanges, {bind:this});\r\n\t\t\tif (this._settings.suggest)\r\n\t\t\t\t$$(this._settings.suggest).linkInput(this);\r\n\t\t}\r\n\t},\r\n\t_applyChanges: function(){\r\n\t\tvar newvalue = this.getValue();\r\n\t\t\r\n\t\tvar res = this.setValue(newvalue, true);\r\n\t\t//controls with post formating, we need to repaint value\r\n\t\tif (this._custom_format && res === false ){\r\n\t\t\tthis.$setValue(newvalue);\r\n\t\t}\r\n\t},\r\n\t$skin:function(){\r\n\t\tbutton.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.height = $active.inputHeight;\r\n\t\tthis.defaults.inputPadding = $active.inputPadding;\r\n\t\tthis._inputSpacing = $active.inputSpacing;\r\n\t\tthis._labelTopHeight = $active.labelTopHeight;\r\n\t},\r\n\t$init:function(config){\r\n\t\tif (config.labelPosition == \"top\")\r\n\t\t\tif (isUndefined(config.height) && this.defaults.height)  // textarea\r\n\t\t\t\tconfig.height = this.defaults.height + (config.label?this._labelTopHeight:0);\r\n\r\n\t\tif (this._onBlur)\r\n\t\t\tthis.attachEvent(\"onBlur\", function(){\r\n\t\t\t\tif (this._rendered_input) this._onBlur();\r\n\t\t\t});\r\n\t\tthis.attachEvent(\"onAfterRender\", this._init_onchange);\r\n\t},\r\n\t$renderIcon:function(){\r\n\t\tvar config = this._settings;\r\n\t\tif (config.icon){\r\n\t\t\tvar height = config.aheight - 2*config.inputPadding,\r\n\t\t\t\tpadding = (height - 18)/2 -1,\r\n\t\t\t\taria = this.addSection ? \"role='button' tabindex='0' aria-label='\"+(i18n.aria[\"multitext\"+(config.mode || \"\")+\"Section\"])+\"'\": \"\";\r\n\t\t\treturn \"<span style='height:\"+(height-padding)+\"px;padding-top:\"+padding+\"px;' class='webix_input_icon \"+config.icon+\"' \"+aria+\"></span>\";\r\n\t\t}\r\n\t\treturn \"\";\r\n\t},\r\n\trelatedView_setter:function(value){\r\n\t\tthis.attachEvent(\"onChange\", function(){\r\n\t\t\tvar value = this.getValue();\r\n\t\t\tvar mode = this._settings.relatedAction;\r\n\t\t\tvar viewid = this._settings.relatedView;\r\n\t\t\tvar view = $$(viewid);\r\n\t\t\tif (!view){\r\n\t\t\t\tvar top = this.getTopParentView();\r\n\t\t\t\tif (top && top.$$)\r\n\t\t\t\t\tview = top.$$(viewid);\r\n\t\t\t}\r\n\r\n\t\t\tassert(view, \"Invalid relatedView: \"+viewid);\r\n\r\n\t\t\tif (mode == \"enable\"){\r\n\t\t\t\tif (value) view.enable(); else view.disable();\r\n\t\t\t} else {\r\n\t\t\t\tif (value) view.show(); else view.hide();\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t},\r\n\tvalidateEvent_setter:function(value){\r\n\t\tif (value == \"blur\")\r\n\t\t\tthis.attachEvent(\"onBlur\", this.validate);\r\n\r\n\t\tif (value == \"key\")\r\n\t\t\tthis.attachEvent(\"onTimedKeyPress\", this.validate);\r\n\r\n\t\treturn value;\r\n\t},\r\n\tvalidate:function(){\r\n\t\tvar rule = this._settings.validate;\r\n\t\tif (!rule && this._settings.required)\r\n\t\t\trule = rules.isNotEmpty;\r\n\r\n\t\tvar form =this.getFormView();\r\n\t\tvar name = this._settings.name;\r\n\t\tvar value = this.getValue();\r\n\t\tvar data = {}; data[name] = value;\r\n\r\n\t\tassert(form, \"Validation works only for fields in the form\");\r\n\t\tassert(name, \"Validation works only for fields with name\");\r\n\r\n\t\tif (rule && !form._validate(rule, value, data, name))\r\n\t\t\treturn false;\r\n\t\treturn true;\r\n\t},\r\n\tbottomLabel_setter: function(value){\r\n\t\tif(!this._settings.bottomPadding)\r\n\t\t\tthis._settings.bottomPadding = 18;\r\n\t\treturn value;\r\n\t},\r\n\t_getInvalidText: function(){\r\n\t\tvar text = this._settings.invalidMessage;\r\n\t\tif(typeof text == \"function\"){\r\n\t\t\ttext.call(this);\r\n\t\t}\r\n\t\treturn text;\r\n\t},\r\n\tsetBottomText: function(text, height){\r\n\t\tvar config = this._settings;\r\n\t\tif (typeof text != \"undefined\"){\r\n\t\t\tif (config.bottomLabel == text) return;\r\n\t\t\tconfig.bottomLabel = text;\r\n\t\t}\r\n\r\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\" ) || config.bottomLabel;\r\n\t\tif (!message && !config.bottomPadding)\r\n\t\t\tconfig.inputHeight = 0;\r\n\t\tif (message && !config.bottomPadding){\r\n\t\t\tthis._restorePadding = 1;\r\n\t\t\tconfig.bottomPadding = config.bottomPadding || height || 18;\t\r\n\t\t\tthis.render();\r\n\t\t\tthis.adjust();\r\n\t\t\tthis.resize();\r\n\t\t} else if (!message && this._restorePadding){\r\n\t\t\tconfig.bottomPadding = this._restorePadding = 0;\r\n\t\t\t//textarea\r\n\t\t\tif (!config.height)\r\n\t\t\t\tthis.render();\r\n\t\t\tthis.adjust();\r\n\t\t\tthis.resize();\r\n\t\t} else\r\n\t\t\tthis.render();\r\n\t},\r\n\t$getSize: function(){\r\n\t\tvar sizes = base.api.$getSize.apply(this,arguments);\r\n\t\tvar heightInc = this.config.bottomPadding;\r\n\t\tif(heightInc){\r\n\t\t\tsizes[2] += heightInc;\r\n\t\t\tsizes[3] += heightInc;\r\n\t\t}\r\n\t\treturn sizes;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tvar config = this._settings;\r\n\r\n\t\tif(base.api.$setSize.call(this,x,y)){\r\n\t\t\tif (!x || !y) return;\r\n\r\n\t\t\tif (config.labelPosition == \"top\"){\r\n\t\t\t\t// textarea\r\n\t\t\t\tif (!config.inputHeight)\r\n\t\t\t\t\tthis._inputHeight = this._content_height - (config.label?this._labelTopHeight:0) - (this.config.bottomPadding||0);\r\n\t\t\t\tconfig.labelWidth = 0;\r\n\t\t\t} else if (config.bottomPadding){\r\n\t\t\t\tconfig.inputHeight = this._content_height - this.config.bottomPadding;\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\t_get_input_width: function(config){\r\n\t\tvar width = (this._input_width||0)-(config.label?config.labelWidth:0) - this._inputSpacing - (config.iconWidth || 0);\r\n\r\n\t\t//prevent js error in IE\r\n\t\treturn (width < 0)?0:width;\r\n\t},\r\n\t_render_div_block:function(obj, common){\r\n\t\tvar id = \"x\"+uid();\r\n\t\tvar width = common._get_input_width(obj);\r\n\t\tvar inputAlign = obj.inputAlign || \"left\";\r\n\t\tvar height = this._settings.aheight - 2*$active.inputPadding - 2*$active.borderWidth;\r\n\t\tvar text = (obj.text||obj.value||this._get_div_placeholder(obj));\r\n\t\tvar html = \"<div class='webix_inp_static' role='combobox' aria-label='\"+template.escape(obj.label)+\"' tabindex='0'\"+(obj.readonly?\" aria-readonly='true'\":\"\")+(obj.invalid?\"aria-invalid='true'\":\"\")+\" onclick='' style='line-height:\"+height+\"px;width: \" + width + \"px; text-align: \" + inputAlign + \";' >\"+ text +\"</div>\";\r\n\t\treturn common.$renderInput(obj, html, id);\r\n\t},\r\n\t_baseInputHTML:function(tag){\r\n\t\tvar html = \"<\"+tag+(this._settings.placeholder?\" placeholder='\"+template.escape(this._settings.placeholder)+\"' \":\" \");\r\n\t\tif (this._settings.readonly)\r\n\t\t\thtml += \"readonly='true' aria-readonly=''\";\r\n\t\tif(this._settings.required)\r\n\t\t\thtml += \"aria-required='true'\";\r\n\t\tif(this._settings.invalid)\r\n\t\t\thtml += \"aria-invalid='true'\";\r\n\r\n\t\tvar attrs = this._settings.attributes;\r\n\t\tif (attrs)\r\n\t\t\tfor(var prop in attrs)\r\n\t\t\t\thtml += prop+\"='\"+attrs[prop]+\"' \";\r\n\t\treturn html;\r\n\t},\r\n\t$renderLabel: function(config, id){\r\n\t\tlet label = \"\";\r\n\r\n\t\tif (config.label){\r\n\t\t\tlet top = this._settings.labelPosition == \"top\";\r\n\t\t\tlet style = `text-align:${config.labelAlign||\"left\"}; line-height:${this._getLabelHeight(top)}px; `;\r\n\r\n\t\t\tif (top)\r\n\t\t\t\tstyle += \"display:block;\";\r\n\t\t\telse\r\n\t\t\t\tstyle += config.labelWidth ? `width:${config.labelWidth}px;` : \"display:none;\";\r\n\r\n\t\t\tlabel = \"<label style='\"+style+\"' onclick='' for='\"+id+\"' class='webix_inp_\"+(top?\"top_\":\"\")+\"label \"+(config.required?\"webix_required\":\"\")+\"'>\" + (config.label||\"\") + \"</label>\";\r\n\t\t}\r\n\t\treturn label;\r\n\t},\r\n\t_getLabelHeight:function(top){\r\n\t\treturn top ? this._labelTopHeight-this._settings.inputPadding : (this._settings.aheight - 2*this._settings.inputPadding);\r\n\t},\r\n\t$renderInput: function(config, div_start, id) {\r\n\t\tvar inputAlign = (config.inputAlign||\"left\");\r\n\t\tvar top = (config.labelPosition == \"top\");\r\n\t\tvar inputWidth = this._get_input_width(config);\r\n\r\n\t\tid = id||uid();\r\n\r\n\t\tvar label = this.$renderLabel(config,id);\r\n\r\n\t\tvar html = \"\";\r\n\t\tif(div_start){\r\n\t\t\thtml += div_start;\r\n\t\t} else {\r\n\t\t\tvar value =  template.escape(config.text || this._pattern(config.value) );\r\n\t\t\thtml += this._baseInputHTML(\"input\")+\"id='\" + id + \"' type='\"+(config.type||this.name)+\"'\"+(config.editable?\" role='combobox'\":\"\")+\" value='\" + value + \"' style='width: \" + inputWidth + \"px; text-align: \" + inputAlign + \";'\";\r\n\t\t\tvar attrs = config.attributes;\r\n\t\t\tif (attrs)\r\n\t\t\t\tfor(var prop in attrs)\r\n\t\t\t\t\thtml += \" \"+prop+\"='\"+attrs[prop]+\"'\";\r\n\t\t\thtml += \" />\";\r\n\t\t}\r\n\t\tvar icon = this.$renderIcon?this.$renderIcon(config):\"\";\r\n\t\thtml += icon;\r\n\r\n\t\tvar result = \"\";\r\n\t\t//label position, top or left\r\n\t\tif (top)\r\n\t\t\tresult = label+\"<div class='webix_el_box' style='width:\"+config.awidth+\"px; height:\"+config.aheight+\"px'>\"+html+\"</div>\";\r\n\t\telse\r\n\t\t\tresult = \"<div class='webix_el_box' style='width:\"+config.awidth+\"px; height:\"+config.aheight+\"px'>\"+label+html+\"</div>\";\r\n\r\n\r\n\t\t//bottom message width\r\n\t\tvar padding = config.awidth-inputWidth-$active.inputPadding*2;\r\n\t\t//bottom message text\r\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\") || config.bottomLabel;\r\n\t\tif (message)\r\n\t\t\tresult +=  \"<div class='webix_inp_bottom_label'\"+(config.invalid?\"role='alert' aria-relevant='all'\":\"\")+\" style='width:\"+(inputWidth||config.awidth)+\"px;margin-left:\"+Math.max(padding,$active.inputPadding)+\"px;'>\"+message+\"</div>\";\r\n\r\n\t\treturn result;\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\treturn common.$renderInput(obj);\r\n\t\t},\r\n\t\tlabel:\"\",\r\n\t\tlabelWidth:80\r\n\t},\r\n\tlabelWidth_setter:function(value){\r\n\t\treturn value ? Math.max(value, $active.dataPadding) : 0;\r\n\t},\r\n\ttype_setter:function(value){ return value; },\r\n\t_set_inner_size:false,\r\n\t_set_default_css:function(){},\r\n\t_pattern:function(value){ return value; },\r\n\t$setValue:function(value){\r\n\t\tthis.getInputNode().value = this._pattern(value);\r\n\t},\r\n\t$getValue:function(){\r\n\t\treturn this._pattern(this.getInputNode().value, false);\r\n\t},\r\n\tsetValueHere:function(v, data, details){\r\n\t\tif (details && details.symbol){\r\n\t\t\tconst s = details.symbol;\r\n\t\t\tlet value = this.getValue();\r\n\t\t\tlet last = value.substring(details.pos);\r\n\r\n\t\t\tvalue = value.substring(0, details.pos);\r\n\t\t\tvalue = value.substring(0, value.lastIndexOf(s)+s.length) + v;\r\n\r\n\t\t\tthis.setValue(value + last);\r\n\t\t\tsetSelectionRange(this.getInputNode(), value.length);\r\n\t\t} else\r\n\t\t\tthis.setValue(v);\r\n\t},\r\n\tsuggest_setter:function(value){\r\n\t\tif (value){\r\n\t\t\tassert(value !== true, \"suggest options can't be set as true, data need to be provided instead\");\r\n\r\n\t\t\tif (typeof value == \"string\"){\r\n\t\t\t\tconst attempt = $$(value);\r\n\t\t\t\tif (attempt) \r\n\t\t\t\t\treturn $$(value)._settings.id;\r\n\r\n\t\t\t\tvalue = { body: { url:value , dataFeed:value }};\r\n\t\t\t} else if(value.getItem)\r\n\t\t\t\tvalue = { body: { data:value }};\r\n\t\t\telse if (isArray(value))\r\n\t\t\t\tvalue = { body: { data: this._check_options(value) }};\r\n\t\t\telse if (!value.body)\r\n\t\t\t\tvalue.body = { };\r\n\r\n\t\t\textend(value, { view:\"suggest\" });\r\n\r\n\t\t\tconst view = ui(value);\r\n\t\t\tthis._destroy_with_me.push(view);\r\n\t\t\treturn view._settings.id;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, TextPattern, button.view);\r\nexport default {api, view};","import {uid, bind} from \"../webix/helpers\";\r\nimport {proto, ui} from \"../ui/core\";\r\n\r\nimport EventSystem from \"./eventsystem\";\r\nimport Destruction from \"./destruction\";\r\nimport DataMove from \"../core/datamove\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport MapCollection from \"../core/mapcollection\";\r\n\r\nimport Settings from \"../core/settings\";\r\n\r\nimport ValidateCollection from \"../core/validatecollection\";\r\n\r\nimport BindSource from \"../core/bindsource\";\r\nimport BaseBind from \"../core/basebind\";\r\nimport CollectionBind from \"../core/collectionbind\";\r\n\r\nimport {define} from \"../services\";\r\n\r\nconst DataCollection = proto({\r\n\tname:\"DataCollection\",\r\n\tisVisible:function(){ \r\n\t\tif (!this.data.order.length && !this.data._filter_order && !this._settings.dataFeed) return false;\r\n\t\treturn true; \r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tvar id = (config&&config.id)?config.id:uid();\r\n\t\tthis._settings.id =id;\r\n\t\tui.views[id] = this;\r\n\t\tthis.data.attachEvent(\"onStoreLoad\", bind(function(){\r\n\t\t\tthis.callEvent(\"onBindRequest\",[]);\r\n\t\t}, this));\r\n\t},\r\n\trefresh:function(){ this.callEvent(\"onBindRequest\",[]); }\r\n}, DataMove, CollectionBind, BindSource, ValidateCollection, DataLoader, MapCollection, EventSystem, BaseBind, Destruction, Settings);\r\n\r\ndefine(\"DataCollection\", DataCollection);\r\n\r\nexport default DataCollection;","import {protoUI, $$} from \"../ui/core\";\r\nimport {uid, bind} from \"../webix/helpers\";\r\n\r\nimport text from \"./text\";\r\nimport DataCollection from \"../core/datacollection\";\r\n\r\n\r\nconst api = {\r\n\tname:\"select\",\r\n\tdefaults:{\r\n\t\ttemplate:function(obj,common){\r\n\t\t\tconst id = \"x\"+uid();\r\n\t\t\tlet html = common._baseInputHTML(\"select\")+\"id='\"+id+\"' style='width:\"+common._get_input_width(obj)+\"px;'>\";\r\n\r\n\t\t\tconst optview = $$(obj.options);\r\n\t\t\tif (optview && optview.data && optview.data.each){\r\n\t\t\t\toptview.data.each(function(option){\r\n\t\t\t\t\thtml+=\"<option\"+((option.id == obj.value)?\" selected='true'\":\"\")+\" value='\"+option.id+\"'>\"+option.value+\"</option>\";\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst options = common._check_options(obj.options);\r\n\t\t\t\tfor (let i=0; i<options.length; i++)\r\n\t\t\t\t\thtml+=\"<option\"+((options[i].id == obj.value)?\" selected='true'\":\"\")+\" value='\"+options[i].id+\"'>\"+options[i].value+\"</option>\";\r\n\t\t\t}\r\n\t\t\thtml += \"</select>\";\r\n\t\t\treturn common.$renderInput(obj, html, id);\r\n\t\t}\r\n\t},\r\n\toptions_setter:function(value){\r\n\t\tif (value){\r\n\t\t\tif (typeof value ==\"string\"){\r\n\t\t\t\tconst collection = new DataCollection({url:value});\r\n\t\t\t\tcollection.data.attachEvent(\"onStoreLoad\", bind(this.refresh, this));\r\n\t\t\t\treturn collection;\r\n\t\t\t} else\r\n\t\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\t//get input element\r\n\tgetInputNode: function() {\r\n\t\treturn this._dataobj.getElementsByTagName(\"select\")[0];\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {uid} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"checkbox\",\r\n\tdefaults:{\r\n\t\tcheckValue:1,\r\n\t\tuncheckValue:0,\r\n\t\ttemplate:function(config, common) {\r\n\t\t\tvar id = \"x\"+uid();\r\n\t\t\tvar rightlabel = \"\";\r\n\t\t\tif (config.labelRight){\r\n\t\t\t\trightlabel = \"<label class='webix_label_right'>\"+config.labelRight+\"</label>\";\r\n\t\t\t\t//user clearly attempts to hide the label, help him\r\n\t\t\t\tif (config.labelWidth)\r\n\t\t\t\t\tconfig.label = config.label || \"&nbsp;\";\r\n\t\t\t}\r\n\t\t\tvar checked = (config.checkValue == config.value);\r\n\t\t\tvar margin = Math.floor((common._settings.aheight-16)/2);\r\n\t\t\tvar ch = common._baseInputHTML(\"input\")+\"style='margin-top:\"+margin+\"px;\"+(config.customCheckbox?\"display:none\":\"\")+\"' id='\"+id+\"' type='checkbox' \"+(checked?\"checked='1'\":\"\")+(config.labelRight?\" aria-label='\"+template.escape(config.labelRight)+\"'\":\"\")+\"/>\";\r\n\t\t\tvar className = \"webix_inp_checkbox_border webix_el_group webix_checkbox_\"+(checked?\"1\":\"0\");\r\n\t\t\tvar customCheckbox = config.customCheckbox || \"\";\r\n\t\t\tif(customCheckbox){\r\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-checked=')\\w*(?=')/, \"$1\"+(config.value == config.checkValue?\"true\":\"false\"));\r\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-label=')\\w*(?=')/, \"$1\"+template.escape(config.labelRight || config.label));\r\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-invalid=')\\w*(?=')/, \"$1\"+(config.invalid?\"true\":\"false\"));\r\n\t\t\t}\r\n\t\t\tvar html = \"<div style='line-height:\"+common._settings.cheight+\"px' class='\"+className+\"'>\"+ch+customCheckbox+rightlabel+\"</div>\";\r\n\t\t\treturn common.$renderInput(config, html, id);\r\n\t\t}\r\n\t},\r\n\tcustomCheckbox_setter: function(value){\r\n\t\tif( value === true && $active.customCheckbox){\r\n\t\t\tvalue = \"<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>\";\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tblur: function(){\r\n\t\tvar input = this.getInputNode();\r\n\t\tif(input) input.blur();\r\n\t},\r\n\t$prepareValue: function(value){ return value; },\r\n\t_init_onchange: function(){},\r\n\t$setValue:function(value){\r\n\t\tvar isChecked = (value == this._settings.checkValue);\r\n\t\tvar input = this.$view.getElementsByTagName(\"input\")[0];\r\n\t\tvar parentNode = input?input.parentNode:null;\r\n\r\n\t\tif(parentNode && this._settings.customCheckbox){\r\n\t\t\tvar button = parentNode.getElementsByTagName(\"BUTTON\");\r\n\t\t\tif(button[0]) button[0].setAttribute(\"aria-checked\", isChecked?\"true\":\"false\");\r\n\t\t}\r\n\t\tif(parentNode){\r\n\t\t\tparentNode.className = parentNode.className.replace(/(webix_checkbox_)\\d/,\"$1\"+(isChecked?1:0));\r\n\t\t}\r\n\t\tinput.checked = isChecked;\r\n\t},\r\n\ttoggle:function(){\r\n\t\tvar value = (this.getValue() != this._settings.checkValue)?this._settings.checkValue:this._settings.uncheckValue;\r\n\t\tthis.setValue(value);\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar value = this._settings.value;\r\n\t\treturn  (value == this._settings.checkValue)?this._settings.checkValue:this._settings.uncheckValue;\r\n\t},\r\n\tgetInputNode: function() {\r\n\t\treturn this.$view.getElementsByTagName(this._settings.customCheckbox?\"button\":\"input\")[0];\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.customCheckbox = !!$active.customCheckbox;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {protoUI, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {isUndefined, isArray} from \"../webix/helpers\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\nimport wDate from \"../core/date\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"datepicker\",\r\n\t_editable:true,\r\n\t$init:function(config){\r\n\t\t// value_setter handling\r\n\t\tif(config.multiselect)\r\n\t\t\tthis._settings.multiselect = config.multiselect;\r\n\r\n\t\tthis.$ready.push(this._init_popup);\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tif(common._settings.type == \"time\"){\r\n\t\t\t\tcommon._settings.icon = common._settings.timeIcon;\r\n\t\t\t}\r\n\t\t\t//temporary remove obj.type [[DIRTY]]\r\n\t\t\tconst t = obj.type; obj.type = \"\";\r\n\t\t\tconst res = obj.editable ? common.$renderInput(obj) : common._render_div_block(obj, common);\r\n\t\t\tobj.type = t;\r\n\t\t\treturn res;\r\n\t\t},\r\n\t\tstringResult:false,\r\n\t\ttimepicker:false,\r\n\t\ticon:\"wxi-calendar\",\r\n\t\ticons: true,\r\n\t\ttimeIcon: \"wxi-clock\",\r\n\t\tseparator:\", \"\r\n\t},\r\n\t_onBlur:function(){\r\n\t\tconst text = this.getText();\r\n\t\tif (this._settings.text == text || (isUndefined(this._settings.text) && !text))\r\n\t\t\treturn;\r\n\r\n\t\tconst value = this._settings.editable ? this.getValue() : this.getPopup().getValue();\r\n\t\tthis.setValue(value||\"\");\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.inputPadding = $active.inputPadding;\r\n\t\tthis.defaults.point = !$active.popupNoPoint;\r\n\t},\r\n\tgetPopup: function(){\r\n\t\treturn $$(this._settings.popup);\r\n\t},\r\n\t_init_popup:function(){ \r\n\t\tconst obj = this._settings;\r\n\t\tif (obj.suggest)\r\n\t\t\tobj.popup = obj.suggest;\r\n\t\telse if (!obj.popup){\r\n\t\t\tconst timepicker = this._settings.timepicker;\r\n\t\t\tobj.popup = obj.suggest = this.suggest_setter({\r\n\t\t\t\ttype: \"calendar\",\r\n\t\t\t\tpoint: this._settings.point === false ? false : true,\r\n\t\t\t\tpadding: 0,\r\n\t\t\t\tbody: {\r\n\t\t\t\t\theight: 240 + (timepicker || this._settings.icons ? 30 : 0),\r\n\t\t\t\t\twidth: 250,\r\n\t\t\t\t\tmultiselect: this._settings.multiselect, \r\n\t\t\t\t\ttimepicker: timepicker,\r\n\t\t\t\t\ttype: this._settings.type,\r\n\t\t\t\t\ticons: this._settings.icons,\r\n\t\t\t\t\ttimeIcon: this._settings.timeIcon\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._init_once = function(){};\r\n\t},\r\n\t$render:function(obj){\r\n\t\tthis.$setValue(obj.value);\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tif (this._settings.multiselect){\r\n\t\t\tif (typeof value === \"string\")\r\n\t\t\t\tvalue = value.split(this._settings.separator);\r\n\t\t\telse if (value instanceof Date)\r\n\t\t\t\tvalue = [value];\r\n\t\t\telse if (!value)\r\n\t\t\t\tvalue = [];\r\n\r\n\t\t\tfor (let i = 0; i < value.length; i++)\r\n\t\t\t\tvalue[i] = this._prepareSingleValue(value[i]);\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn this._prepareSingleValue(value);\r\n\t},\r\n\t_prepareSingleValue:function(value){\r\n\t\tconst type = this._settings.type;\r\n\t\tconst timeMode = type == \"time\";\r\n\r\n\t\t//setValue(\"1980-12-25\")\r\n\t\tif(!isNaN(parseFloat(value)))\r\n\t\t\tvalue = \"\"+value;\r\n\r\n\t\tif (typeof value==\"string\" && value){\r\n\t\t\tlet formatDate = null;\r\n\t\t\tif((type == \"month\" || type == \"year\") && this._formatDate)\r\n\t\t\t\tformatDate = this._formatDate;\r\n\t\t\telse\r\n\t\t\t\tformatDate = (timeMode ? i18n.parseTimeFormatDate : i18n.parseFormatDate);\r\n\t\t\tvalue = formatDate(value);\r\n\t\t}\r\n\r\n\t\tif (value){\r\n\t\t\t//time mode\r\n\t\t\tif(timeMode){\r\n\t\t\t\t//setValue([16,24])\r\n\t\t\t\tif(isArray(value)){\r\n\t\t\t\t\tconst time = new Date();\r\n\t\t\t\t\ttime.setHours(value[0]);\r\n\t\t\t\t\ttime.setMinutes(value[1]);\r\n\t\t\t\t\tvalue = time;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//setValue(invalid date)\r\n\t\t\tif(isNaN(value.getTime()))\r\n\t\t\t\tvalue = \"\";\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_get_visible_text:function(value){\r\n\t\tif (this._settings.multiselect)\r\n\t\t\treturn []\r\n\t\t\t\t.concat(value)\r\n\t\t\t\t.map(a => this._get_visible_text_single(a))\r\n\t\t\t\t.join(this.config.separator);\r\n\t\telse\r\n\t\t\treturn this._get_visible_text_single(value);\r\n\t},\r\n\t_get_visible_text_single:function(value){\r\n\t\tlet formatStr = this._formatStr;\r\n\t\tif(!formatStr){\r\n\t\t\tif(this._settings.type == \"time\")\r\n\t\t\t\tformatStr = i18n.timeFormatStr;\r\n\t\t\telse if(this.config.timepicker)\r\n\t\t\t\tformatStr = i18n.fullDateFormatStr;\r\n\t\t\telse\r\n\t\t\t\tformatStr = i18n.dateFormatStr;\r\n\t\t}\r\n\t\treturn formatStr(value);\r\n\t},\r\n\t_set_visible_text:function(){\r\n\t\tconst node = this.getInputNode();\r\n\t\tif(isUndefined(node.value))\r\n\t\t\tnode.innerHTML = this._settings.text || this._get_div_placeholder();\r\n\t\telse\r\n\t\t\tnode.value = this._settings.text || \"\";\r\n\t},\r\n\t$compareValue:function(oldvalue, value){\r\n\t\tif(!oldvalue && !value) return true;\r\n\t\treturn wDate.equal(oldvalue, value);\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tthis._settings.text = (value?this._get_visible_text(value):\"\");\r\n\t\tthis._set_visible_text();\r\n\t},\r\n\tformat_setter:function(value){\r\n\t\tif(value){\r\n\t\t\tif (typeof value === \"function\")\r\n\t\t\t\tthis._formatStr = value;\r\n\t\t\telse {\r\n\t\t\t\tthis._formatStr = wDate.dateToStr(value);\r\n\t\t\t\tthis._formatDate = wDate.strToDate(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._formatStr = this._formatDate = null;\r\n\t\treturn value;\r\n\t},\r\n\tgetInputNode: function(){\r\n\t\treturn this._settings.editable ? this._dataobj.getElementsByTagName(\"input\")[0] : this._dataobj.getElementsByTagName(\"DIV\")[1];\r\n\t},\r\n\tgetValue:function(){\r\n\t\tif (this._settings.multiselect){\r\n\t\t\tconst value = this._settings.value;\r\n\t\t\tif (!value) return [];\r\n\r\n\t\t\tconst result = []\r\n\t\t\t\t.concat(value)\r\n\t\t\t\t.map(a => this._get_value_single(a));\r\n\r\n\t\t\tif (this._settings.stringResult)\r\n\t\t\t\treturn result.join(this._settings.separator);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\treturn this._get_value_single(this._settings.value);\r\n\t},\r\n\t_get_value_single:function(value){\r\n\t\tconst type = this._settings.type;\r\n\t\tconst timeMode = type == \"time\";\r\n\r\n\t\t//input was not rendered, we need to parse value from setValue method\r\n\t\tif (!this._rendered_input)\r\n\t\t\tvalue = this.$prepareValue(value) || null;\r\n\t\t//rendere and in edit mode\r\n\t\telse if (this._settings.editable){\r\n\t\t\tlet formatDate = this._formatDate;\r\n\t\t\tif(!formatDate){\r\n\t\t\t\tif(timeMode)\r\n\t\t\t\t\tformatDate = i18n.timeFormatDate;\r\n\t\t\t\telse if(this.config.timepicker)\r\n\t\t\t\t\tformatDate = i18n.fullDateFormatDate;\r\n\t\t\t\telse\r\n\t\t\t\t\tformatDate = i18n.dateFormatDate;\r\n\t\t\t}\r\n\t\t\tvalue = formatDate(this.getInputNode().value);\r\n\t\t}\r\n\r\n\t\t//return string from getValue\r\n\t\tif(this._settings.stringResult){\r\n\t\t\tlet formatStr = i18n.parseFormatStr;\r\n\t\t\tif(timeMode)\r\n\t\t\t\tformatStr = i18n.parseTimeFormatStr;\r\n\t\t\tif(this._formatStr && (type == \"month\" || type == \"year\")){\r\n\t\t\t\tformatStr = this._formatStr;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._settings.multiselect)\r\n\t\t\t\treturn [].concat(value).map(a => a ? formatStr(a) : \"\");\r\n\t\t\treturn (value?formatStr(value):\"\");\r\n\t\t}\r\n\r\n\t\treturn value||null;\r\n\t},\r\n\tgetText:function(){\r\n\t\tconst node = this.getInputNode();\r\n\t\tlet text = \"\";\r\n\t\tif(node)\r\n\t\t\ttext = isUndefined(node.value) ? node.innerHTML : node.value;\r\n\t\treturn text;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {uid} from \"../webix/helpers\";\r\n\r\nimport template from \"../webix/template\";\r\nimport HTMLOptions from \"../core/htmloptions\";\r\n\r\nimport button from \"../views/button\";\r\nimport text from \"../views/text\";\r\n\r\nconst api = {\r\n\tname:\"radio\",\r\n\tdefaults:{\r\n\t\ttemplate: function(config,common) {\r\n\t\t\tcommon._check_options(config.options);\r\n\r\n\t\t\tconst options = common._filterOptions(config.options);\r\n\t\t\tconst active = common._getFirstActive();\r\n\t\t\tlet id, eachid, isChecked, isDisabled, label, tooltip, customRadio, optlabel, rd, input, focusable;\r\n\t\t\tlet html = [];\r\n\r\n\t\t\tfor (let i=0; i < options.length; i++) {\r\n\t\t\t\teachid = \"x\"+uid();\r\n\t\t\t\tid = id || eachid;\r\n\r\n\t\t\t\tif  (i && (options[i].newline || config.vertical))\r\n\t\t\t\t\thtml.push(\"<div class='webix_line_break'></div>\");\r\n\r\n\t\t\t\tisChecked = (options[i].id == config.value);\r\n\t\t\t\tfocusable = isChecked || (!config.value && options[i].id === active);\r\n\t\t\t\tisDisabled = !!options[i].disabled;\r\n\t\t\t\tlabel = options[i].value || \"\";\r\n\t\t\t\ttooltip = config.tooltip ? \" webix_t_id='\"+options[i].id+\"'\" : \"\";\r\n\t\t\t\t\r\n\t\t\t\tcustomRadio = config.customRadio|| \"\";\r\n\t\t\t\tif (customRadio){\r\n\t\t\t\t\toptlabel = (i === 0 ? config.label+\" \" : \"\")+label;\r\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-label=')\\w*(?=')/, \"$1\"+template.escape(optlabel));\r\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-checked=')\\w*(?=')/, \"$1\"+(isChecked?\"true\":\"false\"));\r\n\t\t\t\t\tcustomRadio = customRadio.replace(/(tabindex=')\\w*(?=')/, \"$1\"+(!isDisabled && focusable?\"0\":\"-1\"));\r\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-invalid=')\\w*(?=')/, \"$1\"+(config.invalid?\"true\":\"false\"));\r\n\t\t\t\t\tcustomRadio = customRadio.replace(/(button_id=')\\w*(?=')/, \"$1\"+options[i].id);\r\n\t\t\t\t\tif (isDisabled)\r\n\t\t\t\t\t\tcustomRadio = customRadio.replace(\"role='radio'\", \"role='radio' webix_disabled='true'\");\r\n\t\t\t\t}\r\n\t\t\t\trd = common._baseInputHTML(\"input\")+\" name='\"+(config.name || config.id)+\"' type='radio' \"+(isChecked?\"checked='1'\":\"\")+\"tabindex=\"+(!isDisabled && focusable?\"0\":\"-1\")+\r\n\t\t\t\t\t\" value='\"+options[i].id+\"' id='\"+eachid+\"'\"+(isDisabled?\" disabled='true'\":\"\")+\" style='\"+(customRadio?\"display:none\":\"\")+\"' />\";\r\n\t\t\t\tinput = \"<div \"+/*@attr*/\"radio_id\"+\"='\"+options[i].id+\"' class='webix_inp_radio_border webix_radio_\"+(isChecked?\"1\":\"0\")+\"' role='presentation'>\"+rd+customRadio+\"</div>\";\r\n\r\n\t\t\t\tif (label)\r\n\t\t\t\t\tlabel = \"<label for='\"+eachid+\"' class='webix_label_right'>\" + label + \"</label>\";\r\n\r\n\t\t\t\thtml.push(\"<div class='webix_radio_option\"+(isDisabled?\" webix_disabled\":\"\")+\"' role='presentation'\"+tooltip+\">\"+input+label+\"</div>\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\thtml = \"<div class='webix_el_group' role='radiogroup' style='margin-left:\"+(config.label?config.labelWidth:0)+\"px;'>\"+html.join(\"\")+\"</div>\";\r\n\t\t\t\r\n\t\t\treturn common.$renderInput(config, html, id);\r\n\t\t}\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis.render();\r\n\t\tif (this._last_size && this.$getSize(0,0)[2] != this._last_size[1])\r\n\t\t\tthis.resize();\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tvar size = button.api.$getSize.call(this, dx, dy);\r\n\t\tvar options = this._filterOptions(this._settings.options);\r\n\t\tif (options){\r\n\t\t\tvar count = this._settings.vertical?0:1;\r\n\t\t\tfor (var i=0; i < options.length; i++)\r\n\t\t\t\tif (this._settings.vertical || options[i].newline)\r\n\t\t\t\t\tcount++;\r\n\t\t\tsize[3] = size[2] = Math.max(size[2], (this._settings.optionHeight||25) * count+this._settings.inputPadding*2+ (this._settings.labelPosition == \"top\"?this._labelTopHeight:0));\r\n\t\t}\r\n\t\tvar heightInc = this.config.bottomPadding;\r\n\t\tif(heightInc){\r\n\t\t\tsize[2] += heightInc;\r\n\t\t\tsize[3] += heightInc;\r\n\t\t}\r\n\t\treturn size;\r\n\t},\r\n\t_getInputNode: function(){\r\n\t\treturn this._dataobj.getElementsByTagName(this._settings.customRadio ? \"button\" : \"input\");\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tconst inp = this._dataobj.getElementsByTagName(\"input\");\r\n\t\tconst active = this._getFirstActive();\r\n\t\tlet id, option, focusable, parentNode, button;\r\n\r\n\t\tfor (let i=0; i < inp.length; i++){\r\n\t\t\tid = inp[i].parentNode.getAttribute(/*@attr*/\"radio_id\");\r\n\t\t\toption = this.getOption(id);\r\n\r\n\t\t\tinp[i].checked = (id == value);\r\n\t\t\tfocusable = option && !option.disabled && (inp[i].checked || (!value && option.id == active));\r\n\t\t\tinp[i].setAttribute(\"tabindex\", focusable?\"0\":\"-1\");\r\n\r\n\t\t\tparentNode = inp[i]?inp[i].parentNode:null;\r\n\t\t\tif (parentNode){\r\n\t\t\t\tparentNode.className = parentNode.className.replace(/(webix_radio_)\\d/,\"$1\"+(inp[i].checked?1:0));\r\n\t\t\t\tif (this._settings.customRadio){\r\n\t\t\t\t\tbutton = parentNode.getElementsByTagName(\"BUTTON\");\r\n\t\t\t\t\tif (button[0]){\r\n\t\t\t\t\t\tbutton[0].setAttribute(\"aria-checked\", inp[i].checked?\"true\":\"false\");\r\n\t\t\t\t\t\tbutton[0].setAttribute(\"tabindex\", focusable?\"0\":\"-1\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\tfocus: function(){ return this._focus(); },\r\n\tblur: function(){ this._blur(); },\r\n\tcustomRadio_setter: function(value){\r\n\t\tif(value === true && $active.customRadio)\r\n\t\t\tvalue = \"<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' \"+/*@attr*/\"button_id='' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>\";\r\n\t\treturn value;\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.customRadio = !!$active.customRadio;\r\n\t\tif ($active.optionHeight)\r\n\t\t\tthis.defaults.optionHeight = $active.optionHeight;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view, HTMLOptions);\r\nexport default {api, view};","import {protoUI, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {isUndefined, bind} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {preventEvent} from \"../webix/html\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"richselect\",\r\n\tdefaults:{\r\n\t\ttemplate:function(obj,common){\r\n\t\t\treturn common._render_div_block(obj, common);\r\n\t\t},\r\n\t\tpopupWidth:200,\r\n\t\ticon: \"wxi-menu-down\"\r\n\t},\r\n\t_onBlur:function(){\r\n\t\tconst text = this.getText();\r\n\t\tif (this._settings.text == text || (isUndefined(this._settings.text) && !text))\r\n\t\t\treturn;\r\n\r\n\t\tvar suggest = this.getPopup(),\r\n\t\t\tnodeValue = this.getInputNode().value,\r\n\t\t\tvalue = suggest.getSuggestion(nodeValue),\r\n\t\t\toldvalue = this.getValue();\r\n\r\n\t\t//non-empty value that differs from old value and matches filtering rule\r\n\t\tif (value && value !=oldvalue && !(nodeValue===\"\" && suggest.getItemText(value)!==\"\"))\r\n\t\t\tthis.setValue(value);\r\n\t\telse if (nodeValue === \"\")\r\n\t\t\tthis.setValue(\"\");\r\n\t\telse if (this._revertValue)\r\n\t\t\tthis._revertValue();\r\n\t},\r\n\tsuggest_setter:function(value){\r\n\t\treturn this.options_setter(value);\r\n\t},\r\n\toptions_setter:function(value){\r\n\t\tvalue = this._suggest_config ? this._suggest_config(value) : value;\r\n\t\tvar suggest = (this._settings.popup = this._settings.suggest = text.api.suggest_setter.call(this, value));\r\n\t\tvar list = $$(suggest).getList();\r\n\t\tif (list)\r\n\t\t\tlist.attachEvent(\"onAfterLoad\", bind(this._reset_value, this));\r\n\r\n\t\treturn suggest;\r\n\t},\r\n\tgetList: function(){\r\n\t\tvar suggest = $$(this._settings.suggest);\r\n\t\tassert(suggest, \"Input doesn't have a list\");\r\n\t\treturn suggest.getList();\r\n\t},\r\n\t_reset_value:function(){\r\n\t\tconst value = this._settings.value;\r\n\t\tconst text = this._settings.text;\r\n\r\n\t\t//this.getInputNode - check that input is already rendered, as in IE11 it can be destroy during parent repainting\r\n\t\tif(!isUndefined(value) && !this.getPopup().isVisible() && !text && this.getInputNode())\r\n\t\t\tthis.$setValue(value);\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.inputPadding = $active.inputPadding;\r\n\t},\r\n\t$render:function(obj){\r\n\t\tthis.$setValue(obj.value);\r\n\t},\r\n\tgetInputNode: function(){\r\n\t\treturn this._dataobj.getElementsByTagName(\"DIV\")[1];\r\n\t},\r\n\tgetPopup: function(){\r\n\t\treturn $$(this._settings.popup);\r\n\t},\r\n\tgetText:function(){\r\n\t\tvar value = this._settings.value,\r\n\t\t\tnode = this.getInputNode();\r\n\t\tif(!node)\r\n\t\t\treturn value?this.getPopup().getItemText(value):\"\";\r\n\t\tif (typeof node.value == \"undefined\"){\r\n\t\t\tif (node.firstChild && node.firstChild.className === \"webix_placeholder\")\r\n\t\t\t\treturn \"\";\r\n\t\t\treturn node.innerHTML;\r\n\t\t}\r\n\t\treturn node.value;\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tif (value && value.id)\r\n\t\t\treturn value;\t\t\t//don't convert new items\r\n\r\n\t\treturn text.api.$prepareValue.call(this, value);\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tlet text = value;\r\n\r\n\t\tconst popup = this.getPopup();\r\n\t\tif (popup)\r\n\t\t\ttext = popup.getItemText(value);\r\n\r\n\t\tif (value && value.id){ //add new value\r\n\t\t\tconst list = popup.getList();\r\n\t\t\tconst exists = list.exists(value.id);\r\n\r\n\t\t\t// add new item only when item with such id doesn't exists yet\r\n\t\t\tif (!exists) list.add(value);\r\n\r\n\t\t\ttext = popup.getItemText(value.id);\r\n\r\n\t\t\t// in case of dynamic list, we can't add extra items\r\n\t\t\t// to not interfere with dynamic loading\r\n\t\t\tif (list._settings.dynamic && !exists)\r\n\t\t\t\tlist.remove(value.id);\r\n\r\n\t\t\tthis._settings.value = this.$prepareValue(value.id);\r\n\t\t}\r\n\r\n\t\tconst node = this.getInputNode();\r\n\t\tif (isUndefined(node.value))\r\n\t\t\tnode.innerHTML = text || this._get_div_placeholder();\r\n\t\telse \r\n\t\t\tnode.value = text = text.replace(/<[^>]*>/g,\"\");\r\n\r\n\t\tthis._settings.text = text;\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value||\"\";\r\n\t},\r\n\t_ignoreLabelClick:function(ev){\r\n\t\tthis.focus();\r\n\t\tpreventEvent(ev);\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\n\r\nimport datepicker from \"./datepicker\";\r\n\r\n\r\nconst api = {\r\n\tname:\"colorpicker\",\r\n\t$init:function(){\r\n\t\tthis.$ready.push(this._init_popup);\r\n\t},\r\n\tdefaults:{\r\n\t\ticon:true\r\n\t},\r\n\t_init_popup:function(){\r\n\t\tvar obj = this._settings;\r\n\t\tif (obj.suggest)\r\n\t\t\tobj.popup = obj.suggest;\r\n\t\telse if (!obj.popup)\r\n\t\t\tobj.popup = obj.suggest = this.suggest_setter({\r\n\t\t\t\ttype:\"colorboard\", height:200\r\n\t\t\t});\r\n\t\tthis._init_once = function(){};\r\n\t},\r\n\tgetValue:function(){\r\n\t\tif (this._rendered_input && this._settings.editable)\r\n\t\t\treturn this.getInputNode().value;\r\n\t\telse\r\n\t\t\treturn this._settings.value;\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tvalue = value ? value.toString(16) : \"\";\r\n\t\tif (value && value.charAt(0) != \"#\" && /^[0-9a-fA-F]+$/.test(value))\r\n\t\t\tvalue = \"#\" + value;\r\n\t\treturn value;\r\n\t},\r\n\t_getColorNode: function(){\r\n\t\treturn this.$view.getElementsByTagName(\"DIV\")[this._settings.editable?1:2];\r\n\t},\r\n\t_get_visible_text:function(value){\r\n\t\treturn value;\r\n\t},\r\n\t$compareValue:function(oldvalue, value){\r\n\t\treturn oldvalue == value;\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tthis._getColorNode().style.backgroundColor = value;\r\n\t\tthis._settings.text = value;\r\n\r\n\t\tvar node = this.getInputNode();\r\n\t\tif(node.value == undefined)\r\n\t\t\tnode.innerHTML = value;\r\n\t\telse\r\n\t\t\tnode.value = value;\r\n\t},\r\n\t$renderIcon:function(){\r\n\t\tvar config = this.config;\r\n\t\treturn \"<div class=\\\"webix_input_icon\\\" style=\\\"background-color:\"+config.value+\";\\\"> </div>\";\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, datepicker.view);\r\nexport default {api, view};","import {addCss, removeCss} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {once, uid} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\nimport {$name} from \"../webix/skin\";\r\n\r\nimport HTMLOptions from \"../core/htmloptions\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"segmented\",\r\n\t$allowsClear:false,\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onChange\", function(value){\r\n\t\t\tif (this._settings.multiview)\r\n\t\t\t\tthis._show_view(value);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterRender\", once(function(){\r\n\t\t\tif (this._settings.multiview && this._settings.value)\r\n\t\t\t\tthis._show_view(this._settings.value);\r\n\t\t}));\r\n\t},\r\n\t_show_view:function(value){\r\n\t\tvar top = this.getTopParentView();\r\n\t\tvar view = null;\r\n\r\n\t\t//get from local isolate\r\n\t\tif (top && top.$$)\r\n\t\t\tview = top.$$(value);\r\n\t\t//or check globally\r\n\t\tif (!view)\r\n\t\t\tview = $$(value);\r\n\r\n\t\tif(view && view.show)\r\n\t\t\tview.show();\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tcommon._check_options(obj.options);\r\n\r\n\t\t\tconst options = common._filterOptions(obj.options);\r\n\t\t\tconst width = common._get_input_width(obj);\r\n\t\t\tconst borders = $name == \"contrast\" ? 0 : options.length - 1;\r\n\t\t\tconst optionWidth = obj.optionWidth || Math.floor((width-borders)/options.length);\r\n\t\t\t\r\n\t\t\tlet html = \"<div style='width:\"+width+\"px' class='webix_all_segments' role='tablist' aria-label='\"+template.escape(obj.label)+\"'>\";\r\n\t\t\tlet tooltip, isDisabled;\r\n\r\n\t\t\tif (!obj.value)\r\n\t\t\t\tobj.value = common._getFirstActive(true);\r\n\r\n\t\t\tfor (var i=0; i<options.length; i++){\r\n\t\t\t\tisDisabled = !!options[i].disabled;\r\n\t\t\t\ttooltip = obj.tooltip ? \" webix_t_id='\"+options[i].id+\"'\" : \"\";\r\n\t\t\t\thtml += \"<button type='button' style='width:\"+(options[i].width || optionWidth)+\"px' role='tab' aria-selected='\"+(obj.value==options[i].id?\"true\":\"false\")+\r\n\t\t\t\t\t\"' tabindex='\"+(!isDisabled && obj.value==options[i].id?\"0\":\"-1\")+\"' class='\"+\"webix_segment_\"+((i==options.length-1)?\"N\":(i>0?1:0))+((obj.value==options[i].id)?\" webix_selected\":\"\")+\r\n\t\t\t\t\t(isDisabled?\" webix_disabled\":\"\")+\"' \"+(isDisabled?\"webix_disabled='true' \":\"\")+/*@attr*/\"button_id='\"+options[i].id+\"'\"+tooltip+\">\"+options[i].value+\"</button>\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn common.$renderInput(obj, html+\"</div>\", uid());\r\n\t\t}\r\n\t},\r\n\t_getInputNode:function(){\r\n\t\treturn this.$view.getElementsByTagName(\"BUTTON\");\r\n\t},\r\n\tfocus: function(){ return this._focus(); },\r\n\tblur: function(){ this._blur(); },\r\n\t$setValue:function(value){\r\n\t\t//refresh tabbar if the option is in the popup list\r\n\t\tconst popup = this.config.tabbarPopup;\r\n\t\tif (popup && $$(popup) && $$(popup).getBody().exists(value))\r\n\t\t\treturn this.refresh();\r\n\r\n\t\tconst inputs = this._getInputNode();\r\n\t\tlet id, option;\r\n\r\n\t\tfor (let i=0; i<inputs.length; i++){\r\n\t\t\tid = inputs[i].getAttribute(/*@attr*/\"button_id\");\r\n\t\t\toption = this.getOption(id);\r\n\r\n\t\t\tinputs[i].setAttribute(\"aria-selected\", (value==id?\"true\":\"false\"));\r\n\t\t\tinputs[i].setAttribute(\"tabindex\", (option && !option.disabled && value==id?\"0\":\"-1\"));\r\n\t\t\tif (value == id)\r\n\t\t\t\taddCss(inputs[i], \"webix_selected\");\r\n\t\t\telse\r\n\t\t\t\tremoveCss(inputs[i], \"webix_selected\");\r\n\t\t}\r\n\t},\r\n\t$getValue:function(){\r\n\t\treturn this._settings.value||\"\";\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn null;\r\n\t},\r\n\t_set_inner_size:false\r\n};\r\n\r\nconst view = protoUI(api, text.view, HTMLOptions);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {isUndefined} from \"../webix/helpers\";\r\n\r\nimport richselect from \"./richselect\";\r\n\r\n\r\nconst api = {\r\n\tname:\"combo\",\r\n\tgetInputNode:function(){\r\n\t\treturn this._dataobj.getElementsByTagName(\"input\")[0];\r\n\t},\r\n\t_revertValue:function(){\r\n\t\tvar value = this.getValue();\r\n\t\tthis.$setValue(isUndefined(value)?\"\":value);\r\n\t},\r\n\t_applyChanges:function(){\r\n\t\tvar input = this.getInputNode(),\r\n\t\t\tvalue = \"\",\r\n\t\t\tsuggest =  this.getPopup();\r\n\r\n\t\tif (input.value){\r\n\t\t\tvalue = this._settings.value;\r\n\t\t\tif(suggest.getItemText(value) != this.getText())\r\n\t\t\t\tvalue = suggest.getSuggestion()||value;\r\n\t\t}\r\n\t\tif (value != this._settings.value)\r\n\t\t\tthis.setValue(value, true);\r\n\t\telse\r\n\t\t\tthis.$setValue(value);\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(config, common){\r\n\t\t\treturn common.$renderInput(config).replace(/(<input)\\s*(?=\\w)/, \"$1\"+\" role='combobox'\");\r\n\t\t},\r\n\t\ticon: \"wxi-menu-down\"\r\n\t},\r\n\ton_click:{\r\n\t\t\"webix_inp_label\": function(e){this._ignoreLabelClick(e);},\r\n\t\t\"webix_inp_top_label\": function(e){this._ignoreLabelClick(e);}\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, richselect.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {uid} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\nimport text from \"./text\";\r\nimport button from \"./button\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\n\r\n\r\nconst api = {\r\n\tname:\"counter\",\r\n\tdefaults:{\r\n\t\ttemplate:function(config, common){\r\n\t\t\tvar value = config.value;\r\n\r\n\t\t\tvar id = \"x\"+uid();\r\n\t\t\tvar html = \"<div role='spinbutton' aria-label='\"+template.escape(config.label)+\"' aria-valuemin='\"+config.min+\"' aria-valuemax='\"+config.max+\"' aria-valuenow='\"+config.value+\"' class='webix_el_group' style='width:\"+common._get_input_width(config)+\"px'>\";\r\n\t\t\thtml +=  \"<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='\"+i18n.aria.decreaseValue+\"'>-</button>\";\r\n\t\t\thtml += common._baseInputHTML(\"input\")+\" id='\"+id+\"' type='text' class='webix_inp_counter_value' aria-live='assertive'\"+\" value='\"+value+\"'></input>\";\r\n\t\t\thtml += \"<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='\"+i18n.aria.increaseValue+\"'>+</button></div>\";\r\n\t\t\treturn common.$renderInput(config, html, id);\r\n\t\t},\r\n\t\tmin:0,\r\n\t\tmax:Infinity,\r\n\t\tvalue:0,\r\n\t\tstep:1\r\n\t},\r\n\t$init:function(){\r\n\t\t_event(this.$view, \"keydown\", this._keyshift, {bind:this});\r\n\t},\r\n\t_keyshift:function(e){\r\n\t\tvar code = e.which || e.keyCode, c = this._settings, value = this.getValue();\r\n\r\n\t\tif(code>32 && code <41){\r\n\t\t\tif(code === 36) value = c.min;\r\n\t\t\telse if(code === 35) value = c.max === Infinity? 1000000 :c.max;\r\n\t\t\telse if(code === 33) this.next();\r\n\t\t\telse if(code === 34) this.prev();\r\n\t\t\telse value = value+(code === 37 || code ===40?-1:1);\r\n\r\n\t\t\tif(code>34 && value>=c.min && value<=c.max)\r\n\t\t\t\tthis.setValue(value);\r\n\t\t}\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tthis.getInputNode().value = value;\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tvalue = parseFloat(value);\r\n\r\n\t\tconst min = this._settings.min;\r\n\t\tconst max = this._settings.max;\r\n\r\n\t\tif(isNaN(value))\r\n\t\t\tvalue = isFinite(min) ? min : 0;\r\n\r\n\t\treturn Math.min(Math.max(value, min), max);\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn this._dataobj.getElementsByTagName(\"input\")[0];\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn  button.api.getValue.apply(this,arguments)*1;\r\n\t},\r\n\tnext:function(step){\r\n\t\tstep = 1*( step || this._settings.step );\r\n\t\tthis.shift(step);\r\n\t},\r\n\tprev:function(step){\r\n\t\tstep = (-1)*( step || this._settings.step );\r\n\t\tthis.shift(step);\r\n\t},\r\n\tshift:function(step){\r\n\t\t//round values to fix math precision issue in JS\r\n\t\tconst new_value = Math.round((this.getValue() + step)*100000)/100000;\r\n\t\tthis.setValue(new_value);\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport button from \"./button\";\r\n\r\n\r\nconst api = {\r\n\tname:\"icon\",\r\n\t$skin:function(){\r\n\t\tbutton.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.height = $active.inputHeight;\r\n\t\tthis.defaults.width = $active.inputHeight;\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, view){\r\n\t\t\tlet min = Math.min(obj.awidth, obj.aheight);\r\n\t\t\tlet top = Math.round((view._content_height-obj.aheight)/2);\r\n\t\t\tlet inner = \"<button type='button' style='height:\"+min+\"px;width:\"+min+\"px;' class='webix_icon_button'>\"+\r\n                \"<span class='webix_icon \"+obj.icon+\"'></span></button>\";\r\n\r\n\t\t\treturn \"<div class='webix_el_box' style='width:\"+obj.awidth+\"px;height:\"+obj.aheight+\"px;line-height:\"+obj.aheight+\r\n\t\t\t\t\"px;margin-top:\"+top+\"px'>\"+inner+(obj.badge||obj.badge===0 ? \"<span class='webix_badge'>\"+obj.badge+\"</span>\":\"\")+\r\n\t\t\t\t\"</div>\";\r\n\t\t}\r\n\t},\r\n\t_set_inner_size:false,\r\n\t_set_default_css:function(){},\r\n\t$setValue:function(){}\r\n};\r\n\r\nconst view = protoUI(api, button.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"search\",\r\n\ton_click:{\r\n\t\t\"webix_input_icon\":function(e){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t\tthis.callEvent(\"onSearchIconClick\", [e]);\r\n\t\t}\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.inputPadding = $active.inputPadding;\r\n\t},\r\n\tdefaults:{\r\n\t\ttype:\"text\",\r\n\t\ticon:\"wxi-search\"\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport PagingAbility from \"../core/pagingability\";\r\nimport DataMarks from \"../core/datamarks\";\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport ValidateCollection from \"../core/validatecollection\";\r\nimport RenderStack from \"../core/renderstack\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport Settings from \"../core/settings\";\r\n\r\nimport {protoUI} from \"../ui/core\";\r\nimport {bind} from \"../webix/helpers\";\r\n\r\nconst api = {\r\n\tname:\"proto\",\r\n\t$init:function(){\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tthis._dataobj = this._dataobj || this._contentobj;\r\n\t\t\r\n\t\t//render self , each time when data is updated\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\",bind(function(){\r\n\t\t\tthis.render.apply(this,arguments);\r\n\t\t},this));\r\n\t},\r\n\t$setSize:function(){\r\n\t\tif (base.api.$setSize.apply(this, arguments))\r\n\t\t\tthis.render();\r\n\t},\r\n\t_id:/*@attr*/\"webix_item\",\r\n\ton_mouse_move:{\r\n\t},\r\n\ttype:{}\r\n};\r\n\r\n\r\nconst view = protoUI(api, PagingAbility, DataMarks, AutoTooltip, ValidateCollection, RenderStack, DataLoader, base.view, EventSystem, Settings);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {uid} from \"../webix/helpers\";\r\n\r\nimport text from \"./text\";\r\n\r\n\r\nconst api = {\r\n\tname:\"textarea\",\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){ \r\n\t\t\tvar name = obj.name || obj.id;\r\n\t\t\tvar id = \"x\"+uid();\r\n\r\n\t\t\tvar html = common._baseInputHTML(\"textarea\")+\"style='width:\"+common._get_input_width(obj)+\"px;'\";\r\n\t\t\thtml +=\" id='\"+id+\"' name='\"+name+\"' class='webix_inp_textarea'>\"+common._pattern(obj.value)+\"</textarea>\";\r\n\r\n\t\t\treturn common.$renderInput(obj, html, id);\r\n\t\t},\r\n\t\tminHeight:60\r\n\t},\r\n\t$skin:function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.height = 0;\r\n\t},\r\n\t_skipSubmit: true,\r\n\t_getLabelHeight:function(top){\r\n\t\treturn top ? this._labelTopHeight-this._settings.inputPadding : \"\";\r\n\t},\r\n\t//get input element\r\n\tgetInputNode: function() {\r\n\t\treturn this._dataobj.getElementsByTagName(\"textarea\")[0];\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import {addCss, removeCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\nimport button from \"./button\";\r\n\r\n\r\nconst api = {\r\n\tname:\"toggle\",\r\n\t$allowsClear:true,\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onItemClick\", function(){\r\n\t\t\tthis.toggle();\r\n\t\t});\r\n\t},\r\n\t$renderInput:function(obj){\r\n\t\treturn \"<button type='button' \"+(obj.popup?\"aria-haspopup='true'\":\"\")+\" class='webix_button'>\"+obj.label+\"</button>\";\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tconst input = this.getInputNode();\r\n\t\tconst obj = this._settings;\r\n\t\tconst isPressed = (value && value != \"0\");\r\n\t\tconst text = (isPressed ? obj.onLabel : obj.offLabel) || obj.label;\r\n\r\n\t\tconst children = input.children;\r\n\r\n\t\t//icon or image button\r\n\t\tif(this._types[obj.type]){\r\n\t\t\tconst icon = children[0];\r\n\r\n\t\t\tif(icon.nodeName == \"SPAN\" && obj.onIcon && obj.offIcon && obj.onIcon != obj.offIcon)\r\n\t\t\t\ticon.className = icon.className.replace((isPressed?obj.offIcon:obj.onIcon), (isPressed?obj.onIcon:obj.offIcon));\r\n\r\n\t\t\tif(obj.type == \"imageTop\" || obj.type == \"iconTop\")\r\n\t\t\t\tchildren[1].innerHTML = text;\r\n\t\t\telse{\r\n\t\t\t\tinput.innerHTML = text;\r\n\t\t\t\tinput.insertBefore(icon, input.firstChild);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tinput.innerHTML = text;\r\n\r\n\t\tinput.setAttribute(\"aria-pressed\", isPressed?\"true\":\"false\");\r\n\r\n\t\tconst changeCss = isPressed ? addCss : removeCss;\r\n\t\tchangeCss(input.parentNode, \"webix_pressed\");\r\n\t},\r\n\ttoggle:function(){\r\n\t\tthis.setValue(!this.getValue());\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar value = this._settings.value;\r\n\t\treturn  (!value||value==\"0\")?0:1;\r\n\t},\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tvar isPressed = (obj.value && obj.value != \"0\");\r\n\t\t\tvar css = isPressed ? \" webix_pressed\" : \"\";\r\n\r\n\t\t\tobj.label = (isPressed ? obj.onLabel : obj.offLabel) || obj.label;\r\n\t\t\tobj.icon = (isPressed ? obj.onIcon : obj.offIcon) || obj.icon;\r\n\r\n\t\t\tvar html =  \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+common.$renderInput(obj, common)+\"</div>\";\r\n\t\t\thtml = html.replace(/(button)\\s*(?=\\w)/, \"$1\"+(\" aria-pressed='\"+(isPressed?\"true\":\"false\")+\"' \"));\r\n\t\t\tif (obj.badge||obj.badge===0)\r\n\t\t\t\thtml = html.replace(/<\\/div>$/, \"<span class='webix_badge'>\"+obj.badge+\"</span></div>\");\r\n\r\n\t\t\treturn html;\r\n\t\t}\r\n\t},\r\n\t_set_inner_size:false\r\n};\r\n\r\n\r\nconst view = protoUI(api, button.view);\r\nexport default {api, view};","import text from \"../views/text\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {extend, _to_array} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"multitext\",\r\n\t$cssName:\"text\",\r\n\tdefaults:{\r\n\t\ticon:\"wxi-plus-circle\",\r\n\t\ticonWidth:25,\r\n\t\tseparator:\", \"\r\n\t},\r\n\tgetValueHere:function(){\r\n\t\treturn text.api.getValue.call(this);\r\n\t},\r\n\tsetValueHere:function(value){\r\n\t\treturn text.api.$setValue.call(this, value);\r\n\t},\r\n\tgetValue:function(){\r\n\t\tif (this.config.mode == \"extra\") return this.getValueHere();\r\n\r\n\t\tif (this._full_value) \r\n\t\t\treturn this._full_value;\r\n\r\n\t\tvar values = [ this.getValueHere(this) ];\r\n\t\tfor (var i=0; i<this._subs.length; i++){\r\n\t\t\tvar seg = $$(this._subs[i]).getValueHere();\r\n\t\t\tif (seg) values.push(seg);\r\n\t\t}\r\n\t\treturn values.join(this.config.separator);\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tvalue = value || \"\";\r\n\r\n\t\tif (this.config.mode == \"extra\") return this.setValueHere(value);\r\n\r\n\t\tthis._full_value = value;\r\n\t\tvar parts = value.split(this.config.separator);\r\n\t\tif (parts.length == this._subs.length+1){\r\n\t\t\tthis.setValueHere(parts[0]);\r\n\t\t\tfor (let i = 0; i < this._subs.length; i++)\r\n\t\t\t\t$$(this._subs[i]).setValueHere(parts[i+1]);\r\n\r\n\t\t\tthis._full_value = \"\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.removeSection();\r\n\t\tthis.setValueHere.call(this, parts[0]);\r\n\t\tfor (let i = 1; i<parts.length; i++){\r\n\t\t\tthis.addSection(parts[i]);\r\n\t\t}\r\n\t\tthis._full_value = \"\";\r\n\t},\r\n\t_subOnChange:function(){\r\n\t\tvar parent = this.config.master ? $$(this.config.master) : this;\r\n\t\tvar newvalue = parent.getValue();\r\n\t\tvar oldvalue = parent._settings.value;\r\n\t\tif (newvalue !== oldvalue){\r\n\t\t\tparent._settings.value = newvalue;\r\n\t\t\tparent.callEvent(\"onChange\", [newvalue, oldvalue]);\r\n\t\t}\r\n\t},\r\n\taddSection:function(text){\r\n\t\tvar config = this.config,\r\n\t\t\tnewConfig = {\r\n\t\t\t\tlabelWidth: config.labelWidth,\r\n\t\t\t\tinputWidth: config.inputWidth,\r\n\t\t\t\twidth: config.width,\r\n\t\t\t\tlabel: config.label ? \"&nbsp;\" : \"\",\r\n\t\t\t\tview: this.name,\r\n\t\t\t\tmode: \"extra\",\r\n\t\t\t\tvalue: text || \"\",\r\n\t\t\t\ticon: \"wxi-minus-circle\",\r\n\t\t\t\ttooltip: config.tooltip,\r\n\t\t\t\tsuggest: config.suggest || null,\r\n\t\t\t\tmaster: config.id\r\n\t\t\t};\r\n\r\n\t\textend(newConfig, config.subConfig||{},true);\r\n\r\n\t\tvar newone = this.getParentView().addView(newConfig);\r\n\t\t$$(newone).attachEvent(\"onChange\", this._subOnChange);\r\n\r\n\t\tthis._subs.push(newone);\r\n\t\tthis.callEvent(\"onSectionAdd\", [newone, this._subs.length]);\r\n\t\treturn newone;\r\n\t},\r\n\tremoveSection:function(id){\r\n\t\tvar parent = this.config.master ? $$(this.config.master) : this;\r\n\t\tfor (var i = parent._subs.length - 1; i >= 0; i--){\r\n\t\t\tvar section = parent._subs[i];\r\n\t\t\tif (!id || section == id){\r\n\t\t\t\tparent._subs.removeAt(i);\r\n\t\t\t\tthis.getParentView().removeView(section);\r\n\t\t\t\tparent.callEvent(\"onSectionRemove\", [section, i+1]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ton_click:{\r\n\t\t\"webix_input_icon\":function(){\r\n\t\t\tif (this.config.mode == \"extra\"){\r\n\t\t\t\tthis.removeSection(this.config.id);\r\n\t\t\t\tvar childs = this.getParentView().getChildViews();\r\n\t\t\t\tchilds[childs.length - 1].focus();\r\n\t\t\t\tthis._subOnChange();\r\n\t\t\t} else\r\n\t\t\t\t$$( this.addSection() ).focus();\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._subs = _to_array([]);\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t},\r\n\t$render:function(obj){\r\n\t\tthis.$setValue(obj.value);\r\n\t},\r\n};\r\n\r\n\r\nconst view = protoUI(api,  text.view);\r\nexport default {api, view};","import {addCss, createCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {bind, extend, isArray} from \"../webix/helpers\";\r\nimport template from \"../webix/template\";\r\n\r\nimport env from \"../webix/env\";\r\n\r\nimport base from \"../views/view\";\r\nimport proto from \"../views/proto\";\r\nimport VRenderStack from \"../core/vrenderstack\";\r\nimport CustomPrint from \"../core/customprint\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport DataMove from \"../core/datamove\";\r\nimport DragItem from \"../core/dragitem\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport SelectionModel from \"../core/selectionmodel\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport CopyPaste from \"../core/copypaste\";\r\n\r\nconst api = {\r\n\tname:\"list\",\r\n\t_listClassName : \"webix_list\",\r\n\t_itemClassName:\"webix_list_item\",\r\n\t$init:function(config){\r\n\t\taddCss(this._viewobj, this._listClassName + (((config.layout||this.defaults.layout) == \"x\")?\"-x\":\"\") );\r\n\t\tthis.data.provideApi(this,true);\r\n\r\n\t\tthis._auto_resize = bind(this._auto_resize, this);\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", this._auto_resize);\r\n\t\tthis.data.attachEvent(\"onSyncApply\", this._auto_resize);\r\n\r\n\t\tthis._viewobj.setAttribute(\"role\", \"listbox\");\r\n\t},\r\n\tdynamic_setter:function(value){\r\n\t\tif (value)\r\n\t\t\textend(this, VRenderStack, true);\r\n\t\treturn value;\r\n\t},\r\n\t$dragHTML:function(obj,e,context){\r\n\t\tlet html;\r\n\t\tif (this._settings.layout == \"y\" && this.type.width == \"auto\"){\r\n\t\t\tthis.type.width = this._content_width;\r\n\t\t\thtml = this._toHTML(obj);\r\n\t\t\tthis.type.width = \"auto\";\r\n\t\t} else html = this._toHTML(obj);\r\n\r\n\t\tif ( isArray(context.source) && context.source.length > 1 )\r\n\t\t\thtml = this._toMultipleHTML(html, context.source.length);\r\n\t\treturn html;\r\n\t},\r\n\tdefaults:{\r\n\t\tselect:false,\r\n\t\tscroll:true,\r\n\t\tlayout:\"y\",\r\n\t\tnavigation:true,\r\n\t\tdatafetch:50\r\n\t},\r\n\t_id:/*@attr*/\"webix_l_id\",\r\n\ton_click:{\r\n\t\twebix_list_item:function(e,id){\r\n\t\t\tif (this._settings.select){\r\n\t\t\t\tthis._no_animation = true;\r\n\t\t\t\tif (this._settings.select==\"multiselect\"  || this._settings.multiselect)\r\n\t\t\t\t\tthis.select(id, false, (e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\")), e.shiftKey); \t//multiselection\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.select(id);\r\n\t\t\t\tthis._no_animation = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t},\r\n\tgetVisibleCount:function(){\r\n\t\treturn Math.floor(this._content_height / this._one_height());\r\n\t},\r\n\t_auto_resize:function(){\r\n\t\tconst c = this._settings;\r\n\t\tif (c.autoheight || c.autowidth)\r\n\t\t\treturn this.resize();\r\n\r\n\t\tif (c.layout == \"y\"){\r\n\t\t\tif (c.yCount) this._auto_height_calc(c.yCount);\r\n\t\t} else {\r\n\t\t\tif (c.xCount) this._auto_width_calc(c.xCount);\r\n\t\t}\r\n\t},\r\n\t_auto_height_calc:function(count){\r\n\t\tvar value = this.data.$pagesize||this.count();\r\n\r\n\t\tthis._onoff_scroll(count && count < value, \"y\");\r\n\t\tif (this._settings.autoheight && value < (count||Infinity) ) \r\n\t\t\tcount = value;\r\n\t\tvar height = this._one_height() * count + (this.type.margin||0);\r\n\t\t//unitlist\r\n\t\tif(this.getUnits)\r\n\t\t\theight += this.getUnits().length*this.type.headerHeight;\r\n\r\n\t\treturn Math.max(height,this._settings.minHeight||0);\r\n\t},\r\n\t_one_height:function(){\r\n\t\treturn this.type.height + (this.type.margin||0);\r\n\t},\r\n\t_auto_width_calc:function(count){\r\n\t\tvar value = this.data.$pagesize||this.count();\r\n\r\n\t\tthis._onoff_scroll(count && count < value, \"x\");\r\n\t\tif (this._settings.autowidth && value < (count||Infinity) ) \r\n\t\t\tcount = value;\r\n\r\n\t\treturn (this.type.width * count); \r\n\t},\r\n\t$getSize:function(dx,dy){\r\n\t\tif (this._settings.layout == \"y\"){\r\n\t\t\tif (this.type.width!=\"auto\")\r\n\t\t\t\tthis._settings.width = this.type.width + (this._scroll_y?env.scrollSize:0);\r\n\t\t\tif (this._settings.yCount || this._settings.autoheight)\r\n\t\t\t\tthis._settings.height = this._auto_height_calc(this._settings.yCount)||1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.type.height!=\"auto\")\r\n\t\t\t\tthis._settings.height = this._one_height() + (this._scroll_x?env.scrollSize:0);\r\n\t\t\tif (this._settings.xCount || this._settings.autowidth)\r\n\t\t\t\tthis._settings.width = this._auto_width_calc(this._settings.xCount)||1;\r\n\t\t}\r\n\t\treturn base.api.$getSize.call(this, dx, dy);\r\n\t},\r\n\t$setSize:function(){\r\n\t\tbase.api.$setSize.apply(this, arguments);\r\n\t},\r\n\ttype:{\r\n\t\tcss:\"\",\r\n\t\twidthSize:function(obj, common){\r\n\t\t\treturn common.width+(common.width>-1?\"px\":\"\");\r\n\t\t},\r\n\t\theightSize:function(obj, common){\r\n\t\t\treturn common.height+(common.height>-1?\"px\":\"\");\r\n\t\t},\r\n\t\tclassname:function(obj, common, marks){\r\n\t\t\tvar css = \"webix_list_item\";\r\n\r\n\t\t\tif (common.css) css += \" \"+common.css;\r\n\t\t\tif (obj.disabled) css += \" webix_disabled\";\r\n\t\t\tif (obj.$css){\r\n\t\t\t\tif (typeof obj.$css == \"object\")\r\n\t\t\t\t\tobj.$css = createCss(obj.$css);\r\n\t\t\t\tcss += \" \"+obj.$css;\r\n\t\t\t}\r\n\t\t\tif (marks && marks.$css)\r\n\t\t\t\tcss += \" \"+marks.$css;\r\n\r\n\t\t\treturn css;\r\n\t\t},\r\n\t\taria:function(obj, common, marks){\r\n\t\t\treturn \"role=\\\"option\\\"\"+(marks && marks.webix_selected?\" aria-selected=\\\"true\\\" tabindex=\\\"0\\\"\":\" tabindex=\\\"-1\\\"\")+(obj.$count && obj.$template?\"aria-expanded=\\\"true\\\"\":\"\")+\r\n\t\t\t\t(obj.disabled?\" aria-disabled=\\\"true\\\" webix_disabled=\\\"true\\\"\":\"\");\r\n\t\t},\r\n\t\ttemplate:function(obj){\r\n\t\t\treturn (obj.icon?(\"<span class='webix_list_icon webix_icon \"+obj.icon+\"'></span>\"):\"\") + obj.value + (obj.badge||obj.badge===0?(\"<div class='webix_badge'>\"+obj.badge+\"</div>\"):\"\");\r\n\t\t},\r\n\t\twidth:\"auto\",\r\n\t\ttemplateStart:template(\"<div \"+/*@attr*/\"webix_l_id\"+\"=\\\"#id#\\\" class=\\\"{common.classname()}\\\" style=\\\"width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;\\\" {common.aria()}>\"),\r\n\t\ttemplateEnd:template(\"</div>\")\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.type.height = $active.listItemHeight;\r\n\t},\r\n\tdisableItem:function(id){\r\n\t\tthis._set_item_disabled(id, true);\r\n\t},\r\n\tenableItem:function(id){\r\n\t\tthis._set_item_disabled(id, false);\r\n\t},\r\n\t_set_item_disabled(id, state){\r\n\t\tconst item = this.getItem(id);\r\n\t\tif (item){\r\n\t\t\titem.disabled = state;\r\n\t\t\tthis.refresh(id);\r\n\t\t}\r\n\t},\r\n\tisItemEnabled:function(id){\r\n\t\tconst item = this.getItem(id);\r\n\t\treturn item && !item.disabled;\r\n\t},\r\n\t_skip_item:function(id, prev, dir){\r\n\t\tif (!this.isItemEnabled(id)){\r\n\t\t\tid = this.getNextId(id, dir) || null;\r\n\t\t\treturn (id && id != prev)? this._skip_item(id, prev, dir) : prev;\r\n\t\t}\r\n\t\treturn id;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  CustomPrint, KeysNavigation, DataMove, DragItem, MouseEvents, SelectionModel, Scrollable, proto.view, CopyPaste);\r\nexport default {api, view};","import richselect from \"../views/richselect\";\r\nimport list from \"../views/list\";\r\n\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport {isArray, extend} from \"../webix/helpers\";\r\n\r\nimport type from \"../webix/type\";\r\nimport template from \"../webix/template\";\r\nimport editors from \"../webix/editors\";\r\n\r\nconst api = {\r\n\tname:\"multiselect\",\r\n\t$cssName:\"richselect\",\r\n\tdefaults:{\r\n\t\tseparator:\",\"\r\n\t},\r\n\t_suggest_config:function(value){\r\n\t\tvar isobj = !isArray(value) && typeof value == \"object\" && !value.name; \r\n\t\tvar suggest = { view:\"checksuggest\", separator:this.config.separator, buttonText: this.config.buttonText, button: this.config.button };\r\n\r\n\t\tif (this._settings.optionWidth)\r\n\t\t\tsuggest.width = this._settings.optionWidth;\r\n\t\telse\r\n\t\t\tsuggest.fitMaster = true;\r\n\r\n\t\tif (isobj)\r\n\t\t\textend(suggest, value, true);\r\n\r\n\t\tvar view = ui(suggest);\r\n\t\tvar list = view.getList();\r\n\t\tif (typeof value == \"string\")\r\n\t\t\tlist.load(value);\r\n\t\telse if (!isobj)\r\n\t\t\tlist.parse(value);\r\n\r\n\t\tview.attachEvent(\"onShow\",function(){\r\n\t\t\tview.setValue($$(view._settings.master).config.value);\r\n\t\t});\r\n\r\n\t\treturn view;\r\n\t},\r\n\r\n\t$setValue:function(value){\r\n\t\tif (!this._rendered_input) return;\r\n\t\tvar popup = this.getPopup();\r\n\t\tvar text = \"\";\r\n\t\tif(popup){\r\n\t\t\ttext = popup.setValue(value);\r\n\t\t\tif(typeof text == \"object\"){\r\n\t\t\t\ttext = text.join(this.config.separator+\" \");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis._settings.text = text;\r\n\r\n\t\tvar node = this.getInputNode();\r\n\t\tnode.innerHTML = text || this._get_div_placeholder();\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value||\"\";\r\n\t},\r\n};\r\n\r\neditors.multiselect = extend({\r\n\tpopupType:\"multiselect\"\r\n}, editors.richselect);\r\n\r\ntype(list.view, {\r\n\tname:\"multilist\",\r\n\ttemplateStart:template(\"<div \"+/*@attr*/\"webix_l_id\"+\"=\\\"#!id#\\\" class=\\\"{common.classname()}\\\" style=\\\"width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;\\\" {common.aria()}>\")\r\n}, \"default\");\r\n\r\ntype(list.view, {\r\n\tname:\"checklist\",\r\n\ttemplateStart:template(\"<div \"+/*@attr*/\"webix_l_id\"+\"=\\\"#!id#\\\" {common.aria()} class=\\\"{common.classname()}\\\" style=\\\"width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden; white-space:nowrap;\\\">{common.checkbox()}\"),\r\n\tcheckbox: function(obj){\r\n\t\tvar icon = (obj.$checked ? \"wxi-checkbox-marked\" : \"wxi-checkbox-blank\");\r\n\t\treturn \"<span role='checkbox' tabindex='-1' aria-checked='\"+(obj.$checked?\"true\":\"false\")+\"' class='webix_icon \"+icon+\"'></span>\";\r\n\t},\r\n\taria:function(obj){\r\n\t\treturn \"role='option' tabindex='-1' \"+(obj.$checked?\"aria-selected='true'\":\"\");\r\n\t},\r\n\ttemplate: template(\"#value#\")\r\n}, \"default\");\r\n\r\nconst view = protoUI(api,  richselect.view);\r\nexport default {api, view};","import richselect from \"../views/richselect\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {_to_array as toArray, copy, isArray, extend, uid, delay, isUndefined} from \"../webix/helpers\";\r\nimport popup from \"../views/popup\";\r\nimport base from \"../views/view\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\nconst api = {\r\n\tname:\"multicombo\",\r\n\t$cssName:\"text\",\r\n\tdefaults:{\r\n\t\tkeepText: false,\r\n\t\tseparator:\",\",\r\n\t\ticon: false,\r\n\t\ticonWidth: 0,\r\n\t\ttagMode: true,\r\n\t\ttagTemplate: function(values){\r\n\t\t\treturn (values.length?values.length+\" item(s)\":\"\");\r\n\t\t},\r\n\t\ttemplate:function(obj,common){\r\n\t\t\treturn common._render_value_block(obj, common);\r\n\t\t}\r\n\t},\r\n\t$init:function(){\r\n\t\tthis.$view.className += \" webix_multicombo\";\r\n\r\n\t\tthis.attachEvent(\"onBeforeRender\",function(){\r\n\t\t\tif(!this._inputHeight)\r\n\t\t\t\tthis._inputHeight = $active.inputHeight;\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterRender\", function(){\r\n\t\t\tthis._last_size = null;\r\n\t\t});\r\n\t},\r\n\r\n\ton_click: {\r\n\t\t\"webix_multicombo_delete\": function(e,view,node){\r\n\t\t\tvar value;\r\n\t\t\tif(!this._settings.readonly && node && (value = node.parentNode.getAttribute(\"optvalue\")))\r\n\t\t\t\tthis._removeValue(value);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t\"webix_inp_label\": function(e){this._ignoreLabelClick(e);},\r\n\t\t\"webix_inp_top_label\": function(e){this._ignoreLabelClick(e);}\r\n\t},\r\n\t_onBlur:function(){\r\n\t\tvar value = this.getInputNode().value;\r\n\t\t//blurring caused by clicks in the suggest list cannot affect new values\r\n\t\tif(value && this._settings.newValues && new Date()-(this.getPopup()._click_stamp ||0)>100){\r\n\t\t\tthis._addNewValue(value);\r\n\t\t}\r\n\r\n\t\tif (!this._settings.keepText)\r\n\t\t\tthis._inputValue = \"\";\r\n\t\tthis.refresh();\r\n\t},\r\n\t_removeValue: function(value){\r\n\t\tvar values = this._settings.value;\r\n\t\tvar suggest = $$(this.config.suggest);\r\n\t\tif(typeof values == \"string\")\r\n\t\t\tvalues = values.split(this._settings.separator);\r\n\t\tvalues = toArray(copy(values));\r\n\t\tvalues.remove(value);\r\n\r\n\t\tthis.setValue(values.join(this._settings.separator));\r\n\t\tif(suggest && suggest._settings.selectAll) {\r\n\t\t\tsuggest.getBody()._cells[0].setValue(0);\r\n\t\t}\r\n\t},\r\n\t_addValue: function(newValue){\r\n\t\tvar suggest = $$(this.config.suggest);\r\n\t\tvar list = suggest.getList();\r\n\t\tvar item = list.getItem(newValue);\r\n\r\n\t\tif(item){\r\n\t\t\tvar values = suggest.getValue();\r\n\t\t\tif(values && typeof values == \"string\")\r\n\t\t\t\tvalues = values.split(suggest.config.separator);\r\n\t\t\tvalues = toArray(values||[]);\r\n\t\t\tif(values.find(newValue)<0){\r\n\t\t\t\tvalues.push(newValue);\r\n\t\t\t\tsuggest.setValue(values);\r\n\t\t\t\tthis.setValue(suggest.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_addNewValue: function(value){\r\n\t\tvar suggest = $$(this.config.suggest);\r\n\t\tvar list = suggest.getList();\r\n\t\tvar id;\r\n\t\tvalue = value.replace(/^\\s+|\\s+$/g,\"\");\r\n\r\n\t\tif(value){\r\n\t\t\tfor(var i in list.data.pull)\r\n\t\t\t\tif(suggest.getItemText(i) == value) id = i;\r\n\t\t}\r\n\r\n\t\tif(!id && value) id = list.add({id: value, value: value});\r\n\r\n\t\tthis._addValue(id);\r\n\t},\r\n\t_suggest_config:function(value){\r\n\t\tvar isObj = !isArray(value) && typeof value == \"object\" && !value.name,\r\n\t\t\tsuggest = { view:\"checksuggest\", separator:this.config.separator, buttonText: this.config.buttonText, button: this.config.button },\r\n\t\t\tcombo = this;\r\n\t\t\r\n\t\tif (isObj){\r\n\t\t\textend(suggest, value, true);\r\n\t\t}\r\n\t\tif (!suggest.width && this._settings.optionWidth){\r\n\t\t\textend(suggest, {width:this._settings.optionWidth, fitMaster: false}, true);\r\n\t\t}\r\n\t\tsuggest.width = suggest.fitMaster || isUndefined(suggest.fitMaster) ? 0 : suggest.width;\r\n\r\n\t\tvar view = ui(suggest);\r\n\t\tif(!suggest.width)\r\n\t\t\tview.$customWidth = function(){\r\n\t\t\t\tthis.config.width = combo._get_input_width(combo._settings);\r\n\t\t\t};\r\n\t\tview.attachEvent(\"onBeforeShow\",function(node,mode, point){\r\n\t\t\tif(this._settings.master){\r\n\t\t\t\tthis.setValue($$(this._settings.master).config.value);\r\n\r\n\t\t\t\tif($$(this._settings.master).getInputNode().value || this.isVisible()){\r\n\t\t\t\t\tthis.getList().refresh();\r\n\t\t\t\t\tthis._dont_unfilter = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.getList().filter();\r\n\r\n\t\t\t\tif(node.tagName && node.tagName.toLowerCase() == \"input\"){\r\n\t\t\t\t\tpopup.api.show.apply(this, [node.parentNode,mode, point]);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tvar list = view.getList();\r\n\t\tif (typeof value == \"string\")\r\n\t\t\tlist.load(value);\r\n\t\telse if (!isObj)\r\n\t\t\tlist.parse(value);\r\n\r\n\t\t//prevent default show-hide logicfunction(){\r\n\t\tview._suggest_after_filter = function(){};\r\n\r\n\t\treturn view;\r\n\t},\r\n\t_render_value_block:function(obj, common){\r\n\t\tvar id, input, inputAlign,inputStyle, inputValue, inputWidth,\r\n\t\t\theight, html, label, list, message, padding, readOnly,  width,\r\n\t\t\tbottomLabel = \"\",\r\n\t\t\ttop =  this._settings.labelPosition == \"top\";\r\n\r\n\t\tid = \"x\"+uid();\r\n\t\twidth = common._get_input_width(obj);\r\n\t\tinputAlign = obj.inputAlign || \"left\";\r\n\r\n\t\theight = this._inputHeight - 2*$active.inputPadding -2;\r\n\r\n\t\tinputValue = (this._inputValue||\"\");\r\n\t\tlist = \"<ul class='webix_multicombo_listbox' style='line-height:\"+height+\"px'></ul>\";\r\n\r\n\t\tinputWidth = Math.min(width,(common._inputWidth||7));\r\n\r\n\t\tinputStyle = \"width: \"+inputWidth+\"px;height:\"+height+\"px;max-width:\"+(width-20)+\"px\";\r\n\r\n\t\treadOnly = obj.readonly?\" readonly \":\"\";\r\n\t\tinput = \"<input id='\"+id+\"' role='combobox' aria-multiline='true' aria-label='\"+template.escape(obj.label)+\"' tabindex='0' type='text' class='webix_multicombo_input' \"+readOnly+\" style='\"+inputStyle+\"' value='\"+inputValue+\"'/>\";\r\n\t\thtml = \"<div class='webix_inp_static' onclick='' style='line-height:\"+height+\"px;width: \" + width + \"px;  text-align: \" + inputAlign + \";height:auto' >\"+list+input +\"</div>\";\r\n\r\n\t\tlabel = common.$renderLabel(obj,id);\r\n\r\n\t\tpadding = this._settings.awidth - width - $active.inputPadding*2;\r\n\t\tmessage = (obj.invalid ? obj.invalidMessage : \"\") || obj.bottomLabel;\r\n\t\tif (message)\r\n\t\t\tbottomLabel =  \"<div class='webix_inp_bottom_label' style='width:\"+width+\"px;margin-left:\"+Math.max(padding,$active.inputPadding)+\"px;'>\"+message+\"</div>\";\r\n\r\n\t\tif (top)\r\n\t\t\treturn label+\"<div class='webix_el_box' style='width:\"+this._settings.awidth+\"px; '>\"+html+bottomLabel+\"</div>\";\r\n\t\telse\r\n\t\t\treturn \"<div class='webix_el_box' style='width:\"+this._settings.awidth+\"px; min-height:\"+this._settings.aheight+\"px;'>\"+label+html+bottomLabel+\"</div>\";\r\n\t},\r\n\t_getValueListBox: function(){\r\n\t\treturn this._getBox().getElementsByTagName(\"UL\")[0];\r\n\t},\r\n\r\n\t_set_inner_size: function(){\r\n\t\tvar popup = this.getPopup();\r\n\t\tif(popup){\r\n\r\n\t\t\tvar textArr = (popup ? popup.setValue(this._settings.value) : null);\r\n\t\t\tif(popup._toMultiValue)\r\n\t\t\t\tthis._settings.value = popup._toMultiValue(this._settings.value);\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar listbox = this._getValueListBox();\r\n\t\t\tvar text = textArr && textArr.length;\r\n\t\t\tif(text){\r\n\t\t\t\tvar height = this._inputHeight - 2*$active.inputPadding - 8;\r\n\t\t\t\tvar values = this._settings.value;\r\n\t\t\t\tif(typeof values == \"string\")\r\n\t\t\t\t\tvalues = values.split(this._settings.separator);\r\n\r\n\t\t\t\tif(this._settings.tagMode){\r\n\t\t\t\t\tfor(var i=0; i < textArr.length;i++){\r\n\t\t\t\t\t\tvar content = \"<span>\"+textArr[i]+\"</span><span class='webix_multicombo_delete' role='button' aria-label='\"+i18n.aria.removeItem+\"'>x</span>\";\r\n\t\t\t\t\t\thtml += \"<li class='webix_multicombo_value' style='line-height:\"+height+\"px;' optvalue='\"+ values[i]+\"'>\"+content+\"</li>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\thtml += \"<li class='webix_multicombo_tag' style='line-height:\"+height+\"px;'><span>\"+this._settings.tagTemplate(values)+\"</span></li>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tlistbox.innerHTML = html;\r\n\t\t\t// reset placeholder\r\n\t\t\tvar inp = this.getInputNode();\r\n\t\t\tif(this._settings.placeholder){\r\n\t\t\t\tif(text){\r\n\t\t\t\t\tinp.placeholder = \"\";\r\n\t\t\t\t\tif(!inp.value && inp.offsetWidth > 20)\r\n\t\t\t\t\t\tinp.style.width = \"20px\";\r\n\t\t\t\t}\r\n\t\t\t\telse if(!inp.value){\r\n\t\t\t\t\tinp.placeholder = this._settings.placeholder;\r\n\t\t\t\t\tinp.style.width = this._get_input_width(this._settings)+\"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!this._settings.tagMode && listbox.firstChild)\r\n\t\t\t\tinp.style.width = this._getMultiComboInputWidth() +\"px\";\r\n\t\t}\r\n\t\tthis._resizeToContent();\r\n\t},\r\n\t_focusAtEnd: function(inputEl){\r\n\t\tinputEl = inputEl||this.getInputNode();\r\n\t\tif (inputEl){\r\n\t\t\tif(inputEl.value.length){\r\n\t\t\t\tif (inputEl.createTextRange){\r\n\t\t\t\t\tvar FieldRange = inputEl.createTextRange();\r\n\t\t\t\t\tFieldRange.moveStart(\"character\",inputEl.value.length);\r\n\t\t\t\t\tFieldRange.collapse();\r\n\t\t\t\t\tFieldRange.select();\r\n\t\t\t\t}else if (inputEl.selectionStart || inputEl.selectionStart == \"0\") {\r\n\t\t\t\t\tvar elemLen = inputEl.value.length;\r\n\t\t\t\t\tinputEl.selectionStart = elemLen;\r\n\t\t\t\t\tinputEl.selectionEnd = elemLen;\r\n\t\t\t\t\tinputEl.focus();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tinputEl.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_resizeToContent: function(){\r\n\t\tvar top = this._settings.labelPosition == \"top\";\r\n\t\tvar inputDiv = this._getInputDiv();\r\n\t\tvar inputHeight = Math.max(inputDiv.offsetHeight+ 2*$active.inputPadding, this._inputHeight);\r\n\r\n\t\tif(top)\r\n\t\t\tinputHeight += this._labelTopHeight;\r\n\r\n\t\tinputHeight += this._settings.bottomPadding ||0;\r\n\r\n\t\tvar sizes = this.$getSize(0,0);\r\n\r\n\t\tif(inputHeight != sizes[2]){\r\n\t\t\tvar cHeight = inputDiv.offsetHeight + (top?this._labelTopHeight:0);\r\n\r\n\t\t\tvar topView =this.getTopParentView();\r\n\t\t\tclearTimeout(topView._template_resize_timer);\r\n\t\t\ttopView._template_resize_timer = delay(function(){\r\n\r\n\t\t\t\tvar calcHeight = cHeight + 2*$active.inputPadding;\r\n\t\t\t\tif (this.config.height != calcHeight){\r\n\t\t\t\t\tthis.config.height = calcHeight;\r\n\t\t\t\t\tthis.resize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this._typing){\r\n\t\t\t\t\tthis._focusAtEnd(this.getInputNode());\r\n\t\t\t\t\tthis._typing = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(this._enter){\r\n\t\t\t\t\tif(!this._settings.keepText)\r\n\t\t\t\t\t\tthis.getInputNode().value = \"\";\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.getInputNode().select();\r\n\t\t\t\t\tthis._enter = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.getPopup().isVisible()||this._typing){\r\n\t\t\t\t\tthis.getPopup().show(this._getInputDiv());\r\n\t\t\t\t}\r\n\r\n\t\t\t}, this);\r\n\t\t}\r\n\t\tif(this._enter){\r\n\t\t\tthis.getInputNode().select();\r\n\t\t}\r\n\t},\r\n\t_getInputDiv: function(){\r\n\t\tvar parentNode = this._getBox();\r\n\t\tvar nodes = parentNode.childNodes;\r\n\t\tfor(var i=0; i < nodes.length; i++){\r\n\t\t\tif(nodes[i].className && nodes[i].className.indexOf(\"webix_inp_static\")!=-1)\r\n\t\t\t\treturn nodes[i];\r\n\t\t}\r\n\t\treturn parentNode;\r\n\t},\r\n\tgetInputNode: function(){\r\n\t\treturn this._getBox().getElementsByTagName(\"INPUT\")[0];\r\n\t},\r\n\t$setValue:function(){\r\n\t\tif (this._rendered_input)\r\n\t\t\tthis._set_inner_size();\r\n\t},\r\n\tgetValue:function(config){\r\n\t\tif(typeof config == \"object\" && config.options)\r\n\t\t\treturn this._getSelectedOptions();\r\n\r\n\t\tvar value = this._settings.value;\r\n\t\tif (!value) return \"\";\r\n\t\treturn (typeof value != \"string\"?value.join(this._settings.separator):value);\r\n\t},\r\n\tgetText:function(){\r\n\t\tvar value = this._settings.value;\r\n\t\tif(!value) return \"\";\r\n\t\t\r\n\t\tif(typeof value == \"string\")\r\n\t\t\tvalue = value.split(this._settings.separator);\r\n\r\n\t\tvar text = [];\r\n\t\tfor(var i = 0; i<value.length; i++)\r\n\t\t\ttext.push(this.getPopup().getItemText(value[i]));\r\n\t\treturn text.join(this._settings.separator);\r\n\t},\r\n\t_getSelectedOptions: function(){\r\n\t\tvar i, item, popup,\r\n\t\t\toptions = [],\r\n\t\t\tvalue = this._settings.value;\r\n\r\n\t\tif (!value) return [];\r\n\r\n\t\tif(typeof value == \"string\")\r\n\t\t\tvalue = value.split(this._settings.separator);\r\n\r\n\t\tpopup = this.getPopup();\r\n\r\n\t\tfor(i = 0; i < value.length; i++){\r\n\t\t\titem = popup.getList().getItem(value[i]) || (popup._valueHistory?popup._valueHistory[value[i]]:null);\r\n\t\t\tif(item)\r\n\t\t\t\toptions.push(item);\r\n\t\t}\r\n\r\n\t\treturn options;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tvar config = this._settings;\r\n\t\tif(base.api.$setSize.call(this,x,y)){\r\n\t\t\tif (!x || !y) return;\r\n\t\t\tif (config.labelPosition == \"top\"){\r\n\t\t\t\tconfig.labelWidth = 0;\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\t_calcInputWidth: function(value){\r\n\t\tvar tmp = document.createElement(\"span\");\r\n\t\ttmp.className = \"webix_multicombo_input\";\r\n\t\ttmp.style.visibility = \"visible\";\r\n\t\ttmp.style.height = \"0px\";\r\n\t\ttmp.innerHTML = value.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");\r\n\t\tdocument.body.appendChild(tmp);\r\n\t\tvar width = tmp.offsetWidth+10;\r\n\t\tdocument.body.removeChild(tmp);\r\n\t\treturn width;\r\n\t},\r\n\t_getMultiComboInputWidth: function(){\r\n\t\tconst listbox = this._getValueListBox();\r\n\t\tconst width = listbox.offsetWidth - listbox.firstChild.offsetWidth;\r\n\t\treturn (width <= 25)? listbox.offsetWidth-12: width-15;\r\n\t},\r\n\t_init_onchange:function(){\r\n\t\t// input focus and focus styling\r\n\t\t_event(this._getBox(),\"click\",function(){\r\n\t\t\tthis.getInputNode().focus();\r\n\t\t},{bind:this});\r\n\t\t_event(this.getInputNode(),\"focus\",function(){\r\n\t\t\tif(this._getBox().className.indexOf(\"webix_focused\") == -1)\r\n\t\t\t\tthis._getBox().className += \" webix_focused\";\r\n\r\n\t\t},{bind:this});\r\n\t\t_event(this.getInputNode(),\"blur\",function(){\r\n\t\t\tthis._getBox().className = this._getBox().className.replace(\" webix_focused\",\"\");\r\n\t\t},{bind:this});\r\n\r\n\t\t// need for clear click (\"x\") in IE\r\n\t\t_event(this.getInputNode(),\"input\",function(){\r\n\t\t\tif(!this.getInputNode().value && this._inputValue){\r\n\t\t\t\tthis.getInputNode().style.width = \"20px\";\r\n\t\t\t\tthis._inputWidth = 20;\r\n\r\n\t\t\t\tthis._inputValue = \"\";\r\n\t\t\t\tthis._typing = true;\r\n\r\n\t\t\t\tthis.getPopup().show(this._getInputDiv());\r\n\t\t\t\tthis._resizeToContent();\r\n\t\t\t}\r\n\t\t},{bind:this});\r\n\t\t// resize\r\n\t\t_event(this.getInputNode(),\"keyup\",function(e){\r\n\t\t\tvar inp = this.getInputNode();\r\n\t\t\tvar calcWidth, width;\r\n\r\n\t\t\te = (e||event);\r\n\t\t\t// to show placeholder\r\n\t\t\tif(this._settings.placeholder && !this._settings.value && !inp.value)\r\n\t\t\t\twidth = this._get_input_width(this._settings);\r\n\t\t\telse{\r\n\t\t\t\twidth = calcWidth = this._calcInputWidth(inp.value);\r\n\t\t\t\tif(!this._settings.tagMode && this._getValueListBox().firstChild)\r\n\t\t\t\t\twidth = this._getMultiComboInputWidth();\r\n\t\t\t}\r\n\r\n\t\t\tinp.style.width = width +\"px\";\r\n\r\n\t\t\tif(calcWidth!=this._inputWidth){\r\n\t\t\t\tif(this._settings.keepText || e.keyCode !=13){\r\n\t\t\t\t\tthis._inputValue = inp.value;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis._inputValue = false;\r\n\t\t\t\t}\r\n\t\t\t\tthis._typing = true;\r\n\r\n\t\t\t\tif(this._inputWidth)\r\n\t\t\t\t\tthis.getPopup().show(this._getInputDiv());\r\n\r\n\t\t\t\tthis._inputWidth = calcWidth||width;\r\n\t\t\t\tthis._resizeToContent();\r\n\t\t\t}\r\n\t\t\telse if(this._windowHeight != this.getPopup().$height){\r\n\t\t\t\tthis.getPopup().show(this._getInputDiv());\r\n\t\t\t}\r\n\r\n\t\t\tif(inp.value.indexOf(this._settings.separator) > -1 && this._settings.tagMode){\r\n\t\t\t\tvar newValue = inp.value.replace(this._settings.separator, \"\");\r\n\t\t\t\tif (newValue){\r\n\t\t\t\t\tif (this._settings.newValues){\r\n\t\t\t\t\t\tthis._enter = true;\r\n\t\t\t\t\t\tthis._addNewValue(newValue);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar newId = this.getPopup().getItemId(newValue);\r\n\t\t\t\t\t\tif (newId)\r\n\t\t\t\t\t\t\tthis._addValue(newId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this._settings.keepText){\r\n\t\t\t\t\tthis._inputValue = newValue;\r\n\t\t\t\t\tinp.value = newValue;\r\n\t\t\t\t\tthis._enter = true;\r\n\t\t\t\t\tthis._typing = true;\r\n\t\t\t\t\tthis._resizeToContent();\r\n\t\t\t\t} else{\r\n\t\t\t\t\tinp.value = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},{bind:this});\r\n\r\n\t\t// remove the last value on Backspace click\r\n\t\t_event(this.getInputNode(),\"keydown\",function(e){\r\n\t\t\tthis._enter = false;\r\n\t\t\tif (this.isVisible()){\r\n\t\t\t\te = (e||event);\r\n\t\t\t\tvar node = this._getValueListBox().lastChild;\r\n\t\t\t\tthis._windowHeight = this.getPopup().$height;\r\n\t\t\t\tif(e.keyCode == 8 && node){\r\n\t\t\t\t\tif(!this.getInputNode().value && ((new Date()).valueOf() - (this._backspaceTime||0) > 100)){\r\n\t\t\t\t\t\tthis._typing = true;\r\n\t\t\t\t\t\tthis._removeValue(node.getAttribute(\"optvalue\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis._backspaceTime = (new Date()).valueOf();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.keyCode == 13 || e.keyCode == 9){\r\n\t\t\t\t\tvar input = this.getInputNode();\r\n\t\t\t\t\tvar id = \"\";\r\n\t\t\t\t\tvar suggest = $$(this._settings.suggest);\r\n\t\t\t\t\tvar list = suggest.getList();\r\n\t\t\t\t\t// if no selected options\r\n\r\n\t\t\t\t\tif(!list.getSelectedId()){\r\n\t\t\t\t\t\tif (input.value)\r\n\t\t\t\t\t\t\tid = suggest.getSuggestion(input.value);\r\n\r\n\t\t\t\t\t\tif(this._settings.newValues){\r\n\t\t\t\t\t\t\tif(e.keyCode == 13)\r\n\t\t\t\t\t\t\t\tthis._enter = true;\r\n\t\t\t\t\t\t\tthis._addNewValue(input.value);\r\n\t\t\t\t\t\t\tif(this._settings.keepText)\r\n\t\t\t\t\t\t\t\tthis._inputValue = input.value;\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(id){\r\n\t\t\t\t\t\t\tif(e.keyCode == 9){\r\n\t\t\t\t\t\t\t\tthis._typing = false;\r\n\t\t\t\t\t\t\t\tthis._inputValue = \"\";\r\n\t\t\t\t\t\t\t\tthis._inputWidth = 10;\r\n\t\t\t\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t\t\t\t\tthis._addValue(id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tthis._enter = true;\r\n\t\t\t\t\t\t\t\tthis._addValue(id);\r\n\t\t\t\t\t\t\t\tif(this._settings.keepText)\r\n\t\t\t\t\t\t\t\t\tthis._inputValue = input.value;\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(e.keyCode == 13){\r\n\t\t\t\t\t\tthis._enter = true;\r\n\t\t\t\t\t\tthis._typing = true;\r\n\t\t\t\t\t\tif(this._settings.keepText)\r\n\t\t\t\t\t\t\tthis._inputValue = input.value;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tinput.value = \"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},{bind:this});\r\n\t\t$$(this._settings.suggest).linkInput(this);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  richselect.view);\r\nexport default {api, view};","import text from \"../views/text\";\r\nimport {preventEvent, addCss, removeCss, pos as getPos, offset} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport env from \"../webix/env\";\r\nimport {uid, bind, isArray, copy} from \"../webix/helpers\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\n// #include ui/inputs.js\r\n\r\nconst api = {\r\n\tname:\"slider\",\r\n\t$touchCapture:true,\r\n\tdefaults:{\r\n\t\tmin:0,\r\n\t\tmax:100,\r\n\t\tvalue:50,\r\n\t\tstep:1,\r\n\t\ttitle:false,\r\n\t\tmoveTitle:true,\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tvar id = common._handle_id = \"x\" +uid();\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar title = \"<div class='webix_slider_title\"+(obj.moveTitle?\" webix_slider_move\":\"\")+\"'\"+(!obj.moveTitle && obj.vertical?(\" style='line-height:\"+(obj.aheight-obj.inputPadding*2)+\"px;'\"):\"\")+\">&nbsp;</div>\";\r\n\t\t\tvar left = \"<div class='webix_slider_left'>&nbsp;</div>\";\r\n\t\t\tvar right = \"<div class='webix_slider_right'></div>\";\r\n\t\t\tvar handle = \"<div class='webix_slider_handle' \"+/*@attr*/\"webix_disable_drag\"+\"='true' role='slider' aria-label='\"+obj.label+(obj.title?(\" \"+obj.title(obj)):\"\")+\"' aria-valuemax='\"+obj.max+\"' aria-valuemin='\"+obj.min+\"' aria-valuenow='\"+obj.value+\"' tabindex='0' id='\"+id+\"'>&nbsp;</div>\";\r\n\t\t\t\r\n\t\t\tif(obj.vertical) html =  \"<div class='webix_slider_box'>\"+right+left+handle+\"</div>\"+title;\r\n\t\t\telse html = title+\"<div class='webix_slider_box'>\"+left+right+handle+\"</div>\";\r\n\t\t\treturn common.$renderInput(obj, html, id);\r\n\t\t}\r\n\t},\r\n\ttype_setter:function(type){\r\n\t\tthis._viewobj.className += \" webix_slider_\"+type;\r\n\t},\r\n\ttitle_setter:function(value){\r\n\t\tif (typeof value == \"string\")\r\n\t\t\treturn template(value);\r\n\t\treturn value;\r\n\t},\r\n\t_get_slider_handle:function(){\r\n\t\treturn this.$view.querySelector(\".webix_slider_handle\");\r\n\t},\r\n\t_set_inner_size:function(){\r\n\t\tvar handle = this._get_slider_handle();\r\n\t\tvar config = this._settings;\r\n\r\n\t\tif(handle){ //view is rendered for sure\r\n\t\t\tvar size = config.vertical?this._content_height:this._get_input_width(config); //width or height\r\n\t\t\tvar value = config.value%config.step?(Math.round(config.value/config.step)*config.step):config.value;\r\n\t\t\tvar max = config.max - config.min;\r\n\t\t\t\r\n\t\t\tvalue =  Math.max(Math.min(value,config.max),config.min);\r\n\t\t\tvalue = config.vertical?(max-(value-config.min)):(value-config.min);\r\n\t\t\t\r\n\t\t\t//top or left\r\n\t\t\tvar corner1 = Math.ceil((size - 2 * this._sliderPadding) * value / max);\r\n\t\t\t//bottom or right\r\n\t\t\tvar corner2 = size - 2 * this._sliderPadding - corner1;\r\n\r\n\t\t\tvar cornerStr = config.vertical?\"top\":\"left\";\r\n\t\t\tvar sizeStr = config.vertical?\"height\":\"width\";\r\n\r\n\t\t\thandle.style[cornerStr] = this._sliderPadding + corner1 - this._sliderHandleWidth / 2 + \"px\";\r\n\t\t\thandle.parentNode.style[sizeStr] = size+\"px\";\r\n\r\n\t\t\t//1px border\r\n\t\t\tcorner2= Math.min(Math.max(corner2, 2 * this._sliderBorder), size - this._sliderPadding * 2 - 2 * this._sliderBorder);\r\n\t\t\tcorner1 = Math.min(Math.max(corner1, 2 * this._sliderBorder), size - this._sliderPadding * 2 - 2 * this._sliderBorder);\r\n\r\n\t\t\t//width for left/top and right/bottom bars\r\n\t\t\tvar part = handle.previousSibling;\r\n\t\t\tpart.style[sizeStr] = corner2 + \"px\";\r\n\t\t\tvar last = part.previousSibling;\r\n\t\t\tlast.style[sizeStr] = corner1 + \"px\";\r\n\r\n\t\t\tthis._set_title(handle, corner1, corner2, cornerStr);\r\n\t\t}\r\n\t},\r\n\t_set_title:function(handle, corner1, corner2, cornerStr){\r\n\t\tvar config = this._settings;\r\n\t\tif (this._settings.title){\r\n\t\t\tvar title = handle.parentNode[config.vertical?\"nextSibling\":\"previousSibling\"];\r\n\t\t\ttitle.innerHTML = this._settings.title(this._settings, this);\r\n\t\t\t\r\n\t\t\tif(this._settings.moveTitle){\r\n\t\t\t\tvar pos = 0;\r\n\t\t\t\tif(config.vertical) pos = corner1+2 * this._sliderBorder-this._sliderHandleWidth/2;\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar half = title.clientWidth/2;\r\n\t\t\t\t\tvar pos1 = half>corner1 ? (half-corner1-2*this._sliderBorder): 0;//left/top text is to large\r\n\t\t\t\t\tvar pos2 = half>corner2 ? (half-corner2-2*this._sliderBorder-this._sliderHandleWidth/2): 0;//right/bottom text is too large\r\n\t\t\t\t\tpos = this._sliderPadding + corner1 - half + pos1 - pos2;\r\n\t\t\t\t}    \r\n\t\t\t\ttitle.style[cornerStr] = pos+ \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_set_value_now:function(){\r\n\t\tthis._get_slider_handle().setAttribute(\"aria-valuenow\", this._settings.value);\r\n\t},\r\n\trefresh:function(){\r\n\t\tvar handle =  this._get_slider_handle();\r\n\t\tif(handle){\r\n\t\t\tthis._set_value_now();\r\n\t\t\tif(this._settings.title)\r\n\t\t\t\thandle.setAttribute(\"aria-label\", this._settings.label+\" \"+this._settings.title(this._settings, this));\r\n\r\n\t\t\tthis._set_inner_size();\r\n\t\t}\r\n\t},\r\n\t$setValue:function(){\r\n\t\tthis.refresh();\r\n\t},\r\n\t$getValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tvalue = parseFloat(value);\r\n\t\treturn isNaN(value)?0:value;\r\n\t},\r\n\t$init:function(config){\r\n\t\tif(env.touch)\r\n\t\t\tthis.attachEvent(\"onTouchStart\" , bind(this._on_mouse_down_start, this));\r\n\t\telse\r\n\t\t\t_event(this._viewobj, \"mousedown\", bind(this._on_mouse_down_start, this));\r\n\r\n\t\t_event( this.$view, \"keydown\", bind(this._handle_move_keyboard, this));\r\n\r\n\t\tif(config.vertical){\r\n\t\t\tconfig.height = config.height || $active.vSliderHeight;\r\n\t\t\tthis._viewobj.className += \" webix_slider_vertical\";\r\n\t\t\tthis._sliderPadding = $active.vSliderPadding;\r\n\t\t}\r\n\t},\r\n\t$skin: function(){\r\n\t\ttext.api.$skin.call(this);\r\n\r\n\t\tthis._sliderHandleWidth = $active.sliderHandleWidth; //8 - width of handle / 2\r\n\t\tthis._sliderPadding = $active.sliderPadding;//10 - padding of webix_slider_box ( 20 = 10*2 )\r\n\t\tthis._sliderBorder = $active.sliderBorder;//1px border\r\n\t},\r\n\t_handle_move_keyboard:function(e){\r\n\t\tvar code = e.keyCode, c = this._settings, value = c.value;\r\n\r\n\t\tif(code>32 && code <41){\r\n\t\t\tpreventEvent(e);\r\n\r\n\t\t\tvar trg = e.target;\r\n\t\t\tvar match =  /webix_slider_handle_(\\d)/.exec(trg.className);\r\n\t\t\tthis._activeIndex = match?parseInt(match[1],10):-1;\r\n\t\t\tif(match)\r\n\t\t\t\tvalue = c.value[this._activeIndex];\r\n\r\n\t\t\tvalue = value<c.min ? c.min:(value>c.max ? c.max : value);\r\n\t\t\t\r\n\t\t\tif(code === 36) value = c.min;\r\n\t\t\telse if(code === 35) value = c.max;\r\n\t\t\telse{\r\n\t\t\t\tvar inc = (code === 37 || code ===40 || code === 34)?-1:1;\r\n\t\t\t\tif(code === 33 || code === 34 || c.step>1)\r\n\t\t\t\t\tinc = inc*c.step;\r\n\t\t\t\tvalue = value*1+inc;\r\n\t\t\t}\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tvar other = c.value[this._activeIndex?0:1];\r\n\t\t\t\tvalue = ((this._activeIndex && value <= other) || (!this._activeIndex && value >= other )) ? other : value;\r\n\t\t\t}\r\n\r\n\t\t\tif(value>=c.min && value <=c.max){\r\n\t\t\t\tif(match){\r\n\t\t\t\t\tvar temp =[];\r\n\t\t\t\t\tfor(var i=0; i<c.value.length; i++)\r\n\t\t\t\t\t\ttemp[i] = i === this._activeIndex ? value : c.value[i];\r\n\t\t\t\t\tvalue = temp;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setValue(value);\r\n\t\t\t\tthis._activeIndex = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_on_mouse_down_start:function(e){\r\n\t\tif (this._handle_drag_events) return;\r\n\r\n\t\tvar trg = e.target;\r\n\t\tif(this._mouse_down_process){\r\n\t\t\tthis._mouse_down_process(e);\r\n\t\t}\r\n\r\n\t\tvar value = this._settings.value;\r\n\t\tif(isArray(value))\r\n\t\t\tvalue = copy(value);\r\n\r\n\t\tif (trg.className.indexOf(\"webix_slider_handle\")!=-1){\r\n\t\t\tthis._start_value = value;\r\n\t\t\treturn this._start_handle_dnd.apply(this,arguments);\r\n\t\t} else if (trg.className.indexOf(\"webix_slider\") != -1){\r\n\t\t\tthis._start_value = value;\r\n\r\n\t\t\tthis._settings.value = this._get_value_from_event.apply(this,arguments);\r\n\r\n\t\t\tthis._start_handle_dnd(e);\r\n\t\t}\r\n\t},\r\n\t_start_handle_dnd:function(){\r\n\t\tif(env.touch){\r\n\t\t\tthis._handle_drag_events = [\r\n\t\t\t\tthis.attachEvent(\"onTouchMove\" , bind(this._handle_move_process, this)),\r\n\t\t\t\tthis.attachEvent(\"onTouchEnd\"  , bind(this._handle_move_stop, this))\r\n\t\t\t];\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._handle_drag_events = [\r\n\t\t\t\tevent(document.body, \"mousemove\", bind(this._handle_move_process, this)),\r\n\t\t\t\tevent(window, \"mouseup\", bind(this._handle_move_stop, this))\r\n\t\t\t];\r\n\t\taddCss(document.body,\"webix_noselect\");\r\n\t},\r\n\t_handle_move_stop:function(){\r\n\t\t//detach event handlers\r\n\t\tif(this._handle_drag_events){\r\n\t\t\tif(env.touch){\r\n\t\t\t\tthis.detachEvent(this._handle_drag_events[0]);\r\n\t\t\t\tthis.detachEvent(this._handle_drag_events[1]);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\teventRemove(this._handle_drag_events[0]);\r\n\t\t\t\teventRemove(this._handle_drag_events[1]);\r\n\t\t\t}\r\n\t\t\tthis._handle_drag_events = null;\r\n\t\t}\r\n\r\n\t\tremoveCss(document.body,\"webix_noselect\");\r\n\r\n\t\tvar value = this._settings.value;\r\n\r\n\t\tif(isArray(value))\r\n\t\t\tvalue = copy(value);\r\n\r\n\t\tthis._settings.value = this._start_value;\r\n\t\tthis.setValue(value);\r\n\r\n\t\tthis._get_slider_handle(this._activeIndex).focus();\r\n\t\tthis._activeIndex = -1;\r\n\t},\r\n\t_handle_move_process:function(){\r\n\t\tthis._settings.value = this._get_value_from_event.apply(this,arguments);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onSliderDrag\", []);\r\n\t},\r\n\t_get_value_from_event:function(event,touchContext){\r\n\t\t// this method takes 2 arguments in case of touch env\r\n\t\tvar pos = 0;\r\n\t\tvar ax = this._settings.vertical?\"y\":\"x\";\r\n\t\tif(env.touch)\r\n\t\t\tpos = touchContext?touchContext[ax]: event[ax];\r\n\t\telse\r\n\t\t\tpos = getPos(event)[ax];\r\n\t\treturn this._get_value_from_pos(pos);\r\n\t},\r\n\t_get_value_from_pos:function(pos){\r\n\t\tvar config = this._settings;\r\n\t\tvar max = config.max - config.min;\r\n\t\tvar ax = config.vertical?\"y\":\"x\";\r\n\r\n\t\t//top or left depending on slider type\r\n\t\tvar corner = offset(this._get_slider_handle().parentNode)[ax] + this._sliderPadding;\r\n\t\t//height or width depending on slider type\r\n\t\tvar size = (config.vertical?this._content_height:this._get_input_width(config))-2*this._sliderPadding;\r\n\r\n\t\tvar newvalue = (size?(pos-corner) * max / size:0);\r\n\t\tif(config.vertical)\r\n\t\t\tnewvalue = max-newvalue;\r\n\t\tnewvalue = Math.round((newvalue + 1*config.min)/config.step) * config.step;\r\n\t\treturn Math.max(Math.min(newvalue, config.max), config.min);\r\n\t},\r\n\t_init_onchange:function(){} //need not ui.text logic\r\n};\r\n\r\n\r\nconst view = protoUI(api,  text.view);\r\nexport default {api, view};","import slider from \"../views/slider\";\r\nimport {offset} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {uid, isArray, isUndefined} from \"../webix/helpers\";\r\n\r\n\r\n// #include ui/slider.js\r\n\r\nconst api = {\r\n\tname:\"rangeslider\",\r\n\t$cssName:\"slider webix_rangeslider\",\r\n\tdefaults:{\r\n\t\tseparator: \",\",\r\n\t\tvalue: [20,80],\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tvar id = \"x\" + uid();\r\n\t\t\tcommon._handle_id = [id+\"_0\",id+\"_1\"];\r\n\r\n\t\t\tvar aria = \"role='slider' aria-label='\"+obj.label+(obj.title?(\" \"+obj.title(obj)):\"\")+\"' aria-valuemax='\"+obj.max+\"' aria-valuemin='\"+obj.min+\"' tabindex='0'\";\r\n\t\t\tvar handles = \"<div class='webix_slider_handle webix_slider_handle_0' \"+/*@attr*/\"webix_disable_drag\"+\"='true' id='\"+common._handle_id[0]+\"' \"+aria+\" aria-valuenow='\"+obj.value[0]+\"'>&nbsp;</div>\";\r\n\t\t\thandles += \"<div class='webix_slider_handle webix_slider_handle_1' \"+/*@attr*/\"webix_disable_drag\"+\"='true' id='\"+common._handle_id[1]+\"' \"+aria+\" aria-valuenow='\"+obj.value[1]+\"'>&nbsp;</div>\";\r\n\r\n\t\t\tvar title = \"<div class='webix_slider_title\"+(obj.moveTitle?\" webix_slider_move\":\"\")+\"'\"+(!obj.moveTitle && obj.vertical?(\" style='line-height:\"+(obj.aheight-common._sliderPadding-obj.inputPadding*2)+\"px;'\"):\"\")+\">&nbsp;</div>\";\r\n\t\t\tif(obj.moveTitle)\r\n\t\t\t\ttitle = \"<div class='webix_slider_title_box'>\"+(title+title)+\"</div>\";\r\n\t\t\t\r\n\t\t\tvar parts = \"<div class='webix_slider_right'>&nbsp;</div><div class='webix_slider_left'></div>\";\r\n\t\t\tvar html = \"\";\r\n\t\t\tif(obj.vertical) html = \"<div class='webix_slider_box'>\"+parts+handles+\"</div>\"+title;\r\n\t\t\telse html = title+\"<div class='webix_slider_box'>\"+parts+handles+\"</div>\";\r\n\t\t\treturn common.$renderInput(obj, html, id);\r\n\t\t}\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tif(!isArray(value)){\r\n\t\t\tvalue = (value||\"\").toString().split(this._settings.separator);\r\n\t\t}\r\n\t\tvalue[0] = parseFloat(value[0]);\r\n\t\tvalue[0] = isNaN(value[0])?0:value[0];\r\n\t\tif(value.length < 2)\r\n\t\t\tvalue[1] = value[0];\r\n\t\telse{\r\n\t\t\tvalue[1] = parseFloat(value[1]);\r\n\t\t\tvalue[1] = isNaN(value[1])?0:value[1];\r\n\t\t}\r\n\t\tif(value[0]>value[1]) [value[0], value[1]] = [value[1], value[0]];\r\n\t\treturn value;\r\n\t},\r\n\t_get_slider_handle:function(index){\r\n\t\tindex = index && index>=0?index:0;\r\n\t\treturn this.$view.querySelector(\".webix_slider_handle_\"+(index||0));\r\n\t},\r\n\t_get_left_pos: function(size,index){\r\n\t\tvar config, max, value;\r\n\r\n\t\tconfig = this._settings;\r\n\t\tmax = config.max - config.min;\r\n\t\tvalue = config.value[index]%config.step?(Math.round(config.value[index]/config.step)*config.step):config.value[index];\r\n\t\tvalue =  Math.max(Math.min(value,config.max),config.min);\r\n\t\treturn Math.ceil((size - this._sliderPadding*2) * (value-config.min) / max);\r\n\t},\r\n\t_set_left_pos:function(size, left, vertical){\r\n\t\tvar pos = this._sliderPadding + left - (this._sliderHandleWidth / 2 *(vertical?-1:1));\r\n\t\tpos = vertical? size-pos:pos;\r\n\t\treturn pos+\"px\";\r\n\t},\r\n\t_set_value_pos:function(size, left, length, vertical){\r\n\t\tvar pos = left+this._sliderPadding + 2 * this._sliderBorder;\r\n\t\tif(vertical) pos = size-pos-length;\r\n\t\treturn pos + \"px\";\r\n\t},\r\n\t_set_inner_size:function(){\r\n\t\tvar config, handle0, handle1,\r\n\t\t\tleft0, left1, max, length, parentBox,\r\n\t\t\tsizeStr, size, cornerStr;\r\n\r\n\t\thandle0 =this._get_slider_handle(0);\r\n\t\thandle1 = this._get_slider_handle(1);\r\n\t\tconfig = this._settings;\r\n\r\n\t\tif(!isArray(config.value)){\r\n\t\t\tthis.define(\"value\", config.value);\r\n\t\t}\r\n\r\n\t\tif (handle0){\r\n\t\t\tsizeStr = config.vertical?\"height\":\"width\";\r\n\t\t\tcornerStr = config.vertical?\"top\":\"left\";\r\n\t\t\t\r\n\t\t\tsize = config.vertical?this._content_height:this._get_input_width(config);\r\n\t\t\tmax = size - this._sliderPadding * 2 - 2 * this._sliderBorder;\r\n\t\t\t\r\n\t\t\tleft0 = this._get_left_pos(size, 0);\r\n\t\t\tleft1 = this._get_left_pos(size, 1);\r\n\t\t\tlength = left1 - left0;\r\n\r\n\t\t\thandle0.style[cornerStr] = this._set_left_pos(size, left0, config.vertical);\r\n\t\t\thandle1.style[cornerStr] = this._set_left_pos(size, left1, config.vertical);\r\n\t\t\t\r\n\t\t\tparentBox = handle0.parentNode;\r\n\t\t\tparentBox.style[sizeStr] = size+\"px\";\r\n\t\t\tparentBox.firstChild.style[sizeStr] = max + \"px\";\r\n\t\t\tparentBox.childNodes[1].style[sizeStr] = length + \"px\";\r\n\t\t\tparentBox.childNodes[1].style[cornerStr] = this._set_value_pos(size, left0, length, config.vertical);\r\n\r\n\t\t\tthis._set_title(handle0, [left0, left1], max, cornerStr);\r\n\t\t}\r\n\t},\r\n\t_title_hidden:0,\r\n\t_hide_title:function(title, index){\r\n\t\tif(!isUndefined(this._title_hidden))\r\n\t\t\ttitle[this._title_hidden].style.visibility = \"visible\";\r\n\t\tif(!isUndefined(index)){\r\n\t\t\ttitle[index].style.visibility = \"hidden\";\r\n\t\t\tthis._title_hidden = index;\r\n\t\t}\r\n\t},\r\n\t_set_title:function(handle0, left, max, cornerStr){\r\n\t\tvar config = this._settings;\r\n\t\tif (this._settings.title){\r\n\t\t\tvar box = handle0.parentNode;\r\n\t\t\tvar sibling = config.vertical?\"nextSibling\":\"previousSibling\";\r\n\r\n\t\t\tif(!config.moveTitle)\r\n\t\t\t\tbox[sibling].innerHTML = this._settings.title(this._settings, this);\r\n\t\t\telse{ //two independent titles\r\n\t\t\t\tvar title = box[sibling].childNodes;\r\n\t\t\t\tvar pos = [];\r\n\t\t\t\tfor(let i = 0; i<2; i++)\r\n\t\t\t\t\tpos.push(this._set_title_n(title[i], config.value[i], left[i], max, cornerStr, i));\r\n\r\n\t\t\t\t//correct for overlapping titles\r\n\t\t\t\tvar diff = config.vertical? (pos[0]-pos[1]-this._sliderHandleWidth) : (pos[1]-pos[0]);\r\n\t\t\t\tvar sizeStr  = config.vertical?\"clientHeight\":\"clientWidth\";\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\tif(title[0][sizeStr]/2+title[1][sizeStr]/2 > diff)\r\n\t\t\t\t\tthis._hide_title(title, isUndefined(this._activeIndex) ? 0 : (this._activeIndex ? 0 : 1));\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._hide_title(title);\r\n\r\n\t\t\t\t//set position\r\n\t\t\t\tfor(let i = 0; i<2; i++)\r\n\t\t\t\t\ttitle[i].style[cornerStr] = pos[i]+ \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_set_title_n:function(title, value, left, max, cornerStr, index){\r\n\t\ttitle.innerHTML = this._settings.title({value:value}, this);\r\n\t\tvar half = title.clientWidth/2;\r\n\t\tvar pos = 0;\r\n\t\t\r\n\t\tif(this._settings.vertical)\r\n\t\t\tpos = max-left-this._sliderHandleWidth/2-(index?this._sliderPadding:0)+2 * this._sliderBorder;\r\n\t\telse{\r\n\t\t\tpos = left + this._sliderHandleWidth/2 + 2*this._sliderBorder - half;\r\n\t\t\tpos = (half>left) ? (half-left+pos): pos;//left/top text is to small\r\n\t\t\tpos = (index && half+left>max)?(pos-half+(max-left)):pos;//right/bottom text is too large\r\n\t\t}\r\n\t\treturn pos;\r\n\t},\r\n\t_set_value_now:function(){\r\n\t\tfor(var i=0; i<2; i++){\r\n\t\t\tthis._get_slider_handle(i).setAttribute(\"aria-valuenow\", this._settings.value[i]);\r\n\t\t}\r\n\t},\r\n\t_mouse_down_process: function(e){\r\n\t\tvar trg = e.target || e.srcElement;\r\n\t\tvar match =  /webix_slider_handle_(\\d)/.exec(trg.className);\r\n\t\tthis._activeIndex = match?parseInt(match[1],10):-1;\r\n\r\n\t\tif(match)\r\n\t\t\tthis._set_handle_active(this._activeIndex);\r\n\t},\r\n\t$compareValue:function(oldvalue, value){\r\n\t\tvalue = this.$prepareValue(value);\r\n\t\treturn oldvalue[0] === value[0] && oldvalue[1] === value[1];\r\n\t},\r\n\t$getValue:function(){\r\n\t\tvar value = this._settings.value;\r\n\t\treturn this._settings.stringResult?value.join(this._settings.separator):value;\r\n\t},\r\n\t_set_handle_active: function(index){\r\n\t\tvar hActive = this._get_slider_handle(index);\r\n\t\tvar h = this._get_slider_handle(1-index);\r\n\t\tif(hActive.className.indexOf(\"webix_slider_active\") == -1)\r\n\t\t\thActive.className += \" webix_slider_active\";\r\n\t\th.className = h.className.replace(\" webix_slider_active\",\"\");\r\n\t\thActive.focus();\r\n\t},\r\n\t_get_value_from_pos:function(pos){\r\n\t\tvar config = this._settings;\r\n\t\tvar value = config.value;\r\n\t\t//10 - padding of slider box\r\n\t\tvar max = config.max - config.min;\r\n\t\tvar ax = config.vertical?\"y\":\"x\";\r\n\r\n\t\tvar left = offset(this._get_slider_handle().parentNode)[ax];\r\n\t\tvar newvalue = Math.ceil((pos-left) * max / (config.vertical?this._content_height:this._get_input_width(config)));\r\n\t\tnewvalue = Math.round((newvalue + 1*config.min)/config.step) * config.step;\r\n\t\tif(config.vertical)\r\n\t\t\tnewvalue = max-newvalue;\r\n\r\n\t\tvar index = null;\r\n\t\tvar pos0 = offset(this._get_slider_handle(0))[ax];\r\n\t\tvar pos1 = offset(this._get_slider_handle(1))[ax];\r\n\r\n\t\tif(pos0==pos1 && (config.value[0] == config.min || config.value[0] == config.max) ){\r\n\t\t\tthis._activeIndex = index = (config.value[0] == config.min?1:0);\r\n\t\t\tthis._set_handle_active(index);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(this._activeIndex >=0){\r\n\t\t\t\tindex = this._activeIndex;\r\n\t\t\t}else{\r\n\t\t\t\tif(pos0==pos1){\r\n\t\t\t\t\tindex = (pos < pos0?0:1);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar dist0 = Math.abs(pos0-pos);\r\n\t\t\t\t\tvar dist1 = Math.abs(pos1-pos);\r\n\t\t\t\t\tindex = dist0<dist1?0:1;\r\n\t\t\t\t\tthis._activeIndex = index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif(index){\r\n\t\t\tvalue[index] = Math.max(Math.min(newvalue, config.max), value[0]);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvalue[index] = Math.max(Math.min(newvalue, value[1]), config.min);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  slider.view);\r\nexport default {api, view};","import checkbox from \"../views/checkbox\";\r\nimport {addCss, removeCss, getTextSize} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {uid} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"switch\",\r\n\tdefaults:{\r\n\t\ttemplate:function (config, common) {\r\n\t\t\tcommon._calck_switch_size();\r\n\r\n\t\t\tvar id = config.name || \"x\"+uid();\r\n\t\t\tvar rightlabel = \"\";\r\n\t\t\tif (config.labelRight){\r\n\t\t\t\trightlabel = \"<label class='webix_label_right'>\"+config.labelRight+\"</label>\";\r\n\t\t\t\tif (config.labelWidth)\r\n\t\t\t\t\tconfig.label = config.label || \"&nbsp;\";\r\n\t\t\t}\r\n\t\t\tvar checked = (config.checkValue == config.value);\r\n\t\t\tvar aria = \"aria-label=\\\"\"+(config.label||config.labelRight||\"\")+\"\\\" role=\\\"checkbox\\\" tabindex=\\\"0\\\" aria-checked=\\\"\"+(checked?\"true\":\"false\")+\"\\\" \"+(config.readonly?\"aria-readonly='true'\":\"\")+\"\\\"\";\r\n\t\t\tvar html = \r\n\t\t\t\t\"<div class=\\\"webix_switch_box \"+(checked?\" webix_switch_on\":\"\")+\"\\\" style=\\\"width:\"+common._switchWidth+\"px\\\">\"+\r\n\t\t\t\t\t\"<span class=\\\"webix_switch_text\\\">\"+((checked?config.onLabel:config.offLabel)||\"\")+\"</span>\"+\r\n\t\t\t\t\t\"<button class=\\\"webix_switch_handle\\\" \"+aria+\" style=\\\"left:\"+(checked?common._switchWidth-common._switchHeight:0)+\"px;\\\">\"+\r\n\t\t\t\t\t\"<input  id=\\\"\"+id+\"\\\" class=\\\"webix_switch_toggle\\\" type=\\\"checkbox\\\" \"+(checked?\"checked\":\"\")+\"></button>\"+\r\n\t\t\t\t\"</div>\"+rightlabel;\r\n\r\n\t\t\treturn common.$renderInput(config, html, id);\r\n\t\t}\r\n\t},\r\n\t$skin:function(){\r\n\t\tcheckbox.api.$skin.call(this);\r\n\r\n\t\tthis._switchHeight = $active.switchHeight;\r\n\t\tthis._switchWidth = $active.switchWidth;\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tvar config = this._settings;\r\n\t\tvar checked = (value == config.checkValue);\r\n\t\tvar box = this.$view.querySelector(\".webix_switch_box\");\r\n\r\n\t\tif(box){\r\n\t\t\tvar handle = box.childNodes[1];\r\n\t\t\tvar text = (checked?config.onLabel:config.offLabel)||\"\";\r\n\t\t\tif(checked)\r\n\t\t\t\taddCss(box, \"webix_switch_on\");\r\n\t\t\telse\r\n\t\t\t\tremoveCss(box, \"webix_switch_on\");\r\n\r\n\t\t\thandle.style.left = (checked?this._switchWidth-this._switchHeight:0)+\"px\";\r\n\t\t\thandle.firstChild.checked = checked;\r\n\t\t\thandle.setAttribute(\"aria-checked\", checked?\"true\":\"false\");\r\n\r\n\t\t\tif(text){\r\n\t\t\t\tbox.childNodes[0].innerHTML = text;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_calck_switch_size:function(){\r\n\t\tvar config = this._settings;\r\n\t\tif(config.onLabel || config.offLabel){\r\n\t\t\tvar onWidth = config.onLabel ? getTextSize(config.onLabel, \"webix_switch_text\").width : 0;\r\n\t\t\tvar offWidth = config.onLabel ? getTextSize(config.offLabel, \"webix_switch_text\").width : 0;\r\n\t\t\tthis._switchWidth = Math.max(onWidth, offWidth)+this._switchHeight;\r\n\t\t}\r\n\t},\r\n\ton_click:{\r\n\t\t\"webix_switch_box\":function(){\r\n\t\t\tif(!this._settings.readonly)\r\n\t\t\t\tthis.toggle();\r\n\t\t},\r\n\t\t\"webix_label_right\":function(){\r\n\t\t\tif(!this._settings.readonly)\r\n\t\t\t\tthis.toggle();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  checkbox.view);\r\nexport default {api, view};","import {protoUI, ui, $$} from \"../ui/core\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport i18n from \"../webix/i18n\";\r\nimport template from \"../webix/template\";\r\n\r\nimport segmented from \"../views/segmented\";\r\n\r\nconst api = {\r\n\tname:\"tabbar\",\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t},\r\n\t$skin:function(){\r\n\t\tvar skin = $active;\r\n\t\tvar defaults = this.defaults;\r\n\r\n\t\tdefaults.topOffset = skin.tabTopOffset||0;\r\n\t\tdefaults.tabOffset = (typeof skin.tabOffset != \"undefined\"?skin.tabOffset:10);\r\n\t\tdefaults.bottomOffset = skin.tabBottomOffset||0;\r\n\t\tdefaults.height = skin.tabbarHeight;\r\n\r\n\t\tdefaults.tabMargin = skin.tabMargin;\r\n\t\tdefaults.inputPadding = skin.inputPadding;\r\n\t\tdefaults.tabMinWidth = skin.tabMinWidth||100;\r\n\t\tdefaults.tabMoreWidth = skin.tabMoreWidth||40;\r\n\t\tdefaults.borderless = !skin.tabBorder;\r\n\t},\r\n\t_getTabbarSizes: function(){\r\n\r\n\t\tvar config = this._settings,\r\n\t\t\ti, len,\r\n\t\t\ttabs = this._filterOptions(config.options),\r\n\t\t\ttotalWidth = this._input_width - config.tabOffset*2,\r\n\t\t\tlimitWidth = config.optionWidth||config.tabMinWidth;\r\n\r\n\t\tlen = tabs.length;\r\n\r\n\t\tif(config.tabMinWidth && totalWidth/len < limitWidth){\r\n\t\t\treturn { max: (parseInt(totalWidth/limitWidth,10)||1)};\r\n\t\t}\r\n\r\n\r\n\t\tif(!config.optionWidth){\r\n\t\t\tfor(i=0;i< len; i++){\r\n\t\t\t\tif(tabs[i].width){\r\n\t\t\t\t\ttotalWidth -= tabs[i].width+(!i&&!config .type?config.tabMargin:0);\r\n\t\t\t\t\tlen--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {width: (len?totalWidth/len:config.tabMinWidth)};\r\n\t},\r\n\t_init_popup: function(){\r\n\t\tconst obj = this._settings;\r\n\t\tif (!obj.tabbarPopup){\r\n\t\t\tconst popupConfig = {\r\n\t\t\t\tview: \"popup\",\r\n\t\t\t\tautofocus:false,\r\n\t\t\t\twidth: (obj.popupWidth||200),\r\n\t\t\t\tbody:{\r\n\t\t\t\t\tview: \"list\",\r\n\t\t\t\t\tborderless: true,\r\n\t\t\t\t\tselect: true, navigation:true,\r\n\t\t\t\t\tcss: \"webix_tab_list\",\r\n\t\t\t\t\tautoheight: true, yCount: obj.yCount,\r\n\t\t\t\t\ttype:{\r\n\t\t\t\t\t\ttemplate: obj.popupTemplate\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst view = ui(popupConfig);\r\n\t\t\tconst list = view.getBody();\r\n\r\n\t\t\tview.attachEvent(\"onShow\", () => {\r\n\t\t\t\tlist.unselect();\r\n\t\t\t\tUIManager.setFocus(list);\r\n\r\n\t\t\t\tconst node = list.getItemNode(list.getFirstId());\r\n\t\t\t\tif (node)\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t});\r\n\t\t\tlist.attachEvent(\"onItemClick\", (id) => this._popupInnerClick(id));\r\n\t\t\tlist.attachEvent(\"onEnter\", () => this._popupInnerClick());\r\n\r\n\t\t\tobj.tabbarPopup = view._settings.id;\r\n\t\t\tthis._destroy_with_me.push(view);\r\n\t\t}\r\n\t\tthis._init_popup = function(){};\r\n\t},\r\n\t_popupInnerClick(id){\r\n\t\tconst popup = $$(this._settings.tabbarPopup);\r\n\t\tid = id || popup.getBody().getSelectedId();\r\n\r\n\t\tif (id && this.callEvent(\"onBeforeTabClick\", [id])){\r\n\t\t\tthis.setValue(id);\r\n\t\t\tpopup.hide();\r\n\t\t\tthis.callEvent(\"onAfterTabClick\", [id]);\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.focus();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tgetPopup: function(){\r\n\t\tthis._init_popup();\r\n\t\treturn $$(this._settings.tabbarPopup);\r\n\t},\r\n\tmoreTemplate_setter: template,\r\n\tpopupTemplate_setter: template,\r\n\tdefaults:{\r\n\t\tpopupWidth: 200,\r\n\t\tpopupTemplate: \"#value#\",\r\n\t\tyCount: 10,\r\n\t\tmoreTemplate: \"<span class=\\\"webix_icon wxi-dots\\\"></span>\",\r\n\t\ttemplate:function(obj,common) {\r\n\t\t\tcommon._check_options(obj.options);\r\n\r\n\t\t\tlet tabs = common._filterOptions(obj.options);\r\n\t\t\tlet contentWidth, html, leafWidth, resultHTML, style, sum, verticalOffset, width;\r\n\r\n\t\t\tif (!tabs.length){\r\n\t\t\t\thtml = \"<div class='webix_tab_filler' style='width:\"+common._input_width+\"px; border-right:0px;'></div>\";\r\n\t\t\t} else {\r\n\t\t\t\tif (!obj.value)\r\n\t\t\t\t\tobj.value = common._getFirstActive(true);\r\n\r\n\t\t\t\thtml = \"\";\r\n\t\t\t\tif (obj.tabOffset)\r\n\t\t\t\t\thtml += \"<div class='webix_tab_filler' style='width:\"+obj.tabOffset+\"px;'>&nbsp;</div>\";\r\n\t\t\t\tcontentWidth = common._input_width - obj.tabOffset*2-(!obj.type?(obj.tabMargin)*(tabs.length-1):0);\r\n\t\t\t\tverticalOffset = obj.topOffset+obj.bottomOffset;\r\n\r\n\t\t\t\tvar sizes = common._getTabbarSizes();\r\n\r\n\t\t\t\tif (sizes.max && sizes.max < tabs.length){\r\n\t\t\t\t\t//we need popup\r\n\t\t\t\t\tconst popup = common.getPopup();\r\n\t\t\t\t\tpopup.hide();\r\n\r\n\t\t\t\t\tconst body = (popup.getBody()||null);\r\n\t\t\t\t\tif(body){\r\n\t\t\t\t\t\tif (sizes.max){\r\n\t\t\t\t\t\t\tfor (let i=0, found=false; i < tabs.length && !found; i++)\r\n\t\t\t\t\t\t\t\tif(tabs[i].id== obj.value){\r\n\t\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\t\tif((i+1) > sizes.max){\r\n\t\t\t\t\t\t\t\t\t\tlet selectedTab =  tabs.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\tlet displayTabs = tabs.splice(0, sizes.max-1).concat(selectedTab);\r\n\t\t\t\t\t\t\t\t\t\ttabs = displayTabs.concat(tabs);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbody.clearAll();\r\n\t\t\t\t\t\t\tbody.parse(tabs.slice(sizes.max));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tbody.clearAll();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (common._settings.tabbarPopup)\r\n\t\t\t\t\t$$(common._settings.tabbarPopup).hide();\r\n\r\n\t\t\t\tsum = obj.tabOffset;\r\n\t\t\t\tfor (let i=0, lastTab=false; (i<tabs.length) && !lastTab; i++) {\r\n\r\n\t\t\t\t\t// tab width\r\n\t\t\t\t\tif(sizes && sizes.max){\r\n\t\t\t\t\t\tif(sizes.max == (i + 1)){\r\n\t\t\t\t\t\t\tlastTab = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontentWidth = common._input_width - obj.tabOffset*2-(!obj.type&&(sizes.max>1)?(obj.tabMargin)*(sizes.max-1):0);\r\n\t\t\t\t\t\twidth = (contentWidth - obj.tabMoreWidth)/sizes.max ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\twidth = sizes.width;\r\n\r\n\t\t\t\t\twidth = (tabs[i].width||obj.optionWidth||width);\r\n\r\n\t\t\t\t\tsum += width + (i&&!obj.type?obj.tabMargin:0);\r\n\r\n\t\t\t\t\tif(obj.tabMargin>0&&i&&!obj.type)\r\n\t\t\t\t\t\thtml += \"<div class='webix_tab_filler' style='width:\"+obj.tabMargin+\"px;'></div>\";\r\n\r\n\t\t\t\t\t// tab innerHTML\r\n\t\t\t\t\thtml += common._getTabHTML(tabs[i], width);\r\n\r\n\r\n\t\t\t\t\tif(lastTab){\r\n\t\t\t\t\t\thtml += \"<div role=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"\"+i18n.aria.showTabs+\"\\\" class=\\\"webix_tab_more_icon\\\" style=\\\"width:\"+obj.tabMoreWidth+\"px;\\\">\"+obj.moreTemplate(obj,common)+\"</div>\";\r\n\t\t\t\t\t\tsum += obj.tabMoreWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tleafWidth = common._content_width - sum;\r\n\r\n\t\t\t\tif (leafWidth>0 && !obj.type)\r\n\t\t\t\t\thtml += \"<div class='webix_tab_filler' style='width:\"+leafWidth+\"px;'>&nbsp;</div>\";\r\n\t\t\t}\r\n\r\n\t\t\tresultHTML = \"\";\r\n\r\n\t\t\t// consider top and bottom offset in tabs height (top tabbar)\r\n\t\t\tstyle = (verticalOffset&& !obj.type)?\"height:\"+(common._content_height-verticalOffset)+\"px\":\"\";\r\n\r\n\t\t\t//space above tabs (top tabbar)\r\n\t\t\tif(obj.topOffset && !obj.type)\r\n\t\t\t\tresultHTML += \"<div class='webix_before_all_tabs' style='width:100%;height:\"+obj.topOffset+\"px'></div>\";\r\n\r\n\t\t\t// tabs html\r\n\t\t\tresultHTML +=  \"<div style='\"+style+\"' role='tablist' class='webix_all_tabs \"+(obj.type?(\"webixtype_\"+obj.type):\"\")+\"'>\"+html+\"</div>\";\r\n\r\n\t\t\t//space below to tabs (top tabbar)\r\n\t\t\tif(obj.bottomOffset && !obj.type)\r\n\t\t\t\tresultHTML += \"<div class='webix_after_all_tabs' style='width:100%;height:\"+obj.bottomOffset+\"px'></div>\";\r\n\r\n\t\t\treturn resultHTML;\r\n\t\t}\r\n\t},\r\n\t_getInputNode:function(){\r\n\t\treturn this.$view.querySelectorAll(\".webix_item_tab\");\r\n\t},\r\n\t_getTabHTML: function(tab, width){\r\n\t\tvar\thtml,\r\n\t\t\tclassName = \"\",\r\n\t\t\ttooltip = \"\",\r\n\t\t\tisDisabled = !!tab.disabled,\r\n\t\t\tconfig = this.config;\r\n\r\n\t\tif (tab.id == config.value)\r\n\t\t\tclassName += \" webix_selected\";\r\n\r\n\t\tif (isDisabled)\r\n\t\t\tclassName += \" webix_disabled\";\r\n\r\n\t\tif (tab.css)\r\n\t\t\tclassName+=\" \"+tab.css;\r\n\r\n\t\tif (config.tooltip)\r\n\t\t\ttooltip = \" webix_t_id='\"+tab.id+\"'\";\r\n\r\n\t\twidth = (tab.width||width);\r\n\t\thtml = \"<div class=\\\"webix_item_tab\"+className+\"\\\" \"+/*@attr*/\"button_id=\\\"\"+tab.id+\"\\\" role=\\\"tab\\\" \"+\r\n\t\t\t\"aria-selected=\\\"\"+(tab.id== config.value?\"true\":\"false\")+\"\\\" tabindex=\\\"\"+(!isDisabled && tab.id==config.value?\"0\":\"-1\")+\r\n\t\t\t\"\\\" style=\\\"width:\"+width+\"px;\\\"\"+(isDisabled?\" webix_disabled=\\\"true\\\"\":\"\")+tooltip+\">\";\r\n\r\n\t\t// a tab title\r\n\t\tif(this._tabTemplate){\r\n\t\t\tvar calcHeight = this._content_height- config.inputPadding*2 - 2;\r\n\t\t\tvar height = this._content_height - 2;\r\n\t\t\tvar temp = extend({ cheight: calcHeight, aheight:height }, tab);\r\n\t\t\thtml+= this._tabTemplate(temp);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar icon = tab.icon?(\"<span class='webix_icon \"+tab.icon+\"'></span> \"):\"\";\r\n\t\t\thtml+=icon + tab.value;\r\n\t\t}\r\n\r\n\t\tif (!isDisabled && (tab.close || config.close))\r\n\t\t\thtml+=\"<span role='button' tabindex='0' aria-label='\"+i18n.aria.closeTab+\"' class='webix_tab_close webix_icon wxi-close'></span>\";\r\n\r\n\t\thtml+=\"</div>\";\r\n\t\treturn html;\r\n\t},\r\n\t_getBox:function(){\r\n\t\treturn this._dataobj.firstChild;\r\n\t},\r\n\t_types:{\r\n\t\timage:\"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>\",\r\n\t\ticon:\"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>\",\r\n\t\ticonTop:\"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#value#</div></div>\"\r\n\t},\r\n\ttype_setter:function(value){\r\n\t\tthis._settings.tabOffset = 0;\r\n\t\tif (this._types[value])\r\n\t\t\tthis._tabTemplate = template(this._types[value]);\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  segmented.view);\r\nexport default {api, view};","import layout from \"../views/layout\";\r\nimport IdSpace from \"../core/idspace\";\r\nimport UIManager from \"../core/uimanager\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\n\r\nconst api = {\r\n\tname: \"richtext\",\r\n\tdefaults:{\r\n\t\tlabel:\"\",\r\n\t\tlabelWidth:80,\r\n\t\tlabelPosition:\"left\"\r\n\t},\r\n\t$init: function() {\r\n\t\tthis._viewobj.className += \" webix_richtext\";\r\n\t\tthis.$ready.unshift(this._setLayout);\r\n\t},\r\n\t$skin:function(){\r\n\t\tlayout.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.paddingX = $active.inputSpacing/2;\r\n\t\tthis.defaults.paddingY = $active.inputPadding;\r\n\t},\r\n\tgetInputNode:function(){\r\n\t\treturn this.$view.querySelector(\".webix_richtext_editor\"); \r\n\t},\r\n\t_button:function(name){\r\n\t\treturn {\r\n\t\t\tview: \"toggle\",\r\n\t\t\ttype: \"icon\",\r\n\t\t\ticon: \"wxi-\"+name, name: name, id:name,\r\n\t\t\tlabel: i18n.richtext[name],\r\n\t\t\tautowidth: true, \r\n\t\t\taction:name,\r\n\t\t\tclick: this._add_data\r\n\t\t};\r\n\t},\r\n\t_setLayout: function() {\r\n\t\tvar top = this;\r\n\r\n\t\tvar editField = {\r\n\t\t\tview: \"template\",\r\n\t\t\tcss: \"webix_richtext_container\",\r\n\t\t\tborderless: true,\r\n\t\t\ttemplate: \"<div class='webix_richtext_editor' contenteditable='true'>\"+this.getValue()+\"</div>\",\r\n\t\t\ton: {\r\n\t\t\t\tonAfterRender: function() {\r\n\t\t\t\t\ttop._rendered_input = true;\r\n\t\t\t\t\ttop.refresh();\r\n\t\t\t\t\t_event( \r\n\t\t\t\t\t\ttop.getInputNode(),\r\n\t\t\t\t\t\t\"blur\",\r\n\t\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\t\ttop._updateValue(this.innerHTML);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_event( \r\n\t\t\t\t\t\ttop.getInputNode(),\r\n\t\t\t\t\t\t\"keyup\",\r\n\t\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\t\ttop._getselection();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonClick: {\r\n\t\t\t\twebix_richtext_editor: function() {\r\n\t\t\t\t\ttop._getselection();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar controls = [\r\n\t\t\tthis._button(\"underline\"),\r\n\t\t\tthis._button(\"bold\"),\r\n\t\t\tthis._button(\"italic\"),\r\n\t\t\t{ }\r\n\t\t];\r\n\r\n\t\tvar editorToolbar = {\r\n\t\t\tview: \"toolbar\",\r\n\t\t\tid:\"toolbar\",\r\n\t\t\telements: controls\r\n\t\t};\r\n\r\n\t\tvar rows = [\r\n\t\t\teditorToolbar,\r\n\t\t\teditField\r\n\t\t];\r\n\r\n\t\tif (this.config.labelPosition === \"top\"){\r\n\t\t\teditorToolbar.elements = controls.concat([\r\n\t\t\t\t{ view:\"label\", label: this.config.label, align:\"right\"},\r\n\t\t\t\t{ width:4 }\r\n\t\t\t]);\r\n\t\t\tthis.rows_setter(rows);\r\n\t\t} \r\n\t\telse if (this.config.labelWidth){\r\n\t\t\tthis.config.margin = 0;\r\n\t\t\tthis.cols_setter([{ \r\n\t\t\t\ttemplate: (this.config.label || \" \"),\r\n\t\t\t\tcss: \"webix_richtext_inp_label\"+(this.config.required?\" webix_required\":\"\"),\r\n\t\t\t\tborderless: true,\r\n\t\t\t\twidth: this.config.labelWidth\r\n\t\t\t}, {\r\n\t\t\t\trows:rows\r\n\t\t\t}]);\r\n\t\t}\r\n\t\telse this.rows_setter(rows);\r\n\t},\r\n\tlabelWidth_setter:function(value){\r\n\t\treturn value ? Math.max(value, $active.dataPadding) : 0;\r\n\t},\r\n\t_getselection: function() {\r\n\t\tvar top = this;\r\n\t\tvar bar = top.$$(\"toolbar\");\r\n\t\tvar sel;\r\n\r\n\t\tbar.setValues({\r\n\t\t\titalic:false, underline:false, bold:false\r\n\t\t});\r\n\r\n\t\tif(window.getSelection) {\r\n\t\t\tsel = window.getSelection();\r\n\t\t} else {\r\n\t\t\tsel = document.selection.createRange();\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < sel.rangeCount; ++i) {\r\n\t\t\tif (top.$view.contains(this.getInputNode())){\r\n\t\t\t\tif (document.queryCommandState(\"bold\")) {\r\n\t\t\t\t\ttop.$$(\"bold\").setValue(true);\r\n\t\t\t\t} \r\n\t\t\t\tif (document.queryCommandState(\"underline\")) {\r\n\t\t\t\t\ttop.$$(\"underline\").setValue(true);\r\n\t\t\t\t}\r\n\t\t\t\tif (document.queryCommandState(\"italic\")) {\r\n\t\t\t\t\ttop.$$(\"italic\").setValue(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefresh: function() {\r\n\t\tif(this._rendered_input)\r\n\t\t\tthis.getInputNode().innerHTML = this.config.value || \"\";\r\n\t},\r\n\t_execCommandOnElement:function(commandName) {\r\n\t\tlet sel, selText;\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tsel = window.getSelection();\r\n\t\t\tselText = sel.toString().length;\r\n\r\n\t\t\tconst input = this.getInputNode();\r\n\t\t\tif (!input.contains(sel.anchorNode) || !input.contains(sel.focusNode)) return;\r\n\t\t} else return; //ie8\r\n\r\n\t\tif(selText > 0) {\r\n\t\t\tfor (var i = 0; i < sel.rangeCount; ++i) {\r\n\t\t\t\tvar range = sel.getRangeAt(i);\r\n\t\t\t\tif (!sel.isCollapsed) {\r\n\t\t\t\t\tdocument.execCommand(commandName, false, \"\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar textValue = sel.focusNode.textContent;\r\n\t\t\t\t\tvar focusEl = sel.focusNode;\r\n\t\t\t\t\tvar focustext = sel.anchorOffset;\r\n\t\t\t\t\tvar wordBegining = textValue.substring(0, focustext).match(/[A-Za-z]*$/)[0];\r\n\t\t\t\t\tvar wordEnd = textValue.substring(focustext).match(/^[A-Za-z]*/)[0];\r\n\r\n\t\t\t\t\tvar startWord = focustext - wordBegining.length;\r\n\t\t\t\t\tvar endWord = focustext + wordEnd.length;\r\n\r\n\t\t\t\t\trange.setStart(focusEl, startWord);\r\n\t\t\t\t\trange.setEnd(focusEl, endWord);\r\n\t\t\t\t\tsel.removeAllRanges();\r\n\r\n\t\t\t\t\tsel.addRange(range);\r\n\t\t\t\t\tdocument.execCommand(commandName, false, \"\");\r\n\t\t\t\t}   \r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_add_data:function() {\r\n\t\tconst top = this.getTopParentView();\r\n\t\ttop._execCommandOnElement(this.config.action);\r\n\t},\r\n\tfocus: function() {\r\n\t\tif(!UIManager.canFocus(this))\r\n\t\t\treturn false;\r\n\r\n\t\tvar editableElement = this.getInputNode();\r\n\t\teditableElement.focus();\r\n\t},\r\n\t_updateValue: function(value){\r\n\t\tvar old = this.config.value;\r\n\t\tthis.config.value = value || \"\";\r\n\r\n\t\tif (old !== value)\r\n\t\t\tthis.callEvent(\"onChange\", [value, old]);\r\n\t},\r\n\tsetValue: function(value) {\r\n\t\tthis._updateValue(value);\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetValue: function() {\r\n\t\tvar input = this.getInputNode();\r\n\t\tif (input)\r\n\t\t\tthis.config.value = this.getInputNode().innerHTML;\r\n\r\n\t\tvar value = this.config.value;\r\n\t\treturn value || (value ===0?\"0\":\"\");\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  IdSpace, layout.view);\r\nexport default {api, view};","import {createCss, preventEvent, addCss, removeCss} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {extend, delay, uid, toNode, bind} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport {$name} from \"../webix/skin\";\r\n\r\nimport base from \"../views/view\";\r\nimport button from \"../views/button\";\r\nimport list from \"../views/list\";\r\nimport i18n from \"../webix/i18n\";\r\nimport type from \"../webix/type\";\r\n\r\nimport UploadDriver from \"../core/uploaddriver\";\r\nimport DataCollection from \"../core/datacollection\";\r\n\r\n\r\n/*\r\n\tUI:Uploader\r\n*/\r\n\r\n// #include ui/view.js\r\n// #include ui/list.js\r\n\r\n\r\ntype(list.view, {\r\n\tname:\"uploader\",\r\n\ttemplate:\"{common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>{common.fileName()}\",\r\n\tpercent:function(obj){\r\n\t\tif (obj.status == \"transfer\")\r\n\t\t\treturn \"<div style='width:60px; text-align:center; float:right'>\"+obj.percent+\"%</div>\";\r\n\t\treturn \"<div class='webix_upload_\"+obj.status+\"'><span class='\" +\r\n\t\t\t(obj.status ==\"error\"?\"error_icon\":\"webix_icon wxi-check\")+\"'></span></div>\";\r\n\t},\r\n\tremoveIcon:function(){\r\n\t\treturn \"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>\";\r\n\t},\r\n\tfileName:function(obj){\r\n\t\treturn \"<div style='text-overflow:ellipsis; white-space:nowrap; overflow:hidden; padding-right:8px;'>\"+obj.name+\"</div>\";\r\n\t},\r\n\ton_click:{\r\n\t\t\"webix_remove_upload\":function(ev, id){\r\n\t\t\t$$(this.config.uploader).files.remove(id);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nconst api = {\r\n\tname:\"uploader\",\r\n\tdefaults:{\r\n\t\tautosend:true,\r\n\t\tmultiple:true,\r\n\t\tinputName:\"upload\"\r\n\t},\r\n\t$cssName:\"button webix_uploader\",\r\n\t$allowsClear:true,\r\n\ton_click:{\r\n\t\t//don't fire extra onItemClick events, visible button will do it\r\n\t\t\"webix_hidden_upload\":function(){ return false; }\r\n\t},\r\n\t//will be redefined by upload driver\r\n\tsend:function(){},\r\n\tfileDialog:function(){},\r\n\tstopUpload:function(){},\r\n\t$skin:function(){\r\n\t\tbutton.api.$skin.call(this);\r\n\r\n\t\tif($name == \"material\" || $name == \"mini\")\r\n\t\t\tthis.defaults.css = \"webix_primary\";\r\n\t},\r\n\r\n\t$init:function(){\r\n\t\tthis.files = new DataCollection();\r\n\t\tthis._destroy_with_me = [this.files];\r\n\t\textend(this, UploadDriver, true);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tif (base.api.$setSize.call(this,x,y)){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tapiOnly_setter:function(value){\r\n\t\tdelay(this.render, this);\r\n\t\treturn (this.$apiOnly=value);\r\n\t},\r\n\t_add_files: function(files){\r\n\t\tfor (var i = 0; i < files.length; i++)\r\n\t\t\tthis.addFile(files[i]);\r\n\r\n\t},\r\n\tlink_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tdelay(function(){\r\n\t\t\t\tvar view = $$(this._settings.link);\r\n\t\t\t\tif (!view){\r\n\t\t\t\t\tvar top = this.getTopParentView();\r\n\t\t\t\t\tif (top.$$)\r\n\t\t\t\t\t\tview = top.$$(this._settings.link);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (view.sync && view.filter)\r\n\t\t\t\t\tview.sync(this.files);\r\n\t\t\t\telse if (view.setValues)\r\n\t\t\t\t\tthis.files.data.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\t\tview.setValues(this);\r\n\t\t\t\t\t});\r\n\t\t\t\tview._settings.uploader = this._settings.id;\r\n\t\t\t}, this);\r\n\t\treturn value;\r\n\t},\r\n\taddFile:function(name, size, type, extra){\r\n\t\tvar file = null;\r\n\t\tif (typeof name == \"object\"){\r\n\t\t\tfile = name;\r\n\t\t\tname = file.name;\r\n\t\t\tsize = file.size;\r\n\t\t}\r\n\r\n\t\tvar format = this._format_size(size);\r\n\t\ttype = type || name.split(\".\").pop();\r\n\r\n\t\tvar file_struct = {\r\n\t\t\tfile: file,\r\n\t\t\tname: name,\r\n\t\t\tid: uid(),\r\n\t\t\tsize: size,\r\n\t\t\tsizetext: format,\r\n\t\t\ttype: type,\r\n\t\t\tcontext: this._last_file_context,\r\n\t\t\tstatus: \"client\"\r\n\t\t};\r\n\r\n\t\tif (file && file.webkitRelativePath)\r\n\t\t\tfile_struct.name = file.webkitRelativePath;\r\n\r\n\t\tif (extra)\r\n\t\t\textend(file_struct, extra, true);\r\n\r\n\t\tif (this.callEvent(\"onBeforeFileAdd\", [file_struct])){\r\n\t\t\tif (!this._settings.multiple)\r\n\t\t\t\tthis.files.clearAll();\r\n\r\n\t\t\tvar id = this.files.add(file_struct);\r\n\t\t\tthis.callEvent(\"onAfterFileAdd\", [file_struct]);\r\n\t\t\tif (id && this._settings.autosend)\r\n\t\t\t\tthis.send(id);\r\n\t\t}\r\n\t\t\r\n\t\treturn file_struct;\r\n\t},\r\n\t\r\n\t_get_active_url:function(item){\r\n\t\tvar url = this._settings.upload;\r\n\t\tvar urldata = extend(item.urlData||{},this._settings.urlData||{});\r\n\t\tif (url && urldata){\r\n\t\t\tvar subline = [];\r\n\t\t\tfor (var key in urldata)\r\n\t\t\t\tsubline.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(urldata[key]));\r\n\r\n\t\t\tif (subline.length)\r\n\t\t\t\turl += ((url.indexOf(\"?\") ==-1) ? \"?\" : \"&\") + subline.join(\"&\");\r\n\t\t}\r\n\t\treturn url;\r\n\t},\r\n\r\n\taddDropZone:function(id, hover_text){\r\n\t\tvar node = toNode(id);\r\n\t\tvar extra_css = \"\";\r\n\t\tif (hover_text)\r\n\t\t\textra_css = \" \"+createCss({ content:\"\\\"\"+hover_text+\"\\\"\" }, \":before\");\r\n\r\n\t\tvar fullcss = \"webix_drop_file\"+extra_css;\r\n\t\tvar timer = null;\r\n\r\n\t\t//web\r\n\t\t_event(node,\"dragover\", preventEvent);\r\n\t\t_event(node,\"dragover\", function(){\r\n\t\t\taddCss(node, fullcss, true);\r\n\t\t\tif (timer){\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\ttimer = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\t_event(node,\"dragleave\", function(){\r\n\t\t\t//when moving over html child elements\r\n\t\t\t//browser will issue dragleave and dragover events\r\n\t\t\t//ignore first one\r\n\t\t\ttimer = setTimeout(function(){\r\n\t\t\t\tremoveCss(node, fullcss);\r\n\t\t\t}, 150);\r\n\t\t});\r\n\r\n\t\t_event(node,\"drop\", bind(function(e){\r\n\t\t\tremoveCss(node, fullcss);\r\n\t\t\tthis.$drop(e);\r\n\t\t\treturn preventEvent(e);\r\n\t\t}, this));\r\n\t},\r\n\t\r\n\t_format_size: function(size) {\r\n\t\tvar index = 0;\r\n\t\twhile (size > 1024){\r\n\t\t\tindex++;\r\n\t\t\tsize = size/1024;\r\n\t\t}\r\n\t\treturn Math.round(size*100)/100+\" \"+i18n.fileSize[index];\r\n\t},\r\n\r\n\t_complete: function(id, response) {\r\n\t\tvar item = this.files.getItem(id);\r\n\r\n\t\textend(item, response, true);\r\n\t\titem.status = \"server\";\r\n\t\titem.progress = 100;\r\n\r\n\t\tthis.callEvent(\"onFileUpload\", [item, response]);\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t\tthis.files.updateItem(id);\r\n\t\t\r\n\t\tif (this.isUploaded())\r\n\t\t\tthis._upload_complete(response);\r\n\t},\r\n\t_upload_complete:function(response){\r\n\t\tthis.callEvent(\"onUploadComplete\", [response]);\r\n\t\tif (this._last_assigned_upload_callback){\r\n\t\t\tthis._last_assigned_upload_callback.call(this, response);\r\n\t\t\tthis._last_assigned_upload_callback = 0;\r\n\t\t}\r\n\t},\r\n\tisUploaded:function(){\r\n\t\tvar order = this.files.data.order;\r\n\t\tfor (var i=0; i<order.length; i++)\r\n\t\t\tif (this.files.getItem(order[i]).status != \"server\")\r\n\t\t\t\treturn false;\r\n\r\n\t\treturn true;\r\n\t},\r\n\t$onUploadComplete: function(){\r\n\r\n\t},\r\n\t$updateProgress: function(id, percent) {\r\n\t\tvar item = this.files.getItem(id);\r\n\t\titem.percent = Math.round(percent);\r\n\t\tthis.files.updateItem(id);\r\n\t},\r\n\tsetValue:function(value){\r\n\t\t// 重写setValue方法，支持XMIS文件服务。\tadd by cloud.zhong\r\n\t\tif(typeof value == \"string\" && value) {\r\n\t\t\tvar list = JSON.parse(value);\r\n\t\t\tvalue = [];\r\n\t\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\t\tvar item = list[i];\r\n\t\t\t\tvalue.push({name: item.original_name, status: \"server\", sizetext: this._format_size(item.size), data: item});\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tthis.files.clearAll();\r\n\t\tif (value)\r\n\t\t\tthis.files.parse(value);\r\n\t\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\tgetValue:function(){\r\n\t\t// 重写getValue方法，支持XMIS文件服务。\tadd by cloud.zhong\r\n\t\tvar data = [];\r\n\t\tthis.files.data.each(function(obj){\r\n\t\t\tif (obj.status == \"server\")\r\n\t\t\t\tdata.push(obj.data);\r\n\t\t});\r\n\t\t\r\n\t\treturn data.length > 0 ? JSON.stringify(data) : \"\";\r\n\t}\r\n\r\n};\r\n\r\n\r\nconst view = protoUI(api,  button.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {uid, delay} from \"../webix/helpers\";\r\nimport {_event, event, eventRemove} from \"../webix/htmlevents\";\r\nimport env from \"../webix/env\";\r\nimport {$active} from \"../webix/skin\";\r\nimport template from \"../webix/template\";\r\n\r\nimport text from \"./text\";\r\n\r\nconst api = {\r\n\tname:\"texthighlight\",\r\n\tdefaults:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tconst name = obj.name || obj.id;\r\n\t\t\tconst id = \"x\"+uid();\r\n\t\t\tconst width = common._get_input_width(obj);\r\n\r\n\t\t\tlet html = `<div class=\"webix_text_highlight\" style=\"width:${width}px;\"><div class=\"webix_text_highlight_value\"`;\r\n\r\n\t\t\t// iOS adds 3px of (unremovable) padding to the left and right of a textarea\r\n\t\t\tif(obj.type == \"textarea\" && env.mobile && env.isSafari)\r\n\t\t\t\thtml += ` style=\"margin-left:${$active.dataPadding + 3}px; margin-right:${$active.dataPadding + 3}px;\"`;\r\n\r\n\t\t\thtml += \"></div></div>\";\r\n\r\n\t\t\tif(obj.type == \"textarea\"){\r\n\t\t\t\thtml += `${common._baseInputHTML(\"textarea\")} style=\"width:${width}px;\" id=\"${id}\" name=\"${name}\" class=\"webix_inp_textarea\">${common._pattern(obj.value)}</textarea>`;\r\n\t\t\t\treturn common.$renderInput(obj, html, id);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn html+common.$renderInput(obj);\r\n\t\t},\r\n\t\thighlight: text => template.escape(text),\r\n\t\ttype:\"text\"\r\n\t},\r\n\t$init:function(config){\r\n\t\tconst type = config.type || this.defaults.type;\r\n\t\tthis._viewobj.className += \" webix_el_\" + type;\r\n\r\n\t\tif(type == \"textarea\"){\r\n\t\t\tconfig.height = config.height || 0;\r\n\t\t\tconfig.minHeight = config.minHeight || 60;\r\n\t\t\tthis._skipSubmit = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//input hasn't scroll event\r\n\t\t\tthis.scrollEv = event(document, \"selectionchange\", ()=> {\r\n\t\t\t\tif(this.$view.contains(document.getSelection().focusNode))\r\n\t\t\t\t\tthis._syncText();\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onDestruct\", ()=> {\r\n\t\t\t\teventRemove(this.scrollEv);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//setValue\r\n\t\tthis.attachEvent(\"onChange\", ()=> this._syncText());\r\n\r\n\t\tthis.attachEvent(\"onAfterRender\", ()=> {\r\n\t\t\tthis._updatePos();\r\n\r\n\t\t\tconst evs = [\"scroll\", \"focus\", \"blur\", \"paste\", \"cut\", \"keyup\", \"input\"];\r\n\t\t\tevs.forEach((ev) => _event(this.getInputNode(), ev, ()=> this._syncText()));\r\n\r\n\t\t\tthis._handleInput(true);\r\n\t\t});\r\n\t},\r\n\t$setSize:function(){\r\n\t\ttext.api.$setSize.apply(this, arguments);\r\n\t\tthis._updatePos();\r\n\t},\r\n\t_getLabelHeight:function(top){\r\n\t\tif(this._settings.type == \"textarea\")\r\n\t\t\treturn top ? this._labelTopHeight-this._settings.inputPadding : \"\";\r\n\r\n\t\treturn text.api._getLabelHeight.apply(this, arguments);\r\n\t},\r\n\tgetInputNode: function() {\r\n\t\treturn this._dataobj.querySelector(this._settings.type == \"text\" ? \"input\" : \"textarea\");\r\n\t},\r\n\t_getHighlightNode: function(){\r\n\t\treturn this._dataobj.querySelector(\".webix_text_highlight\");\r\n\t},\r\n\t_handleInput: function(init){\r\n\t\tconst highlight = this._getHighlightNode().firstElementChild;\r\n\t\tlet text = this.getValue();\r\n\r\n\t\tif(init || text != (this._lastText||\"\")){\r\n\t\t\tthis._lastText = text;\r\n\r\n\t\t\t//add &nbsp; at the end because div ignores last empty line + it gives better positioning\r\n\t\t\thighlight.innerHTML = this._settings.highlight.apply(this, [text]) + \"&nbsp;\";\r\n\t\t}\r\n\t},\r\n\t_handleScroll: function(){\r\n\t\tlet highlight = this._getHighlightNode();\r\n\t\tif(this._settings.type == \"text\")\r\n\t\t\thighlight = highlight.firstElementChild;\r\n\r\n\t\tconst text = this.getInputNode();\r\n\r\n\t\thighlight.scrollTop = text.scrollTop;\r\n\t\thighlight.scrollLeft = text.scrollLeft;\r\n\t},\r\n\t_updatePos: function(){\r\n\t\tif(this.isVisible()){\r\n\t\t\tconst input = this.getInputNode();\r\n\t\t\tconst highlightStyles = this._getHighlightNode().style;\r\n\r\n\t\t\thighlightStyles.left = input.offsetLeft+\"px\";\r\n\t\t\thighlightStyles.top = input.offsetTop+\"px\";\r\n\t\t\thighlightStyles.height = input.getBoundingClientRect().height+\"px\";\r\n\t\t}\r\n\t},\r\n\t_syncText: function(){\r\n\t\tdelay(()=>{\r\n\t\t\tthis._handleInput();\r\n\t\t\tthis._handleScroll();\r\n\t\t});\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, text.view);\r\nexport default {api, view};","import popup from \"../views/popup\";\r\nimport UIManager from \"../core/uimanager\";\r\n\r\nimport {preventEvent} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {toFunctor, extend, copy, isUndefined, delay, bind, toNode} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\n// #include ui/window.js\r\n\r\nconst api = {\r\n\tname:\"suggest\",\r\n\tdefaults:{\r\n\t\tautofocus:false,\r\n\t\ttype:\"list\",\r\n\t\tkeyPressTimeout:1,\r\n\t\tbody:{\r\n\t\t\tyCount:10,\r\n\t\t\tautoheight:true,\r\n\t\t\tbody:true,\r\n\t\t\tselect:true,\r\n\t\t\tborderless:true,\r\n\t\t\tnavigation:true\r\n\t\t},\r\n\t\tfilter:function(item,value){\r\n\t\t\tif (item.value.toString().toLowerCase().indexOf(value.toLowerCase().trim()) > -1) return true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\ttemplate_setter:template,\r\n\tfilter_setter:function(value){\r\n\t\treturn toFunctor(value, this.$scope);\r\n\t},\r\n\t_show_on_key_press:true,\r\n\t$init:function(obj){\r\n\t\tvar temp = {};\r\n\t\textend(temp, copy(this.defaults.body));\r\n\t\ttemp.view = obj.type || this.defaults.type;\r\n\r\n\t\tvar etemp = this._get_extendable_cell(temp);\r\n\t\tif (obj.body)\r\n\t\t\textend(etemp, obj.body, true);\r\n\r\n\t\tif (obj.data)\r\n\t\t\tetemp.data = obj.data;\r\n\t\tif (obj.url)\r\n\t\t\tetemp.url = obj.url;\r\n\t\tif (obj.datatype)\r\n\t\t\tetemp.datatype = obj.datatype;\r\n\r\n\t\tif (obj.id)\r\n\t\t\ttemp.id = temp.id || (obj.id+\"_\"+temp.view);\r\n\r\n\t\tobj.body = temp;\r\n\t\tthis.$ready.push(this._set_on_popup_click);\r\n\r\n\t\tthis.attachEvent(\"onShow\", function(){\r\n\t\t\tif (this._settings.master){\r\n\t\t\t\tvar master = $$(this._settings.master);\r\n\t\t\t\tif(master){\r\n\t\t\t\t\tvar node = master._getInputDiv ? master._getInputDiv() : master.getInputNode();\r\n\t\t\t\t\tnode.setAttribute(\"aria-expanded\", \"true\");\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\tthis._show_selection();\r\n\t\t});\r\n\t\tthis.attachEvent(\"onHide\", function(){\r\n\t\t\tif (this._settings.master){\r\n\t\t\t\tvar master = $$(this._settings.master);\r\n\t\t\t\tif(master){\r\n\t\t\t\t\tvar node = master._getInputDiv ? master._getInputDiv() : master.getInputNode();\r\n\t\t\t\t\tnode.setAttribute(\"aria-expanded\", \"false\");\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._old_text = {};\r\n\t},\r\n\t_get_extendable_cell:function(obj){\r\n\t\treturn obj;\r\n\t},\r\n\t_get_details:function(){\r\n\t\treturn null;\r\n\t},\r\n\t_set_input_value:function(text){\r\n\t\tthis._last_input_target.value = text;\r\n\t},\r\n\t_preselectMasterOption:function(data){\r\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\r\n\t\tlet node;\r\n\r\n\t\tif (this._settings.master){\r\n\t\t\tconst master = $$(this._settings.master);\r\n\t\t\tnode = master.getInputNode();\r\n\r\n\t\t\tif (node){\r\n\t\t\t\t// restore last text to allow 'master' view to save new value on blur\r\n\t\t\t\tconst prev_text = master._settings.text;\r\n\r\n\t\t\t\tif (master.options_setter)\r\n\t\t\t\t\tmaster.$setValue(data.$empty?\"\":data.id);\r\n\t\t\t\telse if (master.$setValueHere)\r\n\t\t\t\t\tmaster.$setValueHere(text, data, this._get_details());\r\n\t\t\t\telse\r\n\t\t\t\t\tmaster.$setValue(text);\r\n\r\n\t\t\t\tmaster._settings.text = prev_text;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this._last_input_target)\r\n\t\t\tthis._set_input_value(text);\r\n\r\n\t\tnode = node || this._last_input_target;\r\n\t\tif (node)\r\n\t\t\tnode.focus();\r\n\t},\r\n\tsetMasterValue:function(data, refresh){\r\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\r\n\r\n\t\tif (this._settings.master){\r\n\t\t\tconst master = $$(this._settings.master);\r\n\t\t\tif (refresh && data.id)\r\n\t\t\t\tmaster.refresh();\r\n\t\t\telse if (master.options_setter)\r\n\t\t\t\tmaster.setValue(data.$empty?\"\":data.id);\r\n\t\t\telse if (master.setValueHere)\r\n\t\t\t\tmaster.setValueHere(text, data, this._get_details());\r\n\t\t\telse\r\n\t\t\t\tmaster.setValue(text);\r\n\t\t}\r\n\t\telse if (this._last_input_target)\r\n\t\t\tthis._set_input_value(text);\r\n\r\n\t\tif (!refresh){\r\n\t\t\tthis.hide();\r\n\t\t\tif (this._last_input_target)\r\n\t\t\t\tthis._last_input_target.focus();\r\n\t\t}\r\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\r\n\t},\r\n\tgetMasterValue:function(){\r\n\t\tif (this._settings.master)\r\n\t\t\treturn $$(this._settings.master).getValue();\r\n\t\treturn null;\r\n\t},\r\n\tgetItemId:function(text){\r\n\t\tvar list = this.getList();\r\n\t\tfor (var key in list.data.pull){\r\n\t\t\tvar obj = list.getItem(key);\r\n\t\t\tif (this._settings.filter.call(this, obj, text))\r\n\t\t\t\treturn obj.id;\r\n\t\t}\r\n\t},\r\n\tgetItemText:function(id){\r\n\t\tvar item = this.getList().getItem(id);\r\n\r\n\t\tif (!item)\r\n\t\t\treturn this._old_text[id] || \"\";\r\n\r\n\t\tif (this._settings.template)\r\n\t\t\treturn this._settings.template.call(this, item, this.type);\r\n\r\n\t\tif (this._settings.textValue)\r\n\t\t\treturn \"\"+item[this._settings.textValue]+\"\";\r\n\t\t\r\n\t\tvar type = this.getList().type;\r\n\t\tvar text = type.template.call(type, item, type);\r\n\r\n\t\treturn (this._old_text[id] = text);\r\n\t},\r\n\tgetSuggestion:function(text){\r\n\t\tvar id,\r\n\t\t\tlist = this.getList(),\r\n\t\t\torder = list.data.order;\r\n\r\n\t\tif (list.getSelectedId)\r\n\t\t\tid = list.getSelectedId();\r\n\r\n\t\tif (text && order.length && (!id || order.find(id) <0) ){\r\n\t\t\tid = order[0];\r\n\t\t\t//ensure that option really does match client-side filtering rules\r\n\t\t\tif (!list.config.dataFeed && !this.config.filter.call(this, list.data.pull[id], text)) return null;\r\n\t\t}\r\n\r\n\t\t//complex id in datatable\r\n\t\tif (id){\r\n\t\t\tif (typeof id == \"object\") id = id+\"\";\r\n\t\t\tif (list.getItem(id).$empty) return null;\r\n\t\t}\r\n\t\treturn id;\r\n\t},\r\n\tgetList:function(){\r\n\t\treturn this._body_cell;\r\n\t},\r\n\t_set_on_popup_click:function(){\r\n\t\tvar list = this.getList();\r\n\t\tvar type = this._settings.type;\r\n\r\n\t\tif (list.count){\r\n\t\t\tlist.attachEvent(\"onItemClick\", bind(function(item){\r\n\t\t\t\tthis.setMasterValue(list.getItem(item));\r\n\t\t\t}, this));\r\n\t\t\tlist.data.attachEvent(\"onstoreupdated\",bind(function(id, obj, mode){\r\n\t\t\t\tif (mode == \"delete\" && id == this.getMasterValue())\r\n\t\t\t\t\tthis.setMasterValue({ id:\"\", text:\"\" }, 1);\r\n\t\t\t\telse if (mode == \"update\" && id == this.getMasterValue()){\r\n\t\t\t\t\tthis.setMasterValue(obj, 1);\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\t\t\tlist.data.attachEvent(\"onAfterFilter\", bind(this._suggest_after_filter, this));\r\n\t\t\t\r\n\t\t\tif (isUndefined(this._settings.fitMaster))\r\n\t\t\t\tthis._settings.fitMaster = true;\r\n\t\t} else if (type == \"calendar\"){\r\n\t\t\tlist.attachEvent(\"onDateSelect\", function(){\r\n\t\t\t\tthis.getParentView().setMasterValue({ value:list.getSelectedDate() }, list.config.multiselect);\r\n\t\t\t});\r\n\t\t\tlist.attachEvent(\"onTodaySet\", function(date){\r\n\t\t\t\tthis.getParentView().setMasterValue({ value:date});\r\n\t\t\t});\r\n\t\t\tlist.attachEvent(\"onDateClear\", function(date){\r\n\t\t\t\tthis.getParentView().setMasterValue({ value:date});\r\n\t\t\t});\r\n\t\t} else if (type == \"colorboard\"){\r\n\t\t\tlist.attachEvent(\"onItemClick\", function(value){\r\n\t\t\t\tthis.getParentView().setMasterValue({ value:value });\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tinput_setter: function(value) {\r\n\t\tthis.linkInput(value);\r\n\t\treturn 0;\r\n\t},\r\n\tlinkInput: function(input){\r\n\t\tvar node;\r\n\t\tif (input.getInputNode){\r\n\t\t\tnode = input.getInputNode();\r\n\t\t\tnode.webix_master_id = input._settings.id;\r\n\t\t} else\r\n\t\t\tnode = toNode(input);\r\n\r\n\t\t// keydown改为keyup，用来支持中文搜索。\tadd by cloud.zhong\r\n\t\t_event(node,\"keyup\",function(e){\r\n\t\t\tif ((node != document.body || this.isVisible()) && (input.config ? (!input.config.readonly) : (!node.getAttribute(\"readonly\"))))\r\n\t\t\t\tthis._suggestions(e);\r\n\t\t}, {bind:this});\r\n\t\t\r\n\t\tif(input._getInputDiv)\r\n\t\t\tnode = input._getInputDiv();\r\n\t\t\r\n\t\tnode.setAttribute(\"aria-autocomplete\", \"list\");\r\n\t\tnode.setAttribute(\"aria-expanded\", \"false\");\r\n\r\n\t\tif(node.tagName === \"DIV\"){\r\n\t\t\tnode.setAttribute(\"aria-live\", \"assertive\");\r\n\t\t\tnode.setAttribute(\"aria-atomic\", \"true\");\r\n\t\t}\r\n\r\n\t\tthis._non_ui_mode = true;\r\n\t},\r\n\t_suggestions: function(e){\r\n\t\t//should be before tab and arrows handlers: IME can call keydown twice\r\n\t\tif (this._last_delay)\r\n\t\t\tthis._last_delay = clearTimeout(this._last_delay);\r\n\r\n\t\te = (e||event);\r\n\t\tvar list = this.getList();\r\n\t\tvar trg = e.target;\r\n\t\tif((trg == document.body && !this.isVisible()) || trg.className ==\"webix_clipbuffer\")\r\n\t\t\treturn;\r\n\r\n\t\tthis._last_input_target = trg;\r\n\t\tthis._settings.master = trg.webix_master_id;\r\n\r\n\t\tvar code = e.keyCode;\r\n\t\t//shift and ctrl\r\n\t\t//remove shift 用来支持中文搜索\tadd by cloud.zhong\r\n\t\tif (code == 17) return;\r\n\r\n\t\t// tab - hide popup and do nothing\r\n\t\tif (code == 9)\r\n\t\t\treturn this._tab_key(e,list);\r\n\r\n\t\t// escape - hide popup\r\n\t\tif (code == 27)\r\n\t\t\treturn this._escape_key(e,list);\r\n\r\n\t\t// enter\r\n\t\tif (code == 13)\r\n\t\t\treturn this.$enterKey(e,list);\r\n\r\n\t\t// up/down/right/left are used for navigation\r\n\t\tif (this._navigate(e) && this.isVisible()){\r\n\t\t\tpreventEvent(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst contentEditable = trg.getAttribute(\"contentEditable\") == \"true\";\r\n\t\tif (isUndefined(trg.value) && !contentEditable) return;\r\n\r\n\t\tthis._last_delay = delay(function(){\r\n\t\t\t//focus moved to the different control, suggest is not necessary\r\n\t\t\tif (!this._non_ui_mode &&\r\n\t\t\t\t\tUIManager.getFocus() != $$(this._settings.master)) return;\r\n\r\n\t\t\tthis._resolve_popup = true;\r\n\t\t\t\r\n\t\t\t//spreadsheet use contentEditable div for cell highlighting\r\n\t\t\t// 中文输入法，处于输入中时，不需要搜索。\tadd by cloud.zhong\r\n\t\t\tvar val = ((contentEditable ? trg.innerText : trg.value) || \"\").trim();\r\n\t\t\tvar lastValue = trg.getAttribute(\"lastValue\") || \"\";\r\n\t\t\t// 搜索值无改时不搜索\r\n\t\t\tif(val === lastValue) return;\r\n\t\t\ttrg.setAttribute(\"lastValue\", val);\r\n\r\n\t\t\tif (this._before_filtering)\r\n\t\t\t\tthis._before_filtering();\r\n\r\n\t\t\t// used to prevent showing popup when it was initialized\r\n\t\t\tif (list.config.dataFeed)\r\n\t\t\t\tlist.filter(\"value\", val);\r\n\t\t\telse if (list.filter){\r\n\t\t\t\tlist.filter(bind(function(item){\r\n\t\t\t\t\treturn this._settings.filter.call(this,item,val);\r\n\t\t\t\t}, this));\r\n\t\t\t}\r\n\t\t}, this, [], this._settings.keyPressTimeout);\r\n\t},\r\n\t_suggest_after_filter:function(){\r\n\t\tif (!this._resolve_popup) return true;\r\n\t\tthis._resolve_popup = false;\r\n\r\n\t\tvar list = this.getList();\r\n\r\n\t\t// filtering is complete\r\n\t\t// if there are as min 1 variant it must be shown, hidden otherwise\r\n\t\tif (list.count() >0){\r\n\t\t\tthis.adjust();\r\n\t\t\tif(!this.isVisible())\r\n\t\t\t\tthis._dont_unfilter = true;\r\n\t\t\tthis.show(this._last_input_target,null,true);\r\n\t\t\tthis._dont_unfilter = false;\r\n\t\t} else {\r\n\t\t\tthis.hide();\r\n\t\t\tthis._last_input_target = null;\r\n\t\t}\r\n\t},\r\n\r\n\tshow:function(node){\r\n\t\tconst input = (node && (node.tagName == \"INPUT\" || node.tagName == \"TEXTAREA\")) ? node : null;\r\n\r\n\t\tif (!this.isVisible() || (input && input != this._last_input_target)){\r\n\t\t\tvar list = this.getList();\r\n\t\t\tif (list.filter && !this._dont_unfilter){\r\n\t\t\t\tlist.filter(\"\");\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$customWidth){\r\n\t\t\t\tthis.$customWidth(node);\r\n\t\t\t}\r\n\t\t\telse if (node && node.tagName && this._settings.fitMaster){\r\n\t\t\t\tthis._settings.width = node.offsetWidth -2 ; //2 - borders\r\n\t\t\t}\r\n\r\n\t\t\tif (list._zoom_level)\r\n\t\t\t\tlist.render();\r\n\r\n\t\t\tthis.adjust();\r\n\r\n\t\t\t// needed to return focus\r\n\t\t\tif (input)\r\n\t\t\t\tthis._last_input_target = input;\r\n\t\t}\r\n\t\tpopup.api.show.apply(this, arguments);\r\n\t},\r\n\t_show_selection:function(list){\r\n\t\tlist = list||this.getList();\r\n\t\tvar value = this.getMasterValue();\r\n\r\n\t\tif( list.select && list.showItem ){\r\n\r\n\t\t\tif (value && list.exists && list.exists(value)){\r\n\t\t\t\tlist.select(value);\r\n\t\t\t\tlist.showItem(value);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlist.unselect();\r\n\t\t\t\tlist.showItem(list.getFirstId());\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(list.setValue){\r\n\t\t\tif (this._settings.master)\r\n\t\t\t\tvalue = $$(this._settings.master).$prepareValue(value);\r\n\t\t\tlist.setValue(value);\r\n\t\t}\r\n\t},\r\n\t$enterKey:function(e, list){\r\n\t\tconst visible = this.isVisible();\r\n\t\tlet value;\r\n\t\tlet master;\r\n\r\n\t\tif (this._settings.master)\r\n\t\t\tmaster = $$(this._settings.master);\r\n\r\n\t\tif (master && master._editable && master._settings.editable)\r\n\t\t\tmaster._applyChanges();\r\n\t\telse if (visible){\r\n\t\t\tif (list.count){\r\n\t\t\t\tvalue = list.getSelectedId(false, true);\r\n\t\t\t\tif (list.count() == 1 && list.getFirstId() != value)\r\n\t\t\t\t\tvalue = list.getFirstId();\r\n\r\n\t\t\t\tif (value) value = list.getItem(value);\r\n\t\t\t} else {\r\n\t\t\t\tif (list.getSelectedDate) value = list.getSelectedDate();\r\n\t\t\t\telse if (list.getValue) value = list.getValue();\r\n\r\n\t\t\t\tif (value) value = { value: value };\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (value)\r\n\t\t\t\tthis.setMasterValue(value);\r\n\t\t}\r\n\r\n\t\tif (visible)\r\n\t\t\tthis.hide();\r\n\t\telse if (this._show_on_key_press)\r\n\t\t\tthis.show(this._last_input_target);\r\n\t},\r\n\t_escape_key:function(){\r\n\t\treturn this.hide();\r\n\t},\r\n\t_tab_key:function(){\r\n\t\treturn this.hide();\r\n\t},\r\n\t/*! suggestions navigation: up/down buttons move selection\r\n\t *\t@param e\r\n\t *\t\tevent object\r\n\t **/\r\n\t_navigate: function(e) {\r\n\t\tvar list = this.getList();\r\n\t\tvar code = e.keyCode;\r\n\t\tvar data;\r\n\r\n\t\tif( list.moveSelection && code < 41 && code > 32 && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey) {\r\n\t\t\t// down and up arrows\r\n\t\t\tif (code === 40 || code === 38) {\r\n\t\t\t\tif (this._show_on_key_press && !this.isVisible())\r\n\t\t\t\t\tthis.show(this._last_input_target);\r\n\r\n\t\t\t\tlet dir = (code === 38) ? \"up\" : \"down\";\r\n\t\t\t\tlist.moveSelection(dir, false, false);\r\n\t\t\t}// other arrows\r\n\t\t\telse {\r\n\t\t\t\tif(list.count || (!list.count && !list.isVisible()))\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\tlet dir;\r\n\t\t\t\tif(code == 33) dir = \"pgup\";\r\n\t\t\t\tif(code == 34) dir = \"pgdown\";\r\n\t\t\t\tif(code == 35) dir = \"bottom\";\r\n\t\t\t\tif(code == 36) dir = \"top\";\r\n\t\t\t\tif(code == 37) dir = \"left\";\r\n\t\t\t\tif(code == 39) dir = \"right\";\r\n\r\n\t\t\t\tlist.moveSelection(dir, false, false);\r\n\t\t\t}\r\n\r\n\t\t\tif (list.count)\r\n\t\t\t\tdata = list.getSelectedItem(false);\r\n\t\t\telse {\r\n\t\t\t\tif (list.getSelectedDate) data = list.getSelectedDate();\r\n\t\t\t\telse if (list.getValue) data = list.getValue();\r\n\r\n\t\t\t\tif (data) data = { value: data };\r\n\t\t\t}\r\n\r\n\t\t\tif (data && this.isVisible())\r\n\t\t\t\tthis._preselectMasterOption(data);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar list = this.getList();\r\n\t\tvar  value = (list.getValue ? list.getValue() : list.getSelectedId()) || \"\";\r\n\t\tvalue = value.id || value;\r\n\r\n\t\t// check empty\r\n\t\tif(list.getItem){\r\n\t\t\tvar item = list.getItem(value);\r\n\t\t\tif(item && item.$empty)\r\n\t\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvar list = this.getList();\r\n\t\tif(value){\r\n\t\t\tif(list.exists(value)){\r\n\t\t\t\tlist.select(value);\r\n\t\t\t\tlist.showItem(value);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tlist.unselect();\r\n\t\t\tlist.showItem(list.getFirstId());\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  popup.view);\r\nexport default {api, view};","import suggest from \"../views/suggest\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {delay, _to_array as toArray, bind, isArray} from \"../webix/helpers\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nconst api = {\r\n\tname:\"multisuggest\",\r\n\tdefaults:{\r\n\t\tseparator:\",\",\r\n\t\ttype:\"layout\",\r\n\t\tbutton:true,\r\n\t\twidth:0,\r\n\t\tfilter:function(item,value){\r\n\t\t\tvar itemText = this.getItemText(item.id);\r\n\t\t\treturn (itemText.toString().toLowerCase().indexOf(value.toLowerCase())>-1);\r\n\t\t},\r\n\t\tbody:{\r\n\t\t\trows:[\r\n\t\t\t\t{ view:\"list\", type:\"multilist\", borderless:true,  autoheight:true, yCount:10, multiselect:\"touch\", select:true,\r\n\t\t\t\t\ton:{\r\n\t\t\t\t\t\tonItemClick: function(id){\r\n\t\t\t\t\t\t\tvar popup = this.getParentView().getParentView();\r\n\t\t\t\t\t\t\tdelay(function(){\r\n\t\t\t\t\t\t\t\tpopup._toggleOption(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}},\r\n\t\t\t\t{ view:\"button\", click:function(){\r\n\t\t\t\t\tvar suggest = this.getParentView().getParentView();\r\n\t\t\t\t\tsuggest.hide();\r\n\t\t\t\t\tdelay(function(){\r\n\t\t\t\t\t\tcallEvent(\"onEditEnd\",[]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\r\n\t_toggleOption: function(id, ev, all){\r\n\t\tvar value = this.getValue();\r\n\t\tvar values = all || toArray(value?this.getValue().split(this._settings.separator):[]);\r\n\t\tvar master = $$(this._settings.master);\r\n\t\t\r\n\t\tif(!all) {\r\n\t\t\tif(values.find(id)<0)\r\n\t\t\t\tvalues.push(id);\r\n\t\t\telse\r\n\t\t\t\tvalues.remove(id);\r\n\t\t}\r\n\r\n\t\tvar data = values.join(this._settings.separator);\r\n\t\tvar text = this.setValue(values).join(this._settings.separator);\r\n\t\tif(master)\r\n\t\t\tmaster.setValue(data);\r\n\t\telse if (this._last_input_target)\r\n\t\t\tthis._last_input_target.value = text;\r\n\r\n\t\tthis.callEvent(\"onValueSuggest\", [{id:data, text:text}]);\r\n\r\n\t\tif(ev){ //only for clicks in checksuggest\r\n\t\t\tvar checkbox = this.getList().getItemNode(id).getElementsByTagName(\"SPAN\");\r\n\t\t\tif(checkbox && checkbox.length) checkbox[0].focus();\r\n\t\t}\r\n\t},\r\n\t_get_extendable_cell:function(obj){\r\n\t\treturn obj.rows[0];\r\n\t},\r\n\t_set_on_popup_click:function(){\r\n\t\tvar button = this.getButton();\r\n\t\tvar text = (this._settings.button?(this._settings.buttonText || i18n.combo.select):0);\r\n\t\tif(button){\r\n\t\t\tif(text){\r\n\t\t\t\tbutton._settings.value = text;\r\n\t\t\t\tbutton.refresh();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tbutton.hide();\r\n\t\t}\r\n\t\tif (this._settings.selectAll)\r\n\t\t\treturn this.getBody().getChildViews()[0].show();\r\n\r\n\t\tvar list = this.getList();\r\n\t\t//for standalone suggests we need to have a normal show/hide logic\r\n\t\t//use a wrapper function, so it can later be cleared in multicombo\r\n\t\tlist.data.attachEvent(\"onAfterFilter\", bind(function(){\r\n\t\t\treturn this._suggest_after_filter();\r\n\t\t}, this));\r\n\t},\r\n\t_show_selection: function(){\r\n\t\tvar list = this.getList();\r\n\t\tvar value = this.getMasterValue();\r\n\t\tif(value){\r\n\t\t\tvalue = value.toString().split(this.config.separator);\r\n\t\t\tif (value[0]){\r\n\t\t\t\tfor (var i = 0; i < value.length; i++){\r\n\t\t\t\t\tif(list.exists(value[i]))\r\n\t\t\t\t\t\tlist.select(value[i], true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetButton:function(){\r\n\t\treturn this.getBody().getChildViews()[1];\r\n\t},\r\n\tgetList:function(){\r\n\t\treturn this.getBody().getChildViews()[0];\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvar text = [];\r\n\t\tvar list = this.getList();\r\n\t\tlist.unselect();\r\n\r\n\t\tif (value){\r\n\t\t\tif (!isArray(value))\r\n\t\t\t\tvalue = value.toString().split(this.config.separator);\r\n\r\n\t\t\tif (value[0]){\r\n\t\t\t\tfor (var i = 0; i < value.length; i++){\r\n\t\t\t\t\tif (list.getItem(value[i])){\r\n\t\t\t\t\t\tif(list.exists(value[i]))\r\n\t\t\t\t\t\t\tlist.select(value[i], true);\r\n\t\t\t\t\t\ttext.push(this.getItemText(value[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._settings.value = value?value.join(this.config.separator):\"\";\r\n\t\treturn text;\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  suggest.view);\r\nexport default {api, view};","import multisuggest from \"../views/multisuggest\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {isArray, copy, delay} from \"../webix/helpers\";\r\nimport i18n from \"../webix/i18n\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nconst api = {\r\n\tname:\"checksuggest\",\r\n\tdefaults:{\r\n\t\tbutton:false,\r\n\t\tselectAll: false,\r\n\t\tbody:{\r\n\t\t\trows:[\r\n\t\t\t\t{ view:\"checkbox\", hidden:true, customCheckbox:false, borderless: false, css:\"webix_checksuggest_select_all\", \r\n\t\t\t\t\tlabelRight:i18n.combo.selectAll, \r\n\t\t\t\t\tlabelWidth:0,\r\n\t\t\t\t\theight:28, inputHeight:20,\r\n\t\t\t\t\ton:{\r\n\t\t\t\t\t\tonItemClick: function(e){\r\n\t\t\t\t\t\t\tvar popup = this.getParentView().getParentView();\r\n\t\t\t\t\t\t\tvar check = popup.getList();\r\n\t\t\t\t\t\t\tvar values = check.data.order;\r\n\t\t\t\t\t\t\tfor(var i = 0; i < values.length; i++) {\r\n\t\t\t\t\t\t\t\tvar value = check.getItem(values[i]);\r\n\t\t\t\t\t\t\t\tvalue.$checked = this.getValue();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar result = this.getValue() ? [].concat(values) : [];\r\n\t\t\t\t\t\t\tpopup._toggleOption(values[0], e, result);\r\n\t\t\t\t\t\t\tcheck.refresh();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonChange: function() {\r\n\t\t\t\t\t\t\tvar link = this.$view.querySelector(\"label\");\r\n\t\t\t\t\t\t\tvar locale = i18n.combo;\r\n\t\t\t\t\t\t\tlink.textContent = this.getValue() ? locale.unselectAll : locale.selectAll;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonAfterRender: function() {\r\n\t\t\t\t\t\t\tvar popup = this.getParentView().getParentView();\r\n\t\t\t\t\t\t\tthis.setValue(popup._is_all_selected()*1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}},\r\n\t\t\t\t{ view:\"list\",  css:\"webix_multilist\", borderless:true, autoheight:true, yCount:10,\r\n\t\t\t\t\ttype:\"checklist\",\r\n\t\t\t\t\ton:{\r\n\t\t\t\t\t\tonItemClick: function(id, e){\r\n\t\t\t\t\t\t\tvar item = this.getItem(id);\r\n\t\t\t\t\t\t\titem.$checked = item.$checked?0:1;\r\n\t\t\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\t\t\tvar popup = this.getParentView().getParentView();\r\n\t\t\t\t\t\t\tpopup._click_stamp = new Date();\r\n\r\n\t\t\t\t\t\t\tpopup._toggleOption(id, e);\r\n\r\n\t\t\t\t\t\t\tif(popup.config.selectAll) {\r\n\t\t\t\t\t\t\t\tif (!item.$checked)\r\n\t\t\t\t\t\t\t\t\tpopup.getBody()._cells[0].setValue(0);\r\n\t\t\t\t\t\t\t\telse if(popup._is_all_selected())\r\n\t\t\t\t\t\t\t\t\tpopup.getBody()._cells[0].setValue(1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ view:\"button\", click:function(){\r\n\t\t\t\t\tvar suggest = this.getParentView().getParentView();\r\n\t\t\t\t\tsuggest.hide();\r\n\t\t\t\t\tdelay(function(){\r\n\t\t\t\t\t\tcallEvent(\"onEditEnd\",[]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\t_is_all_selected:function(){\r\n\t\tvar all = (this.getValue() || \"\").split(this.config.separator);\r\n\t\treturn (all.length === this.getList().count());\r\n\t},\r\n\t_get_extendable_cell:function(obj){\r\n\t\treturn obj.rows[1];\r\n\t},\r\n\tgetButton:function(){\r\n\t\treturn this.getBody().getChildViews()[2];\r\n\t},\r\n\tgetList:function(){\r\n\t\treturn this.getBody().getChildViews()[1];\r\n\t},\r\n\t$init: function(){\r\n\t\tthis._valueHistory = {};\r\n\t\tthis.$ready.push(this._onReady);\r\n\t},\r\n\t_onReady: function(){\r\n\t\tvar list = this.getList();\r\n\t\tif(list.config.dataFeed){\r\n\t\t\tvar suggest = this;\r\n\t\t\tlist.attachEvent(\"onAfterLoad\", function(){\r\n\t\t\t\tsuggest.setValue(suggest._settings.value);\r\n\t\t\t});\r\n\t\t\tlist.getItem = function(id){\r\n\t\t\t\treturn this.data.pull[id] || suggest._valueHistory[id];\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tif(this.config.master && !this.config.selectAll)\r\n\t\t\tthis.getBody().getChildViews()[0].hide();\r\n\t},\r\n\t$enterKey: function(popup,list) {\r\n\t\tif (list.count && list.count()){\r\n\t\t\tif (popup.isVisible()) {\r\n\t\t\t\tvar value = list.getSelectedId(false, true);\r\n\t\t\t\tif(value){\r\n\t\t\t\t\tthis._toggleOption(value);\r\n\t\t\t\t}\r\n\t\t\t\tpopup.hide();\r\n\t\t\t} else {\r\n\t\t\t\tpopup.show(this._last_input_target);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (popup.isVisible())\r\n\t\t\t\tpopup.hide();\r\n\t\t}\r\n\t},\r\n\t_show_selection: function(){\r\n\t\tvar list = this.getList();\r\n\t\tif( list.select)\r\n\t\t\tlist.unselect();\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tvar i,\r\n\t\t\tlist = this.getList(),\r\n\t\t\ttext = [],\r\n\t\t\tvalues = {},\r\n\t\t\tchanged = [];\r\n\r\n\t\tvalue = value || [];\r\n\r\n\t\tif (!isArray(value))\r\n\t\t\tvalue = value.toString().split(this.config.separator);\r\n\t\telse if(list.config.dataFeed)\r\n\t\t\tvalue = this._toMultiValue(value);\r\n\r\n\t\tfor ( i = 0; i < value.length; i++){\r\n\t\t\tvalues[value[i]] = 1;\r\n\t\t\tif(list.getItem(value[i])){\r\n\t\t\t\tif( this._valueHistory)\r\n\t\t\t\t\tthis._valueHistory[value[i]] = copy(list.getItem(value[i]));\r\n\t\t\t\ttext.push(this.getItemText(value[i]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlist.data.each(function(item){\r\n\t\t\tif(item.$checked){\r\n\t\t\t\tif(!values[item.id]){\r\n\t\t\t\t\titem.$checked = 0;\r\n\t\t\t\t\tchanged.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(values[item.id]){\r\n\t\t\t\t\titem.$checked = 1;\r\n\t\t\t\t\tchanged.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},this,true);\r\n\r\n\r\n\t\tfor( i=0; i < changed.length; i++ ){\r\n\t\t\tlist.refresh(changed[i]);\r\n\t\t}\r\n\t\tthis._settings.value = value.length?value.join(this.config.separator):\"\";\r\n\t\treturn text;\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\t_preselectMasterOption: function(){\r\n\t\tvar node, master;\r\n\t\tif (this._settings.master){\r\n\t\t\tmaster = $$(this._settings.master);\r\n\t\t\tnode = master.getInputNode();\r\n\t\t}\r\n\t\tnode = node || this._last_input_target;\r\n\t\tif(node)\r\n\t\t\tnode.focus();\r\n\t},\r\n\t_toMultiValue: function(value){\r\n\t\tif(value && isArray(value)){\r\n\t\t\tvar values = [];\r\n\t\t\tfor(var i =0; i < value.length; i++){\r\n\t\t\t\tif(value[i].id){\r\n\t\t\t\t\tthis._valueHistory[value[i].id] = copy(value[i]);\r\n\t\t\t\t\tvalues.push(value[i].id);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvalues.push(value[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvalue = values;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  multisuggest.view);\r\nexport default {api, view};","import suggest from \"../views/suggest\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\n\r\nconst api = {\r\n\tname:\"datasuggest\",\r\n\tdefaults:{\r\n\t\ttype:\"dataview\",\r\n\t\tfitMaster:false,\r\n\t\twidth:0,\r\n\t\tbody:{\r\n\t\t\txCount:3,\r\n\t\t\tautoheight:true,\r\n\t\t\tselect:true\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  suggest.view);\r\nexport default {api, view};","import suggest from \"../views/suggest\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {bind} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"gridsuggest\",\r\n\tdefaults:{\r\n\t\ttype:\"datatable\",\r\n\t\tfitMaster:false,\r\n\t\twidth:0,\r\n\t\tbody:{\r\n\t\t\tnavigation:true,\r\n\t\t\tautoheight:true,\r\n\t\t\tautowidth:true,\r\n\t\t\tselect:true\r\n\t\t},\r\n\t\tfilter:function(item, value){\r\n\t\t\tvar text = this.config.template(item);\r\n\t\t\tif (text.toString().toLowerCase().indexOf(value.toLowerCase())===0) return true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\t$init:function(obj){\r\n\t\tif (!obj.body.columns)\r\n\t\t\tobj.body.autoConfig = true;\r\n\t\tif (!obj.template)\r\n\t\t\tobj.template = bind(this._getText, this);\r\n\t},\r\n\t_getText:function(item){\r\n\t\tvar grid = this.getBody();\r\n\t\tvar value = this.config.textValue || grid.config.columns[0].id;\r\n\t\treturn grid.getText(item.id, value);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  suggest.view);\r\nexport default {api, view};","import suggest from \"../views/suggest\";\r\nimport {getSelectionRange, setSelectionRange, preventEvent} from \"../webix/html\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\n\r\n\r\nconst api = {\r\n\tname:\"mentionsuggest\",\r\n\tdefaults:{\r\n\t\tsymbol:\"@\",\r\n\t\tfilter:function(data, value){\r\n\t\t\tconst s = this._settings.symbol;\r\n\t\t\tvalue = value.substring(0, this._last_cursor_pos);\r\n\t\t\tif (value.indexOf(s) === -1) return false;\r\n\t\t\telse {\r\n\t\t\t\tvalue = value.substring(value.lastIndexOf(s)+s.length);\r\n\t\t\t\tif (value.length){\r\n\t\t\t\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\r\n\t\t\t\t\treturn text.toString().toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onValueSuggest\", this._before_filtering);\r\n\t},\r\n\t$enterKey:function(e){\r\n\t\tif (this.isVisible()){\r\n\t\t\tpreventEvent(e);\r\n\r\n\t\t\tlet master;\r\n\t\t\tif (this._settings.master)\r\n\t\t\t\tmaster = $$(this._settings.master);\r\n\r\n\t\t\tif (master && master.callEvent)\r\n\t\t\t\tmaster.callEvent(\"onEnter\");\r\n\t\t}\r\n\r\n\t\treturn suggest.api.$enterKey.apply(this, arguments);\r\n\t},\r\n\t_before_filtering:function(){\r\n\t\tif (this._last_input_target)\r\n\t\t\tthis._last_cursor_pos = getSelectionRange(this._last_input_target).start;\r\n\t},\r\n\t_get_details:function(){\r\n\t\treturn { pos:this._last_cursor_pos, symbol:this._settings.symbol };\r\n\t},\r\n\t_preselectMasterOption:function(){},\r\n\t_set_input_value:function(text){\r\n\t\tconst s = this._settings.symbol;\r\n\t\tlet value = this._last_input_target.value;\r\n\t\tlet last = value.substring(this._last_cursor_pos);\r\n\r\n\t\tvalue = value.substring(0, this._last_cursor_pos);\r\n\t\tvalue = value.substring(0, value.lastIndexOf(s)+s.length) + text;\r\n\r\n\t\tthis._last_input_target.value = value + last;\r\n\t\tsetSelectionRange(this._last_input_target, value.length);\r\n\t},\r\n\t_show_on_key_press:false\r\n};\r\n\r\n\r\nconst view = protoUI(api,  suggest.view);\r\nexport default {api, view};","import {removeCss, addCss, getTextSize} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {extend, bind, copy, isUndefined} from \"../webix/helpers\";\r\nimport {event} from \"../webix/htmlevents\";\r\n\r\nimport template from \"../webix/template\";\r\nimport i18n from \"../webix/i18n\";\r\nimport wDate from \"../core/date\";\r\n\r\nimport layout from \"../views/layout\";\r\n\r\nconst api = {\r\n\tname:\"daterange\",\r\n\tdefaults:{\r\n\t\tbutton:false,\r\n\t\ticons:false,\r\n\t\tcalendarCount:2,\r\n\t\tborderless:false\r\n\t},\r\n\t$init:function(config){\r\n\t\tconfig.calendar = config.calendar || {};\r\n\t\tconfig.value = this._correct_value(config.value);\r\n\t\tdelete config.calendar.type; // other types are not implemented\r\n\t\t\r\n\t\tthis._viewobj.className += \" webix_daterange\";\r\n\t\tthis._zoom_level = this._types[config.calendar.type] || 0;\r\n\r\n\t\tvar cols = [],\r\n\t\t\tskinConf = $active.calendar,\r\n\t\t\tcheight = skinConf && skinConf.height ? skinConf.height : 0,\r\n\t\t\tcwidth = skinConf && skinConf.width ? skinConf.width : 0,\r\n\t\t\trheight = cheight||250,\r\n\t\t\trwidth = cwidth||250,\r\n\t\t\tcalendar = extend({ view:\"calendar\", width:cwidth, height:cheight }, config.calendar || {}, true),\r\n\t\t\tcount = config.calendarCount = this._zoom_level === 0 ? (config.calendarCount || this.defaults.calendarCount) : this.defaults.calendarCount,\r\n\t\t\tbasecss = (calendar.css?calendar.css + \" \":\"\")+\"webix_range_\",\r\n\t\t\tstart = config.value.start || new Date();\r\n\t\t\r\n\t\tfor(var i = 0; i<count; i++){\r\n\t\t\tvar date = wDate.add(start, this._steps[this._zoom_level]*i, \"month\", true);\r\n\r\n\t\t\textend(calendar, {\r\n\t\t\t\tevents:bind(this._isInRange, this),\r\n\t\t\t\tcss:basecss+(count ===1?\"\":(i === 0 ? \"0\" : (i+1 == count ? \"N\" :\"1\"))),\r\n\t\t\t\tmonthSelect:(i===0 || i+1===count),\r\n\t\t\t\ttimepicker: this._zoom_level === 0?config.timepicker:false,\r\n\t\t\t\tborderless:true,\r\n\t\t\t\tdate:date\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\tcols.push(copy(calendar));\r\n\t\t}\r\n\r\n\r\n\t\tconfig.rows = [\r\n\t\t\t{ type:\"clean\", cols: cols}\r\n\t\t];\r\n\t\tif (config.button || config.icons)\r\n\t\t\tconfig.rows.push( this._footer_row(config, rwidth*count) );\r\n\t\t\r\n\t\tconfig.height = isUndefined(config.height) ? rheight+(config.icons || config.button?30:0) : config.height;\r\n\t\tconfig.width = isUndefined(config.width) ? rwidth*count : config.width;\r\n\t\tconfig.type = \"line\";\r\n\t\tthis.$ready.push(this._after_init);\r\n\r\n\t\tevent(this.$view, \"keydown\", bind(function(e){\r\n\t\t\tthis._onKeyPress( e.which || e.keyCode, e);\r\n\t\t}, this));\r\n\t},\r\n\tvalue_setter:function(value){\r\n\t\treturn this._correct_value(value);\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this._settings.value;\r\n\t},\r\n\tsetValue:function(value, silent){\r\n\t\tvalue = this._correct_value(value);\r\n\t\tthis._settings.value = value;\r\n\r\n\t\tvar start = value.start || value.end || new Date();\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis._cals[0].showCalendar(value.start);\r\n\t\t\t\r\n\t\t\tfor(var i = 1; i<this._cals.length; i++){\r\n\t\t\t\tthis._cals[i]._settings.date = start;\r\n\t\t\t\tthis._changeDateSilent(this._cals[i], 1, i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.callEvent(\"onChange\", [value]);\r\n\t\tthis.refresh();\r\n\t},\r\n\trefresh:function(){\r\n\t\tfor(var i = 0; i<this._cals.length; i++){\r\n\r\n\t\t\tif(this._cals[i]._zoom_level === this._zoom_level){\r\n\t\t\t\tremoveCss(this._cals[i].$view, \"webix_cal_timepicker\");\r\n\t\t\t\tremoveCss(this._cals[i].$view, \"webix_range_timepicker\");\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar rel = this._related_date(this._cals[i].getVisibleDate());\r\n\t\t\t\tif(rel.start || rel.end){\r\n\t\t\t\t\tthis._cals[i]._settings.date = rel.start || rel.end;\r\n\t\t\t\t\tif(this._settings.timepicker){\r\n\t\t\t\t\t\tvar css = \"webix_\"+(rel.start && rel.end?\"range\":\"cal\")+\"_timepicker\";\r\n\t\t\t\t\t\taddCss(this._cals[i].$view, css);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\twDate.datePart(this._cals[i]._settings.date);\r\n\r\n\t\t\t\tthis._cals[i].refresh();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\taddToRange:function(date){\r\n\t\tvar value = this._add_date(this._string_to_date(date));\r\n\t\tthis.setValue(value);\r\n\t},\r\n\t_icons:[\r\n\t\t{\r\n\t\t\ttemplate:function(){\r\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>\"+i18n.calendar.today+\"</span>\";\r\n\t\t\t},\r\n\t\t\ton_click:{\r\n\t\t\t\t\"webix_cal_icon_today\":function(){\r\n\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\tif(!this._settings.timepicker)\r\n\t\t\t\t\t\tdate = wDate.datePart(date);\r\n\t\t\t\t\tthis.addToRange(date);\r\n\t\t\t\t\tthis.callEvent(\"onTodaySet\",[this.getValue()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttemplate:function(){\r\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>\"+i18n.calendar.clear+\"</span>\";\r\n\t\t\t},\r\n\t\t\ton_click:{\r\n\t\t\t\t\"webix_cal_icon_clear\":function(){\r\n\t\t\t\t\tthis.setValue(\"\");\r\n\t\t\t\t\tthis.callEvent(\"onDateClear\", []);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t],\r\n\t_icons_template:function(icons){\r\n\t\tif(!icons)\r\n\t\t\treturn { width:0};\r\n\t\telse{\r\n\t\t\ticons = (typeof icons ==\"object\") ? icons:this._icons; //custom or default \r\n\t\t\tvar icons_template = { css:\"webix_cal_footer \", borderless:true, template:\"<div class='webix_cal_icons'>\", onClick:{}};\r\n\r\n\t\t\tfor(var i = 0; i<icons.length; i++){\r\n\t\t\t\tif(icons[i].template){\r\n\t\t\t\t\tvar itemplate = (typeof(icons[i].template) == \"function\"?icons[i].template: template(icons[i].template));\r\n\t\t\t\t\ticons_template.template += itemplate.call(this);\r\n\t\t\t\t}\t\r\n\t\t\t\tif(icons[i].on_click){\r\n\t\t\t\t\tfor(var k in icons[i].on_click){\r\n\t\t\t\t\t\ticons_template.onClick[k] = bind(icons[i].on_click[k], this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ticons_template.template += \"</div>\";\r\n\t\t\ticons_template.width = getTextSize(icons_template.template).width+30;\r\n\t\t\treturn icons_template;\r\n\t\t}\r\n\t},\r\n\t_footer_row:function(config, width){\r\n\t\tvar button = { view:\"button\", value:i18n.calendar.done,\r\n\t\t\tminWidth:100, maxWidth:230, align:\"center\",\r\n\t\t\tclick:function(){\r\n\t\t\t\tthis.getParentView().getParentView().hide();\r\n\t\t\t}};\r\n\r\n\t\tvar icons = this._icons_template(config.icons);\r\n\r\n\t\tvar row = { css:\"webix_range_footer\", height:30, cols:[\r\n\t\t\t{ width:icons.width }\r\n\t\t]};\r\n\t\tif((config.button || config.icons) && (icons.width*2+button.minWidth) > width)\r\n\t\t\trow.cols[0].width = 0;\r\n\r\n\t\trow.cols.push(config.button ? button : {});\r\n\t\trow.cols.push(icons);\r\n\r\n\t\treturn row;\r\n\t},\r\n\t_types:{\r\n\t\t\"time\":-1,\r\n\t\t\"month\":1,\r\n\t\t\"year\":2\r\n\t},\r\n\t_steps:{\r\n\t\t0:1,\r\n\t\t1:12,\r\n\t\t2:120\r\n\t},\r\n\t_correct_value:function(value){\r\n\t\tif(!value) value = { start:null, end:null};\r\n\r\n\t\tif(!value.start && !value.end)\r\n\t\t\tvalue = {start: value};\r\n\t\t\r\n\t\tvalue.end = this._string_to_date(value.end) || null;\r\n\t\tvalue.start = this._string_to_date(value.start) || null;\r\n\r\n\t\tif((value.end && value.end < value.start) || !value.start)\r\n\t\t\tvalue.end = [value.start, value.start = value.end][0];\r\n\t\treturn value;\r\n\t},\r\n\t_string_to_date:function(date){\r\n\t\tif(typeof date == \"string\"){\r\n\t\t\tdate = i18n.parseFormatDate(date);\r\n\t\t}\r\n\t\treturn isNaN(date*1) ? null : date;\r\n\t},\r\n\t_isInRange:function(date, isOutside){\r\n\t\tif (isOutside) return;\r\n\t\tvar v = this._settings.value,\r\n\t\t\ts = v.start? wDate.datePart(wDate.copy(v.start)) : null,\r\n\t\t\te = v.end ? wDate.datePart(wDate.copy(v.end)) : null,\r\n\t\t\td = wDate.datePart(date),\r\n\t\t\ttomorrow = wDate.add(d,1,\"day\",true),\r\n\t\t\tyesterday = wDate.add(d,-1,\"day\",true),\r\n\t\t\tcss = \"\";\r\n\r\n\t\tif(d>=s && e && d<=e){\r\n\t\t\tcss = \"webix_cal_range\";\r\n\t\t\tif(wDate.equal(yesterday, s))\r\n\t\t\t\tcss += \" webix_cal_range_first\";\r\n\t\t\tif(wDate.equal(tomorrow, e))\r\n\t\t\t\tcss += \" webix_cal_range_last\";\r\n\t\t}\r\n\t\tif(wDate.equal(d, s))\r\n\t\t\tcss = \"webix_cal_range_start\";\r\n\t\tif(wDate.equal(d, e))\r\n\t\t\tcss = \"webix_cal_range_end\";\r\n\r\n\t\tvar holiday =wDate.isHoliday(date)+\" \" || \"\";\r\n\t\treturn css+\" \"+holiday;\r\n\t},\r\n\t_after_init:function(){\r\n\t\tvar cals = this._cals = this.getChildViews()[0].getChildViews();\r\n\t\tvar range = this;\r\n\t\tvar masterId = this.config.id;\r\n\r\n\t\tthis._cals_hash = {};\r\n\r\n\t\tfor(var i = 0; i<cals.length; i++){\r\n\t\t\tcals[i].config.master = masterId;\r\n\t\t\tthis._cals_hash[cals[i].config.id] = i;\r\n\r\n\t\t\t//events\r\n\t\t\tcals[i].attachEvent(\"onBeforeDateSelect\", function(date){ return range._on_date_select(this, date); });\r\n\t\t\tcals[i].attachEvent(\"onBeforeZoom\", function(zoom){ return range._before_zoom(this, zoom); });\r\n\t\t\t\r\n\t\t\tif(i===0 || i  === cals.length-1){\r\n\t\t\t\tcals[i].attachEvent(\"onAfterMonthChange\", bind(this._month_change, this));\r\n\t\t\t\tcals[i].attachEvent(\"onAfterZoom\", function(zoom, oldzoom){ range._after_zoom(this, zoom, oldzoom);});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this._settings.timepicker)\r\n\t\t\tthis.refresh();\r\n\t},\r\n\t_before_zoom:function(view, zoom){\r\n\t\tvar ind = this._getIndexById(view.config.id);\r\n\r\n\t\tif(zoom >=0 && ind>0 && ind !== this._cals.length-1)\r\n\t\t\treturn false;\r\n\t\tif(zoom ===-1){ //time mode\r\n\t\t\tvar rel = this._related_date(view.getVisibleDate());\r\n\t\t\tif(rel.start && rel.end) //both dates are in one calendar\r\n\t\t\t\tview._settings.date = rel[this._time_mode];\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_month_change:function(now, prev){\r\n\t\tvar dir = now>prev ? 1: -1;\r\n\t\tvar start = now>prev ? this._cals[this._cals.length-1] : this._cals[0];\r\n\t\tvar step = start._zoom_logic[start._zoom_level]._changeStep;\r\n\r\n\t\tthis._shift(dir, step, start);\r\n\t\tthis.refresh();\r\n\t},\r\n\t_after_zoom:function(start, zoom, oldzoom){\r\n\t\tvar step = start._zoom_logic[start._zoom_level]._changeStep;\r\n\t\tvar ind = this._getIndexById(start.config.id);\r\n\t\tvar dir = ind === 0 ? 1 :-1;\r\n\t\tif(!this._cals[ind+dir]) \r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar next = this._cals[ind+dir]._settings.date;\r\n\t\t\r\n\t\tif(oldzoom>zoom && zoom >=0){\r\n\t\t\tvar diff = 0;\r\n\t\t\tif(zoom === 1){ //year was changed \r\n\t\t\t\tvar year = next.getFullYear();\r\n\t\t\t\tif(this._zoom_level || (dir === -1 && next.getMonth() === 11) || (dir ===1 && next.getMonth() === 0))\r\n\t\t\t\t\tyear = year - dir;\r\n\t\t\t\tdiff = start._settings.date.getFullYear()-year;\r\n\t\t\t}\r\n\t\t\telse if(zoom === 0 ){//month was changed\r\n\t\t\t\tvar month = next.getMonth()-dir;\r\n\t\t\t\tif(month === 12 || month ==-1)\r\n\t\t\t\t\tmonth = (month === -1) ? 11: 0;\r\n\t\t\t\t\r\n\t\t\t\tdiff = start._settings.date.getMonth()-month;\r\n\t\t\t}\r\n\t\t\tthis._shift(diff, step, start);\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\t},\r\n\t_changeDateSilent:function(view, dir, step){\r\n\t\tview.blockEvent();\r\n\t\tif(view._zoom_level>=0)\r\n\t\t\tview._changeDate(dir, step);\r\n\t\tview.unblockEvent();\r\n\t},\r\n\t_getIndexById:function(id){\r\n\t\treturn this._cals_hash[id];\r\n\t},\r\n\t_shift:function(dir, step, start){\r\n\t\tfor(var i =0; i<this._cals.length; i++){\r\n\t\t\tvar next = this._cals[i];\r\n\t\t\tif(!start || next.config.id !==start.config.id)\r\n\t\t\t\tthis._changeDateSilent(next, dir, step);\r\n\t\t}\r\n\t},\r\n\t_related_date:function(date){\r\n\t\tvar v = this._settings.value;\r\n\t\tvar rel = {};\r\n\t\tif(v.start && v.start.getYear() === date.getYear() && v.start.getMonth() === date.getMonth())\r\n\t\t\trel.start = v.start;\r\n\t\tif(v.end && v.end.getYear() === date.getYear() && v.end.getMonth() === date.getMonth())\r\n\t\t\trel.end = v.end;\r\n\t\treturn rel;\r\n\t},\r\n\t_set_time:function(date, source){\r\n\t\tdate.setHours(source.getHours());\r\n\t\tdate.setMinutes(source.getMinutes());\r\n\t\tdate.setSeconds(source.getSeconds());\r\n\t\tdate.setMilliseconds(source.getMilliseconds());\r\n\t},\r\n\t_add_date:function(date, ind){\r\n\t\tvar v = copy(this._settings.value);\r\n\t\t//year, month\r\n\t\tif(this._zoom_level !==0 && !isUndefined(ind)){\r\n\t\t\tvar key = ind?\"end\":\"start\";\r\n\t\t\tv[key] = date;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(v.start && !v.end)\r\n\t\t\t\tv.end = date;\r\n\t\t\telse {\r\n\t\t\t\tv.start = date;\r\n\t\t\t\tv.end = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn v;\r\n\t},\r\n\t_on_date_select:function(view, date){\r\n\t\tif(this.callEvent(\"onBeforeDateSelect\", [date])){\r\n\t\t\tvar v = this._settings.value;\r\n\r\n\t\t\tif(view._zoom_level<0){ //time set\r\n\t\t\t\tvar rel = copy(this._related_date(date)),\r\n\t\t\t\t\treldate;\r\n\t\t\t\t\r\n\t\t\t\treldate = (rel.start && rel.end) ? rel[this._time_mode] : rel.start || rel.end;\r\n\t\t\t\tif(reldate)\r\n\t\t\t\t\tthis._set_time(reldate, date);\r\n\r\n\t\t\t\tview._zoom_level = 0;\r\n\r\n\t\t\t\tv = extend(copy(v), rel, true);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar vis = view.getVisibleDate();\r\n\t\t\t\tvar ind = this._getIndexById(view.config.id);\r\n\t\t\t\t\r\n\t\t\t\tif(date.getMonth() !== vis.getMonth() && (ind ===0 || ind === this._cals.length-1)){\r\n\t\t\t\t\tvar dir = date>vis? 1 : -1;\r\n\t\t\t\t\tthis._shift(dir, 1);\r\n\t\t\t\t}\r\n\t\t\t\tv = this._add_date(date, ind);\r\n\t\t\t}\r\n\r\n\t\t\tif(view._zoom_level !== this._zoom_level)\r\n\t\t\t\tview.showCalendar(date);\r\n\t\t\t\r\n\t\t\tthis.setValue(v, true);\r\n\t\t\tthis.callEvent(\"onAfterDateSelect\", [this.getValue()]);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  layout.view);\r\nexport default {api, view};","import suggest from \"../views/suggest\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {copy, bind} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"daterangesuggest\",\r\n\tdefaults:{\r\n\t\ttype:\"daterange\",\r\n\t\tbody: {\r\n\t\t\tview:\"daterange\", icons:true, button:true, borderless:true\r\n\t\t}\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this.getRange().getValue();\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tthis.getRange().setValue(copy(value));\r\n\t},\r\n\tgetRange:function(){\r\n\t\treturn this.getBody();\r\n\t},\r\n\tgetButton:function(){\r\n\t\treturn this.getBody().getChildViews()[1].getChildViews()[1];\r\n\t},\r\n\t_setValue:function(value, hide){\r\n\t\tvar master = $$(this._settings.master);\r\n\r\n\t\tif(master){\r\n\t\t\tmaster.setValue(value);\r\n\t\t\tif(hide) this.hide();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.setValue(value);\r\n\t},\r\n\t_set_on_popup_click:function(){\r\n\t\tvar range  = this.getRange();\r\n\t\trange.attachEvent(\"onAfterDateSelect\", bind(function(value) {this._setValue(value);}, this));\r\n\t\trange.attachEvent(\"onDateClear\", bind(function(value) {this._setValue(value);}, this));\r\n\t\trange.attachEvent(\"onTodaySet\", bind(function(value) {this._setValue(value);}, this));\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  suggest.view);\r\nexport default {api, view};","import datepicker from \"../views/datepicker\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {copy} from \"../webix/helpers\";\r\nimport i18n from \"../webix/i18n\";\r\n\r\n\r\nconst api = {\r\n\t$cssName:\"datepicker\",\r\n\tname:\"daterangepicker\",\r\n\t$init:function(config){\r\n\t\t//set non-empty initial value\r\n\t\tthis._settings.value = {};\r\n\t\t// other types are not implemented\r\n\t\tdelete config.type;\r\n\t\t// only start/end values can be selected\r\n\t\tdelete config.multiselect;\r\n\t},\r\n\tdefaults:{\r\n\t\tseparator:\" - \"\r\n\t},\r\n\t_init_popup:function(){\r\n\t\tvar obj = this._settings;\r\n\t\tif (obj.suggest)\r\n\t\t\tobj.popup = obj.suggest;\r\n\t\telse if (!obj.popup){\r\n\t\t\tobj.popup = obj.suggest = this.suggest_setter({\r\n\t\t\t\tview:\"daterangesuggest\", body:{\r\n\t\t\t\t\ttimepicker:obj.timepicker, calendarCount:obj.calendarCount, height:250+(obj.button || obj.icons?30:0)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis._init_once = function(){};\r\n\t},\r\n\t$prepareValue:function(value){\r\n\t\tvalue = value || {};\r\n\t\tvalue.start = datepicker.api.$prepareValue.call(this, value.start?value.start:null);\r\n\t\tvalue.end = datepicker.api.$prepareValue.call(this, value.end?value.end:null);\r\n\r\n\t\tvar daterange = $$(this._settings.popup).getRange();\r\n\t\treturn copy(daterange._correct_value(value));\r\n\t},\r\n\t$compareValue:function(oldvalue, value){\r\n\t\tvar compare = datepicker.api.$compareValue;\r\n\t\tvar start = compare.call(this, oldvalue.start, value.start);\r\n\t\tvar end = compare.call(this, oldvalue.end, value.end);\r\n\r\n\t\treturn (start && end);\r\n\t},\r\n\t$setValue:function(value){\r\n\t\tvalue = value || {};\r\n\r\n\t\tthis._settings.text = (value.start?this._get_visible_text(value.start):\"\")+(value.end?(this._settings.separator + this._get_visible_text(value.end)):\"\");\r\n\t\tthis._set_visible_text();\r\n\t},\r\n\t$render:function(obj){\r\n\t\tobj.value = this.$prepareValue(obj.value);\r\n\t\tthis.$setValue(obj.value);\r\n\t},\r\n\tgetValue:function(){\r\n\t\tvar value = this._settings.value;\r\n\r\n\t\tif (!this._rendered_input)\r\n\t\t\tvalue = this.$prepareValue(value) || null;\r\n\t\telse if (this._settings.editable){\r\n\t\t\tvar formatDate = this._formatDate||i18n.dateFormatDate;\r\n\t\t\tlet iValue = (this.getInputNode().value||\"\").split(this._settings.separator);\r\n\t\t\tvalue = this._formatValue(formatDate, {start:iValue[0], end:iValue[1]});\r\n\t\t}\r\n\r\n\t\tif (this._settings.stringResult){\r\n\t\t\tvar formatStr = i18n.parseFormatStr;\r\n\t\t\treturn this._formatValue(formatStr, value);\r\n\t\t}\r\n\t\t\r\n\t\treturn value||null;\r\n\t},\r\n\t_formatValue:function(format, value){\r\n\t\tif(value.start) value.start = format(value.start);\r\n\t\tif(value.end) value.end = format(value.end);\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  datepicker.view);\r\nexport default {api, view};","import toolbar from \"../views/toolbar\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\n\r\nconst api = {\r\n\tname: \"excelbar\",\r\n\tdefaults:{\r\n\t\tpadding:0,\r\n\t\ttype:\"line\"\r\n\t},\r\n\t$init:function(config){\r\n\t\tconfig.cols = [\r\n\t\t\t{ view:\"tabbar\", options:[\"\"], optionWidth:200, borderless:true, on:{\r\n\t\t\t\tonaftertabclick:function(){\r\n\t\t\t\t\tthis.getParentView().callEvent(\"onExcelSheetSelect\", [this.getValue()]);\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t];\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this.getInput().getValue();\r\n\t},\r\n\tsetValue:function(value){\r\n\t\treturn this.getInput().setValue(value);\r\n\t},\r\n\tgetInput:function(){\r\n\t\treturn this.getChildViews()[0];\r\n\t},\r\n\tsetSheets:function(sheets){\r\n\t\tvar input = this.getInput();\r\n\t\tinput.config.options = sheets;\r\n\t\tinput.refresh();\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  toolbar.view);\r\nexport default {api, view};","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"excelviewer\", defaults:{\r\n\ttemplate:\"GPL version doesn't support excelviewer <br> You need Webix PRO\"\r\n}}, template.view);","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"pdfbar\", defaults:{\r\n\ttemplate:\"GPL version doesn't support pdfbar <br> You need Webix PRO\"\r\n}}, template.view);","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"pdfviewer\", defaults:{\r\n\ttemplate:\"GPL version doesn't support pdfviewer <br> You need Webix PRO\"\r\n}}, template.view);","import base from \"../views/view\";\r\nimport {create} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {uid} from \"../webix/helpers\";\r\n\r\n\r\n/*\r\n\tUI:Video\r\n*/\r\n// #include ui/view.js\r\nconst api = {\r\n\tname:\"video\",\r\n\t$init:function(config){\r\n\t\tif (!config.id) config.id = uid();\r\n\t\tthis.$ready.push(this._init_video);\r\n\t},\r\n\t_init_video:function(){\r\n\t\tvar c = this._settings;\r\n\t\tthis._contentobj  = create(\"video\",{\r\n\t\t\t\"class\":\"webix_view_video\",\r\n\t\t\t\"style\":\"width:100%;height:100%;\",\r\n\t\t\t\"autobuffer\":\"autobuffer\"\r\n\t\t},\"\");\r\n\t\tif(c.poster)\r\n\t\t\tthis._contentobj.poster=c.poster;\r\n\r\n\t\tif(c.src){\r\n\t\t\tif(typeof c.src!= \"object\")\r\n\t\t\t\tc.src = [c.src];\r\n\t\t\tfor(var i = 0; i < c.src.length;i++)\r\n\t\t\t\tthis._contentobj.innerHTML += \" <source src=\\\"\"+ c.src[i]+\"\\\">\";\r\n\t\t}\r\n\t\r\n\t\tif(c.controls)\r\n\t\t\tthis._contentobj.controls=true;\r\n\t\tif(c.autoplay)\r\n\t\t\tthis._contentobj.autoplay=true;\r\n\t\tthis._viewobj.appendChild(this._contentobj);\r\n\t},\r\n\tgetVideo:function(){\r\n\t\treturn this._contentobj;\r\n\t},\r\n\tdefaults:{\r\n\t\tsrc:\"\",\r\n\t\tcontrols: true\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  base.view);\r\nexport default {api, view};","import base from \"../views/view\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\nimport promise from \"../thirdparty/promiz\";\r\nimport {extend, bind, isUndefined} from \"../webix/helpers\";\r\n\r\n\r\nvar google, script;\r\nconst api = {\r\n\tname:\"geochart\",\r\n\tdefaults:{\r\n\t\tchart:{\r\n\t\t\tdisplayMode:\"auto\",\r\n\t\t\tregion:\"world\",\r\n\t\t\tresolution:\"countries\"\r\n\t\t}\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.$view.innerHTML = \"<div class='webix_map_content' style='width:100%;height:100%'></div>\";\r\n\t\tthis._contentobj = this.$view.firstChild;\r\n\t\tthis._waitMap = promise.defer();\r\n\r\n\t\tconfig.chart = extend(config.chart||{}, this.defaults.chart);\r\n\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tthis.$ready.push(this.render);\r\n\r\n\t\tthis.data.attachEvent(\"onClearAll\", bind(this._refreshColumns, this)); \r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(this._drawData, this));\r\n\t},\r\n\tgetMap:function(waitMap){\r\n\t\treturn waitMap?this._waitMap:this._map;\r\n\t},\r\n\t_getCallBack:function(prev){\r\n\t\treturn bind(function(){\r\n\t\t\tif (typeof prev === \"function\") prev();\r\n\r\n\t\t\tgoogle = google || window.google;\r\n\t\t\tthis._initMap();\r\n\t\t}, this);\r\n\t},\r\n\trender:function(){\r\n\t\tif(typeof window.google==\"undefined\"||typeof window.google.charts==\"undefined\"){\r\n\t\t\tif(!script){\r\n\t\t\t\tscript = document.createElement(\"script\");\r\n\t\t\t\tscript.type = \"text/javascript\";\r\n\r\n\t\t\t\tscript.src = \"//www.gstatic.com/charts/loader.js\";\r\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(script);\r\n\t\t\t}\r\n\t\t\tscript.onload = this._getCallBack(script.onload);\r\n\t\t}\r\n\t\telse //there's a custom link to google api in document head\r\n\t\t\t(this._getCallBack())();\r\n\t},\r\n\t_initMap:function(){\r\n\t\tif(!google.visualization || !google.visualization.GeoChart){\r\n\t\t\tgoogle.charts.load(\"current\", {\r\n\t\t\t\t\"packages\":[\"geochart\"],\r\n\t\t\t\t\"mapsApiKey\": this._settings.key\r\n\t\t\t});\r\n\t\t\tgoogle.charts.setOnLoadCallback(bind(function(){\r\n\t\t\t\tthis._initMap();\r\n\t\t\t}, this));\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis._map = new google.visualization.GeoChart(this._contentobj);\r\n\t\t\tthis._mapEvents();\r\n\t\t\t\r\n\t\t\tthis._waitMap.resolve(this._map);\r\n\t\t}\r\n\t},\r\n\t$onLoad:function(obj){\r\n\t\tif(!this._map){\r\n\t\t\tthis._waitMap.then(bind(function(){\r\n\t\t\t\tthis.parse(obj, this._settings.datatype);\r\n\t\t\t}, this));\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_drawData:function(){\r\n\t\tif(!this._map){\r\n\t\t\tif(!this._map) \r\n\t\t\t\tthis._waitMap.then(bind(this._drawData, this));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\t\r\n\t\tvar columns = this._columns&&this._columns.length?this._columns:this._defineColumns();\r\n\t\tvar data = [];\r\n\t\tthis.data.each(function(obj){\r\n\t\t\tvar line = [];\r\n\t\t\tfor(var c = 0; c<columns.length; c++){\r\n\t\t\t\tvar value = obj[columns[c].label];\r\n\t\t\t\tif(columns[c].type == \"number\")\r\n\t\t\t\t\tvalue = value*1;\r\n\t\t\t\telse if(columns[c].role ==\"tooltip\")\r\n\t\t\t\t\tvalue = this._settings.tooltip(obj);\r\n\t\t\t\tline.push(value);\r\n\t\t\t}\r\n\t\t\tdata.push(line);\r\n\t\t}, this);\r\n\r\n\t\tif(columns.length){\r\n\t\t\tvar table = new google.visualization.DataTable();\r\n\t\t\tfor(var i = 0; i<columns.length; i++)\r\n\t\t\t\ttable.addColumn(columns[i]);\r\n\t\t\ttable.addRows(data);\r\n\t\t\t\r\n\t\t\tvar view = new google.visualization.DataView(table);\r\n\t\t\tthis._map.draw(view, this._settings.chart);\r\n\t\t}\r\n\t\telse //draw clean chart\r\n\t\t\tthis._map.draw(google.visualization.arrayToDataTable([[\"\", \"\"]]), {});\r\n\r\n\t},\r\n\tsetDisplayMode:function(value){\r\n\t\tthis._settings.chart.displayMode = value;\r\n\t\tthis.refresh();\r\n\t},\r\n\tsetRegion:function(value){\r\n\t\tthis._settings.chart.region = value;\r\n\t\tthis.refresh();\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis._map.clearChart();\r\n\t\tthis._drawData();\r\n\t},\r\n\ttooltip_setter:function(value){\r\n\t\tvar tooltip = this._settings.chart.tooltip;\r\n\t\tthis._settings.chart.tooltip = extend(tooltip || {}, {isHtml:true});\r\n\t\treturn template(value);\r\n\t},\r\n\t$setSize:function(w, h){\r\n\t\tif (base.api.$setSize.apply(this, arguments) && this._map){\r\n\t\t\textend(this._settings, {width:w, height:h});\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\t},\r\n\t_refreshColumns:function(){\r\n\t\tthis._columns = null;\r\n\t\tthis._drawData();\r\n\t},\r\n\t_getColumnType:function(item, key){\r\n\t\tif (!item || isUndefined(item[key]))\r\n\t\t\treturn \"string\";\r\n\r\n\t\tvar type = typeof item[key];\r\n\t\tif(type ==\"string\" && !isNaN(item[key]*1)) \r\n\t\t\ttype = \"number\";\r\n\t\treturn type;\r\n\t},\r\n\t_defineColumns:function(){\r\n\t\tvar columns = this._settings.columns || [];\r\n\t\tvar item = this.data.pull[this.data.order[0]];\r\n\t\t\r\n\t\t//auto columns\r\n\t\tif (!columns.length && item){\r\n\t\t\tfor (var key in item)\r\n\t\t\t\tif (key !== \"id\") columns.push(key);\r\n\t\t}\r\n\t\t//[\"title\", \"area\"]\r\n\t\tfor(var i=0; i<columns.length; i++){\r\n\t\t\tif (typeof columns[i] !== \"object\"){\r\n\t\t\t\tcolumns[i] = {type:this._getColumnType(item, columns[i]), label:columns[i]};\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(this._settings.tooltip)\r\n\t\t\tcolumns.push({type:\"string\", role:\"tooltip\", p:{\"html\": true}});\r\n\r\n\t\tthis._columns  = columns;\r\n\t\treturn columns;\r\n\t},\r\n\t_mapEvents:function(){\r\n\t\tgoogle.visualization.events.addListener(this._map, \"error\", bind(function(){this.callEvent(\"onMapError\", arguments);}, this));\r\n\t\tgoogle.visualization.events.addListener(this._map, \"ready\", bind(function(){this.callEvent(\"onMapReady\", arguments);}, this));\r\n\t\tgoogle.visualization.events.addListener(this._map, \"regionClick\", bind(function(){this.callEvent(\"onRegionClick\", arguments);}, this));\r\n\t\tgoogle.visualization.events.addListener(this._map, \"select\", bind(function(){\r\n\t\t\tvar selnow = this._map.getSelection()[0];\r\n\t\t\tvar sel = selnow || this._selprev;\r\n\t\t\tif(sel){\r\n\t\t\t\tvar id = this.data.order[sel.row];\r\n\t\t\t\tthis._selprev = sel;\r\n\t\t\t\tthis.callEvent(\"onItemClick\", [id, !!selnow]);\r\n\t\t\t}\r\n\t\t}, this));\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  DataLoader, EventSystem, base.view);\r\nexport default {api, view};","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"gage\", defaults:{\r\n\ttemplate:\"GPL version doesn't support gage <br> You need Webix PRO\"\r\n}}, template.view);","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"barcode\", defaults:{\r\n\ttemplate:\"GPL version doesn't support barcode <br> You need Webix PRO\"\r\n}}, template.view);","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"bulletgraph\", defaults:{\r\n\ttemplate:\"GPL version doesn't support bulletgraph <br> You need Webix PRO\"\r\n}}, template.view);","import base from \"../views/view\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport promise from \"../thirdparty/promiz\";\r\nimport {bind, extend} from \"../webix/helpers\";\r\n\r\n\r\nvar google, script;\r\n\r\nconst api = {\r\n\tname:\"google-map\",\r\n\t$init:function(){\r\n\t\tthis.$view.innerHTML = \"<div class='webix_map_content' style='width:100%;height:100%'></div>\";\r\n\t\tthis._contentobj = this.$view.firstChild;\r\n\t\tthis._waitMap = promise.defer();\r\n\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tthis.$ready.push(this.render);\r\n\t},\r\n\tgetMap:function(waitMap){\r\n\t\treturn waitMap?this._waitMap:this._map;\r\n\t},\r\n\t_getCallBack:function(prev){\r\n\t\treturn bind(function(){\r\n\t\t\tif (typeof prev === \"function\") prev();\r\n\r\n\t\t\tgoogle = google || window.google;\r\n\t\t\tthis._initMap.call(this);\r\n\t\t}, this);\r\n\t},\r\n\trender:function(){\r\n\t\tif(typeof window.google==\"undefined\"||typeof window.google.maps==\"undefined\"){\r\n\t\t\tif(!script){\r\n\t\t\t\tscript = document.createElement(\"script\");\r\n\t\t\t\tscript.type = \"text/javascript\";\r\n\r\n\t\t\t\tvar config = this._settings;\r\n\t\t\t\tvar src = config.src || \"//maps.google.com/maps/api/js\";\r\n\t\t\t\tsrc += (src.indexOf(\"?\")===-1 ? \"?\" :\"&\");\r\n\t\t\t\t\r\n\t\t\t\tif (config.key)\r\n\t\t\t\t\tsrc += \"&key=\"+config.key;\r\n\t\t\t\tif (config.libraries)\r\n\t\t\t\t\tsrc += \"&libraries=\"+config.libraries;\r\n\r\n\t\t\t\tscript.src = src;\r\n\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(script);\r\n\t\t\t}\r\n\t\t\tscript.onload = this._getCallBack(script.onload);\r\n\t\t}\r\n\t\telse //there's a custom link to google api in document head\r\n\t\t\t(this._getCallBack())();\r\n\t},\r\n\t_initMap:function(){\r\n\t\tvar c = this.config;\r\n\t\tif(this.isVisible(c.id)){\r\n\t\t\tthis._map = new google.maps.Map(this._contentobj, {\r\n\t\t\t\tzoom: c.zoom,\r\n\t\t\t\tcenter: new google.maps.LatLng(c.center[0], c.center[1]),\r\n\t\t\t\tmapTypeId: google.maps.MapTypeId[c.mapType]\r\n\t\t\t});\r\n\t\t\tthis._waitMap.resolve(this._map);\r\n\t\t\tthis._contentobj.firstChild.setAttribute(/*@attr*/\"webix_disable_drag\", \"true\");\r\n\t\t}\r\n\t},\r\n\tcenter_setter:function(config){\r\n\t\tif(this._map)\r\n\t\t\tthis._map.setCenter(new google.maps.LatLng(config[0], config[1]));\r\n\r\n\t\treturn config;\r\n\t},\r\n\tmapType_setter:function(config){\r\n\t\t/*ROADMAP,SATELLITE,HYBRID,TERRAIN*/\r\n\t\tif(this._map)\r\n\t\t\tthis._map.setMapTypeId(google.maps.MapTypeId[config]);\r\n\r\n\t\treturn config;\r\n\t},\r\n\tzoom_setter:function(config){\r\n\t\tif(this._map)\r\n\t\t\tthis._map.setZoom(config);\r\n\t\treturn config;\r\n\t},\r\n\tlayerType_setter:function(config){\r\n\t\tif(config == \"heatmap\")\r\n\t\t\tthis.config.libraries = \"visualization\";\r\n\t\tif(this._layerApi[config]){\r\n\t\t\textend(this, this._layerApi[config], true);\r\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(function(){\r\n\t\t\t\tthis._waitMap.then(bind(function(){\t\r\n\t\t\t\t\tthis.drawData.call(this, arguments);\r\n\t\t\t\t}, this));\r\n\t\t\t}, this));\r\n\t\t}\r\n\t\treturn config;\r\n\t},\r\n\tdefaults:{\r\n\t\tzoom: 5,\r\n\t\tcenter:[ 39.5, -98.5 ],\r\n\t\tmapType: \"ROADMAP\",\r\n\t\tlayerType:\"marker\"\r\n\t},\r\n\t$setSize:function(){\r\n\t\tbase.api.$setSize.apply(this, arguments);\r\n\t\tif(this._map)\r\n\t\t\tgoogle.maps.event.trigger(this._map, \"resize\");\r\n\t},\r\n\t$onLoad:function(data){\r\n\t\tif(!this._map){\r\n\t\t\tthis._waitMap.then(bind(function(){\r\n\t\t\t\tthis.parse(data);\r\n\t\t\t}, this));\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_layerApi:{\r\n\t\tmarker:{\r\n\t\t\tdrawData:function(id, item, operation){\r\n\t\t\t\tswitch (operation){\r\n\t\t\t\t\tcase \"add\":\r\n\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"update\":\r\n\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\titem.$marker.setMap(null);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.data.each(function(item){\r\n\t\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\r\n\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclearAll:function(soft){\r\n\t\t\t\tthis.data.each(function(obj){\r\n\t\t\t\t\tobj.$marker.setMap(null);\r\n\t\t\t\t});\r\n\t\t\t\tthis.data.clearAll(soft);\r\n\t\t\t},\r\n\t\t\tshowItem:function(id){\r\n\t\t\t\tvar item = this.getItem(id);\r\n\t\t\t\tthis._map.setCenter(new google.maps.LatLng(item.lat, item.lng));\r\n\t\t\t},\r\n\t\t\t_getItemConfig:function(item){\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\tfor(var i in item) obj[i] = item[i];\r\n\t\t\t\tobj.position = new google.maps.LatLng(item.lat, item.lng);\r\n\t\t\t\tobj.map = item.hidden? null: this._map;\r\n\r\n\t\t\t\tvar marker = item.$marker;\r\n\t\t\t\tif(!marker){\r\n\t\t\t\t\tmarker = new google.maps.Marker(obj);\r\n\t\t\t\t\tthis._events(marker);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\titem.$marker.setMap(obj.map);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.callEvent(\"onItemRender\", [item]);\r\n\t\t\t\t\r\n\t\t\t\treturn marker;\r\n\t\t\t},\r\n\t\t\t_events:function(marker){\r\n\t\t\t\tvar map = this;\r\n\t\t\t\t\r\n\t\t\t\tmarker.addListener(\"click\", function(){\r\n\t\t\t\t\tmap.callEvent(\"onItemClick\", [this.id, this]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(marker.getDraggable()){\r\n\t\t\t\t\tmarker.addListener(\"dragend\", function(){ map._onDrag(this, true); });\r\n\t\t\t\t\tmarker.addListener(\"drag\", function(){ map._onDrag(this); });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_onDrag:function(marker, end){\r\n\t\t\t\tvar item = this.getItem(marker.id);\r\n\t\t\t\tvar pos = marker.getPosition();\r\n\t\t\t\tvar ev = end?\"onAfterDrop\":\"onDrag\";\r\n\r\n\t\t\t\titem.lat = pos.lat();\r\n\t\t\t\titem.lng = pos.lng();\r\n\t\t\t\tthis.callEvent(ev, [item.id, item]);\r\n\t\t\t}\r\n\t\t},\r\n\t\theatmap:{\r\n\t\t\theatmapConfig_setter:function(value){\r\n\t\t\t\tvalue = value || {};\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\t\t\tdrawData:function(){\r\n\t\t\t\tif(this._heatmap){\r\n\t\t\t\t\tthis._heatmap.setMap(null);\r\n\t\t\t\t\tthis._heatmap = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hdata = [];\r\n\t\t\t\tthis.data.each(function(item){ hdata.push(this._getConfig(item)); }, this);\r\n\r\n\t\t\t\tif(hdata.length){\r\n\t\t\t\t\tvar data = extend(this.config.heatmapConfig, {data:hdata, map:this._map}, true);\r\n\t\t\t\t\tthis._heatmap = new google.maps.visualization.HeatmapLayer(data);\r\n\t\t\t\t\tthis.callEvent(\"onHeatMapRender\", [this._heatmap]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetHeatmap:function(){\r\n\t\t\t\treturn this._heatmap;\r\n\t\t\t},\r\n\t\t\t_getConfig:function(item){\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\tfor(var i in item) obj[i] = item[i];\r\n\t\t\t\tobj.location = new google.maps.LatLng(item.lat, item.lng);\r\n\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  DataLoader, EventSystem, base.view);\r\nexport default {api, view};","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"organogram\", defaults:{\r\n\ttemplate:\"GPL version doesn't support organogram <br> You need Webix PRO\"\r\n}}, template.view);","import {remove} from \"../../webix/html\";\r\n\r\n\r\nvar animateDuration = 400,\r\n\tcellWidth = 30;\r\n\r\nconst DynamicChart = {\r\n\tdynamic_setter: function(value){\r\n\t\tif(value)\r\n\t\t\tinit(this);\r\n\t\treturn value;\r\n\t}\r\n};\r\n\r\n/**\r\n * Sets event handlers and properties for a stock chart\r\n * @param {object} chart - chart view\r\n */\r\nfunction init(chart){\r\n\tif(chart._stockRenderHandler)\r\n\t\treturn;\r\n\tvar config = chart._settings;\r\n\r\n\tif(!config.cellWidth)\r\n\t\tconfig.cellWidth = cellWidth;\r\n\tif(!config.animateDuration)\r\n\t\tconfig.animateDuration = animateDuration;\r\n\tconfig.offset = false;\r\n\r\n\tchart._stockRenderHandler = chart.attachEvent(\"onBeforeRender\", function(data, type){\r\n\t\tvar bounds = chart._getChartBounds(chart._content_width, chart._content_height);\r\n\t\tresizeStockCanvases(chart);\r\n\t\tfilterStockData(data, bounds.start, bounds.end, config.cellWidth);\r\n\t\tif(type == \"add\")\r\n\t\t\tstartAnimation(chart);\r\n\t});\r\n\tchart._stockXAxisHandler = chart.attachEvent(\"onBeforeXAxis\", function(ctx,data,point0,point1,cellWidth,y){\r\n\t\tdrawXAxis(chart,ctx,data,point0,point1,cellWidth,y);\r\n\t\treturn false;\r\n\t});\r\n}\r\n\r\n/**\r\n * Starts stock animation\r\n * @param {object} chart - chart view\r\n */\r\nfunction startAnimation(chart){\r\n\tvar cellWidth = chart._settings.cellWidth;\r\n\tif(chart._stockAnimationOffset != cellWidth){\r\n\t\tchart._stockAnimationOffset = cellWidth;\r\n\t\tchart.render();\r\n\t}\r\n\r\n\tchart._stockAnimationOffset = 0;\r\n\tchart._stockAnimationStart = null;\r\n\r\n\tif(window.requestAnimationFrame && !document.hidden)\r\n\t\twindow.requestAnimationFrame(function(t){\r\n\t\t\tanimate(chart,t);\r\n\t\t});\r\n\r\n\tif(!chart._stockAnimateHandler)\r\n\t\tchart._stockAnimateHandler = chart.attachEvent(\"onAfterRender\", function(data){\r\n\t\t\tapplyStockOffset(chart, data);\r\n\t\t});\r\n}\r\n\r\n/**\r\n * Animates a chart\r\n * @param {object} chart - chart view\r\n * @param {number} timestamp - timestamp\r\n */\r\nfunction animate(chart, timestamp){\r\n\tvar progress,\r\n\t\tduration = chart._settings.animateDuration,\r\n\t\tcellWidth = chart._settings.cellWidth;\r\n\r\n\tif(cellWidth && chart.count() > 1){\r\n\t\tif (!chart._stockAnimationStart)\r\n\t\t\tchart._stockAnimationStart = timestamp;\r\n\t\tprogress = timestamp - chart._stockAnimationStart;\r\n\t\tchart._stockAnimationOffset = Math.min(Math.max(progress/duration*cellWidth,1), cellWidth);\r\n\t\tchart.render();\r\n\t\tif (progress < duration)\r\n\t\t\twindow.requestAnimationFrame(function(t){\r\n\t\t\t\tanimate(chart,t);\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Applies animation offset to \"series\" and \"x-axis\" canvases\r\n * @param {object} chart - chart view\r\n * @param {object} data - data array\r\n */\r\nfunction applyStockOffset(chart, data){\r\n\tvar count = chart.count(),\r\n\t\tbounds = chart._getChartBounds(chart._content_width,chart._content_height),\r\n\t\tcellWidth = chart._settings.cellWidth,\r\n\t\toffset = chart._stockAnimationOffset || 0,\r\n\t\tisScroll = (data.length < count || (data.length-1)*cellWidth > bounds.end.x-bounds.start.x);\r\n\r\n\tfunction setCanvasOffset(canvas, x0, x1, skipRight){\r\n\t\tvar ctx = canvas.getCanvas(),\r\n\t\t\telem = canvas._canvas,\r\n\t\t\tlabels = canvas._canvas_labels,\r\n\t\t\tseries = canvas._canvas_series;\r\n\r\n\r\n\t\t// if we need to display less values than they are\r\n\t\tif(offset && (data.length < count || (data.length-1)*cellWidth > x1-x0)){\r\n\t\t\t// move canvas to the left\r\n\t\t\telem.style.left = - offset + \"px\";\r\n\t\t\tif(data.length > 1){\r\n\t\t\t\tsetLabelsOffset(labels, offset, series);\r\n\t\t\t\t// clear out of the scale parts\r\n\t\t\t\tctx.clearRect(0, 0, x0+offset, elem.offsetHeight);\r\n\t\t\t\tctx.clearRect(x1+offset, 0, elem.offsetWidth, elem.offsetHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// animation for the right part (added item)\r\n\t\telse{\r\n\t\t\telem.style.left = \"0px\";\r\n\t\t\tif(!skipRight && offset!= cellWidth)\r\n\t\t\t\tctx.clearRect(x0+(data.length-1)*cellWidth-cellWidth+offset, 0, elem.offsetWidth, elem.offsetHeight);\r\n\t\t}\r\n\r\n\t\t// show label for the last label after finishing animation\r\n\t\tif(labels.length>1 && offset && offset != cellWidth){\r\n\t\t\tvar last = labels.length-1;\r\n\t\t\tif(isAxisTitle(series, labels[last]))\r\n\t\t\t\tlast -= 1;\r\n\t\t\tlabels[last].style.display = \"none\";\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\teachStockCanvas(chart,function(name, canvas){\r\n\t\tsetCanvasOffset(canvas, bounds.start.x,  bounds.end.x, name == \"x\");\r\n\t});\r\n\r\n\tsetHtmlMapSizes(chart,bounds, isScroll?offset:0);\r\n}\r\n\r\nfunction isAxisTitle(series, label){\r\n\treturn series ===\"axis_x\" && label.className.indexOf(\"webix_axis_title_x\") !== -1;\r\n}\r\n\r\nfunction setLabelsOffset(labels, offset, series){\r\n\tif(labels.length){\r\n\r\n\t\tremove(labels[0]);\r\n\t\tfor(var i = 1; i< labels.length; i++){\r\n\t\t\t//don't move axis title\r\n\t\t\tif(isAxisTitle(series, labels[i])) continue;\r\n\t\t\tlabels[i].style.left = labels[i].offsetLeft - offset + \"px\";\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n}\r\n\r\n/**\r\n * Gets visible chart data\r\n * @param {object} data - an array with all chart data\r\n * @param {object} point0 - a top left point of a plot\r\n * @param {object} point1 - a bottom right point of a plot\r\n * @param {number} cellWidth - a unit width\r\n */\r\nfunction filterStockData(data, point0, point1, cellWidth){\r\n\tif(cellWidth && data.length){\r\n\t\tvar limit = Math.ceil((point1.x - point0.x)/cellWidth);\r\n\t\tif(data.length > limit+1)\r\n\t\t\tdata.splice(0, data.length - limit-1);\r\n\t}\r\n}\r\n\r\n/**\r\n * Calls a function for \"series\" and \"x-axis\" canvases\r\n * @param {object} chart - chart view\r\n * @param {function} func - function to call\r\n */\r\nfunction eachStockCanvas(chart, func){\r\n\tif(chart.canvases){\r\n\t\tfor(var i=0; i < chart._series.length;i++)\r\n\t\t\tif (chart.canvases[i])\r\n\t\t\t\tfunc(i,chart.canvases[i]);\r\n\r\n\t\tif (chart.canvases[\"x\"])\r\n\t\t\tfunc(\"x\",chart.canvases[\"x\"]);\r\n\t}\r\n}\r\n\r\n/**\r\n * Set sizes for animated canvases\r\n * @param {object} chart - chart view\r\n */\r\nfunction resizeStockCanvases(chart){\r\n\teachStockCanvas(chart, function(name, canvas){\r\n\t\tcanvas._resizeCanvas(chart._content_width+2*chart._settings.cellWidth, chart._content_height);\r\n\t});\r\n}\r\n\r\n/**\r\n * Set sizes for an html map of a chart\r\n * @param {object} chart - a chart view\r\n * @param {object} bounds - start and end points of a plot\r\n * @param {number} offset - an offset to apply\r\n */\r\nfunction setHtmlMapSizes(chart, bounds, offset){\r\n\tchart._contentobj._htmlmap.style.left = (bounds.start.x - offset)+\"px\";\r\n\tchart._contentobj._htmlmap.style.width = (bounds.end.x-bounds.start.x+offset)+\"px\";\r\n}\r\n\r\n/**\r\n * Renders lines and labels of an x-axis\r\n * @param {object} chart - a chart view\r\n * @param {object} ctx - a canvas Context\r\n * @param {object} data - a data array\r\n * @param {object} point0 - a top left point of a plot\r\n * @param {object} point1 - a bottom right point of a plot\r\n * @param {number} cellWidth - a width of a unit\r\n * @param {number} y - the vertical position of an \"x-axis\" line\r\n */\r\nfunction drawXAxis(chart, ctx, data,point0,point1,cellWidth,y){\r\n\tvar center, i, isScroll,unitPos,\r\n\t\tconfig = chart._settings,\r\n\t\tx0 = point0.x-0.5,\r\n\t\ty0 = parseInt((y?y:point1.y),10)+0.5,\r\n\t\tx1 = point1.x;\r\n\r\n\tif(!config.dynamic)\r\n\t\treturn false;\r\n\r\n\tisScroll = ((data.length-1)*cellWidth > x1-x0 || data.length < chart.count());\r\n\r\n\tfor(i=0; i < data.length;i++){\r\n\t\tunitPos = x0+i*cellWidth ;\r\n\t\tcenter = isScroll?i>1:!!i;\r\n\t\tunitPos = Math.ceil(unitPos)-0.5;\r\n\t\t//scale labels\r\n\t\tchart._drawXAxisLabel(unitPos,y0,data[i],center);\r\n\t\t//draws a vertical line for the horizontal scale\r\n\t\tif(i && config.xAxis.lines.call(chart, data[i]))\r\n\t\t\tchart._drawXAxisLine(ctx,unitPos,point1.y,point0.y,data[i]);\r\n\r\n\t}\r\n\r\n\tchart.canvases[\"x\"].renderTextAt(true, false, x0, point1.y + config.padding.bottom-3,\r\n\t\tconfig.xAxis.title,\r\n\t\t\"webix_axis_title_x\",\r\n\t\tpoint1.x - point0.x\r\n\t);\r\n\tchart._drawLine(ctx,x0,y0,x1+ (isScroll?chart._stockAnimationOffset:0),y0,config.xAxis.color,1);\r\n}\r\n\r\n\r\nexport default DynamicChart;","import base from \"../views/view\";\r\nimport template from \"../webix/template\";\r\nimport color from \"../webix/color\";\r\nimport env from \"../webix/env\";\r\nimport i18n from \"../webix/i18n\";\r\n\r\nimport Group from \"../core/group\";\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport Destruction from \"../core/destruction\";\r\nimport HtmlMap from \"../core/htmlmap\";\r\nimport Canvas from \"../core/canvas\";\r\nimport GroupMethods from \"../core/groupmethods\";\r\n\r\nimport {locate, offset as getOffset, pos as getPos, create} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {bind, extend, isUndefined} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nimport Pie from \"./chart/pie\";\r\nimport Bar from \"./chart/bar\";\r\nimport Line from \"./chart/line\";\r\nimport BarH from \"./chart/barh\";\r\nimport StackedBar from \"./chart/stackedbar\";\r\nimport StackedBarH from \"./chart/stackedbarh\";\r\nimport Spline from \"./chart/spline\";\r\nimport Area from \"./chart/area\";\r\nimport Radar from \"./chart/radar\";\r\nimport Scatter from \"./chart/scatter\";\r\nimport Presets from \"./chart/presets\";\r\nimport SplineArea from \"./chart/splinearea\";\r\nimport DynamicChart from \"./chart/dynamic\";\r\nimport TooltipControl from \"../core/tooltipcontrol\";\r\n\r\nimport {$active} from \"../webix/skin\";\r\n\r\nconst api = {\r\n\tname:\"chart\",\r\n\t$init:function(config){\r\n\t\tthis._series = [this._settings];\r\n\t\tthis._legend_labels = [];\r\n\t\tthis._contentobj.className += \" webix_chart\";\r\n\t\tthis.$ready.push(this._after_init_call);\r\n\t\t/*preset*/\r\n\t\tif(config.preset){\r\n\t\t\tthis._definePreset(config);\r\n\t\t}\r\n\r\n\t\t// move series to end of configuration properties hash\r\n\t\t// so it will be parsed after other settings\r\n\t\tif(config.series){\r\n\t\t\tvar series = config.series;\r\n\t\t\tdelete config.series;\r\n\t\t\tconfig.series = series;\r\n\t\t}\r\n\r\n\t\tthis.data.provideApi(this, true);\r\n\t},\r\n\t_after_init_call:function(){\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\",bind(function(){\r\n\t\t\tthis.render.apply(this,arguments);\r\n\t\t},this));\r\n\t},\r\n\tdefaults:{\r\n\t\tariaLabel:\"chart\",\r\n\t\tcolor:\"default\",\r\n\t\talpha:\"1\",\r\n\t\tradius:0,\r\n\t\tlabel:false,\r\n\t\tvalue:\"{obj.value}\",\r\n\t\tpadding:{},\r\n\t\ttype:\"pie\",\r\n\t\tlineColor:\"#ffffff\",\r\n\t\tcant:0.5,\r\n\t\tbarWidth: 30,\r\n\t\tline:{\r\n\t\t\twidth:2,\r\n\t\t\tcolor:\"#1ca1c1\"\r\n\t\t},\r\n\t\titem:{\r\n\t\t\tradius:3,\r\n\t\t\tborderColor:\"#1ca1c1\",\r\n\t\t\tborderWidth:2,\r\n\t\t\tcolor: \"#ffffff\",\r\n\t\t\talpha:1,\r\n\t\t\ttype:\"r\",\r\n\t\t\tshadow:false\r\n\t\t},\r\n\t\tshadow:false,\r\n\t\tgradient:false,\r\n\t\tborder:false,\r\n\t\tlabelOffset: 20,\r\n\t\torigin:\"auto\",\r\n\t\tscale: \"linear\"\r\n\t},\r\n\t_id:/*@attr*/\"webix_area_id\",\r\n\ton_click:{\r\n\t\twebix_chart_legend_item: function(e,id,obj){\r\n\t\t\tvar series = obj.getAttribute(/*@attr*/\"series_id\");\r\n\t\t\tif(this.callEvent(\"onLegendClick\",[e,series,obj])){\r\n\t\t\t\tif((typeof series != \"undefined\")&&this._series.length>1){\r\n\t\t\t\t\tvar config = this._settings;\r\n\t\t\t\t\tvar values = config.legend.values;\r\n\t\t\t\t\tvar toggle = (values&&values[series].toggle)||config.legend.toggle;\r\n\r\n\t\t\t\t\t// hide action\r\n\t\t\t\t\tif(toggle){\r\n\t\t\t\t\t\tif(obj.className.indexOf(\"hidden\")!=-1){\r\n\t\t\t\t\t\t\tthis.showSeries(series);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tthis.hideSeries(series);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t},\r\n\ton_mouse_move:{\r\n\t},\r\n\tlocate: function(e){\r\n\t\treturn locate(e,this._id);\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tvar res = base.api.$setSize.call(this,x,y);\r\n\t\tif(res){\r\n\t\t\tfor(var c in this.canvases){\r\n\t\t\t\tthis.canvases[c]._resizeCanvas(this._content_width, this._content_height);\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\ttype_setter:function(val){\r\n\t\tassert(this[\"$render_\"+val], \"Chart type is not supported, or extension is not loaded: \"+val);\r\n\t\t\r\n\t\tif (typeof this._settings.offset == \"undefined\"){\r\n\t\t\tthis._settings.offset = !(val.toLowerCase().indexOf(\"area\")!=-1);\r\n\t\t}\r\n\r\n\t\tif(val==\"radar\"&&!this._settings.yAxis)\r\n\t\t\tthis.define(\"yAxis\",{});\r\n\t\tif(val==\"scatter\"){\r\n\t\t\tif(!this._settings.yAxis)\r\n\t\t\t\tthis.define(\"yAxis\",{});\r\n\t\t\tif(!this._settings.xAxis)\r\n\t\t\t\tthis.define(\"xAxis\",{});\r\n\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\treturn val;\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.removeAllSeries();\r\n\t\tDestruction.destructor.apply(this,arguments);\r\n\t},\r\n\tremoveAllSeries: function(){\r\n\t\tthis.clearCanvas();\r\n\t\tif(this._legendObj){\r\n\t\t\tthis._legendObj.innerHTML = \"\";\r\n\t\t\tthis._legendObj.parentNode.removeChild(this._legendObj);\r\n\t\t\tthis._legendObj = null;\r\n\t\t}\r\n\t\tif(this.canvases){\r\n\t\t\tthis.canvases = {};\r\n\t\t}\r\n\t\tthis._contentobj.innerHTML=\"\";\r\n\t\tthis._series = [];\r\n\t},\r\n\tclearCanvas:function(){\r\n\t\tif(this.canvases&&typeof this.canvases == \"object\")\r\n\t\t\tfor(var c in this.canvases){\r\n\t\t\t\tthis.canvases[c].clearCanvas();\r\n\t\t\t}\r\n\t},\r\n\trender:function(id, changes, type){\r\n\t\tvar bounds, data, map, temp;\r\n\t\tif (!this.isVisible(this._settings.id))\r\n\t\t\treturn;\r\n\r\n\t\tdata = this._getChartData();\r\n\r\n\t\tif (!this.callEvent(\"onBeforeRender\",[data, type]))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tif(this.canvases&&typeof this.canvases == \"object\"){\r\n\t\t\tfor(const i in this.canvases){\r\n\t\t\t\tthis.canvases[i].clearCanvas();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.canvases = {};\r\n\t\t\r\n\t\tif(this._settings.legend){\r\n\t\t\tif(!this.canvases[\"legend\"])\r\n\t\t\t\tthis.canvases[\"legend\"] =  this._createCanvas(\"legend\");\r\n\t\t\tthis._drawLegend(\r\n\t\t\t\tthis.data.getRange(),\r\n\t\t\t\tthis._content_width,\r\n\t\t\t\tthis._content_height\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis._map = map = new HtmlMap(this._id);\r\n\t\ttemp = this._settings;\r\n\r\n\t\tbounds =this._getChartBounds(this._content_width,this._content_height);\r\n\r\n\t\tif(this._series){\r\n\t\t\tfor(let i=0; i < this._series.length;i++){\r\n\t\t\t\tthis._settings = this._series[i];\r\n\t\t\t\tif(!this.canvases[i])\r\n\t\t\t\t\tthis.canvases[i] = this._createCanvas(this.name+\" \"+i,\"z-index:\"+(2+i),null,i, this._settings.ariaLabel);\r\n\t\t\t\tthis[\"$render_\"+this._settings.type](\r\n\t\t\t\t\tthis.canvases[i].getCanvas(),\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tbounds.start,\r\n\t\t\t\t\tbounds.end,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\tmap\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tmap.render(this._contentobj);\r\n\t\t\r\n\t\tthis._contentobj.lastChild.style.zIndex = 80;\r\n\t\tthis._applyBounds(this._contentobj.lastChild,bounds);\r\n\t\tthis.callEvent(\"onAfterRender\",[data]);\r\n\t\tthis._settings = temp;\r\n\r\n\t\t// hide hidden series\r\n\t\tif(this._settings.legend && this._settings.legend.values){\r\n\t\t\tvar series = this._settings.legend.values;\r\n\t\t\tfor(let i = 0; i<series.length; i++){\r\n\t\t\t\tif(series[i].$hidden) this.hideSeries(i);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_applyBounds: function(elem,bounds){\r\n\t\tvar style = {};\r\n\t\tstyle.left = bounds.start.x;\r\n\t\tstyle.top = bounds.start.y;\r\n\t\tstyle.width = bounds.end.x-bounds.start.x;\r\n\t\tstyle.height = bounds.end.y - bounds.start.y;\r\n\t\tfor(var prop in style){\r\n\t\t\telem.style[prop] = style[prop]+\"px\";\r\n\t\t}\r\n\t},\r\n\t_getChartData: function(){\r\n\t\tvar axis, axisConfig ,config, data, i, newData,\r\n\t\t\tstart, units, value, valuesHash;\r\n\t\tdata = this.data.getRange();\r\n\t\taxis = (this._settings.type.toLowerCase().indexOf(\"barh\")!=-1?\"yAxis\":\"xAxis\");\r\n\t\taxisConfig = this._settings[axis];\r\n\t\tif(axisConfig&&axisConfig.units&&(typeof axisConfig.units == \"object\")){\r\n\t\t\tconfig = axisConfig.units;\r\n\t\t\tunits = [];\r\n\t\t\tif(typeof config.start != \"undefined\"&&typeof config.end != \"undefined\" && typeof config.next != \"undefined\"){\r\n\t\t\t\tstart = config.start;\r\n\t\t\t\twhile(start<=config.end){\r\n\t\t\t\t\tunits.push(start);\r\n\t\t\t\t\tstart = config.next.call(this,start);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(Object.prototype.toString.call(config) === \"[object Array]\"){\r\n\t\t\t\tunits = config;\r\n\t\t\t}\r\n\t\t\tnewData = [];\r\n\t\t\tif(units.length){\r\n\t\t\t\tvalue = axisConfig.value;\r\n\t\t\t\tvaluesHash = {};\r\n\t\t\t\tfor(i=0;i < data.length;i++){\r\n\t\t\t\t\tvaluesHash[value(data[i])] = i;\r\n\t\t\t\t}\r\n\t\t\t\tfor(i=0;i< units.length;i++){\r\n\t\t\t\t\tif(typeof valuesHash[units[i]]!= \"undefined\"){\r\n\t\t\t\t\t\tdata[valuesHash[units[i]]].$unit = units[i];\r\n\t\t\t\t\t\tnewData.push(data[valuesHash[units[i]]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tnewData.push({$unit:units[i]});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn newData;\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tseries_setter:function(config){\r\n\t\tif (!config || typeof config != \"object\"){\r\n\t\t\tassert(config,\"Chart :: Series must be an array or object\");\r\n\t\t} else {\r\n\t\t\tthis._parseSettings(!config.length ? config : config[0]);\r\n\t\t\tthis._series = [this._settings];\r\n\r\n\t\t\tfor (let i=1; i<config.length; i++)\r\n\t\t\t\tthis.addSeries(config[i]);\r\n\t\t}\r\n\t\treturn config;\r\n\t},\r\n\tvalue_setter:template,\r\n\txValue_setter:template,\r\n\tyValue_setter:function(config){\r\n\t\tthis.define(\"value\",config);\r\n\t},\r\n\talpha_setter:template,\r\n\tlabel_setter:template,\r\n\tlineColor_setter:template,\r\n\tborderColor_setter:template,\r\n\tpieInnerText_setter:template,\r\n\tgradient_setter:function(config){\r\n\t\tif((typeof(config)!=\"function\")&&config&&(config === true))\r\n\t\t\tconfig = \"light\";\r\n\t\treturn config;\r\n\t},\r\n\tcolormap:{\r\n\t\t\"RAINBOW\":function(obj){\r\n\t\t\tvar pos = Math.floor(this.getIndexById(obj.id)/this.count()*1536);\r\n\t\t\tif (pos==1536) pos-=1;\r\n\t\t\treturn this._rainbow[Math.floor(pos/256)](pos%256);\r\n\t\t},\r\n\r\n\t\t\"default\": function(obj){\r\n\t\t\tvar count = this.count();\r\n\t\t\tvar colorsCount = this._defColors.length;\r\n\t\t\tvar i = this.getIndexById(obj.id);\r\n\t\t\tif(colorsCount > count){\r\n\t\t\t\tif(i){\r\n\t\t\t\t\tif(i < colorsCount - count)\r\n\t\t\t\t\t\ti = this._defColorsCursor +2;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ti = this._defColorsCursor+1;\r\n\t\t\t\t}\r\n\t\t\t\tthis._defColorsCursor = i;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\ti = i%colorsCount;\r\n\t\t\treturn this._defColors[i];\r\n\t\t}\r\n\t},\r\n\tcolor_setter:function(value){\r\n\t\treturn this.colormap[value]||template( value);\r\n\t},\r\n\tfill_setter:function(value){\r\n\t\treturn ((!value||value==\"0\")?false:template( value));\r\n\t},\r\n\t_definePreset:function(obj){\r\n\t\tthis.define(\"preset\",obj.preset);\r\n\t\tdelete obj.preset;\r\n\t},\r\n\tpreset_setter:function(value){\r\n\t\tvar a, b, preset;\r\n\t\tthis.defaults = extend({},this.defaults);\r\n\t\tpreset =  this.presets[value];\r\n\r\n\t\tif(typeof preset == \"object\"){\r\n\r\n\t\t\tfor(a in preset){\r\n\r\n\t\t\t\tif(typeof preset[a]==\"object\"){\r\n\t\t\t\t\tif(!this.defaults[a]||typeof this.defaults[a]!=\"object\"){\r\n\t\t\t\t\t\tthis.defaults[a] = extend({},preset[a]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.defaults[a] = extend({},this.defaults[a]);\r\n\t\t\t\t\t\tfor(b in preset[a]){\r\n\t\t\t\t\t\t\tthis.defaults[a][b] = preset[a][b];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.defaults[a] = preset[a];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tlegend_setter:function( config){\r\n\t\tif(!config){\r\n\t\t\tif(this._legendObj){\r\n\t\t\t\tthis._legendObj.innerHTML = \"\";\r\n\t\t\t\tthis._legendObj = null;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(typeof(config)!=\"object\")\t//allow to use template string instead of object\r\n\t\t\tconfig={template:config};\r\n\r\n\t\tthis._mergeSettings(config,{\r\n\t\t\twidth:150,\r\n\t\t\theight:18,\r\n\t\t\tlayout:\"y\",\r\n\t\t\talign:\"left\",\r\n\t\t\tvalign:\"bottom\",\r\n\t\t\ttemplate:\"\",\r\n\t\t\ttoggle:(this._settings.type.toLowerCase().indexOf(\"stacked\")!=-1?\"\":\"hide\"),\r\n\t\t\tmarker:{\r\n\t\t\t\ttype:\"square\",\r\n\t\t\t\twidth:15,\r\n\t\t\t\theight:15,\r\n\t\t\t\tradius:3\r\n\t\t\t},\r\n\t\t\tmargin: 4,\r\n\t\t\tpadding: 3\r\n\t\t});\r\n\r\n\t\tconfig.template = template(config.template);\r\n\t\treturn config;\r\n\t},\r\n\titem_setter:function( config){\r\n\t\tif(typeof(config)!=\"object\")\r\n\t\t\tconfig={color:config, borderColor:config};\r\n\t\tthis._mergeSettings(config,extend({},this.defaults.item));\r\n\t\tvar settings = [\"alpha\",\"borderColor\",\"color\",\"radius\", \"type\"];\r\n\t\tthis._converToTemplate(settings,config);\r\n\t\treturn config;\r\n\t},\r\n\tline_setter:function( config){\r\n\t\tif(typeof(config)!=\"object\")\r\n\t\t\tconfig={color:config};\r\n\r\n\t\tconfig = extend(config,this.defaults.line);\r\n\t\tconfig.color = template(config.color);\r\n\t\treturn config;\r\n\t},\r\n\tpadding_setter:function( config){\r\n\t\tif(typeof(config)!=\"object\")\r\n\t\t\tconfig={left:config, right:config, top:config, bottom:config};\r\n\t\tthis._mergeSettings(config,{\r\n\t\t\tleft:50,\r\n\t\t\tright:20,\r\n\t\t\ttop:35,\r\n\t\t\tbottom:40\r\n\t\t});\r\n\t\treturn config;\r\n\t},\r\n\txAxis_setter:function( config){\r\n\t\tif(!config) return false;\r\n\t\tif(typeof(config)!=\"object\")\r\n\t\t\tconfig={ template:config };\r\n\r\n\t\tthis._mergeSettings(config,{\r\n\t\t\ttitle:\"\",\r\n\t\t\tcolor:\"#edeff0\",\r\n\t\t\tlineColor:\"#edeff0\",\r\n\t\t\ttemplate:\"{obj}\",\r\n\t\t\tlines:true\r\n\t\t});\r\n\t\tvar templates = [\"lineColor\",\"template\",\"lines\"];\r\n\t\tthis._converToTemplate(templates,config);\r\n\t\tthis._configXAxis = extend({},config);\r\n\t\treturn config;\r\n\t},\r\n\tyAxis_setter:function( config){\r\n\t\tthis._mergeSettings(config,{\r\n\t\t\ttitle:\"\",\r\n\t\t\tcolor:\"#edeff0\",\r\n\t\t\tlineColor:\"#edeff0\",\r\n\t\t\ttemplate:\"{obj}\",\r\n\t\t\tlines:true,\r\n\t\t\tbg:$active.backColor\r\n\t\t});\r\n\t\tvar templates = [\"lineColor\",\"template\",\"lines\",\"bg\"];\r\n\t\tthis._converToTemplate(templates,config);\r\n\t\tthis._configYAxis = extend({},config);\r\n\t\treturn config;\r\n\t},\r\n\t_converToTemplate:function(arr,config){\r\n\t\tfor(var i=0;i< arr.length;i++){\r\n\t\t\tconfig[arr[i]] = template(config[arr[i]]);\r\n\t\t}\r\n\t},\r\n\t_createCanvas: function(name,style,container, index, title){\r\n\t\tvar params = {container:(container||this._contentobj),name:name, title:isUndefined(title)?name:title||\"\", series: index, style:(style||\"\"), width: this._content_width, height:this._content_height };\r\n\t\treturn new Canvas(params);\r\n\t},\r\n\t_drawScales:function(data,point0,point1,start,end,cellWidth){\r\n\t\tvar ctx, y = 0;\r\n\t\tif(this._settings.yAxis){\r\n\t\t\tif(!this.canvases[\"y\"])\r\n\t\t\t\tthis.canvases[\"y\"] =  this._createCanvas(\"axis_y\");\r\n\r\n\t\t\ty = this._drawYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,start,end);\r\n\t\t}\r\n\t\tif (this._settings.xAxis){\r\n\t\t\tif (!this.canvases[\"x\"])\r\n\t\t\t\tthis.canvases[\"x\"] = this._createCanvas(\"axis_x\");\r\n\t\t\tctx = this.canvases[\"x\"].getCanvas();\r\n\t\t\tif(this.callEvent(\"onBeforeXAxis\",[ctx,data,point0,point1,cellWidth,y]))\r\n\t\t\t\tthis._drawXAxis(ctx, data, point0, point1, cellWidth, y);\r\n\t\t}\r\n\t\treturn y;\r\n\t},\r\n\t_drawXAxis:function(ctx,data,point0,point1,cellWidth,y){\r\n\t\tvar i, unitPos,\r\n\t\t\tconfig = this._settings,\r\n\t\t\tx0 = point0.x-0.5,\r\n\t\t\ty0 = parseInt((y?y:point1.y),10)+0.5,\r\n\t\t\tx1 = point1.x,\r\n\t\t\tcenter = true,\r\n\t\t\tlabelY = config.type == \"stackedBar\"?(point1.y+0.5):y0;\r\n\r\n\t\tfor(i=0; i < data.length;i++){\r\n\t\t\tif(config.offset === true)\r\n\t\t\t\tunitPos = x0+cellWidth/2+i*cellWidth;\r\n\t\t\telse{\r\n\t\t\t\tunitPos = (i==data.length-1 && !config.cellWidth)?point1.x:x0+i*cellWidth;\r\n\t\t\t\tcenter = !!i;\r\n\t\t\t}\r\n\t\t\tunitPos = Math.ceil(unitPos)-0.5;\r\n\t\t\t/*scale labels*/\r\n\t\t\tvar top = ((config.origin!=\"auto\")&&(config.type==\"bar\")&&(parseFloat(config.value(data[i]))<config.origin));\r\n\t\t\tthis._drawXAxisLabel(unitPos,labelY,data[i],center,top);\r\n\t\t\t/*draws a vertical line for the horizontal scale*/\r\n\t\t\tif((config.offset||i||config.cellWidth)&&config.xAxis.lines.call(this,data[i]))\r\n\t\t\t\tthis._drawXAxisLine(ctx,unitPos,point1.y,point0.y,data[i]);\r\n\t\t}\r\n\r\n\t\tthis.canvases[\"x\"].renderTextAt(true, false, x0, point1.y + config.padding.bottom-3,\r\n\t\t\tconfig.xAxis.title,\r\n\t\t\t\"webix_axis_title_x\",\r\n\t\t\tpoint1.x - point0.x\r\n\t\t);\r\n\t\tthis._drawLine(ctx,x0,y0,x1,y0,config.xAxis.color,1);\r\n\t\t/*the right border in lines in scale are enabled*/\r\n\t\tif (!config.xAxis.lines.call(this,{}) || !config.offset) return;\r\n\t\tthis._drawLine(ctx,x1+0.5,point1.y,x1+0.5,point0.y+0.5,config.xAxis.lineColor.call(this,{}),1);\r\n\t},\r\n\t_drawYAxis:function(ctx,data,point0,point1,start,end){\r\n\t\tvar step;\r\n\t\tvar scaleParam= {};\r\n\t\tif (!this._settings.yAxis) return;\r\n\r\n\t\tvar x0 = point0.x - 0.5;\r\n\t\tvar y0 = point1.y;\r\n\t\tvar y1 = point0.y;\r\n\t\tvar lineX = point1.y+0.5;\r\n\r\n\t\t//this._drawLine(ctx,x0,y0,x0,y1,this._settings.yAxis.color,1);\r\n\r\n\t\tif(this._settings.yAxis.step)\r\n\t\t\tstep = parseFloat(this._settings.yAxis.step);\r\n\r\n\t\tif(typeof this._configYAxis.step ==\"undefined\"||typeof this._configYAxis.start==\"undefined\"||typeof this._configYAxis.end ==\"undefined\"){\r\n\t\t\tscaleParam = this._calculateScale(start,end);\r\n\t\t\tstart = scaleParam.start;\r\n\t\t\tend = scaleParam.end;\r\n\t\t\tstep = scaleParam.step;\r\n\r\n\t\t\tthis._settings.yAxis.end = end;\r\n\t\t\tthis._settings.yAxis.start = start;\r\n\t\t}\r\n\t\telse if(this.config.scale == \"logarithmic\")\r\n\t\t\tthis._logScaleCalc = true;\r\n\r\n\t\tthis._setYAxisTitle(point0,point1);\r\n\t\tif(step===0) return;\r\n\t\tif(end==start){\r\n\t\t\treturn y0;\r\n\t\t}\r\n\t\tvar stepHeight = (y0-y1)*step/(end-start);\r\n\t\tvar c = 0;\r\n\t\tfor(var i = start; i<=end; i += step){\r\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\r\n\t\t\tif (scaleParam.fixNum)  value = parseFloat(value).toFixed(scaleParam.fixNum);\r\n\t\t\tvar yi = Math.floor(y0-c*stepHeight)+ 0.5;/*canvas line fix*/\r\n\t\t\tif(!(i==start&&this._settings.origin==\"auto\") &&this._settings.yAxis.lines.call(this,i))\r\n\t\t\t\tthis._drawLine(ctx,x0,yi,point1.x,yi,this._settings.yAxis.lineColor.call(this,i),1);\r\n\t\t\tif(i == this._settings.origin) lineX = yi;\r\n\t\t\t/*correction for JS float calculation*/\r\n\t\t\tif(step<1 && !this._logScaleCalc){\r\n\t\t\t\tvar power = Math.min(Math.floor(this._log10(step)),(start<=0?0:Math.floor(this._log10(start))));\r\n\t\t\t\tvar corr = Math.pow(10,-power);\r\n\t\t\t\tvalue = Math.round(value*corr)/corr;\r\n\t\t\t\ti = value;\r\n\t\t\t}\r\n\t\t\tthis.canvases[\"y\"].renderText(0,yi-5,\r\n\t\t\t\tthis._settings.yAxis.template(value.toString()),\r\n\t\t\t\t\"webix_axis_item_y\",\r\n\t\t\t\tpoint0.x-5\r\n\t\t\t);\r\n\t\t\tc++;\r\n\t\t}\r\n\t\tthis._drawLine(ctx,x0,y0+1,x0,y1,this._settings.yAxis.color,1);\r\n\t\treturn lineX;\r\n\t},\r\n\r\n\t_setYAxisTitle:function(point0,point1){\r\n\t\tvar className = \"webix_axis_title_y\";\r\n\t\tvar text=this.canvases[\"y\"].renderTextAt(\"middle\",false,0,parseInt((point1.y-point0.y)/2+point0.y,10),this._settings.yAxis.title,className);\r\n\t\tif (text)\r\n\t\t\ttext.style.left = (env.transform?(text.offsetHeight-text.offsetWidth)/2:0)+\"px\";\r\n\t},\r\n\t_calculateLogScale: function(nmin,nmax){\r\n\t\tvar startPower = Math.floor(this._log10(nmin));\r\n\t\tvar endPower = Math.ceil(this._log10(nmax));\r\n\t\treturn {start: startPower, step: 1, end: endPower};\r\n\t},\r\n\t_normStep:function(step){\r\n\t\tvar power = Math.floor(this._log10(step));\r\n\t\tvar calculStep = Math.pow(10,power);\r\n\t\tvar stepVal = step/calculStep;\r\n\t\tstepVal = (stepVal>5?10:5);\r\n\t\treturn parseInt(stepVal,10)*calculStep;\t\r\n\t},\r\n\t_calculateScale:function(nmin,nmax){\r\n\t\tthis._logScaleCalc = false;\r\n\t\tif(this._settings.scale == \"logarithmic\"){\r\n\t\t\tvar logMin = Math.floor(this._log10(nmin));\r\n\t\t\tvar logMax = Math.ceil(this._log10(nmax));\r\n\t\t\tif(nmin>0 && nmax > 0 && (logMax-logMin>1) ){\r\n\t\t\t\tthis._logScaleCalc = true;\r\n\t\t\t\treturn this._calculateLogScale(nmin,nmax);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif(this._settings.origin!=\"auto\"&&this._settings.origin<nmin)\r\n\t\t\tnmin = this._settings.origin;\r\n\r\n\t\tvar\tstart,end;\r\n\t\tvar step = this._normStep(((nmax-nmin)/8)||1);\r\n\t\tvar power = Math.floor(this._log10(step));\r\n\r\n\t\tif(step>Math.abs(nmin))\r\n\t\t\tstart = (nmin<0?-step:0);\r\n\t\telse{\r\n\t\t\tvar absNmin = Math.abs(nmin);\r\n\t\t\tvar powerStart = Math.floor(this._log10(absNmin));\r\n\t\t\tvar nminVal = absNmin/Math.pow(10,powerStart);\r\n\t\t\tif (powerStart != 0 || step >= 0.1)\r\n\t\t\t\tstart = Math.ceil(nminVal*10)/10*Math.pow(10,powerStart)-step;\r\n\t\t\telse\r\n\t\t\t\tstart = absNmin;\r\n\r\n\t\t\tif(absNmin>1&&step>0.1){\r\n\t\t\t\tstart = Math.ceil(start);\r\n\t\t\t}\r\n\t\t\twhile(nmin<0?start<=nmin:start>=nmin)\r\n\t\t\t\tstart -= step;\r\n\t\t\tif(nmin<0) start =-start-2*step;\r\n\r\n\t\t\tstart = start - (start % step);\r\n\t\t\tstart = parseFloat((start*1.0).toFixed(Math.abs(power)));\r\n\t\t}\r\n\t\tif ((nmax-start) > 10)\r\n\t\t\tstep = this._normStep(((nmax-start)/8)||1);\r\n\t\tend = start;\r\n\r\n\t\tif(nmax == 0 && nmax == nmin)\r\n\t\t\tnmax = step;\r\n\r\n\t\twhile(end<nmax){\r\n\t\t\tend += step;\r\n\t\t\tend = parseFloat((end*1.0).toFixed(Math.abs(power)));\r\n\t\t}\r\n\t\t\r\n\t\treturn { start:start,end:end,step:step,fixNum:power<0?Math.abs(power):0 };\r\n\t},\r\n\t_getLimits:function(orientation,value){\r\n\t\tvar data = this.data._obj_array();\r\n\r\n\t\tvar maxValue, minValue;\r\n\t\tvar axis = ((arguments.length && orientation==\"h\")?this._configXAxis:this._configYAxis);\r\n\t\tvalue = value||\"value\";\r\n\t\tif(axis&&(typeof axis.end!=\"undefined\")&&(typeof axis.start!=\"undefined\")&&axis.step){\r\n\t\t\tmaxValue = parseFloat(axis.end);\r\n\t\t\tminValue = parseFloat(axis.start);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tmaxValue = GroupMethods.max(this._series[0][value], data);\r\n\t\t\tminValue = (axis&&(typeof axis.start!=\"undefined\"))?parseFloat(axis.start):GroupMethods.min(this._series[0][value], data);\r\n\t\t\tif(this._series.length>1)\r\n\t\t\t\tfor(var i=1; i < this._series.length;i++){\r\n\t\t\t\t\tvar maxI = GroupMethods.max(this._series[i][value], data);\r\n\t\t\t\t\tvar minI = GroupMethods.min(this._series[i][value], data);\r\n\t\t\t\t\tif (maxI > maxValue) maxValue = maxI;\r\n\t\t\t\t\tif (minI < minValue) minValue = minI;\r\n\t\t\t\t}\r\n\t\t}\r\n\t\treturn {max:maxValue,min:minValue};\r\n\t},\r\n\t_log10:function(n){\r\n\t\tvar method_name=\"log\";\r\n\t\treturn Math[method_name](n)/Math.LN10;\r\n\t},\r\n\t_drawXAxisLabel:function(x,y,obj,center,top){\r\n\t\tif (!this._settings.xAxis) return;\r\n\t\tvar elem = this.canvases[\"x\"].renderTextAt(top, center, x,y-(top?2:0),this._settings.xAxis.template(obj));\r\n\t\tif (elem)\r\n\t\t\telem.className += \" webix_axis_item_x\";\r\n\t},\r\n\t_drawXAxisLine:function(ctx,x,y1,y2,obj){\r\n\t\tif (!this._settings.xAxis||!this._settings.xAxis.lines) return;\r\n\t\tthis._drawLine(ctx,x,y1,x,y2,this._settings.xAxis.lineColor.call(this,obj),1);\r\n\t},\r\n\t_drawLine:function(ctx,x1,y1,x2,y2,color,width){\r\n\t\tctx.strokeStyle = color;\r\n\t\tctx.lineWidth = width;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(x1,y1);\r\n\t\tctx.lineTo(x2,y2);\r\n\t\tctx.stroke();\r\n\t\tctx.lineWidth = 1;\r\n\t},\r\n\t_getRelativeValue:function(minValue,maxValue){\r\n\t\tvar relValue;\r\n\t\tvar valueFactor = 1;\r\n\t\tif(maxValue != minValue){\r\n\t\t\trelValue = maxValue - minValue;\r\n\t\t}\r\n\t\telse relValue = minValue;\r\n\t\treturn [relValue,valueFactor];\r\n\t},\r\n\t_rainbow : [\r\n\t\tfunction(pos){ return \"#FF\"+color.toHex(pos/2,2)+\"00\";},\r\n\t\tfunction(pos){ return \"#FF\"+color.toHex(pos/2+128,2)+\"00\";},\r\n\t\tfunction(pos){ return \"#\"+color.toHex(255-pos,2)+\"FF00\";},\r\n\t\tfunction(pos){ return \"#00FF\"+color.toHex(pos,2);},\r\n\t\tfunction(pos){ return \"#00\"+color.toHex(255-pos,2)+\"FF\";},\r\n\t\tfunction(pos){ return \"#\"+color.toHex(pos,2)+\"00FF\";}\t\t\r\n\t],\r\n\t_defColors : [\r\n\t\t\"#f55b50\",\"#ff6d3f\",\"#ffa521\",\"#ffc927\",\"#ffee54\",\"#d3e153\",\"#9acb61\",\"#63b967\",\r\n\t\t\"#21a497\",\"#21c5da\",\"#3ea4f5\",\"#5868bf\",\"#7b53c0\",\"#a943ba\",\"#ec3b77\",\"#9eb0b8\"\r\n\t],\r\n\t_defColorsCursor: 0,\r\n\t/**\r\n\t*   adds series to the chart (value and color properties)\r\n\t*   @param: obj - obj with configuration properties\r\n\t*/\r\n\taddSeries:function(obj){\r\n\t\tconst temp = this._settings;\r\n\r\n\t\tthis._settings = extend({}, temp);\r\n\t\tthis._parseSettings(obj);\r\n\t\tthis._series.push(this._settings);\r\n\r\n\t\tthis._settings = temp;\r\n\t},\r\n\t$tooltipIn:function(t){\r\n\t\treturn t;\r\n\t},\r\n\t_get_tooltip_data:function(t,e){\r\n\t\tlet id = this.locate(e);\r\n\t\tif (!id) return null;\r\n\r\n\t\tlet active = this._getActiveSeries(e);\r\n\t\tlet def = extend({dx:20, dy:0, template:\"{obj.value}\", css:\"\"}, (this._series[active].tooltip || {template:\"\"}), true);\r\n\r\n\t\tTooltipControl._tooltip.define( def );\r\n\t\treturn this.getItem(id);\r\n\t},\r\n\t_getActiveSeries: function(e){\r\n\t\tvar a, areas, i, offset, pos, selection,  x, y;\r\n\r\n\t\tareas = this._map._areas;\r\n\t\toffset = getOffset(this._contentobj._htmlmap);\r\n\t\tpos = getPos(e);\r\n\t\tx = pos.x - offset.x;\r\n\t\ty = pos.y - offset.y;\r\n\r\n\t\tfor( i = 0; i < areas.length; i++){\r\n\t\t\ta = areas[i].points;\r\n\t\t\tif(x <= a[2] && x >= a[0] && y <= a[3] && y >= a[1]){\r\n\t\t\t\tif(selection){\r\n\t\t\t\t\tif(areas[i].index > selection.index)\r\n\t\t\t\t\t\tselection = areas[i];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tselection = areas[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn selection?selection.index:0;\r\n\t},\r\n\thideSeries:function(series){\r\n\t\tthis.canvases[series].hideCanvas();\r\n\t\tvar legend = this._settings.legend;\r\n\t\tif(legend && legend.values && legend.values[series]){\r\n\t\t\tlegend.values[series].$hidden = true;\r\n\t\t\tthis._drawLegend();\r\n\t\t}\r\n\t\tthis._map.hide(this._contentobj, series, true);\r\n\t},\r\n\tshowSeries:function(series){\r\n\t\tthis.canvases[series].showCanvas();\r\n\t\tvar legend = this._settings.legend;\r\n\t\tif(legend && legend.values && legend.values[series]){\r\n\t\t\tdelete legend.values[series].$hidden;\r\n\t\t\tthis._drawLegend();\r\n\t\t}\r\n\t\tthis._map.hide(this._contentobj, series, false);\r\n\t},\r\n\t/**\r\n\t*   renders legend block\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: width - the width of the container\r\n\t*   @param: height - the height of the container\r\n\t*/\r\n\t_drawLegend:function(data,width){\r\n\t\t/*position of the legend block*/\r\n\t\tvar i, legend, legendContainer, legendHeight, legendItems, legendWidth, style,\r\n\t\t\tx=0, y= 0, ctx, itemColor, disabled, item;\r\n\r\n\t\tdata = data||[];\r\n\t\twidth = width||this._content_width;\r\n\t\tctx = this.canvases[\"legend\"].getCanvas();\r\n\t\t/*legend config*/\r\n\t\tlegend = this._settings.legend;\r\n\t\t/*the legend sizes*/\r\n\r\n\t\tstyle = (this._settings.legend.layout!=\"x\"?\"width:\"+legend.width+\"px\":\"\");\r\n\t\t/*creation of legend container*/\r\n\r\n\t\tif(this._legendObj){\r\n\r\n\t\t\tthis._legendObj.innerHTML = \"\";\r\n\t\t\tthis._legendObj.parentNode.removeChild(this._legendObj);\r\n\t\t}\r\n\t\tthis.canvases[\"legend\"].clearCanvas(true);\r\n\r\n\t\tlegendContainer = create(\"DIV\",{\r\n\t\t\t\"class\":\"webix_chart_legend\",\r\n\t\t\t\"style\":\"left:\"+x+\"px; top:\"+y+\"px;\"+style\r\n\t\t},\"\");\r\n\t\tif(legend.padding){\r\n\t\t\tlegendContainer.style.padding =  legend.padding+\"px\";\r\n\t\t}\r\n\t\tthis._legendObj = legendContainer;\r\n\t\tthis._contentobj.appendChild(legendContainer);\r\n\r\n\t\t/*rendering legend text items*/\r\n\t\tlegendItems = [];\r\n\t\tif(!legend.values)\r\n\t\t\tfor(i = 0; i < data.length; i++){\r\n\t\t\t\tlegendItems.push(this._drawLegendText(legendContainer,legend.template(data[i]), data[i].id));\r\n\t\t\t}\r\n\t\telse\r\n\t\t\tfor(i = 0; i < legend.values.length; i++){\r\n\t\t\t\tlegendItems.push(this._drawLegendText(legendContainer,legend.values[i].text,(typeof legend.values[i].id!=\"undefined\"?typeof legend.values[i].id:i),legend.values[i].$hidden));\r\n\t\t\t}\r\n\t\tif (legendContainer.offsetWidth === 0)\r\n\t\t\tlegendContainer.style.width = \"auto\"; \r\n\t\tlegendWidth = legendContainer.offsetWidth;\r\n\t\tlegendHeight = legendContainer.offsetHeight;\r\n\r\n\t\t/*this._settings.legend.width = legendWidth;\r\n\t\tthis._settings.legend.height = legendHeight;*/\r\n\t\t/*setting legend position*/\r\n\t\tif(legendWidth<width){\r\n\t\t\tif(legend.layout == \"x\"&&legend.align == \"center\"){\r\n\t\t\t\tx = (width-legendWidth)/2;\r\n\t\t\t}\r\n\t\t\tif(legend.align == \"right\"){\r\n\t\t\t\tx = width-legendWidth;\r\n\t\t\t}\r\n\t\t\tif(legend.margin&&legend.align != \"center\"){\r\n\t\t\t\tx += (legend.align == \"left\"?1:-1)*legend.margin;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(legendHeight<this._content_height){\r\n\t\t\tif(legend.valign == \"middle\"&&legend.align != \"center\"&&legend.layout != \"x\")\r\n\t\t\t\ty = (this._content_height-legendHeight)/2;\r\n\t\t\telse if(legend.valign == \"bottom\")\r\n\t\t\t\ty = this._content_height-legendHeight;\r\n\t\t\tif(legend.margin&&legend.valign != \"middle\"){\r\n\t\t\t\ty += (legend.valign == \"top\"?1:-1)*legend.margin;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlegendContainer.style.left = x+\"px\";\r\n\t\tlegendContainer.style.top = y+\"px\";\r\n\r\n\t\t/*drawing colorful markers*/\r\n\t\tctx.save();\r\n\t\tfor(i = 0; i < legendItems.length; i++){\r\n\t\t\titem = legendItems[i];\r\n\t\t\tif(legend.values&&legend.values[i].$hidden){\r\n\t\t\t\tdisabled = true;\r\n\t\t\t\titemColor = (legend.values[i].disableColor?legend.values[i].disableColor:\"#edeff0\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdisabled = false;\r\n\t\t\t\titemColor = (legend.values?legend.values[i].color:this._settings.color.call(this,data[i]));\r\n\t\t\t}\r\n\t\t\tthis._drawLegendMarker(ctx,item.offsetLeft+x,item.offsetTop+y,itemColor,item.offsetHeight,disabled,i);\r\n\t\t}\r\n\t\tctx.restore();\r\n\t\tlegendItems = null;\r\n\t},\r\n\t/**\r\n\t*   appends legend item to legend block\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: obj - data object that needs being represented\r\n\t*/\r\n\t_drawLegendText:function(cont,value,series,disabled){\r\n\t\tvar style = \"\";\r\n\t\tif(this._settings.legend.layout==\"x\")\r\n\t\t\tstyle = \"float:left;\";\r\n\t\t/*the text of the legend item*/\r\n\t\tvar text = create(\"DIV\",{\r\n\t\t\t\"style\":style+\"padding-left:\"+(10+this._settings.legend.marker.width)+\"px\",\r\n\t\t\t\"class\":\"webix_chart_legend_item\"+(disabled?\" hidden\":\"\"),\r\n\t\t\t\"role\":\"button\",\r\n\t\t\t\"tabindex\":\"0\",\r\n\t\t\t\"aria-label\":(i18n.aria[(disabled?\"show\":\"hide\")+\"Chart\"])+\" \"+value\r\n\t\t},value);\r\n\t\tif(arguments.length>2)\r\n\t\t\ttext.setAttribute(/*@attr*/\"series_id\",series);\r\n\t\tcont.appendChild(text);\r\n\t\treturn text;\r\n\t},\r\n\t/**\r\n\t*   draw legend colorful marder\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: x - the horizontal position of the marker\r\n\t*   @param: y - the vertical position of the marker\r\n\t*   @param: obj - data object which color needs being used\r\n\t*/\r\n\t_drawLegendMarker:function(ctx,x,y,color,height,disabled,i){\r\n\t\tvar p = [];\r\n\t\tvar marker = this._settings.legend.marker;\r\n\t\tvar values = this._settings.legend.values;\r\n\t\tvar type = (values&&values[i].markerType?values[i].markerType:marker.type);\r\n\t\tif(color){\r\n\t\t\tctx.strokeStyle = ctx.fillStyle = color;\r\n\t\t}\r\n\r\n\t\tif(type==\"round\"||!marker.radius){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.lineWidth = marker.height;\r\n\t\t\tctx.lineCap = marker.type;\r\n\t\t\t/*start of marker*/\r\n\t\t\tx += ctx.lineWidth/2+5;\r\n\t\t\ty += height/2;\r\n\t\t\tctx.moveTo(x,y);\r\n\t\t\tlet x1 = x + marker.width-marker.height +1;\r\n\t\t\tctx.lineTo(x1,y);\r\n\t\t\tctx.stroke();\r\n\t\t\tctx.fill();\r\n\r\n\t\t}\r\n\t\telse if(type==\"item\"){\r\n\t\t\t/*copy of line*/\r\n\t\t\tif(this._settings.line&&this._settings.type != \"scatter\" && !this._settings.disableLines){\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.lineWidth = this._series[i].line.width;\r\n\t\t\t\tctx.strokeStyle = disabled?color:this._series[i].line.color.call(this,{});\r\n\t\t\t\tlet x0 = x + 5;\r\n\t\t\t\tlet y0 = y + height/2;\r\n\t\t\t\tctx.moveTo(x0,y0);\r\n\t\t\t\tlet x1 = x0 + marker.width;\r\n\t\t\t\tctx.lineTo(x1,y0);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\t/*item copy*/\r\n\t\t\tvar config = this._series[i].item;\r\n\t\t\tvar radius = parseInt(config.radius.call(this,{}),10)||0;\r\n\t\t\tvar markerType = config.type.call(this,{});\r\n\t\t\tif(radius){\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tif(disabled){\r\n\t\t\t\t\tctx.lineWidth = config.borderWidth;\r\n\t\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\t\tctx.fillStyle = color;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tctx.lineWidth = config.borderWidth;\r\n\t\t\t\t\tctx.fillStyle = config.color.call(this,{});\r\n\t\t\t\t\tctx.strokeStyle = config.borderColor.call(this,{});\r\n\t\t\t\t\tctx.globalAlpha = config.alpha.call(this,{});\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tx += marker.width/2+5;\r\n\t\t\t\ty += height/2;\r\n\t\t\t\tthis._strokeChartItem(ctx,x,y,radius+1,markerType);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\tctx.globalAlpha = 1;\r\n\t\t}else{\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tx += 5;\r\n\t\t\ty += height/2-marker.height/2;\r\n\t\t\tp = [\r\n\t\t\t\t[x+marker.radius,y+marker.radius,marker.radius,Math.PI,3*Math.PI/2,false],\r\n\t\t\t\t[x+marker.width-marker.radius,y],\r\n\t\t\t\t[x+marker.width-marker.radius,y+marker.radius,marker.radius,-Math.PI/2,0,false],\r\n\t\t\t\t[x+marker.width,y+marker.height-marker.radius],\r\n\t\t\t\t[x+marker.width-marker.radius,y+marker.height-marker.radius,marker.radius,0,Math.PI/2,false],\r\n\t\t\t\t[x+marker.radius,y+marker.height],\r\n\t\t\t\t[x+marker.radius,y+marker.height-marker.radius,marker.radius,Math.PI/2,Math.PI,false],\r\n\t\t\t\t[x,y+marker.radius]\r\n\t\t\t];\r\n\t\t\tthis._path(ctx,p);\r\n\t\t\tctx.stroke();\r\n\t\t\tctx.fill();\r\n\t\t}\r\n\r\n\t},\r\n\t/**\r\n\t*   gets the points those represent chart left top and right bottom bounds\r\n\t*   @param: width - the width of the chart container\r\n\t*   @param: height - the height of the chart container\r\n\t*/\r\n\t_getChartBounds:function(width,height){\r\n\t\tvar chartX0, chartY0, chartX1, chartY1;\r\n\t\t\r\n\t\tchartX0 = this._settings.padding.left;\r\n\t\tchartY0 = this._settings.padding.top;\r\n\t\tchartX1 = width - this._settings.padding.right;\r\n\t\tchartY1 = height - this._settings.padding.bottom;\t\r\n\t\t\r\n\t\tif(this._settings.legend){\r\n\t\t\tvar legend = this._settings.legend;\r\n\t\t\t/*legend size*/\r\n\t\t\tvar legendWidth = this._settings.legend.width;\r\n\t\t\tvar legendHeight = this._settings.legend.height;\r\n\t\t\r\n\t\t\t/*if legend is horizontal*/\r\n\t\t\tif(legend.layout == \"x\"){\r\n\t\t\t\tif(legend.valign == \"center\"){\r\n\t\t\t\t\tif(legend.align == \"right\")\r\n\t\t\t\t\t\tchartX1 -= legendWidth;\r\n\t\t\t\t\telse if(legend.align == \"left\")\r\n\t\t\t\t\t\tchartX0 += legendWidth;\r\n\t\t\t\t} else if(legend.valign == \"bottom\"){\r\n\t\t\t\t\tchartY1 -= legendHeight;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchartY0 += legendHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*vertical scale*/\r\n\t\t\telse {\r\n\t\t\t\tif(legend.align == \"right\")\r\n\t\t\t\t\tchartX1 -= legendWidth;\r\n\t\t\t\telse if(legend.align == \"left\")\r\n\t\t\t\t\tchartX0 += legendWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {start:{x:chartX0,y:chartY0},end:{x:chartX1,y:chartY1}};\r\n\t},\r\n\t/**\r\n\t*   gets the maximum and minimum values for the stacked chart\r\n\t*   @param: data - data set\r\n\t*/\r\n\t_getStackedLimits:function(data){\r\n\t\tvar i, j, maxValue, minValue, value;\r\n\t\tif(this._settings.yAxis&&(typeof this._settings.yAxis.end!=\"undefined\")&&(typeof this._settings.yAxis.start!=\"undefined\")&&this._settings.yAxis.step){\r\n\t\t\tmaxValue = parseFloat(this._settings.yAxis.end);\r\n\t\t\tminValue = parseFloat(this._settings.yAxis.start);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfor(i=0; i < data.length; i++){\r\n\t\t\t\tdata[i].$sum = 0 ;\r\n\t\t\t\tdata[i].$min = Infinity;\r\n\t\t\t\tfor(j =0; j < this._series.length;j++){\r\n\t\t\t\t\tvalue = Math.abs(parseFloat(this._series[j].value(data[i])||0));\r\n\t\t\t\t\tif(isNaN(value)) continue;\r\n\t\t\t\t\tif(this._series[j].type.toLowerCase().indexOf(\"stacked\")!=-1)\r\n\t\t\t\t\t\tdata[i].$sum += value;\r\n\t\t\t\t\tif(value < data[i].$min) data[i].$min = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmaxValue = -Infinity;\r\n\t\t\tminValue = Infinity;\r\n\t\t\tfor(i=0; i < data.length; i++){\r\n\t\t\t\tif (data[i].$sum > maxValue) maxValue = data[i].$sum ;\r\n\t\t\t\tif (data[i].$min < minValue) minValue = data[i].$min ;\r\n\t\t\t}\r\n\t\t\tif(minValue>0) minValue =0;\r\n\t\t}\r\n\t\treturn {max: maxValue, min: minValue};\r\n\t},\r\n\t/*adds colors to the gradient object*/\r\n\t_setBarGradient:function(ctx,x1,y1,x2,y2,type,rawColor,axis){\r\n\t\tvar gradient, offset, rgb, hsv, rawColor0, stops;\r\n\t\tif(type == \"light\"){\r\n\t\t\tif(axis == \"x\")\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\r\n\t\t\telse\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x1,y2);\r\n\t\t\tstops = [[0,\"#FFFFFF\"],[0.9,rawColor],[1,rawColor]];\r\n\t\t\toffset = 2;\r\n\t\t}\r\n\t\telse if(type == \"falling\"||type == \"rising\"){\r\n\t\t\tif(axis == \"x\")\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\r\n\t\t\telse\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x1,y2);\r\n\t\t\trgb = color.toRgb(rawColor);\r\n\t\t\thsv = color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\r\n\t\t\thsv[1] *= 1/2;\r\n\t\t\trawColor0 = \"rgb(\"+color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\r\n\t\t\tif(type == \"falling\"){\r\n\t\t\t\tstops = [[0,rawColor0],[0.7,rawColor],[1,rawColor]];\r\n\t\t\t}\r\n\t\t\telse if(type == \"rising\"){\r\n\t\t\t\tstops = [[0,rawColor],[0.3,rawColor],[1,rawColor0]];\r\n\t\t\t}\r\n\t\t\toffset = 0;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tctx.globalAlpha = 0.37;\r\n\t\t\toffset = 0;\r\n\t\t\tif(axis == \"x\")\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y2,x1,y1);\r\n\t\t\telse\r\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\r\n\t\t\tstops = [[0,\"#9d9d9d\"],[0.3,\"#e8e8e8\"],[0.45,\"#ffffff\"],[0.55,\"#ffffff\"],[0.7,\"#e8e8e8\"],[1,\"#9d9d9d\"]];\r\n\t\t}\r\n\t\tthis._gradient(gradient,stops);\r\n\t\treturn {gradient: gradient,offset: offset};\r\n\t},\r\n\t/**\r\n\t*   returns the x and y position\r\n\t*   @param: a - angle\r\n\t*   @param: x - start x position\r\n\t*   @param: y - start y position\r\n\t*   @param: r - destination to the point\r\n\t*/\r\n\t_getPositionByAngle:function(a,x,y,r){\r\n\t\ta *= (-1);\r\n\t\tx = x+Math.cos(a)*r;\r\n\t\ty = y-Math.sin(a)*r;\r\n\t\treturn {x:x,y:y};\r\n\t},\r\n\t_gradient:function(gradient,stops){\r\n\t\tfor(var i=0; i< stops.length; i++){\r\n\t\t\tgradient.addColorStop(stops[i][0],stops[i][1]);\r\n\t\t}\r\n\t},\r\n\t_path: function(ctx,points){\r\n\t\tvar i, method;\r\n\t\tfor(i = 0; i< points.length; i++){\r\n\t\t\tmethod = (i?\"lineTo\":\"moveTo\");\r\n\t\t\tif(points[i].length>2)\r\n\t\t\t\tmethod = \"arc\";\r\n\t\t\tctx[method].apply(ctx,points[i]);\r\n\t\t}\r\n\t},\r\n\t_addMapRect:function(map,id,points,bounds,sIndex){\r\n\t\tmap.addRect(id,[points[0].x-bounds.x,points[0].y-bounds.y,points[1].x-bounds.x,points[1].y-bounds.y],sIndex);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, Pie, Bar, Line, BarH, StackedBar, StackedBarH, Spline, Area, Radar, Scatter, Presets, SplineArea, DynamicChart, Group, AutoTooltip, DataLoader, MouseEvents,  EventSystem , base.view);\r\nexport default {api, view};","import {$active} from \"../../webix/skin\";\r\n\r\nconst Pie = {\r\n\t$render_pie:function(ctx,data,x,y,sIndex,map){\r\n\t\tthis._renderPie(ctx,data,x,y,1,map,sIndex);\r\n\t},\r\n\t/**\r\n\t *   renders a pie chart\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: data - object those need to be displayed\r\n\t *   @param: x - the width of the container\r\n\t *   @param: y - the height of the container\r\n\t *   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)\r\n\t */\r\n\t_renderPie:function(ctx,data,point0,point1,ky,map,sIndex){\r\n\t\tif(!data.length)\r\n\t\t\treturn;\r\n\t\tvar coord = this._getPieParameters(point0,point1);\r\n\t\t/*pie radius*/\r\n\t\tvar radius = (this._settings.radius?this._settings.radius:coord.radius);\r\n\t\tif(radius<0)\r\n\t\t\treturn;\r\n\r\n\t\t/*real values*/\r\n\t\tvar values = this._getValues(data);\r\n\r\n\t\tvar totalValue = this._getTotalValue(values);\r\n\r\n\t\t/*weighed values (the ratio of object value to total value)*/\r\n\t\tvar ratios = this._getRatios(values,totalValue);\r\n\r\n\t\t/*pie center*/\r\n\t\tvar x0 = (this._settings.x?this._settings.x:coord.x);\r\n\t\tvar y0 = (this._settings.y?this._settings.y:coord.y);\r\n\t\t/*adds shadow to the 2D pie*/\r\n\t\tif(ky==1&&this._settings.shadow)\r\n\t\t\tthis._addShadow(ctx,x0,y0,radius);\r\n\r\n\t\t/*changes vertical position of the center according to 3Dpie cant*/\r\n\t\ty0 = y0/ky;\r\n\t\t/*the angle defines the 1st edge of the sector*/\r\n\t\tvar alpha0 = -Math.PI/2;\r\n\t\tvar angles = [];\r\n\t\t/*changes Canvas vertical scale*/\r\n\t\tctx.scale(1,ky);\r\n\t\t/*adds radial gradient to a pie*/\r\n\t\tif (this._settings.gradient){\r\n\t\t\tvar x1 = (ky!=1?x0+radius/3:x0);\r\n\t\t\tvar y1 = (ky!=1?y0+radius/3:y0);\r\n\t\t\tthis._showRadialGradient(ctx,x0,y0,radius,x1,y1);\r\n\t\t}\r\n\t\tfor(var i = 0; i < data.length;i++){\r\n\t\t\tif (!values[i]) continue;\r\n\t\t\t/*drawing sector*/\r\n\t\t\t//ctx.lineWidth = 2;\r\n\t\t\tctx.strokeStyle = this._settings.lineColor.call(this,data[i]);\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x0,y0);\r\n\t\t\tangles.push(alpha0);\r\n\t\t\t/*the angle defines the 2nd edge of the sector*/\r\n\t\t\tvar alpha1 = -Math.PI/2+ratios[i]-0.0001;\r\n\t\t\tctx.arc(x0,y0,radius,alpha0,alpha1,false);\r\n\t\t\tctx.lineTo(x0,y0);\r\n\r\n\t\t\tvar color = this._settings.color.call(this,data[i]);\r\n\t\t\tctx.fillStyle = color;\r\n\t\t\tctx.fill();\r\n\r\n\t\t\t/*text that needs being displayed inside the sector*/\r\n\t\t\tif(this._settings.pieInnerText)\r\n\t\t\t\tthis._drawSectorLabel(x0,y0,5*radius/6,alpha0,alpha1,ky,this._settings.pieInnerText(data[i],totalValue),true);\r\n\t\t\t/*label outside the sector*/\r\n\t\t\tif(this._settings.label)\r\n\t\t\t\tthis._drawSectorLabel(x0,y0,radius+this._settings.labelOffset,alpha0,alpha1,ky,this._settings.label(data[i]));\r\n\t\t\t/*drawing lower part for 3D pie*/\r\n\t\t\tif(ky!=1){\r\n\t\t\t\tthis._createLowerSector(ctx,x0,y0,alpha0,alpha1,radius,true);\r\n\t\t\t\tctx.fillStyle = \"#000000\";\r\n\t\t\t\tctx.globalAlpha = 0.2;\r\n\t\t\t\tthis._createLowerSector(ctx,x0,y0,alpha0,alpha1,radius,false);\r\n\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\tctx.fillStyle = color;\r\n\t\t\t}\r\n\t\t\t/*creats map area (needed for events)*/\r\n\t\t\tmap.addSector(data[i].id,alpha0,alpha1,x0-point0.x,y0-point0.y/ky,radius,ky,sIndex);\r\n\r\n\t\t\talpha0 = alpha1;\r\n\t\t}\r\n\t\t/*renders radius lines and labels*/\r\n\t\tctx.globalAlpha = 0.8;\r\n\t\tvar p;\r\n\t\tfor(i=0;i< angles.length;i++){\r\n\t\t\tp = this._getPositionByAngle(angles[i],x0,y0,radius);\r\n\t\t\tthis._drawLine(ctx,x0,y0,p.x,p.y,this._settings.lineColor.call(this,data[i]),2);\r\n\t\t}\r\n\t\tctx.globalAlpha =1;\r\n\t\tif(ky==1 && this._settings.border){\r\n\t\t\tctx.lineWidth = this._settings.borderWidth||2;\r\n\t\t\tctx.strokeStyle = this._settings.borderColor ? this._settings.borderColor.call(this) : \"#ffffff\";\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.arc(x0,y0,radius+1,0,2*Math.PI,false);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tctx.scale(1,1/ky);\r\n\t},\r\n\t/**\r\n\t *   returns list of values\r\n\t *   @param: data array\r\n\t */\r\n\t_getValues:function(data){\r\n\t\tvar v = [];\r\n\t\tfor(var i = 0; i < data.length;i++)\r\n\t\t\tv.push(Math.abs(parseFloat(this._settings.value(data[i])||0)));\r\n\t\treturn v;\r\n\t},\r\n\t/**\r\n\t *   returns total value\r\n\t *   @param: the array of values\r\n\t */\r\n\t_getTotalValue:function(values){\r\n\t\tvar t=0;\r\n\t\tfor(var i = 0; i < values.length;i++)\r\n\t\t\tt += values[i];\r\n\t\treturn  t;\r\n\t},\r\n\t/**\r\n\t *   gets angles for all values\r\n\t *   @param: the array of values\r\n\t *   @param: total value (optional)\r\n\t */\r\n\t_getRatios:function(values,totalValue){\r\n\t\tvar value;\r\n\t\tvar ratios = [];\r\n\t\tvar prevSum = 0;\r\n\t\ttotalValue = totalValue||this._getTotalValue(values);\r\n\t\tfor(var i = 0; i < values.length;i++){\r\n\t\t\tvalue = values[i];\r\n\r\n\t\t\tratios[i] = Math.PI*2*(totalValue?((value+prevSum)/totalValue):(1/values.length));\r\n\t\t\tprevSum += value;\r\n\t\t}\r\n\t\treturn ratios;\r\n\t},\r\n\t/**\r\n\t *   returns calculated pie parameters: center position and radius\r\n\t *   @param: x - the width of a container\r\n\t *   @param: y - the height of a container\r\n\t */\r\n\t_getPieParameters:function(point0,point1){\r\n\t\t/*var offsetX = 0;\r\n\t\t var offsetY = 0;\r\n\t\t if(this._settings.legend &&this._settings.legend.layout!=\"x\")\r\n\t\t offsetX = this._settings.legend.width*(this._settings.legend.align==\"right\"?-1:1);\r\n\t\t var x0 = (x + offsetX)/2;\r\n\t\t if(this._settings.legend &&this._settings.legend.layout==\"x\")\r\n\t\t offsetY = this._settings.legend.height*(this._settings.legend.valign==\"bottom\"?-1:1);\r\n\t\t var y0 = (y+offsetY)/2;*/\r\n\t\tvar width = point1.x-point0.x;\r\n\t\tvar height = point1.y-point0.y;\r\n\t\tvar x0 = point0.x+width/2;\r\n\t\tvar y0 = point0.y+height/2;\r\n\t\tvar radius = Math.min(width/2,height/2);\r\n\t\treturn {\"x\":x0,\"y\":y0,\"radius\":radius};\r\n\t},\r\n\t/**\r\n\t *   creates lower part of sector in 3Dpie\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x0 - the horizontal position of the pie center\r\n\t *   @param: y0 - the vertical position of the pie center\r\n\t *   @param: a0 - the angle that defines the first edge of a sector\r\n\t *   @param: a1 - the angle that defines the second edge of a sector\r\n\t *   @param: R - pie radius\r\n\t *   @param: line (boolean) - if the sector needs a border\r\n\t */\r\n\t_createLowerSector:function(ctx,x0,y0,a1,a2,R,line){\r\n\t\tctx.lineWidth = 1;\r\n\t\t/*checks if the lower sector needs being displayed*/\r\n\t\tif(!((a1<=0 && a2>=0)||(a1>=0 && a2<=Math.PI)||(Math.abs(a1-Math.PI)>0.003&&a1<=Math.PI && a2>=Math.PI))) return;\r\n\r\n\t\tif(a1<=0 && a2>=0){\r\n\t\t\ta1 = 0;\r\n\t\t\tline = false;\r\n\t\t\tthis._drawSectorLine(ctx,x0,y0,R,a1,a2);\r\n\t\t}\r\n\t\tif(a1<=Math.PI && a2>=Math.PI){\r\n\t\t\ta2 = Math.PI;\r\n\t\t\tline = false;\r\n\t\t\tthis._drawSectorLine(ctx,x0,y0,R,a1,a2);\r\n\t\t}\r\n\t\t/*the height of 3D pie*/\r\n\t\tvar offset = (this._settings.pieHeight||Math.floor(R/4))/this._settings.cant;\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(x0,y0,R,a1,a2,false);\r\n\t\tctx.lineTo(x0+R*Math.cos(a2),y0+R*Math.sin(a2)+offset);\r\n\t\tctx.arc(x0,y0+offset,R,a2,a1,true);\r\n\t\tctx.lineTo(x0+R*Math.cos(a1),y0+R*Math.sin(a1));\r\n\t\tctx.fill();\r\n\t\tif(line)\r\n\t\t\tctx.stroke();\r\n\t},\r\n\t/**\r\n\t *   draws a serctor arc\r\n\t */\r\n\t_drawSectorLine:function(ctx,x0,y0,R,a1,a2){\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(x0,y0,R,a1,a2,false);\r\n\t\tctx.stroke();\r\n\t},\r\n\t/**\r\n\t *   adds a shadow to pie\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x - the horizontal position of the pie center\r\n\t *   @param: y - the vertical position of the pie center\r\n\t *   @param: R - pie radius\r\n\t */\r\n\t_addShadow:function(ctx,x,y,R){\r\n\t\tctx.globalAlpha = 0.5;\r\n\t\tvar shadows = [\"#c4c4c4\",\"#c6c6c6\",\"#cacaca\",\"#dcdcdc\",\"#dddddd\",\"#e0e0e0\",\"#eeeeee\",\"#f5f5f5\",\"#f8f8f8\"];\r\n\t\tfor(var i = shadows.length-1;i>-1;i--){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.fillStyle = shadows[i];\r\n\t\t\tctx.arc(x+1,y+1,R+i,0,Math.PI*2,true);\r\n\t\t\tctx.fill();\r\n\t\t}\r\n\t\tctx.globalAlpha = 1;\r\n\t},\r\n\t/**\r\n\t *   returns a gray gradient\r\n\t *   @param: gradient - gradient object\r\n\t */\r\n\t_getGrayGradient:function(gradient){\r\n\t\tgradient.addColorStop(0.0,\"#ffffff\");\r\n\t\tgradient.addColorStop(0.7,\"#7a7a7a\");\r\n\t\tgradient.addColorStop(1.0,\"#000000\");\r\n\t\treturn gradient;\r\n\t},\r\n\t/**\r\n\t *   adds gray radial gradient\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x - the horizontal position of the pie center\r\n\t *   @param: y - the vertical position of the pie center\r\n\t *   @param: radius - pie radius\r\n\t *   @param: x0 - the horizontal position of a gradient center\r\n\t *   @param: y0 - the vertical position of a gradient center\r\n\t */\r\n\t_showRadialGradient:function(ctx,x,y,radius,x0,y0){\r\n\t\t//ctx.globalAlpha = 0.3;\r\n\t\tctx.beginPath();\r\n\t\tvar gradient;\r\n\t\tif(typeof this._settings.gradient!= \"function\"){\r\n\t\t\tgradient = ctx.createRadialGradient(x0,y0,radius/4,x,y,radius);\r\n\t\t\tgradient = this._getGrayGradient(gradient);\r\n\t\t}\r\n\t\telse gradient = this._settings.gradient(gradient);\r\n\t\tctx.fillStyle = gradient;\r\n\t\tctx.arc(x,y,radius,0,Math.PI*2,true);\r\n\t\tctx.fill();\r\n\t\t//ctx.globalAlpha = 1;\r\n\t\tctx.globalAlpha = 0.7;\r\n\t},\r\n\t/**\r\n\t *   returns the calculates pie parameters: center position and radius\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x0 - the horizontal position of the pie center\r\n\t *   @param: y0 - the vertical position of the pie center\r\n\t *   @param: R - pie radius\r\n\t *   @param: alpha1 - the angle that defines the 1st edge of a sector\r\n\t *   @param: alpha2 - the angle that defines the 2nd edge of a sector\r\n\t *   @param: ky - the value that defines an angle of inclination\r\n\t *   @param: text - label text\r\n\t *   @param: in_width (boolean) - if label needs being displayed inside a pie\r\n\t */\r\n\t_drawSectorLabel:function(x0,y0,R,alpha1,alpha2,ky,text,in_width){\r\n\t\tvar t = this.canvases[0].renderText(0,0,text,0,1);\r\n\t\tif (!t) return;\r\n\r\n\t\t//get existing width of text\r\n\t\tvar labelWidth = t.scrollWidth;\r\n\t\tt.style.width = labelWidth+\"px\";\t//adjust text label to fit all text\r\n\t\tif (labelWidth>x0) labelWidth = x0;\t//the text can't be greater than half of view\r\n\r\n\t\t//calculate expected correction based on default font metrics\r\n\t\tvar width = (alpha2-alpha1<0.2?4:8);\r\n\t\tif (in_width) width = labelWidth/1.8;\r\n\t\tvar alpha = alpha1+(alpha2-alpha1)/2;\r\n\r\n\t\t//position and its correction\r\n\t\tR = R-(width-8)/2;\r\n\t\tvar corr_x = - width;\r\n\t\tvar corr_y = -8;\r\n\t\tvar align = \"right\";\r\n\r\n\t\t//for items in left upper and lower sector\r\n\t\tif(alpha>=Math.PI/2 && alpha<Math.PI || alpha<=3*Math.PI/2 && alpha>=Math.PI){\r\n\t\t\tcorr_x = -labelWidth-corr_x+1;/*correction for label width*/\r\n\t\t\talign = \"left\";\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t   calculate position of text\r\n\t\t   basically get point at center of pie sector\r\n\t\t*/\r\n\t\tvar offset = 0;\r\n\r\n\t\tif(!in_width&&ky<1&&(alpha>0&&alpha<Math.PI))\r\n\t\t\toffset = (this._settings.height||Math.floor(R/4))/ky;\r\n\r\n\t\tvar y = (y0+Math.floor((R+offset)*Math.sin(alpha)))*ky+corr_y;\r\n\t\tvar x = x0+Math.floor((R+width/2)*Math.cos(alpha))+corr_x;\r\n\r\n\t\t/*\r\n\t\t   if pie sector starts in left of right part pie,\r\n\t\t   related text\tmust be placed to the left of to the right of pie as well\r\n\t\t*/\r\n\t\tvar left_end = (alpha2 < Math.PI/2+0.01);\r\n\t\tvar left_start = (alpha1 < Math.PI/2);\r\n\t\tif (left_start && left_end){\r\n\t\t\tx = Math.max(x,x0+3);\t//right part of pie\r\n\t\t\t/*if(alpha2-alpha1<0.2)\r\n\t\t\t\tx = x0;*/\r\n\t\t}\r\n\t\telse if (!left_start && !left_end)\r\n\t\t\tx = Math.min(x,x0-labelWidth);\t//left part of pie\r\n\t\telse if (!in_width&&(alpha>=Math.PI/2 && alpha<Math.PI || alpha<=3*Math.PI/2 && alpha>=Math.PI)){\r\n\t\t\tx += labelWidth/3;\r\n\t\t}\r\n\r\n\r\n\t\t//we need to set position of text manually, based on above calculations\r\n\t\tt.style.top  = y+\"px\";\r\n\t\tt.style.left = x+\"px\";\r\n\t\tt.style.width = labelWidth+\"px\";\r\n\t\tt.style.textAlign = align;\r\n\t\tt.style.whiteSpace = \"nowrap\";\r\n\t},\r\n\t$render_pie3D:function(ctx,data,x,y,sIndex,map){\r\n\t\tthis._renderPie(ctx,data,x,y,this._settings.cant,map);\r\n\t},\r\n\t$render_donut:function(ctx,data,point0,point1,sIndex,map){\r\n\t\tif(!data.length)\r\n\t\t\treturn;\r\n\t\tthis._renderPie(ctx,data,point0,point1,1,map,sIndex);\r\n\t\tvar config = this._settings;\r\n\t\tvar coord = this._getPieParameters(point0,point1);\r\n\t\tvar pieRadius = (config.radius?config.radius:coord.radius);\r\n\t\tif (pieRadius <= 0)\r\n\t\t\treturn;\r\n\t\tvar innerRadius = ((config.innerRadius&&(config.innerRadius<pieRadius))?config.innerRadius:pieRadius/3);\r\n\t\tvar x0 = (config.x?config.x:coord.x);\r\n\t\tvar y0 = (config.y?config.y:coord.y);\r\n\t\tctx.fillStyle = $active.backColor;\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(x0,y0,innerRadius,0,Math.PI*2,true);\r\n\t\tctx.fill();\r\n\t}\r\n};\r\n\r\nexport default Pie;","import color from \"../../webix/color\";\r\n\r\nconst BarChart = {\r\n\t/**\r\n\t*   renders a bar chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: x - the width of the container\r\n\t*   @param: y - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_bar:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar barWidth, cellWidth,\r\n\t\t\ti,\r\n\t\t\tlimits, maxValue, minValue,\r\n\t\t\trelValue, valueFactor, relativeValues,\r\n\t\t\tstartValue, unit,\r\n\t\t\txax, yax,\r\n\t\t\ttotalHeight = point1.y-point0.y;\r\n\r\n\t\tyax = !!this._settings.yAxis;\r\n\t\txax = !!this._settings.xAxis;\r\n\r\n\t\tlimits = this._getLimits();\r\n\t\tmaxValue = limits.max;\r\n\t\tminValue = limits.min;\r\n\r\n\t\t/*an available width for one bar*/\r\n\t\tcellWidth = (point1.x-point0.x)/data.length;\r\n\r\n\r\n\t\t/*draws x and y scales*/\r\n\t\tif(!sIndex&&!(this._settings.origin!=\"auto\"&&!yax)){\r\n\t\t\tthis._drawScales(data,point0, point1,minValue,maxValue,cellWidth);\r\n\t\t}\r\n\r\n\t\t/*necessary for automatic scale*/\r\n\t\tif(yax){\r\n\t\t\tmaxValue = parseFloat(this._settings.yAxis.end);\r\n\t\t\tminValue = parseFloat(this._settings.yAxis.start);\r\n\t\t}\r\n\r\n\t\t/*unit calculation (bar_height = value*unit)*/\r\n\t\trelativeValues = this._getRelativeValue(minValue,maxValue);\r\n\t\trelValue = relativeValues[0];\r\n\t\tvalueFactor = relativeValues[1];\r\n\r\n\t\tunit = (relValue?totalHeight/relValue:relValue);\r\n\r\n\t\tif(!yax&&!(this._settings.origin!=\"auto\"&&xax)){\r\n\t\t\t/*defines start value for better representation of small values*/\r\n\t\t\tstartValue = 10;\r\n\t\t\tunit = (relValue?(totalHeight-startValue)/relValue:startValue);\r\n\t\t}\r\n\t\t/*if yAxis isn't set, but with custom origin */\r\n\t\tif(!sIndex&&(this._settings.origin!=\"auto\"&&!yax)&&this._settings.origin>minValue){\r\n\t\t\tthis._drawXAxis(ctx,data,point0,point1,cellWidth,point1.y-unit*(this._settings.origin-minValue));\r\n\t\t}\r\n\r\n\t\t/*a real bar width */\r\n\t\tbarWidth = parseInt(this._settings.barWidth,10);\r\n\t\tvar seriesNumber = 0;\r\n\t\tvar seriesIndex = 0;\r\n\t\tfor(i=0; i<this._series.length; i++ ){\r\n\t\t\tif(i == sIndex){\r\n\t\t\t\tseriesIndex  = seriesNumber;\r\n\t\t\t}\r\n\t\t\tif(this._series[i].type == \"bar\")\r\n\t\t\t\tseriesNumber++;\r\n\t\t}\r\n\t\tif(this._series&&(barWidth*seriesNumber+4)>cellWidth) barWidth = parseInt(cellWidth/seriesNumber-4,10);\r\n\r\n\t\t/*the half of distance between bars*/\r\n\t\tvar barOffset = (cellWidth - barWidth*seriesNumber)/2;\r\n\r\n\t\t/*the radius of rounding in the top part of each bar*/\r\n\t\tvar radius = (typeof this._settings.radius!=\"undefined\"?parseInt(this._settings.radius,10):Math.round(barWidth/5));\r\n\r\n\t\tvar inner_gradient = false;\r\n\t\tvar gradient = this._settings.gradient;\r\n\r\n\t\tif(gradient && typeof(gradient) != \"function\"){\r\n\t\t\tinner_gradient = gradient;\r\n\t\t\tgradient = false;\r\n\t\t} else if (gradient){\r\n\t\t\tgradient = ctx.createLinearGradient(0,point1.y,0,point0.y);\r\n\t\t\tthis._settings.gradient(gradient);\r\n\t\t}\r\n\t\t/*draws a black line if the horizontal scale isn't defined*/\r\n\t\tif(!xax){\r\n\t\t\tthis._drawLine(ctx,point0.x,point1.y+0.5,point1.x,point1.y+0.5,\"#edeff0\",1); //hardcoded color!\r\n\t\t}\r\n\r\n\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\tvar value =  parseFloat(this._settings.value(data[i])||0);\r\n\t\t\tif(this._logScaleCalc)\r\n\t\t\t\tvalue = this._log10(value);\r\n\r\n\t\t\tif(!value || isNaN(value))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(value>maxValue) value = maxValue;\r\n\t\t\tvalue -= minValue;\r\n\t\t\tvalue *= valueFactor;\r\n\r\n\t\t\t/*start point (bottom left)*/\r\n\t\t\tvar x0 = point0.x + barOffset + i*cellWidth+(barWidth+1)*seriesIndex;\r\n\t\t\tvar y0 = point1.y;\r\n\r\n\t\t\tvar color = gradient||this._settings.color.call(this,data[i]);\r\n\t\t\tvar border = this._settings.border?1:0;\r\n\t\t\tvar label = this._settings.label(data[i]);\r\n\t\t\t\r\n\t\t\t/*takes start value into consideration */\r\n\t\t\tif(!yax&&!(this._settings.origin!=\"auto\"&&xax)) \r\n\t\t\t\tvalue += startValue/unit;\r\n\t\t\t/* don't draw borders and labels for not painted values (on y-Axis or lower) */\r\n\t\t\telse if(value == this._settings.origin || (this._settings.origin ==\"auto\" && this._settings.value(data[i]) == minValue)){\r\n\t\t\t\tborder = 0;\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\telse if(value<0||(this._settings.yAxis&&value===0&&!(this._settings.origin!=\"auto\"&&this._settings.origin>minValue))){\r\n\t\t\t\tvalue = border = 0;\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\r\n\t\t\t/*drawing bar body*/\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\r\n\t\t\tvar points = this._drawBar(ctx,point0,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient, border);\r\n\t\t\tif (inner_gradient){\r\n\t\t\t\tthis._drawBarGradient(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient, border);\r\n\t\t\t}\r\n\t\t\t/*drawing the gradient border of a bar*/\r\n\t\t\tif(border)\r\n\t\t\t\tthis._drawBarBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\r\n\r\n\t\t\tctx.globalAlpha = 1;\r\n\r\n\t\t\t/*sets a bar label*/\r\n\t\t\tif(points[0]!=x0)\r\n\t\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0+Math.floor(barWidth/2),points[1],label);\r\n\t\t\telse\r\n\t\t\t\tthis.canvases[sIndex].renderTextAt(true, true, x0+Math.floor(barWidth/2),points[3],label);\r\n\t\t\t/*defines a map area for a bar*/\r\n\t\t\tmap.addRect(data[i].id,[x0-point0.x,points[3]-point0.y,points[2]-point0.x,points[1]-point0.y],sIndex);\r\n\t\t\t//this._addMapRect(map,data[i].id,[{x:x0,y:points[3]},{x:points[2],y:points[1]}],point0,sIndex);\r\n\t\t}\r\n\t},\r\n\t_correctBarParams:function(ctx,x,y,value,unit,barWidth,minValue){\r\n\t\tvar xax = this._settings.xAxis;\r\n\t\tvar axisStart = y;\r\n\t\tif(!!xax&&this._settings.origin!=\"auto\" && (this._settings.origin>minValue)){\r\n\t\t\ty -= (this._settings.origin-minValue)*unit;\r\n\t\t\taxisStart = y;\r\n\t\t\tvalue = value-(this._settings.origin-minValue);\r\n\t\t\tif(value < 0){\r\n\t\t\t\tvalue *= (-1);\r\n\t\t\t\tctx.translate(x+barWidth,y);\r\n\t\t\t\tctx.rotate(Math.PI);\r\n\t\t\t\tx = 0;\r\n\t\t\t\ty = 0;\r\n\t\t\t}\r\n\t\t\ty -= 0.5;\r\n\t\t}\r\n\r\n\t\treturn {value:value,x0:x,y0:y,start:axisStart};\r\n\t},\r\n\t_drawBar:function(ctx,point0,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient, border){\r\n\t\tctx.save();\r\n\t\tctx.fillStyle = color;\r\n\t\tvar p = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\t\tvar points = this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,border);\r\n\t\tif (gradient&&!inner_gradient) ctx.lineTo(p.x0+border,point0.y); //fix gradient sphreading\r\n\t\tctx.fill();\r\n\t\tctx.restore();\r\n\t\tvar x1 = p.x0;\r\n\t\tvar x2 = (p.x0!=x0?x0+points[0]:points[0]);\r\n\t\tvar y1 = (p.x0!=x0?(p.start-points[1]-p.y0):p.y0);\r\n\t\tvar y2 = (p.x0!=x0?p.start-p.y0:points[1]);\r\n\r\n\t\treturn [x1,y1,x2,y2];\r\n\t},\r\n\t_setBorderStyles:function(ctx, rawColor){\r\n\t\tvar hsv,rgb;\r\n\t\trgb = color.toRgb(rawColor);\r\n\t\thsv = color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\r\n\t\thsv[2] /= 1.4;\r\n\t\tvar rgbColor = \"rgb(\"+color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\r\n\t\tctx.strokeStyle = rgbColor;\r\n\t\tif(ctx.globalAlpha==1)\r\n\t\t\tctx.globalAlpha = 0.9;\r\n\t},\r\n\t_drawBarBorder:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color){\r\n\t\tvar p;\r\n\t\tctx.save();\r\n\t\tp = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\t\tthis._setBorderStyles(ctx,color);\r\n\t\tthis._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,ctx.lineWidth/2,1);\r\n\t\tctx.stroke();\r\n\t\t/*ctx.fillStyle = color;\r\n\t\t this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,0);\r\n\t\t ctx.lineTo(p.x0,0);\r\n\t\t ctx.fill()\r\n\r\n\r\n\t\t ctx.fillStyle = \"#000000\";\r\n\t\t ctx.globalAlpha = 0.37;\r\n\r\n\t\t this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,0);\r\n\t\t ctx.fill()\r\n\t\t */\r\n\t\tctx.restore();\r\n\t},\r\n\t_drawBarGradient:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient, border){\r\n\t\tctx.save();\r\n\t\tvar p = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\t\tvar gradParam = this._setBarGradient(ctx,p.x0,p.y0,p.x0+barWidth,p.y0-unit*p.value+2,inner_gradient,color,\"y\");\r\n\t\tctx.fillStyle = gradParam.gradient;\r\n\t\tthis._setBarPoints(ctx,p.x0+gradParam.offset,p.y0,barWidth-gradParam.offset*2,radius,unit,p.value,gradParam.offset+border);\r\n\t\tctx.fill();\r\n\t\tctx.restore();\r\n\t},\r\n\t/**\r\n\t *   sets points for bar and returns the position of the bottom right point\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x0 - the x position of start point\r\n\t *   @param: y0 - the y position of start point\r\n\t *   @param: barWidth - bar width\r\n\t *   @param: radius - the rounding radius of the top\r\n\t *   @param: unit - the value defines the correspondence between item value and bar height\r\n\t *   @param: value - item value\r\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\r\n\t */\r\n\t_setBarPoints:function(ctx,x0,y0,barWidth,radius,unit,value,offset,skipBottom){\r\n\t\t/*correction for displaing small values (when rounding radius is bigger than bar height)*/\r\n\t\tctx.beginPath();\r\n\t\t//y0 = 0.5;\r\n\t\tvar angle_corr = 0;\r\n\t\tif(radius>unit*value){\r\n\t\t\tvar cosA = (radius-unit*value)/radius;\r\n\t\t\tif(cosA<=1&&cosA>=-1)\r\n\t\t\t\tangle_corr = -Math.acos(cosA)+Math.PI/2;\r\n\t\t}\r\n\t\t/*start*/\r\n\t\tctx.moveTo(x0+offset,y0);\r\n\t\t/*start of left rounding*/\r\n\t\tvar y1 = y0 - Math.floor(unit*value) + radius + (radius?0:offset);\r\n\t\tif(radius<unit*value)\r\n\t\t\tctx.lineTo(x0+offset,y1);\r\n\t\t/*left rounding*/\r\n\t\tvar x2 = x0 + radius;\r\n\r\n\t\tif (radius&&radius>0)\r\n\t\t\tctx.arc(x2,y1,Math.max(radius-offset,0),-Math.PI+angle_corr,-Math.PI/2,false);\r\n\t\t/*start of right rounding*/\r\n\t\tvar x3 = x0 + barWidth - radius - offset;\r\n\t\tvar y3 = y1 - radius + (radius?offset:0);\r\n\t\tctx.lineTo(x3,y3);\r\n\t\t/*right rounding*/\r\n\t\tif (radius&&radius>0)\r\n\t\t\tctx.arc(x3+offset,y1,Math.max(radius-offset,0),-Math.PI/2,0-angle_corr,false);\r\n\t\t/*bottom right point*/\r\n\t\tvar x5 = x0 + barWidth-offset;\r\n\t\tctx.lineTo(x5,y0);\r\n\t\t/*line to the start point*/\r\n\t\tif(!skipBottom){\r\n\t\t\tctx.lineTo(x0+offset,y0);\r\n\t\t}\r\n\t\t//\tctx.lineTo(x0,0); //IE fix!\r\n\t\treturn [x5,y3];\r\n\t}\r\n};\r\n\r\nexport default BarChart;","\r\n\r\nconst LineChart = {\r\n\t/**\r\n\t*   renders a graphic\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: width - the width of the container\r\n\t*   @param: height - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_line:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar config,i,items,params,x0,x1,x2,y1,y2,y0,res1,res2;\r\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\r\n\t\tconfig = this._settings;\r\n\r\n\t\tif (data.length) {\r\n\t\t\tx0 = (config.offset?point0.x+params.cellWidth*0.5:point0.x);\r\n\t\t\t//finds items with data (excludes scale units)\r\n\t\t\titems= [];\r\n\t\t\tfor(i=0; i < data.length;i++){\r\n\t\t\t\tres2 = this._getPointY(data[i],point0,point1,params);\r\n\t\t\t\tif(res2 || res2==\"0\"){\r\n\t\t\t\t\tx2 = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\r\n\t\t\t\t\ty2 = (typeof res2 == \"object\"?res2.y0:res2);\r\n\t\t\t\t\tif(i && this._settings.fixOverflow){\r\n\t\t\t\t\t\tres1 = this._getPointY(data[i-1],point0,point1,params);\r\n\t\t\t\t\t\tif(res1.out && res1.out == res2.out){\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tx1 = params.cellWidth*(i-1) - 0.5 + x0;\r\n\t\t\t\t\t\ty1 = (typeof res1 == \"object\"?res1.y0:res1);\r\n\r\n\t\t\t\t\t\tif(res1.out){\r\n\t\t\t\t\t\t\ty0 = (res1.out == \"min\"?point1.y:point0.y);\r\n\t\t\t\t\t\t\titems.push({x:this._calcOverflowX(x1,x2,y1,y2,y0),y:y0});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(res2.out){\r\n\t\t\t\t\t\t\ty0 = (res2.out == \"min\"?point1.y:point0.y);\r\n\t\t\t\t\t\t\titems.push({x:this._calcOverflowX(x1,x2,y1,y2,y0),y:y0});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!res2.out)\r\n\t\t\t\t\t\titems.push({x:x2, y: res2, index: i});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._mapStart = point0;\r\n\t\t\tfor(i = 1; i <= items.length; i++){\r\n\t\t\t\t//line start position\r\n\t\t\t\tx1 = items[i-1].x;\r\n\t\t\t\ty1 = items[i-1].y;\r\n\t\t\t\tif(i<items.length){\r\n\t\t\t\t\t//line end position\r\n\t\t\t\t\tx2 = items[i].x;\r\n\t\t\t\t\ty2 = items[i].y;\r\n\t\t\t\t\t//line\r\n\t\t\t\t\tthis._drawLine(ctx,x1,y1,x2,y2,config.line.color.call(this,data[i-1]),config.line.width);\r\n\t\t\t\t\t//line shadow\r\n\t\t\t\t\tif(config.line&&config.line.shadow){\r\n\t\t\t\t\t\tctx.globalAlpha = 0.3;\r\n\t\t\t\t\t\tthis._drawLine(ctx,x1+2,y1+config.line.width+8,x2+2,y2+config.line.width+8,\"#eeeeee\",config.line.width+3);\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//item\r\n\t\t\t\tif(typeof items[i-1].index != \"undefined\"){\r\n\t\t\t\t\tthis._drawItem(ctx,x1,y1,data[items[i-1].index],config.label(data[items[i-1].index]), sIndex, map, point0);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t_calcOverflowX: function(x1,x2,y1,y2,y){\r\n\t\treturn  x1 + ( y - y1 )*( x2 - x1 )/( y2 - y1 );\r\n\t},\r\n\t/**\r\n\t*   draws an item and its label\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: x0 - the x position of a circle\r\n\t*   @param: y0 - the y position of a circle\r\n\t*   @param: obj - data object\r\n\t*   @param: label - (boolean) defines wherether label needs being drawn\r\n\t*/\r\n\t_drawItem:function(ctx,x0,y0,obj,label,sIndex,map){\r\n\t\tvar config = this._settings.item;\r\n\r\n\t\tvar R = parseInt(config.radius.call(this,obj),10)||0;\r\n\t\tvar mapStart = this._mapStart;\r\n\t\tvar item = config.type.call(this, obj);\r\n\t\tif(R){\r\n\t\t\tctx.save();\r\n\t\t\tif(config.shadow){\r\n\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\tctx.strokeStyle = \"#bdbdbd\";\r\n\t\t\t\tctx.fillStyle = \"#bdbdbd\";\r\n\t\t\t\tvar alphas = [0.1,0.2,0.3];\r\n\t\t\t\tfor(var i=(alphas.length-1);i>=0;i--){\r\n\t\t\t\t\tctx.globalAlpha = alphas[i];\r\n\t\t\t\t\tctx.strokeStyle = \"#d0d0d0\";\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tthis._strokeChartItem(ctx,x0,y0+2*R/3,R+i+1,item);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.globalAlpha = 0.3;\r\n\t\t\t\tctx.fillStyle = \"#bdbdbd\";\r\n\t\t\t\tthis._strokeChartItem(ctx,x0,y0+2*R/3,R+1,item);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t\tctx.lineWidth = config.borderWidth;\r\n\t\t\tctx.fillStyle = config.color.call(this,obj);\r\n\t\t\tctx.strokeStyle = config.borderColor.call(this,obj);\r\n\t\t\tctx.globalAlpha = config.alpha.call(this,obj);\r\n\t\t\tctx.beginPath();\r\n\t\t\tthis._strokeChartItem(ctx,x0,y0,R+1,item);\r\n\t\t\tctx.fill();\r\n\t\t\tctx.stroke();\r\n\t\t\tctx.globalAlpha = 1;\r\n\t\t}\r\n\t\t/*item label*/\r\n\t\tif(label){\r\n\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0,y0-R-this._settings.labelOffset,this._settings.label.call(this,obj));\r\n\t\t}\r\n\t\tif(map){\r\n\t\t\tvar areaPos = (this._settings.eventRadius||R+1);\r\n\t\t\t//this._addMapRect(map,obj.id,[{x:x0-areaPos,y:y0-areaPos},{x0+areaPos,y:y0+areaPos}],point0,sIndex);\r\n\t\t\tmap.addRect(obj.id,[x0-areaPos-mapStart.x,y0-areaPos-mapStart.y,x0+areaPos-mapStart.x,y0+areaPos-mapStart.y],sIndex);\r\n\t\t}\r\n\r\n\t},\r\n\t_strokeChartItem:function(ctx,x0,y0,R,type){\r\n\t\tvar p=[];\r\n\t\tif(type && (type==\"square\" || type==\"s\")){\r\n\t\t\tR *= Math.sqrt(2)/2;\r\n\t\t\tp = [\r\n\t\t\t\t[x0-R-ctx.lineWidth/2,y0-R],\r\n\t\t\t\t[x0+R,y0-R],\r\n\t\t\t\t[x0+R,y0+R],\r\n\t\t\t\t[x0-R,y0+R],\r\n\t\t\t\t[x0-R,y0-R]\r\n\t\t\t];\r\n\t\t}\r\n\t\telse if(type && (type==\"diamond\" || type==\"d\")){\r\n\t\t\tvar corr = (ctx.lineWidth>1?ctx.lineWidth*Math.sqrt(2)/4:0);\r\n\t\t\tp = [\r\n\t\t\t\t[x0,y0-R],\r\n\t\t\t\t[x0+R,y0],\r\n\t\t\t\t[x0,y0+R],\r\n\t\t\t\t[x0-R,y0],\r\n\t\t\t\t[x0+corr,y0-R-corr]\r\n\t\t\t];\r\n\t\t}\r\n\t\telse if(type && (type==\"triangle\" || type==\"t\")){\r\n\t\t\tp = [\r\n\t\t\t\t[x0,y0-R],\r\n\t\t\t\t[x0+Math.sqrt(3)*R/2,y0+R/2],\r\n\t\t\t\t[x0-Math.sqrt(3)*R/2,y0+R/2],\r\n\t\t\t\t[x0,y0-R]\r\n\t\t\t];\r\n\t\t}\r\n\t\telse\r\n\t\t\tp = [\r\n\t\t\t\t[x0,y0,R,0,Math.PI*2,true]\r\n\t\t\t];\r\n\t\tthis._path(ctx,p);\r\n\t},\r\n\t/**\r\n\t*   gets the vertical position of the item\r\n\t*   @param: data - data object\r\n\t*   @param: y0 - the y position of chart start\r\n\t*   @param: y1 - the y position of chart end\r\n\t*   @param: params - the object with elements: minValue, maxValue, unit, valueFactor (the value multiple of 10)\r\n\t*/\r\n\t_getPointY: function(data,point0,point1,params){\r\n\t\tvar minValue = params.minValue;\r\n\t\tvar maxValue = params.maxValue;\r\n\t\tvar unit = params.unit;\r\n\t\tvar valueFactor = params.valueFactor;\r\n\t\t/*the real value of an object*/\r\n\t\tvar value = this._settings.value(data);\r\n\t\tif(this._logScaleCalc){\r\n\t\t\tvalue = this._log10(value);\r\n\t\t}\r\n\t\t/*a relative value*/\r\n\t\tvar v = (parseFloat(value||0) - minValue)*valueFactor;\r\n\t\tif(!this._settings.yAxis)\r\n\t\t\tv += params.startValue/unit;\r\n\t\t/*a vertical coordinate*/\r\n\t\tvar y = point1.y - unit*v;\r\n\t\t/*the limit of the max and min values*/\r\n\t\tif(this._settings.fixOverflow && ( this._settings.type == \"line\" || this._settings.type == \"area\")){\r\n\t\t\tif(value > maxValue)\r\n\t\t\t\ty = {y: point0.y, y0:  y, out: \"max\"};\r\n\t\t\telse if(v<0 || value < minValue)\r\n\t\t\t\ty = {y: point1.y, y0:  y, out: \"min\"};\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(value > maxValue)\r\n\t\t\t\ty =  point0.y;\r\n\t\t\tif(v<0 || value < minValue)\r\n\t\t\t\ty =  point1.y;\r\n\t\t}\r\n\t\treturn y;\r\n\t},\r\n\t_calculateLineParams: function(ctx,data,point0,point1,sIndex){\r\n\t\tvar params = {};\r\n\r\n\t\t/*maxValue - minValue*/\r\n\t\tvar relValue;\r\n\r\n\t\t/*available height*/\r\n\t\tparams.totalHeight = point1.y-point0.y;\r\n\r\n\t\t/*a space available for a single item*/\r\n\t\t//params.cellWidth = Math.round((point1.x-point0.x)/((!this._settings.offset&&this._settings.yAxis)?(data.length-1):data.length));\r\n\t\tif(this._settings.cellWidth)\r\n\t\t\tparams.cellWidth = Math.min(point1.x-point0.x, this._settings.cellWidth);\r\n\t\telse\r\n\t\t\tparams.cellWidth = (point1.x-point0.x)/((!this._settings.offset)?(data.length-1):data.length);\r\n\t\t/*scales*/\r\n\t\tvar yax = !!this._settings.yAxis;\r\n\r\n\t\tvar limits = (this._settings.type.indexOf(\"stacked\")!=-1?this._getStackedLimits(data):this._getLimits());\r\n\t\tparams.maxValue = limits.max;\r\n\t\tparams.minValue = limits.min;\r\n\r\n\t\t/*draws x and y scales*/\r\n\t\tif(!sIndex)\r\n\t\t\tthis._drawScales(data, point0, point1,params.minValue,params.maxValue,params.cellWidth);\r\n\r\n\t\t/*necessary for automatic scale*/\r\n\t\tif(yax){\r\n\t\t\tparams.maxValue = parseFloat(this._settings.yAxis.end);\r\n\t\t\tparams.minValue = parseFloat(this._settings.yAxis.start);\r\n\t\t}\r\n\r\n\t\t/*unit calculation (y_position = value*unit)*/\r\n\t\tvar relativeValues = this._getRelativeValue(params.minValue,params.maxValue);\r\n\t\trelValue = relativeValues[0];\r\n\t\tparams.valueFactor = relativeValues[1];\r\n\t\tparams.unit = (relValue?params.totalHeight/relValue:10);\r\n\r\n\t\tparams.startValue = 0;\r\n\t\tif(!yax){\r\n\t\t\t/*defines start value for better representation of small values*/\r\n\t\t\tparams.startValue = 10;\r\n\t\t\tif(params.unit!=params.totalHeight)\r\n\t\t\t\tparams.unit = (relValue?(params.totalHeight - params.startValue)/relValue:10);\r\n\t\t}\r\n\t\treturn params;\r\n\t}\r\n};\r\n\r\nexport default LineChart;","const BarHChart = {\r\n\t/**\r\n\t*   renders a bar chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: x - the width of the container\r\n\t*   @param: y - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_barH:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar barOffset, barWidth, cellWidth, color, gradient, i, limits, maxValue, minValue,\r\n\t\t\tinnerGradient, valueFactor, relValue, radius, relativeValues,\r\n\t\t\tstartValue, totalWidth,value,  unit, x0, y0, xax;\r\n\r\n\t\t/*an available width for one bar*/\r\n\t\tcellWidth = (point1.y-point0.y)/data.length;\r\n\r\n\t\tlimits = this._getLimits(\"h\");\r\n\r\n\t\tmaxValue = limits.max;\r\n\t\tminValue = limits.min;\r\n\r\n\t\ttotalWidth = point1.x-point0.x;\r\n\r\n\t\txax = !!this._settings.xAxis;\r\n\r\n\t\t/*draws x and y scales*/\r\n\t\tif(!sIndex )\r\n\t\t\tthis._drawHScales(ctx,data,point0, point1,minValue,maxValue,cellWidth);\r\n\r\n\t\t/*necessary for automatic scale*/\r\n\t\tif(xax ){\r\n\t\t\tmaxValue = parseFloat(this._settings.xAxis.end);\r\n\t\t\tminValue = parseFloat(this._settings.xAxis.start);\r\n\t\t}\r\n\r\n\t\t/*unit calculation (bar_height = value*unit)*/\r\n\t\trelativeValues = this._getRelativeValue(minValue,maxValue);\r\n\t\trelValue = relativeValues[0];\r\n\t\tvalueFactor = relativeValues[1];\r\n\r\n\t\tunit = (relValue?totalWidth/relValue:10);\r\n\t\tif(!xax){\r\n\t\t\t/*defines start value for better representation of small values*/\r\n\t\t\tstartValue = 10;\r\n\t\t\tunit = (relValue?(totalWidth-startValue)/relValue:10);\r\n\t\t}\r\n\r\n\r\n\t\t/*a real bar width */\r\n\t\tbarWidth = parseInt(this._settings.barWidth,10);\r\n\t\tif((barWidth*this._series.length+4)>cellWidth) barWidth = cellWidth/this._series.length-4;\r\n\t\t/*the half of distance between bars*/\r\n\t\tbarOffset = Math.floor((cellWidth - barWidth*this._series.length)/2);\r\n\t\t/*the radius of rounding in the top part of each bar*/\r\n\t\tradius = (typeof this._settings.radius!=\"undefined\"?parseInt(this._settings.radius,10):Math.round(barWidth/5));\r\n\r\n\t\tinnerGradient = false;\r\n\t\tgradient = this._settings.gradient;\r\n\r\n\t\tif (gradient&&typeof(gradient) != \"function\"){\r\n\t\t\tinnerGradient = gradient;\r\n\t\t\tgradient = false;\r\n\t\t} else if (gradient){\r\n\t\t\tgradient = ctx.createLinearGradient(point0.x,point0.y,point1.x,point0.y);\r\n\t\t\tthis._settings.gradient(gradient);\r\n\t\t}\r\n\t\t/*draws a black line if the horizontal scale isn't defined*/\r\n\t\tif(!xax){\r\n\t\t\tthis._drawLine(ctx,point0.x-0.5,point0.y,point0.x-0.5,point1.y,\"#edeff0\",1); //hardcoded color!\r\n\t\t}\r\n\r\n\r\n\r\n\t\tfor(i=0; i < data.length;i ++){\r\n\r\n\r\n\t\t\tvalue =  parseFloat(this._settings.value(data[i]||0));\r\n\t\t\tif(this._logScaleCalc)\r\n\t\t\t\tvalue = this._log10(value);\r\n\t\t\t\r\n\t\t\tif(!value || isNaN(value))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(value>maxValue) value = maxValue;\r\n\t\t\tvalue -= minValue;\r\n\t\t\tvalue *= valueFactor;\r\n\r\n\t\t\t/*start point (bottom left)*/\r\n\t\t\tx0 = point0.x;\r\n\t\t\ty0 = point0.y+ barOffset + i*cellWidth+(barWidth+1)*sIndex;\r\n\r\n\t\t\tif((value<0&&this._settings.origin==\"auto\")||(this._settings.xAxis&&value===0&&!(this._settings.origin!=\"auto\"&&this._settings.origin>minValue))){\r\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", \"right\", x0+10,y0+barWidth/2+barOffset,this._settings.label(data[i]));\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(value<0&&this._settings.origin!=\"auto\"&&this._settings.origin>minValue){\r\n\t\t\t\tvalue = 0;\r\n\t\t\t}\r\n\r\n\t\t\t/*takes start value into consideration*/\r\n\t\t\tif(!xax) value += startValue/unit;\r\n\t\t\tcolor = gradient||this._settings.color.call(this,data[i]);\r\n\r\n\t\t\t/*drawing the gradient border of a bar*/\r\n\t\t\tif(this._settings.border){\r\n\t\t\t\tthis._drawBarHBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\r\n\t\t\t}\r\n\r\n\t\t\t/*drawing bar body*/\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\r\n\t\t\tvar points = this._drawBarH(ctx,point1,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,innerGradient);\r\n\t\t\tif (innerGradient){\r\n\t\t\t\tthis._drawBarHGradient(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,innerGradient);\r\n\r\n\t\t\t}\r\n\t\t\tctx.globalAlpha = 1;\r\n\r\n\r\n\t\t\t/*sets a bar label and map area*/\r\n\r\n\t\t\tif(points[3]==y0){\r\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", \"left\", points[0]-5,points[3]+Math.floor(barWidth/2),this._settings.label(data[i]));\r\n\t\t\t\tmap.addRect(data[i].id,[points[0]-point0.x,points[3]-point0.y,points[2]-point0.x,points[3]+barWidth-point0.y],sIndex);\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", false, points[2]+5,points[1]+Math.floor(barWidth/2),this._settings.label(data[i]));\r\n\t\t\t\tmap.addRect(data[i].id,[points[0]-point0.x,y0-point0.y,points[2]-point0.x,points[3]-point0.y],sIndex);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t *   sets points for bar and returns the position of the bottom right point\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x0 - the x position of start point\r\n\t *   @param: y0 - the y position of start point\r\n\t *   @param: barWidth - bar width\r\n\t *   @param: radius - the rounding radius of the top\r\n\t *   @param: unit - the value defines the correspondence between item value and bar height\r\n\t *   @param: value - item value\r\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\r\n\t */\r\n\t_setBarHPoints:function(ctx,x0,y0,barWidth,radius,unit,value,offset,skipLeft){\r\n\t\t/*correction for displaing small values (when rounding radius is bigger than bar height)*/\r\n\t\tvar angle_corr = 0;\r\n\r\n\t\tif(radius>unit*value){\r\n\t\t\tvar sinA = (radius-unit*value)/radius;\r\n\t\t\tangle_corr = -Math.asin(sinA)+Math.PI/2;\r\n\t\t}\r\n\t\t/*start*/\r\n\t\tctx.moveTo(x0,y0+offset);\r\n\t\t/*start of left rounding*/\r\n\t\tvar x1 = x0 + unit*value - radius - (radius?0:offset);\r\n\t\tx1 = Math.max(x0,x1);\r\n\t\tif(radius<unit*value)\r\n\t\t\tctx.lineTo(x1,y0+offset);\r\n\t\t/*left rounding*/\r\n\t\tvar y2 = y0 + radius;\r\n\t\tif (radius&&radius>0)\r\n\t\t\tctx.arc(x1,y2,radius-offset,-Math.PI/2+angle_corr,0,false);\r\n\t\t/*start of right rounding*/\r\n\t\tvar y3 = y0 + barWidth - radius - (radius?0:offset);\r\n\t\tvar x3 = x1 + radius - (radius?offset:0);\r\n\t\tctx.lineTo(x3,y3);\r\n\t\t/*right rounding*/\r\n\t\tif (radius&&radius>0)\r\n\t\t\tctx.arc(x1,y3,radius-offset,0,Math.PI/2-angle_corr,false);\r\n\t\t/*bottom right point*/\r\n\t\tvar y5 = y0 + barWidth-offset;\r\n\t\tctx.lineTo(x0,y5);\r\n\t\t/*line to the start point*/\r\n\t\tif(!skipLeft){\r\n\t\t\tctx.lineTo(x0,y0+offset);\r\n\t\t}\r\n\t\t//\tctx.lineTo(x0,0); //IE fix!\r\n\t\treturn [x3,y5];\r\n\t},\r\n\t_drawHScales:function(ctx,data,point0,point1,start,end,cellWidth){\r\n\t\tvar x = 0;\r\n\t\tif(this._settings.xAxis){\r\n\t\t\tif(!this.canvases[\"x\"])\r\n\t\t\t\tthis.canvases[\"x\"] =  this._createCanvas(\"axis_x\");\r\n\t\t\tx = this._drawHXAxis(this.canvases[\"x\"].getCanvas(),data,point0,point1,start,end);\r\n\t\t}\r\n\t\tif (this._settings.yAxis){\r\n\t\t\tif(!this.canvases[\"y\"])\r\n\t\t\t\tthis.canvases[\"y\"] =  this._createCanvas(\"axis_y\");\r\n\t\t\tthis._drawHYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,cellWidth,x);\r\n\t\t}\r\n\t},\r\n\t_drawHYAxis:function(ctx,data,point0,point1,cellWidth,yAxisX){\r\n\t\tif (!this._settings.yAxis) return;\r\n\t\tvar unitPos;\r\n\t\tvar x0 = parseInt((yAxisX?yAxisX:point0.x),10)-0.5;\r\n\t\tvar y0 = point1.y+0.5;\r\n\t\tvar y1 = point0.y;\r\n\t\tthis._drawLine(ctx,x0,y0,x0,y1,this._settings.yAxis.color,1);\r\n\r\n\r\n\r\n\t\tfor(var i=0; i < data.length;i ++){\r\n\r\n\t\t\t/*scale labels*/\r\n\t\t\tvar right = ((this._settings.origin!=\"auto\")&&(this._settings.type==\"barH\")&&(parseFloat(this._settings.value(data[i]))<this._settings.origin));\r\n\t\t\tunitPos = y1+cellWidth/2+i*cellWidth;\r\n\t\t\tthis.canvases[\"y\"].renderTextAt(\"middle\",(right?false:\"left\"),(right?x0+5:x0-5),unitPos,\r\n\t\t\t\tthis._settings.yAxis.template(data[i]),\r\n\t\t\t\t\"webix_axis_item_y\",(right?0:x0-10)\r\n\t\t\t);\r\n\t\t\tif(this._settings.yAxis.lines.call(this,data[i]))\r\n\t\t\t\tthis._drawLine(ctx,point0.x,unitPos,point1.x,unitPos,this._settings.yAxis.lineColor.call(this,data[i]),1);\r\n\t\t}\r\n\r\n\t\tif(this._settings.yAxis.lines.call(this,{}))\r\n\t\t\tthis._drawLine(ctx,point0.x+0.5,y1+0.5,point1.x,y1+0.5,this._settings.yAxis.lineColor.call(this,{}),1);\r\n\t\tthis._setYAxisTitle(point0,point1);\r\n\t},\r\n\t_drawHXAxis:function(ctx,data,point0,point1,start,end){\r\n\t\tvar step;\r\n\t\tvar scaleParam= {};\r\n\t\tvar axis = this._settings.xAxis;\r\n\t\tif (!axis) return;\r\n\r\n\t\tvar y0 = point1.y+0.5;\r\n\t\tvar x0 = point0.x-0.5;\r\n\t\tvar x1 = point1.x-0.5;\r\n\t\tvar yAxisStart = point0.x;\r\n\t\tthis._drawLine(ctx,x0,y0,x1,y0,axis.color,1);\r\n\r\n\t\tif(axis.step)\r\n\t\t\tstep = parseFloat(axis.step);\r\n\r\n\t\tif(typeof this._configXAxis.step ==\"undefined\"||typeof this._configXAxis.start==\"undefined\"||typeof this._configXAxis.end ==\"undefined\"){\r\n\t\t\tscaleParam = this._calculateScale(start,end);\r\n\t\t\tstart = scaleParam.start;\r\n\t\t\tend = scaleParam.end;\r\n\t\t\tstep = scaleParam.step;\r\n\t\t\tthis._settings.xAxis.end = end;\r\n\t\t\tthis._settings.xAxis.start = start;\r\n\t\t\tthis._settings.xAxis.step = step;\r\n\t\t}\r\n\r\n\t\tif(step===0) return;\r\n\t\tvar stepHeight = (x1-x0)*step/(end-start);\r\n\t\tvar c = 0;\r\n\t\tfor(var i = start; i<=end; i += step){\r\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\r\n\t\t\tif(scaleParam.fixNum)  value = parseFloat(value).toFixed(scaleParam.fixNum);\r\n\t\t\tvar xi = Math.floor(x0+c*stepHeight)+ 0.5;/*canvas line fix*/\r\n\r\n\t\t\tif(!(i==start&&this._settings.origin==\"auto\") && axis.lines.call(this,i))\r\n\t\t\t\tthis._drawLine(ctx,xi,y0,xi,point0.y,this._settings.xAxis.lineColor.call(this,i),1);\r\n\t\t\tif(i == this._settings.origin) yAxisStart = xi+1;\r\n\t\t\t/*correction for JS float calculation*/\r\n\t\t\tif(step<1 && !this._logScaleCalc){\r\n\t\t\t\tvar power = Math.min(Math.floor(this._log10(step)),(start<=0?0:Math.floor(this._log10(start))));\r\n\t\t\t\tvar corr = Math.pow(10,-power);\r\n\t\t\t\tvalue = Math.round(value*corr)/corr;\r\n\t\t\t\ti = value;\r\n\t\t\t}\r\n\t\t\tthis.canvases[\"x\"].renderTextAt(false, true,xi,y0+2,axis.template(value.toString()),\"webix_axis_item_x\");\r\n\t\t\tc++;\r\n\t\t}\r\n\t\tthis.canvases[\"x\"].renderTextAt(true, false, x0,point1.y+this._settings.padding.bottom-3,\r\n\t\t\tthis._settings.xAxis.title,\r\n\t\t\t\"webix_axis_title_x\",\r\n\t\t\tpoint1.x - point0.x\r\n\t\t);\r\n\t\treturn yAxisStart;\r\n\t},\r\n\t_correctBarHParams:function(ctx,x,y,value,unit,barWidth,minValue){\r\n\t\tvar yax = this._settings.yAxis;\r\n\t\tvar axisStart = x;\r\n\t\tif(!!yax&&this._settings.origin!=\"auto\" && (this._settings.origin>minValue)){\r\n\t\t\tx += (this._settings.origin-minValue)*unit;\r\n\t\t\taxisStart = x;\r\n\t\t\tvalue = value-(this._settings.origin-minValue);\r\n\t\t\tif(value < 0){\r\n\t\t\t\tvalue *= (-1);\r\n\t\t\t\tctx.translate(x,y+barWidth);\r\n\t\t\t\tctx.rotate(Math.PI);\r\n\t\t\t\tx = 0.5;\r\n\t\t\t\ty = 0;\r\n\t\t\t}\r\n\t\t\tx += 0.5;\r\n\t\t}\r\n\r\n\t\treturn {value:value,x0:x,y0:y,start:axisStart};\r\n\t},\r\n\t_drawBarH:function(ctx,point1,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient){\r\n\t\tctx.save();\r\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\t\tctx.fillStyle = color;\r\n\t\tctx.beginPath();\r\n\t\tvar points = this._setBarHPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,(this._settings.border?1:0));\r\n\t\tif (gradient&&!inner_gradient) ctx.lineTo(point1.x,p.y0+(this._settings.border?1:0)); //fix gradient sphreading\r\n\t\tctx.fill();\r\n\t\tctx.restore();\r\n\t\tvar y1 = p.y0;\r\n\t\tvar y2 = (p.y0!=y0?y0:points[1]);\r\n\t\tvar x1 = (p.y0!=y0?(p.start-points[0]):p.start);\r\n\t\tvar x2 = (p.y0!=y0?p.start:points[0]);\r\n\r\n\t\treturn [x1,y1,x2,y2];\r\n\t},\r\n\t_drawBarHBorder:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color){\r\n\t\tctx.save();\r\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\r\n\t\tctx.beginPath();\r\n\t\tthis._setBorderStyles(ctx,color);\r\n\t\tctx.globalAlpha =0.9;\r\n\t\tthis._setBarHPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,ctx.lineWidth/2,1);\r\n\r\n\t\tctx.stroke();\r\n\t\tctx.restore();\r\n\t},\r\n\t_drawBarHGradient:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient){\r\n\t\tctx.save();\r\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\r\n\t\tvar gradParam = this._setBarGradient(ctx,p.x0,p.y0+barWidth,p.x0+unit*p.value,p.y0,inner_gradient,color,\"x\");\r\n\t\tctx.fillStyle = gradParam.gradient;\r\n\t\tctx.beginPath();\r\n\t\tthis._setBarHPoints(ctx,p.x0,p.y0+gradParam.offset,barWidth-gradParam.offset*2,radius,unit,p.value,gradParam.offset);\r\n\t\tctx.fill();\r\n\t\tctx.globalAlpha = 1;\r\n\t\tctx.restore();\r\n\t}\r\n};\r\n\r\nexport default BarHChart;","\r\n\r\nconst StackedBarChart = {\r\n\t/**\r\n\t*   renders a bar chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: x - the width of the container\r\n\t*   @param: y - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_stackedBar:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar maxValue,minValue, xAxisY, x0, y0;\r\n\t\t/*necessary if maxValue - minValue < 0*/\r\n\t\tvar valueFactor;\r\n\t\t/*maxValue - minValue*/\r\n\t\tvar relValue;\r\n\t\tvar config = this._settings;\r\n\t\tvar total_height = point1.y-point0.y;\r\n\r\n\t\tvar yax = !!config.yAxis;\r\n\t\tvar xax = !!config.xAxis;\r\n\r\n\t\tvar limits = this._getStackedLimits(data);\r\n\r\n\t\tvar origin = (config.origin === 0);\r\n\r\n\t\tmaxValue = limits.max;\r\n\t\tminValue = limits.min;\r\n\r\n\t\t/*an available width for one bar*/\r\n\t\tvar cellWidth = Math.floor((point1.x-point0.x)/data.length);\r\n\r\n\t\t/*draws x and y scales*/\r\n\t\tif(!sIndex){\r\n\t\t\txAxisY = this._drawScales(data,point0, point1,minValue,maxValue,cellWidth);\r\n\t\t}\r\n\r\n\t\t/*necessary for automatic scale*/\r\n\t\tif(yax){\r\n\t\t\tmaxValue = parseFloat(config.yAxis.end);\r\n\t\t\tminValue = parseFloat(config.yAxis.start);\r\n\t\t}\r\n\r\n\t\t/*unit calculation (bar_height = value*unit)*/\r\n\t\tvar relativeValues = this._getRelativeValue(minValue,maxValue);\r\n\t\trelValue = relativeValues[0];\r\n\t\tvalueFactor = relativeValues[1];\r\n\r\n\t\tvar unit = (relValue?total_height/relValue:10);\r\n\r\n\t\t/*a real bar width */\r\n\t\tvar barWidth = parseInt(config.barWidth,10);\r\n\t\tif(barWidth+4 > cellWidth) barWidth = cellWidth-4;\r\n\t\t/*the half of distance between bars*/\r\n\t\tvar barOffset = Math.floor((cellWidth - barWidth)/2);\r\n\r\n\r\n\t\tvar inner_gradient = (config.gradient?config.gradient:false);\r\n\r\n\t\t/*draws a black line if the horizontal scale isn't defined*/\r\n\t\tif(!xax){\r\n\t\t\t//scaleY = y-bottomPadding;\r\n\t\t\tthis._drawLine(ctx,point0.x,point1.y+0.5,point1.x,point1.y+0.5,\"#edeff0\",1); //hardcoded color!\r\n\t\t}\r\n\r\n\t\tfor(var i=0; i < data.length;i ++){\r\n\t\t\tvar value =  Math.abs(parseFloat(config.value(data[i]||0)));\r\n\r\n\t\t\tif(this._logScaleCalc)\r\n\t\t\t\tvalue = this._log10(value);\r\n\r\n\t\t\t/*start point (bottom left)*/\r\n\t\t\tx0 = point0.x + barOffset + i*cellWidth;\r\n\r\n\r\n\t\t\tvar negValue = origin&&value<0;\r\n\t\t\tif(!sIndex){\r\n\t\t\t\ty0 = xAxisY-1;\r\n\t\t\t\tdata[i].$startY = y0;\r\n\t\t\t\tif(origin){\r\n\t\t\t\t\tif(negValue)\r\n\t\t\t\t\t\ty0 = xAxisY+1;\r\n\t\t\t\t\tdata[i].$startYN = xAxisY+1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\ty0 = negValue?data[i].$startYN:data[i].$startY;\r\n\t\t\t}\r\n\r\n\t\t\tif(!value || isNaN(value))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t/*adjusts the first tab to the scale*/\r\n\t\t\tif(!sIndex && !origin)\r\n\t\t\t\tvalue -= minValue;\r\n\r\n\t\t\tvalue *= valueFactor;\r\n\r\n\t\t\t/*the max height limit*/\r\n\t\t\tif(y0 < (point0.y+1)) continue;\r\n\r\n\t\t\tvar color = this._settings.color.call(this,data[i]);\r\n\r\n\t\t\tvar firstSector =  Math.abs(y0-(origin?(point1.y+minValue*unit):point1.y))<3;\r\n\r\n\t\t\t/*drawing bar body*/\r\n\t\t\tctx.globalAlpha = config.alpha.call(this,data[i]);\r\n\t\t\tctx.fillStyle = ctx.strokeStyle = config.color.call(this,data[i]);\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tvar y1 = y0 - unit*value + (firstSector?(negValue?-1:1):0);\r\n\r\n\t\t\tvar points = this._setStakedBarPoints(ctx,x0-(config.border?0.5:0),y0,barWidth+(config.border?0.5:0),y1, 0,point0.y);\r\n\t\t\tctx.fill();\r\n\t\t\tctx.stroke();\r\n\r\n\t\t\t/*gradient*/\r\n\t\t\tif (inner_gradient){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tvar gradParam = this._setBarGradient(ctx,x0,y0,x0+barWidth,points[1],inner_gradient,color,\"y\");\r\n\t\t\t\tctx.fillStyle = gradParam.gradient;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tpoints = this._setStakedBarPoints(ctx,x0+gradParam.offset,y0,barWidth-gradParam.offset*2,y1,(config.border?1:0),point0.y);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t\t/*drawing the gradient border of a bar*/\r\n\t\t\tif(config.border){\r\n\t\t\t\tctx.save();\r\n\t\t\t\tif(typeof config.border == \"string\")\r\n\t\t\t\t\tctx.strokeStyle = config.border;\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._setBorderStyles(ctx,color);\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tthis._setStakedBarPoints(ctx,x0-0.5,parseInt(y0,10)+0.5,barWidth+1,parseInt(y1,10)+0.5,0,point0.y, firstSector);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t\tctx.globalAlpha = 1;\r\n\r\n\t\t\t/*sets a bar label*/\r\n\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0+Math.floor(barWidth/2),(points[1]+(y0-points[1])/2)-7,this._settings.label(data[i]));\r\n\t\t\t/*defines a map area for a bar*/\r\n\t\t\tmap.addRect(data[i].id,[x0-point0.x,points[1]-point0.y,points[0]-point0.x,data[i][negValue?\"$startYN\":\"$startY\"]-point0.y],sIndex);\r\n\r\n\t\t\t/*the start position for the next series*/\r\n\r\n\t\t\tdata[i][negValue?\"$startYN\":\"$startY\"] = points[1];\r\n\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t *   sets points for bar and returns the position of the bottom right point\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: x0 - the x position of start point\r\n\t *   @param: y0 - the y position of start point\r\n\t *   @param: barWidth - bar width\r\n\t *   @param: radius - the rounding radius of the top\r\n\t *   @param: unit - the value defines the correspondence between item value and bar height\r\n\t *   @param: value - item value\r\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\r\n\t *   @param: minY - the minimum y position for the bars ()\r\n\t */\r\n\t_setStakedBarPoints:function(ctx,x0,y0,barWidth,y1,offset,minY,skipBottom){\r\n\t\t/*start*/\r\n\t\tctx.moveTo(x0,y0);\r\n\t\t/*maximum height limit*/\r\n\r\n\t\tif(y1<minY)\r\n\t\t\ty1 = minY;\r\n\t\tctx.lineTo(x0,y1);\r\n\t\tvar x3 = x0 + barWidth;\r\n\t\tvar y3 = y1;\r\n\t\tctx.lineTo(x3,y3);\r\n\t\t/*right rounding*/\r\n\t\t/*bottom right point*/\r\n\t\tvar x5 = x0 + barWidth;\r\n\t\tctx.lineTo(x5,y0);\r\n\t\t/*line to the start point*/\r\n\t\tif(!skipBottom){\r\n\t\t\tctx.lineTo(x0,y0);\r\n\t\t}\r\n\t\t//\tctx.lineTo(x0,0); //IE fix!\r\n\t\treturn [x5,y3];\r\n\t}\r\n};\r\n\r\nexport default StackedBarChart;","\r\n\r\nconst StackedBarHChart = {\r\n/**\r\n\t*   renders a bar chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: x - the width of the container\r\n\t*   @param: y - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*   @param: map - map object\r\n\t*/\r\n\t$render_stackedBarH:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar maxValue,minValue;\r\n\t\t/*necessary if maxValue - minValue < 0*/\r\n\t\tvar valueFactor;\r\n\t\t/*maxValue - minValue*/\r\n\t\tvar relValue;\r\n\r\n\t\tvar total_width = point1.x-point0.x;\r\n\r\n\t\tvar yax = !!this._settings.yAxis;\r\n\r\n\t\tvar limits = this._getStackedLimits(data);\r\n\t\tmaxValue = limits.max;\r\n\t\tminValue = limits.min;\r\n\r\n\t\t/*an available width for one bar*/\r\n\t\tvar cellWidth = Math.floor((point1.y-point0.y)/data.length);\r\n\r\n\t\t/*draws x and y scales*/\r\n\t\tif(!sIndex)\r\n\t\t\tthis._drawHScales(ctx,data,point0, point1,minValue,maxValue,cellWidth);\r\n\r\n\t\t/*necessary for automatic scale*/\r\n\t\tif(yax){\r\n\t\t\tmaxValue = parseFloat(this._settings.xAxis.end);\r\n\t\t\tminValue = parseFloat(this._settings.xAxis.start);\r\n\t\t}\r\n\r\n\t\t/*unit calculation (bar_height = value*unit)*/\r\n\t\tvar relativeValues = this._getRelativeValue(minValue,maxValue);\r\n\t\trelValue = relativeValues[0];\r\n\t\tvalueFactor = relativeValues[1];\r\n\r\n\t\tvar unit = (relValue?total_width/relValue:10);\r\n\t\tvar startValue = 0;\r\n\t\tif(!yax){\r\n\t\t\t/*defines start value for better representation of small values*/\r\n\t\t\tstartValue = 10;\r\n\t\t\tunit = (relValue?(total_width-startValue)/relValue:10);\r\n\t\t}\r\n\r\n\t\t/*a real bar width */\r\n\t\tvar barWidth = parseInt(this._settings.barWidth,10);\r\n\t\tif((barWidth+4)>cellWidth) barWidth = cellWidth-4;\r\n\t\t/*the half of distance between bars*/\r\n\t\tvar barOffset = (cellWidth - barWidth)/2;\r\n\t\t/*the radius of rounding in the top part of each bar*/\r\n\t\tvar radius = 0;\r\n\r\n\t\tvar inner_gradient = false;\r\n\t\tvar gradient = this._settings.gradient;\r\n\t\tif (gradient){\r\n\t\t\tinner_gradient = true;\r\n\t\t}\r\n\t\t/*draws a black line if the horizontal scale isn't defined*/\r\n\t\tif(!yax){\r\n\t\t\tthis._drawLine(ctx,point0.x-0.5,point0.y,point0.x-0.5,point1.y,\"#edeff0\",1); //hardcoded color!\r\n\t\t}\r\n\r\n\t\tvar seriesNumber = 0;\r\n\t\tvar seriesIndex = 0;\r\n\t\tfor(i=0; i<this._series.length; i++ ){\r\n\t\t\tif(i == sIndex){\r\n\t\t\t\tseriesIndex  = seriesNumber;\r\n\t\t\t}\r\n\t\t\tif(this._series[i].type == \"stackedBarH\")\r\n\t\t\t\tseriesNumber++;\r\n\t\t}\r\n\r\n\t\tfor(var i=0; i < data.length;i ++){\r\n\r\n\t\t\tif(!seriesIndex)\r\n\t\t\t\tdata[i].$startX = point0.x;\r\n\r\n\t\t\tvar value =  Math.abs(parseFloat(this._settings.value(data[i]||0)));\r\n\t\t\tif(value>maxValue) value = maxValue;\r\n\t\t\tvalue -= minValue;\r\n\t\t\tvalue *= valueFactor;\r\n\r\n\t\t\t/*start point (bottom left)*/\r\n\t\t\tvar x0 = point0.x;\r\n\t\t\tvar y0 = point0.y+ barOffset + i*cellWidth;\r\n\r\n\t\t\tif(!seriesIndex)\r\n\t\t\t\tdata[i].$startX = x0;\r\n\t\t\telse\r\n\t\t\t\tx0 = data[i].$startX;\r\n\r\n\t\t\tif(!value || isNaN(value))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t/*takes start value into consideration*/\r\n\t\t\tif(!yax) value += startValue/unit;\r\n\t\t\tvar color = this._settings.color.call(this,data[i]);\r\n\r\n\r\n\t\t\t/*drawing bar body*/\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\r\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[i]);\r\n\t\t\tctx.beginPath();\r\n\t\t\tvar points = this._setBarHPoints(ctx,x0,y0,barWidth,radius,unit,value,0);\r\n\t\t\tif (gradient&&!inner_gradient) ctx.lineTo(point0.x+total_width,y0+(this._settings.border?1:0)); //fix gradient sphreading\r\n\t\t\tctx.fill();\r\n\r\n\t\t\tif (inner_gradient){\r\n\t\t\t\tvar gradParam = this._setBarGradient(ctx,x0,y0+barWidth,x0,y0,inner_gradient,color,\"x\");\r\n\t\t\t\tctx.fillStyle = gradParam.gradient;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tpoints = this._setBarHPoints(ctx,x0,y0, barWidth,radius,unit,value,0);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t\t/*drawing the gradient border of a bar*/\r\n\t\t\tif(this._settings.border){\r\n\t\t\t\tthis._drawBarHBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\r\n\t\t\t}\r\n\r\n\t\t\tctx.globalAlpha = 1;\r\n\r\n\t\t\t/*sets a bar label*/\r\n\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\",true,data[i].$startX+(points[0]-data[i].$startX)/2-1, y0+(points[1]-y0)/2, this._settings.label(data[i]));\r\n\t\t\t/*defines a map area for a bar*/\r\n\t\t\tmap.addRect(data[i].id,[data[i].$startX-point0.x,y0-point0.y,points[0]-point0.x,points[1]-point0.y],sIndex);\r\n\t\t\t/*the start position for the next series*/\r\n\t\t\tdata[i].$startX = points[0];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default StackedBarHChart;","\r\n\r\nconst Spline = {\r\n\t/**\r\n\t*   renders a spline chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: width - the width of the container\r\n\t*   @param: height - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_spline:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar config,i,items,j,params,sparam,x,x0,x1,x2,y,y1,y2;\r\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\r\n\t\tconfig = this._settings;\r\n\t\tthis._mapStart = point0;\r\n\r\n\t\t/*array of all points*/\r\n\t\titems = [];\r\n\r\n\t\t/*drawing all items*/\r\n\t\tif (data.length) {\r\n\r\n\t\t\t/*getting all points*/\r\n\t\t\tx0 = (config.offset?point0.x+params.cellWidth*0.5:point0.x);\r\n\t\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\t\ty = this._getPointY(data[i],point0,point1,params);\r\n\t\t\t\tif(y || y==\"0\"){\r\n\t\t\t\t\tx = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\r\n\t\t\t\t\titems.push({x:x,y:y,v:this._settings.value(data[i]),index:i});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsparam = this._getSplineParameters(items);\r\n\r\n\t\t\tfor(i =0; i< items.length; i++){\r\n\t\t\t\tx1 = items[i].x;\r\n\t\t\t\ty1 = items[i].y;\r\n\t\t\t\tif(i<items.length-1){\r\n\t\t\t\t\tx2 = items[i+1].x;\r\n\t\t\t\t\ty2 = items[i+1].y;\r\n\t\t\t\t\tfor(j = x1; j < x2; j++){\r\n\t\t\t\t\t\tvar sY1 = this._getSplineYPoint(j,x1,i,sparam.a,sparam.b,sparam.c,sparam.d);\r\n\t\t\t\t\t\tif(sY1<point0.y)\r\n\t\t\t\t\t\t\tsY1=point0.y;\r\n\t\t\t\t\t\tif(sY1>point1.y)\r\n\t\t\t\t\t\t\tsY1=point1.y;\r\n\t\t\t\t\t\tvar sY2 = this._getSplineYPoint(j+1,x1,i,sparam.a,sparam.b,sparam.c,sparam.d);\r\n\t\t\t\t\t\tif(sY2<point0.y)\r\n\t\t\t\t\t\t\tsY2=point0.y;\r\n\t\t\t\t\t\tif(sY2>point1.y)\r\n\t\t\t\t\t\t\tsY2=point1.y;\r\n\t\t\t\t\t\tthis._drawLine(ctx,j,sY1,j+1,sY2,config.line.color(data[i]),config.line.width);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._drawLine(ctx,x2-1,this._getSplineYPoint(j,x1,i,sparam.a,sparam.b,sparam.c,sparam.d),x2,y2,config.line.color(data[i]),config.line.width);\r\n\t\t\t\t}\r\n\t\t\t\tthis._drawItem(ctx,x1,y1,data[items[i].index],config.label(data[items[i].index]), sIndex, map);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/*gets spline parameter*/\r\n\t_getSplineParameters:function(points){\r\n\t\tvar a ,b, c, d, i, s, u, v,\r\n\t\t\th = [],\r\n\t\t\tm = [],\r\n\t\t\tn = points.length;\r\n\r\n\t\tfor(i =0; i<n-1;i++){\r\n\t\t\th[i] = points[i+1].x - points[i].x;\r\n\t\t\tm[i] = (points[i+1].y - points[i].y)/h[i];\r\n\t\t}\r\n\t\tu = [];\tv = [];\r\n\t\tu[0] = 0;\r\n\t\tu[1] = 2*(h[0] + h[1]);\r\n\t\tv[0] = 0;\r\n\t\tv[1] = 6*(m[1] - m[0]);\r\n\t\tfor(i =2; i < n-1; i++){\r\n\t\t\tu[i] = 2*(h[i-1]+h[i]) - h[i-1]*h[i-1]/u[i-1];\r\n\t\t\tv[i] = 6*(m[i]-m[i-1]) - h[i-1]*v[i-1]/u[i-1];\r\n\t\t}\r\n\r\n\t\ts = [];\r\n\t\ts[n-1] = s[0] = 0;\r\n\t\tfor(i = n -2; i>=1; i--)\r\n\t\t\ts[i] = (v[i] - h[i]*s[i+1])/u[i];\r\n\r\n\t\ta = []; b = []; c = [];\td = [];\r\n\r\n\t\tfor(i =0; i<n-1;i++){\r\n\t\t\ta[i] = points[i].y;\r\n\t\t\tb[i] = - h[i]*s[i+1]/6 - h[i]*s[i]/3 + (points[i+1].y-points[i].y)/h[i];\r\n\t\t\tc[i] = s[i]/2;\r\n\t\t\td[i] = (s[i+1] - s[i])/(6*h[i]);\r\n\t\t}\r\n\r\n\t\tfor (i=0; i<points.length-1; i++){\r\n\t\t\tif (points[i].v === 0 && points[i+1].v === 0){\r\n\t\t\t\ta[i] = points[i].y;\r\n\t\t\t\td[i] = c[i] = b[i] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {a:a,b:b,c:c,d:d};\r\n\t},\r\n\t/*returns the y position of the spline point */\r\n\t_getSplineYPoint:function(x,xi,i,a,b,c,d){\r\n\t\treturn a[i] + (x - xi)*(b[i] + (x-xi)*(c[i]+(x-xi)*d[i]));\r\n\t}\r\n};\r\n\r\nexport default Spline;","\r\n\r\nconst AreaChart = {\r\n\t/**\r\n\t*   renders an area chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: width - the width of the container\r\n\t*   @param: height - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_area:function(ctx, data, point0, point1, sIndex, map){\r\n\r\n\t\tvar align, config, i, mapRect, obj, params, path,\r\n\t\t\tres1, res2, x0, x1, y1, x2, y2, y0;\r\n\r\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\r\n\t\tconfig = this._settings;\r\n\r\n\t\t//the size of map area\r\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\r\n\r\n\t\tif (data.length) {\r\n\r\n\t\t\t// area points\r\n\t\t\tpath = [];\r\n\r\n\t\t\t//the x position of the first item\r\n\t\t\tx0 = (!config.offset?point0.x:point0.x+params.cellWidth*0.5);\r\n\r\n\t\t\t/*\r\n\t\t\t iterates over all data items:\r\n\t\t\t calculates [x,y] for area path, adds rect to chart map and renders labels\r\n\t\t\t */\r\n\t\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\t\tobj = data[i];\r\n\r\n\t\t\t\tres2 = this._getPointY(obj,point0,point1,params);\r\n\t\t\t\tx2 = x0 + params.cellWidth*i ;\r\n\t\t\t\tif(res2){\r\n\t\t\t\t\ty2 = (typeof res2 == \"object\"?res2.y0:res2);\r\n\t\t\t\t\tif(i && this._settings.fixOverflow){\r\n\t\t\t\t\t\tres1 = this._getPointY(data[i-1],point0,point1,params);\r\n\t\t\t\t\t\tif(res1.out && res1.out == res2.out){\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tx1 = params.cellWidth*(i-1) - 0.5 + x0;\r\n\t\t\t\t\t\ty1 = (typeof res1 == \"object\"?res1.y0:res1);\r\n\t\t\t\t\t\tif(res1.out){\r\n\t\t\t\t\t\t\ty0 = (res1.out == \"min\"?point1.y:point0.y);\r\n\t\t\t\t\t\t\tpath.push([this._calcOverflowX(x1,x2,y1,y2,y0),y0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(res2.out){\r\n\t\t\t\t\t\t\ty0 = (res2.out == \"min\"?point1.y:point0.y);\r\n\t\t\t\t\t\t\tpath.push([this._calcOverflowX(x1,x2,y1,y2,y0),y0]);\r\n\t\t\t\t\t\t\tif(i == (data.length-1) && y0 == point0.y)\r\n\t\t\t\t\t\t\t\tpath.push([x2,point0.y]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!res2.out){\r\n\t\t\t\t\t\tpath.push([x2,y2]);\r\n\t\t\t\t\t\t//map\r\n\t\t\t\t\t\tmap.addRect(obj.id,[x2-mapRect-point0.x,y2-mapRect-point0.y,x2+mapRect-point0.x,y2+mapRect-point0.y],sIndex);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//labels\r\n\t\t\t\t\tif(!config.yAxis){\r\n\t\t\t\t\t\talign = (!config.offset&&(i == data.length-1)?\"left\":\"center\");\r\n\t\t\t\t\t\tthis.canvases[sIndex].renderTextAt(false, align, x2, y2-config.labelOffset,config.label(obj));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif(path.length){\r\n\t\t\t\tpath.push([x2,point1.y]);\r\n\t\t\t\tpath.push([path[0][0],point1.y]);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t//filling area\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\r\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[0]);\r\n\t\t\tctx.beginPath();\r\n\t\t\tthis._path(ctx,path);\r\n\t\t\tctx.fill();\r\n\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.globalAlpha =1;\r\n\r\n\t\t\t//border\r\n\t\t\tif(config.border){\r\n\t\t\t\tctx.lineWidth = config.borderWidth||1;\r\n\t\t\t\tif(config.borderColor)\r\n\t\t\t\t\tctx.strokeStyle =  config.borderColor.call(this,data[0]);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._setBorderStyles(ctx,ctx.fillStyle);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tthis._path(ctx,path);\r\n\t\t\t\tctx.stroke();\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t*   renders an area chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: width - the width of the container\r\n\t*   @param: height - the height of the container\r\n\t*   @param: sIndex - index of drawing chart\r\n\t*/\r\n\t$render_stackedArea:function(ctx, data, point0, point1, sIndex, map){\r\n\r\n\t\tvar a0, a1, align, config, i, j, lastItem, mapRect, obj, params, path, x, y, yPos;\r\n\r\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\r\n\r\n\t\tconfig = this._settings;\r\n\r\n\t\t/*the value that defines the map area position*/\r\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\r\n\r\n\r\n\t\t/*drawing all items*/\r\n\t\tif (data.length) {\r\n\r\n\t\t\t// area points\r\n\t\t\tpath = [];\r\n\r\n\t\t\t// y item positions\r\n\t\t\tyPos = [];\r\n\r\n\t\t\t//the x position of the first item\r\n\t\t\tx = (!config.offset?point0.x:point0.x+params.cellWidth*0.5);\r\n\r\n\r\n\t\t\tvar setOffset = function(i,y){\r\n\t\t\t\treturn sIndex?(data[i].$startY?y-point1.y+data[i].$startY:0):y;\r\n\t\t\t};\r\n\r\n\t\t\tvar solveEquation  = function(x,p0,p1){\r\n\t\t\t\tvar k = (p1.y - p0.y)/(p1.x - p0.x);\r\n\t\t\t\treturn  k*x + p0.y - k*p0.x;\r\n\t\t\t};\r\n\r\n\t\t\t/*\r\n\t\t\t iterates over all data items:\r\n\t\t\t calculates [x,y] for area path, adds rect to chart map and renders labels\r\n\t\t\t */\r\n\r\n\t\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\t\tobj = data[i];\r\n\r\n\t\t\t\tif(!i){\r\n\t\t\t\t\ty =  setOffset(i,point1.y);\r\n\t\t\t\t\tpath.push([x,y]);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tx += params.cellWidth ;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ty = setOffset(i,this._getPointY(obj,point0,point1,params));\r\n\r\n\t\t\t\tyPos.push((isNaN(y)&&!i)?(data[i].$startY||point1.y):y);\r\n\r\n\t\t\t\tif(y){\r\n\t\t\t\t\tpath.push([x,y]);\r\n\r\n\t\t\t\t\t//map\r\n\t\t\t\t\tmap.addRect(obj.id,[x-mapRect-point0.x,y-mapRect-point0.y,x+mapRect-point0.x,y+mapRect-point0.y],sIndex);\r\n\r\n\t\t\t\t\t//labels\r\n\t\t\t\t\tif(!config.yAxis){\r\n\t\t\t\t\t\talign = (!config.offset&&lastItem?\"left\":\"center\");\r\n\t\t\t\t\t\tthis.canvases[sIndex].renderTextAt(false, align, x, y-config.labelOffset,config.label(obj));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bottom right point\r\n\t\t\tpath.push([x,setOffset(i-1,point1.y)]);\r\n\r\n\t\t\t// lower border from the end to start\r\n\t\t\tif(sIndex){\r\n\t\t\t\tfor(i=data.length-2; i > 0; i --){\r\n\t\t\t\t\tx -= params.cellWidth ;\r\n\t\t\t\t\ty =  data[i].$startY;\r\n\t\t\t\t\tif(y)\r\n\t\t\t\t\t\tpath.push([x,y]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// go to start point\r\n\t\t\tpath.push([path[0][0],path[0][1]]);\r\n\r\n\t\t\t// filling path\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\r\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[0]);\r\n\t\t\tctx.beginPath();\r\n\t\t\tthis._path(ctx,path);\r\n\t\t\tctx.fill();\r\n\r\n\t\t\t// set y positions of the next series\r\n\t\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\t\ty =  yPos[i];\r\n\r\n\t\t\t\tif(!y){\r\n\t\t\t\t\tif(i == data.length-1){\r\n\t\t\t\t\t\ty = data[i].$startY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(j =i+1; j< data.length; j++){\r\n\t\t\t\t\t\tif(yPos[j]){\r\n\t\t\t\t\t\t\ta0 =  {x:point0.x,y:yPos[0]};\r\n\t\t\t\t\t\t\ta1 =  {x:(point0.x+params.cellWidth*j),y:yPos[j]};\r\n\t\t\t\t\t\t\ty = solveEquation(point0.x+params.cellWidth*i,a0,a1);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata[i].$startY = y;\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default AreaChart;","const Radar = {\r\n\t$render_radar:function(ctx,data,x,y,sIndex,map){\r\n\t\tthis._renderRadarChart(ctx,data,x,y,sIndex,map);\r\n\t}, \r\n\t/**\r\n\t*   renders a pie chart\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: x - the width of the container\r\n\t*   @param: y - the height of the container\r\n\t*   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)\r\n\t*/\r\n\t_renderRadarChart:function(ctx,data,point0,point1,sIndex,map){\r\n\t\tif(!data.length)\r\n\t\t\treturn;\r\n\t\tvar coord = this._getPieParameters(point0,point1);\r\n\t\t/*scale radius*/\r\n\t\tvar radius = (this._settings.radius?this._settings.radius:coord.radius);\r\n\t\t/*scale center*/\r\n\t\tvar x0 = (this._settings.x?this._settings.x:coord.x);\r\n\t\tvar y0 = (this._settings.y?this._settings.y:coord.y);\r\n\t\t/*angles for each unit*/\r\n\t\tvar ratioUnits = [];\r\n\t\tfor(var i=0;i<data.length;i++)\r\n\t\t\tratioUnits.push(1);\r\n\t\tvar ratios = this._getRatios(ratioUnits,data.length);\r\n\t\tthis._mapStart = point0;\r\n\t\tif(!sIndex)\r\n\t\t\tthis._drawRadarAxises(ratios,x0,y0,radius,data);\r\n\t\tthis._drawRadarData(ctx,ratios,x0,y0,radius,data,sIndex,map);\r\n\t},\r\n\t_drawRadarData:function(ctx,ratios,x,y,radius,data,sIndex,map){\r\n\t\tvar alpha0 ,alpha1, config, i, min, max, pos0, pos1, posArr,\r\n\t\t\tr0, r1, relValue, startAlpha, value, value0, value1, valueFactor,\r\n\t\t\tunit, unitArr;\r\n\t\tconfig = this._settings;\r\n\t\t/*unit calculation (item_radius_pos = value*unit)*/\r\n\t\tmin = config.yAxis.start;\r\n\t\tmax = config.yAxis.end;\r\n\t\tunitArr = this._getRelativeValue(min,max);\r\n\t\trelValue = unitArr[0];\r\n\t\tunit = (relValue?radius/relValue:radius/2);\r\n\t\tvalueFactor = unitArr[1];\r\n\r\n\t\tstartAlpha = -Math.PI/2;\r\n\t\talpha0 =  alpha1 = startAlpha;\r\n\t\tposArr = [];\r\n\t\tpos1 = 0;\r\n\t\tfor(i=0;i<data.length;i++){\r\n\t\t\tif(!value1){\r\n\t\t\t\tvalue = config.value(data[i]);\r\n\t\t\t\tif(this._logScaleCalc)\r\n\t\t\t\t\tvalue = this._log10(value);\r\n\t\t\t\t/*a relative value*/\r\n\t\t\t\tvalue0 = (parseFloat(value||0) - min)*valueFactor;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tvalue0 = value1;\r\n\t\t\tr0 = Math.floor(unit*value0);\r\n\r\n\t\t\tvalue = config.value((i!=(data.length-1))?data[i+1]:data[0]);\r\n\t\t\tif(this._logScaleCalc)\r\n\t\t\t\tvalue = this._log10(value);\r\n\r\n\t\t\tvalue1 = (parseFloat(value||0) - min)*valueFactor;\r\n\t\t\tr1 = Math.floor(unit*value1);\r\n\t\t\talpha0 = alpha1;\r\n\t\t\talpha1 = ((i!=(data.length-1))?(startAlpha+ratios[i]-0.0001):startAlpha);\r\n\t\t\tpos0 = (pos1||this._getPositionByAngle(alpha0,x,y,r0));\r\n\t\t\tpos1 = this._getPositionByAngle(alpha1,x,y,r1);\r\n\t\t\t/*creates map area*/\r\n\t\t\t/*areaWidth  = (config.eventRadius||(parseInt(config.item.radius.call(this,data[i]),10)+config.item.borderWidth));\r\n\t\t\t map.addRect(data[i].id,[pos0.x-areaWidth,pos0.y-areaWidth,pos0.x+areaWidth,pos0.y+areaWidth],sIndex);*/\r\n\t\t\t//this._drawLine(ctx,pos0.x,pos0.y,pos1.x,pos1.y,config.line.color.call(this,data[i]),config.line.width)\r\n\t\t\tposArr.push(pos0);\r\n\t\t}\r\n\t\tif(config.fill)\r\n\t\t\tthis._fillRadarChart(ctx,posArr,data);\r\n\t\tif(!config.disableLines && data.length>2)\r\n\t\t\tthis._strokeRadarChart(ctx,posArr,data);\r\n\t\tif(!config.disableItems || data.length<3)\r\n\t\t\tthis._drawRadarItemMarkers(ctx,posArr,data,sIndex,map);\r\n\t\tposArr = null;\r\n\t},\r\n\t_drawRadarItemMarkers:function(ctx,points,data,sIndex,map){\r\n\t\tfor(var i=0;i < points.length;i++){\r\n\t\t\tthis._drawItem(ctx,points[i].x,points[i].y,data[i],this._settings.label.call(this,data),sIndex,map);\r\n\t\t}\r\n\t},\r\n\t_fillRadarChart:function(ctx,points,data){\r\n\t\tvar pos0,pos1;\r\n\t\tctx.globalAlpha= this._settings.alpha.call(this,{});\r\n\r\n\t\tctx.beginPath();\r\n\t\tfor(var i=0;i < points.length;i++){\r\n\t\t\tctx.fillStyle = this._settings.fill.call(this,data[i]);\r\n\t\t\tpos0 = points[i];\r\n\t\t\tpos1 = (points[i+1]|| points[0]);\r\n\t\t\tif(!i){\r\n\r\n\t\t\t\tctx.moveTo(pos0.x,pos0.y);\r\n\t\t\t}\r\n\t\t\tctx.lineTo(pos1.x,pos1.y);\r\n\t\t}\r\n\t\tctx.fill();\r\n\t\tctx.globalAlpha=1;\r\n\t},\r\n\t_strokeRadarChart:function(ctx,points,data){\r\n\t\tvar pos0,pos1;\r\n\t\tfor(var i=0;i < points.length;i++){\r\n\t\t\tpos0 = points[i];\r\n\t\t\tpos1 = (points[i+1]|| points[0]);\r\n\t\t\tthis._drawLine(ctx,pos0.x,pos0.y,pos1.x,pos1.y,this._settings.line.color.call(this,data[i]),this._settings.line.width);\r\n\t\t}\r\n\t},\r\n\t_drawRadarAxises:function(ratios,x,y,radius,data){\r\n\t\tvar configY = this._settings.yAxis;\r\n\t\tvar configX = this._settings.xAxis;\r\n\t\tvar start = configY.start;\r\n\t\tvar end = configY.end;\r\n\t\tvar step = configY.step;\r\n\t\tvar scaleParam= {};\r\n\t\tvar config = this._configYAxis;\r\n\t\tif(typeof config.step ==\"undefined\"||typeof config.start==\"undefined\"||typeof config.end ==\"undefined\"){\r\n\t\t\tvar limits = this._getLimits();\r\n\t\t\tscaleParam = this._calculateScale(limits.min,limits.max);\r\n\t\t\tstart = scaleParam.start;\r\n\t\t\tend = scaleParam.end;\r\n\t\t\tstep = scaleParam.step;\r\n\t\t\tconfigY.end = end;\r\n\t\t\tconfigY.start = start;\r\n\t\t}\r\n\t\tvar units = [];\r\n\t\tvar i,j,p;\r\n\t\tvar c=0;\r\n\t\tvar stepHeight = radius*step/(end-start);\r\n\t\t/*correction for small step*/\r\n\t\tvar power,corr;\r\n\t\tif(step<1){\r\n\t\t\tpower = Math.min(this._log10(step),(start<=0?0:this._log10(start)));\r\n\t\t\tcorr = Math.pow(10,-power);\r\n\t\t}\r\n\t\tvar angles = [];\r\n\t\tif(!this.canvases[\"scale\"])\r\n\t\t\tthis.canvases[\"scale\"] =  this._createCanvas(\"radar_scale\");\r\n\t\tvar ctx = this.canvases[\"scale\"].getCanvas();\r\n\t\tfor(i = end; i>=start; i -=step){\r\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\r\n\t\t\tif(scaleParam.fixNum)  value = parseFloat(i).toFixed(scaleParam.fixNum);\r\n\r\n\t\t\tunits.push(Math.floor(c*stepHeight)+ 0.5);\r\n\t\t\tif(corr && !this._logScaleCalc){\r\n\t\t\t\tvalue = Math.round(value*corr)/corr;\r\n\t\t\t\ti = value;\r\n\t\t\t}\r\n\t\t\tvar unitY = y-radius+units[units.length-1];\r\n\r\n\t\t\tthis.canvases[\"scale\"].renderTextAt(\"middle\",\"left\",x,unitY,\r\n\t\t\t\tconfigY.template(value.toString()),\r\n\t\t\t\t\"webix_axis_item_y webix_radar\"\r\n\t\t\t);\r\n\r\n\t\t\tvar startAlpha = -Math.PI/2;/*possibly need  to moved in config*/\r\n\t\t\tvar alpha0 = startAlpha;\r\n\t\t\tvar alpha1;\r\n\r\n\t\t\tfor(j=0;j< ratios.length;j++){\r\n\t\t\t\tif(!c)\r\n\t\t\t\t\tangles.push(alpha0);\r\n\t\t\t\talpha1 = startAlpha+ratios[j]-0.0001;\r\n\t\t\t\tthis._drawScaleSector(ctx,(ratios.length>2?(config.lineShape||\"line\"):\"arc\"),x,y,radius-units[units.length-1],alpha0,alpha1,i,j,data[i]);\r\n\t\t\t\talpha0 = alpha1;\r\n\t\t\t}\r\n\t\t\tc++;\r\n\t\t}\r\n\t\t/*renders radius lines and labels*/\r\n\t\tfor(i=0;i< angles.length;i++){\r\n\t\t\tp = this._getPositionByAngle(angles[i],x,y,radius);\r\n\t\t\tif(configX){\r\n\t\t\t\tif(configX.lines.call(this,data[i],i))\r\n\t\t\t\t\tthis._drawLine(ctx,x,y,p.x,p.y,configX.lineColor.call(this,data[i]),1);\r\n\t\t\t\tthis._drawRadarScaleLabel(ctx,x,y,radius,angles[i],configX.template.call(this,data[i]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\t_drawScaleSector:function(ctx,shape,x,y,radius,a1,a2,i,j){\r\n\t\tvar pos1, pos2;\r\n\t\tif(radius<0)\r\n\t\t\treturn false;\r\n\t\tpos1 = this._getPositionByAngle(a1,x,y,radius);\r\n\t\tpos2 = this._getPositionByAngle(a2,x,y,radius);\r\n\t\tvar configY = this._settings.yAxis;\r\n\t\tif(configY.bg){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x,y);\r\n\t\t\tif(shape==\"arc\")\r\n\t\t\t\tctx.arc(x,y,radius,a1,a2,false);\r\n\t\t\telse{\r\n\t\t\t\tctx.lineTo(pos1.x,pos1.y);\r\n\t\t\t\tctx.lineTo(pos2.x,pos2.y);\r\n\t\t\t}\r\n\t\t\tctx.fillStyle =  configY.bg(i,j);\r\n\t\t\tctx.moveTo(x,y);\r\n\t\t\tctx.fill();\r\n\t\t\tctx.closePath();\r\n\t\t}\r\n\t\tif(configY.lines.call(this,i)){\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.beginPath();\r\n\t\t\tif(shape==\"arc\")\r\n\t\t\t\tctx.arc(x,y,radius,a1,a2,false);\r\n\t\t\telse{\r\n\t\t\t\tctx.moveTo(pos1.x,pos1.y);\r\n\t\t\t\tctx.lineTo(pos2.x,pos2.y);\r\n\t\t\t}\r\n\t\t\tctx.strokeStyle = configY.lineColor.call(this,i);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t},\r\n\t_drawRadarScaleLabel:function(ctx,x,y,r,a,text){\r\n\t\tif(!text)\r\n\t\t\treturn false;\r\n\t\tvar t = this.canvases[\"scale\"].renderText(0,0,text,\"webix_axis_radar_title\",1);\r\n\t\tvar width = t.scrollWidth;\r\n\t\tvar height = t.offsetHeight;\r\n\t\tvar delta = 0.001;\r\n\t\tvar pos =  this._getPositionByAngle(a,x,y,r+5);\r\n\t\tvar corr_x=0,corr_y=0;\r\n\t\tif(a<0||a>Math.PI){\r\n\t\t\tcorr_y = -height;\r\n\t\t}\r\n\t\tif(a>Math.PI/2){\r\n\t\t\tcorr_x = -width;\r\n\t\t}\r\n\t\tif(Math.abs(a+Math.PI/2)<delta||Math.abs(a-Math.PI/2)<delta){\r\n\t\t\tcorr_x = -width/2;\r\n\t\t}\r\n\t\telse if(Math.abs(a)<delta||Math.abs(a-Math.PI)<delta){\r\n\t\t\tcorr_y = -height/2;\r\n\t\t}\r\n\t\tt.style.top  = pos.y+corr_y+\"px\";\r\n\t\tt.style.left = pos.x+corr_x+\"px\";\r\n\t\tt.style.width = width+\"px\";\r\n\t\tt.style.whiteSpace = \"nowrap\";\r\n\t}\r\n};\r\n\r\nexport default Radar;","const Scatter = {\r\n\r\n\t/**\r\n\t*   renders a graphic\r\n\t*   @param: ctx - canvas object\r\n\t*   @param: data - object those need to be displayed\r\n\t*   @param: point0  - top left point of a chart\r\n\t*   @param: point1  - right bottom point of a chart\r\n\t*   @param: sIndex - index of drawing chart\r\n    *   @param: map - map object\r\n\t*/\r\n\t$render_scatter:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tif(!this._settings.xValue)\r\n\t\t\treturn;\r\n\t\tvar config = this._settings;\r\n\t\tvar lines = !(config.disableLines || typeof config.disableLines == \"undefined\");\r\n\r\n\t\t/*max in min values*/\r\n\t\tvar limitsY = this._getLimits();\r\n\t\tvar limitsX = this._getLimits(\"h\",\"xValue\");\r\n\t\t/*render scale*/\r\n\t\tif(!sIndex){\r\n\t\t\tif(!this.canvases[\"x\"])\r\n\t\t\t\tthis.canvases[\"x\"] = this._createCanvas(\"axis_x\");\r\n\t\t\tif(!this.canvases[\"y\"])\r\n\t\t\t\tthis.canvases[\"y\"] = this._createCanvas(\"axis_y\");\r\n\t\t\tthis._drawYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,limitsY.min,limitsY.max);\r\n\t\t\tthis._drawHXAxis(this.canvases[\"x\"].getCanvas(),data,point0,point1,limitsX.min,limitsX.max);\r\n\t\t}\r\n\t\tlimitsY = {min:config.yAxis.start,max:config.yAxis.end};\r\n\t\tlimitsX = {min:config.xAxis.start,max:config.xAxis.end};\r\n\t\tvar params = this._getScatterParams(ctx,data,point0,point1,limitsX,limitsY);\r\n\t\t\r\n\t\tthis._mapStart = point0;\r\n\r\n\t\tvar items = [];\r\n\t\tfor(let i=0;i<data.length;i++){\r\n\t\t\tvar x = this._calculateScatterItemPosition(params, point1, point0, limitsX, data[i], \"X\");\r\n\t\t\tvar y = this._calculateScatterItemPosition(params, point0, point1, limitsY, data[i], \"Y\");\r\n\t\t\tif(isNaN(x) || isNaN(y))\r\n\t\t\t\tcontinue;\r\n\t\t\titems.push({ x:x, y:y, index:i });\r\n\t\t}\r\n\t\tvar x1, y1, x2, y2, di;\r\n\t\tfor(let i=0; i<items.length; i++){\r\n\t\t\tdi = items[i].index;\r\n\r\n\t\t\tif (lines){\r\n\t\t\t\tvar color = config.line.color.call(this,data[di]);\r\n\t\t\t\t//line start position\r\n\t\t\t\tx1 = items[i].x;\r\n\t\t\t\ty1 = items[i].y;\r\n\r\n\t\t\t\tif(i == items.length-1){\r\n\t\t\t\t\t//connecting last and first items\r\n\t\t\t\t\tif (config.shape && items.length>2){\r\n\t\t\t\t\t\tthis._drawLine(ctx,x2,y2,items[0].x,items[0].y,color,config.line.width);\r\n\t\t\t\t\t\t//render shape on top of the line\r\n\t\t\t\t\t\tif(!config.disableItems)\r\n\t\t\t\t\t\t\tthis._drawScatterItem(ctx,map, items[0],data[0],sIndex);\r\n\t\t\t\t\t\tif(config.fill)\r\n\t\t\t\t\t\t\tthis._fillScatterChart(ctx, items, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// line between two points\r\n\t\t\t\t\tx2 = items[i+1].x;\r\n\t\t\t\t\ty2 = items[i+1].y;\r\n\t\t\t\t\tthis._drawLine(ctx,x1,y1,x2,y2,color,config.line.width);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//item\r\n\t\t\tif(!config.disableItems && items[i]){\r\n\t\t\t\tthis._drawScatterItem(ctx,map, items[i],data[di],sIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_fillScatterChart:function(ctx,points,data){\r\n\t\tvar pos0,pos1;\r\n\t\tctx.globalAlpha= this._settings.alpha.call(this,{});\r\n\r\n\t\tctx.beginPath();\r\n\t\tfor(var i=0;i < points.length;i++){\r\n\t\t\tctx.fillStyle = this._settings.fill.call(this,data[i]);\r\n\t\t\tpos0 = points[i];\r\n\t\t\tpos1 = (points[i+1]|| points[0]);\r\n\t\t\tif(!i){\r\n\t\t\t\tctx.moveTo(pos0.x,pos0.y);\r\n\t\t\t}\r\n\t\t\tctx.lineTo(pos1.x,pos1.y);\r\n\t\t}\r\n\t\tctx.fill();\r\n\t\tctx.globalAlpha=1;\r\n\t},\r\n\t_getScatterParams:function(ctx, data, point0, point1,limitsX,limitsY){\r\n\t\tvar params = {};\r\n\t\t/*available space*/\r\n\t\tparams.totalHeight = point1.y-point0.y;\r\n\t\t/*available width*/\r\n\t\tparams.totalWidth = point1.x-point0.x;\r\n\t\t/*unit calculation (y_position = value*unit)*/\r\n\t\tthis._calcScatterUnit(params,limitsX.min,limitsX.max,params.totalWidth,\"X\");\r\n\t\tthis._calcScatterUnit(params,limitsY.min,limitsY.max,params.totalHeight,\"Y\");\r\n\t\treturn params;\r\n\t},\r\n\t_drawScatterItem:function(ctx,map,item,obj,sIndex){\r\n\t\tthis._drawItem(ctx,item.x,item.y,obj,this._settings.label.call(this,obj),sIndex,map);\r\n\t},\r\n\t_calculateScatterItemPosition:function(params, point0, point1, limits, obj, axis){\r\n\t\t/*the real value of an object*/\r\n\t\tvar value = this._settings[axis==\"X\"?\"xValue\":\"value\"].call(this,obj);\r\n\t\t/*a relative value*/\r\n\t\tvar valueFactor = params[\"valueFactor\"+axis];\r\n\t\tvar v = (parseFloat(value||0) - limits.min)*valueFactor;\r\n\t\t/*a vertical coordinate*/\r\n\t\tvar unit = params[\"unit\"+axis];\r\n\t\tvar pos = point1[axis.toLowerCase()] - (axis==\"X\"?(-1):1)*Math.floor(unit*v);\r\n\t\t/*the limit of the minimum value is  the minimum visible value*/\r\n\t\tif(v<0)\r\n\t\t\tpos = point1[axis.toLowerCase()];\r\n\t\t/*the limit of the maximum value*/\r\n\t\tif(value > limits.max)\r\n\t\t\tpos = point0[axis.toLowerCase()];\r\n\t\t/*the limit of the minimum value*/\r\n\t\tif(value < limits.min)\r\n\t\t\tpos = point1[axis.toLowerCase()];\r\n\t\treturn pos;\r\n\t},\r\n\t_calcScatterUnit:function(p,min,max,size,axis){\r\n\t\tvar relativeValues = this._getRelativeValue(min,max);\r\n\t\taxis = (axis||\"\");\r\n\t\tp[\"relValue\"+axis] = relativeValues[0];\r\n\t\tp[\"valueFactor\"+axis] = relativeValues[1];\r\n\t\tp[\"unit\"+axis] = (p[\"relValue\"+axis]?size/p[\"relValue\"+axis]:10);\r\n\t}\r\n};\r\n\r\nexport default Scatter;","\r\n\r\nconst Presets = {\r\n\tpresets:{\r\n\t\t\"simple\":{\r\n\t\t\titem:{\r\n\t\t\t\tborderColor: \"#ffffff\",\r\n\t\t\t\tcolor: \"#2b7100\",\r\n\t\t\t\tshadow: false,\r\n\t\t\t\tborderWidth:2\r\n\t\t\t},\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#8ecf03\",\r\n\t\t\t\twidth:2\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"plot\":{\r\n\t\t\tcolor:\"#8664C6\",\r\n\t\t\titem:{\r\n\t\t\t\tborderColor:\"#8664C6\",\r\n\t\t\t\tborderWidth:1,\r\n\t\t\t\tcolor: \"#ffffff\",\r\n\t\t\t\ttype:\"r\",\r\n\t\t\t\tshadow: false\r\n\t\t\t},\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#8664C6\",\r\n\t\t\t\twidth:2\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"diamond\":{\r\n\t\t\tcolor:\"#FF5C4C\",\r\n\t\t\titem:{\r\n\t\t\t\tborderColor:\"#FF5C4C\",\r\n\t\t\t\tcolor: \"#FF5C4C\",\r\n\t\t\t\ttype:\"d\",\r\n\t\t\t\tradius:3,\r\n\t\t\t\tshadow:true\r\n\t\t\t},\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#FF5C4C\",\r\n\t\t\t\twidth:2\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"point\":{\r\n\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\tdisableLines:true,\r\n\t\t\tfill:false,\r\n\t\t\tdisableItems:false,\r\n\t\t\titem:{\r\n\t\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\t\tborderColor:\"#1ca1c1\",\r\n\t\t\t\tradius:2,\r\n\t\t\t\tborderWidth:2,\r\n\t\t\t\ttype:\"r\"\r\n\t\t\t},\r\n\t\t\talpha:1\r\n\t\t},\r\n\t\t\"line\":{\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\t\twidth:2\r\n\t\t\t},\r\n\t\t\titem:{\r\n\t\t\t\tcolor:\"#ffffff\",\r\n\t\t\t\tborderColor:\"#1ca1c1\",\r\n\t\t\t\tradius:2,\r\n\t\t\t\tborderWidth:2,\r\n\t\t\t\ttype:\"d\"\r\n\t\t\t},\r\n\t\t\tfill:false,\r\n\t\t\tdisableItems:false,\r\n\t\t\tdisableLines:false,\r\n\t\t\talpha:1\r\n\t\t},\r\n\t\t\"area\":{\r\n\t\t\tfill:\"#1ca1c1\",\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\t\twidth:1\r\n\t\t\t},\r\n\t\t\tdisableItems:true,\r\n\t\t\talpha: 0.2,\r\n\t\t\tdisableLines:false\r\n\t\t},\r\n\t\t\"round\":{\r\n\t\t\titem:{\r\n\t\t\t\tradius:3,\r\n\t\t\t\tborderColor:\"#1ca1c1\",\r\n\t\t\t\tborderWidth:1,\r\n\t\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\t\ttype:\"r\",\r\n\t\t\t\tshadow:false,\r\n\t\t\t\talpha:0.6\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"square\":{\r\n\t\t\titem:{\r\n\t\t\t\tradius:3,\r\n\t\t\t\tborderColor:\"#00a497\",\r\n\t\t\t\tborderWidth:2,\r\n\t\t\t\tcolor:\"#ffffff\",\r\n\t\t\t\ttype:\"s\",\r\n\t\t\t\tshadow:false,\r\n\t\t\t\talpha:1\r\n\t\t\t},\r\n\t\t\tline:{\r\n\t\t\t\tcolor:\"#00a497\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t/*bar*/\r\n\t\t\"column\":{\r\n\t\t\tcolor:\"RAINBOW\",\r\n\t\t\tgradient:false,\r\n\t\t\tbarWidth:45,\r\n\t\t\tradius:0,\r\n\t\t\talpha:1,\r\n\t\t\tborder:true\r\n\t\t},\r\n\t\t\"stick\":{\r\n\t\t\tbarWidth:5,\r\n\t\t\tgradient:false,\r\n\t\t\tcolor:\"#1ca1c1\",\r\n\t\t\tradius:2,\r\n\t\t\talpha:1,\r\n\t\t\tborder:false\r\n\t\t},\r\n\t\t\"alpha\":{\r\n\t\t\tcolor:\"#b9a8f9\",\r\n\t\t\tbarWidth:70,\r\n\t\t\tgradient:\"falling\",\r\n\t\t\tradius:0,\r\n\t\t\talpha:0.5,\r\n\t\t\tborder:true\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Presets;","\r\n\r\nconst SplineArea = {\r\n\t/**\r\n\t *   renders an splineArea chart\r\n\t *   @param: ctx - canvas object\r\n\t *   @param: data - object those need to be displayed\r\n\t *   @param: width - the width of the container\r\n\t *   @param: height - the height of the container\r\n\t *   @param: sIndex - index of drawing chart\r\n\t */\r\n\t$render_splineArea:function(ctx, data, point0, point1, sIndex, map){\r\n\t\tvar color, i,items,j,mapRect,params,sParams,\r\n\t\t\tx,x0,x1,x2,y,y2,\r\n\t\t\tconfig = this._settings,\r\n\t\t\tpath = [];\r\n\r\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\r\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\r\n\t\t/*array of all points*/\r\n\t\titems = [];\r\n\r\n\t\tif (data.length) {\r\n\t\t\t/*getting all points*/\r\n\t\t\tx0 = point0.x;\r\n\t\t\tfor(i=0; i < data.length;i ++){\r\n\t\t\t\ty = this._getPointY(data[i],point0,point1,params);\r\n\t\t\t\tif(y || y==\"0\"){\r\n\t\t\t\t\tx = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\r\n\t\t\t\t\titems.push({x:x,y:y,index:i});\r\n\t\t\t\t\tmap.addRect(data[i].id,[x-mapRect-point0.x,y-mapRect-point0.y,x+mapRect-point0.x,y+mapRect-point0.y],sIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsParams = this._getSplineParameters(items);\r\n\r\n\t\t\tfor(i =0; i< items.length; i++){\r\n\t\t\t\tx1 = items[i].x;\r\n\t\t\t\tif(i<items.length-1){\r\n\t\t\t\t\tx2 = items[i+1].x;\r\n\t\t\t\t\ty2 = items[i+1].y;\r\n\t\t\t\t\tfor(j = x1; j < x2; j++){\r\n\t\t\t\t\t\tvar sY1 = this._getSplineYPoint(j,x1,i,sParams.a,sParams.b,sParams.c,sParams.d);\r\n\t\t\t\t\t\tif(sY1<point0.y)\r\n\t\t\t\t\t\t\tsY1=point0.y;\r\n\t\t\t\t\t\tif(sY1>point1.y)\r\n\t\t\t\t\t\t\tsY1=point1.y;\r\n\t\t\t\t\t\tvar sY2 = this._getSplineYPoint(j+1,x1,i,sParams.a,sParams.b,sParams.c,sParams.d);\r\n\t\t\t\t\t\tif(sY2<point0.y)\r\n\t\t\t\t\t\t\tsY2=point0.y;\r\n\t\t\t\t\t\tif(sY2>point1.y)\r\n\t\t\t\t\t\t\tsY2=point1.y;\r\n\t\t\t\t\t\tpath.push([j,sY1]);\r\n\t\t\t\t\t\tpath.push([j+1,sY2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpath.push([x2,y2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolor = this._settings.color.call(this,data[0]);\r\n\r\n\t\t\tif(path.length){\r\n\t\t\t\tpath.push([x2,point1.y]);\r\n\t\t\t\tpath.push([path[0][0],point1.y]);\r\n\t\t\t}\r\n\r\n\t\t\t//filling area\r\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\r\n\t\t\tctx.fillStyle = color;\r\n\t\t\tctx.beginPath();\r\n\t\t\tthis._path(ctx,path);\r\n\t\t\tctx.fill();\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.globalAlpha =1;\r\n\r\n\t\t\t// draw line\r\n\t\t\tif(config.border){\r\n\t\t\t\tctx.lineWidth = config.borderWidth||1;\r\n\t\t\t\tif(config.borderColor)\r\n\t\t\t\t\tctx.strokeStyle =  config.borderColor.call(this,data[0]);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._setBorderStyles(ctx,color);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tpath.splice(path.length-3);\r\n\t\t\t\tthis._path(ctx,path);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default SplineArea;","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"rangechart\", defaults:{\r\n\ttemplate:\"GPL version doesn't support rangechart <br> You need Webix PRO\"\r\n}}, template.view);","import base from \"../views/view\";\r\nimport list from \"../views/list\";\r\nimport Group from \"../core/group\";\r\nimport TreeStore from \"../core/treestore\";\r\nimport RenderStack from \"../core/renderstack\";\r\n\r\nimport type from \"../webix/type\";\r\n\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend, bind, copy, _to_array, clone} from \"../webix/helpers\";\r\nimport promise from \"../thirdparty/promiz\";\r\nimport animate from \"../webix/animate\";\r\nimport template from \"../webix/template\";\r\n\r\nconst api = {\r\n\tname:\"grouplist\",\r\n\tdefaults:{\r\n\t\tanimate:{\r\n\t\t}\r\n\t},\r\n\t_listClassName : \"webix_grouplist\",\r\n\t$init:function(){\r\n\t\textend(this.data, TreeStore, true);\r\n\t\t//needed for getRange\r\n\t\tthis.data.count = function(){ return this.order.length; };\r\n\t\tthis.data.provideApi(this,true);\r\n\t\tthis.data.attachEvent(\"onClearAll\", bind(this._onClear, this));\r\n\t\tthis._onClear();\r\n\t},\r\n\t_onClear:function(){\r\n\t\tthis._nested_cursor = [];\r\n\t\tthis._nested_chain = [];\r\n\t},\r\n\t$setSize:function(){\r\n\t\tif (base.api.$setSize.apply(this, arguments)){\r\n\t\t\t//critical for animations in group list\r\n\t\t\tthis._dataobj.style.width = this._content_width;\r\n\t\t}\r\n\t},\t\r\n\ton_click:{\r\n\t\twebix_list_item:function(e,id){\r\n\t\t\tif (this._animation_promise) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i=0; i < this._nested_chain.length; i++){\r\n\t\t\t\tif (this._nested_chain[i] == id){ //one level up\r\n\t\t\t\t\tfor (var j=i; j < this._nested_chain.length; j++) {\r\n\t\t\t\t\t\tthis.data.getItem(this._nested_chain[j]).$template=\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!i){ //top level\r\n\t\t\t\t\t\tthis._nested_cursor = this.data.branch[0];\r\n\t\t\t\t\t\tthis._nested_chain = [];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._nested_cursor= this.data.branch[this._nested_chain[i-1]];\r\n\t\t\t\t\t\tthis._nested_chain.splice(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._is_level_down = false;\r\n\t\t\t\t\treturn this.render();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar obj = this.getItem(id);\r\n\t\t\tif (obj.$count){\t//one level down\r\n\t\t\t\tthis._is_level_down = true;\r\n\t\t\t\tthis._nested_chain.push(id);\r\n\t\t\t\tobj.$template = \"Back\";\r\n\t\t\t\tthis._nested_cursor = this.data.branch[obj.id];\r\n\t\t\t\treturn this.render();\r\n\t\t\t} else {\r\n\t\t\t\tif (this._settings.select){\r\n\t\t\t\t\tthis._no_animation = true;\r\n\t\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect)\r\n\t\t\t\t\t\tthis.select(id, false, ((this._settings.multiselect == \"touch\") || e.ctrlKey || e.metaKey), e.shiftKey); \t//multiselection\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.select(id);\r\n\t\t\t\t\tthis._no_animation = false;\r\n\t\t\t\t}\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetOpenState:function(){\r\n\t\treturn {parents:this._nested_chain,branch:this._nested_cursor};\r\n\t},\r\n\trender:function(id,data,type){\r\n\t\tvar i, lastChain;\r\n\r\n\t\t//start filtering processing=>\r\n\t\tthis._nested_chain = copy(this._nested_chain);\r\n\t\tthis._nested_cursor = copy(this._nested_cursor);\r\n\r\n\t\tif(this._nested_chain.length){\r\n\t\t\tfor(i = 0;i<this._nested_chain.length;i++){\r\n\t\t\t\tif(!this.data.branch[this._nested_chain[i]]){\r\n\t\t\t\t\tthis._nested_chain.splice(i,1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlastChain =  (this._nested_chain.length?this._nested_chain[this._nested_chain.length-1]:0);\r\n\t\tthis._nested_cursor = copy(this.data.branch[lastChain]) ;\r\n\r\n\t\tif(!this._nested_cursor.length&&this._nested_chain.length){\r\n\t\t\tthis._nested_cursor =  [lastChain];\r\n\t\t\tthis._nested_chain.pop();\r\n\t\t}\r\n\t\t//<= end filtering processing\r\n\r\n\t\tif (this._animation_promise)\r\n\t\t\treturn this._animation_promise.then(() => this.render.apply(this, arguments));\r\n\r\n\t\tfor (i=0; i < this._nested_cursor.length; i++)\r\n\t\t\tthis.data.getItem(this._nested_cursor[i]).$template = \"\";\r\n\r\n\t\tif (!this._nested_cursor.length)\r\n\t\t\tthis._nested_cursor = this.data.branch[0];\r\n\r\n\t\tthis.data.order = _to_array([].concat(this._nested_chain).concat(this._nested_cursor));\r\n\r\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\tif (this._no_animation || !this._dataobj.innerHTML || !(animate.isSupported() && this._settings.animate) || (this._prev_nested_chain_length == this._nested_chain.length)) { // if dataobj is empty or animation is not supported\r\n\t\t\t\t// don't repaint invisible data\r\n\t\t\t\tif (id && type !== \"delete\" && this.data.getIndexById(id) === -1) return;\r\n\r\n\t\t\t\tRenderStack.render.apply(this, arguments);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//getRange - returns all elements\r\n\t\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\r\n\t\t\t\t\tif(!this._back_scroll_states)\r\n\t\t\t\t\t\tthis._back_scroll_states = [];\r\n\r\n\t\t\t\t\tvar next_div = this._dataobj.cloneNode(false);\r\n\t\t\t\t\tnext_div.innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\r\n\r\n\t\t\t\t\tvar aniset = extend({}, this._settings.animate);\r\n\t\t\t\t\taniset.direction = (this._is_level_down)?\"left\":\"right\";\r\n\r\n\t\t\t\t\t/*scroll position restore*/\r\n\t\t\t\t\tvar animArr = [clone(aniset),clone(aniset)];\r\n\t\t\t\t\tvar getScrollState;\r\n\t\t\t\t\tif (this._is_level_down)\r\n\t\t\t\t\t\tthis._back_scroll_states.push(this.getScrollState());\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tgetScrollState = this._back_scroll_states.pop();\r\n\r\n\t\t\t\t\tvar line = animate.formLine(\r\n\t\t\t\t\t\tnext_div,\r\n\t\t\t\t\t\tthis._dataobj,\r\n\t\t\t\t\t\taniset\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\taniset.master = this;\r\n\t\t\t\t\taniset.callback = function(){\r\n\t\t\t\t\t\tthis._dataobj = next_div;\r\n\r\n\t\t\t\t\t\t/*scroll position restore*/\r\n\t\t\t\t\t\tif (!this._is_level_down){\r\n\t\t\t\t\t\t\tif (getScrollState) \r\n\t\t\t\t\t\t\t\tthis.scrollTo(0,getScrollState.y);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tthis.scrollTo(0,0);\r\n\r\n\t\t\t\t\t\tanimate.breakLine(line);\r\n\t\t\t\t\t\taniset.master = aniset.callback = null;\r\n\t\t\t\t\t\tthis._htmlmap = this._animation_promise = null; //clear map, it will be filled at first getItemNode\r\n\t\t\t\t\t\taniset.wait_animation.resolve();\r\n\t\t\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tanimate(line, animArr);\r\n\t\t\t\t\tthis._animation_promise = aniset.wait_animation = promise.defer();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._prev_nested_chain_length = this._nested_chain.length;\r\n\t\t}\r\n\t},\r\n\ttemplateBack_setter:function(config){\r\n\t\tthis.type.templateBack = template(config);\r\n\t},\r\n\ttemplateItem_setter:function(config){\r\n\t\tthis.type.templateItem = template(config);\r\n\t},\r\n\ttemplateGroup_setter:function(config){\r\n\t\tthis.type.templateGroup = template(config);\r\n\t},\r\n\ttype:{\r\n\t\ttemplate:function(obj, common){\r\n\t\t\tif (obj.$count)\r\n\t\t\t\treturn common.templateGroup(obj, common);\r\n\t\t\treturn common.templateItem(obj, common);\r\n\t\t},\r\n\t\tcss:\"group\",\r\n\t\tclassname:function(obj, common, marks){\r\n\t\t\treturn \"webix_list_item\"+\r\n\t\t\t\t\" webix_\"+(obj.$count?\"group\":\"item\")+(obj.$template?\"_back\":\"\")+\r\n\t\t\t\t((marks&&marks.webix_selected)?\" webix_selected\":\"\")+\r\n\t\t\t\t(common.css?\" \"+common.css:\"\")+\r\n\t\t\t\t(obj.$css?\" \"+obj.$css:\"\");\r\n\t\t},\r\n\t\ttemplateStart:template(\"<div \"+/*@attr*/\"webix_l_id\"+\"=\\\"#id#\\\" class=\\\"{common.classname()}\\\" style=\\\"width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;\\\" {common.aria()}>\"),\r\n\t\ttemplateBack:template(\"#value#\"),\r\n\t\ttemplateItem:template(\"#value#\"),\r\n\t\ttemplateGroup:template(\"#value#\"),\r\n\t\ttemplateEnd:function(obj){\r\n\t\t\tvar html = \"\";\r\n\t\t\tif(obj.$count) html += \"<div class='webix_arrow_icon'></div>\";\r\n\t\t\thtml += \"</div>\";\r\n\t\t\treturn html;\r\n\t\t}\r\n\t},\r\n\tshowItem:function(id){\r\n\t\tvar obj, parent;\r\n\t\tif(id){\r\n\t\t\tobj = this.getItem(id);\r\n\t\t\tparent = obj.$parent;\r\n\t\t\t\r\n\t\t\tif (obj.$count)\r\n\t\t\t\tparent = obj.id;\r\n\t\t}\r\n\t\tthis._nested_cursor = this.data.branch[parent||0];\r\n\t\tthis._nested_chain=[];\r\n\t\t\t\t\r\n\t\t//build _nested_chain\r\n\t\twhile(parent){\r\n\t\t\tthis.getItem(parent).$template = \"Back\";\r\n\t\t\tthis._nested_chain.unshift(parent);\r\n\t\t\tparent = this.getItem(parent).$parent;\r\n\t\t} \r\n\t\t\r\n\t\t//render\r\n\t\tthis._no_animation = true;\r\n\t\tthis.render();\r\n\t\tthis._no_animation = false;\r\n\t\t\r\n\t\t//scroll if necessary\r\n\t\tRenderStack.showItem.call(this,id);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  Group, list.view );\r\nexport default {api, view};\r\n\r\n//register default type for grouplist\r\ntype(view,{});","import list from \"../views/list\";\r\nimport {insertBefore, remove} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {_to_array} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\nimport template from \"../webix/template\";\r\n\r\n\r\nconst api = {\r\n\tname:\"unitlist\",\r\n\t_id:/*@attr*/\"webix_item_id\",\r\n\tuniteBy_setter: template,\r\n\trender: function(id,data,type){\r\n\t\tconst config = this._settings;\r\n\t\tif (!this.isVisible(config.id))\r\n\t\t\treturn;\r\n\t\tif (!config.uniteBy)\r\n\t\t\treturn;\r\n\r\n\t\tif (id){\r\n\t\t\tconst cont = this.getItemNode(id); //get html element of updated item\r\n\t\t\tif (cont && type == \"update\" && (this._settings.uniteBy.call(this,data) == this.getItem(id).$unitValue)){\r\n\t\t\t\tconst t = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\tinsertBefore(t, cont);\r\n\t\t\t\tremove(cont);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//full reset\r\n\t\tif (this.callEvent(\"onBeforeRender\", [this.data])){\r\n\t\t\tthis.units = null;\r\n\t\t\tthis._setUnits();\r\n\t\t\tif (this.units){\r\n\t\t\t\tthis.callEvent(\"onUnits\", []);\r\n\t\t\t\tthis._dataobj.innerHTML = this._getUnitRange().map(this._toHTML, this).join(\"\");\r\n\t\t\t\tthis._htmlmap = null; \r\n\t\t\t}\r\n\t\t\tthis.callEvent(\"onAfterRender\", []);\r\n\t\t}\r\n\t},\r\n\tgetUnits: function(){\r\n\t\tconst result = [];\r\n\t\tif (this.units){\r\n\t\t\tfor (let b in this.units){\r\n\t\t\t\tresult.push(b);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\t\r\n\t},\r\n\tgetUnitList: function(id){\r\n\t\treturn (this.units ? this.units[id] : null);\r\n\t},\r\n\t_toHTML: function(obj){\r\n\t\t//check if related template exist\r\n\t\tconst mark = this.data._marks[obj.id];\r\n\t\tassert((!obj.$template || this.type[\"template\" + obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\r\n\t\tthis.callEvent(\"onItemRender\", [obj]);\r\n\t\tif (obj.$unit){\r\n\t\t\treturn this.type.templateStartHeader(obj, this.type) + this.type.templateHeader.call(this,obj.$unit) + this.type.templateEnd(obj, this.type);\r\n\t\t}\r\n\t\treturn this.type.templateStart(obj, this.type, mark) + (obj.$template ? this.type[\"template\" + obj.$template] : this.type.template)(obj, this.type) + this.type.templateEnd(obj, this.type);\r\n\t},\r\n\t_getUnitRange: function(){\r\n\t\tlet data = [];\r\n\t\tconst min = this.data.$min || 0;\r\n\t\tconst max = this.data.$max || Infinity;\r\n\t\tlet count = 0;\r\n\r\n\t\tfor (let u in this.units){\r\n\t\t\tdata.push({ $unit:u });\r\n\t\t\tconst unit = this.units[u];\r\n\t\t\tfor (let i = 0; i < unit.length; i++){\r\n\t\t\t\tif (count == min) data = [{ $unit:u }];\r\n\t\t\t\tdata.push(this.getItem(unit[i]));\r\n\t\t\t\tif (count == max) return _to_array(data);\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn _to_array(data);\r\n\t},\r\n\t_setUnits: function(){\r\n\t\tconst list = this;\r\n\t\tthis.units = {};\r\n\t\tthis.data.each(function(obj){\r\n\t\t\tvar result = list._settings.uniteBy.call(this,obj);\r\n\t\t\tobj.$unitValue = result;\r\n\t\t\tif(!list.units[result])\r\n\t\t\t\tlist.units[result] = [];\r\n\t\t\tlist.units[result].push(obj.id);\r\n\t\t});\r\n\t},\r\n\ttype:{\r\n\t\theaderHeight: 20,\r\n\t\ttemplateHeader: function(value){\r\n\t\t\treturn \"<span class='webix_unit_header_inner'>\"+value+\"</span>\";\r\n\t\t},\r\n\t\ttemplateStart:function(obj,type,marks){\r\n\t\t\tif(obj.$unit)\r\n\t\t\t\treturn type.templateStartHeader.apply(this,arguments);\r\n\t\t\tconst className = \"webix_list_item webix_list_\"+(type.css)+\"_item\"+((marks&&marks.webix_selected)?\" webix_selected\":\"\")+(obj.$css?obj.$css:\"\");\r\n\t\t\tconst style = \"width:\"+type.widthSize(obj,type,marks)+\"; height:\"+type.heightSize(obj,type,marks)+\"; overflow:hidden;\"+(type.layout&&type.layout==\"x\"?\"float:left;\":\"\");\r\n\t\t\treturn \"<div \"+/*@attr*/\"webix_item_id\"+\"=\\\"\"+obj.id+\"\\\" class=\\\"\"+className+\"\\\" style=\\\"\"+style+\"\\\" \"+type.aria(obj, type, marks)+\">\";\r\n\t\t},\r\n\t\ttemplateStartHeader:function(obj,type,marks){\r\n\t\t\tconst className = \"webix_unit_header webix_unit_\"+(type.css)+\"_header\"+(obj.$selected?\"_selected\":\"\");\r\n\t\t\tconst style = \"width:\"+type.widthSize(obj,type,marks)+\"; height:\"+type.headerHeight+\"px; overflow:hidden;\";\r\n\t\t\treturn \"<div \"+/*@attr*/\"webix_unit_id\"+\"=\\\"\"+obj.$unit+\"\\\" class=\\\"\"+className+\"\\\" style=\\\"\"+style+\"\\\">\";\r\n\t\t}\r\n\t},\r\n\t$skin: function(){\r\n\t\tlist.api.$skin.call(this);\r\n\r\n\t\tthis.type.headerHeight = $active.unitHeaderHeight;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  list.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {bind, extend} from \"../webix/helpers\";\r\nimport {freeze} from \"../ui/helpers\";\r\n\r\nimport UIManager from \"../core/uimanager\";\r\nimport i18n from \"../webix/i18n\";\r\n\r\nimport layout from \"../views/layout\";\r\n\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport IdSpace from \"../core/idspace\";\r\n\r\ni18n.dbllist = {\r\n\tselectAll : \"<span class='webix_icon wxi-angle-double-right'></span>\",\r\n\tselectOne : \"<span class='webix_icon wxi-angle-right'></span>\",\r\n\tdeselectAll : \"<span class='webix_icon wxi-angle-double-left'></span>\",\r\n\tdeselectOne : \"<span class='webix_icon wxi-angle-left'></span>\"\r\n};\r\n\r\nconst api = {\r\n\tname: \"dbllist\",\r\n\tdefaults:{\r\n\t\tborderless:true\r\n\t},\r\n\t$init: function() {\r\n\t\tthis._moved = {};\r\n\t\tthis._inRight = bind(function(obj){ return this._moved[obj.id]; }, this);\r\n\t\tthis._inLeft = bind(function(obj){ return !this._moved[obj.id]; }, this);\r\n\t\r\n\t\tthis.$view.className += \" webix_dbllist\";\r\n\t\tthis.$ready.unshift(this._setLayout);\r\n\t},\r\n\t$onLoad:function(data, driver){\r\n\t\tconst left = this.$$(\"left\");\r\n\t\tconst right = this.$$(\"right\");\r\n\r\n\t\tthis._updateAndResize(function(){\r\n\t\t\tleft.data.driver = driver;\r\n\t\t\tleft.parse(data);\r\n\t\t\tright.data.driver = driver;\r\n\t\t\tright.parse(data);\r\n\t\t});\r\n\r\n\t\tthis._data_ready = true;\r\n\t\tthis._refresh();\r\n\t\treturn true;\r\n\t},\r\n\t_getButtons:function(){\r\n\t\tif (this._settings.buttons === false)\r\n\t\t\treturn { width: 10 };\r\n\r\n\t\tvar locale = i18n.dbllist;\r\n\t\tvar buttons = [\r\n\t\t\tthis._getButton(\"deselect_all\", locale.deselectAll),\r\n\t\t\tthis._getButton(\"select_all\", locale.selectAll),\r\n\t\t\tthis._getButton(\"deselect_one\", locale.deselectOne),\r\n\t\t\tthis._getButton(\"select_one\", locale.selectOne)\r\n\t\t];\r\n\r\n\r\n\t\tbuttons = { width:120, template:buttons.join(\"\"), onClick:{\r\n\t\t\tdbllist_button:function(e, id, trg){\r\n\t\t\t\tthis.getTopParentView()._update_list(trg.getAttribute(\"action\"));\r\n\t\t\t}\r\n\t\t}};\r\n\t\tif (this._settings.buttons)\r\n\t\t\tbuttons.template = this._settings.buttons;\r\n\r\n\t\treturn buttons;\r\n\t},\r\n\t_getButton: function(action, label){\r\n\t\treturn \"<button class='dbllist_button' action='\"+action+\"'>\"+label+\"</button>\";\r\n\t},\r\n\t_getList: function(id, action, label, bottom){\r\n\t\tvar list = {\r\n\t\t\tview: \"list\",\r\n\t\t\tselect: \"multiselect\",\r\n\t\t\tmultiselect: \"touch\",\r\n\t\t\tid: id,\r\n\t\t\taction: action,\r\n\t\t\tdrag: true,\r\n\t\t\ttype:{\r\n\t\t\t\tmargin:3,\r\n\t\t\t\tid:id\r\n\t\t\t},\r\n\t\t\ton: {\r\n\t\t\t\tonBeforeDrop: function(context) {\r\n\t\t\t\t\tvar source = context.from;\r\n\t\t\t\t\tvar target = context.to;\r\n\t\t\t\t\tvar top = source.getTopParentView();\r\n\r\n\t\t\t\t\tif (top === this.getTopParentView()) {\r\n\t\t\t\t\t\tvar mode = (target._settings.action != \"select_one\");\r\n\t\t\t\t\t\ttop.select(context.source, mode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tonItemDblClick: function(){\r\n\t\t\t\t\treturn this.getTopParentView()._update_list(this.config.action);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (this._settings.list)\r\n\t\t\textend(list, this._settings.list, true);\r\n\r\n\t\tif (label)\r\n\t\t\tlist = { rows:[{ view:\"label\", label:label, css:\"webix_inp_top_label\" }, list] };\r\n\t\tif (bottom)\r\n\t\t\treturn { rows:[list, { view:\"label\", height:20, label:bottom, css:\"bottom_label\" }] };\r\n\t\treturn list;\r\n\t},\r\n\t_setLayout: function() {\r\n\t\tvar cols = [{\r\n\t\t\tmargin: 10, type:\"clean\",\r\n\t\t\tcols: [\r\n\t\t\t\tthis._getList(\"left\", \"select_one\", this._settings.labelLeft, this._settings.labelBottomLeft),\r\n\t\t\t\tthis._getButtons(),\r\n\t\t\t\tthis._getList(\"right\", \"deselect_one\", this._settings.labelRight, this._settings.labelBottomRight)\r\n\t\t\t]\r\n\t\t}];\r\n\r\n\t\tthis.cols_setter(cols);\r\n\t},\r\n\t_update_list: function(action) {\r\n\t\tvar top = this;\r\n\t\tvar id = null;\r\n\t\tvar mode = false;\r\n\r\n\t\tif (action === \"select_all\"){\r\n\t\t\tid = top.$$(\"left\").data.order;\r\n\t\t\tmode = true;\r\n\t\t} else if (action === \"select_one\"){\r\n\t\t\tid = top.$$(\"left\").getSelectedId(true);\r\n\t\t\tmode = true;\r\n\t\t} else if (action === \"deselect_all\"){\r\n\t\t\tid = top.$$(\"right\").data.order;\r\n\t\t\tmode = false;\r\n\t\t} else if (action === \"deselect_one\"){\r\n\t\t\tid = top.$$(\"right\").getSelectedId(true);\r\n\t\t\tmode = false;\r\n\t\t}\r\n\r\n\t\ttop.select(id, mode);\r\n\t},\r\n\tselect:function(id, mode){\r\n\t\tvar i;\r\n\t\tif (typeof id !== \"object\") id = [id];\r\n\r\n\t\tif (mode){\r\n\t\t\tfor (i = 0; i < id.length; i++)\r\n\t\t\t\tthis._moved[id[i]] = true;\r\n\t\t} else {\r\n\t\t\tfor (i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._moved[id[i]];\r\n\t\t}\r\n\t\tthis._refresh();\r\n\t\tthis.callEvent(\"onChange\", []);\r\n\t},\r\n\t_updateAndResize:function(handler, size){\r\n\t\tfreeze(bind(handler, this), false);\r\n\t\tif (size && (this.$$(\"left\")._settings.autoheight || this.$$(\"right\")._settings.autoheight))\r\n\t\t\tthis.resize();\r\n\t},\r\n\t_refresh: function() {\r\n\t\tvar left = this.$$(\"left\");\r\n\t\tvar right = this.$$(\"right\");\r\n\r\n\t\tif (left)\r\n\t\t\tthis._updateAndResize(function(){\r\n\t\t\t\tleft.filter(this._inLeft);\r\n\t\t\t\tright.filter(this._inRight);\r\n\t\t\t}, true);\r\n\t},\r\n\tfocus:function(){\r\n\t\tif(!UIManager.canFocus(this))\r\n\t\t\treturn false;\r\n\t\tUIManager.setFocus(this);\r\n\t},\r\n\tvalue_setter:function(val){\r\n\t\tthis.setValue(val);\r\n\t},\r\n\tsetValue: function(value) {\r\n\t\tthis._moved = {};\r\n\t\tif (value){\r\n\t\t\tif (typeof value !== \"object\")\r\n\t\t\t\tvalue = value.toString().split(\",\");\r\n\r\n\t\t\tfor (var i = 0; i < value.length; i++)\r\n\t\t\t\tthis._moved[value[i]] = true;\r\n\t\t}\r\n\t\t\r\n\t\tthis._refresh();\r\n\t},\r\n\tgetValue: function() {\r\n\t\tconst value = [];\r\n\t\tconst list = this.$$(\"left\");\r\n\r\n\t\tfor (var key in this._moved){\r\n\t\t\tif (!this._data_ready || list.data.pull[key])\r\n\t\t\t\tvalue.push(key);\r\n\t\t}\r\n\r\n\t\treturn value.join(\",\");\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  AtomDataLoader, IdSpace, layout.view);\r\nexport default {api, view};","import proto from \"../views/proto\";\r\nimport Group from \"../core/group\";\r\nimport TreeAPI from \"../core/treeapi\";\r\nimport DragItem from \"../core/dragitem\";\r\nimport TreeDataMove from \"../core/treedatamove\";\r\nimport SelectionModel from \"../core/selectionmodel\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport TreeDataLoader from \"../core/treedataloader\";\r\nimport TreeRenderStack from \"../core/treerenderstack\";\r\nimport CopyPaste from \"../core/copypaste\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport type from \"../webix/type\";\r\nimport template from \"../webix/template\";\r\nimport TreeStore from \"../core/treestore\";\r\nimport TreeClick from \"../core/treeclick\";\r\nimport TreeType from \"../core/treetype\";\r\nimport TreeStateCheckbox from \"../core/treestatecheckbox\";\r\n\r\nimport {createCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend, isArray} from \"../webix/helpers\";\r\nimport DragControl from \"../core/dragcontrol\";\r\n\r\n\r\nconst api = {\r\n\tname:\"tree\",\r\n\tdefaults:{\r\n\t\tscroll:\"auto\",\r\n\t\tnavigation:true\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className += \" webix_tree\";\r\n\r\n\t\t//map API of DataStore on self\r\n\t\textend(this.data, TreeStore, true);\r\n\t\textend(this.on_click, TreeClick);\r\n\t\tthis.data.provideApi(this,true);\r\n\t\tthis._viewobj.setAttribute(\"role\", \"tree\");\r\n\t},\r\n\t//attribute , which will be used for ID storing\r\n\t_id:/*@attr*/\"webix_tm_id\",\r\n\t//supports custom context menu\r\n\ton_context:{},\r\n\ton_dblclick:{\r\n\t\twebix_tree_checkbox:function(){\r\n\t\t\tif(this.on_click.webix_tree_checkbox)\r\n\t\t\t\treturn this.on_click.webix_tree_checkbox.apply(this,arguments);\r\n\t\t}\r\n\t},\r\n\t$fixEditor: function(editor) {\r\n\t\tvar item = this.getItemNode(editor.id).querySelector(\"span\");\r\n\t\tif (item){\r\n\t\t\tif (item.innerHTML === \"\") item.innerHTML =\"&nbsp;\";\r\n\t\t\tvar padding = 10;\r\n\t\t\tvar pos = item.offsetLeft;\r\n\t\t\teditor.node.style.width = this.$view.scrollWidth - pos - padding + \"px\";\r\n\t\t\teditor.node.style.marginLeft = pos + \"px\";\r\n\t\t\teditor.node.style.left = \"0px\";\r\n\t\t}\r\n\t},\r\n\t//css class to action map, for onclick event\r\n\ton_click:{\r\n\t\twebix_tree_item:function(e, id){\r\n\t\t\tif(this._settings.activeTitle){\r\n\t\t\t\tvar item = this.getItem(id);\r\n\t\t\t\tif(item.open)\r\n\t\t\t\t\tthis.close(id);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.open(id);\r\n\t\t\t}\r\n\t\t\tif (this._settings.select){\r\n\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect){\r\n\t\t\t\t\tvar multimode = (e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\"));\r\n\t\t\t\t\tif (this._settings.multiselect == \"level\" && (multimode || e.shiftKey)){\r\n\t\t\t\t\t\t//allow only selection on the same level\r\n\t\t\t\t\t\tvar select = this.getSelectedId(true)[0];\r\n\t\t\t\t\t\tif (select && this.getParentId(id) != this.getParentId(select)) \r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.select(id, false, multimode, e.shiftKey); \t//multiselection\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.select(id);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_paste: {\r\n\t\t// insert new item with pasted value\r\n\t\tinsert: function(text) {\r\n\t\t\tvar parent = this.getSelectedId() ||\"0\" ;\r\n\t\t\tthis.add({ value: text }, null, parent);\r\n\t\t},\r\n\t\t// change value of each selected item\r\n\t\tmodify: function(text) {\r\n\t\t\tvar sel = this.getSelectedId(true);\r\n\t\t\tfor (var i = 0; i < sel.length; i++) {\r\n\t\t\t\tthis.getItem(sel[i]).value = text;\r\n\t\t\t\tthis.refresh(sel[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// do nothing\r\n\t\tcustom: function() {}\r\n\t},\r\n\t_drag_order_complex:true,\r\n\t$dragHTML:function(obj,e,context){\r\n\t\tlet html = \"<div class='webix_tree_item'>\"+this.type.template(obj, this.type)+\"</div>\";\r\n\t\tif ( isArray(context.source) && context.source.length > 1 )\r\n\t\t\thtml = this._toMultipleHTML(html, context.source.length);\r\n\t\treturn html;\r\n\t},\r\n\t_close_branches:function(context){\r\n\t\tlet source = context.source;\r\n\t\tfor (let i=0; i<source.length; i++)\r\n\t\t\tthis.close(source[i]);\r\n\t},\r\n\t_set_drop_area:function(target, t){\r\n\t\tlet node = this.getItemNode(target);\r\n\t\tif (node){\r\n\t\t\tnode.parentNode.insertBefore(DragControl._dropHTML[0], node);\r\n\t\t} else t.children[0].children[0].appendChild(DragControl._dropHTML[0]);\r\n\t},\r\n\t\r\n\t//css class to action map, for dblclick event\r\n\ttype:extend({\r\n\t\t//normal state of item\r\n\t\ttemplate:function(obj,common){\r\n\t\t\tvar template = common[\"template\"+obj.level]||common.templateCommon;\r\n\t\t\treturn template.apply(this, arguments);\r\n\t\t},\r\n\t\tclassname:function(obj, common, marks){\r\n\t\t\tvar css = \"webix_tree_item\";\r\n\r\n\t\t\tif (obj.$css){\r\n\t\t\t\tif (typeof obj.$css == \"object\")\r\n\t\t\t\t\tobj.$css = createCss(obj.$css);\r\n\t\t\t\tcss += \" \"+obj.$css;\r\n\t\t\t}\r\n\t\t\tif (marks && marks.$css)\r\n\t\t\t\tcss += \" \"+marks.$css;\r\n\t\t\tif (common.css)\r\n\t\t\t\tcss += \" \"+common.css;\r\n\r\n\t\t\treturn css;\r\n\t\t},\r\n\t\taria:function(obj, common, marks){\r\n\t\t\treturn \"role=\\\"treeitem\\\"\"+(marks && marks.webix_selected?\" aria-selected=\\\"true\\\" tabindex=\\\"0\\\"\":\" tabindex=\\\"-1\\\"\")+\r\n\t\t\t\t(obj.$count?(\"aria-expanded=\\\"\"+(obj.open?\"true\":\"false\")+\"\\\"\"):\"\")+\"aria-level=\\\"\"+obj.$level+\"\\\"\";\r\n\t\t},\r\n\t\ttemplateCommon:template(\"{common.icon()} {common.folder()} <span>#value#</span>\"),\r\n\t\ttemplateStart:template(\"<div \"+/*@attr*/\"webix_tm_id\"+\"=\\\"#id#\\\" class=\\\"{common.classname()}\\\" {common.aria()}>\"),\r\n\t\ttemplateEnd:template(\"</div>\"),\r\n\t\ttemplateCopy: template(\"#value#\")\r\n\t}, TreeType)\r\n};\r\n\r\n\r\nconst view = protoUI(api, TreeStateCheckbox, Group, TreeAPI, DragItem, TreeDataMove, SelectionModel, KeysNavigation, MouseEvents, Scrollable, TreeDataLoader, proto.view, TreeRenderStack, CopyPaste, EventSystem);\r\nexport default {api, view};\r\n\r\ntype(view, {\r\n\tname:\"lineTree\",\r\n\tcss:\"webixLineTree\",\r\n\ticon:function(obj, common){\r\n\t\tvar html = \"\";\r\n\t\tvar open = \"\";\r\n\t\tfor (var i=1; i<=obj.$level; i++){\r\n\t\t\tif (i==obj.$level)\r\n\t\t\t\topen = (obj.$count?(obj.open?\"webix_tree_open \":\"webix_tree_close \"):\"webix_tree_none \");\r\n\r\n\t\t\tvar icon = common._icon_src(obj, common, i);\r\n\t\t\tif (icon)\r\n\t\t\t\thtml+=\"<div class='\"+open+\"webix_tree_img webix_tree_\"+icon+\"'></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\t_icon_src:function(obj, common, level){\r\n\t\tvar lines = common._tree_branch_render_state; \r\n\t\tvar tree = TreeRenderStack._obj;\r\n\r\n\t\tif (lines === 0 && tree){\r\n\t\t\t//we are in standalone rendering \r\n\t\t\t//need to reconstruct rendering state\r\n\t\t\tvar lines_level = obj.$level;\r\n\t\t\tvar branch_id = obj.id;\r\n\r\n\t\t\tlines = [];\r\n\t\t\twhile (lines_level){\r\n\t\t\t\tvar parent_id = tree.getParentId(branch_id);\r\n\t\t\t\tvar pbranch = tree.data.branch[parent_id];\r\n\t\t\t\tif (pbranch[pbranch.length-1] == branch_id)\r\n\t\t\t\t\tlines[lines_level] = true;\t\r\n\r\n\t\t\t\tbranch_id = parent_id;\r\n\t\t\t\tlines_level--;\r\n\t\t\t}\r\n\r\n\t\t\t//store for next round\r\n\t\t\tcommon._tree_branch_render_state = lines;\r\n\t\t}\r\n\t\tif (!lines)\r\n\t\t\treturn 0;\r\n\t\t//need to be replaced with image urls\r\n\t\tif (level == obj.$level){\r\n\t\t\tvar mode = 3; //3-way line\r\n\t\t\tif (!obj.$parent){ //top level\r\n\t\t\t\tif (obj.$index === 0)\r\n\t\t\t\t\tmode = 4; //firts top item\r\n\t\t\t}\r\n\r\n\t\t\tif (lines[obj.$level])\r\n\t\t\t\tmode = 2;\r\n\r\n\t\t\tif (obj.$count){\r\n\t\t\t\tif (obj.open)\r\n\t\t\t\t\treturn \"minus\"+mode;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn \"plus\"+mode;\r\n\t\t\t} else\r\n\t\t\t\treturn \"line\"+mode;\r\n\t\t} else {\r\n\t\t\tif (!lines[level])\r\n\t\t\t\treturn \"line1\";\r\n\t\t\treturn \"blank\";\r\n\t\t}\r\n\t}\r\n});","import proto from \"../views/proto\";\r\nimport Group from \"../core/group\";\r\nimport TreeAPI from \"../core/treeapi\";\r\nimport SelectionModel from \"../core/selectionmodel\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport TreeDataLoader from \"../core/treedataloader\";\r\nimport TreeRenderStack from \"../core/treerenderstack\";\r\nimport CopyPaste from \"../core/copypaste\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport {insertBefore, remove, locate, createCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\nimport {extend, bind, copy} from \"../webix/helpers\";\r\nimport i18n from \"../webix/i18n\";\r\nimport TreeStore from \"../core/treestore\";\r\n\r\n\r\nconst api = {\r\n\tname: \"treemap\",\r\n\tdefaults: {\r\n\t\tactiveItem: false,\r\n\t\tsubRender: true,\r\n\t\theader: true,\r\n\t\theaderHeight: 35,\r\n\t\tvalue: template(\"#value#\"),\r\n\t\theaderTemplate: \"\",\r\n\t\tnavigation:true\r\n\t},\r\n\tvalue_setter: template,\r\n\theaderTemplate_setter: template,\r\n\theader_setter: function(value){\r\n\t\tif(value && value !== true){\r\n\t\t\tthis.type.header = value;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t$init: function(){\r\n\t\tthis.$view.className += \" webix_treemap\";\r\n\t\tthis._viewobj.setAttribute(\"role\", \"tree\");\r\n\r\n\t\tthis._htmlElement = document.createElement(\"DIV\");\r\n\r\n\t\textend(this.data, TreeStore, true);\r\n\t\tthis.data.provideApi(this,true);\r\n\r\n\t\tthis.data.attachEvent(\"onClearAll\", bind(function(){\r\n\t\t\tthis._html = \"\";\r\n\t\t\tthis.$values = {};\r\n\t\t\tthis.$xy = {};\r\n\t\t},this));\r\n\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t},\r\n\t_toHTMLItem:function(obj){\r\n\t\tvar mark = this.data._marks[obj.id];\r\n\t\tthis.callEvent(\"onItemRender\",[obj]);\r\n\t\tvar template = (obj.$template?this.type[\"template\"+obj.$template].call(this,obj,this.type,mark):this.type.template.call(this,obj,this.type,mark));\r\n\t\treturn this.type.templateStart.call(this,obj,this.type,mark) + template + this.type.templateEnd.call(this);\r\n\t},\r\n\t_renderHeader: function(id){\r\n\t\tvar item = this.getItem(id);\r\n\t\tvar height = this._settings.headerHeight;\r\n\t\tvar html = \"<div class='webix_treemap_header' style='height:\"+height+\"px;line-height:\"+height+\"px;'>\";\r\n\t\thtml += this.type.header.call(this, item, this.type);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t},\r\n\t_renderBranch:function(pId){\r\n\t\tvar sizes, row, value, sum,\r\n\t\t\tleaves = [];\r\n\r\n\t\tif(!this.$width || !this.count()){\r\n\t\t\tthis._html = \"\";\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(!pId){\r\n\t\t\tpId = this.config.branch||0;\r\n\t\t\tthis._html = \"\";\r\n\t\t\tthis.$values = {};\r\n\t\t\tthis.$xy = {};\r\n\t\t\tthis.$xy[pId] = {\r\n\t\t\t\twidth: this.$width,\r\n\t\t\t\theight: this.$height,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t};\r\n\t\t\t// header\r\n\t\t\tif(pId && this._settings.header){\r\n\t\t\t\tthis.$xy[pId].height -= this._settings.headerHeight;\r\n\t\t\t\tthis.$xy[pId].top = this._settings.headerHeight;\r\n\t\t\t\tthis._html += this._renderHeader(pId);\r\n\t\t\t}\r\n\r\n\t\t\t// values calculation\r\n\t\t\tsum = 0;\r\n\t\t\tthis.data.each(function(item){\r\n\t\t\t\tvar parentId = this.getParentId(item.id);\r\n\t\t\t\tif(!this.data.branch[item.id]){\r\n\t\t\t\t\tvalue = this.config.value.call(this,item)*1;\r\n\t\t\t\t\tif(!isNaN(value) && value){\r\n\t\t\t\t\t\tthis.$values[item.id] = value;\r\n\t\t\t\t\t\tsum += value;\r\n\t\t\t\t\t\twhile(parentId){\r\n\t\t\t\t\t\t\tif(!this.$values[parentId])\r\n\t\t\t\t\t\t\t\tthis.$values[parentId] = 0;\r\n\t\t\t\t\t\t\tthis.$values[parentId] +=  value;\r\n\t\t\t\t\t\t\tparentId = this.getParentId(parentId);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this, false, pId);\r\n\t\t}\r\n\r\n\t\tthis.data.eachChild(pId, function(item){\r\n\t\t\tif(this.$values[item.id])\r\n\t\t\t\tleaves.push(copy(item));\r\n\t\t}, this);\r\n\r\n\t\tsum = sum || this.$values[pId];\r\n\r\n\t\tif(leaves.length && sum){\r\n\t\t\tsizes = this.$xy[pId];\r\n\t\t\trow ={ top: sizes.top, left:sizes.left, dx: sizes.width, dy: sizes.height, set:[], sum:0 };\r\n\t\t\trow.dim = Math.min(row.dx,row.dy);\r\n\t\t\tlet delta = row.dx*row.dy/sum; //total area\r\n\t\t\tfor (let i=0; i< leaves.length; i++)\r\n\t\t\t\tleaves[i].$value = this.$values[leaves[i].id]*delta; //normalized value\r\n\r\n\r\n\t\t\tleaves.sort(function(a,b){\r\n\t\t\t\treturn a.$value >b.$value?-1:1;\r\n\t\t\t});\r\n\r\n\t\t\tvar bad = Infinity;\r\n\t\t\tlet i = 0;\r\n\t\t\twhile(leaves[i]){\r\n\t\t\t\tvar check=this._worst(row, leaves[i]);\r\n\t\t\t\tif (check<bad){\r\n\t\t\t\t\trow.sum += leaves[i].$value;\r\n\t\t\t\t\trow.set.push(leaves[i]);\r\n\t\t\t\t\tbad=check;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._renderRow(row);\r\n\t\t\t\t\tvar r = { top:row.top, left:row.left, dx:row.dx, dy:row.dy, set:[], sum:0 };\r\n\t\t\t\t\tlet delta = row.sum/row.dim;\r\n\t\t\t\t\tif (row.dx > row.dy){\r\n\t\t\t\t\t\tr.left += delta;\r\n\t\t\t\t\t\tr.dx -= delta;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tr.top += delta;\r\n\t\t\t\t\t\tr.dy -= delta;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow=r;\r\n\t\t\t\t\trow.dim = Math.min(row.dx,row.dy);\r\n\t\t\t\t\tbad=Infinity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(row)\r\n\t\t\tthis._renderRow(row);\r\n\t},\r\n\t_renderRow:function(row){\r\n\t\tvar i, id, x, y,\r\n\t\t\ttop=row.top,\r\n\t\t\tleft=row.left;\r\n\r\n\t\trow.mode=(row.dy<row.dx);\r\n\t\trow.contra=(row.sum/row.dim);\r\n\r\n\t\tfor (i=0; i<row.set.length; i++){\r\n\t\t\tid=row.set[i].id;\r\n\t\t\tif (row.mode){\r\n\t\t\t\tx=row.contra;\r\n\t\t\t\ty=row.set[i].$value/row.contra;\r\n\t\t\t} else {\r\n\t\t\t\tx=row.set[i].$value/row.contra;\r\n\t\t\t\ty=row.contra;\r\n\t\t\t}\r\n\t\t\tthis.$xy[id] = {};\r\n\t\t\tthis.$xy[id].top = top;\r\n\t\t\tthis.$xy[id].left = left;\r\n\t\t\tif (row.mode)\r\n\t\t\t\ttop += y;\r\n\t\t\telse\r\n\t\t\t\tleft += x;\r\n\r\n\t\t\tthis.$xy[id].width = x;\r\n\t\t\tthis.$xy[id].height = y;\r\n\r\n\t\t\tthis._html += this._toHTMLItem(this.getItem(id));\r\n\t\t\tif(this._settings.subRender && this.data.branch[id])\r\n\t\t\t\tthis._renderBranch(id);\r\n\t\t}\r\n\t},\r\n\t_worst:function(row, add){\r\n\t\tvar s = row.sum + add.$value;\r\n\t\tvar a = (s*s) /( row.dim*row.dim*add.$value);\r\n\t\tif (row.set.length){\r\n\t\t\ta=Math.max(row.dim*row.dim*row.set[0].$value/(s*s),a);\r\n\t\t}\r\n\t\treturn a>1?a:(1/a);\r\n\t},\r\n\t_toHTMLObject:function(obj){\r\n\t\tthis._htmlElement.innerHTML = this._toHTMLItem(obj);\r\n\t\treturn this._htmlElement.firstChild;\r\n\t},\r\n\tshowBranch: function(id){\r\n\t\tthis._settings.branch = id;\r\n\t\tthis.refresh();\r\n\t},\r\n\trender:function(id,data,type){\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\r\n\t\tif(type == \"update\"){\r\n\t\t\tvar cont = this.getItemNode(id); //get html element of updated item\r\n\t\t\tif(cont){\r\n\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\t\tinsertBefore(t, cont);\r\n\t\t\t\tremove(cont);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.data.branch && (!this._settings.branch || this.data.branch[this._settings.branch])){\r\n\t\t\tthis._htmlmap = null;\r\n\t\t\tthis.callEvent(\"onBeforeRender\",[]);\r\n\t\t\tthis._renderBranch();\r\n\t\t\tthis._dataobj.innerHTML = this._html;\r\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_id:/*@attr*/\"webix_dm_id\",\r\n\ton_click:{\r\n\t\twebix_treemap_item:function(e,id){\r\n\t\t\tif (this._settings.select){\r\n\t\t\t\tif (this._settings.select==\"multiselect\"  || this._settings.multiselect)\r\n\t\t\t\t\tthis.select(id, false, (e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\")), e.shiftKey);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.select(id);\r\n\t\t\t}\r\n\t\t\tif(this._settings.activeItem && this.isBranch(id)){\r\n\t\t\t\tthis.showBranch(id);\r\n\t\t\t}\r\n\t\t},\r\n\t\twebix_treemap_header_item: function(e){\r\n\t\t\tvar id = locate(e, /*@attr*/\"webix_dm_header_id\");\r\n\t\t\tthis.define(\"branch\", id);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\t\twebix_treemap_reset: function(){\r\n\t\t\tthis.define(\"branch\", 0);\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t},\r\n\ton_mouse_move:{\r\n\t},\r\n\t_getCssText: function(style){\r\n\t\tvar css = \"\";\r\n\t\tfor(var property in style){\r\n\t\t\tcss += property+\":\"+style[property]+\";\";\r\n\t\t}\r\n\t\treturn css;\r\n\t},\r\n\ttype:{\r\n\t\t//normal state of item\r\n\t\ttemplate:template(\"#value#\"),\r\n\t\theader: function(obj, common){\r\n\t\t\tvar id = obj.id;\r\n\t\t\tvar resetIcon = \"<div role='button' tabindex='0' aria-label='\"+i18n.aria.resetTreeMap+\"' class='webix_treemap_reset'></div>\";\r\n\t\t\tvar arr = [];\r\n\t\t\twhile(id){\r\n\t\t\t\tobj = this.getItem(id);\r\n\t\t\t\tarr.push(common.headerItem.call(this, obj, common));\r\n\t\t\t\tid = this.getParentId(id);\r\n\t\t\t}\r\n\t\t\tarr.reverse();\r\n\t\t\treturn resetIcon + arr.join(\"<span class='webix_icon wxi-angle-right webix_treemap_path_icon'></span>\");\r\n\t\t},\r\n\t\theaderItem: function(obj){\r\n\t\t\tvar template = this.config.headerTemplate(obj);\r\n\t\t\tvar html = \"<a role=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"\"+template+\"\\\" \"+/*@attr*/\"webix_dm_header_id\"+\"=\\\"\"+obj.id+\"\\\" class=\\\"webix_treemap_header_item\\\">\";\r\n\t\t\thtml += template;\r\n\t\t\thtml += \"</a>\";\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tclassname:function(obj, common, marks){\r\n\t\t\tvar css = \"webix_treemap_item\";\r\n\r\n\t\t\tif (common.css) css += \" \"+common.css;\r\n\r\n\t\t\tif (obj.$css){\r\n\t\t\t\tif (typeof obj.$css == \"object\")\r\n\t\t\t\t\tobj.$css = createCss(obj.$css);\r\n\t\t\t\tcss +=\" \"+obj.$css;\r\n\t\t\t}\r\n\r\n\t\t\tvar xy = this.$xy[obj.id];\r\n\r\n\t\t\tif (marks && marks.$css) css +=\" \"+marks.$css;\r\n\r\n\t\t\tcss += \" webix_treemap_level_\" + this.getItem(obj.id).$level;\r\n\r\n\t\t\tvar parentId = this.getParentId(obj.id);\r\n\r\n\t\t\tif(!parentId || parentId == this._settings.branch)\r\n\t\t\t\tcss += \" webix_treemap_level_top\";\r\n\r\n\t\t\tif(this.$height - xy.top - xy.height < 1)\r\n\t\t\t\tcss += \" webix_treemap_item_bottom\";\r\n\r\n\t\t\tif(this.$width - xy.left - xy.width   < 1)\r\n\t\t\t\tcss += \" webix_treemap_item_right\";\r\n\r\n\t\t\tif(common.cssClass){\r\n\t\t\t\tvar cssClass = common.cssClass.call(this, obj, common, marks);\r\n\t\t\t\tif(cssClass){\r\n\t\t\t\t\tif(typeof cssClass == \"object\"){\r\n\t\t\t\t\t\tcss += \" \"+ createCss(cssClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcss += \" \"+cssClass;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn css;\r\n\t\t},\r\n\t\ttemplateStart:function(obj,type,marks){\r\n\t\t\tvar style=\"\";\r\n\t\t\tif(this.$xy){\r\n\t\t\t\tvar xy = this.$xy[obj.id];\r\n\t\t\t\tstyle += \"width: \"+ xy.width +\"px; height: \" + xy.height+\"px;\";\r\n\t\t\t\tstyle += \"top: \"+ xy.top+\"px; left: \" + xy.left+\"px;\";\r\n\t\t\t}\r\n\t\t\treturn \"<div role=\\\"treeitem\\\" aria-level=\\\"\"+obj.$level+\"\\\" \"+(marks && marks.webix_selected?\"aria-selected=\\\"true\\\" tabindex=\\\"0\\\"\":\"\")+\" \"+/*@attr*/\"webix_dm_id\"+\"=\\\"\"+obj.id+\"\\\" class=\\\"\"+type.classname.call(this,obj,type,marks)+\"\\\" style=\\\"\"+style+\"\\\">\";\r\n\t\t},\r\n\t\ttemplateEnd:template(\"</div>\")\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, Group, TreeAPI, SelectionModel, KeysNavigation, MouseEvents, Scrollable, TreeDataLoader, proto.view, TreeRenderStack, CopyPaste, EventSystem);\r\nexport default {api, view};","import {create, remove, createCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend, bind, delay} from \"../webix/helpers\";\r\n\r\nimport template from \"../webix/template\";\r\nimport env from \"../webix/env\";\r\n\r\nimport base from \"../views/view\";\r\nimport proto from \"../views/proto\";\r\n\r\nimport DataMove from \"../core/datamove\";\r\nimport DragItem from \"../core/dragitem\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport SelectionModel from \"../core/selectionmodel\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport CustomPrint from \"../core/customprint\";\r\nimport VirtualRenderStack from \"../core/virtualrenderstack\";\r\n\r\n\r\n/*\r\n\tUI:DataView\r\n*/\r\n\r\n// #include ui/component.js\r\n// #include core/mouse.js \t\r\n// #include core/edit.js \r\n// #include core/selection.js \r\n\r\n// #include core/drag.js\r\n// #include core/move.js\r\n// #include core/virtual_render.js\r\n// #include core/keynav.js\r\n// #include core/print.js\r\n\r\nconst api = {\r\n\tname:\"dataview\",\r\n\t$init:function(config){\r\n\t\tif (config.sizeToContent)\r\n\t\t\t//method need to be called before data-loaders\r\n\t\t\t//so we are using unshift to place it at start\r\n\t\t\tthis.$ready.unshift(this._after_init_call);\r\n\t\t\r\n\t\tvar type = config.type || config.item;\r\n\t\tvar prerender = config.prerender || this.defaults.prerender || (type && type.width ==\"auto\") || config.drag == \"move\" || config.drag == \"order\";\r\n\t\t\r\n\t\tif (!prerender && !config.autoheight)\r\n\t\t\textend(this, VirtualRenderStack, true);\r\n\t\tif (config.autoheight)\r\n\t\t\tconfig.scroll = false;\r\n\r\n\t\tif (type && type.type == \"tiles\"){\r\n\t\t\tthis._tilesPadding = type.padding || this.type.padding;\r\n\t\t\tthis._viewobj.firstChild.style.float = \"left\";\r\n\t\t\tthis._viewobj.firstChild.style.padding = (this._tilesPadding/2) + \"px\";\r\n\t\t}\r\n\r\n\t\tthis._contentobj.className += \" webix_dataview\";\r\n\t\tthis._viewobj.setAttribute(\"role\", \"listbox\");\r\n\t},\r\n\t_after_init_call:function(){\r\n\t\tconst test = create(\"DIV\",0,this.type.template({}));\r\n\t\ttest.className = \"webix_dataview_item\";\r\n\t\ttest.style.position = \"absolute\";\r\n\t\tdocument.body.appendChild(test);\r\n\r\n\t\tthis.type.width = test.offsetWidth + this._tilesPadding;\r\n\t\tthis.type.height = test.offsetHeight + this._tilesPadding;\r\n\r\n\t\tremove(test);\r\n\t},\r\n\tdefaults:{\r\n\t\tscroll:true,\r\n\t\tdatafetch:50,\r\n\t\tnavigation:true\r\n\t},\r\n\t_id:/*@attr*/\"webix_l_id\",\r\n\t_itemClassName:\"webix_dataview_item\",\r\n\t_tilesPadding:0,\r\n\t_drag_direction:\"x\",\r\n\ton_click:{\r\n\t\twebix_dataview_item:function(e,id){\r\n\t\t\tif (this._settings.select){\r\n\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect)\r\n\t\t\t\t\tthis.select(id, false, ((this._settings.multiselect == \"touch\") || e.ctrlKey || e.metaKey), e.shiftKey); \t//multiselection\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.select(id);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t},\r\n\ton_mouse_move:{\r\n\t},\r\n\ttype:{\r\n\t\t//normal state of item\r\n\t\ttemplate:template(\"#value#\"),\r\n\t\t//in case of dyn. loading - temporary spacer\r\n\t\ttemplateLoading:template(\"Loading...\"),\r\n\t\twidth:160,\r\n\t\theight:50,\r\n\t\tpadding:8,\r\n\t\tclassname:function(obj, common, marks){\r\n\t\t\tvar css = \"webix_dataview_item\";\r\n\r\n\t\t\tif (common.css) css += \" \"+common.css;\r\n\t\t\tif (common.type) css += \" \"+common.type;\r\n\t\t\tif (obj.$css){\r\n\t\t\t\tif (typeof obj.$css == \"object\")\r\n\t\t\t\t\tobj.$css = createCss(obj.$css);\r\n\t\t\t\tcss += \" \"+obj.$css;\r\n\t\t\t}\r\n\t\t\tif (marks && marks.$css) css += \" \"+marks.$css;\r\n\t\t\t\r\n\t\t\treturn css;\r\n\t\t},\r\n\t\taria:function(obj, common, marks){\r\n\t\t\treturn \"role=\\\"option\\\"\"+(marks && marks.webix_selected?\" aria-selected=\\\"true\\\" tabindex=\\\"0\\\"\":\" tabindex=\\\"-1\\\"\");\r\n\t\t},\r\n\t\ttemplateStart:function(obj, common, marks){\r\n\t\t\tlet {width, height} = common;\r\n\t\t\tlet padding = 0;\r\n\r\n\t\t\tif (common.type == \"tiles\"){\r\n\t\t\t\twidth -= common.padding;\r\n\t\t\t\theight -= common.padding;\r\n\t\t\t\tpadding = common.padding / 2;\r\n\t\t\t}\r\n\t\t\treturn \"<div \"+/*@attr*/\"webix_l_id=\\\"\"+obj.id+\"\\\" class=\\\"\"+common.classname(obj,common,marks)+\"\\\" \"+\r\n\t\t\t\tcommon.aria(obj,common,marks)+\" style=\\\"margin:\"+padding+\"px; width:\"+width+\"px; height:\"+height+\"px; float:left; overflow:hidden;\\\">\";\r\n\t\t},\r\n\t\ttemplateEnd:template(\"</div>\")\r\n\t},\r\n\t$dropHTML:function(){\r\n\t\tconst p = this._tilesPadding;\r\n\t\treturn `<div class=\"webix_drop_area_inner\" style=\"width:${this.type.width-p}px; height:${this.type.height-p}px; margin:${p/2}px\"></div>`;\r\n\t},\r\n\t_calck_autoheight:function(width){\r\n\t\treturn (this._settings.height = this.type.height * Math.ceil( this.data.count() / Math.floor(width / this.type.width)));\r\n\t},\r\n\tautoheight_setter:function(mode){\r\n\t\tif (mode){\r\n\t\t\tthis.data.attachEvent(\"onStoreLoad\", bind(this.resize, this));\r\n\t\t\tthis._contentobj.style.overflowY = \"hidden\";\r\n\t\t}\r\n\t\treturn mode;\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tif (this._settings.xCount && this.type.width != \"auto\" && !this._autowidth)\r\n\t\t\tthis._settings.width = this.type.width*this._settings.xCount + this._tilesPadding + (this._scroll_y?env.scrollSize:0);\r\n\t\tif (this._settings.yCount && this.type.height != \"auto\" && !this._autoheight)\r\n\t\t\tthis._settings.height = this.type.height*this._settings.yCount + this._tilesPadding;\r\n\r\n\t\tvar width = this._settings.width || this._content_width;\r\n\t\tif (this._settings.autoheight && width){\r\n\t\t\tthis._recalk_counts();\r\n\t\t\tthis._calck_autoheight(width);\r\n\t\t\tthis.scroll_setter(false);\r\n\t\t}\r\n\t\treturn base.api.$getSize.call(this, dx, dy);\r\n\t},\r\n\t_recalk_counts:function(){\r\n\t\tif (this._settings.yCount && (this._autoheight || this.type.height == \"auto\")){\r\n\t\t\tthis.type.height = Math.floor((this._content_height-this._tilesPadding)/this._settings.yCount);\r\n\t\t\tthis._autoheight = this._settings.yCount;\r\n\t\t}\r\n\t\tif (this._settings.xCount && (this._autowidth || this.type.width == \"auto\")){\r\n\t\t\tthis.type.width = Math.floor((this._content_width-this._tilesPadding)/this._settings.xCount);\r\n\t\t\tthis._autowidth = this._settings.xCount;\r\n\t\t}\r\n\r\n\t\treturn this._autoheight||this._autowidth;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tconst c = this._settings;\r\n\r\n\t\tif (base.api.$setSize.call(this, x, y)){\r\n\t\t\tif (c.autoheight && this._calck_autoheight() != this._content_height)\r\n\t\t\t\treturn delay(this.resize, this);\r\n\r\n\t\t\tif (this._recalk_counts() || this._render_visible_rows)\r\n\t\t\t\tthis.render();\r\n\r\n\t\t} else if ((c.yCount && c.yCount != this._autoheight) || (c.xCount && c.xCount != this._autowidth)){\r\n\t\t\tif (this._recalk_counts())\r\n\t\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, DataMove, DragItem, MouseEvents, KeysNavigation, SelectionModel, Scrollable, CustomPrint, proto.view);\r\nexport default {api, view};","import {addCss, insertBefore, removeCss} from \"../webix/html\";\r\nimport {protoUI, ui} from \"../ui/core\";\r\nimport {delay, extend, bind} from \"../webix/helpers\";\r\nimport animate from \"../webix/animate\";\r\n\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport SingleRender from \"../core/singlerender\";\r\nimport EventSystem from \"../core/eventsystem\";\r\n\r\nimport base from \"../views/view\";\r\nimport template from \"../webix/template\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\n\r\n\r\ni18n.pager = {\r\n\tfirst: \"<span class='webix_icon wxi-angle-double-left'></span>\",\r\n\tlast: \"<span class='webix_icon wxi-angle-double-right'></span>\",\r\n\tnext: \"<span class='webix_icon wxi-angle-right'></span>\",\r\n\tprev: \"<span class='webix_icon wxi-angle-left'></span>\"\r\n};\r\n\r\n\r\nconst api = {\r\n\tdefaults:{\r\n\t\tsize:10,\t//items on page\r\n\t\tpage: 0,\t//current page\r\n\t\tgroup:5,\r\n\t\ttemplate:\"{common.pages()}\",\r\n\t\tmaxWidth:100000,\r\n\t\theight:30,\r\n\t\tborderless:true\r\n\t},\r\n\tname:\"pager\",\r\n\ton_click:{\r\n\t\t//on paging button click\r\n\t\t\"webix_pager_item\":function(e,id){\r\n\t\t\tthis.select(id);\r\n\t\t}\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.data = this._settings;\r\n\t\tthis._dataobj = this._viewobj;\r\n\t\tthis._viewobj.className += \" webix_pager\"+(config.autowidth?\" webix_pager_auto\":\"\");\r\n\r\n\t\tif(config.master===false||config.master === 0)\r\n\t\t\tthis.$ready.push(this._remove_master);\r\n\t},\r\n\t_remove_master:function(){\r\n\t\tthis.refresh();\r\n\t\tthis.$master = { refresh:function(){}, select:function(){} };\r\n\t},\r\n\tselect:function(id){\r\n\t\tif (this.$master && this.$master.name == \"pager\")\r\n\t\t\treturn this.$master.select(id);\r\n\r\n\t\t//id - id of button, number for page buttons\r\n\t\tswitch(id){\r\n\t\t\tcase \"next\":\r\n\t\t\t\tid = this._settings.page+1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"prev\":\r\n\t\t\t\tid = this._settings.page-1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"first\":\r\n\t\t\t\tid = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"last\":\r\n\t\t\t\tid = this._settings.limit-1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t//use incoming id\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (id<0) id=0;\r\n\t\tif (id>=this.data.limit) id=this.data.limit-1;\r\n\r\n\t\tvar old = this.data.page;\r\n\t\tif (this.callEvent(\"onBeforePageChange\",[id, old])){\r\n\t\t\tthis.data.page = id*1; //must be int\r\n\t\t\tif (this.refresh()){\r\n\t\t\t\tif (!this._settings.animate || !this._animate(old, id*1, this._settings.animate))\r\n\t\t\t\t\tthis.$master.refresh();\r\n\t\t\t}\r\n\t\t\tthis.callEvent(\"onAfterPageChange\",[id]);\t\r\n\t\t}\r\n\t},\r\n\t_id:/*@attr*/\"webix_p_id\",\r\n\ttemplate_setter:template,\r\n\ttype:{\r\n\t\ttemplate:function(a,b){ return a.template.call(this, a,b); },\r\n\t\t//list of page numbers\r\n\t\tpages:function(obj){\r\n\t\t\tvar html=\"\";\r\n\t\t\t//skip rendering if paging is not fully initialized\r\n\t\t\tif (obj.page == -1) return \"\";\r\n\t\t\t//current page taken as center of view, calculate bounds of group\r\n\t\t\tobj.$min = obj.page-Math.round((obj.group-1)/2);\r\n\t\t\tobj.$max = obj.$min + obj.group*1 - 1;\r\n\t\t\tif (obj.$min<0){\r\n\t\t\t\tobj.$max+=obj.$min*(-1);\r\n\t\t\t\tobj.$min=0;\r\n\t\t\t}\r\n\t\t\tif (obj.$max>=obj.limit){\r\n\t\t\t\tobj.$min -= Math.min(obj.$min,obj.$max-obj.limit+1);\r\n\t\t\t\tobj.$max = obj.limit-1;\r\n\t\t\t}\r\n\t\t\t//generate HTML code of buttons\r\n\t\t\tfor (var i=(obj.$min||0); i<=obj.$max; i++)\r\n\t\t\t\thtml+=this.button({id:i, index:(i+1), selected:(i == obj.page ?\"_selected\":\"\"), label:i18n.aria.page+\" \"+(i+1)});\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tpage:function(obj){\r\n\t\t\treturn obj.page+1;\r\n\t\t},\r\n\t\t//go-to-first page button\r\n\t\tfirst:function(){\r\n\t\t\treturn this.button({ id:\"first\", index:i18n.pager.first, selected:\"\", label:i18n.aria.pages[0]});\r\n\t\t},\r\n\t\t//go-to-last page button\r\n\t\tlast:function(){\r\n\t\t\treturn this.button({ id:\"last\", index:i18n.pager.last, selected:\"\", label:i18n.aria.pages[3]});\r\n\t\t},\r\n\t\t//go-to-prev page button\r\n\t\tprev:function(){\r\n\t\t\treturn this.button({ id:\"prev\", index:i18n.pager.prev, selected:\"\", label:i18n.aria.pages[1]});\r\n\t\t},\r\n\t\t//go-to-next page button\r\n\t\tnext:function(){\r\n\t\t\treturn this.button({ id:\"next\", index:i18n.pager.next, selected:\"\", label:i18n.aria.pages[2]});\r\n\t\t},\r\n\t\tbutton:template(\"<button type='button' \"+/*@attr*/\"webix_p_id\"+\"='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>\")\r\n\t},\r\n\tclone:function(pager){\r\n\t\tif (!pager.$view){\r\n\t\t\tpager.view = \"pager\";\r\n\t\t\tpager = ui(pager);\r\n\t\t}\r\n\r\n\t\tthis._clone = pager;\r\n\t\tpager.$master = this;\r\n\t\tthis._refresh_clone();\r\n\t},\r\n\trefresh:function(){\r\n\t\tvar s = this._settings;\r\n\r\n\t\t//max page number\r\n\t\ts.limit = Math.ceil(s.count/s.size) || 1;\r\n\r\n\t\tvar newPage = Math.min(s.limit-1, s.page);\r\n\r\n\t\tif (newPage != s.page)\r\n\t\t\treturn this.$master.setPage(newPage);\r\n\r\n\t\ts.page = newPage;\r\n\t\tif (newPage>=0 && (newPage!=s.old_page) || (s.limit != s.old_limit) || (s.old_count != s.count)){\r\n\t\t\t//refresh self only if current page or total limit was changed\r\n\t\t\tthis.render();\r\n\t\t\tthis._refresh_clone();\r\n\t\t\ts.old_limit = s.limit;\t//save for onchange check in next iteration\r\n\t\t\ts.old_page = s.page;\r\n\t\t\ts.old_count = s.count;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tapiOnly_setter:function(value){\r\n\t\treturn (this.$apiOnly=value);\r\n\t},\r\n\t_refresh_clone:function(){\r\n\t\tif (this._clone){\r\n\t\t\tthis._clone._settings.count = this._settings.count;\r\n\t\t\tthis._clone._settings.page = this._settings.page;\r\n\t\t\tthis._clone.refresh();\r\n\t\t}\r\n\t},\r\n\t_animate:function(old, id, config){\r\n\t\tif (old == id) return false;\r\n\t\tif (this._pgInAnimation){\r\n\t\t\tif(this._pgAnimateTimeout){\r\n\t\t\t\twindow.clearTimeout(this._pgAnimateTimeout);\r\n\t\t\t}\r\n\t\t\treturn (this._pgAnimateTimeout = delay(this._animate, this,[old, id, config],100));\r\n\t\t}\r\n\t\tvar direction = id > old ? \"left\" : \"right\";\r\n\t\tif (config.direction == \"top\" || config.direction == \"bottom\")\r\n\t\t\tdirection = id > old ? \"top\" : \"bottom\";\r\n\t\tif (config.flip)\r\n\t\t\tdirection = \"\";\r\n\r\n\t\t//make copy of existing view\r\n\t\tvar top = 0;\r\n\t\tvar snode = this.$master._dataobj;\r\n\t\tvar isDataTable = !!this.$master._body;\r\n\r\n\t\tif (isDataTable){\r\n\t\t\tsnode = this.$master._body;\r\n\t\t\ttop = snode.offsetTop;\r\n\t\t\taddCss(this.$master.$view, \"webix_animation\");\r\n\t\t}\r\n\r\n\t\tvar onode = snode.cloneNode(true);\r\n\t\tonode.style.width = snode.style.width = \"100%\";\r\n\t\t\r\n\t\t//redraw page\r\n\t\tthis.$master.refresh();\r\n\t\t//append copy next to original\r\n\t\tinsertBefore(onode, snode.nextSibling, snode.parentNode);\r\n\t\tif(isDataTable)\r\n\t\t\tonode.childNodes[1].scrollLeft = snode.childNodes[1].scrollLeft;\r\n\r\n\t\t//animation config\r\n\t\tvar line;\r\n\t\tvar base = config !== true ? config : {};\r\n\t\tvar aniset = extend({\r\n\t\t\tdirection:direction,\r\n\t\t\tcallback:bind(function(){\r\n\t\t\t\taniset.callback = null;\r\n\t\t\t\tanimate.breakLine(line);\r\n\t\t\t\tthis._pgInAnimation = false;\r\n\t\t\t\tif (this.$master._body)\r\n\t\t\t\t\tremoveCss(this.$master.$view, \"webix_animation\");\r\n\t\t\t},this),\r\n\t\t\ttop:top, keepViews: isDataTable\r\n\t\t}, base);\r\n\r\n\t\t//run animation\r\n\t\tline = animate.formLine(snode, onode, aniset);\r\n\t\tanimate([ snode, onode ], aniset );\r\n\t\tthis._pgInAnimation = true;\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  MouseEvents, SingleRender, base.view, EventSystem);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport layout from \"../views/layout\";\r\nimport list from \"../views/list\";\r\nimport text from \"../views/text\";\r\n\r\nimport {ui, $$} from \"../ui/core\";\r\nimport {extend, delay, _to_array, copy} from \"../webix/helpers\";\r\nimport env from \"../webix/env\";\r\nimport {setSelectionRange, preventEvent} from \"../webix/html\";\r\nimport {attachEvent, detachEvent} from \"../webix/customevents\";\r\nimport {confirm} from \"../webix/message\";\r\nimport template from \"../webix/template\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport i18n from \"../webix/i18n\";\r\n\r\nimport UIManager from \"../core/uimanager\";\r\nimport DateHelper from \"../core/date\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport proxy from \"../load/proxy\";\r\nimport {dp} from \"../load/dataprocessor\";\r\nimport DataCollection from \"../core/datacollection\";\r\nimport promise from \"../thirdparty/promiz\";\r\n\r\n\r\nconst api = {\r\n\tname:\"comments\",\r\n\tdefaults:{\r\n\t\tsendAction:\"click\",\r\n\t\tmode:\"comments\",\r\n\t\thighlight:true\r\n\t},\r\n\t$init: function(config){\r\n\t\tthis.$view.className +=\" webix_comments\";\r\n\t\tthis._destroy_with_me = [];\r\n\r\n\t\tconfig.rows = [this._configList(config)];\r\n\t\tif(!config.moreButton)\r\n\t\t\tconfig.moreButton = template(i18n.comments.moreComments);\r\n\r\n\t\tif(!config.readonly){\r\n\t\t\tconfig.rows.push(this._configForm(config));\r\n\t\t\tthis._initMenu();\r\n\t\t}\r\n\r\n\t\tthis._initUsers(config.users);\r\n\t\tthis.$ready.push(this._afterInit);\r\n\t},\r\n\t$exportView:function(){\r\n\t\treturn this._list;\r\n\t},\r\n\t_afterInit: function(){\r\n\t\t// store UI blocks\r\n\t\tthis._list = this.queryView(\"list\");\r\n\t\tthis._form = this.queryView(\"form\");\r\n\t\tthis._sendButton = this.queryView(\"button\");\r\n\t\tthis._input = this.queryView({localId: \"textarea\"});\r\n\r\n\t\tif(this.config.mentions)\r\n\t\t\tthis._initMentions(this.config.mentions);\r\n\r\n\t\t//provide data-like API\r\n\t\tthis._list.data.provideApi(this, true);\r\n\t\tthis.serialize = () => {\r\n\t\t\tvar data = this._list.serialize();\r\n\t\t\tvar index = this.getIndexById(\"$more\");\r\n\r\n\t\t\tif(index >= 0)\r\n\t\t\t\tdata.splice(index, 1);\r\n\t\t\treturn data;\r\n\t\t};\r\n\r\n\t\t//tune input zone\r\n\t\tif(!this._settings.readonly){\r\n\t\t\tthis._clickHandler = attachEvent(\"onClick\", (e) => {\r\n\t\t\t\tvar view = $$(e);\r\n\t\t\t\tif(view == this._input){\r\n\t\t\t\t\tthis.focus();\r\n\t\t\t\t}\r\n\t\t\t\telse if(view !==this._sendButton && view !==this._listMenu && (!this._userList || view !== this._userList.getList()) &&\r\n\t\t\t\t\t(!e || (e.target.className||\"\").toString().indexOf(\"webix_comments_menu\") ===-1)\r\n\t\t\t\t){\r\n\t\t\t\t\tthis._changeTextarea();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.attachEvent(\"onDestruct\", function(){\r\n\t\t\t\tdetachEvent(this._clickHandler);\r\n\t\t\t});\r\n\r\n\t\t\tthis._list.attachEvent(\"onAfterScroll\", ()=>{\r\n\t\t\t\tthis._listMenu.hide();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t$onLoad: function(data, driver){\r\n\t\treturn this._fillList(data, driver);\r\n\t},\r\n\t_fillList: function(data, driver){\r\n\t\tvar list = this._list || this.queryView({view:\"list\"});\r\n\t\tlist.data.driver = driver;\r\n\r\n\t\tvar more = false;\r\n\t\t//check if datastore\r\n\t\tif (typeof data.serialize == \"function\")\r\n\t\t\tdata = data.serialize();\r\n\t\telse {\r\n\t\t\tmore = data.more;\r\n\t\t\tdata = driver.getRecords(data);\r\n\t\t}\r\n\r\n\t\t//parse more comments\r\n\t\tif(this._moreCall){\r\n\t\t\tthis._moreCall = false;\r\n\t\t\tif(data.length){\r\n\t\t\t\t//add spaces after 'more' button to accommodate new data\r\n\t\t\t\tvar order = list.data.order, pos = 1;\r\n\r\n\t\t\t\tif(this._settings.mode == \"chat\")\r\n\t\t\t\t\tlist.data.order = _to_array([order[0]].concat(new Array(data.length), order.slice(1)));\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar start = list.getIndexById(\"$more\");\r\n\t\t\t\t\tlist.data.order = _to_array(order.slice(0, start).concat(new Array(data.length), order.slice(start)));\r\n\t\t\t\t\tpos = start;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//parse into defined position\r\n\t\t\t\tlist.parse({data:data, pos:pos});\r\n\t\t\t\tif(more)\r\n\t\t\t\t\tdp(this._list).ignore(() => {\r\n\t\t\t\t\t\tthis._list.updateItem(\"$more\", {value:more});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tif(this._settings.mode == \"chat\")\r\n\t\t\t\t\tlist.showItem(list.getIdByIndex(data.length));\r\n\t\t\t}\r\n\t\t\tif(!data.length || !more)\r\n\t\t\t\tdp(this._list).ignore(() => {\r\n\t\t\t\t\tthis._list.remove(\"$more\");\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t//normal parse\r\n\t\telse{\r\n\t\t\tif(more && !list.exists(\"$more\")){\r\n\t\t\t\tmore = { id:\"$more\", value:more, $css:\"webix_comments_more_item\" };\r\n\t\t\t\tif(this._settings.mode == \"chat\")\r\n\t\t\t\t\tdata.unshift(more);\r\n\t\t\t\telse\r\n\t\t\t\t\tdata.push(more);\r\n\t\t\t}\r\n\t\t\tlist.parse(data);\r\n\r\n\t\t\tif(this._settings.mode == \"chat\"){ //wait until rendered\r\n\t\t\t\tlist.waitData.then(() => list.showItem(list.getLastId()));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t$skin:function(){\r\n\t\tlayout.api.$skin.call(this);\r\n\r\n\t\tthis._inputHeight = $active.inputHeight+6;\r\n\t},\r\n\tgetUsers: function(){\r\n\t\treturn this._users;\r\n\t},\r\n\tgetMenu: function(){\r\n\t\treturn this._listMenu;\r\n\t},\r\n\tsetCurrentUser: function(id){\r\n\t\tthis.config.currentUser = id;\r\n\t\tthis._form.clear();\r\n\t\tthis._list.refresh();\r\n\t},\r\n\tedit: function(id){\r\n\t\tif(!this.config.readonly && this.callEvent(\"onBeforeEditStart\", [id])){\r\n\t\t\tthis._changeTextarea(true);\r\n\r\n\t\t\tvar values = this._list.getItem(id);\r\n\t\t\tthis._form.setValues(values);\r\n\t\t\tthis._form.focus();\r\n\r\n\t\t\t//set cursor to the last character and scroll to bottom\r\n\t\t\tvar node = this._form.elements.text.getInputNode();\r\n\t\t\tnode.scrollTop = node.scrollHeight;\r\n\t\t\tsetSelectionRange(node, values.text.length);\r\n\t\t\tthis.callEvent(\"onAfterEditStart\", [id]);\r\n\t\t}\r\n\t},\r\n\t_saveComment: function(clear){\r\n\t\tvar values = this._form.getValues();\r\n\r\n\t\tif(values.text){\r\n\t\t\tif(values.id)\r\n\t\t\t\tthis.updateItem(values.id, values);\r\n\t\t\telse{\r\n\t\t\t\tif(this.config.currentUser)\r\n\t\t\t\t\tvalues.user_id = this.config.currentUser;\r\n\t\t\t\tvalues.date = new Date();\r\n\r\n\t\t\t\tthis.add(values);\r\n\t\t\t\tthis._list.showItem(values.id);\r\n\t\t\t}\r\n\t\t\tthis._form.clear();\r\n\t\t\tif(clear)\r\n\t\t\t\tthis._input.getInputNode().value = \"\";\r\n\t\t}\r\n\t},\r\n\t_removeComment:function(id){\r\n\t\tif(this._form.getValues().id == id){\r\n\t\t\tthis._form.clear();\r\n\t\t}\r\n\t\tthis.remove(id);\r\n\t},\r\n\t_changeTextarea: function(increase){\r\n\t\t// this behaviour is only for desktop, otherwise we will never see the button on mobile\r\n\t\t// prevent unnecessary operations\r\n\t\tif (env.touch || (!increase == !this._text_expanded))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar text = this._input;\t\r\n\t\tif(increase){\r\n\t\t\tthis._sendButton.getParentView().show();\r\n\t\t\ttext.define({height:84});\r\n\t\t\tthis._text_expanded = true;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(UIManager.hasFocus(this._sendButton)){\r\n\t\t\t\tUIManager.setFocus(this._list);\r\n\t\t\t}\r\n\t\t\tthis._sendButton.getParentView().hide();\r\n\t\t\ttext.define({height:this._inputHeight});\r\n\t\t\tthis._text_expanded = false;\r\n\t\t}\r\n\t\ttext.resize();\r\n\t},\r\n\tfocus: function(){\r\n\t\tthis._changeTextarea(true);\r\n\t\tdelay(() => { this._input.focus(); });\r\n\t},\r\n\t_toggleButton(value){\r\n\t\tif(!value) value = this._input.getValue();\r\n\r\n\t\tif(value && !this._sendButton.isEnabled()) this._sendButton.enable();\r\n\t\telse if(!value && this._sendButton.isEnabled()) this._sendButton.disable();\r\n\t},\r\n\t_initMenu: function(){\r\n\t\tthis._listMenu = ui({\r\n\t\t\tview:\"contextmenu\",\r\n\t\t\tautowidth:true,\r\n\t\t\tpoint:false,\r\n\t\t\tdata:[\r\n\t\t\t\t{ id:\"edit\", icon:\"wxi-pencil\", value: i18n.comments[\"edit\"]},\r\n\t\t\t\t{ id:\"remove\", icon:\"wxi-trash\", value: i18n.comments[\"remove\"]}\r\n\t\t\t],\r\n\t\t\ton:{\r\n\t\t\t\tonShow:() => {\r\n\t\t\t\t\tvar ctx = this._listMenu.getContext();\r\n\t\t\t\t\tthis._list.addCss(ctx.id, \"active_menu\");\r\n\t\t\t\t},\r\n\t\t\t\tonHide:() => {\r\n\t\t\t\t\tvar ctx = this._listMenu.getContext();\r\n\t\t\t\t\tthis._list.removeCss(ctx.id, \"active_menu\");\r\n\t\t\t\t},\r\n\t\t\t\tonItemClick:(id) => {\r\n\t\t\t\t\tvar ctx = this._listMenu.getContext();\r\n\t\t\t\t\tif(this.callEvent(\"onBeforeMenuAction\", [id, ctx.id])){\r\n\t\t\t\t\t\tif(id==\"edit\")\r\n\t\t\t\t\t\t\tthis.edit(ctx.id);\r\n\t\t\t\t\t\telse if(id ==\"remove\"){\r\n\t\t\t\t\t\t\tif(i18n.comments.confirmMessage)\r\n\t\t\t\t\t\t\t\tconfirm({\r\n\t\t\t\t\t\t\t\t\ttext: i18n.comments.confirmMessage,\r\n\t\t\t\t\t\t\t\t\tcallback: (res) => {\r\n\t\t\t\t\t\t\t\t\t\tif (res) this._removeComment(ctx.id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis._removeComment(ctx.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._destroy_with_me.push(this._listMenu);\r\n\t},\r\n\t_configForm: function(config){\r\n\t\tconst locale = i18n.comments;\r\n\t\tconst textarea = {\r\n\t\t\tview: \"textarea\",\r\n\t\t\tlocalId:\"textarea\",\r\n\t\t\tcss:\"webix_comments_textarea\",\r\n\t\t\theight:this._inputHeight,\r\n\t\t\tname: \"text\",\r\n\t\t\tplaceholder: locale[\"placeholder\"],\r\n\t\t\tkeyPressTimeout:100,\r\n\t\t\ton:{\r\n\t\t\t\tonTimedKeyPress:() => {\r\n\t\t\t\t\tthis._toggleButton();\r\n\t\t\t\t},\r\n\t\t\t\tonChange:(newv) => {\r\n\t\t\t\t\tthis._toggleButton(newv);\r\n\t\t\t\t},\r\n\t\t\t\tonKeyPress:(code, ev) => {\r\n\t\t\t\t\tif(code == 13){\r\n\t\t\t\t\t\tvar action = this._settings.sendAction, shift = ev.shiftKey;\r\n\t\t\t\t\t\tif( (action == \"enter\" && !shift) || (action !== \"enter\" && shift) ){\r\n\t\t\t\t\t\t\tpreventEvent(ev);\r\n\t\t\t\t\t\t\tthis._saveComment(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif(config.highlight!==false){\r\n\t\t\textend(\r\n\t\t\t\ttextarea,\r\n\t\t\t\t{\r\n\t\t\t\t\tview: \"texthighlight\",\r\n\t\t\t\t\ttype: \"textarea\",\r\n\t\t\t\t\thighlight: text => this._highlightMention(template.escape(text), true)\r\n\t\t\t\t},\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tview:\"form\",\r\n\t\t\tminHeight: 50,\r\n\t\t\tpaddingX:10,\r\n\t\t\telements:[\r\n\t\t\t\ttextarea,\r\n\t\t\t\t{\r\n\t\t\t\t\thidden: !env.touch,\r\n\t\t\t\t\tcols:[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tview:\"button\",\r\n\t\t\t\t\t\t\tdisabled:true,\r\n\t\t\t\t\t\t\tcss: \"webix_comments_send webix_primary\",\r\n\t\t\t\t\t\t\tvalue: locale[\"send\"],\r\n\t\t\t\t\t\t\tautowidth:true,\r\n\t\t\t\t\t\t\tclick: () => { this._saveComment(); }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t},\r\n\t_highlightMention(text, textarea){\r\n\t\tif(text.indexOf(\"@\") === -1)\r\n\t\t\treturn text;\r\n\r\n\t\tlet field;\r\n\t\tif (this._settings.highlight === \"users\")\r\n\t\t\tfield = this._userList ? (this._userList._settings.textValue || \"value\") : \"value\";\r\n\r\n\t\tconst getMention = textarea ? this._markedText : this._markedHTML;\r\n\t\treturn text.replace(getMention, (text,name1,_c,name2) => this._wrapName(text, (name2 || name1), field, textarea));\r\n\t},\r\n\t_wrapName(text, name, field, textarea){\r\n\t\tif (field && !this._users.find(user => user[field] == name, true))\r\n\t\t\treturn text;\r\n\r\n\t\treturn `<span class=\"webix_comments_mention\">${textarea?text:(\"@\"+name)}</span>`;\r\n\t},\r\n\t_configList: function(config){\r\n\t\tvar css = \"webix_comments_\";\r\n\r\n\t\tvar type = {\r\n\t\t\theight: \"auto\",\r\n\t\t\ttemplateStatus: (obj) => {\r\n\t\t\t\treturn \"<span class = '\"+css+\"status \"+obj.status+\"'></span>\";\r\n\t\t\t},\r\n\t\t\ttemplateUser: (obj) => {\r\n\t\t\t\tvar users = this.getUsers();\r\n\t\t\t\tvar user = (users && users.exists(obj.user_id)) ? users.getItem(obj.user_id) : {};\r\n\r\n\t\t\t\tvar name = \"<span class = '\"+css+\"name'>\"+(user.value || \"\")+\"</span>\";\r\n\t\t\t\treturn name;\r\n\t\t\t},\r\n\t\t\ttemplateMenu: () => {\r\n\t\t\t\treturn this.config.readonly ? \"\" : \"<span class='webix_icon wxi-dots \"+css+\"menu'></span>\";\r\n\t\t\t},\r\n\t\t\ttemplateDate: (obj) => {\r\n\t\t\t\tvar format = DateHelper.dateToStr(\"%d %M, %H:%i\");\r\n\t\t\t\treturn obj.date?(\"<span class='\"+css+\"date'>\"+format(obj.date)+\"</span>\"):\"\";\r\n\t\t\t},\r\n\t\t\ttemplateLinks: (obj) => {\r\n\t\t\t\tvar text = obj.text.replace(/(https?:\\/\\/[^\\s]+)/g, function(match){\r\n\t\t\t\t\tmatch = template.escape(match);\r\n\t\t\t\t\tvar html = \"<a target='_blank' href='\"+match+\"'>\";\r\n\t\t\t\t\tif(match.match(/.(jpg|jpeg|png|gif)$/))\r\n\t\t\t\t\t\thtml += \"<img class='webix_comments_image' src='\"+match+\"'/>\";\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\thtml += match;\r\n\t\t\t\t\treturn html+\"</a>\";\r\n\t\t\t\t});\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\ttemplateMentioned: (obj) => {\r\n\t\t\t\treturn this._highlightMention(obj.text);\r\n\t\t\t},\r\n\t\t\ttemplateText: (obj, common) => {\r\n\t\t\t\tif(this._settings.mentions && this._settings.highlight){\r\n\t\t\t\t\tobj = copy(obj);\r\n\t\t\t\t\tobj.text = common.templateMentioned(obj, common);\r\n\t\t\t\t}\r\n\t\t\t\treturn \"<div class = '\"+css+\"message'>\"+common.templateLinks(obj)+\"</div>\";\r\n\t\t\t},\r\n\t\t\ttemplateAvatar: (obj, common) => {\r\n\t\t\t\tvar avatar = \"<div class='\"+css+\"avatar'>\";\r\n\r\n\t\t\t\tvar users = this.getUsers();\r\n\t\t\t\tvar user = (users && users.exists(obj.user_id)) ? users.getItem(obj.user_id) : {};\r\n\t\t\t\tif(user.status)\r\n\t\t\t\t\tavatar += common.templateStatus(user);\r\n\r\n\t\t\t\tavatar += \"<div class='\"+css+\"avatar_image \";\r\n\t\t\t\tif (user.image)\r\n\t\t\t\t\tavatar += \"'><img src = '\"+user.image+\"' class='\"+css+\"photo'>\";\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar icon = user.value ? user.value[0].toUpperCase() : \"<span class='webix_icon wxi-user'></span>\";\r\n\t\t\t\t\tavatar += css+\"avatar_text'>\"+icon;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tavatar += \"</div></div>\";\r\n\t\t\t\treturn avatar;\r\n\t\t\t},\r\n\t\t\ttemplate: (obj, common) => {\r\n\t\t\t\tvar message;\r\n\t\t\t\tif(obj.id == \"$more\"){\r\n\t\t\t\t\tmessage = \"<div class='webix_comments_more'>\"+this._settings.moreButton(obj)+\"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar avatar = common.templateAvatar(obj, common);\r\n\t\t\t\t\tvar user = common.templateUser(obj, common);\r\n\t\t\t\t\tvar date = common.templateDate(obj, common);\r\n\t\t\t\t\tvar menu = common.templateMenu(obj, common);\r\n\t\t\t\t\tvar text = common.templateText(obj, common);\r\n\r\n\t\t\t\t\tmessage = avatar+user+menu+date+text;\r\n\t\t\t\t}\r\n\t\t\t\treturn message;\r\n\t\t\t},\r\n\t\t\tclassname: (obj, common, marks) => {\r\n\t\t\t\tvar css = list.api.type.classname(obj, common, marks);\r\n\t\t\t\tif((obj.user_id && obj.user_id == this._settings.currentUser) || !this._users.count())\r\n\t\t\t\t\tcss += \" webix_comments_current\";\r\n\t\t\t\treturn css;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttype = extend(type, config.listItem || {}, true);\r\n\r\n\t\tvar scheme = {\r\n\t\t\t$init:(obj) => {\r\n\t\t\t\tif(obj.date)\r\n\t\t\t\t\tobj.date = i18n.parseFormatDate(obj.date);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// using webix.extend() for extending schemes results in wrong calls of $init()\r\n\t\tif (config.scheme) Object.keys(config.scheme).forEach(k => {\r\n\t\t\tscheme[k] = config.scheme[k];\r\n\t\t});\r\n\r\n\t\tvar listConfig = {\r\n\t\t\tview:\"list\",\r\n\t\t\tnavigation:false,\r\n\t\t\ttype: type,\r\n\t\t\tscheme:scheme,\r\n\t\t\tonClick: {\r\n\t\t\t\t\"webix_comments_menu\": (ev, id) => {\r\n\t\t\t\t\tif(this._listMenu.isVisible())\r\n\t\t\t\t\t\tthis._listMenu.hide();\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis._listMenu.setContext({obj:this, id:id});\r\n\t\t\t\t\t\tthis._listMenu.show(ev.target, type.menuPosition||{pos:\"left\", y:30, x:10});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"webix_comments_more\": () => {\r\n\t\t\t\t\tif(this.config.url && this.callEvent(\"onDataRequest\", [])){\r\n\t\t\t\t\t\tthis._moreCall = true;\r\n\r\n\t\t\t\t\t\tvar more = this._list.getItem(\"$more\").value;\r\n\t\t\t\t\t\tvar pos = this._settings.mode == \"chat\"?more:this._list.getIndexById(\"$more\");\r\n\r\n\t\t\t\t\t\tvar url = proxy.$parse(this.config.url);\r\n\t\t\t\t\t\tvar callback = { error:() => { this._moreCall = false; }};\r\n\r\n\t\t\t\t\t\tif(typeof url ==\"string\")\r\n\t\t\t\t\t\t\turl = url+(url.indexOf(\"?\")<0?\"?\":\"&\")+\"pos=\"+pos+\"&more=\"+more;\r\n\r\n\t\t\t\t\t\tthis.load(url, callback, { pos:pos, more:more });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tif(config.save)\r\n\t\t\tlistConfig.save = config.save;\r\n\t\treturn listConfig;\r\n\t},\r\n\t_initUsers:function(value){\r\n\t\tif(value && value.getItem){\r\n\t\t\tthis._users = value;\r\n\t\t} else{\r\n\t\t\tthis._users = new DataCollection();\r\n\t\t\tthis._destroy_with_me.push(this._users);\r\n\t\t\tif(value && typeof value === \"string\")\r\n\t\t\t\tthis._users.load(value);\r\n\t\t\telse\r\n\t\t\t\tthis._users.parse(value||[]);\r\n\t\t}\r\n\t\tthis._users.data.attachEvent(\"onStoreUpdated\", () => this._list.refresh());\r\n\t},\r\n\t_initMentions:function(value){\r\n\t\tconst readonly = this.config.readonly;\r\n\t\tif(!readonly)\r\n\t\t\tthis._initUserList(value);\r\n\r\n\t\tif(this.config.highlight){\r\n\t\t\tif(!readonly)\r\n\t\t\t\tthis._markedText = new RegExp(\"@((&quot;(.*?)&quot;)|([^\\\\s]{1,}))\",\"g\");\r\n\t\t\tthis._markedHTML = new RegExp(\"@((\\\"(.*?)\\\")|([^\\\\s]{1,}))\",\"g\");\r\n\t\t}\r\n\r\n\t\tpromise.all([this._list.waitData, this._users.waitData]).then(() => {\r\n\t\t\tthis._list.refresh();\r\n\t\t});\r\n\r\n\t\tthis._list.data.attachEvent(\"onStoreUpdated\", (id, obj, mode) => {\r\n\t\t\tif (id && ( mode === \"add\" || mode === \"update\")){\r\n\t\t\t\tthis._findMentioned(obj);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t_initUserList:function(value){\r\n\t\tvar config = typeof value != \"object\"? {} : value;\r\n\r\n\t\tif (typeof config.body !== \"object\")\r\n\t\t\tconfig.body = { data:this._users };\r\n\t\telse\r\n\t\t\tconfig.body.data = this._users;\r\n\r\n\t\textend(config, { view:\"mentionsuggest\" }, true);\r\n\r\n\t\tconst suggest = this._input.define(\"suggest\", config);\r\n\t\tthis._input.setValueHere = function(value, data, details){\r\n\t\t\tif(value.indexOf(\" \") != -1)\r\n\t\t\t\tvalue = `\"${value}\"`;\r\n\t\t\treturn text.api.setValueHere.apply(this, [value, data, details]);\r\n\t\t};\r\n\t\tthis._userList = $$(suggest);\r\n\t},\r\n\t_findMentioned:function(obj){\r\n\t\tif(obj.text.indexOf(\"@\") != -1){\r\n\t\t\tconst field = this._userList ? (this._userList._settings.textValue || \"value\") : \"value\";\r\n\r\n\t\t\tconst mentioned = {};\r\n\t\t\t// text.replace used instead of matchAll, which not supported by older browsers\r\n\t\t\tobj.text.replace(this._markedHTML, (text, name1, _b, name2) => {\r\n\t\t\t\tconst name = name2 || name1;\r\n\t\t\t\tconst user = this._users.find(user => user[field] == name, true);\r\n\t\t\t\tif(user && !mentioned[name]){\r\n\t\t\t\t\tthis.callEvent(\"onUserMentioned\", [user.id, obj.id]);\r\n\t\t\t\t\tmentioned[name] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// return original text to minimize extra work\r\n\t\t\t\treturn text;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api,  AtomDataLoader, layout.view);\r\nexport default {api, view};","import {protoUI} from \"../ui/core\";\r\nimport {insertBefore, remove, createCss} from \"../webix/html\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\nimport base from \"../views/baseview\";\r\nimport template from \"../webix/template\";\r\n\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport Scrollable from \"../core/scrollable\";\r\nimport RenderStack from \"../core/renderstack\";\r\n\r\nimport env from \"../webix/env\";\r\nimport DateHelper from \"../core/date\";\r\n\r\n\r\nconst api = {\r\n\tname:\"timeline\",\r\n\tdefaults:{\r\n\t\tscroll:\"auto\"\r\n\t},\r\n\t$init:function(){\r\n\t\tthis._viewobj.className += \" webix_timeline\";\r\n\t\tthis.$blockRender = true;\r\n\r\n\t\tthis.data.provideApi(this,true);\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", (id,data,type) => this.render(id,data,type));\r\n\t},\r\n\t_id:/*@attr*/\"webix_tl_id\",\r\n\ton_click:{},\r\n\t$setSize: function(x, y) {\r\n\t\tthis.$blockRender = false;\r\n\t\tif (base.api.$setSize.call(this, x, y)){\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\t},\r\n\trender:function(id,data,type){\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn;\r\n\r\n\t\tif(type == \"update\"){\r\n\t\t\tconst node = this.getItemNode(id); //get html element of updated item\r\n\r\n\t\t\tconst t = this._htmlmap[id] = this._toHTMLObject(data);\r\n\t\t\tinsertBefore(t, node);\r\n\t\t\tremove(node);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t//full reset\r\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\t\t\t\tthis._htmlmap = null;\r\n\t\t\t\tthis._dataobj.innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\r\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_toHTML:function(obj){\r\n\t\tthis.callEvent(\"onItemRender\",[obj]);\r\n\t\tconst index = this.getIndexById(obj.id);\r\n\t\treturn this.type.templateStart.call(this,obj,this.type, index)+this.type.template.call(this, obj,this.type, index)+this.type.templateEnd.call(this);\r\n\t},\r\n\ttype:{\r\n\t\ttype:\"left\",\r\n\t\tclassname:function(obj, common, index){\r\n\t\t\tlet css = \"webix_timeline_item\";\r\n\r\n\t\t\tif(common.type !== \"alternate\")\r\n\t\t\t\tcss += \"  webix_timeline_\"+common.type;\r\n\t\t\telse\r\n\t\t\t\tcss += \" webix_timeline_\"+(index%2?\"right\":\"left\");\r\n\r\n\t\t\tif (common.css) css += \" \"+common.css;\r\n\t\t\tif (obj.$css){\r\n\t\t\t\tif (typeof obj.$css == \"object\")\r\n\t\t\t\t\tobj.$css = createCss(obj.$css);\r\n\t\t\t\tcss += \" \"+obj.$css;\r\n\t\t\t}\r\n\r\n\t\t\treturn css;\r\n\t\t},\r\n\t\tlineColor:(obj) => obj.color,\r\n\t\ttemplateValue:template(\"#value#\"),\r\n\t\ttemplateDetails:(obj) => obj.details || \"\",\r\n\t\ttemplateDate:(obj) => {\r\n\t\t\tconst format = DateHelper.dateToStr(\"%d %M, %Y\");\r\n\t\t\treturn format(obj.date);\r\n\t\t},\r\n\t\ttemplate:function(obj, common, index) {\r\n\t\t\tconst padding = $active.dataPadding;\r\n\t\t\tconst radius = 6, stroke = 2, paddingTop = 2;\r\n\r\n\t\t\tconst lineColor = typeof common.lineColor == \"string\" ? common.lineColor : common.lineColor(obj, common);\r\n\t\t\tconst commonStyle = `stroke-width:${stroke}px; stroke:${lineColor || $active.timelineColor};`;\r\n\t\t\tconst scrollSize = this._settings.scroll ? env.scrollSize : 0;\r\n\t\t\tconst width = this.$width - (padding*2)-scrollSize;\r\n\t\t\tconst type = common.type;\r\n\t\t\tconst last = index+1 == this.count();\r\n\t\t\tconst circleCenter = paddingTop + radius + stroke/2;\r\n\t\t\tconst circleSize = radius*2+stroke;\r\n\t\t\tconst innerPadding = circleSize/2 + 7;\r\n\r\n\t\t\tlet left = padding, center = Math.floor(width*0.35), rwidth = Math.floor(width*0.65)-innerPadding;\r\n\t\t\tlet right = center+innerPadding+padding, lwidth = center-innerPadding;\r\n\r\n\t\t\tif(type == \"right\"){\r\n\t\t\t\tcenter = width-right+innerPadding+padding;\r\n\t\t\t\tleft = center+innerPadding+padding;\r\n\t\t\t\tright = padding;\r\n\t\t\t}\r\n\t\t\telse if(type == \"alternate\"){\r\n\t\t\t\tcenter = Math.floor(width*0.5);\r\n\t\t\t\tright = center+innerPadding+padding;\r\n\t\t\t\tlwidth = rwidth = center-innerPadding;\r\n\t\t\t\tif(index%2){\r\n\t\t\t\t\tleft = right;\r\n\t\t\t\t\tright = padding;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//circle inline styles contain fill property as html2canvas ignores it in css\r\n\t\t\treturn `<div style=\"left:${left}px; width:${lwidth}px;\" class=\"webix_timeline_date\">${common.templateDate(obj,common)}</div>\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${center+circleSize}px\" height=\"${common.height+circleSize}px\">\r\n\t\t\t\t\t\t${(!last) ? `<line x1=\"${center}px\" y1=\"${circleCenter+radius}\" x2=\"${center}px\" y2=\"${common.height+circleCenter-radius}\" class=\"webix_timeline_node\" style=\"${commonStyle}\"/>` : \"\"}\r\n\t\t\t\t\t\t<circle cx=\"${center}px\" cy=\"${circleCenter}\" r=\"${radius}\" class=\"webix_timeline_node webix_timeline_point\" style=\"${commonStyle} fill:transparent;\" />\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<div class=\"webix_timeline_event\" style=\"left:${right}px; width:${rwidth}px; height:${common.height-padding}px;\">\r\n\t\t\t\t\t\t<div class=\"webix_timeline_value\">${common.templateValue(obj,common)}</div>\r\n\t\t\t\t\t\t<div class=\"webix_timeline_details\">${common.templateDetails(obj,common)}</div>\r\n\t\t\t\t\t</div>`;\r\n\t\t},\r\n\t\ttemplateStart:function(obj, common, index){\r\n\t\t\treturn `<div ${/*@attr*/\"webix_tl_id\"}=\"${obj.id}\" class=\"${common.classname.call(this,obj,common,index)}\" style=\"height:${common.height}px;\">`;\r\n\t\t},\r\n\t\ttemplateEnd:template(\"</div>\")\r\n\t},\r\n\ttemplateValue_setter:function(config){\r\n\t\tthis.type.templateValue = template(config);\r\n\t},\r\n\ttemplateDetails_setter:function(config){\r\n\t\tthis.type.templateDetails = template(config);\r\n\t},\r\n\ttemplateDate_setter:function(config){\r\n\t\tthis.type.templateDate = template(config);\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.type.height = $active.timelineItemHeight;\r\n\t}\r\n};\r\n\r\nconst view = protoUI(api, Scrollable, RenderStack, DataLoader, MouseEvents, EventSystem, AutoTooltip, base.view);\r\nexport default {api, view};","import list from \"../views/list\";\r\nimport {triggerEvent, getTextSize} from \"../webix/html\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\nimport {$active} from \"../webix/skin\";\r\nimport env from \"../webix/env\";\r\nimport {bind, extend} from \"../webix/helpers\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\n\r\n// #include ui/window.js\r\n// #include ui/list.js\r\nconst api = {\r\n\tname:\"menu\",\r\n\t_listClassName:\"webix_menu\",\r\n\t$init:function(config){\r\n\t\tif (config.autowidth){\r\n\t\t\tthis._autowidth_submenu = true;\r\n\t\t\tdelete config.autowidth;\r\n\t\t}\r\n\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(function(){\r\n\t\t\tthis._hide_sub_menu();\r\n\t\t},this));\r\n\t\tthis.attachEvent(\"onMouseMove\", this._mouse_move_menu);\r\n\t\tthis.attachEvent(\"onMouseOut\",function(e){\r\n\t\t\tif (this._menu_was_activated() && this._settings.openAction == \"click\") return;\r\n\t\t\tif (!this._child_menu_active && e.relatedTarget)\r\n\t\t\t\tthis._hide_sub_menu();\r\n\t\t});\r\n\t\tthis.attachEvent(\"onItemClick\", function(id, e, trg){\r\n\t\t\tconst item = this.getItem(id);\r\n\t\t\tif (item){\r\n\t\t\t\tif (item.$template) return;\r\n\r\n\t\t\t\tconst parent = this.getTopMenu();\r\n\r\n\t\t\t\tif (!parent.callEvent(\"onMenuItemClick\", [id, e, trg])){\r\n\t\t\t\t\te.showpopup = parent._settings.id;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this != parent)\r\n\t\t\t\t\tparent._call_onclick(id,e,trg);\r\n\r\n\t\t\t\t//click on group - do not close submenus\r\n\t\t\t\tif (!this.type._submenu(item) && !parent._show_child_on_click){\r\n\t\t\t\t\tparent._hide_sub_menu(true);\r\n\t\t\t\t\tif (parent._hide_on_item_click)\r\n\t\t\t\t\t\tparent.hide();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (env.touch || (this === parent && parent._settings.openAction == \"click\")){\r\n\t\t\t\t\t\tthis._mouse_move_activation(id, trg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//do not close popups when clicking on menu folder\r\n\t\t\t\t\te.showpopup = parent._settings.id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.attachEvent(\"onKeyPress\", function(code){\r\n\t\t\tif(code === 9) this.getTopMenu()._hide_sub_menu();\r\n\t\t\telse if(code === 13 || code === 32){\r\n\t\t\t\tvar sel = this.getSelectedId(), node;\r\n\t\t\t\tif(sel)\r\n\t\t\t\t\tnode = this.getItemNode(sel);\r\n\t\t\t\tif(node)\r\n\t\t\t\t\ttriggerEvent(node, \"MouseEvents\", \"click\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tthis.data.attachEvent(\"onClearAll\", function(){\r\n\t\t\tthis._hidden_items = [];\r\n\t\t});\r\n\t\tthis.data._hidden_items = [];\r\n\r\n\t\tthis._viewobj.setAttribute(\"role\", \"menubar\");\r\n\r\n\t\t//component can create new view\r\n\t\tthis._destroy_with_me = [];\r\n\t},\r\n\tsizeToContent:function(){\r\n\t\tif (this._settings.layout == \"y\"){\r\n\t\t\tvar texts = [];\r\n\t\t\tvar isSubmenu = false;\r\n\t\t\tthis.data.each(function(obj){\r\n\t\t\t\ttexts.push(this._toHTML(obj));\r\n\t\t\t\tif(obj.submenu)\r\n\t\t\t\t\tisSubmenu = true;\r\n\t\t\t}, this);\r\n\t\t\t// text width + padding + borders+ arrow\r\n\t\t\tthis.config.width = getTextSize(texts, this.$view.className).width+8*2+2+(isSubmenu?15:0);\r\n\t\t\tthis.resize();\r\n\t\t} else assert(false, \"sizeToContent will work for vertical menu only\");\r\n\t},\r\n\tgetTopMenu:function(){\r\n\t\tvar parent = this;\r\n\t\twhile (parent._parent_menu)\r\n\t\t\tparent = $$(parent._parent_menu);\r\n\t\treturn parent;\r\n\t},\r\n\t_auto_height_calc:function(count){\r\n\t\tif (this._settings.autoheight)\r\n\t\t\tcount = this.count();\r\n\t\t\r\n\t\tvar value = this.count(), height = 0;\r\n\r\n\t\tfor (var i=0; i<count; i++){\r\n\t\t\tvar item = this.data.pull[this.data.order[i]];\r\n\t\t\tif (item && item.$template == \"Separator\"){\r\n\t\t\t\theight+=4;\r\n\t\t\t\tif(!this._settings.autoheight)\r\n\t\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\theight+=this.type.height;\r\n\t\t}\r\n\r\n\t\tthis._onoff_scroll(count && count < value, \"y\");\r\n\t\t\r\n\t\treturn height;\r\n\t},\r\n\ton_mouse_move:{},\r\n\ttype:{\r\n\t\t_submenu:function(obj){\r\n\t\t\treturn obj.submenu || obj.data || obj.item;\r\n\t\t},\r\n\t\tcss:\"menu\",\r\n\t\twidth:\"auto\",\r\n\t\taria:function(obj, common, marks){\r\n\t\t\treturn \"role=\\\"menuitem\\\"\"+(marks && marks.webix_selected?\" aria-selected=\\\"true\\\" tabindex=\\\"0\\\"\":\"tabindex=\\\"-1\\\"\")+(common._submenu(obj)?\"aria-haspopup=\\\"true\\\"\":\"\")+\r\n\t\t\t\t(obj.disabled?\" aria-disabled=\\\"true\\\"  webix_disabled=\\\"true\\\"\":\"\");\r\n\t\t},\r\n\t\ttemplateStart:function(obj, common, mark){\r\n\t\t\tif (obj.$template === \"Separator\" || obj.$template === \"Spacer\"){\r\n\t\t\t\treturn \"<div \"+/*@attr*/\"webix_l_id\"+\"=\\\"#id#\\\" role=\\\"separator\\\" tabindex=\\\"-1\\\" class=\\\"webix_context_\"+obj.$template.toLowerCase()+\"\\\">\";\r\n\t\t\t}\r\n\t\t\tvar link = (obj.href?\" href='\"+obj.href+\"' \":\"\")+(obj.target?\" target='\"+obj.target+\"' \":\"\");\r\n\t\t\treturn list.api.type.templateStart(obj,common,mark).replace(/^<div/,\"<a \"+link)+((common._submenu(obj) && common.subsign)?\"<div class='webix_submenu_icon'></div>\":\"\");\r\n\t\t},\r\n\t\ttemplateEnd: function(obj){\r\n\t\t\treturn (obj.$template === \"Separator\" || obj.$template === \"Spacer\")?\"</div>\":\"</a>\";\r\n\t\t},\r\n\t\ttemplateSeparator:template(\"<div class='sep_line'></div>\"),\r\n\t\ttemplateSpacer:template(\"<div></div>\")\r\n\t},\r\n\tgetMenu: function(id){\r\n\t\tif (!this.data.pull[id]){\r\n\t\t\tfor (var subid in this.data.pull){\r\n\t\t\t\tvar obj = this.getItem(subid);\r\n\t\t\t\tif (obj.submenu){\r\n\t\t\t\t\tvar search = this._get_submenu(obj).getMenu(id);\r\n\t\t\t\t\tif (search) return search;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else return this;\r\n\t},\r\n\tgetSubMenu:function(id){\r\n\t\tvar menu = this.getMenu(id);\r\n\t\tvar obj = menu.getItem(id);\r\n\t\treturn (obj.submenu?menu._get_submenu(obj):null);\r\n\t},\r\n\tgetMenuItem:function(id){\r\n\t\treturn this.getMenu(id).getItem(id);\r\n\t},\r\n\t_get_submenu:function(data){\r\n\t\tvar sub  = $$(data.submenu);\r\n\t\tif (!sub){\r\n\t\t\tdata.submenu = this._create_sub_menu(data);\r\n\t\t\tsub = $$(data.submenu);\r\n\t\t}\r\n\t\treturn sub;\r\n\t},\r\n\t_mouse_move_menu:function(id, e, target){\r\n\t\tif (!this._menu_was_activated())\r\n\t\t\treturn;\r\n\r\n\t\tthis._mouse_move_activation(id, target);\r\n\t},\r\n\t_menu_was_activated:function(){\r\n\t\tif (env.touch) return false;\r\n\t\tvar top = this.getTopMenu();\r\n\t\tif (top._settings.openAction == \"click\"){\r\n\t\t\tvar sub = top._open_sub_menu;\r\n\t\t\tif (sub && $$(sub).isVisible())\r\n\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t_mouse_move_activation:function(id, target){\r\n\t\tvar data = this.getItem(id);\r\n\t\tif (!data) return;\r\n\t\t\r\n\t\t//clear flag of submenu usage\r\n\t\tthis._child_menu_active = null;\r\n\r\n\t\t//hide previously opened sub-menu\r\n\t\tif (this._open_sub_menu && data.submenu != this._open_sub_menu)\r\n\t\t\tthis._hide_sub_menu(true);\r\n\r\n\t\t//show submenu\r\n\t\tif (this.type._submenu(data)&&!this.config.hidden){\r\n\r\n\t\t\tvar sub  = this._get_submenu(data);\r\n\t\t\tif (!this.isItemEnabled(id)) return;\r\n\r\n\t\t\tsub.show(target,{ pos:this._settings.subMenuPos });\r\n\t\t\tsub._parent_menu = this._settings.id;\r\n\r\n\t\t\tthis._open_sub_menu = data.submenu;\r\n\t\t}\r\n\t},\r\n\tdisableItem:function(id){\r\n\t\tconst menu = this.getMenu(id);\r\n\t\tif (menu) menu._set_item_disabled(id, true);\r\n\t},\r\n\tenableItem:function(id){\r\n\t\tconst menu = this.getMenu(id);\r\n\t\tif (menu) menu._set_item_disabled(id, false);\r\n\t},\r\n\tisItemEnabled:function(id){\r\n\t\tconst menu = this.getMenu(id);\r\n\t\tif (menu) return list.api.isItemEnabled.apply(menu, arguments);\r\n\t},\r\n\t_set_item_hidden:function(id, state){\r\n\t\tvar menu = this.data;\r\n\t\tif (menu._hidden_items[id] != state){\r\n\t\t\tmenu._hidden_items[id] = state;\r\n\t\t\tmenu.filter(function(obj){\r\n\t\t\t\treturn !menu._hidden_items[obj.id];\r\n\t\t\t});\r\n\t\t\tthis.resize();\t\t\r\n\t\t}\r\n\t},\r\n\thideItem:function(id){\r\n\t\tvar menu = this.getMenu(id);\r\n\t\tif (menu) menu._set_item_hidden(id, true);\r\n\t},\r\n\tshowItem:function(id){\r\n\t\tvar menu = this.getMenu(id);\r\n\t\tif (menu){\r\n\t\t\tmenu._set_item_hidden(id, false);\r\n\t\t\treturn list.api.showItem.call(menu, id);\r\n\t\t}\r\n\t},\r\n\t_hide_sub_menu : function(mode){\r\n\t\tif (this._open_sub_menu){\r\n\t\t\t//recursive sub-closing\r\n\t\t\tvar sub = $$(this._open_sub_menu);\r\n\t\t\tif (sub._hide_sub_menu)\t//custom context may not have submenu\r\n\t\t\t\tsub._hide_sub_menu(mode);\r\n\t\t\tif (mode || !sub._show_on_mouse_out){\r\n\t\t\t\tsub.hide();\r\n\t\t\t\tthis._open_sub_menu = null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_create_sub_menu : function(data){\r\n\t\tvar listConfig = {\r\n\t\t\tview:\"submenu\",\r\n\t\t\tdata:this.type._submenu(data)\r\n\t\t};\r\n\r\n\t\tvar settings = this.getTopMenu()._settings.submenuConfig;\r\n\t\tif (settings)\r\n\t\t\textend(listConfig, settings, true);\r\n\r\n\t\tvar parentData = this.getMenuItem(data.id);\r\n\t\tif(parentData && parentData.config)\r\n\t\t\textend(listConfig, parentData.config, true);\r\n\r\n\t\tvar menu = ui(listConfig);\r\n\t\tthis._destroy_with_me.push(menu);\r\n\t\tmenu._parent_menu = this;\r\n\t\treturn menu._settings.id;\r\n\t},\r\n\t_skip_item:function(id, prev, dir){\r\n\t\tconst item = this.getItem(id);\r\n\t\tif (item.$template == \"Separator\" || item.$template == \"Spacer\" || !this.isItemEnabled(id)){\r\n\t\t\tid = this.getNextId(id, dir) || null;\r\n\t\t\treturn (id && id != prev)? this._skip_item(id, prev, dir) : prev;\r\n\t\t}\r\n\t\treturn id;\r\n\t},\r\n\t$skin:function(){\r\n\t\tlist.api.$skin.call(this);\r\n\r\n\t\tthis.type.height = $active.menuHeight;\r\n\t},\r\n\tdefaults:{\r\n\t\tscroll:\"\",\r\n\t\tlayout:\"x\",\r\n\t\tmouseEventDelay:100,\r\n\t\tsubMenuPos:\"bottom\"\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  list.view);\r\nexport default {api, view};","\r\n\r\nimport menu from \"../views/menu\";\r\nimport popup from \"../views/popup\";\r\nimport {protoUI, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {clone} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"submenu\",\r\n\t$init:function(){\r\n\t\tthis._body_cell = clone(this._dummy_cell_interface);\r\n\t\tthis._body_cell._view = this;\r\n\r\n\t\tthis.attachEvent(\"onMouseOut\",function(e){\r\n\t\t\tif (this.getTopMenu()._settings.openAction == \"click\") \r\n\t\t\t\treturn;\r\n\t\t\tif (!this._child_menu_active && !this._show_on_mouse_out && e.relatedTarget)\r\n\t\t\t\tthis.hide();\r\n\t\t});\r\n\r\n\t\t//inform parent that focus is still in menu\r\n\t\tthis.attachEvent(\"onMouseMoving\",function(){\r\n\t\t\tif (this._parent_menu)\r\n\t\t\t\t$$(this._parent_menu)._child_menu_active = true;\r\n\t\t});\r\n\t\tthis.attachEvent(\"onBeforeShow\", function(){\r\n\t\t\tif (this.getTopMenu()._autowidth_submenu && this.sizeToContent && !this.isVisible())\r\n\t\t\t\tthis.sizeToContent();\r\n\t\t});\r\n\r\n\t\tthis._dataobj.setAttribute(\"role\", \"menu\");\r\n\t},\r\n\t$skin:function(){\r\n\t\tmenu.api.$skin.call(this);\r\n\t\tpopup.api.$skin.call(this);\r\n\r\n\t\tthis.type.height = $active.menuHeight;\r\n\t},\r\n\t_dummy_cell_interface : {\r\n\t\t$getSize:function(dx, dy){\r\n\t\t\t//we saving height and width, as list can hardcode new values\r\n\t\t\tvar h = this._view._settings.height*1;\r\n\t\t\tvar w = this._view._settings.width*1;\r\n\t\t\tvar size = menu.api.$getSize.call(this._view, dx, dy);\r\n\t\t\t//restoring\r\n\t\t\tthis._view._settings.height = h;\r\n\t\t\tthis._view._settings.width = w;\r\n\t\t\treturn size;\r\n\t\t},\r\n\t\t$setSize:function(x,y){\r\n\t\t\tif (this._view._settings.scroll)\r\n\t\t\t\tthis._view._bodyobj.style.height = y+\"px\";\r\n\t\t},\r\n\t\tdestructor:function(){ this._view = null; }\r\n\t},\r\n\t//ignore body element\r\n\tbody_setter:function(){\r\n\t},\r\n\tgetChildViews:function(){ return []; },\r\n\tdefaults:{\r\n\t\twidth:150,\r\n\t\tsubMenuPos:\"right\",\r\n\t\tlayout:\"y\",\r\n\t\tautoheight:true\r\n\t},\r\n\ttype:{\r\n\t\theight: $active.menuHeight,\r\n\t\tsubsign:true\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  menu.view, popup.view);\r\nexport default {api, view};","import {addCss, removeCss} from \"../webix/html\";\r\nimport {protoUI, ui, $$} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {copy, extend, isArray} from \"../webix/helpers\";\r\nimport {_event} from \"../webix/htmlevents\";\r\n\r\nimport type from \"../webix/type\";\r\nimport env from \"../webix/env\";\r\nimport tree from \"../views/tree\";\r\nimport TreeAPI from \"../core/treeapi\";\r\n\r\n\r\nconst api = {\r\n\tname: \"sidebar\",\r\n\tdefaults:{\r\n\t\ttype: \"sideBar\",\r\n\t\tactiveTitle: true,\r\n\t\tselect: true,\r\n\t\tscroll: false,\r\n\t\tcollapsed: false,\r\n\t\tcollapsedWidth: 44,\r\n\t\tposition: \"left\",\r\n\t\twidth: 250,\r\n\t\tmouseEventDelay: 10\r\n\t},\r\n\t$skin: function(){\r\n\t\tthis.defaults.titleHeight = $active.sidebarTitleHeight;\r\n\t},\r\n\t$init: function(config){\r\n\t\tthis.$view.className += \" webix_sidebar\";\r\n\t\tthis.$ready.push(this._initSidebar);\r\n\t\tthis.$ready.push(this._initContextMenu);\r\n\r\n\t\tthis.data._scheme_init = function(obj){\r\n\t\t\tif (obj.data)\r\n\t\t\t\tobj.menu = copy(obj.data);\r\n\t\t\telse if (obj.item) //xml child records, can be {} or []\r\n\t\t\t\tobj.menu = copy(obj.item.length?obj.item:[obj.item]);\r\n\t\t};\r\n\t\tconfig.multiselect = false;\r\n\t},\r\n\ton_context:{},\r\n\ton_mouse_move:{},\r\n\t_initSidebar: function(){\r\n\t\tthis._fullWidth = this.config.width;\r\n\t\tthis.attachEvent(\"onBeforeOpen\", function(id){\r\n\t\t\tif(!this.config.multipleOpen){\r\n\t\t\t\tvar open = this.getOpenItems();\r\n\t\t\t\tfor(var i=0; i<open.length; i++){\r\n\t\t\t\t\tif(this.getParentId(id) == this.getParentId(open[i]))\r\n\t\t\t\t\t\tthis.close(open[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn !this.config.collapsed;\r\n\t\t});\r\n\t\tthis.attachEvent(\"onItemClick\", function(id, ev, node){\r\n\t\t\tconst popup = this.getPopup();\r\n\t\t\tif(popup && !popup.config.hidden)\r\n\t\t\t\tev.showpopup = popup.config.id;\r\n\t\t\tif(env.touch)\r\n\t\t\t\tthis._showPopup(id, node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onBeforeSelect\", function(id){\r\n\t\t\tif(!this.getItem(id).$count){\r\n\t\t\t\tthis.clearCss(\"webix_sidebar_selected\");\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterSelect\", function(id){\r\n\t\t\tthis._markMenu(this, id, !$active.sidebarMarkAll);\r\n\t\t\tthis.getPopup()._onMasterSelect(id);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterUnSelect\", function(){\r\n\t\t\tthis.clearCss(\"webix_sidebar_selected\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onMouseMove\", function(id, ev, node){\r\n\t\t\tthis._showPopup(id, node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onMouseOut\", function(){\r\n\t\t\tif (this.config.collapsed)\r\n\t\t\t\tthis.getPopup().masterId = null;\r\n\t\t});\r\n\r\n\t\tif(this.config.collapsed)\r\n\t\t\tthis.collapse();\r\n\t},\r\n\t_showPopup: function(id, node){\r\n\t\tif (this.config.collapsed){\r\n\t\t\tvar popup = this.getPopup();\r\n\t\t\tif (popup){\r\n\t\t\t\tthis._updateTitle(id, popup);\r\n\t\t\t\tthis._updateList(id, popup);\r\n\r\n\t\t\t\tpopup.masterId = id;\r\n\t\t\t\tpopup.show(node, {\r\n\t\t\t\t\tx: (this.config.position == \"left\"?this.config.collapsedWidth:-popup.config.width), \r\n\t\t\t\t\ty: -1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_updateTitle: function(id, popup){\r\n\t\tconst title = popup.getBody().getChildViews()[0];\r\n\t\tif (!title || popup.masterId == id) return;\r\n\r\n\t\ttitle.parse(this.getItem(id));\r\n\r\n\t\tconst selectedId = this.getSelectedId();\r\n\t\tif (selectedId == id){\r\n\t\t\taddCss(title.$view, \"webix_selected\", true);\r\n\t\t} else {\r\n\t\t\tremoveCss(title.$view, \"webix_selected\");\r\n\t\t}\r\n\t},\r\n\t_updateList: function(id, popup){\r\n\t\tconst list = popup.getBody().getChildViews()[1];\r\n\t\tif (!list || popup.masterId == id) return;\r\n\r\n\t\tif (this.exists(popup.masterId) && this.getItem(popup.masterId).menu)\r\n\t\t\tthis.updateItem(popup.masterId, {menu:list.data.serialize()});\r\n\r\n\t\tlist.clearCss(\"webix_sidebar_selected\");\r\n\t\tlist.unselectAll();\r\n\r\n\t\tconst data = copy(this.getItem(id).menu || []);\r\n\t\tif (data.length){\r\n\t\t\tlist.show();\r\n\t\t\tlist.data.importData(data);\r\n\r\n\t\t\tconst selectedId = this.getSelectedId();\r\n\t\t\tif (list.exists(selectedId))\r\n\t\t\t\tlist.select(selectedId);\r\n\t\t\telse if (selectedId)\r\n\t\t\t\tthis._markMenu(list, selectedId);\r\n\t\t} else {\r\n\t\t\tlist.hide();\r\n\t\t\tlist.data.clearAll();\r\n\t\t}\r\n\t},\r\n\t_initContextMenu: function(){\r\n\t\tvar master = this,\r\n\t\t\tconfig = master.config,\r\n\t\t\tpopup;\r\n\r\n\t\tif(config.popup){\r\n\t\t\tpopup = $$(config.popup);\r\n\t\t}\r\n\t\tif(!popup){\r\n\t\t\tvar dirClassName = (config.position==\"left\"?\"webix_sidebar_popup_left\":\"webix_sidebar_popup_right\");\r\n\t\t\tvar subMenuPos = (config.position == \"left\"?\"right\":\"left\");\r\n\t\t\tvar menuTemplate = function(obj) {\r\n\t\t\t\tvar icon = \"wxi-angle-\"+(config.position == \"left\"?\"right\":\"left\");\r\n\t\t\t\tvar arrow = obj.submenu||obj.data||obj.item ? \"<div class=\\\"webix_icon \"+ icon+\"\\\"></div>\" : \"\";\r\n\t\t\t\treturn arrow+obj.value;\r\n\t\t\t};\r\n\t\t\tvar css = config.css ? \" \"+config.css : \"\";\r\n\r\n\t\t\tvar popupConfig = {\r\n\t\t\t\tview:\"popup\",\r\n\t\t\t\tcss: \"webix_sidebar_popup \"+dirClassName+css,\r\n\t\t\t\tautofit: false,\r\n\t\t\t\twidth: this._fullWidth - this.config.collapsedWidth,\r\n\t\t\t\tborderless: true,\r\n\t\t\t\tpadding:0,\r\n\t\t\t\tbody:{\r\n\t\t\t\t\trows:[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tview: \"template\", \tborderless: true, css: \"webix_sidebar_popup_title\",\r\n\t\t\t\t\t\t\ttemplate: \"#value#\", height: this.config.titleHeight+2,\r\n\t\t\t\t\t\t\tonClick:{\r\n\t\t\t\t\t\t\t\twebix_template: function(){\r\n\t\t\t\t\t\t\t\t\tvar id = this.getValues().id;\r\n\t\t\t\t\t\t\t\t\tif(!master.getItem(id).$count)\r\n\t\t\t\t\t\t\t\t\t\tmaster.select(id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\tview: \"menu\", \r\n\t\t\t\t\t\t\tsubmenu:\"data\",\r\n\t\t\t\t\t\t\tlayout: \"y\",\r\n\t\t\t\t\t\t\tsubMenuPos:subMenuPos,\r\n\t\t\t\t\t\t\tselect: true,\r\n\t\t\t\t\t\t\tborderless: true,\r\n\t\t\t\t\t\t\tautoheight: true,\r\n\t\t\t\t\t\t\tcss: \"webix_sidebar_popup_list \"+dirClassName+css,\r\n\t\t\t\t\t\t\ttemplate: menuTemplate,\r\n\t\t\t\t\t\t\ttype:{ subsign:false },\r\n\t\t\t\t\t\t\tsubmenuConfig:{\r\n\t\t\t\t\t\t\t\tpadding:0,\r\n\t\t\t\t\t\t\t\tsubMenuPos:subMenuPos,\r\n\t\t\t\t\t\t\t\ttemplate:menuTemplate,\r\n\t\t\t\t\t\t\t\tselect:true,\r\n\t\t\t\t\t\t\t\ttype:{ subsign:false },\r\n\t\t\t\t\t\t\t\tcss:\"webix_sidebar_popup_list \"+dirClassName+css,\r\n\t\t\t\t\t\t\t\ton:{\r\n\t\t\t\t\t\t\t\t\tonShow:function(){\r\n\t\t\t\t\t\t\t\t\t\tthis.clearCss(\"webix_sidebar_selected\");\r\n\t\t\t\t\t\t\t\t\t\tthis.unselectAll();\r\n\t\t\t\t\t\t\t\t\t\tvar sel = master.getSelectedId();\r\n\t\t\t\t\t\t\t\t\t\tif(sel && this.exists(sel))\r\n\t\t\t\t\t\t\t\t\t\t\tthis.select(sel);\r\n\t\t\t\t\t\t\t\t\t\telse if(sel)\r\n\t\t\t\t\t\t\t\t\t\t\tmaster._markMenu(this, sel);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonBeforeSelect:function(id){\r\n\t\t\t\t\t\t\t\t\t\tif(this.getSubMenu(id))\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonAfterSelect:function(id){\r\n\t\t\t\t\t\t\t\t\t\tvar menu = master.getPopup().queryView({view:\"menu\"});\r\n\t\t\t\t\t\t\t\t\t\tvar parent = master.getParentId(id);\r\n\t\t\t\t\t\t\t\t\t\twhile(parent){\r\n\t\t\t\t\t\t\t\t\t\t\tvar sub = menu.getMenu(parent);\r\n\t\t\t\t\t\t\t\t\t\t\tif(sub){\r\n\t\t\t\t\t\t\t\t\t\t\t\tsub.unselectAll();\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaster._markMenu(sub, id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\t\tparent = master.getParentId(parent);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tmaster._markMenu(this, id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ton:{\r\n\t\t\t\t\t\t\t\tonBeforeSelect:function(id){\r\n\t\t\t\t\t\t\t\t\tif(this.getSubMenu(id))\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonMenuItemClick: function(id){\r\n\t\t\t\t\t\t\t\t\tif(!this.getSubMenu(id))\r\n\t\t\t\t\t\t\t\t\t\tmaster.select(id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\textend(popupConfig, config.popup||{}, true);\r\n\t\t\tpopup = ui(popupConfig);\r\n\t\t\tpopup._onMasterSelect = function(id){\r\n\t\t\t\tif(master.config.collapsed && master.getItem(id).$level == 1){\r\n\t\t\t\t\tlet title = popup.getBody().getChildViews()[0];\r\n\t\t\t\t\tif (title)\r\n\t\t\t\t\t\taddCss(title.$view, \"webix_selected\", true);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tpopup.queryView({view:\"menu\"})._show_child_on_click = true;\r\n\t\t}\r\n\r\n\t\tpopup.attachEvent(\"onBeforeShow\",function(){\r\n\t\t\treturn config.collapsed;\r\n\t\t});\r\n\r\n\t\tthis._destroy_with_me = [popup];\r\n\t\tconfig.popupId = popup.config.id;\r\n\r\n\t\t_event(document.body,\"mousemove\", function(e){\r\n\t\t\tvar trg = e.target;\r\n\t\t\tif(!popup.config.hidden && !popup.$view.contains(trg) && !this.$view.firstChild.contains(trg) && !popup.queryView({view:\"menu\"})._open_sub_menu){\r\n\t\t\t\tpopup.hide();\r\n\t\t\t}\r\n\t\t}, {bind:this});\r\n\t},\r\n\t_markMenu:function(view, sel, topOnly){\r\n\t\tvar css = \"webix_sidebar_selected\";\r\n\t\tview.data.each(function(obj){\r\n\t\t\tif(this._isChild(sel, obj.id) && (!topOnly || this.getParentId(obj.id)==\"0\"))\r\n\t\t\t\tview.addCss(obj.id, css);\r\n\t\t\telse if(view.hasCss(obj.id, css))\r\n\t\t\t\tview.removeCss(obj.id, css);\r\n\t\t}, this);\r\n\t},\r\n\t_isChild:function(cid, pid){\r\n\t\tvar parent = this.getParentId(cid);\r\n\t\tif(pid == parent) return true;\r\n\t\tif(parent)\r\n\t\t\treturn this._isChild(parent, pid);\r\n\t\treturn false;\r\n\t},\r\n\tgetPopup: function(){\r\n\t\treturn $$(this.config.popupId);\r\n\t},\r\n\tposition_setter:function(value){\r\n\t\tvar newPos = value;\r\n\t\tvar oldPos = value==\"left\"?\"right\":\"left\";\r\n\r\n\t\tremoveCss(this.$view, \"webix_sidebar_\"+oldPos);\r\n\t\taddCss(this.$view, \"webix_sidebar_\"+newPos, true);\r\n\r\n\t\tvar popup = this.getPopup();\r\n\t\tif(popup){\r\n\t\t\tvar popupEl = popup.$view;\r\n\t\t\tremoveCss(popupEl, \"webix_sidebar_popup_\"+oldPos);\r\n\t\t\taddCss(popupEl, \"webix_sidebar_popup_\"+newPos, true);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tselect:function(id){\r\n\t\t//ignore multiple selection\r\n\t\tif(id){\r\n\t\t\tif (isArray(id)) id = id.pop();\r\n\t\t\ttree.api.select.call(this, id);\r\n\t\t}\r\n\t},\r\n\tselectAll:function(){},\r\n\tcollapse: function(){\r\n\t\tthis.define(\"collapsed\", true);\r\n\t},\r\n\texpand: function(){\r\n\t\tthis.define(\"collapsed\", false);\r\n\t},\r\n\ttoggle: function(){\r\n\t\tvar collapsed = !this.config.collapsed;\r\n\t\tthis.define(\"collapsed\", collapsed);\r\n\t},\r\n\tcollapsed_setter: function(value){\r\n\t\tvar width;\r\n\r\n\t\tif(!value){\r\n\t\t\twidth = this._fullWidth;\r\n\t\t\tthis.type.collapsed = false;\r\n\t\t\taddCss(this.$view, \"webix_sidebar_expanded\", true);\r\n\t\t}\r\n\t\telse{\r\n\t\t\twidth = this.config.collapsedWidth;\r\n\t\t\tthis.closeAll();\r\n\t\t\tthis.type.collapsed = true;\r\n\t\t\tremoveCss(this.$view, \"webix_sidebar_expanded\");\r\n\t\t}\r\n\r\n\t\tthis.define(\"width\",width);\r\n\t\tthis.resize();\r\n\r\n\t\treturn value;\r\n\t},\r\n\tgetState:function(){\r\n\t\tvar state = { collapsed:this.config.collapsed };\r\n\t\textend(state, TreeAPI.getState.call(this));\r\n\t\treturn state;\r\n\t},\r\n\tsetState:function(state){\r\n\t\tTreeAPI.setState.call(this, state);\r\n\t\tthis.define(\"collapsed\", state.collapsed);\r\n\t}\r\n};\r\n\r\ntype(tree.view, {\r\n\tname:\"sideBar\",\r\n\theight: \"auto\",\r\n\ttemplate: function(obj, common){\r\n\t\tif(common.collapsed)\r\n\t\t\treturn common.icon(obj, common);\r\n\t\treturn   common.arrow(obj, common)+common.icon(obj, common) +\"<span>\"+obj.value+\"</span>\";\r\n\t},\r\n\tarrow: function(obj) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i=1; i<=obj.$level; i++) {\r\n\t\t\tif (i==obj.$level && obj.$count) {\r\n\t\t\t\tvar icon = \"wxi-angle-\"+(obj.open?\"down\":\"left\");\r\n\t\t\t\tvar className = \"webix_sidebar_dir_icon webix_icon \"+ icon;\r\n\t\t\t\thtml+=\"<span class='\"+className+\"'></span>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\ticon: function(obj) {\r\n\t\tvar style = \"\";\r\n\t\tif (obj.$level > 2) {\r\n\t\t\tstyle = \"style=\\\"padding-left:\"+ (40 * (obj.$level - 2))+\"px\\\"\";\r\n\t\t}\r\n\t\tif (obj.icon)\r\n\t\t\treturn \"<span class='webix_icon webix_sidebar_icon \"+obj.icon+\"' \" + style + \"></span>\";\r\n\t\treturn \"<span \"+style+\"></span>\";\r\n\t}\r\n});\r\n\r\nconst view = protoUI(api, tree.view);\r\nexport default {api, view};","import env from \"../webix/env\";\r\nimport UIManager from \"../core/uimanager\";\r\n\r\nimport {removeCss, addCss} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {delay, bind} from \"../webix/helpers\";\r\nimport {zIndex} from \"../ui/helpers\";\r\nimport {event, eventRemove} from \"../webix/htmlevents\";\r\nimport {assert} from \"../webix/debug\";\r\n\r\nimport popup from \"../views/popup\";\r\nimport window from \"../views/window\";\r\nimport base from \"../views/view\";\r\n\r\nimport animate from \"../webix/animate\";\r\nimport state from \"../core/state\";\r\n\r\n\r\nconst api = {\r\n\tname:\"sidemenu\",\r\n\tdefaults: {\r\n\t\tanimate: true,\r\n\t\tposition: \"left\",\r\n\t\twidth: 200,\r\n\t\tborderless: true\r\n\t},\r\n\t$init:function(){\r\n\t\tthis.$view.className += \" webix_sidemenu\";\r\n\t},\r\n\t$skin:function(){\r\n\t\tpopup.api.$skin.call(this);\r\n\r\n\t\tthis.defaults.padding = 0;\r\n\t},\r\n\tposition_setter: function(value){\r\n\t\tvar prevPosition = this._settings.position;\r\n\t\tif(prevPosition)\r\n\t\t\tremoveCss(this.$view,\" webix_sidemenu_\"+prevPosition);\r\n\t\taddCss(this.$view,\" webix_sidemenu_\"+value);\r\n\t\treturn value;\r\n\t},\r\n\t$getSize: function(){\r\n\t\tvar sizes = window.api.$getSize.apply(this,arguments);\r\n\t\tthis._desired_sizes = sizes;\r\n\t\treturn sizes;\r\n\t},\r\n\t$setSize:function(x,y){\r\n\t\tbase.api.$setSize.call(this,x,y);\r\n\t\tx = this._content_width-this._settings.padding*2;\r\n\t\ty = this._content_height-this._settings.padding*2;\r\n\t\tthis._contentobj.style.padding = this._settings.padding+\"px\";\r\n\t\tthis._headobj.style.display=\"none\";\r\n\t\tthis._bodyobj.style.height = y+\"px\";\r\n\t\tthis._body_cell.$setSize(x,y);\r\n\t},\r\n\tshow: function(){\r\n\t\tif(!this.callEvent(\"onBeforeShow\",arguments))\r\n\t\t\treturn false;\r\n\r\n\t\tthis._settings.hidden = false;\r\n\t\tthis._viewobj.style.zIndex = zIndex(this._settings.zIndex);\r\n\t\tif (this._settings.modal || this._modal){\r\n\t\t\tthis._modal_set(true);\r\n\t\t\tthis._modal = null; // hidden_setter handling\r\n\t\t}\r\n\t\tthis._viewobj.style.display = \"block\";\r\n\t\tthis._render_hidden_views();\r\n\t\tif (this._settings.position)\r\n\t\t\tthis._setPosition();\r\n\r\n\t\tthis._hide_timer = 1;\r\n\t\tdelay(function(){ this._hide_timer = 0; }, this, [], (env.touch ? 400 : 100 ));\r\n\r\n\t\tif (this.config.autofocus){\r\n\t\t\tthis._prev_focus = UIManager.getFocus();\r\n\t\t\tUIManager.setFocus(this);\r\n\t\t}\r\n\r\n\t\tif (-1 == state._popups.find(this))\r\n\t\t\tstate._popups.push(this);\r\n\r\n\t\tthis.callEvent(\"onShow\",[]);\r\n\t},\r\n\t_setPosition: function(x){\r\n\t\tvar width, height, maxWidth, maxHeight,\r\n\t\t\tposition,\r\n\t\t\tleft = 0, top = 0,\r\n\t\t\tstate = { };\r\n\r\n\r\n\t\tthis.$view.style.position = \"fixed\";\r\n\r\n\t\tmaxWidth = (window.innerWidth||document.documentElement.offsetWidth);\r\n\t\tmaxHeight = (window.innerHeight||document.documentElement.offsetHeight);\r\n\r\n\t\twidth = this._desired_sizes[0] || maxWidth;\r\n\t\theight = this._desired_sizes[2] ||maxHeight;\r\n\r\n\t\tassert(width &&height, \"Attempt to show not rendered window\");\r\n\r\n\t\tposition = this._settings.position;\r\n\r\n\t\tif(position == \"top\"){\r\n\t\t\twidth = maxWidth;\r\n\t\t} else if(position == \"right\"){\r\n\t\t\theight = maxHeight;\r\n\t\t\tleft = maxWidth - width;\r\n\t\t} else if(position == \"bottom\"){\r\n\t\t\twidth = maxWidth;\r\n\t\t\ttop = maxHeight - height;\r\n\t\t} else {\r\n\t\t\theight = maxHeight;\r\n\t\t}\r\n\r\n\t\tstate = { left: left, top: top,\r\n\t\t\twidth: width, height: height,\r\n\t\t\tmaxWidth: maxWidth, maxHeight: maxHeight\r\n\t\t};\r\n\r\n\t\tif (typeof this._settings.state == \"function\")\r\n\t\t\tthis._settings.state.call(this, state);\r\n\r\n\t\tthis._state = state;\r\n\r\n\t\tthis.$setSize(state.width, state.height);\r\n\r\n\t\tif (typeof x == \"undefined\" && this._isAnimationSupported()){\r\n\t\t\tremoveCss(this.$view,\"webix_animate\",true);\r\n\t\t\t// set initial state\r\n\t\t\tthis._animate[this._settings.position].beforeShow.call(this, state);\r\n\t\t\t// set apply animation css\r\n\t\t\tdelay(function(){\r\n\t\t\t\taddCss(this.$view,\"webix_animate\",true);\r\n\t\t\t},this, null,1);\r\n\t\t\t// animate popup\r\n\t\t\tdelay(function(){\r\n\t\t\t\tthis._animate[this._settings.position].show.call(this, state);\r\n\t\t\t},this, null,10);\r\n\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(this._settings.position === \"right\")\r\n\t\t\t\tstate.left = state.right?maxWidth - state.width - state.right:maxWidth - state.width;\r\n\t\t\tthis.setPosition(state.left, state.top);\r\n\t\t}\r\n\t},\r\n\t_state:{},\r\n\t_isAnimationSupported: function(){\r\n\t\treturn animate.isSupported() && this._settings.animate && !(env.isIE && navigator.appVersion.indexOf(\"MSIE 9\")!=-1);\r\n\t},\r\n\thidden_setter:function(value){\r\n\t\tif(value)\r\n\t\t\tthis.hide();\r\n\t\telse\r\n\t\t\tthis.show();\r\n\t\treturn !!value;\r\n\t},\r\n\t_animate:{\r\n\t\tleft: {\r\n\t\t\tbeforeShow: function(state){\r\n\t\t\t\tthis.$view.style.left = -state.width+\"px\";\r\n\t\t\t\tthis.$view.style.top = state.top+\"px\";\r\n\t\t\t},\r\n\t\t\tshow: function(state){\r\n\t\t\t\tthis.$view.style.left = state.left?state.left+\"px\":\"0px\";\r\n\t\t\t},\r\n\t\t\thide: function(state){\r\n\t\t\t\tthis.$view.style.left = -state.width+\"px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tright: {\r\n\t\t\tbeforeShow: function(state){\r\n\t\t\t\tthis.$view.style.left = \"auto\";\r\n\t\t\t\tthis.$view.style.right = -state.width+\"px\";\r\n\t\t\t\tthis.$view.style.top = state.top+\"px\";\r\n\t\t\t},\r\n\t\t\tshow: function(state){\r\n\t\t\t\tthis.$view.style.right = state.right?state.right+\"px\":\"0px\";\r\n\t\t\t},\r\n\t\t\thide: function(state){\r\n\t\t\t\tthis.$view.style.right = -state.width+\"px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\tbeforeShow: function(state){\r\n\t\t\t\tthis.setPosition(state.left,state.top);\r\n\t\t\t\tthis.$view.style.height =\"0px\";\r\n\t\t\t\tthis._bodyobj.style.height =\"0px\";\r\n\t\t\t},\r\n\t\t\tshow: function(state){\r\n\t\t\t\tthis.$view.style.height = state.height +\"px\";\r\n\t\t\t\tthis._bodyobj.style.height =state.height+\"px\";\r\n\t\t\t},\r\n\t\t\thide: function(){\r\n\t\t\t\tthis.$view.style.height = \"0px\";\r\n\t\t\t\tthis._bodyobj.style.height = \"0px\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tbottom: {\r\n\t\t\tbeforeShow: function(state){\r\n\t\t\t\tthis.$view.style.left = state.left + \"px\";\r\n\t\t\t\tthis.$view.style.top = \"auto\";\r\n\t\t\t\tvar bottom = (state.bottom != undefined?state.bottom:(state.maxHeight-state.top  -state.height));\r\n\t\t\t\tthis.$view.style.bottom = bottom +\"px\";\r\n\t\t\t\tthis.$view.style.height =\"0px\";\r\n\t\t\t},\r\n\t\t\tshow: function(state){\r\n\t\t\t\tthis.$view.style.height = state.height +\"px\";\r\n\t\t\t},\r\n\t\t\thide: function(){\r\n\t\t\t\tthis.$view.style.height = \"0px\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_hiding_process:function(){\r\n\t\tconst maxWidth = (window.innerWidth||document.documentElement.offsetWidth);\r\n\t\tconst maxHeight = (window.innerHeight||document.documentElement.offsetHeight);\r\n\r\n\t\tif (this._isAnimationSupported() && maxWidth == this._state.maxWidth && maxHeight == this._state.maxHeight){\r\n\t\t\t// call 'hide' animation handler\r\n\t\t\tthis._animate[this._settings.position].hide.call(this, this._state);\r\n\t\t\t// hide popup\r\n\t\t\tconst tid = event(this.$view, env.transitionEnd, bind(function(){\r\n\t\t\t\tthis._hide_callback();\r\n\t\t\t\teventRemove(tid);\r\n\t\t\t},this));\r\n\t\t} else\r\n\t\t\tthis._hide_callback();\r\n\t}\r\n\r\n};\r\n\r\n\r\nconst view = protoUI(api,  popup.view);\r\nexport default {api, view};","import popup from \"../views/popup\";\r\nimport ContextHelper from \"../core/contexthelper\";\r\nimport {protoUI} from \"../ui/core\";\r\n\r\n\r\nconst api = {\r\n\tname:\"context\"\r\n};\r\n\r\n\r\nconst view = protoUI(api,  ContextHelper, popup.view);\r\nexport default {api, view};","import submenu from \"../views/submenu\";\r\nimport ContextHelper from \"../core/contexthelper\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport {extend} from \"../webix/helpers\";\r\n\r\n\r\nconst api = {\r\n\tname:\"contextmenu\",\r\n\t_hide_on_item_click:true,\r\n\t$init: function(config){\r\n\t\tif(config.submenuConfig)\r\n\t\t\textend(config,config.submenuConfig);\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api,  ContextHelper, submenu.view);\r\nexport default {api, view};","import EventSystem from \"../core/eventsystem\";\r\nimport Settings from \"../core/settings\";\r\nimport {addCss, preventEvent} from \"../webix/html\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport env from \"../webix/env\";\r\nimport Touch from \"../core/touch\";\r\nimport {toNode, isUndefined} from \"../webix/helpers\";\r\nimport {_event, event} from \"../webix/htmlevents\";\r\nimport {$active} from \"../webix/skin\";\r\n\r\n\r\nconst api = {\r\n\tname:\"vscroll\",\r\n\t$apiOnly:true,\r\n\tdefaults:{\r\n\t\tscroll:\"x\",\r\n\t\tscrollPos:0,\r\n\t\tscrollSize:18,\r\n\t\tscrollVisible:1,\r\n\t\tzoom:1\r\n\t},\r\n\t$init:function(config){\r\n\t\tvar dir = config.scroll||\"x\";\r\n\t\tvar node = this._viewobj = toNode(config.container);\r\n\t\tnode.className += \" webix_vscroll_\"+dir;\r\n\t\tnode.innerHTML=\"<div class='webix_vscroll_body'></div>\";\r\n\t\t_event(node,\"scroll\", this._onscroll,{bind:this});\r\n\r\n\t\tthis._last_set_size = 0;\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.defaults.scrollStep = $active.rowHeight;\r\n\t},\r\n\treset:function(){\r\n\t\tthis.config.scrollPos = 0;\r\n\t\tthis._viewobj[this.config.scroll == \"x\"?\"scrollLeft\":\"scrollTop\"] = 0;\r\n\t},\r\n\t_check_quantum:function(value){\r\n\t\tif (value>1500000){\r\n\t\t\tthis._settings.zoom = value/1000000;\r\n\t\t\tvalue = 1000000;\r\n\t\t} else {\r\n\t\t\tthis._settings.zoom = 1;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\t\r\n\tscrollWidth_setter:function(value){\r\n\t\tvalue = this._check_quantum(value);\r\n\t\tthis._viewobj.firstChild.style.width = value+\"px\";\r\n\t\treturn value;\t\t\r\n\t},\r\n\tscrollHeight_setter:function(value){\r\n\t\tvalue = this._check_quantum(value);\r\n\t\tthis._viewobj.firstChild.style.height = value+\"px\";\r\n\t\treturn value;\r\n\t},\r\n\tsizeTo:function(value, top, bottom){\r\n\t\tvalue = value-(top||0)-(bottom||0);\r\n\r\n\t\tvar width = this._settings.scrollSize;\r\n\t\t//IEFix\r\n\t\t//IE doesn't react on scroll-click if it has not at least 1 px of visible content\r\n\t\tif (env.isIE && width)\r\n\t\t\twidth += 1;\r\n\t\tif (!width && this._settings.scrollVisible && !env.$customScroll){\r\n\t\t\tthis._viewobj.style.pointerEvents=\"none\";\r\n\t\t\twidth = 14;\r\n\t\t}\r\n\r\n\t\tif (!width){\r\n\t\t\tthis._viewobj.style.display = \"none\";\r\n\t\t} else {\r\n\t\t\tthis._viewobj.style.display = \"block\";\r\n\t\t\tif (top)\r\n\t\t\t\tthis._viewobj.style.marginTop = top+ \"px\";\r\n\t\t\tthis._viewobj.style[this._settings.scroll == \"x\"?\"width\":\"height\"] =  Math.max(0,value)+\"px\";\r\n\t\t\tthis._viewobj.style[this._settings.scroll == \"x\"?\"height\":\"width\"] = width+\"px\";\r\n\t\t}\r\n\r\n\t\tthis._last_set_size = value;\r\n\t},\r\n\tgetScroll:function(){\r\n\t\treturn Math.round(this._settings.scrollPos*this._settings.zoom);\r\n\t},\r\n\tgetSize:function(){\r\n\t\treturn Math.round((this._settings.scrollWidth||this._settings.scrollHeight)*this._settings.zoom);\r\n\t},\r\n\t_fixSize(){\r\n\t\tconst pos = this.getScroll();\r\n\t\tconst max = Math.max(this.getSize() - this._last_set_size, 0);\r\n\t\tif (pos > max)\r\n\t\t\tthis.scrollTo(max);\r\n\t},\r\n\tscrollTo:function(value){\r\n\t\tif (value<0)\r\n\t\t\tvalue = 0;\r\n\t\tvar config = this._settings;\r\n\r\n\t\tvalue = value / config.zoom;\r\n\t\t//safety check for negative values\r\n\t\tif (value < 0) value = 0;\r\n\r\n\t\t//apply new position\r\n\t\tif (value != this._settings.scrollPos){\r\n\t\t\tthis._viewobj[config.scroll == \"x\"?\"scrollLeft\":\"scrollTop\"] = value;\r\n\t\t\tthis._onscroll_inner(value, true);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t_onscroll:function(){\t\r\n\t\tvar x = this._viewobj[this._settings.scroll == \"x\"?\"scrollLeft\":\"scrollTop\"];\r\n\t\tif (Math.floor(x) != Math.floor(this._settings.scrollPos))\r\n\t\t\tthis._onscroll_inner(x, false);\r\n\t},\r\n\t_onscroll_inner:function(value, api){\r\n\t\t//size of scroll area\r\n\t\tvar height = (this._settings.scrollWidth||this._settings.scrollHeight);\r\n\t\t//if we scrolled to the end of the area\r\n\t\tif (value >= height - this._last_set_size/(api?this._settings.zoom:1)) {\r\n\t\t\t//set value so the last row is visible\r\n\t\t\tvalue = Math.max(0, height - this._last_set_size/this._settings.zoom);\r\n\t\t}\r\n\t\t\r\n\t\tthis._settings.scrollPos = value || 0;\r\n\t\tthis.callEvent(\"onScroll\",[this.getScroll()]);\r\n\t},\r\n\tactiveArea:function(area, x_mode){\r\n\t\tthis._x_scroll_mode = x_mode;\r\n\t\t_event(area, \"wheel\", this._on_wheel,{bind:this, passive:false});\r\n\t\tthis._add_touch_events(area);\r\n\t},\r\n\r\n\t_add_touch_events: function(area){\r\n\t\tif(!env.touch && window.navigator.pointerEnabled){\r\n\t\t\taddCss(area,\"webix_scroll_touch_ie\",true);\r\n\t\t\t_event(area, \"pointerdown\", function(e){\r\n\t\t\t\tif(e.pointerType == \"touch\" || e.pointerType == \"pen\"){\r\n\t\t\t\t\tthis._start_context = Touch._get_context_m(e);\r\n\t\t\t\t\tthis._start_scroll_pos = this.getScroll();\r\n\t\t\t\t}\r\n\t\t\t},{bind:this});\r\n\r\n\t\t\tevent(document.body, \"pointermove\", function(e){\r\n\t\t\t\tvar scroll;\r\n\t\t\t\tif(this._start_context){\r\n\t\t\t\t\tthis._current_context = Touch._get_context_m(e);\r\n\t\t\t\t\tif(this._settings.scroll == \"x\" ){\r\n\t\t\t\t\t\tscroll = this._current_context.x - this._start_context.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(this._settings.scroll == \"y\"){\r\n\t\t\t\t\t\tscroll = this._current_context.y - this._start_context.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(scroll && Math.abs(scroll) > 5){\r\n\t\t\t\t\t\tthis.scrollTo(this._start_scroll_pos - scroll);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},{bind:this});\r\n\t\t\tevent(window, \"pointerup\", function(){\r\n\t\t\t\tif(this._start_context){\r\n\t\t\t\t\tthis._start_context = this._current_context = null;\r\n\t\t\t\t}\r\n\t\t\t},{bind:this});\r\n\t\t}\r\n\r\n\t},\r\n\t_on_wheel:function(e){\r\n\t\tlet dir = 0;\r\n\t\tconst step = e.deltaMode === 0 ? 30 : 1;\r\n\r\n\t\tif (e.ctrlKey)\r\n\t\t\treturn false;\r\n\r\n\t\tif (e.deltaX && Math.abs(e.deltaX) > Math.abs(e.deltaY)){\r\n\t\t\t//x-scroll\r\n\t\t\tif (this._x_scroll_mode && this._settings.scrollVisible)\r\n\t\t\t\tdir = e.deltaX / step;\r\n\t\t} else {\r\n\t\t\t//y-scroll\r\n\t\t\tif (!this._x_scroll_mode && this._settings.scrollVisible){\r\n\t\t\t\tif (isUndefined(e.deltaY))\r\n\t\t\t\t\tdir = e.detail;\r\n\t\t\t\telse\r\n\t\t\t\t\tdir = e.deltaY / step;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Safari requires target preserving\r\n\t\t// (used in _check_rendered_cols of DataTable)\r\n\t\tif(env.isSafari)\r\n\t\t\tthis._scroll_trg = e.target;\r\n\r\n\t\tif (dir)\r\n\t\t\tif (this.scrollTo(this.getScroll() + dir*this._settings.scrollStep))\r\n\t\t\t\treturn preventEvent(e);\r\n\r\n\t}\r\n};\r\n\r\n\r\nconst view = protoUI(api, EventSystem, Settings);\r\nexport default {api, view};","import {extend, bind} from \"../../webix/helpers\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\n\r\nconst Mixin = {\r\n\tfilterByAll:function(){\r\n\t\t//we need to use dynamic function creating\r\n\t\tvar server = false;\r\n\t\tthis.data.silent(function(){\r\n\t\t\tthis.filter();\r\n\t\t\tvar first = false;\r\n\t\t\tfor (var key in this._filter_elements){\r\n\t\t\t\tassert(key, \"empty column id for column with filtering\");\r\n\t\t\t\tif(!this.isColumnVisible(key))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar record = this._filter_elements[key];\r\n\t\t\t\tvar originvalue = record[2].getValue(record[0]);\r\n\r\n\t\t\t\t//saving last filter value, for usage in getState\r\n\t\t\t\tvar inputvalue = originvalue;\r\n\t\t\t\tif (record[1].prepare)\r\n\t\t\t\t\tinputvalue = record[1].prepare.call(record[2], inputvalue, record[1], this);\r\n\r\n\t\t\t\t//preserve original value\r\n\t\t\t\trecord[1].value = originvalue;\r\n\t\t\t\tvar compare = record[1].compare;\r\n\r\n\t\t\t\tif (!this.callEvent(\"onBeforeFilter\",[key, inputvalue, record[1]])) continue;\r\n\t\t\t\tif(record[2].$server || server){ //if one of filters is server side, do not run any client side filters\r\n\t\t\t\t\tserver = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (inputvalue === \"\") continue;\r\n\r\n\t\t\t\t\tif (compare){\r\n\t\t\t\t\t\tcompare = this._multi_compare(key, compare);\r\n\t\t\t\t\t\tthis.filter(bind(function(obj, value){\r\n\t\t\t\t\t\t\tif (!obj) return false;\r\n\t\t\t\t\t\t\treturn compare(obj[key], value, obj);\r\n\t\t\t\t\t\t},this), inputvalue, first);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.filter(key, inputvalue, first);\r\n\r\n\t\t\t\t\tfirst = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (server)\r\n\t\t\t\tthis._runServerFilter();\r\n\r\n\t\t}, this);\r\n\r\n\t\tif (!server){\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.callEvent(\"onAfterFilter\",[]);\r\n\t\t}\r\n\t},\r\n\t_multi_compare: function(key, compare){\r\n\t\tvar column = this.getColumnConfig(key);\r\n\t\tvar separator = column ? column.optionslist : null;\r\n\r\n\t\t//default mode\r\n\t\tif (!separator) \r\n\t\t\treturn compare;\r\n\r\n\t\tif(typeof separator != \"string\")\r\n\t\t\tseparator = \",\";\r\n\r\n\t\treturn function(itemValue, inputValue, obj){\r\n\t\t\tif(!itemValue)\r\n\t\t\t\treturn false;\r\n\t\t\tvar ids = itemValue.toString().split(separator);\r\n\t\t\tfor (var i = 0; i < ids.length; i++) {\r\n\t\t\t\tif (compare(ids[i], inputValue, obj))\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tfilterMode_setter:function(mode){\r\n\t\treturn extend(this.data._filterMode, mode, true);\r\n\t},\r\n\tgetFilter:function(columnId){\r\n\t\tconst filter = this._filter_elements[columnId];\r\n\r\n\t\tif (filter && filter[2]._get_filter)\r\n\t\t\treturn filter[2]._get_filter(filter[0]);\r\n\t\tif (filter && filter[2].getInputNode)\r\n\t\t\treturn filter[2].getInputNode(filter[0]);\r\n\t\treturn null;\r\n\t},\r\n\tregisterFilter:function(node, config, obj){\r\n\t\tthis._filter_elements[config.columnId] = [node, config, obj];\r\n\t},\r\n\tcollectValues:function(id, mode){\r\n\t\tlet values;\r\n\t\tlet obj = this.getColumnConfig(id);\r\n\t\tlet options = (mode && mode.visible) ? null : obj.collection;\r\n\r\n\t\tif (options)\r\n\t\t\tvalues = this._collectValues.call(options, \"id\", \"value\");\r\n\t\telse values = this._collectValues(obj.id, obj.id);\r\n\r\n\t\tlet result  = { values: values };\r\n\t\tthis.callEvent(\"onCollectValues\", [id, result]);\r\n\t\treturn result.values;\r\n\t},\r\n\t_collectValues:function(id, value){\r\n\t\tlet checks = { \"\" : true };\r\n\t\tlet values = [];\r\n\r\n\t\tthis.data.each(function(obj){\r\n\t\t\tlet lineId = obj ? obj[id] : \"\";\r\n\r\n\t\t\t//special handling for 0 values\r\n\t\t\tif (lineId === 0) lineId = \"0\";\r\n\t\t\t//convert to string to create a valid ID\r\n\t\t\tif (typeof lineId == \"object\")\r\n\t\t\t\tlineId = String(lineId);\r\n\r\n\t\t\tif (lineId !== undefined && !checks[lineId]){\r\n\t\t\t\tchecks[lineId] = true;\r\n\t\t\t\tvalues.push({ id:lineId, value:obj[value] });\r\n\t\t\t}\r\n\t\t}, this, true);\r\n\r\n\t\tif (values.length){\r\n\t\t\tlet type = typeof values[0].value === \"string\" ? \"string\" : \"raw\";\r\n\t\t\tvalues.sort( this.data.sorting.create({ as:type, by:\"value\", dir:\"asc\" }) );\r\n\t\t}\r\n\t\treturn values;\r\n\t},\r\n\t_runServerFilter: function(){\r\n\t\tthis.loadNext(0, 0, 0, 0, 1).then((data) => {\r\n\t\t\tif (this.editStop)this.editStop();\r\n\t\t\tthis.clearAll(true);\r\n\t\t\tthis.parse(data);\r\n\t\t\tthis.callEvent(\"onAfterFilter\",[]);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import {bind, extend, isUndefined} from \"../../webix/helpers\";\r\nimport {_event} from \"../../webix/htmlevents\";\r\nimport {assert} from \"../../webix/debug\";\r\nimport SelectionModel from \"../../core/selectionmodel\";\r\nimport env from \"../../webix/env\";\r\n\r\nconst Mixin = {\r\n\thover_setter:function(value){\r\n\t\tif (value && !this._hover_initialized){\r\n\t\t\tthis._enable_mouse_move();\r\n\t\t\tthis.config.experimental = true;\r\n\r\n\t\t\tthis.attachEvent(\"onMouseMoving\", e => {\r\n\t\t\t\tlet pos = this.locate(e);\r\n\r\n\t\t\t\t// when we click inner html element, edge calls mousemove with incorrect e.target\r\n\t\t\t\tif(!pos && env.isEdge && e.relatedTarget)\r\n\t\t\t\t\tpos = this.locate(e.relatedTarget);\r\n\r\n\t\t\t\tconst row = pos ? pos.row : null;\r\n\r\n\t\t\t\tif (this._last_hover != row){\r\n\t\t\t\t\tif (this._last_hover)\r\n\t\t\t\t\t\tthis.removeRowCss(this._last_hover, this._settings.hover);\r\n\r\n\t\t\t\t\tthis._last_hover = row;\r\n\t\t\t\t\tif (this._last_hover)\r\n\t\t\t\t\t\tthis.addRowCss( this._last_hover, this._settings.hover );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t_event(this.$view, \"mouseout\", e => {\r\n\t\t\t\tconst trg = e.target;\r\n\r\n\t\t\t\t// inner html elements blinking in case of hover:true\r\n\t\t\t\t// ie and edge call mouseout when clicking inner html element\r\n\t\t\t\tif (this._last_hover && document.body.contains(trg)){\r\n\t\t\t\t\tconst pos = e.relatedTarget ? this.locate(e.relatedTarget) : null;\r\n\t\t\t\t\tif (!pos){\r\n\t\t\t\t\t\tthis.removeRowCss(this._last_hover, this._settings.hover);\r\n\t\t\t\t\t\tthis._last_hover = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis._hover_initialized = 1;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tselect_setter:function(value){\r\n\t\tif (!this.select && value){\r\n\t\t\textend(this, this._selections._commonselect, true);\r\n\t\t\tif (value === true)\r\n\t\t\t\tvalue = \"row\";\r\n\t\t\telse if (value == \"multiselect\"){\r\n\t\t\t\tvalue = \"row\";\r\n\t\t\t\tthis._settings.multiselect = true;\r\n\t\t\t}\r\n\t\t\tassert(this._selections[value], \"Unknown selection mode: \"+value);\r\n\t\t\textend(this, this._selections[value], true);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\tgetSelectedId:function(mode){\r\n\t\treturn  mode?[]:\"\"; //dummy placeholder\r\n\t},\r\n\tgetSelectedItem:function(mode){\r\n\t\treturn SelectionModel.getSelectedItem.call(this, mode);\r\n\t},\r\n\t_selections:{\r\n\t\t//shared methods for all selection models\r\n\t\t_commonselect:{\r\n\t\t\t_select_css:\" webix_cell_select\",\r\n\t\t\t$init:function(){\r\n\t\t\t\tthis._reinit_selection();\r\n\r\n\t\t\t\tthis.on_click.webix_cell = bind(this._click_before_select, this);\r\n\r\n\t\t\t\t//temporary stab, actual handlers need to be created\r\n\t\t\t\tthis._data_cleared = this._data_filtered = function(){\r\n\t\t\t\t\tthis.unselect();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.data.attachEvent(\"onStoreUpdated\",bind(this._data_updated,this));\r\n\t\t\t\tthis.data.attachEvent(\"onSyncApply\", bind(this._data_synced, this));\r\n\t\t\t\tthis.data.attachEvent(\"onClearAll\", bind(this._data_cleared,this));\r\n\t\t\t\tthis.data.attachEvent(\"onAfterFilter\", bind(this._data_filtered,this));\r\n\t\t\t\tthis.data.attachEvent(\"onIdChange\", bind(this._id_changed,this));\r\n\r\n\t\t\t\tthis.$ready.push(SelectionModel._set_noselect);\r\n\t\t\t},\r\n\t\t\t_id_changed:function(oldid, newid){\r\n\t\t\t\tfor (let i=0; i<this._selected_rows.length; i++)\r\n\t\t\t\t\tif (this._selected_rows[i] == oldid)\r\n\t\t\t\t\t\tthis._selected_rows[i] = newid;\r\n\r\n\t\t\t\tfor (let i=0; i<this._selected_areas.length; i++){\r\n\t\t\t\t\tvar item = this._selected_areas[i];\r\n\t\t\t\t\tif (item.row == oldid){\r\n\t\t\t\t\t\toldid = this._select_key(item);\r\n\t\t\t\t\t\titem.row = newid;\r\n\t\t\t\t\t\tnewid = this._select_key(item);\r\n\t\t\t\t\t\titem.id = newid;\r\n\r\n\t\t\t\t\t\tdelete this._selected_pull[oldid];\r\n\t\t\t\t\t\tthis._selected_pull[newid] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_data_updated:function(id, obj, type){\r\n\t\t\t\tif (type == \"delete\") \r\n\t\t\t\t\tthis.unselect(id);\r\n\t\t\t},\r\n\t\t\t_data_synced:function(){\r\n\t\t\t\tfor (let i = this._selected_areas.length-1; i >=0 ; i--){\r\n\t\t\t\t\tvar row = this._selected_areas[i].row;\r\n\t\t\t\t\tif (!this.exists(row)){\r\n\t\t\t\t\t\tthis._selected_areas.splice(i,1);\r\n\t\t\t\t\t\tdelete this._selected_pull[row];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_reinit_selection:function(){\r\n\t\t\t\t//list of selected areas\r\n\t\t\t\tthis._selected_areas=[];\r\n\t\t\t\t//key-value hash of selected areas, for fast search\r\n\t\t\t\tthis._selected_pull={};\r\n\t\t\t\t//used to track selected cell objects\r\n\t\t\t\tthis._selected_rows = [];\r\n\t\t\t},\r\n\t\t\tisSelected:function(id, column){\r\n\t\t\t\tvar key;\r\n\t\t\t\tif (!isUndefined(column))\r\n\t\t\t\t\tkey = this._select_key({ row:id, column: column});\r\n\t\t\t\telse \r\n\t\t\t\t\tkey = typeof id === \"object\"? this._select_key(id) : id;\r\n\r\n\t\t\t\treturn this._selected_pull[key];\r\n\t\t\t},\r\n\t\t\tgetSelectedId:function(asArray, plain){\r\n\t\t\t\tvar result;\r\n\r\n\t\t\t\t//if multiple selections was created - return array\r\n\t\t\t\t//in case of single selection, return value or array, when asArray parameter provided\r\n\t\t\t\tif (this._selected_areas.length > 1 || asArray){\r\n\t\t\t\t\tresult = [].concat(this._selected_areas);\r\n\t\t\t\t\tif (plain)\r\n\t\t\t\t\t\tfor (let i = 0; i < result.length; i++)\r\n\t\t\t\t\t\t\tresult[i]=result[i].id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._selected_areas[0];\r\n\t\t\t\t\tif (plain && result)\r\n\t\t\t\t\t\treturn result.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\t_id_to_string:function(){\r\n\t\t\t\treturn this.row;\r\n\t\t\t},\r\n\t\t\t_select:function(data, preserve){\r\n\t\t\t\tvar key = this._select_key(data);\r\n\t\t\t\t//don't allow selection on unnamed columns\r\n\t\t\t\tif (key === null) return;\r\n\r\n\t\t\t\tif (preserve === -1)\r\n\t\t\t\t\treturn this._unselect(data);\r\n\r\n\t\t\t\tdata.id = key;\r\n\t\t\t\tdata.toString = this._id_to_string;\r\n\r\n\t\t\t\tif (!this.callEvent(\"onBeforeSelect\",[data, preserve])) return false;\r\n\r\n\t\t\t\t//ignore area, if it was already selected and\r\n\t\t\t\t// - we are preserving existing selection\r\n\t\t\t\t// - this is the only selected area\r\n\t\t\t\t// otherwise we need to clear other selected areas\r\n\t\t\t\tif (this._selected_pull[key] && (preserve || this._selected_areas.length == 1)) return;\r\n\r\n\t\t\t\tif (!preserve)\r\n\t\t\t\t\tthis._clear_selection();\r\n\r\n\t\t\t\tthis._selected_areas.push(data);\r\n\t\t\t\tthis._selected_pull[key] = true;\r\n\r\n\t\t\t\tthis.callEvent(\"onAfterSelect\",[data, preserve]);\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis._finalize_select(this._post_select(data));\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t_clear_selection:function(){\r\n\t\t\t\tif (!this._selected_areas.length) return false;\r\n\r\n\t\t\t\tfor (let i=0; i<this._selected_areas.length; i++){\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeUnSelect\", [this._selected_areas[i]])) return false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i=0; i<this._selected_rows.length; i++)\r\n\t\t\t\t\tthis.data.removeMark(this._selected_rows[i], \"webix_selected\");\r\n\t\t\t\t\r\n\t\t\t\tvar cols = this._settings.columns;\r\n\t\t\t\tif (cols)\r\n\t\t\t\t\tfor (let i = 0; i < cols.length; i++) {\r\n\t\t\t\t\t\tcols[i].$selected = null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tvar data = this._selected_areas;\r\n\t\t\t\tthis._reinit_selection();\r\n\t\t\t\tfor (let i=0; i<data.length; i++){\r\n\t\t\t\t\tthis.callEvent(\"onAfterUnSelect\", [data[i]]);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tunselectAll:function(){\r\n\t\t\t\tthis.clearSelection();\r\n\t\t\t},\r\n\t\t\tselectAll:function(){\r\n\t\t\t\tthis.selectRange();\r\n\t\t\t},\r\n\t\t\tclearSelection:function(){\r\n\t\t\t\tif (this._clear_selection()){\r\n\t\t\t\t\tthis.callEvent(\"onSelectChange\",[]);\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_unselect:function(data){\r\n\t\t\t\tvar key = this._select_key(data);\r\n\t\t\t\tif (!key && this._selected_areas.length){\r\n\t\t\t\t\tthis.clearSelection();\r\n\t\t\t\t\tthis.callEvent(\"onSelectChange\", []);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//ignore area, if it was already selected\r\n\t\t\t\tif (!this._selected_pull[key]) return;\r\n\r\n\t\t\t\tif (!this.callEvent(\"onBeforeUnSelect\",[data])) return false;\r\n\r\n\t\t\t\tfor (let i = 0; i < this._selected_areas.length; i++){\r\n\t\t\t\t\tif (this._selected_areas[i].id == key){\r\n\t\t\t\t\t\tthis._selected_areas.splice(i,1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdelete this._selected_pull[key];\r\n\r\n\t\t\t\tthis.callEvent(\"onAfterUnSelect\",[data]);\r\n\t\t\t\tthis._finalize_select(0, this._post_unselect(data));\r\n\t\t\t},\r\n\t\t\t_add_item_select:function(id){\r\n\t\t\t\tvar item = this.getItem(id);\r\n\t\t\t\treturn this.data.addMark(item.id, \"webix_selected\", 0, { $count : 0 }, true);\r\n\r\n\t\t\t},\r\n\t\t\t_finalize_select:function(id){\r\n\t\t\t\tif (id)\r\n\t\t\t\t\tthis._selected_rows.push(id);\r\n\t\t\t\tif (!this._silent_selection){\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t\tthis.callEvent(\"onSelectChange\",[]);\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_click_before_select:function(e, id){\r\n\t\t\t\tvar preserve = e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\");\r\n\t\t\t\tvar range = e.shiftKey;\r\n\r\n\t\t\t\tif (!this._settings.multiselect && this._settings.select != \"multiselect\" && this._settings.select != \"area\")\r\n\t\t\t\t\tpreserve = range = false;\r\n\r\n\t\t\t\tif (range && this._selected_areas.length){\r\n\t\t\t\t\tvar last = this._selected_areas[this._selected_areas.length-1];\r\n\t\t\t\t\tthis._selectRange(id, last);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preserve && this._selected_pull[this._select_key(id)])\r\n\t\t\t\t\t\tthis._unselect(id);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis._select({ row: id.row, column:id.column }, preserve);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_mapSelection:function(callback, column, row){\r\n\t\t\t\tvar cols = this._settings.columns;\r\n\t\t\t\t//selected columns only\r\n\t\t\t\tif (column){\r\n\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\tfor (let i=0; i<cols.length; i++)\r\n\t\t\t\t\t\tif (cols[i].$selected)\r\n\t\t\t\t\t\t\ttemp.push(cols[i]);\r\n\t\t\t\t\tcols = temp;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rows = this.data.order;\r\n\t\t\t\tvar row_ind = 0;\r\n\r\n\t\t\t\tfor (let i=0; i<rows.length; i++){\r\n\t\t\t\t\tvar item = this.getItem(rows[i]);\r\n\t\t\t\t\tif (!item) continue; //dyn loading, row is not available\r\n\t\t\t\t\tvar selection = this.data.getMark(item.id, \"webix_selected\");\r\n\t\t\t\t\tif (selection || column){\r\n\t\t\t\t\t\tvar col_ind = 0;\r\n\t\t\t\t\t\tfor (var j = 0; j < cols.length; j++){\r\n\t\t\t\t\t\t\tvar id = cols[j].id;\r\n\t\t\t\t\t\t\tif (row || column || selection[id]){\r\n\t\t\t\t\t\t\t\tif (callback)\r\n\t\t\t\t\t\t\t\t\titem[id] = callback(item[id], rows[i], id, row_ind, col_ind);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\treturn {row:rows[i], column:id};\r\n\t\t\t\t\t\t\t\tcol_ind++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//use separate row counter, to count only selected rows\r\n\t\t\t\t\t\trow_ind++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, \r\n\r\n\t\trow : {\r\n\t\t\t_select_css:\" webix_row_select\",\r\n\t\t\t_select_key:function(data){ return data.row; },\r\n\t\t\tselect:function(row_id, preserve){\r\n\t\t\t\t//when we are using id from mouse events\r\n\t\t\t\tif (row_id) row_id = row_id.toString();\r\n\r\n\t\t\t\tassert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\r\n\t\t\t\tthis._select({ row:row_id }, preserve);\r\n\t\t\t},\r\n\t\t\t_post_select:function(data){\r\n\t\t\t\tthis._add_item_select(data.row).$row = true;\r\n\t\t\t\treturn data.row;\r\n\t\t\t},\r\n\t\t\tunselect:function(row_id){\r\n\t\t\t\tthis._unselect({row : row_id});\r\n\t\t\t},\r\n\t\t\t_post_unselect:function(data){\r\n\t\t\t\tthis.data.removeMark(data.row, \"webix_selected\", 0, 1);\r\n\t\t\t\treturn data.row;\r\n\t\t\t},\r\n\t\t\tmapSelection:function(callback){\r\n\t\t\t\treturn this._mapSelection(callback, false, true);\r\n\t\t\t},\r\n\t\t\t_selectRange:function(a,b){\r\n\t\t\t\treturn this.selectRange(a.row, b.row);\r\n\t\t\t},\r\n\t\t\tselectRange:function(row_id, end_row_id, preserve){\r\n\t\t\t\tif (isUndefined(preserve)) preserve = true;\r\n\r\n\t\t\t\tvar row_start_ind = row_id ? this.getIndexById(row_id) : 0;\r\n\t\t\t\tvar row_end_ind = end_row_id ? this.getIndexById(end_row_id) : this.data.order.length-1;\r\n\r\n\t\t\t\tif (row_start_ind>row_end_ind){\r\n\t\t\t\t\tvar temp = row_start_ind;\r\n\t\t\t\t\trow_start_ind = row_end_ind;\r\n\t\t\t\t\trow_end_ind = temp;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._silent_selection = true;\r\n\t\t\t\tfor (let i=row_start_ind; i<=row_end_ind; i++){\r\n\t\t\t\t\tvar id = this.getIdByIndex(i);\r\n\t\t\t\t\tif (!id){\r\n\t\t\t\t\t\tif (row_id)\r\n\t\t\t\t\t\t\tthis.select(row_id);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.select(id, preserve);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_selection = false;\r\n\t\t\t\tthis._finalize_select();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcell:{\r\n\t\t\t_select_key:function(data){\r\n\t\t\t\tif (!data.column) return null;\r\n\t\t\t\treturn data.row+\"_\"+data.column; \r\n\t\t\t},\r\n\t\t\tselect:function(row_id, column_id, preserve){\r\n\t\t\t\tassert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\r\n\t\t\t\tthis._select({row:row_id, column:column_id}, preserve);\r\n\t\t\t},\r\n\t\t\t_post_select:function(data){\r\n\t\t\t\tvar sel = this._add_item_select(data.row);\r\n\t\t\t\tsel.$count++;\r\n\t\t\t\tsel[data.column]=true;\r\n\t\t\t\treturn data.row;\r\n\t\t\t},\r\n\t\t\tunselect:function(row_id, column_id){\r\n\t\t\t\tthis._unselect({row:row_id, column:column_id});\r\n\t\t\t},\r\n\t\t\t_post_unselect:function(data){\r\n\t\t\t\tvar sel = this._add_item_select(data.row);\r\n\t\t\t\tsel.$count-- ;\r\n\t\t\t\tsel[data.column] = false;\r\n\t\t\t\tif (sel.$count<=0)\r\n\t\t\t\t\tthis.data.removeMark(data.row,\"webix_selected\");\r\n\t\t\t\treturn data.row;\r\n\t\t\t},\r\n\t\t\tmapSelection:function(callback){\r\n\t\t\t\treturn this._mapSelection(callback, false, false);\r\n\t\t\t},\r\n\t\t\t_selectRange:function(a,b){\r\n\t\t\t\treturn this.selectRange(a.row, a.column, b.row, b.column);\r\n\t\t\t},\r\n\r\n\t\t\tselectRange:function(row_id, column_id, end_row_id, end_column_id, preserve){\r\n\t\t\t\tif (isUndefined(preserve)) preserve = true;\r\n\r\n\t\t\t\tvar row_start_ind = row_id ? this.getIndexById(row_id) : 0;\r\n\t\t\t\tvar row_end_ind = end_row_id ? this.getIndexById(end_row_id) : this.data.order.length-1;\r\n\r\n\t\t\t\tvar col_start_ind = column_id ? this.getColumnIndex(column_id) : 0;\r\n\t\t\t\tvar col_end_ind = end_column_id ? this.getColumnIndex(end_column_id) : this._columns.length-1;\r\n\r\n\t\t\t\tif (row_start_ind>row_end_ind){\r\n\t\t\t\t\tlet temp = row_start_ind;\r\n\t\t\t\t\trow_start_ind = row_end_ind;\r\n\t\t\t\t\trow_end_ind = temp;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (col_start_ind>col_end_ind){\r\n\t\t\t\t\tlet temp = col_start_ind;\r\n\t\t\t\t\tcol_start_ind = col_end_ind;\r\n\t\t\t\t\tcol_end_ind = temp;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_selection = true;\r\n\t\t\t\tfor (let i=row_start_ind; i<=row_end_ind; i++)\r\n\t\t\t\t\tfor (let j=col_start_ind; j<=col_end_ind; j++)\r\n\t\t\t\t\t\tthis.select(this.getIdByIndex(i), this.columnId(j), preserve);\r\n\t\t\t\tthis._silent_selection = false;\r\n\t\t\t\tthis._finalize_select();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcolumn:{\r\n\t\t\t_select_css:\" webix_column_select\",\r\n\t\t\t_select_key:function(data){ return data.column; },\r\n\t\t\t_id_to_string:function(){\r\n\t\t\t\treturn this.column;\r\n\t\t\t},\r\n\t\t\t//returns box-like area, with ordered selection cells\r\n\t\t\tselect:function(column_id, preserve){\r\n\t\t\t\tthis._select({ column:column_id }, preserve);\r\n\t\t\t},\r\n\t\t\t_post_select:function(data){\r\n\t\t\t\tthis._settings.columns[this.getColumnIndex(data.column)].$selected = true;\r\n\t\t\t\tif (!this._silent_selection)\r\n\t\t\t\t\tthis._render_header_and_footer();\r\n\t\t\t},\r\n\t\t\tunselect:function(column_id){\r\n\t\t\t\tthis._unselect({column : column_id});\r\n\t\t\t},\r\n\t\t\t_post_unselect:function(data){\r\n\t\t\t\tthis._settings.columns[this.getColumnIndex(data.column)].$selected = null;\r\n\t\t\t\tthis._render_header_and_footer();\r\n\t\t\t},\r\n\t\t\tmapSelection:function(callback){\r\n\t\t\t\treturn this._mapSelection(callback, true, false);\r\n\t\t\t},\r\n\t\t\t_selectRange:function(a,b){\r\n\t\t\t\treturn this.selectRange(a.column, b.column);\r\n\t\t\t},\r\n\t\t\tselectRange:function(column_id, end_column_id, preserve){\r\n\t\t\t\tif (isUndefined(preserve)) preserve = true;\r\n\r\n\t\t\t\tvar column_start_ind = column_id ? this.getColumnIndex(column_id) : 0;\r\n\t\t\t\tvar column_end_ind = end_column_id ? this.getColumnIndex(end_column_id) : this._columns.length-1;\r\n\r\n\t\t\t\tif (column_start_ind>column_end_ind){\r\n\t\t\t\t\tvar temp = column_start_ind;\r\n\t\t\t\t\tcolumn_start_ind = column_end_ind;\r\n\t\t\t\t\tcolumn_end_ind = temp;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._silent_selection = true;\r\n\t\t\t\tfor (let i=column_start_ind; i<=column_end_ind; i++)\r\n\t\t\t\t\tthis.select(this.columnId(i), preserve);\r\n\r\n\t\t\t\tthis._silent_selection = false;\r\n\r\n\t\t\t\tthis._render_header_and_footer();\r\n\t\t\t\tthis._finalize_select();\r\n\t\t\t},\r\n\t\t\t_data_synced:function(){\r\n\t\t\t\t//do nothing, as columns are not changed\r\n\t\t\t}\r\n\t\t},\r\n\t\tarea: {\r\n\t\t\t_select_key:function(data){\r\n\t\t\t\treturn data.row+\"_\"+data.column;\r\n\t\t\t},\r\n\t\t\tgetSelectedId: function(asArray){\r\n\t\t\t\tvar area = this.getSelectArea();\r\n\t\t\t\tvar result = [];\r\n\t\t\t\tif(area){\r\n\t\t\t\t\tif(asArray && ( area.start.row != area.end.row || area.start.column != area.end.column )){\r\n\t\t\t\t\t\tvar row_start_ind = this.getIndexById(area.start.row);\r\n\t\t\t\t\t\tvar row_end_ind = this.getIndexById(area.end.row);\r\n\t\t\t\t\t\t//filtering in process\r\n\t\t\t\t\t\tif(row_start_ind == -1 || row_end_ind == -1)\r\n\t\t\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t\t\tvar col_start_ind = this.getColumnIndex(area.start.column);\r\n\t\t\t\t\t\tvar col_end_ind = this.getColumnIndex(area.end.column);\r\n\r\n\t\t\t\t\t\tfor (let i=row_start_ind; i<=row_end_ind; i++)\r\n\t\t\t\t\t\t\tfor (var j=col_start_ind; j<=col_end_ind; j++)\r\n\t\t\t\t\t\t\t\tresult.push({row:this.getIdByIndex(i), column:this.columnId(j)});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tresult.push(area.end);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn asArray?result:result[0];\r\n\t\t\t},\r\n\t\t\tunselect:function(){\r\n\t\t\t\tthis._unselect();\r\n\t\t\t},\r\n\t\t\t_unselect: function() {\r\n\t\t\t\tthis.removeSelectArea();\r\n\t\t\t\tthis.callEvent(\"onSelectChange\", []);\r\n\t\t\t},\r\n\t\t\tmapSelection:function(callback){\r\n\t\t\t\tvar select  = this.getSelectArea();\r\n\t\t\t\tif (select){\r\n\t\t\t\t\tvar sind = this.getColumnIndex(select.start.column);\r\n\t\t\t\t\tvar eind = this.getColumnIndex(select.end.column);\r\n\t\t\t\t\tvar srow = this.getIndexById(select.start.row);\r\n\t\t\t\t\tvar erow = this.getIndexById(select.end.row);\r\n\r\n\t\t\t\t\tfor (let i = srow; i <= erow; i++) {\r\n\t\t\t\t\t\tvar rid = this.data.order[i];\r\n\t\t\t\t\t\tvar item = this.getItem(rid);\r\n\t\t\t\t\t\tfor (var j = sind; j <= eind; j++) {\r\n\t\t\t\t\t\t\tvar cid = this._columns[j].id;\r\n\t\t\t\t\t\t\tif (callback)\r\n\t\t\t\t\t\t\t\titem[cid] = callback(item[cid], rid, cid, i-srow, j-sind);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn { row:rid, column:cid };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselect:function(row_id, column_id, preserve){\r\n\t\t\t\tassert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\r\n\t\t\t\tthis._select({row:row_id, column:column_id}, preserve);\r\n\t\t\t},\r\n\t\t\t_selectRange:function(id,last){\r\n\t\t\t\tthis._extendAreaRange(id, last);\r\n\t\t\t},\r\n\t\t\t_select: function(cell){\r\n\t\t\t\t//ctrl-selection is not supported yet, so ignoring the preserve flag\r\n\t\t\t\tthis.addSelectArea(cell,cell,false);\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t_data_synced:function(){\r\n\t\t\t\tif(this._selected_areas.length)\r\n\t\t\t\t\tthis.refreshSelectArea();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import {offset, pos as getPos, preventEvent, remove, removeCss, create, addCss} from \"../../webix/html\";\r\nimport env from \"../../webix/env\";\r\nimport {extend, delay} from \"../../webix/helpers\";\r\nimport {$$} from \"../../ui/core\";\r\nimport {_event, event, eventRemove} from \"../../webix/htmlevents\";\r\nimport AutoScroll from \"../../core/autoscroll\";\r\n\r\n\r\n// #include core/autoscroll.js\r\nconst Mixin = {\r\n\tblockselect_setter:function(value){\r\n\t\tif (value && this._block_sel_flag){\r\n\t\t\tif (env.touch)\r\n\t\t\t\tthis.attachEvent(\"onLongTouch\", this._bs_down);\r\n\t\t\telse \r\n\t\t\t\t_event(this._viewobj, env.mouse.down, this._bs_down, {bind:this});\r\n\r\n\t\t\t_event(this._viewobj, env.mouse.move, this._bs_move, {bind:this});\r\n\t\t\tthis._block_sel_flag = this._bs_ready = this._bs_progress = false;\r\n\t\t\tthis.attachEvent(\"onAfterScroll\", this._update_block_selection);\r\n\t\t\t// auto scroll\r\n\t\t\textend(this, AutoScroll, true);\r\n\t\t\tthis.attachEvent(\"onBeforeAutoScroll\",function(){\r\n\t\t\t\treturn this._bs_progress;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t_block_sel_flag:true,\r\n\t_childOf:function(e, tag){\r\n\t\tvar src = e.target;\r\n\t\twhile (src){\r\n\t\t\tif (src.getAttribute && src.getAttribute(/*@attr*/\"webixignore\")) return false;\r\n\t\t\tif (src == tag)\r\n\t\t\t\treturn true;\r\n\t\t\tsrc = src.parentNode;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_bs_down:function(e){\r\n\t\t// do not listen to mousedown of subview on master\r\n\t\tif (this._settings.subview && this != $$(e.target)) return;\r\n\t\tif (this._childOf(e, this._body)){\r\n\t\t\t//disable block selection when we have an active editor\r\n\t\t\tif (e.target && e.target.tagName == \"INPUT\" || this._rs_process) return;\r\n\r\n\t\t\tthis._bs_position = offset(this._body);\r\n\t\t\tvar pos = env.touch ? e : getPos(e);\r\n\t\t\tthis._bs_ready = [pos.x - this._bs_position.x, pos.y - this._bs_position.y];\r\n\r\n\t\t\tpreventEvent(e);\r\n\t\t\tthis._bs_up_init();\r\n\t\t}\r\n\t},\r\n\t_bs_up_init:function(){\r\n\t\tconst handler = event(document.body, env.mouse.up, e => {\r\n\t\t\teventRemove(handler);\r\n\t\t\treturn this._bs_up(e);\r\n\t\t});\r\n\t},\r\n\t_bs_up:function(e){\r\n\t\tif (this._block_panel){\r\n\t\t\tthis._bs_select(\"select\", true, e);\r\n\t\t\tthis._block_panel = remove(this._block_panel);\r\n\t\t}\r\n\t\tremoveCss(document.body,\"webix_noselect\");\r\n\t\tthis._bs_ready = this._bs_progress = false;\r\n\t\tif (this._auto_scroll_delay)\r\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\t},\r\n\t_update_block_selection: function(){\r\n\t\tif (this._bs_progress)\r\n\t\t\tdelay(this._bs_select, this, [false, false]);\r\n\t},\r\n\t_bs_select:function(mode, theend, e){\r\n\t\tvar start = null;\r\n\t\tif(!this._bs_ready[2])\r\n\t\t\tthis._bs_ready[2] = this._locate_cell_xy.apply(this, this._bs_ready);\r\n\t\tstart = this._bs_ready[2];\r\n\r\n\t\tvar end = this._locate_cell_xy.apply(this, this._bs_progress);\r\n\r\n\t\tif (!this.callEvent(\"onBeforeBlockSelect\", [start, end, theend, e]))\r\n\t\t\treturn;\r\n\r\n\t\tif ((!this._bs_do_select || this._bs_do_select(start, end, theend, e) !== false) && (start.row && end.row)){\r\n\t\t\tif (mode === \"select\"){\r\n\t\t\t\tthis._clear_selection();\r\n\t\t\t\tthis._selectRange(start, end);\r\n\t\t\t} else {\r\n\t\t\t\tvar startx, starty, endx, endy;\r\n\r\n\t\t\t\tif (mode === \"box\"){\r\n\t\t\t\t\tstartx = Math.min(this._bs_ready[0],this._bs_progress[0]);\r\n\t\t\t\t\tendx = Math.max(this._bs_ready[0],this._bs_progress[0]);\r\n\r\n\t\t\t\t\tstarty = Math.min(this._bs_ready[1],this._bs_progress[1]);\r\n\t\t\t\t\tendy = Math.max(this._bs_ready[1],this._bs_progress[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar startn = this._cellPosition(start.row, start.column);\r\n\t\t\t\t\tvar endn = this._cellPosition(end.row, end.column);\r\n\t\t\t\t\tvar scroll = this.getScrollState();\r\n\r\n\t\t\t\t\tvar startWidth = startn.width;\r\n\t\t\t\t\tvar endWidth = endn.width;\r\n\r\n\t\t\t\t\tif (this._right_width && this._bs_ready[0] > this._left_width+this._center_width){\r\n\t\t\t\t\t\tstartn.left += this._left_width+this._center_width;\r\n\t\t\t\t\t} else if (this._left_width){\r\n\r\n\t\t\t\t\t\tif (this._bs_ready[0] > this._left_width){\r\n\t\t\t\t\t\t\tif(startn.left < scroll.x){\r\n\t\t\t\t\t\t\t\tstartWidth -= scroll.x-startn.left;\r\n\t\t\t\t\t\t\t\tstartn.left = this._left_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tstartn.left+=this._left_width-scroll.x;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else startn.left -= scroll.x;\r\n\r\n\r\n\r\n\t\t\t\t\tif (this._right_width && this._bs_progress[0] > this._left_width+this._center_width){\r\n\t\t\t\t\t\tendn.left += this._left_width+this._center_width;\r\n\t\t\t\t\t} else if (this._left_width){\r\n\t\t\t\t\t\tif (this._bs_progress[0] > this._left_width){\r\n\t\t\t\t\t\t\tif(endn.left < scroll.x){\r\n\t\t\t\t\t\t\t\tendWidth -= scroll.x-endn.left;\r\n\t\t\t\t\t\t\t\tendn.left = this._left_width;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tendn.left+=this._left_width-scroll.x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else endn.left -= scroll.x;\r\n\r\n\t\t\t\t\tif(this._settings.prerender){\r\n\t\t\t\t\t\tstartn.top -= this._scrollTop;\r\n\t\t\t\t\t\tendn.top -= this._scrollTop;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tstartx = Math.min(startn.left, endn.left);\r\n\t\t\t\t\tendx = Math.max(startn.left+startWidth, endn.left+endWidth);\r\n\r\n\t\t\t\t\tstarty = Math.min(startn.top, endn.top);\r\n\t\t\t\t\tendy = Math.max(startn.top+startn.height, endn.top+endn.height);\r\n\r\n\t\t\t\t\tif (this._settings.topSplit)\r\n\t\t\t\t\t\tstarty += this._getTopSplitOffset(start);\r\n\r\n\t\t\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\t\t\t\t\tif (e && (!env.touch || this._settings.prerender))\r\n\t\t\t\t\t\tthis._auto_scroll_delay = delay(this._auto_scroll, this, [getPos(e)], 250);\r\n\t\t\t\t}\r\n  \r\n\r\n\t\t\t\tvar style = this._block_panel.style;\r\n\t\t\t\tstyle.left = startx+\"px\";\r\n\t\t\t\tstyle.top = starty+\"px\";\r\n\t\t\t\tstyle.width = (endx-startx)+\"px\";\r\n\t\t\t\tstyle.height = (endy-starty)+\"px\";\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (theend)\r\n\t\t\tthis.callEvent(\"onAfterBlockSelect\", [start, end]);\r\n\t},\r\n\t_bs_start:function(){\r\n\t\tthis._block_panel = create(\"div\", {\"class\":\"webix_block_selection\"},\"\");\r\n\r\n\t\tthis._body.appendChild(this._block_panel);\r\n\t},\r\n\t_bs_move:function(e){\r\n\t\tif (this._bs_ready !== false){\r\n\t\t\tif(!this._bs_progress) addCss(document.body,\"webix_noselect\");\r\n\t\t\t\r\n\t\t\tvar pos = env.touch ? env.mouse.context(e) : getPos(e);\r\n\t\t\tvar progress = [pos.x - this._bs_position.x, pos.y - this._bs_position.y];\r\n\r\n\t\t\t//prevent unnecessary block selection while dbl-clicking\r\n\t\t\tif (Math.abs(this._bs_ready[0] - progress[0]) < 5 && Math.abs(this._bs_ready[1] - progress[1]) < 5)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (this._bs_progress === false)\r\n\t\t\t\tthis._bs_start(e);\r\n\r\n\t\t\tthis._bs_progress = progress;\r\n\t\t\tthis._bs_select(this.config.blockselect, false, e);\r\n\r\n\t\t\tif (env.touch) preventEvent(e);\r\n\t\t}\r\n\t},\r\n\t_locate_cell_xy:function(x,y){\r\n\t\tvar inTopSplit = false,\r\n\t\t\trow = null,\r\n\t\t\tcolumn = null;\r\n\r\n\r\n\t\tif (this._right_width && x>this._left_width + this._center_width)\r\n\t\t\tx+= this._x_scroll.getSize()-this._center_width-this._left_width-this._right_width; \r\n\t\telse if (!this._left_width || x>this._left_width)\r\n\t\t\tx+= this._x_scroll.getScroll();\r\n\r\n\t\tif(this._settings.topSplit && this._render_scroll_top > this._settings.topSplit) {\r\n\t\t\tvar splitPos = this._cellPosition(this.getIdByIndex(this._settings.topSplit-1), this.columnId(0));\r\n\t\t\tif(splitPos.top + splitPos.height > y){\r\n\t\t\t\tinTopSplit = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!inTopSplit)\r\n\t\t\ty += this.getScrollState().y;\r\n\r\n\t\tif (x<0) x=0;\r\n\t\tif (y<0) y=0;\r\n\r\n\t\tvar cols = this._settings.columns;\r\n\t\tvar rows = this.data.order;\r\n\r\n\t\tvar summ = 0; \r\n\t\tfor (let i=0; i<cols.length; i++){\r\n\t\t\tsumm+=cols[i].width;\r\n\t\t\tif (summ>=x){\r\n\t\t\t\tcolumn = cols[i].id;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!column)\r\n\t\t\tcolumn = cols[cols.length-1].id;\r\n\r\n\t\tsumm = 0;\r\n\r\n\t\tvar start = this.data.$min || 0;\r\n\t\tif (this._settings.fixedRowHeight){\r\n\t\t\trow = rows[start + Math.floor(y/this._settings.rowHeight)];\r\n\t\t} else for (let i=start; i<rows.length; i++){\r\n\t\t\tsumm+=this._getHeightByIndex(i);\r\n\t\t\tif (summ>=y){\r\n\t\t\t\trow = rows[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!row)\r\n\t\t\trow = rows[rows.length-1];\r\n\r\n\t\treturn {row:row, column:column};\r\n\t},\r\n\t_getTopSplitOffset: function(cell, area){\r\n\t\tvar y = 0,\r\n\t\t\tstartIndex = this.getIndexById(cell.row);\r\n\r\n\t\tif(startIndex >= this._settings.topSplit){\r\n\t\t\tvar startPos = this._cellPosition(this.getIdByIndex(startIndex), cell.column);\r\n\t\t\tvar splitPos = this._cellPosition(this.getIdByIndex(this._settings.topSplit-1), cell.column);\r\n\t\t\tif(splitPos.top + splitPos.height > startPos.top)\r\n\t\t\t\ty = splitPos.top + splitPos.height - ((startPos.top > 0 || !area) ? startPos.top : 0);\r\n\t\t}\r\n\r\n\t\treturn y;\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import {pos, addCss, denySelect, removeCss, allowSelect, offset, posRelative} from \"../../webix/html\";\r\nimport {bind, delay} from \"../../webix/helpers\";\r\nimport {$$, ui} from \"../../ui/core\";\r\nimport {_event} from \"../../webix/htmlevents\";\r\n\r\n//indirect import\r\nimport \"../resizearea\";\r\n\r\nconst Mixin = {\r\n\r\n\tresizeRow_setter:function(value){\r\n\t\tthis._settings.scrollAlignY = false;\r\n\t\tthis._settings.fixedRowHeight = false;\r\n\t\treturn this.resizeColumn_setter(value);\r\n\t},\r\n\tresizeColumn_setter:function(value){\r\n\t\tif (value && this._rs_init_flag){\r\n\t\t\t_event(this._viewobj, \"mousemove\", this._rs_move, {bind:this});\r\n\t\t\t_event(this._viewobj, \"mousedown\", this._rs_down, {bind:this});\r\n\t\t\t_event(this._viewobj, \"mouseup\", this._rs_up, {bind:this});\r\n\t\t\tthis._rs_init_flag = false;\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\t_rs_init_flag:true,\r\n\t_rs_down:function(e){\r\n\t\t// do not listen to mousedown of subview on master\r\n\t\tif (this._settings.subview && this != $$(e.target)) return;\r\n\t\t//if mouse was near border\r\n\t\tif (!this._rs_ready) return;\r\n\t\tthis._rs_process = [pos(e),this._rs_ready[2]];\r\n\t\taddCss(document.body,\"webix_noselect\");\r\n\t\tdenySelect();\r\n\t},\r\n\t_rs_up:function(){\r\n\t\tthis._rs_process = false;\r\n\t\tremoveCss(document.body,\"webix_noselect\");\r\n\t\tallowSelect();\r\n\t},\r\n\t_rs_start:function(){\r\n\t\tif(this._rs_progress)\r\n\t\t\treturn;\r\n\t\tvar dir  = this._rs_ready[0];\r\n\t\tvar node = this._rs_process[1];\r\n\t\tvar obj  = this._locate(node);\r\n\t\tif (!obj) return;\r\n\r\n\t\tvar eventPos = this._rs_process[0];\r\n\t\tvar start;\r\n\r\n\t\tif (dir == \"x\"){\r\n\t\t\tstart = offset(node).x+this._rs_ready[1] - offset(this._body).x;\r\n\t\t\teventPos = eventPos.x;\r\n\t\t\tif (!this._rs_ready[1]) obj.cind-=(node.parentNode.colSpan||1);\r\n\t\t} else {\r\n\t\t\tstart = offset(node).y+this._rs_ready[1] - offset(this._body).y+this._header_height;\r\n\t\t\teventPos = eventPos.y;\r\n\t\t\tif (!this._rs_ready[1]) obj.rind--;\r\n\t\t}\r\n\t\tif (obj.cind>=0 && obj.rind>=0){\r\n\t\t\tthis._rs_progress = [dir, obj, start];\r\n\t\t\t\r\n\t\t\tvar resize = new ui.resizearea({\r\n\t\t\t\tcontainer:this._viewobj,\r\n\t\t\t\tdir:dir,\r\n\t\t\t\teventPos:eventPos,\r\n\t\t\t\tstart:start,\r\n\t\t\t\tcursor:(dir == \"x\"?\"col\":\"row\")+\"-resize\"\r\n\t\t\t});\r\n\t\t\tresize.attachEvent(\"onResizeEnd\", bind(this._rs_end, this));\r\n\t\t}\r\n\t\tthis._rs_down = this._rs_ready = false;\r\n\t},\r\n\t_rs_end:function(result){\r\n\t\tif (this._rs_progress){\r\n\t\t\tvar dir = this._rs_progress[0];\r\n\t\t\tvar obj = this._rs_progress[1];\r\n\t\t\tvar newsize = result-this._rs_progress[2];\r\n\t\t\tif (dir == \"x\"){\r\n\t\t\t\t\r\n\t\t\t\t//in case of right split - different sizing logic applied\r\n\t\t\t\tif (this._settings.rightSplit && obj.cind+1>=this._rightSplit &&\r\n\t\t\t\t\tobj.cind !== this._columns.length - 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj.cind++;\r\n\t\t\t\t\tnewsize *= -1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar column = this._columns[obj.cind];\r\n\t\t\t\tvar oldwidth = column.width;\r\n\t\t\t\tdelete column.fillspace;\r\n\t\t\t\tdelete column.adjust;\r\n\t\t\t\tthis._setColumnWidth(obj.cind, oldwidth + newsize, true, true);\r\n\t\t\t\tthis._updateColsSizeSettings();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar rid = this.getIdByIndex(obj.rind);\r\n\t\t\t\tvar oldheight = this._getRowHeight(this.getItem(rid));\r\n\t\t\t\tthis.setRowHeight(rid, oldheight + newsize);\r\n\t\t\t}\r\n\t\t\tthis._rs_up();\r\n\t\t}\r\n\t\tthis._rs_progress = null;\r\n\t},\r\n\t_rs_move:function(e){\r\n\t\tvar cell= null,\r\n\t\t\tconfig = this._settings;\r\n\t\tif (this._rs_ready && this._rs_process)\r\n\t\t\treturn this._rs_start(e);\r\n\r\n\t\te = e||event;\r\n\t\tvar node = e.target;\r\n\t\tvar mode = false; //resize ready flag\r\n\r\n\t\tif (node.tagName == \"TD\" || node.tagName == \"TABLE\") return ;\r\n\t\tvar element_class = node.className||\"\";\r\n\t\tvar in_body = typeof element_class === \"string\" && element_class.indexOf(\"webix_cell\")!=-1;\r\n\t\t//ignore resize in case of drag-n-drop enabled\r\n\t\tif (in_body && config.drag) return;\r\n\t\tvar in_header = typeof element_class === \"string\" && element_class.indexOf(\"webix_hcell\")!=-1;\r\n\t\tthis._rs_ready = false;\r\n\t\t\r\n\t\tif (in_body || in_header){\r\n\t\t\tvar dx = node.offsetWidth;\r\n\t\t\tvar dy = node.offsetHeight;\r\n\t\t\tvar pos = posRelative(e);\r\n\r\n\t\t\tvar resizeRow = config.resizeRow;\r\n\t\t\t// if resize is only within the first column\r\n\t\t\tif(typeof resizeRow == \"object\" && resizeRow.headerOnly){\r\n\t\t\t\tcell = this._locate(node);\r\n\t\t\t\tif(cell.cind >0)\r\n\t\t\t\t\tresizeRow = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (in_body && resizeRow){\r\n\t\t\t\tresizeRow = (typeof resizeRow == \"object\" && resizeRow.size?resizeRow.size:3);\r\n\t\t\t\tif (pos.y<resizeRow){\r\n\t\t\t\t\tif(!cell)\r\n\t\t\t\t\t\tcell = this._locate(node);\r\n\t\t\t\t\t// avoid resize header border\r\n\t\t\t\t\tif(cell.rind){\r\n\t\t\t\t\t\tthis._rs_ready = [\"y\", 0, node];\r\n\t\t\t\t\t\tmode = \"row-resize\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (dy-pos.y<resizeRow+1){\r\n\t\t\t\t\tthis._rs_ready = [\"y\", dy, node];\r\n\t\t\t\t\tmode = \"row-resize\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar resizeColumn = config.resizeColumn;\r\n\t\t\t// if resize is only within the header\r\n\t\t\tif(typeof resizeColumn == \"object\" && resizeColumn.headerOnly && in_body)\r\n\t\t\t\tresizeColumn = false;\r\n\r\n\t\t\tif (resizeColumn){\r\n\t\t\t\tresizeColumn = (typeof resizeColumn == \"object\" && resizeColumn.size?resizeColumn.size:3);\r\n\r\n\t\t\t\tif (pos.x<resizeColumn){\r\n\t\t\t\t\tthis._rs_ready = [\"x\", 0, node];\r\n\t\t\t\t\tmode = \"col-resize\";\r\n\t\t\t\t} else if (dx-pos.x<resizeColumn+1){\r\n\t\t\t\t\tthis._rs_ready = [\"x\", dx, node];\r\n\t\t\t\t\tmode = \"col-resize\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//mark or unmark resizing ready state\r\n\t\tif (this._cursor_timer) window.clearTimeout(this._cursor_timer);\r\n\t\tthis._cursor_timer = delay(this._mark_resize_ready, this, [mode], mode?100:0);\r\n\t},\r\n\r\n\t_mark_resize_ready:function(mode){\r\n\t\tif (this._last_cursor_mode != mode){\r\n\t\t\tthis._last_cursor_mode = mode;\r\n\t\t\tthis._viewobj.style.cursor=mode||\"default\";\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import env from \"../../webix/env\";\r\nimport Touch from \"../../core/touch\";\r\nimport {extend, delay} from \"../../webix/helpers\";\r\nimport {attachEvent} from \"../../webix/customevents\";\r\n\r\n\r\nattachEvent(\"onDataTable\", function(table, config){\r\n\tif (env.touch){\r\n\t\tTouch.$init();\r\n\t\tconfig.scrollSize = 0;\r\n\r\n\t\t// needed to show datatable scroll\r\n\t\tif(Touch._disabled)\r\n\t\t\tTouch.limit();\r\n\r\n\t\ttable.$ready.push(table.$touch);\r\n\t}\r\n});\r\n\r\nconst Mixin = {\r\n\t$touch:function(){\r\n\t\tvar config = this._settings;\r\n\t\tconfig.scrollAlignY = false;\r\n\r\n\t\textend(this, (config.prerender===true)?this._touchNative:this._touch);\r\n\t\t\r\n\t\tvar scrollMode = \"\";\r\n\t\tif (!config.autowidth && config.scrollX !== false)\r\n\t\t\tscrollMode += \"x\";\r\n\t\tif (!config.autoheight && config.scrollY !== false)\r\n\t\t\tscrollMode += \"y\";\r\n\t\tthis._body.setAttribute(\"touch_scroll\", scrollMode);\r\n\t\t\r\n\t\tTouch._init_scroll_node(this._body.childNodes[1].firstChild);\r\n\t\tTouch._set_matrix(this._body.childNodes[1].firstChild, 0,0,\"0ms\");\r\n\t\tthis._sync_scroll(0,0,\"0ms\");\r\n\t},\r\n\t_touchNative:{\r\n\t\t_scrollTo_touch:function(x,y){\r\n\t\t\tTouch._set_matrix(this._body.childNodes[1].firstChild, -x, -y,\"0ms\");\r\n\t\t\tthis._sync_scroll(-x, -y,\"0ms\");\r\n\r\n\t\t\tthis.callEvent(\"onAfterScroll\", [{ e: -x, f: -y}]);\r\n\t\t},\r\n\t\t_getScrollState_touch:function(){\r\n\t\t\tvar temp = Touch._get_matrix(this._body.childNodes[1].firstChild);\r\n\t\t\treturn { x : -temp.e, y : -temp.f };\r\n\t\t},\r\n\t\t$init:function(){\r\n\t\t\tthis.attachEvent(\"onBeforeScroll\", function(){ \r\n\t\t\t\tTouch._scroll_node = this._body.childNodes[1].firstChild;\r\n\t\t\t\tTouch._get_sizes(Touch._scroll_node);\r\n\t\t\t\tTouch._scroll_master = this;\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onTouchEnd\", function(){\r\n\t\t\t\tTouch._scroll_master = null;\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onAfterScroll\", function(result){\r\n\t\t\t\t//onAfterScroll may be triggered by some non-touch related logic\r\n\t\t\t\tif (!result) return;\r\n\r\n\t\t\t\tthis._scrollLeft = -result.e;\r\n\t\t\t\tthis._scrollTop = -result.f;\r\n\r\n\t\t\t\tif (this._x_scroll)\r\n\t\t\t\t\tthis._x_scroll._settings.scrollPos = this._scrollLeft;\r\n\r\n\t\t\t\tif (this._y_scroll)\r\n\t\t\t\t\tthis._y_scroll._settings.scrollPos = this._scrollTop;\r\n\t\t\t});\r\n\t\t},\r\n\t\t_sync_scroll:function(x,y,t){\r\n\t\t\tTouch._set_matrix(this._body.childNodes[1].firstChild, x, y, t);\r\n\t\t\tif (this._settings.leftSplit)\r\n\t\t\t\tTouch._set_matrix(this._body.childNodes[0].firstChild,0,y,t);\r\n\t\t\tif (this._settings.rightSplit)\r\n\t\t\t\tTouch._set_matrix(this._body.childNodes[2].firstChild,0,y,t);\r\n\t\t\tif (this._settings.header)\r\n\t\t\t\tTouch._set_matrix(this._header.childNodes[1].firstChild,x,0,t);\r\n\t\t\tif (this._settings.footer)\r\n\t\t\t\tTouch._set_matrix(this._footer.childNodes[1].firstChild,x,0,t);\r\n\r\n\t\t\tthis.callEvent(\"onSyncScroll\", [x,y,t]);\r\n\t\t},\r\n\t\t_sync_pos:function(){}\r\n\t},\r\n\t_touch:{\r\n\t\t_scrollTo_touch:function(x,y){\r\n\t\t\tdelay(function(){\r\n\t\t\t\tthis.callEvent(\"onAfterScroll\", [{ e: -x, f: -y}]);\t\r\n\t\t\t}, this);\t\r\n\t\t},\r\n\t\t$scroll:{\r\n\t\t\tgravity:0,\r\n\t\t\telastic:false\r\n\t\t},\r\n\t\t$hasYScroll(){\r\n\t\t\treturn this._dtable_height - this._dtable_offset_height > 2;\r\n\t\t},\r\n\t\t$init:function(){\r\n\t\t\t//if the result column's width < container's width,\r\n\t\t\tthis.attachEvent(\"onAfterColumnHide\", function(){\r\n\t\t\t\tthis._scrollTo_touch(0, 0);\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onBeforeScroll\", function(){\r\n\t\t\t\tvar t = Touch;\r\n\t\t\t\tt._scroll_node = this._body.childNodes[1].firstChild;\r\n\t\t\t\tt._get_sizes(t._scroll_node);\r\n\t\t\t\tt._scroll_stat.left = this._scrollLeft;\r\n\t\t\t\tt._scroll_stat.hidden = this._x_scroll._settings.scrollVisible || this._y_scroll._settings.scrollVisible;\r\n\t\t\t\tt._scroll_stat.dy = this._dtable_height;\r\n\t\t\t\tt._scroll_master = this;\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onAfterRender\", function(){\r\n\t\t\t\tif (this._x_scroll && this._settings.scrollX)\r\n\t\t\t\t\tthis._x_scroll._fixSize();\r\n\t\t\t\tif (this._y_scroll && this._settings.scrollY)\r\n\t\t\t\t\tthis._y_scroll._fixSize();\r\n\t\t\t});\r\n\t\t\tthis.attachEvent(\"onAfterScroll\", function(result){\r\n\t\t\t\t//onAfterScroll may be triggered by some non-touch related logic\r\n\t\t\t\tif (!result) return;\r\n\r\n\t\t\t\tvar isScrollX = (this._scrollLeft != -result.e);\r\n\t\t\t\tvar isScrollY = (this._scrollTop != -result.f);\r\n\r\n\t\t\t\tTouch._scroll_master = null;\r\n\t\t\t\tTouch._fix_f = null;\r\n\r\n\t\t\t\tthis._scrollTop = 0;\r\n\t\t\t\tthis._scrollLeft = 0;\r\n\r\n\t\t\t\t//ipad can delay content rendering if 3d transformation applied\r\n\t\t\t\t//switch back to 2d\r\n\t\t\t\tvar temp = Touch.config.translate;\r\n\t\t\t\tTouch.config.translate = \"translate\";\r\n\t\t\t\tthis._sync_scroll((this._x_scroll ? 0 : result.e), 0, 0);\r\n\t\t\t\tTouch.config.translate = temp;\r\n\r\n\t\t\t\tthis._scrollLeft = -result.e;\r\n\t\t\t\tthis._scrollTop = -result.f;\r\n\t\t\t\tthis._correctScrollSize();\r\n\r\n\t\t\t\tthis.render();\r\n\r\n\t\t\t\tif(isScrollX){\r\n\t\t\t\t\tif (this._x_scroll)\r\n\t\t\t\t\t\tthis._x_scroll.scrollTo(this._scrollLeft);\r\n\t\t\t\t\tthis.callEvent(\"onScrollX\",[]);\r\n\t\t\t\t}\r\n\t\t\t\tif(isScrollY){\r\n\t\t\t\t\tif (this._y_scroll) \r\n\t\t\t\t\t\tthis._y_scroll.scrollTo(this._scrollTop);\r\n\t\t\t\t\tthis.callEvent(\"onScrollY\",[]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t},\r\n\t\t_sync_scroll:function(x,y,t){\r\n\t\t\ty += this._scrollTop;\r\n\t\t\tx += this._scrollLeft;\r\n\r\n\t\t\tTouch._set_matrix(this._body.childNodes[1].firstChild, x, y, t);\r\n\t\t\tif (this._settings.leftSplit)\r\n\t\t\t\tTouch._set_matrix(this._body.childNodes[0].firstChild,0,y,t);\r\n\t\t\tif (this._settings.rightSplit)\r\n\t\t\t\tTouch._set_matrix(this._body.childNodes[2].firstChild,0,y,t);\r\n\t\t\tif (this._settings.header)\r\n\t\t\t\tTouch._set_matrix(this._header.childNodes[1].firstChild,x,0,t);\r\n\t\t\tif (this._settings.footer)\r\n\t\t\t\tTouch._set_matrix(this._footer.childNodes[1].firstChild,x,0,t);\r\n\r\n\t\t\tthis.callEvent(\"onSyncScroll\", [x,y,t]);\r\n\t\t},\r\n\t\t_sync_pos:function(matrix){\r\n\t\t\tmatrix.f -= this._scrollTop;\r\n\t\t\tmatrix.e -= this._scrollLeft;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import {isUndefined, bind} from \"../../webix/helpers\";\r\nimport {_event} from \"../../webix/htmlevents\";\r\nimport EditAbility from \"../../core/editability\";\r\n\r\n\r\n// #include core/drag.js\r\n// #include core/edit.js\r\n// #include ui/inputs.js\r\n\r\nconst Mixin = {\r\n\r\n\t/////////////////////////\r\n\t//    edit start       //\r\n\t/////////////////////////\r\n\t_get_editor_type:function(id){\r\n\t\treturn this.getColumnConfig(id.column).editor;\r\n\t},\r\n\tgetEditor:function(row, column){\r\n\t\tif (!row)\r\n\t\t\treturn this._last_editor;\r\n\r\n\t\tif (arguments.length == 1){\r\n\t\t\tcolumn = row.column;\r\n\t\t\trow = row.row; \r\n\t\t}\r\n\t\t\r\n\t\treturn ((this._editors[row]||{})[column]);\r\n\t},\r\n\t_for_each_editor:function(handler){\r\n\t\tfor (var row in this._editors){\r\n\t\t\tvar row_editors = this._editors[row];\r\n\t\t\tfor (var column in row_editors)\r\n\t\t\t\tif (column!=\"$count\")\r\n\t\t\t\t\thandler.call(this, row_editors[column]);\r\n\t\t}\r\n\t},\r\n\t_init_editor:function(id, type, show){\r\n\t\tvar row = id.row;\r\n\t\tvar column  = id.column;\r\n\t\tvar col_settings = type.config = this.getColumnConfig(column);\r\n\t\t//show it over cell\r\n\t\tif (show !== false)\r\n\t\t\tthis.showCell(row, column);\r\n\r\n\t\tvar node = type.render();\r\n\r\n\t\tif (type.$inline)\r\n\t\t\tnode = this._locateInput(id);\r\n\t\ttype.node = node;\r\n\t\t\t\r\n\t\tvar item = this.getItem(row);\r\n\t\tvar format = col_settings.editFormat;\r\n\r\n\t\tvar value;\r\n\t\tif (this._settings.editMath)\r\n\t\t\tvalue = item[\"$\"+column];\r\n\t\tvalue = value || item[column];\r\n\r\n\t\tif (isUndefined(value))\r\n\t\t\tvalue=\"\";\r\n\r\n\t\ttype.setValue(format?format(value):value, item);\r\n\t\ttype.value = item[column];\r\n\t\tthis._addEditor(id, type);\r\n\r\n\t\tif (!type.$inline)\r\n\t\t\ttype._editor_pos = this._sizeToCell(id, node, true);\r\n\t\t\r\n\r\n\t\tif (type.afterRender)\r\n\t\t\ttype.afterRender();\r\n\t\t\r\n\t\tif (this._settings.liveValidation){\r\n\t\t\t_event(type.node, \"keyup\", this._bind_live_validation(id, this));\r\n\t\t\tthis.validateEditor(id);\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\t},\r\n\t_bind_live_validation:function(id, that){\r\n\t\treturn function(){\r\n\t\t\tthat.validateEditor(id);\r\n\t\t};\r\n\t},\r\n\t_get_new_value:function(editor){\r\n\t\tvar parser = this.getColumnConfig(editor.column).editParse;\r\n\t\tvar new_value = editor.getValue();\r\n\t\treturn parser?parser(new_value):new_value;\r\n\t},\r\n\t_set_new_value:function(editor, new_value, copy){\r\n\t\tvar item = copy ? {} : this.getItem(editor.row);\r\n\t\titem[editor.column] = new_value;\r\n\r\n\t\tif (this._settings.editMath)\r\n\t\t\titem[\"$\"+editor.column] = null;\r\n\r\n\t\treturn item;\r\n\t},\r\n\t//register editor in collection\r\n\t_addEditor:function(id, type){\r\n\t\tvar row_editors = this._editors[id.row]=this._editors[id.row]||{};\r\n\r\n\t\trow_editors.$count = (row_editors.$count||0)+1;\r\n\r\n\t\ttype.row = id.row; type.column = id.column;\r\n\t\tthis._last_editor = row_editors[id.column] = type;\r\n\r\n\t\tthis._in_edit_mode++;\r\n\t\tthis._last_editor_scroll = this.getScrollState();\r\n\t},\r\n\t_removeEditor:function(editor){\r\n\t\tif (this._last_editor == editor)\r\n\t\t\tthis._last_editor = 0;\r\n\t\t\r\n\t\tif (editor.destroy)\r\n\t\t\teditor.destroy();\r\n\t\t\r\n\t\tvar row = this._editors[editor.row];\r\n\t\tdelete row[editor.column];\r\n\t\trow.$count -- ;\r\n\t\tif (!row.$count)\r\n\t\t\tdelete this._editors[editor.row];\r\n\t\tthis._in_edit_mode--;\r\n\t},\r\n\t_changeEditorId:function(oldid, newid)\t{\r\n\t\tvar editor = this._editors[oldid];\r\n\t\tif (editor){\r\n\t\t\tthis._editors[newid] = editor;\r\n\t\t\tdelete this._editors[oldid];\r\n\t\t\tfor (var key in editor)\r\n\t\t\t\tif (key != \"$count\")\r\n\t\t\t\t\teditor[key].row = newid;\r\n\t\t}\r\n\t},\r\n\t//get html cell by combined id\r\n\t_locate_cell:function(id){\r\n\t\tvar area, i, index, j, node, span,\r\n\t\t\tconfig = this.getColumnConfig(id.column),\r\n\t\t\tcell = 0;\r\n\r\n\t\tif (config && config.node && config.attached){\r\n\t\t\tindex = this.getIndexById(id.row);\r\n\t\t\tif(this._spans_pull){\r\n\t\t\t\tspan = this.getSpan(id.row,id.column);\r\n\t\t\t\tif(span){\r\n\t\t\t\t\tfor (i=0; i<3; i++){\r\n\t\t\t\t\t\tarea = this._spans_areas[i];\r\n\t\t\t\t\t\tfor(j=0; !cell && j < area.childNodes.length; j++){\r\n\t\t\t\t\t\t\tnode = area.childNodes[j];\r\n\t\t\t\t\t\t\tif(node.getAttribute(/*@attr*/\"row\") == index && node.getAttribute(/*@attr*/\"column\") == this.getColumnIndex(id.column))\r\n\t\t\t\t\t\t\t\tcell = node;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!cell && index >= (config._yr0-this._settings.topSplit) && index< config._yr1)\r\n\t\t\t\tcell = config.node.childNodes[index-config._yr0+this._settings.topSplit];\r\n\t\t}\r\n\t\treturn cell;\r\n\t},\r\n\r\n\t\r\n\t/////////////////////////\r\n\t//    public methods   //\r\n\t/////////////////////////\r\n\teditCell:function(row, column, preserve, show){\r\n\t\tcolumn = column || this._settings.columns[0].id;\r\n\t\treturn EditAbility.edit.call(this, {row:row, column:column}, preserve, show);\r\n\t},\r\n\teditRow:function(id){\r\n\t\tif (id && id.row)\r\n\t\t\tid = id.row;\r\n\r\n\t\tvar next = false;\r\n\t\tthis.eachColumn(function(column){\r\n\t\t\tthis.edit({ row:id, column:column}, next, !next);\r\n\t\t\tnext = true;\r\n\t\t});\r\n\t},\r\n\teditColumn:function(id){\r\n\t\tif (id && id.column)\r\n\t\t\tid = id.column;\r\n\r\n\t\tvar next = false;\r\n\t\tthis.eachRow(function(row){\r\n\t\t\tthis.edit({row:row, column:id}, next, !next);\r\n\t\t\tnext = true;\r\n\t\t});\r\n\t},\r\n\teachRow:function(handler, all){\r\n\t\tvar order = this.data.order;\r\n\t\tif (all) \r\n\t\t\torder = this.data._filter_order || order;\r\n\r\n\t\tfor (let i=0; i<order.length; i++)\r\n\t\t\thandler.call(this, order[i]);\r\n\t},\r\n\teachColumn:function(handler, all){\r\n\t\tfor (let i in this._columns_pull){\r\n\t\t\tlet column = this._columns_pull[i];\r\n\t\t\thandler.call(this, column.id, column);\r\n\t\t}\r\n\t\tif (all){\r\n\t\t\tfor (let i in this._hidden_column_hash){\r\n\t\t\t\tlet column = this._hidden_column_hash[i];\r\n\t\t\t\thandler.call(this, column.id, column);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t////////////////////\r\n\t//    edit next   //\r\n\t////////////////////\r\n\t_after_edit_next:function(editor_next){\r\n\t\tif (this.getSelectedId){\t//select related cell when possible\r\n\t\t\tvar sel = this.getSelectedId(true);\r\n\t\t\tif (sel.length == 1){\r\n\t\t\t\tthis._select(editor_next);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_custom_tab_handler:function(tab, e){\r\n\t\tif (this._settings.editable && !this._in_edit_mode){\r\n\t\t\t//if we have focus in some custom input inside of datatable\r\n\t\t\tif (e.target && e.target.tagName == \"INPUT\") return true;\r\n\r\n\t\t\t//init editor related to a single selected row/column/cell\r\n\t\t\tvar selection = this.getSelectedId(true);\r\n\t\t\tif (selection.length == 1){\r\n\t\t\t\tvar sel =  selection[0];\r\n\t\t\t\tif(this._settings.select == \"row\")\r\n\t\t\t\t\tsel.column = this._settings.columns[e.shiftKey?0:this._settings.columns.length-1].id;\r\n\t\t\t\tthis.editNext(tab, sel);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_find_cell_next:function(start, check, direction){\r\n\t\tvar row = this.getIndexById(start.row);\r\n\t\tvar column = this.getColumnIndex(start.column);\r\n\t\tvar order = this.data.order;\r\n\t\tvar cols = this._columns;\r\n\r\n\t\tif (direction){\r\n\r\n\t\t\tfor (let i=row; i<order.length; i++){\r\n\t\t\t\tfor (let j=column+1; j<cols.length; j++){\r\n\t\t\t\t\tlet id = { row:order[i], column:cols[j].id};\r\n\t\t\t\t\tif (check.call(this, id) && (!this._checkCellMerge || !this._checkCellMerge(start,id))){\r\n\t\t\t\t\t\treturn id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcolumn = -1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let i=row; i>=0; i--){\r\n\t\t\t\tfor (let j=column-1; j>=0; j--){\r\n\t\t\t\t\tlet id = { row:order[i], column:cols[j].id};\r\n\t\t\t\t\tif (check.call(this, id))\r\n\t\t\t\t\t\treturn id;\r\n\t\t\t\t}\r\n\t\t\t\tcolumn = cols.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\r\n\t/////////////////////////////\r\n\t//    scroll correction    //\r\n\t/////////////////////////////\r\n\t_correct_after_focus_y:function(){\r\n\t\tif (this._in_edit_mode){\r\n\t\t\tif (this._ignore_after_focus_scroll)\r\n\t\t\t\tthis._ignore_after_focus_scroll = false;\r\n\t\t\telse {\r\n\t\t\t\tthis._y_scroll.scrollTo(this.getScrollState().y+this._body.childNodes[1].firstChild.scrollTop);\r\n\t\t\t\tthis._body.childNodes[1].firstChild.scrollTop = 0;\r\n\t\t\t\tthis._ignore_after_focus_scroll = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_correct_after_focus_x:function(){\r\n\t\tif (this._in_edit_mode){\r\n\t\t\tthis._x_scroll.scrollTo(this._body.childNodes[1].scrollLeft);\r\n\t\t}\r\n\t},\r\n\t_component_specific_edit_init:function(){\r\n\t\tthis.attachEvent(\"onScrollY\", this._update_editor_y_pos);\r\n\t\tthis.attachEvent(\"onScrollX\", this._update_editor_y_pos);\r\n\t\tthis.attachEvent(\"onScrollY\", this._refocus_inline_editor);\r\n\t\tthis.attachEvent(\"onColumnResize\", function(){ this.editStop(); });\r\n\t\tthis.attachEvent(\"onAfterFilter\", function(){ this.editStop(); });\r\n\t\tthis.attachEvent(\"onRowResize\", function(){ this.editStop(); });\r\n\t\tthis.attachEvent(\"onAfterScroll\", function(){ if(this._settings.topSplit) this.editStop(); });\r\n\t\tthis._body.childNodes[1].firstChild.onscroll = bind(this._correct_after_focus_y, this);\r\n\t\tthis._body.childNodes[1].onscroll = bind(this._correct_after_focus_x, this);\r\n\t},\r\n\t_update_editor_y_pos:function(){\r\n\t\tif (this._in_edit_mode){\r\n\t\t\tvar old  = this._last_editor_scroll;\r\n\t\t\tthis._last_editor_scroll = this.getScrollState();\r\n\r\n\t\t\tvar diff = this._last_editor_scroll.y - old.y;\r\n\t\t\tthis._for_each_editor(function(editor){\r\n\r\n\t\t\t\tif (editor.getPopup){\r\n\t\t\t\t\tconst node = this.getItemNode(editor);\r\n\t\t\t\t\tlet isHidden = false;\r\n\r\n\t\t\t\t\tif(this._settings.prerender){\r\n\t\t\t\t\t\tconst pos = editor._editor_pos;\r\n\t\t\t\t\t\tlet ydiff = pos.top - this._scrollTop;\r\n\t\t\t\t\t\tlet xdiff = pos.left - this._scrollLeft;\r\n\r\n\t\t\t\t\t\tisHidden = (ydiff < 0 || ydiff+pos.height > this._dtable_offset_height || \r\n\t\t\t\t\t\t\txdiff < 0 || xdiff+pos.width > this.$width - this._scrollSizeX);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!node || isHidden)\r\n\t\t\t\t\t\teditor.getPopup().show({ x:-10000, y:-10000 });\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\teditor.getPopup().show(node);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._settings.prerender && !editor.linkInput && !editor.$inline){\r\n\t\t\t\t\teditor.node.top -= diff;\r\n\t\t\t\t\teditor.node.style.top = editor.node.top + \"px\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nexport default Mixin;","import {posRelative, pos as getPos, offset, remove, removeCss, addCss} from \"../../webix/html\";\r\nimport {isArray, bind, extend, delay} from \"../../webix/helpers\";\r\nimport {$$} from \"../../ui/core\";\r\nimport DragItem from \"../../core/dragitem\";\r\nimport DragControl from \"../../core/dragcontrol\";\r\nimport AutoScroll from \"../../core/autoscroll\";\r\n\r\nconst DragOrder = {\r\n\t_set_drop_area:function(target){\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tlet column = this._columns[i];\r\n\t\t\tlet node = this.getItemNode({ row:target, cind:i});\r\n\t\t\tif (node){\r\n\t\t\t\tnode.parentNode.insertBefore(DragControl._dropHTML[i], node);\r\n\t\t\t} else column.node.appendChild(DragControl._dropHTML[i]);\r\n\t\t}\r\n\t},\r\n\t_init_drop_area:function(){\r\n\t\tlet dropArea = [];\r\n\t\tlet count = this._columns.length;\r\n\t\tlet node = document.createElement(\"div\");\r\n\r\n\t\tnode.className = \"webix_drop_area\";\r\n\t\tnode.style.height = this._settings.rowHeight + \"px\";\r\n\t\tnode.innerHTML = this.$dropHTML();\r\n\r\n\t\tfor (let i=0; i<count; i++)\r\n\t\t\tdropArea.push(node.cloneNode(true));\r\n\r\n\t\treturn dropArea;\r\n\t}\r\n};\r\n\r\nconst Mixin = {\r\n\tdrag_setter:function(value){\r\n\t\t// disable drag-n-drop for frozen rows\r\n\t\tthis.attachEvent(\"onBeforeDrag\", function(context){\r\n\t\t\treturn this._checkDragTopSplit(context.source);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onBeforeDragIn\", function(context){\r\n\t\t\tlet result = this._checkDragTopSplit(context.target);\r\n\r\n\t\t\tif (!result && DragControl._dropHTML){\r\n\t\t\t\tremove(DragControl._dropHTML);\r\n\t\t\t\tthis._marked_item_id = DragControl._dropHTML = null;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t});\r\n\r\n\t\tDragItem.drag_setter.call(this,value);\r\n\t\tif (value == \"order\" || value == \"move\")\r\n\t\t\textend(this, DragOrder, true);\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_add_css:function(source, css, mark){\r\n\t\tlet context = DragControl._drag_context;\r\n\r\n\t\tif (!this._settings.prerender && !mark)\r\n\t\t\tsource = [context.start];\r\n\r\n\t\tfor (let i=0; i<source.length; i++){\r\n\t\t\tfor (let j=0; j<this._columns.length; j++){\r\n\t\t\t\tlet node = this.getItemNode({ row:source[i], cind:j});\r\n\t\t\t\tif (node)\r\n\t\t\t\t\taddCss(node, css);\r\n\t\t\t}\r\n\t\t\tthis.data.addMark(source[i], css, 1, 1, true);\r\n\t\t}\r\n\t},\r\n\t_remove_css:function(source, css, mark){\r\n\t\tlet context = DragControl._drag_context;\r\n\r\n\t\tif (!this._settings.prerender && !mark)\r\n\t\t\tsource = [context.start];\r\n\r\n\t\tfor (let i=0; i<source.length; i++){\r\n\t\t\tfor (let j=0; j<this._columns.length; j++){\r\n\t\t\t\tlet node = this.getItemNode({ row:source[i], cind:j});\r\n\t\t\t\tif (node)\r\n\t\t\t\t\tremoveCss(node, css);\r\n\t\t\t}\r\n\t\t\tthis.data.removeMark(source[i], css, 1, true);\r\n\t\t}\r\n\t},\r\n\t_checkDragTopSplit: function(ids){\r\n\t\tvar i, index,\r\n\t\t\tfrozen = false;\r\n\t\tif(this._settings.topSplit && ids){\r\n\t\t\tif(!isArray(ids))\r\n\t\t\t\tids = [ids];\r\n\t\t\tfor(i=0; !frozen && i< ids.length;i++ ){\r\n\t\t\t\tindex = this.getIndexById(ids[i]);\r\n\t\t\t\tfrozen = index >= 0 && index < this._settings.topSplit;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !frozen;\r\n\t},\r\n\t_toHTML:function(obj){\r\n\t\tvar width = this._content_width - this._scrollSizeY;\r\n\t\tvar html=\"<div class='webix_dd_drag' style='width:\"+width+\"px;'>\";\r\n\t\tvar cols = this._settings.columns;\r\n\t\tfor (var i=0; i<cols.length; i++){\r\n\t\t\tvar value = this._getValue(obj, cols[i]);\r\n\t\t\thtml += \"<div style='width:\"+cols[i].width+\"px;'>\"+value+\"</div>\";\r\n\t\t}\r\n\t\treturn html+\"</div>\";\r\n\t},\r\n\tgetHeaderNode:function(column_id, row_index){\r\n\t\treturn this._getHeaderNode(column_id, row_index, this._header);\r\n\t},\r\n\tgetFooterNode:function(column_id, row_index){\r\n\t\treturn this._getHeaderNode(column_id, row_index, this._footer);\r\n\t},\r\n\t_getHeaderNode:function(column_id, row_index, group){\r\n\t\tif(this.isColumnVisible(column_id)){\r\n\r\n\t\t\tvar ind = this.getColumnIndex(column_id);\r\n\t\t\tvar hind = this._settings.leftSplit > ind ? 0 : (this._rightSplit <=ind ? 2 :1 );\r\n\t\t\trow_index = row_index || 0;\r\n\t\t\t\r\n\t\t\tvar rows = group.childNodes[hind].getElementsByTagName(\"TR\");\r\n\t\t\tif(rows.length){\r\n\t\t\t\tvar nodes = rows[row_index+1].childNodes;\r\n\t\t\t\tfor (var i=0; i<nodes.length; i++)\r\n\t\t\t\t\tif (nodes[i].getAttribute(/*@attr*/\"column\") == ind)\r\n\t\t\t\t\t\treturn nodes[i].firstChild;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tgetItemNode:function(id){\r\n\t\tif (id && !id.header){\r\n\t\t\tvar row = id.row || id;\r\n\t\t\tvar rowindex = (typeof id.rind === \"number\") ? id.rind : this.getIndexById(row);\r\n\t\t\tvar state = this._get_y_range();\r\n\t\t\tvar minRow = state[0]-this._settings.topSplit;\r\n\t\t\t//row not visible\r\n\t\t\tif (rowindex < minRow && rowindex > state[1]) return;\r\n\r\n\t\t\t//get visible column\r\n\t\t\tvar x_range = this._get_x_range();\r\n\t\t\tvar colindex = this._settings.leftSplit ? 0 : x_range[0];\r\n\t\t\tvar specific = (typeof id.cind === \"number\");\r\n\t\t\tif (id.column || specific){\r\n\t\t\t\tcolindex = specific ? id.cind : this.getColumnIndex(id.column);\r\n\t\t\t\t//column not visible\r\n\t\t\t\tif (colindex < this._rightSplit && colindex >= this._settings.leftSplit && ( colindex<x_range[0] || colindex > x_range[1]))\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar column = this._settings.columns[colindex];\r\n\r\n\t\t\tif (column.attached && column.node){\r\n\t\t\t\tif (row === \"$webix-drop\")\r\n\t\t\t\t\treturn DragControl._dropHTML[colindex];\r\n\r\n\t\t\t\tlet nodeIndex = (rowindex<this._settings.topSplit || this._settings.prerender)?rowindex:(rowindex-minRow);\r\n\t\t\t\tlet nodes = column.node.childNodes;\r\n\t\t\t\tlet length = Math.min(nodes.length, nodeIndex+1);\r\n\r\n\t\t\t\tfor (let i=0; i<length; i++)\r\n\t\t\t\t\tif (nodes[i].className === \"webix_drop_area\")\r\n\t\t\t\t\t\tnodeIndex++;\r\n\r\n\t\t\t\treturn nodes[nodeIndex];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_isDraggable:function(e){\r\n\t\tvar nodeName = e.target.nodeName;\r\n\t\treturn nodeName != \"INPUT\" && nodeName != \"TEXTAREA\";\r\n\t},\r\n\tdragColumn_setter:function(value){\r\n\t\tvar control; //will be defined below\r\n\t\tif (value == \"order\"){\r\n\t\t\tcontrol = {\r\n\t\t\t\t$drag:bind(function(s,e){\r\n\t\t\t\t\tif(!this._isDraggable(e) || this._rs_process) return false;\r\n\t\t\t\t\tvar id = this.locate(e);\r\n\t\t\t\t\tif (!id || !this.callEvent(\"onBeforeColumnDrag\", [id.column, e])) return false;\r\n\t\t\t\t\tDragControl._drag_context = { from:control, start:id, custom:\"column_dnd\" };\r\n\r\n\t\t\t\t\tvar column = this.getColumnConfig(id.column);\r\n\r\n\t\t\t\t\tthis._relative_column_drag = posRelative(e);\r\n\t\t\t\t\tthis._limit_column_drag = column.width;\r\n\r\n\t\t\t\t\tthis._auto_scroll_force = true;\r\n\t\t\t\t\treturn \"<div class='webix_dd_drag_column' style='width:\"+column.width+\"px'>\"+(column.header[0].text||\"&nbsp;\")+\"</div>\";\r\n\t\t\t\t}, this),\r\n\t\t\t\t$dragPos:bind(function(pos, e, node){\r\n\t\t\t\t\tvar context = DragControl.getContext();\r\n\t\t\t\t\tvar box = offset(this.$view);\r\n\t\t\t\t\tnode.style.display = \"none\";\r\n\t\t\t\t\tvar html = document.elementFromPoint(pos.x, box.y + (this._settings.headerRowHeight/2));\r\n\r\n\t\t\t\t\tvar id = (html?this.locate(html):null);\r\n\r\n\t\t\t\t\tvar start = DragControl.getContext().start.column;\r\n\r\n\t\t\t\t\tif (id && id.column != start && (!this._column_dnd_temp_block || id.column != this._last_sort_dnd_node )){\r\n\t\t\t\t\t\t//ignore normal dnd , and dnd from other components\r\n\t\t\t\t\t\tif (context.custom == \"column_dnd\" && $$(html) == this){\r\n\r\n\t\t\t\t\t\t\tif (!this.callEvent(\"onBeforeColumnDropOrder\",[start, id.column,e])) return;\r\n\r\n\t\t\t\t\t\t\tvar start_index = this.getColumnIndex(start);\r\n\t\t\t\t\t\t\tvar end_index = this.getColumnIndex(id.column);\r\n\r\n\t\t\t\t\t\t\t//on touch devices we need to preserve drag-start element till the end of dnd\r\n\t\t\t\t\t\t\tif(e.touches){\r\n\t\t\t\t\t\t\t\tthis._dragTarget = e.target;\r\n\t\t\t\t\t\t\t\tthis._dragTarget.style.display = \"none\";\r\n\t\t\t\t\t\t\t\tthis.$view.parentNode.appendChild(this._dragTarget);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.moveColumn(start, end_index+(start_index<end_index?1:0));\r\n\t\t\t\t\t\t\tthis._last_sort_dnd_node = id.column;\r\n\t\t\t\t\t\t\tthis._column_dnd_temp_block = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} if (id && id.column == start){\r\n\t\t\t\t\t\t//flag prevent flickering just after column move\r\n\t\t\t\t\t\tthis._column_dnd_temp_block = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnode.style.display = \"block\";\r\n\r\n\t\t\t\t\tpos.x = pos.x - this._relative_column_drag.x;\r\n\t\t\t\t\tpos.y = box.y;\r\n\r\n\t\t\t\t\tif (pos.x < box.x)\r\n\t\t\t\t\t\tpos.x = box.x; \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvar max = box.x + this.$view.offsetWidth - this._scrollSizeY-this._limit_column_drag;\r\n\t\t\t\t\t\tif (pos.x > max)\r\n\t\t\t\t\t\t\tpos.x = max;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDragControl._skip = true;\r\n\r\n\t\t\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\r\n\t\t\t\t\tif (this._settings.dragscroll !== false)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = delay((pos) => this._auto_scroll_column(pos), this, [getPos(e)], 250);\r\n\t\t\t\t}, this),\r\n\t\t\t\t$dragDestroy:bind(function(a, node){\r\n\t\t\t\t\tthis._auto_scroll_force = null;\r\n\t\t\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\t\t\t\t\tremove(node);\r\n\r\n\t\t\t\t\t//clean dnd source element\r\n\t\t\t\t\tif(this._dragTarget)\r\n\t\t\t\t\t\tremove(this._dragTarget);\r\n\t\t\t\t\tvar id = DragControl.getContext().start;\r\n\t\t\t\t\tthis.callEvent(\"onAfterColumnDropOrder\",[id.column, this._last_sort_dnd_node, a]);\r\n\t\t\t\t}, this),\r\n\t\t\t\t$drop: function(){}\r\n\t\t\t};\r\n\t\t} else if (value) {\r\n\t\t\tcontrol = {\r\n\t\t\t\t_inner_drag_only:true,\r\n\t\t\t\t$drag:bind(function(s,e){\r\n\t\t\t\t\tif(!this._isDraggable(e) || this._rs_process) return false;\r\n\t\t\t\t\tvar id = this.locate(e);\r\n\t\t\t\t\tif (!id || !this.callEvent(\"onBeforeColumnDrag\", [id.column, e])) return false;\r\n\t\t\t\t\tDragControl._drag_context = { from:control, start:id, custom:\"column_dnd\" };\r\n\r\n\t\t\t\t\tvar header = this.getColumnConfig(id.column).header;\r\n\t\t\t\t\tvar text = \"&nbsp;\";\r\n\t\t\t\t\tfor (var i = 0; i < header.length; i++)\r\n\t\t\t\t\t\tif (header[i]){\r\n\t\t\t\t\t\t\ttext = header[i].text;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._auto_scroll_force = true;\r\n\t\t\t\t\treturn \"<div class='webix_dd_drag_column'>\"+text+\"</div>\";\r\n\t\t\t\t}, this),\r\n\t\t\t\t$drop:bind(function(s,t,e){\r\n\t\t\t\t\tvar target = e;\r\n\t\t\t\t\t//on touch devices event doesn't point to the actual drop target\r\n\t\t\t\t\tif(e.touches && this._drag_column_last)\r\n\t\t\t\t\t\ttarget = this._drag_column_last;\r\n\r\n\t\t\t\t\tvar id = this.locate(target);\r\n\r\n\t\t\t\t\tif (!id) return false;\r\n\t\t\t\t\tvar start = DragControl.getContext().start.column;\r\n\t\t\t\t\tif (start != id.column){\r\n\t\t\t\t\t\tif (!this.callEvent(\"onBeforeColumnDrop\",[start, id.column ,e])) return;\r\n\t\t\t\t\t\tvar start_index = this.getColumnIndex(start);\r\n\t\t\t\t\t\tvar end_index = this.getColumnIndex(id.column);\r\n\r\n\t\t\t\t\t\tthis.moveColumn(start, end_index+(start_index<end_index?1:0));\r\n\t\t\t\t\t\tthis.callEvent(\"onAfterColumnDrop\",[start, id.column, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this),\r\n\t\t\t\t$dragIn:bind(function(s,t,e){\r\n\t\t\t\t\tvar context = DragControl.getContext();\r\n\t\t\t\t\t//ignore normal dnd , and dnd from other components\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (context.custom != \"column_dnd\" || context.from != control) return false;\r\n\r\n\t\t\t\t\tvar target = e.target;\r\n\t\t\t\t\twhile ((target.className||\"\").indexOf(\"webix_hcell\") == -1){\r\n\t\t\t\t\t\ttarget = target.parentNode;\r\n\t\t\t\t\t\tif (!target) return;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\r\n\t\t\t\t\tif (this._settings.dragscroll !== false)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = delay((pos) => this._auto_scroll_column(pos), this, [getPos(e)], 250);\r\n\r\n\t\t\t\t\tif (target != this._drag_column_last){\t//new target\r\n\t\t\t\t\t\tif (this._drag_column_last)\r\n\t\t\t\t\t\t\tremoveCss(this._drag_column_last, \"webix_dd_over_column\");\r\n\t\t\t\t\t\taddCss(target, \"webix_dd_over_column\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (this._drag_column_last = target);\r\n\t\t\t\t}, this),\r\n\t\t\t\t$dragDestroy:bind(function(a,h){\r\n\t\t\t\t\tthis._auto_scroll_force = null;\r\n\t\t\t\t\tif (this._auto_scroll_delay)\r\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\r\n\r\n\t\t\t\t\tif (this._drag_column_last)\r\n\t\t\t\t\t\tremoveCss(this._drag_column_last, \"webix_dd_over_column\");\r\n\t\t\t\t\tremove(h);\r\n\t\t\t\t}, this)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (value){\r\n\t\t\tDragControl.addDrag(this._header, control);\r\n\t\t\tDragControl.addDrop(this._header, control, true);\r\n\t\t\tthis.attachEvent(\"onDestruct\", () => DragControl.unlink(control));\r\n\r\n\t\t\tif (!this._auto_scroll)\r\n\t\t\t\textend(this, AutoScroll, true);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import base from \"../views/view\";\r\n\r\n//indirectly used views\r\nimport \"../views/vscroll\";\r\n\r\nimport env from \"../webix/env\";\r\nimport template from \"../webix/template\";\r\nimport type from \"../webix/type\";\r\nimport i18n from \"../webix/i18n\";\r\nimport datafilter from \"../ui/datafilter\";\r\n\r\nimport AreaSelect from \"./datatable/areaselect\";\r\nimport DataState from \"../core/datastate\";\r\nimport TablePaste from \"../core/tablepaste\";\r\nimport FilterMixin from \"./datatable/filter\";\r\nimport SelectionMixin from \"./datatable/selection\";\r\nimport BlockSelectMixin from \"./datatable/blockselect\";\r\nimport ResizeMixin from \"./datatable/resize\";\r\nimport TouchMixin from \"./datatable/touch\";\r\nimport SizeMixin from \"./datatable/size\";\r\nimport MathMixin from \"./datatable/math\";\r\nimport HeaderMenuMixin from \"./datatable/hmenu\";\r\nimport EditMixin from \"./datatable/edit\";\r\nimport ColumnsMixin from \"./datatable/columns\";\r\nimport KeyNavMixin from \"./datatable/keynav\";\r\nimport DragMixin from \"./datatable/dnd\";\r\nimport ValidationMixin from \"./datatable/validation\";\r\nimport PrintMixin from \"./datatable/print\";\r\nimport ExportMixin from \"./datatable/export\";\r\nimport SubRowMixin from \"./datatable/subs\";\r\nimport FreezeRowMixin from \"./datatable/freeze\";\r\nimport SpansMixin from \"./datatable/spans\";\r\n\r\nimport {addStyle, addCss, removeCss, createCss, create, remove, getTextSize, _getClassName, index as getIndex} from \"../webix/html\";\r\nimport {protoUI, $$, ui} from \"../ui/core\";\r\nimport {$active} from \"../webix/skin\";\r\nimport {extend, uid, bind, delay, toFunctor, isUndefined, clone} from \"../webix/helpers\";\r\nimport {debug_size_box} from \"../webix/debug\";\r\nimport {assert} from \"../webix/debug\";\r\nimport {callEvent} from \"../webix/customevents\";\r\n\r\nimport TooltipControl from \"../core/tooltipcontrol\";\r\nimport DataCollection from \"../core/datacollection\";\r\nimport Number from \"../core/number\";\r\nimport AutoTooltip from \"../core/autotooltip\";\r\nimport Group from \"../core/group\";\r\nimport DataMarks from \"../core/datamarks\";\r\nimport DataLoader from \"../core/dataloader\";\r\nimport MapCollection from \"../core/mapcollection\";\r\nimport Settings from \"../core/settings\";\r\nimport CustomScroll from \"../core/customscroll\";\r\nimport Touch from \"../core/touch\";\r\nimport MouseEvents from \"../core/mouseevents\";\r\nimport EventSystem from \"../core/eventsystem\";\r\nimport EditAbility from \"../core/editability\";\r\nimport PagingAbility from \"../core/pagingability\";\r\nimport DataMove from \"../core/datamove\";\r\nimport CustomPrint from \"../core/customprint\";\r\nimport KeysNavigation from \"../core/keysnavigation\";\r\nimport DragItem from \"../core/dragitem\";\r\nimport ValidateCollection from \"../core/validatecollection\";\r\n\r\nconst api = {\r\n\tname:\"datatable\",\r\n\tdefaults:{\r\n\t\tleftSplit:0,\r\n\t\trightSplit:0,\r\n\t\ttopSplit:0,\r\n\t\tcolumnWidth:100,\r\n\t\tsort:true,\r\n\t\tprerender:false,\r\n\t\tautoheight:false,\r\n\t\tautowidth:false,\r\n\t\theader:true,\r\n\t\tfixedRowHeight:true,\r\n\t\tscrollAlignY:true,\r\n\t\tscrollX:true,\r\n\t\tscrollY:true,\r\n\t\tdatafetch:50,\r\n\t\tnavigation:true\r\n\t},\r\n\t$skin:function(){\r\n\t\tthis.defaults.rowHeight = $active.rowHeight;\r\n\t\tthis.defaults.minRowHeight = $active.rowHeight-6;\r\n\t\tthis.defaults.headerRowHeight = $active.barHeight - $active.borderWidth*2;\r\n\t\tthis.defaults.minColumnWidth = $active.dataPadding*2 + $active.borderWidth;\r\n\t},\r\n\ton_click:{\r\n\t\twebix_excel_filter:function(){\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_richfilter:function(){\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_table_checkbox:function(e, id){\r\n\t\t\tid = this.locate(e);\r\n\r\n\t\t\tvar item = this.getItem(id.row);\r\n\t\t\tvar col = this.getColumnConfig(id.column);\r\n\t\t\tvar trg = e.target;\r\n\r\n\t\t\t//read actual value from HTML tag when possible\r\n\t\t\t//as it can be affected by dbl-clicks\r\n\t\t\tvar check = (trg.type == \"checkbox\")?trg.checked:(item[id.column] != col.checkValue);\r\n\t\t\tvar value =  check ? col.checkValue : col.uncheckValue;\r\n\r\n\t\t\tvar update = {};\r\n\t\t\tupdate[id.column] = value;\r\n\t\t\tthis.updateItem(id.row, update, (this._settings.checkboxRefresh?\"update\":\"save\"));\r\n\r\n\t\t\tthis.callEvent(\"onCheck\", [id.row, id.column, value]);\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\twebix_table_radio:function(e){\r\n\t\t\tvar id = this.locate(e);\r\n\t\t\t\r\n\t\t\tvar item = this.getItem(id.row);\r\n\t\t\tvar col = this.getColumnConfig(id.column);\r\n\r\n\t\t\tthis.eachRow(function(rowid){\r\n\t\t\t\tvar item = this.data.pull[rowid];\r\n\t\t\t\tif (item && item[id.column] == col.checkValue)\r\n\t\t\t\t\titem[id.column] = col.uncheckValue;\r\n\t\t\t});\r\n\r\n\t\t\titem[id.column] = col.checkValue;\r\n\r\n\t\t\tthis.callEvent(\"onCheck\", [id.row, id.column, true]);\r\n\t\t\tthis.refresh();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\ton_dblclick:{\r\n\t\twebix_table_checkbox: function(){\r\n\t\t\treturn this.on_click.webix_table_checkbox.apply(this,arguments);\r\n\t\t}\r\n\t},\r\n\ton_context:{\r\n\t},\r\n\t$init:function(config){\r\n\t\tthis.on_click = extend({}, this.on_click);\r\n\t\tvar html  = \"<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>\";\r\n\t\thtml += \"<div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div>\";\r\n\t\thtml += \"<div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div>\";\r\n\t\thtml += \"<div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>\";\r\n\r\n\t\tthis._contentobj.innerHTML = html;\r\n\t\tthis._top_id = this._contentobj.id = this.name+uid();\r\n\t\tthis._contentobj.className +=\" webix_dtable\";\r\n\r\n\t\tthis._dataobj = this._contentobj;\r\n\r\n\t\tthis._header = this._contentobj.firstChild;\r\n\t\tthis._body = this._header.nextSibling;\r\n\t\tthis._footer = this._body.nextSibling.nextSibling;\r\n\r\n\t\tthis._viewobj.setAttribute(\"role\", \"grid\");\r\n\t\tif(!config.editable) \r\n\t\t\tthis._viewobj.setAttribute(\"aria-readonly\", \"true\");\r\n\r\n\t\tthis.data.provideApi(this, true);\r\n\t\tthis.data.attachEvent(\"onParse\", bind(this._call_onparse, this));\r\n\r\n\t\tthis.$ready.push(this._first_render);\r\n\r\n\t\tthis._columns = [];\r\n\t\tthis._hidden_column_order = [];\r\n\t\tthis._headers = [];\r\n\t\tthis._footers = [];\r\n\t\tthis._rows_cache = [];\r\n\t\tthis._active_headers = {};\r\n\t\tthis._filter_elements = {};\r\n\t\tthis._sort_signs = {};\r\n\t\tthis._sort_signs_order = [];\r\n\t\tthis._header_height = this._footer_height = 0;\r\n\r\n\t\t//component can create new view\r\n\t\tthis._destroy_with_me = [];\r\n\r\n\t\tthis.data.attachEvent(\"onServerConfig\", bind(this._config_table_from_file, this));\r\n\t\tthis.data.attachEvent(\"onServerOptions\", bind(this._config_options_from_file, this));\r\n\t\tthis.attachEvent(\"onViewShow\", function(){\r\n\t\t\tthis._restore_scroll_state();\r\n\t\t\tthis._refresh_any_header_content();\r\n\t\t});\r\n\t\tthis.data.attachEvent(\"onClearAll\", bind(function(soft){\r\n\t\t\tif (!soft){\r\n\t\t\t\tthis._scrollLeft = this._scrollTop = 0;\r\n\t\t\t\tif (this._x_scroll) this._x_scroll.reset();\r\n\t\t\t\tif (this._y_scroll) this._y_scroll.reset();\r\n\t\t\t\tthis._setLeftScroll(0);\r\n\t\t\t}\r\n\t\t}, this));\r\n\t\tthis.attachEvent(\"onDestruct\", this._clean_config_struct);\r\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\r\n\t\tthis.attachEvent(\"onScrollY\", this._adjust_rows);\r\n\r\n\t\tcallEvent(\"onDataTable\", [this, config]);\r\n\t},\r\n\t_render_initial:function(){\r\n\t\tthis._scrollSizeX = this._scrollSizeY = env.scrollSize;\r\n\r\n\t\taddStyle(\"#\"+this._top_id +\" .webix_cell { height:\"+this._settings.rowHeight+\"px; line-height:\"+(this._settings.rowLineHeight || this._settings.rowHeight)+\"px;\" +(this._settings.fixedRowHeight?\"\":\"white-space:normal;\")+\" }\");\r\n\t\taddStyle(\"#\"+this._top_id +\" .webix_hcell { height:\"+this._settings.headerRowHeight+\"px; line-height:\"+this._settings.headerRowHeight+\"px;}\");\r\n\t\tthis._render_initial = function(){};\r\n\t},\r\n\t_first_render:function(){\r\n\t\tthis.data.attachEvent(\"onStoreLoad\", bind(this._refresh_any_header_content, this));\r\n\t\tthis.data.attachEvent(\"onSyncApply\", bind(this._refresh_any_header_content, this));\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(function(){ return this.render.apply(this, arguments); }, this));\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(this._refresh_tracking_header_content, this));\r\n\t\tthis.render();\r\n\t},\r\n\trefresh:function(){\r\n\t\tthis.render();\r\n\t},\r\n\t_delayRender:function(){\r\n\t\tclearTimeout(this._renderDelay);\r\n\t\tthis._renderDelay = delay(()=>{\r\n\t\t\tthis._renderDelay = 0;\r\n\t\t\tif(!isUndefined(this._delayedLeftScroll)){\r\n\t\t\t\tthis._setLeftScroll(this._delayedLeftScroll);\r\n\t\t\t\tdelete this._delayedLeftScroll;\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t});\r\n\t},\r\n\trender:function(id, data, mode){\r\n\t\t//pure data saving call\r\n\t\tif (mode == \"save\" || this._renderDelay) return;\r\n\r\n\t\tif (!this._columns.length){\r\n\t\t\tvar cols = this._settings.columns;\r\n\t\t\tif (!cols || !cols.length) {\r\n\t\t\t\tif (this._settings.autoConfig && this.data.order.length && !this._hidden_column_order.length){\r\n\t\t\t\t\tthis._dtable_fully_ready = 0;\r\n\t\t\t\t\tthis._autoDetectConfig();\r\n\t\t\t\t} else\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._define_structure();\r\n\t\t}\r\n\r\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\r\n\t\t\treturn this._render_initial(); //Chrome 34, Custom Font loading bug\r\n\r\n\t\tvar fast_mode = this.config.experimental && !this._settings.subview;\r\n\t\t//replace multiple atomic updates by single big repaint\r\n\t\tif (id && data != -1 && (mode == \"paint\" || mode == \"update\") && !fast_mode){\r\n\t\t\tif (this._render_timer)\r\n\t\t\t\tclearTimeout(this._render_timer);\r\n\r\n\t\t\tif (!this._render_timer || this._render_timer_id == id){\r\n\t\t\t\tthis._render_timer_id = id;\r\n\t\t\t\tthis._render_timer = delay(function(){\r\n\t\t\t\t\t//if only one call - repaint single item\r\n\t\t\t\t\tthis.render(id, -1, mode);\r\n\t\t\t\t}, this);\r\n\t\t\t} else {\r\n\t\t\t\tthis._render_timer_id = null;\r\n\t\t\t\tthis._render_timer = delay(function(){\r\n\t\t\t\t\t//if ther was a serie of calls - replace them with single full repaint\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else if (this._render_timer){\r\n\t\t\tclearTimeout(this._render_timer);\r\n\t\t\tthis._render_timer = 0;\r\n\t\t}\r\n\r\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\r\n\r\n\t\t\tthis._render_initial();\r\n\t\t\tif (!this._dtable_fully_ready)\r\n\t\t\t\tthis._apply_headers();\r\n\r\n\t\t\tif (this._content_width){\r\n\t\t\t\tif (fast_mode && (mode == \"paint\" || mode == \"update\") && id)\r\n\t\t\t\t\tthis._repaint_single_row(id);\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._check_rendered_cols(true, true);\r\n\t\t\t}\r\n\r\n\t\t\tif (!id || mode!=\"update\"){\r\n\t\t\t\tthis._dtable_height = this._get_total_height();\r\n\t\t\t\tthis._set_split_sizes_y();\r\n\t\t\t}\r\n\r\n\t\t\t//don't depend on hidden rows/rolumns\r\n\t\t\tthis._viewobj.setAttribute(\"aria-colcount\", Math.max(this._hidden_column_order.length, this._columns.length));\r\n\t\t\tthis._viewobj.setAttribute(\"aria-rowcount\", this.data.count());\r\n\r\n\t\t\tthis.callEvent(\"onAfterRender\",[this.data]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tgetColumnConfig:function(id){\r\n\t\treturn this._columns_pull[id] || this._hidden_column_hash[id];\r\n\t},\r\n\t_config_options_from_file:function(colls){\r\n\t\tfor (var key in colls){\r\n\t\t\tvar column = this.getColumnConfig(key);\r\n\t\t\tassert(column, \"Orphan collection: \"+key);\r\n\t\t\tvar temp = new DataCollection({\r\n\t\t\t\tdata:colls[key]\r\n\t\t\t});\r\n\t\t\tthis._destroy_with_me.push(temp);\r\n\t\t\tthis._bind_collection(temp, column);\r\n\t\t}\r\n\t},\r\n\t//xml has different configuration structure, fixing\r\n\t_config_table_from_file:function(config){\r\n\t\tthis._create_scheme_init();\r\n\t\tif (config.columns && this._dtable_fully_ready)\r\n\t\t\tthis.refreshColumns(null, true);\r\n\t},\r\n\t_define_structure:function(){\r\n\t\tif (this._settings.columns){\r\n\t\t\tthis._columns = this._settings.columns;\r\n\t\t\tthis._columns_pull = {};\r\n\r\n\t\t\tfor (var i = 0; i < this._columns.length; i++){\r\n\t\t\t\tvar col = this._columns[i];\r\n\t\t\t\tthis._columns_pull[col.id] = col;\r\n\r\n\t\t\t\tvar format = col.cssFormat;\r\n\t\t\t\tif (format)\r\n\t\t\t\t\tcol.cssFormat = toFunctor(format, this.$scope);\r\n\r\n\t\t\t\tcol.width = this._correctColumnWidth(col.width||this._settings.columnWidth, col);\r\n\t\t\t\tif (typeof col.format == \"string\") \r\n\t\t\t\t\tcol.format = i18n[col.format]||window[col.format];\r\n\t\t\t\tif (col.numberFormat){\r\n\t\t\t\t\tvar nformat = col.numberFormat;\r\n\t\t\t\t\tif (typeof nformat === \"string\")\r\n\t\t\t\t\t\tcol.numberFormat = nformat = Number.getConfig(nformat);\r\n\t\t\t\t\tcol.format = Number.numToStr(nformat);\r\n\t\t\t\t\tcol.editFormat = col.editFormat || function(val){ return Number.format(val, nformat); };\r\n\t\t\t\t\tcol.editParse = col.editParse || function(val){ return Number.parse(val, nformat); };\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//default settings for checkboxes and radios\r\n\t\t\t\tif (isUndefined(col.checkValue)) col.checkValue = 1;\r\n\t\t\t\tif (isUndefined(col.uncheckValue)) col.uncheckValue = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (col.css && typeof col.css == \"object\")\r\n\t\t\t\t\tcol.css = createCss(col.css);\r\n\r\n\t\t\t\tvar rawTemplate = col.template;\r\n\t\t\t\tif (rawTemplate){\r\n\t\t\t\t\tif (typeof rawTemplate == \"string\")\r\n\t\t\t\t\t\trawTemplate = rawTemplate.replace(/#\\$value#/g,\"#\"+col.id+\"#\");\r\n\t\t\t\t\tcol.template = template(rawTemplate);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._normalize_headers(\"header\", this._headers);\r\n\t\t\tthis._normalize_headers(\"footer\", this._footers);\r\n\r\n\t\t\tthis.callEvent(\"onStructureLoad\",[]);\r\n\t\t}\r\n\t},\r\n\t_define_structure_and_render:function(){\r\n\t\tthis._apply_headers();\r\n\t},\r\n\t_clean_config_struct:function(){ \r\n\t\t//remove column technical info from the column\r\n\t\t//it allows to reuse the same config object for new grid\r\n\t\tfor (var i = 0; i < this._columns.length; i++){\r\n\t\t\tdelete this._columns[i].attached;\r\n\t\t\tdelete this._columns[i].node;\r\n\t\t}\r\n\t},\r\n\t_apply_headers:function(){\r\n\t\tthis._rightSplit = this._columns.length-this._settings.rightSplit;\r\n\t\tthis._dtable_width = 0;\r\n\r\n\t\tfor (let i = 0; i < this._columns.length; i++){\r\n\t\t\tif (!this._columns[i].node){\r\n\r\n\t\t\t\tvar temp = create(\"DIV\");\r\n\t\t\t\ttemp.style.width = this._columns[i].width + \"px\";\r\n\t\t\t\tthis._columns[i].node = temp;\r\n\t\t\t}\r\n\t\t\tif (i>=this._settings.leftSplit && i<this._rightSplit)\r\n\t\t\t\tthis._dtable_width += this._columns[i].width;\r\n\t\t}\r\n\r\n\t\tvar marks = [];\r\n\t\t\r\n\t\tif (this._settings.rightSplit){\r\n\t\t\tvar nr = this._columns.length-this._settings.rightSplit;\r\n\t\t\tmarks[nr]  =\" webix_first\";\r\n\t\t\tmarks[nr-1]=\" webix_last\";\r\n\t\t}\r\n\t\tif (this._settings.leftSplit){\r\n\t\t\tvar nl = this._settings.leftSplit;\r\n\t\t\tmarks[nl]  =\" webix_first\";\r\n\t\t\tmarks[nl-1]=\" webix_last\";\r\n\t\t}\r\n\t\tmarks[0]  = (marks[0]||\"\")+\" webix_first webix_select_mark\";\r\n\t\tvar last_index = this._columns.length-1;\r\n\t\tmarks[last_index] = (marks[last_index]||\"\")+\" webix_last\";\r\n\r\n\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tvar node = this._columns[i].node;\r\n\t\t\tnode.setAttribute(/*@attr*/\"column\", i);\r\n\t\t\tnode.className = \"webix_column \"+(this._columns[i].css||\"\")+(marks[i]||\"\");\r\n\t\t}\r\n\r\n\t\tthis._create_scrolls();\t\t\r\n\r\n\t\tthis._set_columns_positions();\r\n\t\tthis._set_split_sizes_x();\r\n\t\tthis._render_header_and_footer();\r\n\r\n\t\tthis._dtable_fully_ready = true;\r\n\t},\r\n\t_set_columns_positions:function(){\r\n\t\tvar left = 0;\r\n\t\tfor (var i = 0; i < this._columns.length; i++){\r\n\t\t\tvar column = this._columns[i];\r\n\t\t\tif (i == this._settings.leftSplit || i == this._rightSplit)\r\n\t\t\t\tleft = 0;\r\n\r\n\t\t\tif (column.node){\r\n\t\t\t\tcolumn.node.style.left = left+\"px\";\r\n\t\t\t\tif (this._settings.leftSplit || this._settings.rightSplit){\r\n\t\t\t\t\tremove(column.node);\r\n\t\t\t\t\tcolumn.attached = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tleft += column.width;\r\n\t\t}\r\n\t},\r\n\t_render_header_and_footer:function(){\r\n\t\tif (!this._header_fix_width)\r\n\t\t\tthis._header_fix_width = 0;\r\n\r\n\t\tthis._header_height = this._footer_height = 0;\r\n\r\n\t\tif (this._settings.header) {\r\n\t\t\tthis._refreshHeaderContent(this._header, 0, 1);\r\n\t\t\tthis._normalize_headers(\"header\", this._headers);\r\n\t\t\tthis._header_height = this._headers._summ;\r\n\t\t\tthis._render_header_section(this._header, \"header\", this._headers);\r\n\t\t}\r\n\t\tif (this._settings.footer){\r\n\t\t\tthis._refreshHeaderContent(this._footer, 0, 1);\r\n\t\t\tthis._normalize_headers(\"footer\", this._footers);\r\n\t\t\tthis._footer_height = this._footers._summ;\r\n\t\t\tthis._render_header_section(this._footer, \"footer\", this._footers);\r\n\t\t}\t\r\n\r\n\t\tthis.refreshHeaderContent(false, false);\r\n\t\tthis._size_header_footer_fix();\r\n\r\n\t\tfor (let i=0; i<this._last_order.length; i++){\r\n\t\t\tlet col_id = this._last_order[i];\r\n\t\t\tthis.markSorting(col_id, this._last_sorted[col_id].dir, !!i);\r\n\t\t}\r\n\t},\r\n\t_getHeaderHeight:function(header, column, ind){\r\n\t\tvar width = 0;\r\n\t\tvar colspan = header.colspan || 1;\r\n\t\tvar css = \"webix_hcell \"+(header.css||\"\");\r\n\r\n\t\tif(header.rotate)\r\n\t\t\tcss += \" webix_measure_rotate\";\r\n\t\telse\r\n\t\t\tfor(var i = 0; i<colspan; i++)\r\n\t\t\t\twidth += this._columns[ind+i] ? this._columns[ind+i].width : this.config.columnWidth;\r\n\t\t\r\n\t\tvar size = getTextSize(\r\n\t\t\t[header.text],\r\n\t\t\tcss, \r\n\t\t\twidth\r\n\t\t);\r\n\r\n\t\t//+1 to compensate for scrollHeight rounding\r\n\t\treturn (header.rotate ? size.width : size.height ) + 1;\r\n\t},\r\n\t_normalize_headers:function(collection, heights){\r\n\t\tlet rows = 0;\r\n\r\n\t\t// clear array of previous values\r\n\t\theights.length = 0;\r\n\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tlet data = this._columns[i][collection];\r\n\t\t\tif (!data || typeof data != \"object\" || !data.length){\r\n\t\t\t\tif (isUndefined(data)){\r\n\t\t\t\t\tif (collection == \"header\")\r\n\t\t\t\t\t\tdata = this._columns[i].id;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tdata = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tdata = [data];\r\n\t\t\t}\r\n\t\t\tfor (let j = 0; j < data.length; j++){\r\n\t\t\t\tif (typeof data[j] != \"object\")\r\n\t\t\t\t\tdata[j] = { text:data[j] };\r\n\r\n\t\t\t\tif (data[j] && data[j].height) heights[j] = Math.max(heights[j]||0, data[j].height);\r\n\t\t\t\tif (data[j] && data[j].autoheight) heights[j] = Math.max(heights[j]||0, this._getHeaderHeight(data[j], this._columns[i], i));\r\n\t\t\t\tif (data[j] && data[j].css && typeof data[j].css === \"object\") data[j].css = createCss(data[j].css);\r\n\t\t\t}\r\n\t\t\trows = Math.max(rows, data.length);\r\n\t\t\tthis._columns[i][collection] = data;\r\n\t\t}\r\n\r\n\t\theights._summ = rows;\r\n\t\tfor (let i = rows-1; i >= 0; i--){\r\n\t\t\theights[i] = heights[i] || this._settings.headerRowHeight;\r\n\t\t\theights._summ += heights[i]*1;\r\n\t\t}\r\n\r\n\t\t//set null to cells included in col|row spans\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tconst col = this._columns[i][collection];\r\n\t\t\tfor (let j=0; j<col.length; j++){\r\n\t\t\t\tif (col[j] && col[j].rowspan)\r\n\t\t\t\t\tfor (let z=1; z<col[j].rowspan; z++)\r\n\t\t\t\t\t\tcol[j+z] = null;\r\n\t\t\t\tif (col[j] && col[j].colspan)\r\n\t\t\t\t\tfor (let z=1; z<col[j].colspan; z++)\r\n\t\t\t\t\t\tthis._columns[i+z][collection][j] = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//auto-rowspan cells, which has not enough header lines\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tconst data = this._columns[i][collection];\r\n\t\t\tif (data.length < rows){\r\n\t\t\t\tconst end = data.length-1;\r\n\t\t\t\tdata[end].rowspan = rows - data.length + 1;\r\n\t\t\t\tfor (let j=end+1; j<rows; j++)\r\n\t\t\t\t\tdata[j] = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rows;\r\n\t},\r\n\t_find_header_content:function(sec, id){\r\n\t\tvar alltd = sec.getElementsByTagName(\"TD\");\r\n\t\tfor (var i = 0; i < alltd.length; i++)\r\n\t\t\tif (alltd[i].getAttribute(/*@attr*/\"active_id\") == id)\r\n\t\t\t\treturn alltd[i];\r\n\t},\r\n\tgetHeaderContent:function(id){\r\n\t\tvar obj = this._find_header_content(this._header, id);\r\n\t\tif (!obj)\r\n\t\t\tobj = this._find_header_content(this._footer, id);\r\n\r\n\t\tif (obj){\r\n\t\t\tvar config = this._active_headers[id];\r\n\t\t\tvar type = datafilter[config.content];\r\n\r\n\t\t\tconst base = {\r\n\t\t\t\ttype: type,\r\n\t\t\t\tgetValue:function(text){ return type.getValue(obj, text); },\r\n\t\t\t\tsetValue:function(value){ return type.setValue(obj, value); }\r\n\t\t\t};\r\n\r\n\t\t\tif (type.getHelper) extend(base, type.getHelper(obj, config));\r\n\t\t\treturn base;\r\n\t\t}\r\n\t},\r\n\t_summ_next:function(heights, start, i){\r\n\t\tvar summ = i ? -1 : 0;\r\n\r\n\t\ti += start;\r\n\t\tfor (start; start<i; start++) \r\n\t\t\tsumm+=heights[start] + 1;\r\n\r\n\t\treturn summ;\r\n\t},\r\n\t_render_subheader:function(start, end, width, name, heights){\r\n\t\tif (start == end) return \"\";\r\n\r\n\t\tvar html = \"<table role='presentation' style='width:\"+width+\"px' cellspacing='0' cellpadding='0'>\";\r\n\t\thtml += \"<tr class='webix_size_row'>\";\r\n\t\tfor (let i = start; i < end; i++)\r\n\t\t\thtml += \"<td style='width:\"+this._columns[i].width+\"px;'></td>\";\r\n\t\thtml += \"</tr>\";\r\n\r\n\t\tvar count = this._columns[0][name].length;\r\n\r\n\t\tfor (var j = 0; j < count; j++){\r\n\t\t\thtml += \"<tr \"+/*@attr*/\"section\"+\"='\"+name+\"' role='row'>\";\r\n\t\t\tfor (let i = start; i < end; i++){\r\n\t\t\t\tvar header = this._columns[i][name][j];\r\n\t\t\t\tif (header === null) continue;\r\n\r\n\t\t\t\tif (header.content){\r\n\t\t\t\t\theader.contentId = header.contentId || uid();\r\n\t\t\t\t\theader.columnId = this._columns[i].id;\r\n\t\t\t\t\theader.format = this._columns[i].format;\r\n\r\n\t\t\t\t\tassert(datafilter, \"Filtering extension was not included\");\r\n\t\t\t\t\tassert(datafilter[header.content], \"Unknown content type: \"+header.content);\r\n\r\n\t\t\t\t\theader.text = datafilter[header.content].render(this, header);\r\n\t\t\t\t\tthis._active_headers[header.contentId] = header;\r\n\t\t\t\t\tthis._has_active_headers = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thtml += \"<td  role='presentation' \"+/*@attr*/\"column\"+\"='\"+(header.colspan?(header.colspan-1+i):i)+\"'\";\r\n\r\n\t\t\t\tvar hcss = \"\";\r\n\t\t\t\tif (i==start)\t\r\n\t\t\t\t\thcss+=\"webix_first\";\r\n\t\t\t\tvar column_pos = i + (header.colspan?header.colspan-1:0);\r\n\t\t\t\tif (column_pos>=end-1)\r\n\t\t\t\t\thcss+=\" webix_last\";\r\n\t\t\t\tif ((header.rowspan && j+header.rowspan === count) || j === count-1)\r\n\t\t\t\t\thcss+=\" webix_last_row\";\r\n\t\t\t\tif (hcss)\r\n\t\t\t\t\thtml+=\" class=\\\"\"+hcss+\"\\\"\";\r\n\t\t\t\t\r\n\t\t\t\tvar cell_height = heights[j];\r\n\t\t\t\tvar sheight=\"\";\r\n\t\t\t\tif (header.contentId)\r\n\t\t\t\t\thtml+=\" \"+/*@attr*/\"active_id\"+\"='\"+header.contentId+\"'\";\r\n\t\t\t\tif (header.colspan)\r\n\t\t\t\t\thtml+=\" colspan='\"+header.colspan+\"'\";\r\n\t\t\t\tif (header.rowspan){\r\n\t\t\t\t\thtml+=\" rowspan='\"+header.rowspan+\"'\";\r\n\t\t\t\t\tcell_height = this._summ_next(this._headers, j, header.rowspan);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (cell_height != this._settings.headerRowHeight)\r\n\t\t\t\t\tsheight =\" style='line-height:\"+cell_height+\"px; height:\"+cell_height+\"px;'\";\r\n\r\n\t\t\t\tvar css = \"webix_hcell\";\r\n\t\t\t\tif (header.css)\r\n\t\t\t\t\tcss += \" \" + header.css;\r\n\t\t\t\tif (this._columns[i].$selected)\r\n\t\t\t\t\tcss += \" webix_sel_hcell\";\r\n\r\n\t\t\t\thtml+=\"><div role='columnheader' class='\"+css+\"'\"+sheight+\">\";\r\n\r\n\t\t\t\tvar text = (header.text===\"\"?\"&nbsp;\":header.text);\r\n\t\t\t\tif (header.rotate)\r\n\t\t\t\t\ttext = \"<div class='webix_rotate' style='width:\"+(cell_height-10)+\"px; transform-origin:center \"+(cell_height-15)/2+\"px;-webkit-transform-origin:center \"+(cell_height-15)/2+\"px;'>\"+text+\"</div>\";\r\n\r\n\t\t\t\thtml += text + \"</div></td>\";\r\n\t\t\t}\r\n\t\t\thtml += \"</tr>\";\r\n\t\t}\r\n\t\thtml+=\"</tr></table>\";\t\r\n\r\n\t\treturn html;\r\n\t},\r\n\tshowItemByIndex:function(row_ind, column_ind){\r\n\t\tvar pager = this._settings.pager;\r\n\t\tif (pager && row_ind >= this._settings.topSplit){\r\n\t\t\tvar target = Math.floor(row_ind/pager.size);\r\n\t\t\tif (target != pager.page)\r\n\t\t\t\t$$(pager.id).select(target);\r\n\t\t}\r\n\r\n\t\t//parameter will be set to -1, to mark that scroll need not to be adjusted\r\n\t\tvar scroll = this.getScrollState();\r\n\r\n\t\tif (row_ind >= this._settings.topSplit || (this._settings.prerender && row_ind != -1)){\r\n\t\t\tlet state = this._get_y_range();\r\n\t\t\tif (row_ind < state[0]+1 || row_ind >= state[1]-1 ){\r\n\t\t\t\t//not visible currently\r\n\t\t\t\tlet summ = this._getHeightByIndexSumm((pager?this.data.$min:0),row_ind);\r\n\t\t\t\tlet dataHeight = this._dtable_offset_height+1;\r\n\t\t\t\tconst itemHeight = this._getHeightByIndex(row_ind);\r\n\t\t\t\tif (row_ind < state[0]+1){\r\n\t\t\t\t\t//scroll top - show row at top of screen\r\n\t\t\t\t\tsumm = Math.max(0, summ) - (this._top_split_height||0);\r\n\t\t\t\t} else if(summ + itemHeight > dataHeight) {\r\n\t\t\t\t\t//scroll bottom - show row at bottom of screen\r\n\t\t\t\t\tsumm += itemHeight - dataHeight;\r\n\t\t\t\t\t//because of row rounding we need to scroll some extra\r\n\t\t\t\t\tfor (let cur_ind = row_ind; cur_ind>0 && dataHeight>0 ; cur_ind--)\r\n\t\t\t\t\t\tdataHeight -= this._getHeightByIndex(cur_ind);\r\n\r\n\t\t\t\t\tif (row_ind>0 && dataHeight)\r\n\t\t\t\t\t\tsumm += this._getHeightByIndex(row_ind+1);\r\n\t\t\t\t} else { summ = scroll.y; }\r\n\r\n\t\t\t\tscroll.y = summ;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (column_ind != -1){\r\n\t\t\t//ignore split columns - they are always visible\r\n\t\t\tif (column_ind < this._settings.leftSplit || column_ind >= this._rightSplit)\r\n\t\t\t\treturn this.scrollTo(scroll.x, scroll.y);\r\n\r\n\t\t\t//very similar to y-logic above\r\n\t\t\tlet state = this._get_x_range();\r\n\t\t\tif (column_ind < state[0]+1 || column_ind >= state[1]-1 ){\r\n\t\t\t\t//not visible currently\r\n\t\t\t\tlet summ = 0;\r\n\t\t\t\tfor (var i=this._settings.leftSplit; i<column_ind; i++)\r\n\t\t\t\t\tsumm += this._columns[i].width;\r\n\r\n\t\t\t\tconst itemWidth = this._columns[column_ind].width;\r\n\t\t\t\t/*jsl:ignore*/\r\n\t\t\t\tif (column_ind < state[0]+1){\r\n\t\t\t\t\t//scroll to left border\r\n\t\t\t\t} else if(summ + itemWidth > this._center_width){\r\n\t\t\t\t\t//scroll to right border\r\n\t\t\t\t\tsumm += itemWidth - this._center_width;\r\n\t\t\t\t} else{ summ = scroll.x; }\r\n\r\n\t\t\t\t/*jsl:end*/\r\n\t\t\t\tscroll.x = summ;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(scroll.x, scroll.y);\r\n\t},\r\n\tshowCell:function(row, column){\r\n\t\tif (!column || !row){ \r\n\t\t\t//if column or row not provided - take from current selection\r\n\t\t\tvar t=this.getSelectedId(true);\r\n\t\t\tif (t.length == 1){\r\n\t\t\t\tcolumn = column || t[0].column;\r\n\t\t\t\trow = row || t[0].row;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//convert id to index\r\n\t\tcolumn = column?this.getColumnIndex(column):-1;\r\n\t\trow = row?this.getIndexById(row):-1;\r\n\t\tthis.showItemByIndex(row, column);\r\n\r\n\t},\r\n\tscrollTo:function(x,y){\r\n\t\tif (!this._x_scroll) return;\r\n\t\tif (this._scrollTo_touch)\r\n\t\t\treturn this._scrollTo_touch(x,y);\r\n\r\n\t\tif (x !== null)\r\n\t\t\tthis._x_scroll.scrollTo(x);\r\n\t\tif (y !== null)\r\n\t\t\tthis._y_scroll.scrollTo(y);\r\n\t},\r\n\t_touch_scroll:\"touch\",\r\n\tgetScrollState:function(){\r\n\t\tif (this._getScrollState_touch)\r\n\t\t\treturn this._getScrollState_touch();\r\n\r\n\t\tvar diff =  this._render_scroll_shift?0:(this._render_scroll_diff||0);\r\n\t\treturn {x:(this._scrollLeft||0), y:(this._scrollTop + diff)};\r\n\t},\r\n\tshowItem:function(id){\r\n\t\tthis.showItemByIndex(this.getIndexById(id), -1);\r\n\t},\r\n\t_render_header_section:function(sec, name, heights){\r\n\t\tconst header = sec.childNodes;\r\n\r\n\t\theader[0].innerHTML = this._render_subheader(0, this._settings.leftSplit, this._left_width, name, heights);\r\n\t\theader[1].innerHTML = this._render_subheader(this._settings.leftSplit, this._rightSplit, this._dtable_width, name, heights);\r\n\t\theader[2].innerHTML = this._render_subheader(this._rightSplit, this._columns.length, this._right_width, name, heights);\r\n\r\n\t\tif(this._dtable_column_refresh)\r\n\t\t\theader[1].scrollLeft = this.getScrollState().x;\r\n\t\theader[1].onscroll = bind(this._scroll_with_header, this);\r\n\t},\r\n\t_scroll_with_header:function(){\r\n\t\tvar active = this.getScrollState().x;\r\n\t\tvar header = this._header.childNodes[1].scrollLeft;\r\n\r\n\t\t// on mobile devices scrollLeft can be a non-round value\r\n\t\tif (Math.ceil(header) != Math.ceil(active))\r\n\t\t\tthis.scrollTo(header, null);\r\n\t},\r\n\t_refresh_tracking_header_content:function(){\r\n\t\tthis.refreshHeaderContent(true, true);\r\n\t},\r\n\t_refresh_any_header_content:function(){\r\n\t\tthis.refreshHeaderContent(false, true);\r\n\t},\r\n\t//[DEPRECATE] - v3.0, move to private\r\n\trefreshHeaderContent:function(trackedOnly, preserve, id){\r\n\t\tif (this._settings.header){\r\n\t\t\tif (preserve) this._refreshHeaderContent(this._header, trackedOnly, 1, id);\r\n\t\t\tthis._refreshHeaderContent(this._header, trackedOnly, 0, id);\r\n\t\t}\r\n\t\tif (this._settings.footer){\r\n\t\t\tif (preserve) this._refreshHeaderContent(this._footer, trackedOnly, 1, id);\r\n\t\t\tthis._refreshHeaderContent(this._footer, trackedOnly, 0, id);\r\n\t\t}\r\n\t},\r\n\trefreshFilter:function(id){\r\n\t\tthis.refreshHeaderContent(false, true, id);\r\n\t},\r\n\t_refreshHeaderContent:function(sec, cellTrackOnly, getOnly, byId){\r\n\t\tif (this._has_active_headers && sec){\r\n\t\t\tvar alltd = sec.getElementsByTagName(\"TD\");\r\n\r\n\t\t\tfor (var i = 0; i < alltd.length; i++){\r\n\t\t\t\tvar activeId = alltd[i].getAttribute(/*@attr*/\"active_id\");\r\n\t\t\t\tif (activeId){\r\n\t\t\t\t\tvar obj = this._active_headers[activeId];\r\n\t\t\t\t\tif (byId && byId != obj.columnId) continue;\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar content = datafilter[obj.content];\r\n\r\n\t\t\t\t\tif (getOnly){\r\n\t\t\t\t\t\tif (content.getValue){\r\n\t\t\t\t\t\t\tobj.value = content.getValue(alltd[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!cellTrackOnly || content.trackCells){\r\n\t\t\t\t\t\tcontent.refresh(this, alltd[i], obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\theaderContent:[],\r\n\t_set_size_scroll_area:function(obj, height, hdx){\r\n\t\tif (this._scrollSizeY){\r\n\r\n\t\t\tobj.style.height = Math.max(height,1)-1+\"px\";\r\n\t\t\tobj.style.width = (this._rightSplit?0:hdx)+this._scrollSizeY-1+\"px\";\r\n\r\n\t\t\t// temp. fix: Chrome [DIRTY]\r\n\t\t\tif (env.isWebKit)\r\n\t\t\t\tvar w = obj.offsetWidth; //eslint-disable-line\r\n\t\t} else \r\n\t\t\tobj.style.display = \"none\";\r\n\t},\r\n\t_size_header_footer_fix:function(){\r\n\t\tif (this._settings.header)\r\n\t\t\tthis._set_size_scroll_area(this._header_scroll, this._header_height, this._header_fix_width);\r\n\t\tif (this._settings.footer)\r\n\t\t\tthis._set_size_scroll_area(this._footer_scroll, this._footer_height, this._header_fix_width);\r\n\t},\r\n\t_update_scroll:function(){\r\n\t\tvar hasX = !(this._settings.autowidth || this._settings.scrollX === false);\r\n\t\tthis._scrollSizeX =  hasX ? env.scrollSize : 0;\r\n\t\tvar hasY = !(this._settings.autoheight || this._settings.scrollY === false);\r\n\t\tthis._scrollSizeY = hasY ? env.scrollSize : 0;\r\n\t\tif (env.touch)\r\n\t\t\thasX = hasY = false;\r\n\t\tif (this._x_scroll){\r\n\t\t\tthis._x_scroll._settings.scrollSize = this._scrollSizeX;\r\n\t\t\tthis._x_scroll._settings.scrollVisible = hasX;\r\n\t\t}\r\n\t\tif (this._y_scroll){\r\n\t\t\tthis._y_scroll._settings.scrollSize = this._scrollSizeY;\r\n\t\t\tthis._y_scroll._settings.scrollVisible = hasY;\r\n\t\t}\r\n\t},\r\n\t_create_scrolls:function(){\r\n\r\n\t\tthis._scrollTop = 0;\r\n\t\tthis._scrollLeft = 0;\r\n\t\tvar scrx, scry; scrx = scry = 1;\r\n\r\n\t\tif (this._settings.autoheight || this._settings.scrollY === false)\r\n\t\t\tscry = this._scrollSizeY = 0;\r\n\t\tif (this._settings.autowidth || this._settings.scrollX === false)\r\n\t\t\tscrx = this._scrollSizeX = 0;\r\n\t\t\r\n\t\tif (env.touch) scrx = scry = 0;\r\n\r\n\t\tif (!this._x_scroll){\r\n\t\t\tthis._x_scroll = ui({\r\n\t\t\t\tview:\"vscroll\",\r\n\t\t\t\tcontainer:this._footer.previousSibling,\r\n\t\t\t\tscrollWidth:this._dtable_width,\r\n\t\t\t\tscrollSize:this._scrollSizeX,\r\n\t\t\t\tscrollVisible:scrx\r\n\t\t\t});\r\n\r\n\t\t\t//fix for scroll space on Mac\r\n\t\t\tif (scrx && !this._scrollSizeX && !env.$customScroll)\r\n\t\t\t\tthis._x_scroll._viewobj.style.position=\"absolute\";\r\n\r\n\t\t\tthis._x_scroll.attachEvent(\"onScroll\", bind(this._onscroll_x, this));\r\n\t\t}\r\n\r\n\t\tif (!this._y_scroll){\r\n\t\t\tthis._header_scroll = this._footer.nextSibling;\r\n\t\t\tvar vscroll_view = this._header_scroll.nextSibling;\r\n\t\t\tthis._footer_scroll = vscroll_view.nextSibling;\r\n\r\n\t\t\tthis._y_scroll = ui({\r\n\t\t\t\tview:\"vscroll\",\r\n\t\t\t\tcontainer:vscroll_view,\r\n\t\t\t\tscrollHeight:100,\r\n\t\t\t\tscroll:\"y\",\r\n\t\t\t\tscrollSize:this._scrollSizeY,\r\n\t\t\t\tscrollVisible:scry\r\n\t\t\t});\r\n\r\n\t\t\tthis._y_scroll.activeArea(this._body);\r\n\t\t\tthis._x_scroll.activeArea(this._body, true);\r\n\t\t\tthis._y_scroll.attachEvent(\"onScroll\", bind(this._onscroll_y, this));\r\n\t\t}\r\n\r\n\t\tif (this._content_width)\r\n\t\t\tthis.callEvent(\"onResize\",[this._content_width, this._content_height]);\r\n\r\n\t\tif (env.$customScroll)\r\n\t\t\tCustomScroll.enable(this);\r\n\r\n\t\tthis._create_scrolls = function(){};\r\n\t},\r\n\tcolumnId:function(index){\r\n\t\treturn this._columns[index].id;\r\n\t},\r\n\tgetColumnIndex:function(id){\r\n\t\tfor (var i = 0; i < this._columns.length; i++)\r\n\t\t\tif (this._columns[i].id == id) \r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t},\r\n\t_getNodeBox:function(rid, cid){\r\n\t\tvar xs=0, xe=0, ye=0, ys=0;\r\n\t\tvar i; var zone = 0;\r\n\t\tfor (i = 0; i < this._columns.length; i++){\r\n\t\t\tif (this._rightSplit == i || this._settings.leftSplit == i){\r\n\t\t\t\txs=0; zone++;\r\n\t\t\t}\r\n\t\t\tif (this._columns[i].id == cid) \r\n\t\t\t\tbreak;\r\n\t\t\txs+=this._columns[i].width;\r\n\t\t}\r\n\t\txe+=this._columns[i].width;\r\n\r\n\t\tfor (i = 0; i < this.data.order.length; i++){\r\n\t\t\tif (this.data.order[i] ==rid) \r\n\t\t\t\tbreak;\r\n\t\t\tys+=this._getHeightByIndex(i);\r\n\t\t}\r\n\t\tye+=this._getHeightByIndex(i);\r\n\t\treturn [xs,xe,ys-this._scrollTop,ye, this._body.childNodes[zone]];\r\n\t},\r\n\t_id_to_string:function(){ return this.row; },\r\n\tlocate:function(node, idOnly){\r\n\t\tif (this != $$(node)) return null;\r\n\r\n\t\tnode = node.target||node;\r\n\t\twhile (node && node.getAttribute){\r\n\t\t\tif (node === this.$view)\r\n\t\t\t\tbreak;\r\n\t\t\tvar cs = _getClassName(node).toString();\r\n\r\n\t\t\tvar pos = null;\r\n\t\t\tif (cs.indexOf(\"webix_cell\")!=-1){\r\n\t\t\t\tpos = this._locate(node);\r\n\t\t\t\tif (pos)\r\n\t\t\t\t\tpos.row = this.data.order[pos.rind];\r\n\t\t\t}\r\n\t\t\tif (cs.indexOf(\"webix_hcell\")!=-1){\r\n\t\t\t\tpos = this._locate(node);\r\n\t\t\t\tif (pos)\r\n\t\t\t\t\tpos.header = true;\r\n\t\t\t}\r\n\t\t\tif (cs.indexOf(\"webix_drop_area\")!=-1){\r\n\t\t\t\tpos = this._locate(node);\r\n\t\t\t\tif (pos)\r\n\t\t\t\t\tpos.row = pos.rind = \"$webix-drop\";\r\n\t\t\t}\r\n\r\n\t\t\tif (pos){\r\n\t\t\t\tif (idOnly) return pos.header ? null : pos.row;\r\n\t\t\t\tpos.column = this._columns[pos.cind].id;\r\n\t\t\t\tpos.toString = this._id_to_string;\r\n\t\t\t\treturn pos;\r\n\t\t\t}\r\n\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\t_locate:function(node){\r\n\t\tvar cdiv = node.parentNode;\r\n\t\tif (!cdiv) return null;\r\n\t\tvar column = (node.getAttribute(/*@attr*/\"column\") || cdiv.getAttribute(/*@attr*/\"column\"))*1;\r\n\t\tvar rind = node.getAttribute(\"aria-rowindex\");\r\n\t\tvar row = node.getAttribute(/*@attr*/\"row\") || (rind ? rind-1 : 0);\r\n\t\tvar span = (node.getAttribute(\"colspan\") || cdiv.getAttribute(\"colspan\"))*1;\r\n\r\n\t\treturn { rind:row, cind:column, span: span };\r\n\t},\r\n\t_correctScrollSize:function(){\r\n\t\tvar center = -this._center_width;\r\n\t\tfor (var i=0; i<this._columns.length; i++)\r\n\t\t\tcenter += this._columns[i].width;\r\n\t\tthis._scrollLeft = Math.min(this._scrollLeft, Math.max(0, center));\r\n\t},\r\n\t_updateColsSizeSettings:function(silent){\r\n\t\tif (!this._dtable_fully_ready) return;\r\n\r\n\t\tthis._correctScrollSize();\r\n\t\tthis._set_columns_positions();\r\n\t\tthis._set_split_sizes_x();\r\n\t\tthis._render_header_and_footer();\r\n\t\tthis._set_split_sizes_y();\r\n\r\n\t\tif (!silent)\r\n\t\t\tthis._check_rendered_cols(false, false);\r\n\t},\r\n\tsetColumnWidth:function(col, width, skip_update){\r\n\t\treturn this._setColumnWidth( this.getColumnIndex(col), width, skip_update);\r\n\t},\r\n\t_setColumnWidth:function(col, width, skip_update, by_user){\r\n\t\tif (isNaN(width) || col < 0) return;\r\n\t\tvar column = this._columns[col];\r\n\r\n\t\twidth = this._correctColumnWidth(width, column);\r\n\r\n\t\tvar old = column.width;\r\n\t\tif (old != width){\r\n\t\t\tif (col>=this._settings.leftSplit && col<this._rightSplit)\r\n\t\t\t\tthis._dtable_width += width-old;\r\n\t\t\t\r\n\t\t\tcolumn.width = width;\r\n\t\t\tif (column.node) //method can be called from onStructLoad\r\n\t\t\t\tcolumn.node.style.width = width+\"px\";\r\n\t\t\telse \r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif(!skip_update)\r\n\t\t\t\tthis._updateColsSizeSettings();\r\n\r\n\t\t\tthis.callEvent(\"onColumnResize\", [column.id, width, old, !!by_user]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_correctColumnWidth:function(width, config){\r\n\t\twidth = Math.max(width, config.minWidth||this._settings.minColumnWidth||0);\r\n\t\twidth = Math.min(width, config.maxWidth||this._settings.maxColumnWidth||100000);\r\n\r\n\t\treturn width;\r\n\t},\r\n\t_getRowHeight:function(row){\r\n\t\treturn (row.$height || this._settings.rowHeight)+(row.$subopen?row.$subHeight:0);\r\n\t},\r\n\t_getHeightByIndex:function(index){\r\n\t\tvar id = this.data.order[index];\r\n\t\tif (!id) return this._settings.rowHeight;\r\n\t\treturn this._getRowHeight(this.data.pull[id]);\r\n\t},\r\n\t_getHeightByIndexSumm:function(index1, index2){\r\n\t\tif (this._settings.fixedRowHeight)\r\n\t\t\treturn Math.max(index2-index1, 0) * this._settings.rowHeight;\r\n\t\telse {\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (; index1<index2; index1++)\r\n\t\t\t\tsumm += this._getHeightByIndex(index1);\r\n\t\t\treturn summ;\r\n\t\t}\r\n\t},\r\n\t_cellPosition:function(row, column, edit){\r\n\t\tif (row.row){\r\n\t\t\tcolumn = row.column;\r\n\t\t\trow = row.row;\r\n\t\t}\r\n\r\n\t\tlet width = this.getColumnConfig(column).width;\r\n\t\tlet height = this.getItem(row).$height || this._settings.rowHeight;\r\n\r\n\t\tif(this.config.spans && edit){\r\n\t\t\tconst span = this.getSpan(row, column);\r\n\t\t\tif(span){\r\n\t\t\t\tconst spanNode = this.getSpanNode({row:span[0], column:span[1]});\r\n\t\t\t\twidth = spanNode.offsetWidth;\r\n\t\t\t\theight = spanNode.offsetHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet left = 0;\r\n\t\tlet parent = 0;\r\n\r\n\t\tfor (let index=0; index<this._columns.length; index++){\r\n\t\t\tif (index == this._settings.leftSplit || index == this._rightSplit)\r\n\t\t\t\tleft = 0;\r\n\t\t\tconst leftcolumn = this._columns[index];\r\n\t\t\tif (leftcolumn.id == column){\r\n\t\t\t\tconst split_column = index<this._settings.leftSplit ? 0 :( index >= this._rightSplit ? 2 : 1);\r\n\t\t\t\tparent = this._body.childNodes[split_column].firstChild;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tleft += leftcolumn.width;\r\n\t\t}\r\n\r\n\t\tconst index = this.getIndexById(row);\r\n\t\tlet top;\r\n\r\n\t\tif (index < this._settings.topSplit)\r\n\t\t\ttop = this._getHeightByIndexSumm(0, index);\r\n\t\telse {\r\n\t\t\tconst first = this._render_scroll_top||0;\r\n\t\t\ttop = this._getHeightByIndexSumm(first, index) + (this._render_scroll_shift||0) + (index >= first ? (this._top_split_height||0) : 0);\r\n\t\t}\r\n\r\n\t\treturn { parent, top, left, width, height };\r\n\t},\r\n\t_get_total_height:function(){\r\n\t\tvar pager  = this._settings.pager;\r\n\t\tvar start = 0;\r\n\t\tvar max = this.data.order.length;\r\n\r\n\t\tif (pager){\r\n\t\t\tstart = pager.size * pager.page;\r\n\t\t\tmax = Math.min(max, start + pager.size);\r\n\t\t\tif (pager.level){\r\n\t\t\t\tstart = this.data.$min;\r\n\t\t\t\tmax = this.data.$max;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this._getHeightByIndexSumm(start, max);\r\n\t},\r\n\tsetRowHeight:function(rowId, height){\r\n\t\tif (isNaN(height)) return;\r\n\r\n\t\theight = Math.max(height, this._settings.minRowHeight||0);\r\n\t\theight = Math.min(height, this._settings.maxRowHeight||100000);\r\n\r\n\t\tvar item = this.getItem(rowId);\r\n\t\tvar old_height = item.$height||this._settings.rowHeight;\r\n\r\n\t\tif (old_height != height){\r\n\t\t\titem.$height = height;\r\n\t\t\tthis.config.fixedRowHeight = false;\r\n\t\t\tthis.render();\r\n\t\t\tthis.callEvent(\"onRowResize\", [rowId, height, old_height]);\r\n\t\t}\r\n\t},\r\n\t_onscroll_y:function(value){\r\n\t\tvar scrollChange = (this._scrollTop !== value);\r\n\r\n\t\tthis._scrollTop = value;\r\n\t\tif (!this._settings.prerender){\r\n\t\t\tthis._check_rendered_cols();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar conts = this._body.childNodes;\r\n\t\t\tfor (var i = 0; i < conts.length; i++){\r\n\t\t\t\tconts[i].scrollTop = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (env.$customScroll) CustomScroll._update_scroll(this._body);\r\n\t\tif(scrollChange){\r\n\t\t\tthis.callEvent(\"onScrollY\",[]);\r\n\t\t\tthis.callEvent(\"onAfterScroll\",[]);\r\n\t\t}\r\n\t},\r\n\t_setLeftScroll:function(value){\r\n\t\tthis._body.childNodes[1].scrollLeft = this._scrollLeft = value;\r\n\t\tif (this._settings.header)\r\n\t\t\tthis._header.childNodes[1].scrollLeft = value;\r\n\t\tif (this._settings.footer)\r\n\t\t\tthis._footer.childNodes[1].scrollLeft = value;\r\n\t},\r\n\t_onscroll_x:function(value){\r\n\t\tvar scrollChange = (this._scrollLeft !== value);\r\n\t\tif(this._renderDelay)\r\n\t\t\tthis._delayedLeftScroll = value;\r\n\t\telse\r\n\t\t\tthis._setLeftScroll(value);\r\n\t\tif (this._settings.prerender===false)\r\n\t\t\tthis._check_rendered_cols(this._minimize_dom_changes?false:true);\r\n\r\n\t\tif (env.$customScroll) CustomScroll._update_scroll(this._body);\r\n\r\n\t\tif(scrollChange){\r\n\t\t\tthis.callEvent(\"onScrollX\",[]);\r\n\t\t\tthis.callEvent(\"onAfterScroll\",[]);\r\n\t\t}\r\n\t},\r\n\t_get_x_range:function(full){\r\n\t\tif (full) return [0,this._columns.length];\r\n\r\n\t\tvar t = this._scrollLeft;\r\n\t\t\r\n\t\tvar xind = this._settings.leftSplit;\r\n\t\twhile (t>0 && this._columns.length - 1 > xind){\r\n\t\t\tt-=this._columns[xind].width;\r\n\t\t\txind++;\r\n\t\t}\r\n\t\tvar xend = xind;\r\n\t\tif (t && xind>0) xind--;\r\n\r\n\t\tt+=this._center_width;\r\n\t\twhile (t>0 && xend<this._rightSplit){\r\n\t\t\tt-=this._columns[xend].width;\r\n\t\t\txend++;\r\n\t\t}\r\n\r\n\t\treturn [xind, xend];\r\n\t},\r\n\tgetVisibleCount:function(){\r\n\t\treturn Math.floor((this._dtable_offset_height) / this.config.rowHeight);\r\n\t},\r\n\t//returns info about y-scroll position\r\n\t_get_y_range:function(full){\r\n\t\tvar t = this._scrollTop;\r\n\t\tvar start = 0; \r\n\t\tvar end = this.count();\r\n\r\n\t\t//apply pager, if defined\r\n\t\tvar pager = this._settings.pager;\r\n\t\tif (pager){\r\n\t\t\tstart = pager.page*pager.size;\r\n\t\t\tend = Math.min(end, start+pager.size);\r\n\t\t\tif (pager.level){\r\n\t\t\t\tstart = this.data.$min;\r\n\t\t\t\tend = this.data.$max;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar xind = start + this._settings.topSplit;\r\n\t\t//in case of autoheight - request full rendering\r\n\t\tif (full || this._settings.autoheight)\r\n\t\t\treturn [xind, end, 0];\r\n\r\n\t\tvar rowHeight = this._settings.fixedRowHeight?this._settings.rowHeight:0;\r\n\t\tif (rowHeight){\r\n\t\t\tlet dep = Math.ceil(t/rowHeight);\r\n\t\t\tt -= dep*rowHeight;\r\n\t\t\txind += dep;\r\n\t\t} else\r\n\t\t\twhile (t>0){\r\n\t\t\t\tt-=this._getHeightByIndex(xind);\r\n\t\t\t\txind++;\r\n\t\t\t}\r\n\r\n\t\t//how much of the first cell is scrolled out\r\n\t\tvar xdef = (xind>0 && t)?-(this._getHeightByIndex(xind-1)+t):0;\r\n\t\tvar xend = xind;\r\n\t\tif (t) xind--;\r\n\r\n\t\tt+=(this._dtable_offset_height||this._content_height) - (this._top_split_height||0);\r\n\r\n\t\tif (rowHeight){\r\n\t\t\tlet dep = Math.ceil(t/rowHeight);\r\n\t\t\tt-=dep*rowHeight;\r\n\t\t\txend+=dep;\r\n\t\t} else {\r\n\t\t\twhile (t>0 && xend<end){\r\n\t\t\t\tt-=this._getHeightByIndex(xend);\r\n\t\t\t\txend++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (xend>end)\r\n\t\t\txend = end;\r\n\r\n\t\treturn [xind, xend, xdef];\r\n\t},\r\n\t_repaint_single_row:function(id){\r\n\t\tvar item = this.getItem(id);\r\n\t\tvar rowindex = this.getIndexById(id);\r\n\r\n\t\tvar state = this._get_y_range();\r\n\t\tvar freeze = this._settings.topSplit;\r\n\t\tvar freezeCss = \"\";\r\n\r\n\t\tif (rowindex >= freeze){\r\n\t\t\t//row not visible\r\n\t\t\tif (rowindex < state[0] || rowindex >= state[1]) return;\r\n\t\t\trowindex -= state[0]-freeze;\r\n\t\t} else {\r\n\t\t\tfreezeCss = (rowindex == freeze-1) ? \" webix_topcell webix_last_topcell\" : \" webix_topcell\";\r\n\t\t}\r\n\r\n\t\t//get visible column\r\n\t\tvar x_range = this._get_x_range();\r\n\t\tfor (var i=0; i<this._columns.length; i++){\r\n\t\t\tvar column = this._columns[i];\r\n\r\n\t\t\t//column not visible\r\n\t\t\tif (i < this._rightSplit && i >= this._settings.leftSplit && ( i<x_range[0] || i > x_range[1]))\r\n\t\t\t\tcolumn._yr0 = -999; //ensure that column will not be reused\r\n\r\n\t\t\tif (column.attached && column.node){\r\n\t\t\t\tvar node =  column.node.childNodes[rowindex];\r\n\t\t\t\tif (!node) continue;\r\n\t\t\t\tvar value = this._getValue(item, this._columns[i], 0);\r\n\r\n\t\t\t\tnode.innerHTML = value;\r\n\t\t\t\tnode.className = this._getCss(this._columns[i], value, item, id) + freezeCss;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_check_rendered_cols:function(x_scroll, force){\r\n\t\tif (!this._columns.length || this._renderDelay) return;\r\n\r\n\t\tif (force)\r\n\t\t\tthis._clearColumnCache();\r\n\r\n\t\tvar xr = this._get_x_range(this._settings.prerender);\r\n\t\tvar yr = this._get_y_range(this._settings.prerender === true);\r\n\r\n\t\tif (x_scroll){\r\n\t\t\tfor (let i=this._settings.leftSplit; i<xr[0]; i++)\r\n\t\t\t\tthis._hideColumn(i, force);\r\n\t\t\tfor (let i=xr[1]; i<this._rightSplit; i++)\r\n\t\t\t\tthis._hideColumn(i, force);\r\n\t\t}\r\n\r\n\t\tthis._render_full_rows = [];\r\n\r\n\t\tfor (let i=0; i<this._settings.leftSplit; i++)\r\n\t\t\tthis._renderColumn(i,yr,force);\r\n\t\tfor (let i=xr[0]; i<xr[1]; i++)\r\n\t\t\tthis._renderColumn(i,yr,force, i == xr[0]);\r\n\t\tfor (let i=this._rightSplit; i<this._columns.length; i++)\r\n\t\t\tthis._renderColumn(i,yr,force);\r\n\r\n\t\tthis._check_and_render_full_rows(yr[0], yr[1], force);\r\n\t\tthis._check_load_next(yr);\r\n\t},\r\n\t_delete_full_rows:function(start, end){\r\n\t\tthis._rows_cache_start = start;\r\n\t\tthis._rows_cache_end = end;\r\n\r\n\t\tremove(this._rows_cache);\r\n\t\tthis._rows_cache=[];\r\n\t},\r\n\t_adjust_rows:function(){\r\n\t\tif(this._settings.prerender && this._rows_body){\r\n\t\t\tvar state = this.getScrollState();\r\n\t\t\tthis._rows_body.style.top = \"-\"+(state.y||0) +\"px\";\r\n\t\t}\r\n\t},\r\n\t_check_and_render_full_rows:function(start, end, force){\r\n\t\tif (this._rows_body)\r\n\t\t\tthis._rows_body.style.top = this._render_scroll_shift+\"px\";\r\n\t\t\r\n\t\tif (!force && start == this._rows_cache_start && end == this._rows_cache_end){\r\n\t\t\tif(this.config.topSplit){ //don't move split rows\r\n\t\t\t\tfor (let i=0; i<this._render_full_rows.length; i++){\r\n\t\t\t\t\tlet row = this._rows_cache[i];\r\n\t\t\t\t\tif(this._render_full_rows[i].index<this.config.topSplit){\r\n\t\t\t\t\t\trow.style.top = this._render_full_rows[i].top-this._render_scroll_shift+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._delete_full_rows(start, end);\r\n\r\n\t\tif (this._render_full_row_some)\r\n\t\t\tthis._render_full_row_some = false;\r\n\t\telse return;\r\n\r\n\t\tfor (let i=0; i<this._render_full_rows.length; i++){\r\n\t\t\tvar info = this._render_full_rows[i];\r\n\t\t\tvar item = this.getItem(info.id);\r\n\r\n\t\t\tvar value;\r\n\t\t\tif (typeof item.$row == \"function\"){\r\n\t\t\t\tvalue = item.$row.call(this, item, this.type);\r\n\t\t\t} else {\r\n\t\t\t\tvalue = this._getValue(item, this.getColumnConfig(item.$row), i);\r\n\t\t\t}\r\n\r\n\t\t\tlet row = this._rows_cache[i] = create(\"DIV\", null , value);\r\n\t\t\trow.className = \"webix_cell \"+(item.$sub ? (\"webix_dtable_sub\"+(this._settings.subview?\"view\":\"row\")) : \"webix_dtable_colrow\"+(item.$row?(\" webix_topcell\"+(this.data.getMark(item.id,\"webix_selected\")?\" webix_selected\":\"\")):\"\"));\r\n\t\t\trow.setAttribute(/*@attr*/\"column\", 0);\r\n\t\t\trow.setAttribute(/*@attr*/\"row\", info.index);\r\n\r\n\t\t\tvar height = (item.$height || this._settings.rowHeight);\r\n\t\t\tif (item.$subopen)\r\n\t\t\t\trow.style.height = item.$subHeight+\"px\";\r\n\t\t\telse \r\n\t\t\t\trow.style.height = height +\"px\";\r\n\t\t\trow.style.paddingRight = env.scrollSize+\"px\";\r\n\r\n\t\t\tvar topDelta = (this._render_full_rows[i].index<this.config.topSplit) ? -this._render_scroll_shift : 0;\r\n\t\t\trow.style.top = topDelta + info.top + (item.$subopen ? height-1 : 0) + \"px\";\r\n\r\n\t\t\tif (!this._rows_body){\r\n\t\t\t\tthis._rows_body = create(\"DIV\");\r\n\t\t\t\tthis._rows_body.style.position = \"relative\";\r\n\t\t\t\tthis._rows_body.style.top = this._render_scroll_shift+\"px\";\r\n\t\t\t\tthis._body.appendChild(this._rows_body);\r\n\t\t\t}\r\n\t\t\tthis._rows_body.appendChild(row);\r\n\t\t\tthis.attachEvent(\"onSyncScroll\", function(x,y,t){\r\n\t\t\t\tTouch._set_matrix(this._rows_body,0,y,t);\r\n\t\t\t});\r\n\t\t\tif (this._settings.subview)\r\n\t\t\t\tthis.callEvent(\"onSubViewRender\", [item, row]);\r\n\t\t}\r\n\t},\r\n\t_check_load_next:function(yr){\r\n\t\tvar paging = this._settings.pager;\r\n\t\tvar fetch = this._settings.datafetch;\r\n\t\t\r\n\t\tvar direction = (!this._last_valid_render_pos || yr[0] >= this._last_valid_render_pos);\r\n\t\tthis._last_valid_render_pos = yr[0];\r\n\r\n\t\tif (this._data_request_flag){\r\n\t\t\tif (paging && (!fetch || fetch >= paging.size))\r\n\t\t\t\tif (this._check_rows([0,paging.size*paging.page], Math.max(fetch, paging.size), true)) \r\n\t\t\t\t\treturn (this._data_request_flag = null);\r\n\t\t\t\t\t\r\n\t\t\tthis._run_load_next(this._data_request_flag, direction);\r\n\t\t\tthis._data_request_flag = null;\r\n\t\t} else {\r\n\t\t\tif (this._settings.loadahead)\r\n\t\t\t\tthis._check_rows(yr, this._settings.loadahead, direction);\r\n\t\t}\r\n\t},\r\n\t_check_rows:function(view, count, dir){\r\n\t\tvar start = view[1];\r\n\t\tvar end = start+count;\r\n\t\tif (!dir){\r\n\t\t\tstart = view[0]-count;\r\n\t\t\tend = view[0];\r\n\t\t}\r\n\r\n\t\tif (start<0) start = 0;\r\n\t\tend = Math.min(end, this.data.order.length-1);\r\n\r\n\t\tvar result = false;\t\t\t\r\n\t\tfor (var i=start; i<end; i++)\r\n\t\t\tif (!this.data.order[i]){\r\n\t\t\t\tif (!result)\r\n\t\t\t\t\tresult = { start:i, count:(end-start) };\r\n\t\t\t\telse {\r\n\t\t\t\t\tresult.last = i;\r\n\t\t\t\t\tresult.count = (i-start);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tif (result){\t\t\t\r\n\t\t\tthis._run_load_next(result, dir);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t_run_load_next:function(conf, direction){\r\n\t\tvar count = Math.max(conf.count, (this._settings.datafetch||this._settings.loadahead||0));\r\n\t\tvar start = direction?conf.start:(conf.last - count+1);\r\n\t\t\r\n\t\tif (this._maybe_loading_already(conf.count, conf.start)) return;\r\n\t\tthis.loadNext(count, start);\r\n\t},\r\n\t// necessary for safari only\r\n\t_preserveScrollTarget: function(columnNode){\r\n\t\tif (env.isSafari){\r\n\t\t\tvar i, node, newNode, scroll,\r\n\t\t\t\tdir = [this._x_scroll, this._y_scroll];\r\n\r\n\t\t\tfor(i = 0; i < 2; i++){\r\n\t\t\t\tscroll = dir[i];\r\n\t\t\t\tif(scroll && scroll._scroll_trg && scroll._scroll_trg.parentNode == columnNode){\r\n\t\t\t\t\tnode = scroll._scroll_trg;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tif(this._scrollWheelTrg)\r\n\t\t\t\t\tremove(this._scrollWheelTrg);\r\n\t\t\t\tthis._scrollWheelTrg = node;\r\n\t\t\t\tnewNode  = node.cloneNode(true); // required for _hideColumn\r\n\t\t\t\tnode.parentNode.insertBefore(newNode, node);\r\n\t\t\t\tthis._scrollWheelTrg.style.display = \"none\";\r\n\t\t\t\tthis._body.appendChild(this._scrollWheelTrg);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_hideColumn:function(index){\r\n\t\tvar col = this._columns[index];\r\n\r\n\t\t// preserve target node for Safari wheel event\r\n\t\tthis._preserveScrollTarget(col.node);\r\n\t\tremove(col.node);\r\n\t\tcol.attached = false;\r\n\t},\r\n\t_clearColumnCache:function(){\r\n\t\tfor (var i = 0; i < this._columns.length; i++)\r\n\t\t\tthis._columns[i]._yr0 = -1;\r\n\r\n\t\tif (this._rows_cache.length){\r\n\t\t\tremove(this._rows_cache);\r\n\t\t\tthis._rows_cache = [];\r\n\t\t}\r\n\t},\r\n\tgetText:function(row_id, column_id){\r\n\t\treturn this._getValue(this.getItem(row_id), this.getColumnConfig(column_id), 0);\r\n\t},\r\n\tgetCss:function(row_id, column_id){\r\n\t\tvar item = this.getItem(row_id);\r\n\t\treturn this._getCss(this.getColumnConfig(column_id), item[column_id], item, row_id);\r\n\t},\r\n\t_getCss:function(config, value, item, id){\r\n\t\tvar css = \"webix_cell\";\r\n\t\t\t\t\r\n\t\tif (config.cssFormat){\r\n\t\t\tvar per_css = config.cssFormat(value, item, id, config.id);\r\n\t\t\tif (per_css){\r\n\t\t\t\tif (typeof per_css == \"object\")\r\n\t\t\t\t\tcss+= \" \"+createCss(per_css);\r\n\t\t\t\telse\r\n\t\t\t\t\tcss+=\" \"+per_css;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row_css = item.$css;\r\n\t\tif (row_css){\r\n\t\t\tif (typeof row_css == \"object\")\r\n\t\t\t\titem.$css = row_css = createCss(row_css);\r\n\t\t\tcss+=\" \"+row_css;\r\n\t\t}\r\n\r\n\t\tvar mark = this.data._marks[id];\r\n\t\tif (mark){\r\n\t\t\tif (mark.$css)\r\n\t\t\t\tcss+=\" \"+mark.$css;\r\n\t\t\tif (mark.$cellCss){\r\n\t\t\t\tvar mark_marker = mark.$cellCss[config.id];\r\n\t\t\t\tif (mark_marker)\r\n\t\t\t\t\tcss+=\" \"+mark_marker;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.$cellCss){\r\n\t\t\tvar css_marker = item.$cellCss[config.id];\r\n\t\t\tif (css_marker){\r\n\t\t\t\tif (typeof css_marker == \"object\")\r\n\t\t\t\t\tcss_marker = createCss(css_marker);\r\n\t\t\t\tcss += \" \"+css_marker;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//cell-selection\r\n\t\tvar selected = this.data.getMark(item.id,\"webix_selected\");\r\n\t\tif ((selected && (selected.$row || selected[config.id]))||config.$selected) css+=this._select_css;\r\n\r\n\t\treturn css;\r\n\t},\r\n\t_getValue:function(item, config, i){\r\n\t\tif (!item)\r\n\t\t\treturn \"\";\r\n\r\n\t\tvar value;\r\n\r\n\t\tvalue = item[config.id];\r\n\t\tif (value === undefined || value === null)\r\n\t\t\tvalue = \"\";\r\n\t\tif (config.format)\r\n\t\t\tvalue = config.format(value);\r\n\t\tif (config.template)\r\n\t\t\tvalue = config.template(item, this.type, value, config, i);\r\n\r\n\t\treturn value;\r\n\t},\r\n\t//we don't use render-stack, but still need a place for common helpers\r\n\t//so creating a simple \"type\" holder\r\n\ttype:{\r\n\t\tcheckbox:function(obj, common, value, config){\r\n\t\t\tvar checked = (value == config.checkValue) ? \"checked=\\\"true\\\"\" : \"\";\r\n\t\t\treturn \"<input class='webix_table_checkbox' type='checkbox' \"+checked+\">\";\r\n\t\t},\r\n\t\tradio:function(obj, common, value, config){\r\n\t\t\tvar checked = (value == config.checkValue) ? \"checked=\\\"true\\\"\" : \"\";\r\n\t\t\treturn \"<input class='webix_table_radio' type='radio' \"+checked+\">\";\r\n\t\t},\r\n\t\teditIcon:function(){\r\n\t\t\treturn \"<span class='webix_icon wxi-pencil'></span>\";\r\n\t\t},\r\n\t\ttrashIcon:function(){\r\n\t\t\treturn \"<span class='webix_icon wxi-trash'></span>\";\r\n\t\t}\r\n\t},\r\n\ttype_setter:function(value){\r\n\t\tif(!this.types || !this.types[value])\r\n\t\t\ttype(this, value);\r\n\t\telse {\r\n\t\t\tthis.type = clone(this.types[value]);\r\n\t\t\tif (this.type.css) \r\n\t\t\t\tthis._contentobj.className+=\" \"+this.type.css;\r\n\t\t}\r\n\t\tif (this.type.on_click)\r\n\t\t\textend(this.on_click, this.type.on_click);\r\n\r\n\t\treturn value;\r\n\t},\r\n\t_renderColumn:function(index,yr,force, single){\r\n\t\tvar col = this._columns[index];\r\n\t\tif (!col.attached){\r\n\t\t\tvar split_column = index<this._settings.leftSplit ? 0 :( index >= this._rightSplit ? 2 : 1);\r\n\t\t\tthis._body.childNodes[split_column].firstChild.appendChild(col.node);\r\n\t\t\tcol.attached = true;\r\n\t\t\tcol.split = split_column;\r\n\t\t}\r\n\r\n\t\tthis._render_scroll_top = yr[0];\r\n\t\tthis._render_scroll_shift = 0;\r\n\t\tthis._render_scroll_diff = yr[2];\r\n\r\n\t\t//if columns not aligned during scroll - set correct scroll top value for each column\r\n\t\tif (this._settings.scrollAlignY){\r\n\t\t\tif ((yr[1] == this.data.order.length) || (this.data.$pagesize && yr[1] % this.data.$pagesize === 0 )){\r\n\t\t\t\tcol.node.style.top = (this._render_scroll_shift = yr[2])+\"px\";\r\n\t\t\t} else if (col._yr2)\r\n\t\t\t\tcol.node.style.top = \"0px\";\r\n\t\t} else {\r\n\t\t\tthis._render_scroll_shift = yr[2];\r\n\t\t\tcol.node.style.top = yr[2]+\"px\";\r\n\t\t}\r\n\r\n\t\tif (!force  && (col._yr0 == yr[0] && col._yr1 == yr[1]) && (!this._settings.topSplit || col._render_scroll_shift==this._render_scroll_shift)) return 0;\r\n\r\n\t\tvar html=\"\";\r\n\t\tvar config = this._settings.columns[index];\r\n\t\tvar state = { \r\n\t\t\trow: this._settings.rowHeight,\r\n\t\t\ttotal: 0,\r\n\t\t\tsingle: single\r\n\t\t};\r\n\r\n\t\tfor (let i=0; i<this._settings.topSplit; i++)\r\n\t\t\thtml += this._render_single_cell(i, config, yr, state, -this._render_scroll_shift, index);\r\n\t\t// ignore not available rows in top-split area\r\n\t\tthis._data_request_flag = null;\r\n\t\t\r\n\t\tfor (let i = Math.max(yr[0], this._settings.topSplit); i < yr[1]; i++)\r\n\t\t\thtml += this._render_single_cell(i, config, yr, state, -1, index);\r\n\r\n\t\t// preserve target node for Safari wheel event\r\n\t\tthis._preserveScrollTarget(col.node);\r\n\r\n\t\tcol.node.innerHTML = html;\r\n\t\tcol._yr0=yr[0];\r\n\t\tcol._yr1=yr[1];\r\n\t\tcol._yr2=yr[2];\r\n\t\tcol._render_scroll_shift=this._render_scroll_shift;\r\n\t\treturn 1;\r\n\t},\r\n\t_render_single_cell:function(i, config, yr, state, top, index){\r\n\t\tvar id = this.data.order[i];\r\n\t\tvar item = this.data.getItem(id);\r\n\t\tvar html = \"\";\r\n\r\n\t\tif (item){\r\n\t\t\tvar aria = \" role='gridcell' aria-rowindex='\"+(i+1)+\"' aria-colindex='\"+(this.getColumnIndex(config.id)+1)+\"'\"+\r\n\t\t\t\t(item.$count || item.$sub?(\" aria-expanded='\"+(item.open || item.$subopen?\"true\":\"false\")+\"'\"):\"\")+\r\n\t\t\t\t(item.$level?\" aria-level='\"+item.$level+\"'\":\"\");\r\n\r\n\t\t\tif (state.single && item.$row){\r\n\t\t\t\tthis._render_full_row_some = true;\r\n\t\t\t\tthis._render_full_rows.push({ top:state.total, id:item.id, index:i});\r\n\t\t\t\tif (!item.$sub){\r\n\t\t\t\t\tvar rowHeight = (item.$height || state.row);\r\n\t\t\t\t\tstate.total += rowHeight;\r\n\t\t\t\t\treturn \"<div\"+aria+\" class='webix_cell' style='height:\"+rowHeight+\"px;'></div>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar value = this._getValue(item, config, i);\r\n\t\t\tvar css = this._getCss(config, value, item, id);\r\n\t\t\tvar ariaSelect = \" aria-selected='true' tabindex='0'\";\r\n\t\t\t\r\n\t\t\tif(css.indexOf(\"select\") !==-1 ){\r\n\t\t\t\t//in case of row/column selection - make only first cell focusable\r\n\t\t\t\tif(css.indexOf(\"row\") !==-1){\r\n\t\t\t\t\tvar xr = this._get_x_range();\r\n\t\t\t\t\tif(xr[0] === index) aria += ariaSelect;\r\n\t\t\t\t}\r\n\t\t\t\telse if(css.indexOf(\"col\") !==-1){\r\n\t\t\t\t\tif(i === yr[0]) aria += ariaSelect;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\taria += ariaSelect;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar isOpen = !!item.$subopen;\r\n\t\t\tvar margin = isOpen ? \"margin-bottom:\"+item.$subHeight+\"px;\" : \"\";\r\n\r\n\t\t\tif (top>=0){\r\n\t\t\t\tif (top>0) margin+=\"top:\"+top+\"px;'\";\r\n\t\t\t\tcss = \"webix_topcell \"+css;\r\n\t\t\t\tif(i == this._settings.topSplit-1)\r\n\t\t\t\t\tcss = \"webix_last_topcell \"+css;\r\n\t\t\t}\r\n\t\t\tif (item.$height){\r\n\t\t\t\thtml = \"<div\"+aria+\" class='\"+css+\"' style='height:\"+item.$height+\"px;\"+margin+\"'>\"+value+\"</div>\";\r\n\t\t\t\tstate.total += item.$height - state.row;\r\n\t\t\t} else {\r\n\t\t\t\thtml = \"<div\"+aria+\" class='\"+css+\"'\"+(margin?\" style='\"+margin+\"'\":\"\")+\">\"+value+\"</div>\";\r\n\t\t\t}\r\n\r\n\t\t\tif (isOpen)\r\n\t\t\t\tstate.total += item.$subHeight;\r\n\r\n\t\t} else {\r\n\t\t\thtml = \"<div role='gridcell' class='webix_cell'></div>\";\r\n\t\t\tif (!this._data_request_flag)\r\n\t\t\t\tthis._data_request_flag = {start:i, count:yr[1]-i};\r\n\t\t\telse\r\n\t\t\t\tthis._data_request_flag.last = i;\r\n\t\t}\r\n\t\tstate.total += state.row;\r\n\t\treturn html;\r\n\t},\r\n\t_set_split_sizes_y:function(){\r\n\t\tif (!this._columns.length || isNaN(this._content_height*1)) return;\r\n\t\tif (DEBUG) debug_size_box(this, [\"y-sizing\"], true);\r\n\r\n\t\tvar wanted_height = this._dtable_height+(this._scrollSizeX?this._scrollSizeX:0);\r\n\t\tif ((this._settings.autoheight || this._settings.yCount) && this.resize())\r\n\t\t\treturn;\r\n\r\n\t\tthis._y_scroll.sizeTo(this._content_height, this._header_height, this._footer_height);\r\n\t\tthis._y_scroll.define(\"scrollHeight\", wanted_height);\r\n\r\n\t\tthis._top_split_height = this._settings.topSplit ? this._getHeightByIndexSumm(0, this._settings.topSplit) : 0;\r\n\t\tthis._dtable_offset_height =  Math.max(0,this._content_height-this._scrollSizeX-this._header_height-this._footer_height);\r\n\t\tfor (var i = 0; i < 3; i++){\r\n\r\n\t\t\tthis._body.childNodes[i].style.height = this._dtable_offset_height+\"px\";\r\n\t\t\tif (this._settings.prerender)\r\n\t\t\t\tthis._body.childNodes[i].firstChild.style.height = this._dtable_height+\"px\";\r\n\t\t\telse\r\n\t\t\t\tthis._body.childNodes[i].firstChild.style.height = this._dtable_offset_height+\"px\";\r\n\t\t}\r\n\t\t//prevent float overflow, when we have split and very small\r\n\t\tthis._header.style.height = this._header_height+\"px\";\r\n\t},\r\n\t_set_split_sizes_x:function(){\r\n\t\tif (!this._columns.length) return;\r\n\r\n\t\tvar index = 0; \r\n\t\tthis._left_width = 0;\r\n\t\tthis._right_width = 0;\r\n\t\tthis._center_width = 0;\r\n\r\n\t\twhile (index<this._settings.leftSplit){\r\n\t\t\tthis._left_width += this._columns[index].width;\r\n\t\t\tindex++;\r\n\t\t}\r\n\r\n\t\tindex = this._columns.length-1;\r\n\t\t\r\n\t\twhile (index>=this._rightSplit){\r\n\t\t\tthis._right_width += this._columns[index].width;\r\n\t\t\tindex--;\r\n\t\t}\r\n\r\n\t\tif (!this._content_width) return; \r\n\r\n\t\tif (this._settings.autowidth && this.resize())\r\n\t\t\treturn;\r\n\r\n\t\tthis._center_width = this._content_width - this._right_width - this._left_width - this._scrollSizeY;\r\n\r\n\t\tthis._body.childNodes[1].firstChild.style.width = this._dtable_width+\"px\";\r\n\r\n\t\tthis._body.childNodes[0].style.width = this._left_width+\"px\";\r\n\t\tthis._body.childNodes[1].style.width = this._center_width+\"px\";\r\n\t\tthis._body.childNodes[2].style.width = this._right_width+\"px\";\r\n\t\tthis._header.childNodes[0].style.width = this._left_width+\"px\";\r\n\t\tthis._header.childNodes[1].style.width = this._center_width+\"px\";\r\n\t\tthis._header.childNodes[2].style.width = this._right_width+\"px\";\r\n\t\tthis._footer.childNodes[0].style.width = this._left_width+\"px\";\r\n\t\tthis._footer.childNodes[1].style.width = this._center_width+\"px\";\r\n\t\tthis._footer.childNodes[2].style.width = this._right_width+\"px\";\r\n\r\n\t\tvar delta = this._center_width - this._dtable_width;\r\n\t\tif (delta<0) delta=0; //negative header space has not sense\r\n\r\n\t\tif (delta != this._header_fix_width){\r\n\t\t\tthis._header_fix_width = delta;\r\n\t\t\tthis._size_header_footer_fix();\r\n\t\t}\r\n\r\n\t\t// temp. fix: Chrome [DIRTY]\r\n\t\tif (env.isWebKit){\r\n\t\t\tvar w = this._body.childNodes[0].offsetWidth; //eslint-disable-line\r\n\t\t\tw = this._body.childNodes[1].offsetWidth;\r\n\t\t\tw = this._body.childNodes[1].firstChild.offsetWidth;\r\n\t\t\tw = this._body.childNodes[2].offsetWidth;\r\n\t\t}\r\n\r\n\t\tthis._x_scroll.sizeTo(this._content_width-this._scrollSizeY);\r\n\t\tthis._x_scroll.define(\"scrollWidth\", this._dtable_width+this._left_width+this._right_width);\r\n\t},\r\n\t$getSize:function(dx, dy){\r\n\t\tif ((this._settings.autoheight || this._settings.yCount) && this._settings.columns){\r\n\t\t\t//if limit set - use it\r\n\t\t\tvar desired = ((this._settings.yCount || 0) * this._settings.rowHeight);\r\n\t\t\t//else try to use actual rendered size\r\n\t\t\t//if component invisible - this is not valid, so fallback to all rows\r\n\t\t\tif (!desired) desired =  this.isVisible() ? this._dtable_height : (this.count() * this._settings.rowHeight);\r\n\t\t\t//add scroll and check minHeight limit\r\n\t\t\tthis._settings.height = Math.max(desired+(this._scrollSizeX?this._scrollSizeX:0)-1, (this._settings.minHeight||0))+this._header_height+this._footer_height;\r\n\t\t}\r\n\t\tif (this._settings.autowidth && this._settings.columns)\r\n\t\t\tthis._settings.width = Math.max(this._dtable_width+this._left_width+this._right_width+this._scrollSizeY,(this._settings.minWidth||0));\r\n\r\n\t\t\r\n\t\tvar minwidth = this._left_width+this._right_width+this._scrollSizeY;\r\n\t\tvar sizes = base.api.$getSize.call(this, dx, dy);\r\n\r\n\r\n\t\tsizes[0] = Math.max(sizes[0]||minwidth);\r\n\t\treturn sizes;\r\n\t},\r\n\t_restore_scroll_state:function(){\r\n\t\tif (this._x_scroll && !env.touch){\r\n\t\t\tvar state = this.getScrollState();\r\n\t\t\tthis._x_scroll.config.scrollPos = this._y_scroll.config.scrollPos = 0;\r\n\t\t\tthis.scrollTo(state.x, state.y);\r\n\t\t}\r\n\t},\r\n\t$setSize:function(){\r\n\t\tvar oldw = this._content_width;\r\n\t\tvar oldh = this._content_height;\r\n\r\n\t\tif (base.api.$setSize.apply(this, arguments)){\r\n\t\t\tif (this._dtable_fully_ready){\r\n\t\t\t\tthis.callEvent(\"onResize\",[this._content_width, this._content_height, oldw, oldh]);\r\n\t\t\t\tthis._set_split_sizes_x();\r\n\t\t\t\tthis._set_split_sizes_y();\r\n\t\t\t}\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\t_on_header_click:function(column, e){\r\n\t\tconst col = this.getColumnConfig(column);\r\n\t\tif (!this._settings.sort || !col.sort) return;\r\n\r\n\t\tlet order = \"asc\";\r\n\t\tif (this._last_sorted[col.id])\r\n\t\t\torder = (this._last_sorted[col.id].dir == \"asc\") ? \"desc\" : \"asc\";\r\n\r\n\t\tthis._sort(col.id, order, col.sort, (e.ctrlKey||e.metaKey));\r\n\t},\r\n\tmarkSorting:function(column, direction, preserve){\r\n\t\tdirection = direction || \"asc\";\r\n\r\n\t\tif (!preserve){\r\n\t\t\tthis._sort_signs_order = [];\r\n\r\n\t\t\tfor (let i in this._sort_signs)\r\n\t\t\t\tif (i !== column){\r\n\t\t\t\t\tconst parent = this._sort_signs[i].parentNode;\r\n\t\t\t\t\tif (parent){\r\n\t\t\t\t\t\tparent.removeAttribute(\"aria-sort\");\r\n\t\t\t\t\t\tparent.removeAttribute(\"tabindex\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremove(this._sort_signs[i]);\r\n\t\t\t\t\tdelete this._sort_signs[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._sort_signs_order.push(i);\r\n\t\t\t\t\tthis._sort_signs[i].firstChild.innerHTML = \"1\";\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!column) return;\r\n\r\n\t\tif (this._sort_signs[column]){\r\n\t\t\tthis._sort_signs[column].className = `webix_ss_sort_${direction}`;\r\n\t\t} else {\r\n\t\t\tconst sign = create(\"div\", {\r\n\t\t\t\tclass: `webix_ss_sort_${direction}`\r\n\t\t\t}, `<div class=\"webix_ss_sort_num\">${this._sort_signs_order.length + 1}</div>`);\r\n\r\n\t\t\tconst cell = this._get_header_cell(this.getColumnIndex(column));\r\n\t\t\tif (cell){\r\n\t\t\t\tcell.style.position = \"relative\";\r\n\t\t\t\tcell.appendChild(sign);\r\n\t\t\t\tcell.setAttribute(\"aria-sort\", direction + \"ending\");\r\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\r\n\t\t\t}\r\n\r\n\t\t\tthis._sort_signs[column] = sign;\r\n\t\t\tthis._sort_signs_order.push(column);\r\n\t\t}\r\n\r\n\t\tconst first = this._sort_signs[ this._sort_signs_order[0] ];\r\n\t\tswitch (this._sort_signs_order.length){\r\n\t\t\tcase 1:\r\n\t\t\t\taddCss(first, \"webix_ss_sort_single\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tremoveCss(first, \"webix_ss_sort_single\");\r\n\t\t}\r\n\t},\r\n\tscroll_setter:function(mode){\r\n\t\tif (typeof mode == \"string\"){\r\n\t\t\tthis._settings.scrollX = (mode.indexOf(\"x\") != -1);\r\n\t\t\tthis._settings.scrollY = (mode.indexOf(\"y\") != -1);\r\n\t\t\treturn mode;\r\n\t\t} else \r\n\t\t\treturn (this._settings.scrollX = this._settings.scrollY = mode);\r\n\t},\r\n\t_get_header_cell:function(column){\r\n\t\tvar cells = this._header.getElementsByTagName(\"TD\");\r\n\t\tvar maybe = null;\r\n\t\tfor (var i = 0; i<cells.length; i++)\r\n\t\t\tif (cells[i].getAttribute(/*@attr*/\"column\") == column){\r\n\t\t\t\tconst activeId = cells[i].getAttribute(/*@attr*/\"active_id\");\r\n\r\n\t\t\t\tif (activeId && !datafilter[ this._active_headers[activeId].content ].$icon)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\tmaybe = cells[i].firstChild;\r\n\t\t\t\tif ((cells[i].colSpan||0) < 2) return maybe;\r\n\t\t\t}\r\n\t\treturn maybe;\r\n\t},\r\n\t_last_order:[],\r\n\t_last_sorted:{},\r\n\t_sort:function(col_id, direction, type, preserve){\r\n\t\tpreserve = this._settings.sort === \"multi\" && preserve;\r\n\t\tdirection = direction || \"asc\";\r\n\r\n\t\tif (!preserve){\r\n\t\t\tthis._last_order = [];\r\n\t\t\tthis._last_sorted = {};\r\n\t\t}\r\n\r\n\t\tconst col = this.getColumnConfig(col_id);\r\n\t\tconst config = (typeof col.sort == \"function\") ? { as:col.sort, dir:direction } : { by:col.id, dir:direction, as:col.sort };\r\n\t\tif (!this._last_sorted[col.id])\r\n\t\t\tthis._last_order.push(col.id);\r\n\t\tthis._last_sorted[col.id] = config;\r\n\r\n\t\tif (type == \"server\"){\r\n\t\t\tlet parameters = [col.id, direction, type];\r\n\t\t\tif (this._last_order.length > 1)\r\n\t\t\t\tparameters = [ this._last_order.map(id => this._last_sorted[id]) ];\r\n\r\n\t\t\tthis.callEvent(\"onBeforeSort\", parameters);\r\n\t\t\tthis.loadNext(0, 0, 0, 0, 1).then((data) => {\r\n\t\t\t\tthis.clearAll(true);\r\n\t\t\t\tthis.parse(data);\r\n\t\t\t\tthis.callEvent(\"onAfterSort\", parameters);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (type == \"text\"){\r\n\t\t\t\tlet new_id = \"$text_\" + col.id;\r\n\t\t\t\tthis.data.each(function(obj){ obj[new_id] = this.getText(obj.id, col.id); }, this);\r\n\t\t\t\tconfig.as = \"string\"; config.by = new_id;\r\n\t\t\t}\r\n\r\n\t\t\tif (this._last_order.length > 1)\r\n\t\t\t\tthis.data.sort( this._last_order.map(id => this._last_sorted[id]) );\r\n\t\t\telse\r\n\t\t\t\tthis.data.sort( config );\r\n\t\t}\r\n\r\n\t\tthis.markSorting(col.id, config.dir, preserve);\r\n\t},\r\n\t_mouseEventCall: function( css_call, e, id, trg ) {\r\n\t\tvar functor, i, res;\r\n\t\tif (css_call.length){\r\n\t\t\tfor ( i = 0; i < css_call.length; i++) {\r\n\t\t\t\tfunctor = toFunctor(css_call[i], this.$scope);\r\n\t\t\t\tres = functor.call(this,e,id,trg);\r\n\t\t\t\tif (res===false) return false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//because we using non-standard rendering model, custom logic for mouse detection need to be used\r\n\t_mouseEvent:function(e,hash,name,pair){\r\n\t\te=e||event;\r\n\t\tvar trg=e.target;\r\n\t\tif (this._settings.subview && this != $$(trg)) return;\r\n\r\n\t\t//define some vars, which will be used below\r\n\t\tvar css = \"\",\r\n\t\t\tcss_call = [],\r\n\t\t\tfound = false,\r\n\t\t\tid = null, \r\n\t\t\tres;\r\n\r\n\t\t//loop through all parents\r\n\t\twhile (trg && trg.parentNode && trg != this._viewobj.parentNode){\r\n\t\t\tvar trgCss = _getClassName(trg);\r\n\t\t\tif ((css = trgCss)) {\r\n\t\t\t\tcss = css.toString().split(\" \");\r\n\r\n\t\t\t\tfor (var i = css.length - 1; i >= 0; i--)\r\n\t\t\t\t\tif (hash[css[i]])\r\n\t\t\t\t\t\tcss_call.push(hash[css[i]]);\r\n\t\t\t}\r\n\r\n\t\t\tif (trg.parentNode.getAttribute && !id){\r\n\t\t\t\tvar column = trg.parentNode.getAttribute(/*@attr*/\"column\") || trg.getAttribute(/*@attr*/\"column\");\r\n\t\t\t\tif (column){ //we need to ignore TD - which is header|footer\r\n\t\t\t\t\tvar  isBody = trg.parentNode.tagName == \"DIV\";\r\n\r\n\t\t\t\t\t//column already hidden or removed\r\n\t\t\t\t\tif(!this._columns[column]) return;\r\n\r\n\t\t\t\t\tfound = true;\r\n\t\t\t\t\tif (isBody){\r\n\t\t\t\t\t\tvar index = trg.parentNode.getAttribute(/*@attr*/\"row\") || trg.getAttribute(/*@attr*/\"row\");\r\n\t\t\t\t\t\tif (!index){\r\n\t\t\t\t\t\t\t//click event occurs on column holder, we can't detect cell\r\n\t\t\t\t\t\t\tif (trg.getAttribute(/*@attr*/\"column\")) return;\r\n\t\t\t\t\t\t\tindex = getIndex(trg);\r\n\r\n\t\t\t\t\t\t\tif (index >= this._settings.topSplit){\r\n\t\t\t\t\t\t\t\tconst pager = this._settings.pager;\r\n\t\t\t\t\t\t\t\tif (pager || (!this._settings.prerender && !this._settings.autoheight))\r\n\t\t\t\t\t\t\t\t\tindex += this._columns[column]._yr0 - this._settings.topSplit;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._item_clicked = id = { row:this.data.order[index], column:this._columns[column].id};\r\n\t\t\t\t\t\tid.toString = this._id_to_string;\r\n\t\t\t\t\t} else \r\n\t\t\t\t\t\tthis._item_clicked = id = { column:this._columns[column].id };\r\n\r\n\t\t\t\t\t//some custom css handlers was found\r\n\t\t\t\t\tres = this._mouseEventCall(css_call, e, id, trg);\r\n\t\t\t\t\tif (res===false) return;\r\n\r\n\t\t\t\t\t//call inner handler\r\n\t\t\t\t\tif (isBody ){\r\n\t\t\t\t\t\tif(this.callEvent(\"on\"+name,[id,e,trg])&&pair){\r\n\t\t\t\t\t\t\tthis.callEvent(\"on\"+pair,[id,e,trg]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (name == \"ItemClick\"){\r\n\t\t\t\t\t\tvar isHeader = (trg.parentNode.parentNode.getAttribute(/*@attr*/\"section\") == \"header\");\r\n\t\t\t\t\t\tif (isHeader && this.callEvent(\"onHeaderClick\", [id, e, trg]))\r\n\t\t\t\t\t\t\tthis._on_header_click(id.column, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcss_call = [];\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\ttrg=trg.parentNode;\r\n\t\t}\r\n\t\tthis._mouseEventCall(css_call, e, id, this.$view);\r\n\t\treturn found;\t//returns true if item was located and event was triggered\r\n\t},\r\n\t_get_tooltip_data:function(t,e){\r\n\t\tlet id = this.locate(e);\r\n\t\tif (!id) return null;\r\n\r\n\t\tlet tooltip = TooltipControl._tooltip;\r\n\t\tlet data;\r\n\t\tif (id.header){\r\n\t\t\tlet node = e.target;\r\n\t\t\tlet pos;\r\n\t\t\tlet cind = id.cind - (id.span?id.span-1:0);\r\n\t\t\tlet rind = -1;\r\n\r\n\t\t\twhile (node && !pos){\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t\tpos = node.getAttribute(\"section\");\r\n\t\t\t}\r\n\t\t\twhile( (node = node.previousSibling) !== null )\r\n\t\t\t\trind++;\r\n\r\n\t\t\tlet config = this._columns[cind][pos][rind];\r\n\t\t\tif (config.tooltip)\r\n\t\t\t\ttooltip.type.template = template(config.tooltip === true ? \"#text#\" : config.tooltip);\r\n\t\t\telse return null;\r\n\r\n\t\t\tdata = config;\r\n\t\t} else {\r\n\t\t\tlet config = tooltip.type.column = this.getColumnConfig(id.column);\r\n\r\n\t\t\t//empty tooltip - ignoring\r\n\t\t\tif (!config.tooltip && config.tooltip !== undefined)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tif (config.tooltip === true || (!config.tooltip && isUndefined(this._settings.tooltip.template))){\r\n\t\t\t\tdata = this.getText(id.row, id.column).toString();\r\n\t\t\t} else if (config.tooltip){\r\n\t\t\t\tlet area = e.target.getAttribute(\"webix_area\");\r\n\r\n\t\t\t\tif (area){\r\n\t\t\t\t\ttooltip.type.template = function(obj,common){\r\n\t\t\t\t\t\tvar values = obj[config.id];\r\n\t\t\t\t\t\treturn template(config.tooltip).call(this,obj,common,values[area],area);\r\n\t\t\t\t\t};\r\n\t\t\t\t} else tooltip.type.template = template(config.tooltip);\r\n\t\t\t} else tooltip.type.template = template(this._settings.tooltip.template);\r\n\t\t}\r\n\r\n\t\treturn (data !== undefined) ? data : this.getItem(id.row);\r\n\t},\r\n\t$tooltipOut:function(){\r\n\t\tTooltipControl._hide_tooltip();\r\n\t\tdelete TooltipControl._tooltip.type.column;\r\n\t\treturn null;\r\n\t},\r\n\t\r\n\r\n\r\n\r\n\tshowOverlay:function(message){\r\n\t\tif (!this._datatable_overlay){\r\n\t\t\tvar t = create(\"DIV\", { \"class\":\"webix_overlay\" }, \"\");\r\n\t\t\tthis._body.appendChild(t);\r\n\t\t\tthis._datatable_overlay = t;\r\n\t\t}\r\n\t\tthis._datatable_overlay.innerHTML = message;\r\n\t},\r\n\thideOverlay:function(){\r\n\t\tif (this._datatable_overlay){\r\n\t\t\tremove(this._datatable_overlay);\r\n\t\t\tthis._datatable_overlay = null;\r\n\t\t}\r\n\t},\r\n\tmapCells: function(startrow, startcol, numrows, numcols, callback, getOnly) {\r\n\t\tif (startrow === null && this.data.order.length > 0) startrow = this.data.order[0];\r\n\t\tif (startcol === null) startcol = this.columnId(0);\r\n\t\tif (numrows === null) numrows = this.data.order.length;\r\n\t\tif (numcols === null) numcols = this._settings.columns.length;\r\n\r\n\t\tif (!this.exists(startrow)) return;\r\n\t\tstartrow = this.getIndexById(startrow);\r\n\t\tstartcol = this.getColumnIndex(startcol);\r\n\t\tif (startcol === null) return;\r\n\r\n\t\tfor (var i = 0; i < numrows && (startrow + i) < this.data.order.length; i++) {\r\n\t\t\tvar row_ind = startrow + i;\r\n\t\t\tvar row_id = this.data.order[row_ind];\r\n\t\t\tif(row_id){ //dyn loading\r\n\t\t\t\tvar item = this.getItem(row_id);\r\n\t\t\t\tfor (var j = 0; j < numcols && (startcol + j) < this._settings.columns.length; j++) {\r\n\t\t\t\t\tvar col_ind = startcol + j;\r\n\t\t\t\t\tvar col_id = this.columnId(col_ind);\r\n\t\t\t\t\tvar result = callback(item[col_id], row_id, col_id, i, j);\r\n\t\t\t\t\tif (!getOnly)\r\n\t\t\t\t\t\titem[col_id] = result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_call_onparse: function(driver, data){\r\n\t\tif (!this._settings.columns && driver.getConfig)\r\n\t\t\tthis.define(\"columns\", driver.getConfig(data));\r\n\t},\r\n\t_autoDetectConfig:function(){\r\n\t\tvar test = this.getItem(this.getFirstId());\r\n\t\tvar res = this._settings.columns = [];\r\n\t\tfor (var key in test)\r\n\t\t\tif (key != \"id\" && key[0] != \"$\")\r\n\t\t\t\tres.push({ id:key, header:key[0].toUpperCase()+key.substr(1), sort:\"string\", editor:\"text\" });\r\n\t\tif (res.length)\r\n\t\t\tres[0].fillspace = true;\r\n\t\tif (typeof this._settings.select == \"undefined\")\r\n\t\t\tthis.define(\"select\", \"row\");\r\n\t}\r\n};\r\n\r\n// #include ui/datatable/datatable_filter.js\r\n// #include ui/datatable/datatable_selection.js\r\n// #include ui/datatable/datatable_blockselect.js\r\n// #include ui/datatable/datatable_resize.js\r\n// #include ui/datatable/datatable_paging.js\r\n// #include ui/datatable/datatable_clipboard.js\r\n// #include ui/datatable/datatable_state.js\r\n// #include ui/datatable/datatable_touch.js\r\n// #include ui/datatable/datatable_size.js\r\n// #include ui/datatable/datatable_math.js\r\n// #include ui/datatable/datatable_edit.js\r\n// #include ui/datatable/datatable_columns.js\r\n// #include ui/datatable/datatable_keynav.js\r\n\r\n// #include ui/datatable/datatable_dnd.js\r\n// #include ui/datatable/datatable_validation.js\r\n\r\n// #include ui/datatable/datatable_sparklines.js\r\n\r\n// #include ui/datatable/datatable_print.js\r\n// #include ui/datatable/datatable_export.js\r\n\r\n\r\nconst view = protoUI(\r\n\tapi,\r\n\tAreaSelect, DataState, TablePaste,\tDataMove,\r\n\tEditAbility, KeysNavigation, PagingAbility,\r\n\tCustomPrint, PrintMixin,\r\n\tValidateCollection, ValidationMixin,\r\n\tExportMixin, DragItem, DragMixin,\r\n\tKeyNavMixin, ColumnsMixin, EditMixin, MathMixin, HeaderMenuMixin,\r\n\tSizeMixin, TouchMixin, ResizeMixin, SubRowMixin,\r\n\tBlockSelectMixin, SelectionMixin, FilterMixin, FreezeRowMixin, SpansMixin,\r\n\t\r\n\tAutoTooltip, Group, DataMarks, DataLoader,  MouseEvents, MapCollection, base.view, EventSystem, Settings );\r\n\r\nexport default {api, view};","const temp = {}; export default temp;","import {create} from \"../../webix/html\";\r\nimport {isUndefined, bind, copy} from \"../../webix/helpers\";\r\n\r\n\r\nconst Mixin = {\r\n\t_prePrint:function(options, htmlOnly){\r\n\t\tif(options.scroll && !htmlOnly) return true;\r\n\r\n\t\toptions.header = isUndefined(options.header)?(this.config.header?true:false):options.header;\r\n\t\toptions.footer = isUndefined(options.footer)?(this.config.footer?true:false):options.footer;\r\n\t\toptions.xCorrection = options.xCorrection || 0; //spreadsheet\r\n\t},\r\n\t_findIndex:function(arr, func){\r\n\t\tvar result = -1;\r\n\t\tfor(var i =0; result<0 && i < arr.length; i++){\r\n\t\t\tif(func(arr[i]))\r\n\t\t\t\tresult = i;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\t_getTableHeader:function(base, columns, group){\r\n\r\n\t\tvar spans = {}, start = 0;\r\n\r\n\t\tbase.forEach(bind(function(tableArray, tid){\r\n\t\t\tvar row = tableArray[0], headerArray = [], length = row.length;\r\n\r\n\t\t\trow.forEach(bind(function(cell, cid){\r\n\t\t\t\tvar column = columns[cid+start];\r\n\r\n\t\t\t\tfor(var h  = 0; h< column[group].length; h++){\r\n\t\t\t\t\tvar header = column[group][h];\r\n\r\n\t\t\t\t\tif(!header && !(spans[tid] && spans[tid][h])) continue;\r\n\t\t\t\t\t\r\n\t\t\t\t\theader = copy(header || {text:\"\"});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(spans[tid] && spans[tid][h] && cid ===0){\r\n\t\t\t\t\t\theader.colspan = spans[tid][h];\r\n\t\t\t\t\t\tspans[tid][h] = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(header.colspan){\r\n\t\t\t\t\t\tvar colspan = Math.min(header.colspan, (length-cid));\r\n\t\t\t\t\t\tspans[tid+1] = spans[tid+1] || {};\r\n\t\t\t\t\t\tspans[tid+1][h] = header.colspan-colspan;\r\n\t\t\t\t\t\theader.colspan = colspan;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(header.rowspan && length === 1){\r\n\t\t\t\t\t\theader.height = (header.height || this.config.headerRowHeight)*header.rowspan;\r\n\t\t\t\t\t\theader.rowspan = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar hcell = {\r\n\t\t\t\t\t\ttxt: header.rotate ? this.getHeaderNode(column.id, h).innerHTML:\r\n\t\t\t\t\t\t\t(header.text || (header.contentId?this.getHeaderContent(header.contentId).getValue():\"\")),\r\n\t\t\t\t\t\tclassName:\"webix_hcell \"+\"webix_\"+group+\"_cell \"+(header.css || \"\"),\r\n\t\t\t\t\t\tstyle:{\r\n\t\t\t\t\t\t\theight:(header.height || this.config.headerRowHeight)+\"px\",\r\n\t\t\t\t\t\t\twidth:header.colspan?\"auto\":column.width + \"px\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tspan:(header.colspan || header.rowspan) ? {colspan:header.colspan || 1, rowspan:header.rowspan || 1}:null\r\n\t\t\t\t\t};\r\n\t\t\t\t\theaderArray[h] = headerArray[h] || [];\r\n\t\t\t\t\theaderArray[h][cid] = hcell;\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\t\t\tif(group ==\"header\")\r\n\t\t\t\tbase[tid] = headerArray.concat(tableArray);\r\n\t\t\telse\r\n\t\t\t\tbase[tid] = tableArray.concat(headerArray);\r\n\t\t\tstart+=length;\r\n\t\t}, this));\r\n\r\n\t\treturn base;\r\n\t},\r\n\t_getTableArray:function (options, base, start){ \r\n\r\n\t\tvar columns = this.config.columns;\r\n\t\tvar sel = this.getSelectedId(true);\r\n\t\tvar maxWidth = options.fit ==\"page\" ? Infinity : this._getPageWidth(options);\r\n\t\t\r\n\t\tvar rightRestriction = 0;\r\n\t\tvar bottomRestriction = 0;\r\n\t\tvar tableArray = [];\r\n\t\tvar newTableStart = 0;\r\n\t\tvar widths = [];\r\n\r\n\t\tstart = start || (0 + options.xCorrection);\r\n\t\tbase = base || [];\r\n\r\n\t\tthis.eachRow(bind(function(row){\r\n\t\t\tvar width = 0;\r\n\t\t\tvar rowItem = this.getItem(row);\r\n\t\t\tvar rowIndex = this.getIndexById(row);\r\n\r\n\t\t\tvar colrow = [];\r\n\t\t\tvar datarow = false;\r\n\r\n\t\t\tfor(var c=start; c<columns.length; c++){\r\n\t\t\t\tvar column = columns[c].id;\r\n\t\t\t\tvar colIndex = this.getColumnIndex(column)-start;\r\n\r\n\t\t\t\tif(columns[c]){\r\n\t\t\t\t\twidth += columns[c].width;\r\n\t\t\t\t\tif(rowIndex === 0)\r\n\t\t\t\t\t\twidths.push(columns[c].width);\r\n\r\n\t\t\t\t\tif(width > maxWidth && c>start){ // 'c>start' ensures that a single long column will have to fit the page\r\n\t\t\t\t\t\tnewTableStart = c; break; }\r\n\r\n\t\t\t\t\tif(options.data !==\"selection\" || (options.data==\"selection\" && this._findIndex(sel, function(obj){\r\n\t\t\t\t\t\treturn obj.column == column && obj.row == row;\r\n\t\t\t\t\t})!==-1)){\r\n\r\n\t\t\t\t\t\tvar span;\r\n\t\t\t\t\t\tif(this.getSpan)\r\n\t\t\t\t\t\t\tspan = this.getSpan(row, column);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//check span from previous table\r\n\t\t\t\t\t\tif(span && this.getColumnIndex(column) === start){\r\n\t\t\t\t\t\t\tvar spanStart = this.getColumnIndex(span[1]);\r\n\t\t\t\t\t\t\tif(spanStart < start){\r\n\t\t\t\t\t\t\t\tspan[2] = span[2] - (start-spanStart);\r\n\t\t\t\t\t\t\t\tspan[4] = span[4] ? span[4] : (rowItem[span[1]] ? this.getText(row, span[1]) : null);\r\n\t\t\t\t\t\t\t\tspan[1] = column;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!span  || (span && span[0] == row && span[1] == column)){\r\n\t\t\t\t\t\t\tvar cellValue = span && span[4] ? span[4] : (this._columns_pull[column] ? this.getText(row, column) : \"\");\r\n\t\t\t\t\t\t\tvar className = this.getCss(row, column)+\" \"+(columns[c].css || \"\")+(span? (\" webix_dtable_span \"+ (span[5] || \"\")):\"\" );\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar style  = {\r\n\t\t\t\t\t\t\t\theight:span && span[3] > 1? \"auto\": ((rowItem.$height || this.config.rowHeight) + \"px\"),\r\n\t\t\t\t\t\t\t\twidth: span && span [2] > 1? \"auto\": columns[c].width + \"px\"\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tcolrow.push({\r\n\t\t\t\t\t\t\t\ttxt: cellValue, className: className, style: style,\r\n\t\t\t\t\t\t\t\tspan: (span ? {colspan:span[2], spanStart:this.getColumnIndex(span[1]), rowspan:span[3]}:null)\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (cellValue || cellValue===0) {\r\n\t\t\t\t\t\t\t\trightRestriction = Math.max(colIndex+1, rightRestriction);\r\n\t\t\t\t\t\t\t\tbottomRestriction = Math.max(rowIndex+1, bottomRestriction);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdatarow = datarow || !!cellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(span){\r\n\t\t\t\t\t\t\tcolrow.push({$inspan:true});\r\n\t\t\t\t\t\t\trightRestriction = Math.max(colIndex+1, rightRestriction);\r\n\t\t\t\t\t\t\tbottomRestriction = Math.max(rowIndex+1, bottomRestriction);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!options.skiprows || datarow)\r\n\t\t\t\ttableArray.push(colrow);\r\n\t\t}, this));\r\n\r\n\t\tif(bottomRestriction && rightRestriction){\r\n\t\t\tif(options.trim){\r\n\t\t\t\ttableArray.length = bottomRestriction;\r\n\t\t\t\ttableArray = tableArray.map(function(item){\r\n\t\t\t\t\tfor(var i = item.length-1; i>=0; i--){\r\n\t\t\t\t\t\tif(item[i].span && item[i].span.colspan){\r\n\t\t\t\t\t\t\titem[i].span.colspan = Math.min(item[i].span.colspan, item.length-i);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.length = rightRestriction;\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tbase.push(tableArray);\r\n\t\t}\r\n\r\n\t\tif(newTableStart) \r\n\t\t\tthis._getTableArray(options, base, newTableStart);\r\n\t\telse{\r\n\t\t\t//keep this order as logic relies on the first data row\r\n\t\t\tif(options.footer)\r\n\t\t\t\tbase = this._getTableHeader(base, columns, \"footer\");\r\n\t\t\tif(options.header)\r\n\t\t\t\tbase = this._getTableHeader(base, columns, \"header\");\r\n\r\n\t\t\tif(options.fit == \"page\") \r\n\t\t\t\tthis._correctWidth(base, widths, rightRestriction, options);\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\t},\r\n\t//a single grid tries to fit to page size - set column width to auto\r\n\t_correctWidth:function(base, widths, rightRestriction, options){\r\n\t\tif(rightRestriction && options.trim)\r\n\t\t\twidths.length = rightRestriction;\r\n\r\n\t\tlet rwidth = 0;\r\n\t\tfor(let i = 0; i < widths.length; i++)\r\n\t\t\trwidth += widths[i];\r\n\t\t\r\n\t\tif(rwidth > this._getPageWidth(options)){\r\n\t\t\tbase[0].forEach((item) => {\r\n\t\t\t\tfor(let i = 0; i < item.length; i++){\r\n\t\t\t\t\tif(item[i] && item[i].style && item[i].style.width)\r\n\t\t\t\t\t\titem[i].style.width = \"auto\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_getTableHTML:function(tableData, options){\r\n\t\t\r\n\t\tvar container = create(\"div\");\r\n\r\n\t\ttableData.forEach(bind(function(table, i){\r\n\r\n\t\t\tvar tableHTML = create(\"table\", {\r\n\t\t\t\t\"class\":\"webix_table_print \"+this.$view.className+(options.borderless?\" borderless\":\"\"),\r\n\t\t\t\t\"style\":\"border-collapse:collapse\",\r\n\t\t\t\t\"id\":this.$view.getAttribute(\"id\")\r\n\t\t\t});\r\n\r\n\t\t\ttable.forEach(function(row){\r\n\t\t\t\tvar tr = create(\"tr\");\r\n\r\n\t\t\t\trow.forEach(function(cell){\r\n\t\t\t\t\tif(!cell.$inspan){\r\n\t\t\t\t\t\tvar td = create(\"td\");\r\n\r\n\t\t\t\t\t\ttd.innerHTML = cell.txt;\r\n\t\t\t\t\t\ttd.className = cell.className;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(var key in cell.style)\r\n\t\t\t\t\t\t\ttd.style[key] = cell.style[key];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(cell.span){\r\n\t\t\t\t\t\t\ttd.colSpan = cell.span.colspan;\r\n\t\t\t\t\t\t\ttd.rowSpan = cell.span.rowspan;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttr.appendChild(td);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\ttableHTML.appendChild(tr);\r\n\t\t\t});\r\n\t\t\tcontainer.appendChild(tableHTML);\r\n\r\n\t\t\tif(i+1 < tableData.length){\r\n\t\t\t\tvar br = create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\r\n\t\t\t\tcontainer.appendChild(br);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}, this));\r\n\r\n\t\treturn container;\r\n\t}\r\n};\r\n\r\n\r\nexport default Mixin;","const Mixin = {\r\n\tclearValidation:function(){\r\n\t\tfor(var i in this.data._marks)\r\n\t\t\tthis._clear_invalid_css(i);\r\n\t\tthis.data.clearMark(\"webix_invalid\", true);\r\n\t},\r\n\t_mark_invalid:function(id, details){\r\n\t\tthis._clear_invalid_css(id);\r\n\t\tfor (var key in details)\r\n\t\t\tthis.addCellCss(id, key, \"webix_invalid_cell\");\r\n\r\n\t\tthis.addCss(id, \"webix_invalid\");\r\n\t},\r\n\t_clear_invalid:function(id){\r\n\t\tthis._clear_invalid_css(id);\r\n\t\tthis.removeCss(id, \"webix_invalid\");\r\n\t},\r\n\t_clear_invalid_css:function(id){\r\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\r\n\t\tif (mark){\r\n\t\t\tfor (var key in mark)\r\n\t\t\t\tmark[key] = mark[key].replace(\"webix_invalid_cell\", \"\").replace(\"  \",\" \");\r\n\t\t}\r\n\t},\r\n\r\n\taddRowCss:function(id, css, silent){\r\n\t\tthis.addCss(id, css, silent);\r\n\t},\r\n\tremoveRowCss:function(id, css, silent){\r\n\t\tthis.removeCss(id, css, silent);\r\n\t},\r\n\taddCellCss:function(id, name, css, silent){\r\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\r\n\t\tvar newmark = mark || {};\r\n\r\n\t\tvar style = newmark[name]||\"\";\r\n\t\tnewmark[name] = style.replace(css, \"\").replace(\"  \",\" \")+\" \"+css;\r\n\r\n\t\tif (!mark) this.data.addMark(id, \"$cellCss\", false, newmark, true);\r\n\t\tif (!silent)\r\n\t\t\tthis.refresh(id);\r\n\t},\r\n\tremoveCellCss:function(id, name, css, silent){\r\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\r\n\t\tif (mark){\r\n\t\t\tvar style = mark[name]||\"\";\r\n\t\t\tif (style)\r\n\t\t\t\tmark[name] = style.replace(css, \"\").replace(\"  \",\" \");\r\n\t\t\tif (!silent)\r\n\t\t\t\tthis.refresh(id);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import color from \"../../webix/color\";\r\nimport {toExcel, toPDF} from \"../../webix/export\";\r\nimport {create, remove} from \"../../webix/html\";\r\nimport {extend, isUndefined} from \"../../webix/helpers\";\r\n\r\n\r\nconst Mixin = {\r\n\t$exportView:function(options){\r\n\t\tif(this.isBranchOpen) //treetable\r\n\t\t\textend(options, { filterHTML: true });\r\n\r\n\t\tconst mode = options.export_mode;\r\n\r\n\t\tif((mode != \"pdf\" && mode != \"excel\") || options.dataOnly || !options.styles)\r\n\t\t\treturn this;\r\n\t\telse{ //excel export with styles\r\n\t\t\toptions.dataOnly = true;\r\n\t\t\toptions.heights = isUndefined(options.heights)?\"all\":options.heights;\r\n\r\n\t\t\tconst data = mode == \"pdf\" ? toPDF(this, options) : toExcel(this, options);\r\n\t\t\tdata[0].styles = this._getExportStyles(options);\r\n\r\n\t\t\tdelete options.dataOnly;\r\n\t\t\treturn data;\r\n\t\t}\r\n\t},\r\n\t_getExportStyles:function(options){\r\n\t\tconst type = options.export_mode;\r\n\r\n\t\tvar columns = this.config.columns, styles = [];\r\n\t\tthis._style_hash = this._style_hash || {};\r\n\r\n\t\tif(options.docHeader)\r\n\t\t\tstyles = [{ 0:this._getExportDocStyle(options.docHeader.css)},{ 0:{}}];\r\n\t\tif(options.header!==false)\r\n\t\t\tstyles = this._getExportHStyles(options, \"header\", styles, type);\r\n\r\n\t\tthis.data.each(function(obj){\r\n\t\t\tvar row = {};\r\n\t\t\tfor(var i = 0; i<columns.length; i++){\r\n\t\t\t\tvar cellCss = this.getCss(obj.id, columns[i].id);\r\n\t\t\t\tvar columnCss = columns[i].node.className;\r\n\t\t\t\tvar spanCss = \"\";\r\n\t\t\t\tvar span = null;\r\n\t\t\t\tvar node = null;\r\n\r\n\t\t\t\tif(this._spans_pull && (span = this.getSpan(obj.id, columns[i].id))){\r\n\t\t\t\t\tnode  = this.getSpanNode({row:span[0], column:span[1]});\r\n\t\t\t\t\tspanCss = \"webix_dtable_span \"+(span[5] || \"\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tnode = this.getItemNode({row:obj.id, column:columns[i].id});\r\n\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\tnode = create(\"div\", {\r\n\t\t\t\t\t\t\"class\":cellCss, style:\"visibility:hidden\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar cnode = columns[i].node;\r\n\t\t\t\t\tif(!columns[i].attached){\r\n\t\t\t\t\t\tcnode = create(\"div\", {\r\n\t\t\t\t\t\t\t\"class\":columnCss, style:\"visibility:hidden\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis._body.appendChild(cnode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcnode.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\trow[i] = this._getExportCellStyle(node, [cellCss, columnCss, spanCss].join(\":\"), type);\r\n\t\t\t}\r\n\t\t\tstyles[styles.length] = row;\r\n\t\t}, this);\r\n\r\n\t\tif(options.footer!==false && this.config.footer)\r\n\t\t\tstyles = this._getExportHStyles(options, \"footer\", styles, type);\r\n\t\tif(options.docFooter)\r\n\t\t\tstyles = styles.concat([{ 0:{}},{ 0:this._getExportDocStyle(options.docFooter.css)}]);\r\n\r\n\t\treturn styles;\r\n\t},\r\n\t_getExportHStyles:function(options, group, styles, type){\r\n\t\tvar columns = this.config.columns, hs = [];//spans\r\n\r\n\t\tfor(var h = 0; h<columns[0][group].length; h++){\r\n\t\t\tvar hrow = {};\r\n\t\t\tfor(var i = 0; i<columns.length; i++){\r\n\t\t\t\tvar header = columns[i][group][h];\r\n\t\t\t\t//ToDo:make sure it is rendered and attached\r\n\t\t\t\tif(header){ //can be null\r\n\t\t\t\t\tvar cid = header.colspan ? columns[i+header.colspan-1].id : columns[i].id;\r\n\t\t\t\t\tvar node = (group == \"header\"?this.getHeaderNode(cid, h):this.getFooterNode(cid, h));\r\n\t\t\t\t\tif(node){\r\n\t\t\t\t\t\tvar name = [node.parentNode.className, (header.css||\"\"), \"webix_hcell\", group];\r\n\t\t\t\t\t\throw[i] = this._getExportCellStyle(node, name.join(\":\"), type);\r\n\r\n\t\t\t\t\t\tif(header.colspan || header.rowspan)\r\n\t\t\t\t\t\t\ths.push([h, i, {colspan:header.colspan-1 || 0, rowspan:header.rowspan-1||0}, hrow[i]]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfor(var s = 0; s<hs.length; s++){\r\n\t\t\t\t\t\tvar st = hs[s][2], hsc = hs[s][1], hsr = hs[s][0];\r\n\t\t\t\t\t\tif(hsc+st.colspan >= i && hsr+st.rowspan>=h)\r\n\t\t\t\t\t\t\throw[i] = hs[s][3];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstyles[styles.length] = hrow;\r\n\t\t}\r\n\t\treturn styles;\r\n\t},\r\n\t_getBorderColor(styles, defaultColor, type){\r\n\t\treturn styles[`border-${type}-width`] == \"0px\" ? null : color.rgbToHex(styles[`border-${type}-color`]) || defaultColor;\r\n\t},\r\n\t_getExportCellStyle:function(node, name, type){\r\n\t\tif(this._style_hash[name]) \r\n\t\t\treturn  this._style_hash[name];\r\n\t\telse{\r\n\t\t\tlet parentStyle;\r\n\t\t\tif(node.parentNode && node.parentNode.nodeName ==\"TD\") //borders for header are set for parent td\r\n\t\t\t\tparentStyle = this._getRules(node.parentNode);\r\n\r\n\t\t\tconst cellStyle = this._getRules(node);\r\n\r\n\t\t\tconst bg = color.rgbToHex(cellStyle[\"background-color\"])||\"FFFFFF\";\r\n\t\t\tconst common = {\r\n\t\t\t\tbackgroundColor: bg,\r\n\t\t\t\tfontSize: cellStyle[\"font-size\"].replace(\"px\", \"\")*0.75, //px to pt conversion\r\n\t\t\t\tcolor: color.rgbToHex(cellStyle[\"color\"]),\r\n\t\t\t\ttextAlign: cellStyle[\"text-align\"],\r\n\t\t\t\tborderRightColor: this._getBorderColor(parentStyle||cellStyle, bg, \"right\"),\r\n\t\t\t\tborderLeftColor: this._getBorderColor(parentStyle||cellStyle, bg, \"left\"),\r\n\t\t\t\tborderBottomColor: this._getBorderColor(parentStyle||cellStyle, bg, \"bottom\"),\r\n\t\t\t\tborderTopColor: this._getBorderColor(parentStyle||cellStyle, bg, \"top\")\r\n\t\t\t};\r\n\r\n\t\t\tconst rules = type == \"pdf\" ? common : this._getExcelCellRules(cellStyle, node, common);\r\n\r\n\t\t\tthis._style_hash[name] = rules;\r\n\t\t\treturn rules;\r\n\t\t}\r\n\t},\r\n\t_getExportDocStyle:function(css){\r\n\t\tcss = extend(css||{}, {visibility:\"hidden\", \"white-space\":\"nowrap\", \"text-align\":\"left\"});\r\n\t\tvar cssStr = \"\";\r\n\t\tfor(var i in css) cssStr += (i+\":\"+css[i]+\";\");\r\n\r\n\t\tvar node = create(\"div\", {style:cssStr});\r\n\t\tthis._body.appendChild(node);\r\n\t\tvar style = this._getExportCellStyle(node, cssStr);\r\n\t\tremove(node);\r\n\r\n\t\treturn style;\r\n\t},\r\n\t_getExcelCellRules(cellStyle, node, common){\r\n\t\tconst rules = { font:{},alignment:{},border:{}};\r\n\r\n\t\t//font\r\n\t\trules.font.name = cellStyle[\"font-family\"].replace(/,.*$/, \"\"); // cut off fallback font;\r\n\t\trules.font.sz = common.fontSize;\r\n\t\trules.font.color = {rgb: common.color};\r\n\r\n\t\tif(cellStyle[\"font-weight\"] !== \"normal\" && cellStyle[\"font-weight\"] != 400) rules.font.bold = true;\r\n\t\tif(cellStyle[\"text-decoration-line\"] === \"underline\") rules.font.underline = true;\r\n\t\tif(cellStyle[\"font-style\"] === \"italic\") rules.font.italic = true;\r\n\t\tif(cellStyle[\"text-decoration-line\"] === \"line-through\") rules.font.strike = true;\r\n\r\n\t\t//alignment\r\n\t\trules.alignment.horizontal = common.textAlign;\r\n\t\trules.alignment.vertical = cellStyle[\"height\"] == cellStyle[\"line-height\"]?\"center\":\"top\";\r\n\t\tif(cellStyle[\"white-space\"] == \"normal\") rules.alignment.wrapText = true;\r\n\t\t//rotated header\r\n\t\tif(node.firstChild && node.firstChild.className && node.firstChild.className.indexOf(\"webix_rotate\")!==-1)\r\n\t\t\trules.alignment.textRotation = 90;\r\n\r\n\t\t//background\r\n\t\trules.fill = {fgColor:{rgb:common.backgroundColor}};\r\n\r\n\t\t//borders\r\n\t\tif(common.borderRightColor)\r\n\t\t\trules.border.right = { style:\"thin\", color:{rgb:common.borderRightColor}};\r\n\t\tif(common.borderBottomColor)\r\n\t\t\trules.border.bottom = { style:\"thin\", color:{rgb:common.borderBottomColor}};\r\n\t\tif(common.borderLeftColor)\r\n\t\t\trules.border.left = { style:\"thin\", color:{rgb:common.borderLeftColor}};\r\n\t\tif(common.borderTopColor)\r\n\t\t\trules.border.top = { style:\"thin\", color:{rgb:common.borderTopColor}};\r\n\r\n\t\treturn rules;\r\n\t},\r\n\t_getRules:function(node){\r\n\t\tvar style = {};\r\n\t\tif(window.getComputedStyle)\r\n\t\t\tstyle = window.getComputedStyle(node);\r\n\t\telse\r\n\t\t\tstyle = node.currentStyle;\r\n\t\treturn style;\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import {bind, extend} from \"../../webix/helpers\";\r\nimport {addCss, removeCss} from \"../../webix/html\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\n\r\n// #include core/keynav.js\r\n\r\nconst Mixin = {\r\n\t$init:function(){\r\n\t\tthis.attachEvent(\"onAfterScroll\", this._set_focusable_item);\r\n\t\tthis.attachEvent(\"onFocus\", function(){\r\n\t\t\taddCss(this.$view, \"webix_dtable_focused\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onBlur\", function(){\r\n\t\t\tremoveCss(this.$view,\"webix_dtable_focused\");\r\n\t\t});\r\n\t},\r\n\t_set_focusable_item:function(){\r\n\t\tvar sel = this._getVisibleSelection();\r\n\t\tif(!sel){\r\n\t\t\tvar node =  this._dataobj.querySelector(\".webix_cell\");\r\n\t\t\tif(node)\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"0\");\r\n\t\t}\r\n\t},\r\n\t_getVisibleSelection:function(){\r\n\t\tvar sel = this.getSelectedId(true);\r\n\t\tfor(var i = 0; i<sel.length; i++){\r\n\t\t\tif(this.isColumnVisible(sel[i].column))\r\n\t\t\t\treturn this.getItemNode(sel[i]);\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tmoveSelection:function(mode, details, focus){\r\n\t\tthis._delayRender();\r\n\t\tif(this._settings.disabled) return;\r\n\t\tdetails = details || {};\r\n\r\n\t\t//get existing selection as array\r\n\t\tvar t = this.getSelectedId(true);\r\n\t\tvar index = t.length-1;\r\n\t\tvar preserve = this._settings.multiselect || this._settings.areaselect ? details.shift : false;\r\n\r\n\t\t//change defaults in case of multiselection\r\n\t\tif(t.length>1 && this._settings.select !==\"cell\"){\r\n\t\t\tt = t.sort(bind(function(a, b){\r\n\t\t\t\tif(this.getIndexById(a.row)>this.getIndexById(b.row) || this.getColumnIndex(a.column)>this.getColumnIndex(b.column)) return 1;\r\n\t\t\t\telse return -1;\r\n\t\t\t}, this));\r\n\t\t\tif (mode == \"up\" || mode == \"left\" || mode ==\"top\" || mode ==\"pgup\")\r\n\t\t\t\tindex = 0;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (index < 0 && this.count()){ //no selection\r\n\t\t\tif (mode == \"down\" || mode == \"right\") mode = \"top\";\r\n\t\t\telse if (mode == \"up\" || mode == \"left\") mode = \"bottom\";\r\n\t\t\telse return;\r\n\t\t\tindex = 0;\r\n\t\t\tt =  [{ row:1, column:1 }];\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tif (index>=0){\r\n\t\t\tvar row = t[index].row;\r\n\t\t\tvar column = t[index].column;\r\n\r\n\t\t\tif (mode == \"top\" || mode == \"bottom\") {\r\n\t\t\t\tif (row) {\r\n\t\t\t\t\t// first/last row setting\r\n\t\t\t\t\tif (mode == \"top\")\r\n\t\t\t\t\t\trow = this.data.getFirstId();\r\n\t\t\t\t\telse if (mode == \"bottom\")\r\n\t\t\t\t\t\trow = this.data.getLastId();\r\n\t\t\t\t}\r\n\t\t\t\tif (column) {\r\n\t\t\t\t\t// first/last column setting\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\t\tif(mode == \"bottom\")\r\n\t\t\t\t\t\tindex = this.config.columns.length-1;\r\n\t\t\t\t\tcolumn = this.columnId(index);\r\n\t\t\t\t}\r\n\t\t\t} else if (mode == \"up\" || mode== \"down\" || mode == \"pgup\" || mode == \"pgdown\"){\r\n\t\t\t\tif (row){\r\n\t\t\t\t\t//it seems row's can be seleted\r\n\t\t\t\t\tlet index = this.getIndexById(row);\r\n\t\t\t\t\tlet step = 1;\r\n\t\t\t\t\tif(mode == \"pgup\" || mode == \"pgdown\")\r\n\t\t\t\t\t\tstep = this._pager? this._pager.config.size : Math.round(this._dtable_offset_height/this._settings.rowHeight); \r\n\r\n\t\t\t\t\t//get new selection row\r\n\t\t\t\t\tif (mode == \"up\" || mode == \"pgup\") index-=step;\r\n\t\t\t\t\telse if (mode == \"down\" || mode == \"pgdown\") index+=step;\r\n\t\t\t\t\t//check that we in valid row range\r\n\t\t\t\t\tif (index <0) index=0;\r\n\t\t\t\t\tif (index >=this.data.order.length) index=this.data.order.length-1;\r\n\r\n\t\t\t\t\trow = this.getIdByIndex(index);\r\n\t\t\t\t\tif (!row && this._settings.pager)\r\n\t\t\t\t\t\tthis.showItemByIndex(index);\r\n\t\t\t\t}\r\n\t\t\t} else if (mode == \"right\" || mode == \"left\"){\r\n\t\t\t\tif (column && this.config.select != \"row\"){\r\n\t\t\t\t\t//it seems column's can be selected\r\n\t\t\t\t\tlet index = this.getColumnIndex(column);\r\n\t\t\t\t\t//get new selected column\r\n\t\t\t\t\tif (mode == \"right\") index++;\r\n\t\t\t\t\telse if (mode == \"left\") index--;\r\n\t\t\t\t\t//check that result column index is in valid range\r\n\t\t\t\t\tif (index<0) index = 0;\r\n\t\t\t\t\tif (index>=this.config.columns.length) index = this.config.columns.length-1;\r\n\r\n\t\t\t\t\tcolumn = this.columnId(index);\r\n\t\t\t\t} else if ((this.open || this._subViewStorage) && mode == \"right\"){\r\n\t\t\t\t\treturn this.open ? this.open(row) : this.openSub(row);\r\n\t\t\t\t} else if ((this.close || this._subViewStorage) && mode == \"left\"){\r\n\t\t\t\t\treturn this.close ? this.close(row) : this.closeSub(row);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tassert(false, \"Not supported selection moving mode\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (row){\r\n\t\t\t\tthis.showCell(row, column);\r\n\r\n\t\t\t\tif(!this.select){ //switch on cell or row selection by default\r\n\t\t\t\t\textend(this, this._selections._commonselect, true);\r\n\t\t\t\t\tthis._settings.select = (this.open || this._subViewStorage?\"row\":\"cell\");\r\n\t\t\t\t\textend(this, this._selections[this._settings.select], true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar cell = { row:row, column:column };\r\n\r\n\t\t\t\tif(preserve && this._settings.select == \"area\"){\r\n\t\t\t\t\tvar last = this._selected_areas[this._selected_areas.length-1];\r\n\t\t\t\t\tthis._extendAreaRange(cell, last, mode, details);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._select(cell, preserve);\r\n\r\n\t\t\t\tif(!this._settings.clipboard && focus !==false){\r\n\t\t\t\t\tvar node = this.getItemNode(cell);\r\n\t\t\t\t\tif(node) node.focus();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n\r\nexport default Mixin;","import {_to_array, _power_array} from \"../../webix/helpers\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\n\r\nconst Mixin = {\r\n\t$init:function(){\r\n\t\tthis._clear_hidden_state();\t\r\n\t\tthis.attachEvent(\"onStructureLoad\", this._hideInitialColumns);\r\n\t},\r\n\t_clear_hidden_state:function(){\r\n\t\tthis._hidden_column_hash = {};\r\n\t\tthis._hidden_column_order = _to_array();\r\n\t\tthis._hidden_split=[0,0];\r\n\t},\r\n\t_hideInitialColumns:function(){\r\n\t\tvar cols = this._columns;\r\n\r\n\t\tfor(let i=0; i<cols.length; i++){\r\n\t\t\tif(cols[i].header) this._getInitialSpans(cols, cols[i].header);\r\n\t\t\tif(cols[i].footer) this._getInitialSpans(cols, cols[i].footer);\r\n\t\t}\r\n\r\n\t\tfor (let i=cols.length-1; i>=0; i--){\r\n\t\t\tif (cols[i].hidden)\r\n\t\t\t\tthis.hideColumn(cols[i].id, {}, true, true);\r\n\t\t\telse if (cols[i].batch && this.config.visibleBatch && cols[i].batch!=this.config.visibleBatch){\r\n\t\t\t\tthis.hideColumn(cols[i].id, {}, true, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_getInitialSpans:function(cols, elements){\r\n\t\tfor(var h = 0; h<elements.length;h++){\r\n\t\t\tvar line = elements[h];\r\n\t\t\tif(line && line.colspan && !line.$colspan)\r\n\t\t\t\tline.$colspan = line.colspan;\r\n\t\t}\r\n\t},\r\n\tmoveColumn:function(id, index){\r\n\t\tvar start_index = this.getColumnIndex(id);\r\n\t\tif (start_index == index) return; //already in place\r\n\t\tvar columns = this._settings.columns;\r\n\r\n\t\tvar start = columns.splice(start_index,1);\r\n\t\tvar pos = index - (index>start_index?1:0);\r\n\t\t_power_array.insertAt.call(columns, start[0], pos);\r\n\r\n\t\tvar order = this._hidden_column_order;\r\n\t\t// order exists even if columns are not reordered, so checking for length\r\n\t\tif (order.length){\r\n\t\t\torder = _to_array(order);\r\n\r\n\t\t\tvar hidden_index = order.find(id);\r\n\t\t\torder.removeAt(hidden_index);\r\n\t\t\tif (pos === 0)\r\n\t\t\t\torder.unshift(id);\r\n\t\t\telse { \r\n\t\t\t\torder.insertAt(id, order.find(columns[pos-1].id)+1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//TODO: split handling\r\n\t\t//we can move split line when column dropped after it\r\n\r\n\t\tthis._refresh_columns();\r\n\t},\r\n\t_init_horder:function(){\r\n\t\tvar horder = this._hidden_column_order;\r\n\t\tvar cols = this._settings.columns;\r\n\t\tif (!horder.length){\r\n\t\t\tfor (let i=0; i<cols.length; i++)\r\n\t\t\t\thorder[i] = cols[i].id;\r\n\t\t\tthis._hidden_split = [this._settings.leftSplit, this._rightSplit];\r\n\t\t}\r\n\t},\r\n\tisColumnVisible:function(id){\r\n\t\treturn !this._hidden_column_hash[id];\r\n\t},\r\n\thideColumn:function(id, opts, silent, mode){\r\n\t\tvar cols = this._settings.columns;\r\n\t\tvar horder = this._hidden_column_order;\r\n\t\tvar hhash = this._hidden_column_hash;\r\n\t\tvar column;\r\n\t\tvar span = 1;\r\n\t\topts = opts || {};\r\n\r\n\t\tif (mode!==false){\r\n\t\t\t\r\n\t\t\tlet index = this.getColumnIndex(id);\r\n\t\t\tassert(index != -1, \"hideColumn: invalid ID or already hidden\");\r\n\t\t\tif(index === -1 || !this.callEvent(\"onBeforeColumnHide\", [id])) return;\r\n\r\n\t\t\t//in case of second call to hide the same column, command will be ignored\r\n\t\t\tif (index == -1) return;\r\n\r\n\t\t\tthis._init_horder();\r\n\t\t\t\r\n\t\t\tif(opts.spans){\r\n\t\t\t\tvar header = cols[index].header;\r\n\t\t\t\tfor(let i = 0; i<header.length; i++){\r\n\t\t\t\t\tif(header[i]){\r\n\t\t\t\t\t\theader[i].$groupSpan = header[i].colspan || 1;\r\n\t\t\t\t\t\tspan = Math.max(span, header[i].$groupSpan);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (index<this._settings.leftSplit)\r\n\t\t\t\tthis._settings.leftSplit-=span;\r\n\t\t\tif (index>=this._rightSplit)\r\n\t\t\t\tthis._settings.rightSplit-=span;\r\n\t\t\telse \r\n\t\t\t\tthis._rightSplit-=span;\r\n\r\n\t\t\tfor (let i=index+span-1; i>=index; i--){\r\n\t\t\t\tthis._hideColumn(index);\r\n\t\t\t\tcolumn  = cols.splice(index, 1)[0];\r\n\t\t\t\thhash[column.id] = column;\r\n\t\t\t\tcolumn._yr0 = -1;\r\n\t\t\t\tdelete this._columns_pull[column.id];\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterColumnHide\", [id]);\r\n\t\t} else {\r\n\t\t\tcolumn = hhash[id];\r\n\t\t\tassert(column, \"showColumn: invalid ID or already visible\");\r\n\r\n\t\t\t//in case of second show command for already visible column - ignoring\r\n\t\t\tif(!column || !this.callEvent(\"onBeforeColumnShow\", [id])) return;\r\n\r\n\t\t\tlet prev = null;\r\n\t\t\tlet i=0;\r\n\t\t\tlet hindex = 0;\r\n\t\t\tfor (; i<horder.length; i++){\r\n\t\t\t\tif (horder[i] == id){\r\n\t\t\t\t\thindex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (!hhash[horder[i]])\r\n\t\t\t\t\tprev = horder[i];\r\n\t\t\t}\r\n\r\n\t\t\tlet index = prev?this.getColumnIndex(prev)+1:0;\r\n\t\t\t\r\n\t\t\tif(opts.spans){\r\n\t\t\t\tlet header = column.header;\r\n\t\t\t\tfor(let i = 0; i<header.length; i++){\r\n\t\t\t\t\tif(header[i]){\r\n\t\t\t\t\t\theader[i].colspan = header[i].$groupSpan || header[i].colspan;\r\n\t\t\t\t\t\tdelete header[i].$groupSpan;\r\n\t\t\t\t\t\tspan = Math.max(span, (header[i].colspan || 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i=hindex+span-1; i>=hindex; i--){\r\n\t\t\t\tlet column = hhash[horder[i]];\r\n\t\t\t\tif(column){ //can be already shown by another action\r\n\t\t\t\t\t_power_array.insertAt.call(cols, column, index);\r\n\t\t\t\t\tdelete column.hidden;\r\n\t\t\t\t\tdelete hhash[column.id];\r\n\t\t\t\t\tthis._columns_pull[column.id] = column;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tspan--;\r\n\t\t\t}\r\n\r\n\t\t\tif (hindex<this._hidden_split[0])\r\n\t\t\t\tthis._settings.leftSplit+=span;\r\n\t\t\tif (hindex>=this._hidden_split[1])\t\r\n\t\t\t\tthis._settings.rightSplit+=span;\r\n\t\t\telse\r\n\t\t\t\tthis._rightSplit+=span;\r\n\r\n\r\n\t\t\tthis.callEvent(\"onAfterColumnShow\", [id]);\r\n\t\t}\r\n\r\n\t\tif(column.header) this._fixColspansHidden(column, mode !== false ? 0 : 1, \"header\");\r\n\t\tif(column.footer) this._fixColspansHidden(column, mode !== false ? 0 : 1, \"footer\");\r\n\r\n\t\tif (!silent)\r\n\t\t\tthis._refresh_columns();\r\n\t},\r\n\t_fixColspansHidden:function(config, mod, elName){\r\n\t\tfor (let i=config[elName].length - 1; i >= 0; i--) {\r\n\t\t\tvar ind = this._hidden_column_order;\r\n\t\t\tvar spanSource, isHidden = false, spanSize = 0;\r\n\r\n\t\t\tfor (let j = 0; j < ind.length; j++) {\r\n\t\t\t\tlet colConfig = this.getColumnConfig(ind[j]);\r\n\t\t\t\tlet el = colConfig[elName][i];\r\n\t\t\t\tif (!this.isColumnVisible(ind[j])){\r\n\t\t\t\t\t//hidden column\r\n\t\t\t\t\tif (el && el.$colspan && spanSize <= 0){\r\n\t\t\t\t\t\t//start of colspan in hidden\r\n\t\t\t\t\t\tspanSize = el.colspan = el.$colspan;\r\n\t\t\t\t\t\tisHidden = spanSource = el;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (spanSource && spanSize > 0){\r\n\t\t\t\t\t\t//hidden column in colspan, decrease colspan size\r\n\t\t\t\t\t\tspanSource.colspan--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//visible column\r\n\t\t\t\t\tif (isHidden && spanSize > 0 && spanSource && spanSource.colspan > 0){\r\n\t\t\t\t\t\t//bit start of colspan is hidden\r\n\t\t\t\t\t\tel = colConfig[elName][i] = spanSource;\r\n\t\t\t\t\t\tspanSource = el;\r\n\t\t\t\t\t} else if (el && el.$colspan && spanSize <= 0){\r\n\t\t\t\t\t\t//visible start of colspan\r\n\t\t\t\t\t\tspanSize = el.colspan = el.$colspan;\r\n\t\t\t\t\t\tspanSource = el;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisHidden = null;\r\n\t\t\t\t}\r\n\t\t\t\tspanSize--;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefreshColumns:function(columns, reset){\r\n\t\tthis._dtable_column_refresh = true;\r\n\t\tif ((columns && columns != this.config.columns) || reset){\r\n\t\t\tthis._clear_hidden_state();\r\n\t\t\tthis._filter_elements = {};\r\n\t\t\tif (columns)\r\n\t\t\t\tthis._rightSplit = columns.length - (this.config.rightSplit || 0);\r\n\t\t}\r\n\r\n\t\tthis._columns_pull = {};\r\n\t\t//clear rendered data\r\n\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\tvar col = this._columns[i];\r\n\t\t\tthis._columns_pull[col.id] = col;\r\n\t\t\tcol.attached = col.node = null;\r\n\t\t}\r\n\t\tfor (let i=0; i<3; i++){\r\n\t\t\tthis._header.childNodes[i].innerHTML = \"\";\r\n\t\t\tthis._body.childNodes[i].firstChild.innerHTML = \"\";\r\n\t\t}\r\n\r\n\t\t//render new structure\r\n\t\tthis._columns = this.config.columns = (columns || this.config.columns);\r\n\t\tthis._rightSplit = this._columns.length-this._settings.rightSplit;\r\n\r\n\t\tthis._dtable_fully_ready = 0;\r\n\t\tthis._define_structure();\r\n\t\tthis._update_scroll();\r\n\r\n\t\tthis.callEvent(\"onStructureUpdate\");\r\n\r\n\t\tthis.render();\r\n\t\tthis._dtable_column_refresh = 0;\r\n\t},\r\n\t_refresh_columns:function(){\r\n\t\tthis._dtable_fully_ready = 0;\r\n\t\tthis.callEvent(\"onStructureUpdate\");\r\n\t\t\r\n\t\tthis._apply_headers();\r\n\t\tthis.render();\r\n\t},\r\n\tshowColumn:function(id, opts, silent){\r\n\t\treturn this.hideColumn(id, opts, silent, false);\r\n\t},\r\n\tshowColumnBatch:function(batch, mode){\r\n\t\tvar preserve = typeof mode != \"undefined\";\r\n\t\tmode = mode !== false;\r\n\r\n\t\tthis.eachColumn(function(id, col){\r\n\t\t\tif(col.batch){\r\n\t\t\t\tvar hidden = this._hidden_column_hash[col.id];\r\n\t\t\t\tif (!mode) hidden = !hidden;\r\n\r\n\t\t\t\tif(col.batch == batch && hidden)\r\n\t\t\t\t\tthis.hideColumn(col.id, { spans:true }, true,!mode);\r\n\t\t\t\telse if(!preserve && col.batch!=batch && !hidden)\r\n\t\t\t\t\tthis.hideColumn(col.id, { spans:true }, true, mode);\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tthis._refresh_columns();\r\n\t}\r\n};\r\n\r\nexport default Mixin;","import template from \"../../webix/template\";\r\nimport env from \"../../webix/env\";\r\nimport {assert} from \"../../webix/debug\";\r\nimport {bind} from \"../../webix/helpers\";\r\n\r\n\r\nconst Mixin = {\r\n\r\n\tmath_setter:function(value){\r\n\t\tif (value)\r\n\t\t\tthis._math_init();\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_math_pref: \"$\",\r\n\r\n\t_math_init: function() {\r\n\t\tif(env.strict) return;\r\n\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(this._parse_row_math, this));\r\n\t\tthis.data.attachEvent(\"onStoreLoad\", bind(this._parse_math, this));\r\n\t\tthis.attachEvent(\"onStructureLoad\", this._parse_math);\r\n\t},\r\n\t_parse_row_math:function(id, obj, action){\r\n\t\tif (!id || action==\"paint\") return;\r\n\t\t\r\n\t\tif (action == \"delete\"){\r\n\t\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\t\tthis._remove_old_triggers(obj,  this._columns[i].id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (action == \"add\")\r\n\t\t\t\tthis._exprs_by_columns(obj);\r\n\r\n\t\t\tfor (let i=0; i<this._columns.length; i++){\r\n\t\t\t\tthis._math_recalc = {};\r\n\t\t\t\tthis._parse_cell_math(id, this._columns[i].id);\r\n\t\t\t}\r\n\t\t\tthis._math_recalc = {};\r\n\t\t}\r\n\t},\r\n\t_parse_cell_math: function(row, col) {\r\n\t\tvar item = this.getItem(row);\r\n\t\tvar value;\r\n\r\n\t\t// use previosly saved formula if available\r\n\t\tvalue = item[this._math_pref + col] || item[col];\r\n\r\n\t\tif (value && value.length > 0 && value.toString().substr(0, 1) === \"=\") {\r\n\t\t\t// calculate math value\r\n\t\t\titem[this._math_pref + col] = value;\r\n\t\t\titem[col] = this._calculate(value, row, col);\r\n\t\t\t//this.updateItem(item);\r\n\t\t} else {\r\n\t\t\t// just a string\r\n\t\t\tif (typeof(item[this._math_pref + col]) !== \"undefined\")\r\n\t\t\t\tdelete item[this._math_pref + col];\r\n\t\t\t// remove triggers if they were setted earlier\r\n\t\t\tthis._remove_old_triggers(item, col);\r\n\t\t}\r\n\t\t// recalculate depending cells\r\n\t\tif (typeof(item.depends) !== \"undefined\" && typeof(item.depends[col]) !== \"undefined\") {\r\n\t\t\tfor (var i in item.depends[col]) {\r\n\t\t\t\tvar name = item.depends[col][i][0] + \"__\" + item.depends[col][i][1];\r\n\t\t\t\tif (typeof(this._math_recalc[name]) === \"undefined\") {\r\n\t\t\t\t\tthis._math_recalc[name] = true;\r\n\t\t\t\t\tthis._parse_cell_math(item.depends[col][i][0], item.depends[col][i][1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_set_original_value: function(row, col) {\r\n\t\tvar item = this.getItem(row);\r\n\t\tif (typeof(item[this._math_pref + col]) !== \"undefined\")\r\n\t\t\titem[col] = item[this._math_pref + col];\r\n\t},\r\n\r\n\t_parse_math: function(){\r\n\t\tif (!this._columns || !this.count()) return;\r\n\t\t\r\n\t\tthis._exprs_by_columns();\r\n\r\n\t\tfor (var j = 0; j < this._columns.length; j++){\r\n\t\t\tvar col = this.columnId(j);\r\n\t\t\tthis.data.each(function(obj){\r\n\t\t\t\tthis._math_recalc = {};\r\n\t\t\t\tthis._parse_cell_math(obj.id, col);\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tthis._math_recalc = {};\r\n\t},\r\n\r\n\t_exprs_by_columns: function(row) {\r\n\t\tfor (var i = 0; i < this._columns.length; i++){\r\n\t\t\tif (this._columns[i].math) {\r\n\t\t\t\tvar col = this.columnId(i);\r\n\t\t\t\tvar math = \"=\" + this._columns[i].math;\r\n\t\t\t\tmath = math.replace(/\\$c/g, \"#$c#\");\r\n\t\t\t\tif (row){\r\n\t\t\t\t\trow[col] = this._parse_relative_expr(math, row.id, col);\r\n\t\t\t\t\tdelete row[this._math_pref+col];\r\n\t\t\t\t\tthis._remove_old_triggers(row, col);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.data.each(function(obj){\r\n\t\t\t\t\t\tobj[col] = this._parse_relative_expr(math, obj.id, col);\r\n\t\t\t\t\t\tdelete obj[this._math_pref+col];\r\n\t\t\t\t\t\tthis._remove_old_triggers(obj, col);\r\n\t\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_parse_relative_expr: function(expr, row, col) {\r\n\t\treturn (template(expr))({ \"$r\": row, \"$c\": col });\r\n\t},\r\n\r\n\t_get_calc_value: function(row, col) {\r\n\t\tvar item;\r\n\r\n\t\tif (this.exists(row))\r\n\t\t\titem = this.getItem(row);\r\n\t\telse\r\n\t\t\treturn \"#out_of_range\";\r\n\r\n\t\tvar value = item[this._math_pref + col] || item[col] || 0;\r\n\t\tvalue = value.toString();\r\n\t\tif (value.substring(0, 1) !== \"=\")\r\n\t\t\t// it's a string\r\n\t\t\treturn value;\r\n\t\telse {\r\n\t\t\t// TODO: check if value shouldn't be recalculated\r\n\t\t\t// and return value calculated earlier\r\n\r\n\t\t\t// calculate math expr value right now\r\n\t\t\tif (typeof(item[this._math_pref + col]) === \"undefined\")\r\n\t\t\t\titem[this._math_pref + col] = item[col];\r\n\t\t\titem[col] = this._calculate(value, row, col, true);\r\n\t\t\treturn item[col];\r\n\t\t}\r\n\t},\r\n\r\n\t_calculate: function(value, row, col, _inner_call) {\r\n\t\t// add coord in math trace to detect self-references\r\n\t\tif (_inner_call === true) {\r\n\t\t\tif (this._in_math_trace(row, col))\r\n\t\t\t\treturn \"#selfreference\";\r\n\t\t} else\r\n\t\t\tthis._start_math_trace();\r\n\t\tthis._to_math_trace(row, col);\r\n\r\n\t\tvar item = this.getItem(row);\r\n\t\tvalue = value.substring(1);\r\n\r\n\t\t// get operations list\r\n\t\tvar operations = this._get_operations(value);\r\n\t\tvar triggers = this._get_refs(value, row);\r\n\r\n\t\tif (operations) {\r\n\t\t\tvalue = this._replace_refs(value, triggers);\r\n\t\t\tvalue = this._parse_args(value, operations);\r\n\t\t} else {\r\n\t\t\tvalue = this._replace_refs(value, triggers, true);\r\n\t\t}\r\n\r\n\t\tvar exc = this._math_exception(value);\r\n\t\tif (exc !== false)\r\n\t\t\treturn exc;\r\n\r\n\t\t// remove from coord from trace when calculations were finished - it's important!\r\n\t\tthis._from_math_trace(row, col);\r\n\r\n\t\t// process triggers to know which cells should be recalculated when one was changed\r\n\t\tthis._remove_old_triggers(item, col);\r\n\t\tfor (var i = 0; i < triggers.length; i++) {\r\n\t\t\tthis._add_trigger([row, col], triggers[i]);\r\n\t\t}\r\n\t\texc = this._math_exception(value);\r\n\t\tif (exc !== false)\r\n\t\t\treturn exc;\r\n\r\n\t\t// there aren't any operations here. returns number or value of another cell\r\n\t\tif (!value) return value;\r\n\r\n\t\t// process mathematical expression and getting final result\r\n\t\tvalue = this._compute(value.replace(/\\$r/g, item.id));\r\n\t\texc = this._math_exception(value);\r\n\t\tif (exc !== false)\r\n\t\t\treturn exc;\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_get_operations: function(value) {\r\n\t\t// gettings operations list (+-*/)\r\n\t\tvar splitter = /(\\+|-|\\*|\\/)/g;\r\n\t\tvar operations = value.replace(/\\[[^)]*?\\]/g,\"\").match(splitter);\r\n\t\treturn operations;\r\n\t},\r\n\r\n\t/*! gets list of referencies in formula\r\n\t **/\r\n\t_get_refs: function(value, id) {\r\n\t\tvar reg = /\\[([^\\]]+),([^\\]]+)\\]/g;\r\n\t\tvar cells = value.match(reg);\r\n\t\tif (cells === null) cells = [];\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tvar tmp = cell;\r\n\t\t\tcell = cell.substr(1, cell.length - 2);\r\n\t\t\tcell = cell.split(\",\");\r\n\t\t\tcell[0] = this._trim(cell[0]);\r\n\t\t\tcell[1] = this._trim(cell[1]);\r\n\t\t\tif (cell[0].substr(0, 1) === \":\")\r\n\t\t\t\tcell[0] = this.getIdByIndex(cell[0].substr(1));\r\n\t\t\tif (cell[0] === \"$r\")\r\n\t\t\t\tcell[0] = id;\r\n\t\t\tif (cell[1].substr(0, 1) === \":\")\r\n\t\t\t\tcell[1] = this.columnId(cell[1].substr(1));\r\n\t\t\tcell[2] = tmp;\r\n\t\t\tcells[i] = cell;\r\n\t\t}\r\n\r\n\t\treturn cells;\r\n\t},\r\n\r\n\t// replace given list of references by their values\r\n\t_replace_refs: function(value, cells, clean) {\r\n\t\tvar dell = \"(\", delr = \")\";\r\n\t\tif (clean) dell = delr = \"\";\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tvar cell_value = this._get_calc_value(cell[0], cell[1]);\r\n\t\t\tif (isNaN(cell_value))\r\n\t\t\t\tcell_value = \"\\\"\"+cell_value+\"\\\"\";\r\n\t\t\tvalue = value.replace(cell[2], dell + cell_value + delr);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_parse_args: function(value, operations) {\r\n\t\tvar args = [];\r\n\t\tfor (let i = 0; i < operations.length; i++) {\r\n\t\t\tvar op = operations[i];\r\n\t\t\tvar temp = this._split_by(value, op);\r\n\t\t\targs.push(temp[0]);\r\n\t\t\tvalue = temp[1];\r\n\t\t}\r\n\t\targs.push(value);\r\n\r\n\t\t//var reg = /^(-?\\d|\\.|\\(|\\))+$/;\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\tvar arg = this._trim(args[i]);\r\n\t\t\t//\tif (reg.test(arg) === false)\r\n\t\t\t//\t\treturn ''; //error\r\n\t\t\targs[i] = arg;\r\n\t\t}\r\n\r\n\t\tvar expr = \"\";\r\n\t\tfor (let i = 0; i < args.length - 1; i++) {\r\n\t\t\texpr += args[i] + operations[i];\r\n\t\t}\r\n\t\texpr += args[args.length - 1];\r\n\t\treturn expr;\r\n\t},\r\n\r\n\t_compute: function(expr) {\r\n\t\tvar result;\r\n\t\ttry {\r\n\t\t\tresult = window.eval(expr);\r\n\t\t} catch(ex) {\r\n\t\t\tassert(false,\"Math error in datatable<br>\"+expr);\r\n\t\t\tresult = \"\";\r\n\t\t}\r\n\t\treturn result.toString();\r\n\t},\r\n\r\n\t_split_by: function(value, splitter) {\r\n\t\tvar pos = value.indexOf(splitter);\r\n\t\tvar before = value.substr(0, pos);\r\n\t\tvar after = value.substr(pos + 1);\r\n\t\treturn [before, after];\r\n\t},\r\n\r\n\t_trim: function(value) {\r\n\t\tvalue = value.replace(/^ */g, \"\");\r\n\t\tvalue = value.replace(/ *$/g, \"\");\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_start_math_trace: function() {\r\n\t\tthis._math_trace = [];\r\n\t},\r\n\t_to_math_trace: function(row, col) {\r\n\t\tthis._math_trace[row + \"__\" + col] = true;\r\n\t},\r\n\t_from_math_trace: function(row, col) {\r\n\t\tif (typeof(this._math_trace[row + \"__\" + col]) !== \"undefined\")\r\n\t\t\tdelete this._math_trace[row + \"__\" + col];\r\n\t},\r\n\t_in_math_trace: function(row, col) {\r\n\t\tif (typeof(this._math_trace[row + \"__\" + col]) !== \"undefined\")\r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\r\n\t},\r\n\r\n\t_add_trigger: function(depends, from) {\r\n\t\tvar item = this.getItem(from[0]);\r\n\t\tif (typeof(item.depends) === \"undefined\")\r\n\t\t\titem.depends = {};\r\n\t\tif (typeof(item.depends[from[1]]) === \"undefined\")\r\n\t\t\titem.depends[from[1]] = {};\r\n\t\titem.depends[from[1]][depends[0] + \"__\" + depends[1]] = depends;\r\n\r\n\t\titem = this.getItem(depends[0]);\r\n\t\tif (typeof(item.triggers) === \"undefined\")\r\n\t\t\titem.triggers = {};\r\n\t\tif (typeof(item.triggers[depends[1]]) === \"undefined\")\r\n\t\t\titem.triggers[depends[1]] = {};\r\n\t\titem.triggers[depends[1]][from[0] + \"__\" + from[1]] = from;\r\n\t},\r\n\r\n\t_remove_old_triggers: function(item, col) {\r\n\t\tif (!item) return;\r\n\t\tif (typeof(item.triggers) === \"undefined\") return;\r\n\t\tfor (var i in item.triggers[col]) {\r\n\t\t\tvar depend = item.triggers[col][i];\r\n\t\t\tvar row = this.getItem(depend[0]);\r\n\t\t\tif (row)\r\n\t\t\t\tdelete row.depends[depend[1]][item.id + \"__\" + col];\r\n\t\t}\r\n\t},\r\n\r\n\t// check if exception syntax exists and returns exception text or false\r\n\t_math_exception: function(value) {\r\n\t\tvar reg = /#\\w+/;\r\n\t\tvar match = value.match(reg);\r\n\t\tif (match !== null && match.length > 0)\r\n\t\t\treturn match[0];\r\n\t\treturn false;\r\n\t}\r\n\r\n};\r\n\r\nexport default Mixin;","const temp = {}; export default temp;","import {getTextSize, create, remove} from \"../../webix/html\";\r\nimport {$active} from \"../../webix/skin\";\r\nimport env from \"../../webix/env\";\r\nimport {bind} from \"../../webix/helpers\";\r\n\r\n\r\nconst Mixin = {\r\n\t$init:function(){\r\n\t\tthis.data.attachEvent(\"onStoreUpdated\", bind(function(id){\r\n\t\t\tif (!id) this._adjustColumns();\r\n\t\t}, this));\r\n\t\tthis.attachEvent(\"onStructureLoad\", this._adjustColumns);\r\n\r\n\t\tthis.attachEvent(\"onStructureUpdate\", this._resizeColumns);\r\n\t\tthis.attachEvent(\"onColumnResize\", function(a,b,c,user){\r\n\t\t\tif (user)\r\n\t\t\t\tthis._resizeColumns();\r\n\t\t});\r\n\t\tthis.attachEvent(\"onResize\", this._resizeColumns);\r\n\t},\r\n\t_adjustColumns:function(){\r\n\t\tvar resize = false;\r\n\t\tvar cols = this._columns;\r\n\t\tfor (var i = 0; i < cols.length; i++)\r\n\t\t\tif (cols[i].adjust && ( cols[i].adjust ==\"header\" || this.count() ))\r\n\t\t\t\tresize = this._adjustColumn(i, cols[i].adjust, true) || resize;\r\n\r\n\t\tif (resize){\r\n\t\t\tthis._updateColsSizeSettings(true);\r\n\t\t\tthis._resizeColumns();\r\n\t\t}\r\n\t},\r\n\t_resizeColumns:function(){\r\n\t\tvar cols = this._settings.columns;\r\n\t\tvar fill = [];\r\n\t\tvar summ = 0;\r\n\r\n\t\tif (cols && !this._settings.autowidth)\r\n\t\t\tfor (var i = 0; i < cols.length; i++){\r\n\t\t\t\tvar colfil = cols[i].fillspace;\r\n\t\t\t\tif (colfil){\r\n\t\t\t\t\tfill[i] = colfil;\r\n\t\t\t\t\tsumm += colfil*1 || 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\tif (summ)\r\n\t\t\tthis._fillColumnSize(fill, summ);\r\n\t},\r\n\t_fillColumnSize:function(fill, summ){\r\n\t\tvar cols = this._settings.columns;\r\n\t\tif (!cols) return;\r\n\r\n\t\tvar width = this._content_width - this._scrollSizeY;\r\n\t\tvar resize = false;\r\n\r\n\t\tif (width>0){\r\n\t\t\tfor (let i=0; i<cols.length; i++)\r\n\t\t\t\tif (!fill[i]) width -= (cols[i].width || this._settings.columnWidth);\r\n\r\n\t\t\tfor (let i = 0; i < fill.length; i++)\r\n\t\t\t\tif (fill[i]){\r\n\t\t\t\t\tvar request = Math.min(width, Math.round(width * fill[i]/summ));\r\n\t\t\t\t\tresize = this._setColumnWidth(i, request, true) || resize;\r\n\t\t\t\t\twidth = width - cols[i].width;\r\n\t\t\t\t\tsumm = summ - fill[i];\r\n\t\t\t\t}\r\n\r\n\t\t\tif (resize) \r\n\t\t\t\tthis._updateColsSizeSettings(true);\r\n\t\t}\r\n\t},\r\n\t_getColumnConfigSize:function(ind, headers){\r\n\t\tvar config = this._settings.columns[ind];\r\n\t\tvar max = config.minWidth || this._settings.minColumnWidth;\r\n\r\n\t\t//get max data width\r\n\t\tif (headers != \"header\"){\r\n\t\t\tvar count = this.data.order.length;\r\n\t\t\tif (config.adjustBatch && config.adjustBatch < count)\r\n\t\t\t\tcount = config.adjustBatch;\r\n\t\t\tvar order = this.data.order.slice(0, count);\r\n\r\n\t\t\tfor (let i = 0; i < count; i++)\r\n\t\t\t\torder[i] = order[i] ? this._getValue(this.getItem(order[i]), config, 0) : \"\";\r\n\t\t\tmax = Math.max(max, getTextSize(order, \"webix_table_cell webix_cell\").width);\r\n\t\t}\r\n\r\n\t\t//get max header width\r\n\t\tif (headers != \"data\"){\r\n\t\t\tfor (let i=0; i<config.header.length; i++){\r\n\t\t\t\tvar header = config.header[i];\r\n\t\t\t\tif (header){\r\n\t\t\t\t\tvar width = 0;\r\n\t\t\t\t\tif(header.rotate)\r\n\t\t\t\t\t\tfor(var h = 0; h<(header.rowspan || 1); h++)\r\n\t\t\t\t\t\t\twidth += this._headers[h];\r\n\t\t\t\t\tvar css = \"webix_table_cell webix_cell \"+(header.css||\"\") + (header.rotate?\"webix_measure_rotate\":\"\");\r\n\t\t\t\t\tvar size = getTextSize([header.text], css, width);\r\n\t\t\t\t\tmax = Math.max(max, header.rotate?size.height:size.width);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (config.sort) max += 10;  // add 10px for sort marker\r\n\t\t}\r\n\r\n\t\tmax = max+(env.isIE?$active.layoutPadding.space:0);\r\n\r\n\t\treturn Math.min(max, config.maxWidth||this._settings.maxColumnWidth||100000);\r\n\t},\r\n\t_adjustColumn:function(ind, headers, ignore){\r\n\t\tif (ind >= 0){\r\n\t\t\tvar width = this._getColumnConfigSize(ind, headers);\r\n\t\t\treturn this._setColumnWidth(ind, width, ignore);\r\n\t\t}\r\n\t},\r\n\tadjustColumn:function(id, headers){\r\n\t\tthis._adjustColumn(this.getColumnIndex(id), headers);\r\n\t},\r\n\tadjustRowHeight:function(id, silent){\r\n\t\tif (id)\r\n\t\t\tthis._adjustRowHeight(id);\r\n\t\telse {\r\n\t\t\tconst heights = {};\r\n\t\t\tconst cols = this._settings.columns;\r\n\r\n\t\t\tfor (let i = 0; i < cols.length; i++)\r\n\t\t\t\tthis._adjustRowHeight(cols[i].id, heights);\t\t\t//adjust size for single columns\r\n\r\n\t\t\tthis.data.each(function(obj){\r\n\t\t\t\tobj.$height = heights[obj.id];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (!silent)\r\n\t\t\tthis.refresh();\r\n\t},\r\n\t_adjustRowHeight:function(id, size){\r\n\t\tconst config = this.getColumnConfig(id);\r\n\t\tlet container;\r\n\t\tlet d = create(\"DIV\",{\"class\":\"webix_table_cell webix_measure_size webix_cell\"},\"\");\r\n\t\td.style.cssText = \"width:\"+config.width+\"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;\";\r\n\t\tthis.$view.appendChild(d);\r\n\r\n\t\tif (d.offsetHeight < 1){\r\n\t\t\t//hidden container, height detection is broken\r\n\t\t\t//reattach to the body\r\n\t\t\tcontainer = this.$view.cloneNode(true);\r\n\t\t\tdocument.body.appendChild(container);\r\n\t\t\tcontainer.appendChild(d);\r\n\t\t}\r\n\r\n\t\tthis.data.each(function(obj){\r\n\t\t\tlet height;\r\n\r\n\t\t\td.innerHTML = this._getValue(obj, config, 0);\r\n\t\t\theight = Math.max(d.scrollHeight, this._settings.rowHeight, this._settings.minRowHeight||0);\r\n\t\t\theight = Math.min(height, this._settings.maxRowHeight||100000);\r\n\r\n\t\t\tif (size)\r\n\t\t\t\tsize[obj.id] = Math.max(height, size[obj.id]||0);\r\n\t\t\telse obj.$height = height;\r\n\t\t}, this);\r\n\r\n\t\td = remove(d);\r\n\t\tif (container)\r\n\t\t\tremove(container);\r\n\t}\r\n};\r\n\r\nexport default Mixin;","const temp = {}; export default temp;","const temp = {}; export default temp;","const temp = {}; export default temp;","import datatable from \"../views/datatable\";\r\nimport TreeAPI from \"../core/treeapi\";\r\nimport TreeStateCheckbox from \"../core/treestatecheckbox\";\r\nimport TreeDataLoader from \"../core/treedataloader\";\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../webix/template\";\r\nimport {extend} from \"../webix/helpers\";\r\nimport TreeStore from \"../core/treestore\";\r\nimport TreeType from \"../core/treetype\";\r\nimport TreeDataMove from \"../core/treedatamove\";\r\nimport TreeClick from \"../core/treeclick\";\r\nimport DataState from \"../core/datastate\";\r\nimport TreeTablePaste from \"../core/treetablepaste\";\r\nimport TablePaste from \"../core/tablepaste\";\r\n\r\n\r\nconst api = {\r\n\tname:\"treetable\",\r\n\t$init:function(){\r\n\t\textend(this.data, TreeStore, true);\r\n\t\textend(this.type, TreeType);\r\n\t\textend(this,  TreeDataMove, true);\r\n\r\n\t\tfor (var key in TreeClick)\r\n\t\t\tif (!this.on_click[key])\r\n\t\t\t\tthis.on_click[key] = this._unwrap_id(TreeClick[key]);\r\n\t\t\r\n\t\tthis.type.treetable = template(\"{common.space()}{common.icon()} {common.folder()}\");\r\n\t\tthis.type.treecheckbox = function(obj){\r\n\t\t\tif (obj.indeterminate && !obj.nocheckbox)\r\n\t\t\t\treturn \"<div class='webix_tree_checkbox webix_indeterminate'></div>\";\r\n\t\t\telse\r\n\t\t\t\treturn TreeType.checkbox.apply(this, arguments);\r\n\t\t};\r\n\t\r\n\t\tthis.data.provideApi(this,true);\r\n\r\n\t\tthis._viewobj.setAttribute(\"role\", \"treegrid\");\r\n\r\n\t},\r\n\t_drag_order_complex:false,\r\n\t_unwrap_id:function(original){\r\n\t\treturn function (e,id){\r\n\t\t\tid = id.row;\r\n\t\t\treturn original.call(this,e,id);\r\n\t\t};\r\n\t},\r\n\t_close_branches:function(context){\r\n\t\tlet source = !this._settings.prerender ? [context.start] : context.source;\r\n\t\tfor (let i=0; i<source.length; i++)\r\n\t\t\tthis.close(source[i]);\r\n\t},\r\n\tgetState:function(){\r\n\t\tvar state = DataState.getState.call(this);\r\n\t\textend(state, TreeAPI.getState.call(this));\r\n\t\treturn state;\r\n\t},\r\n\tsetState:function(state){\r\n\t\tif (TreeAPI.setState.call(this, state)){\r\n\t\t\t//run grid-state only when tree component was fully loaded \r\n\t\t\tDataState.setState.call(this, state);\t\r\n\t\t}\r\n\t},\r\n\tclipboard_setter: function(value) {\r\n\t\textend(this._paste, TreeTablePaste);\r\n\t\treturn TablePaste.clipboard_setter.call(this, value);\r\n\t},\r\n\t_run_load_next:function(conf, direction){\r\n\t\tfor (var i=0; i<conf.start; i++){\r\n\t\t\tvar id = this.data.order[i];\r\n\t\t\tif (id && this.getItem(id).$level != 1)\r\n\t\t\t\tconf.start--;\r\n\t\t}\r\n\t\treturn datatable.api._run_load_next.call(this, conf, direction);\r\n\t},\r\n};\r\n\r\n\r\nconst view = protoUI(api,  TreeAPI, TreeStateCheckbox, TreeDataLoader, datatable.view);\r\nexport default {api, view};","\r\nimport {protoUI} from \"../ui/core\";\r\nimport template from \"../views/template\";\r\n\r\nprotoUI({ name:\"filter\", defaults:{\r\n\ttemplate:\"GPL version doesn't support filter <br> You need Webix PRO\"\r\n}}, template.view);","import EventSystem from \"../core/eventsystem\";\r\nimport BaseBind from \"../core/basebind\";\r\nimport AtomDataLoader from \"../core/atomdataloader\";\r\nimport Settings from \"../core/settings\";\r\nimport {uid, extend} from \"../webix/helpers\";\r\nimport {proto, ui} from \"../ui/core\";\r\n\r\n\r\nconst DataRecord = proto({\r\n\tname:\"DataRecord\",\r\n\tisVisible:function(){ return true; },\r\n\t$init:function(config){\r\n\t\tthis.data = config||{}; \r\n\t\tvar id = (config&&config.id)?config.id:uid();\r\n\t\tthis._settings = { id:id };\r\n\t\tui.views[id] = this;\r\n\t},\r\n\tgetValues:function(){\r\n\t\treturn this.data;\r\n\t},\r\n\tsetValues:function(data, update){\r\n\t\tthis.data = update?extend(this.data, data, true):data;\r\n\t\tthis.callEvent(\"onChange\", [data]);\r\n\t},\r\n\trefresh:function(){ this.callEvent(\"onBindRequest\"); }\r\n}, EventSystem, BaseBind, AtomDataLoader, Settings);\r\n\r\n\r\nexport default DataRecord;","import EventSystem from \"../core/eventsystem\";\r\nimport BaseBind from \"../core/basebind\";\r\nimport {isUndefined, uid} from \"../webix/helpers\";\r\nimport {proto, ui} from \"../ui/core\";\r\n\r\n\r\nconst DataValue = proto({\r\n\tname:\"DataValue\",\r\n\tisVisible:function(){ return true; },\r\n\t$init:function(config){ \r\n\t\tif (!config || isUndefined(config.value))\r\n\t\t\tthis.data = config||\"\";\r\n\r\n\t\tvar id = (config&&config.id)?config.id:uid();\r\n\t\tthis._settings = { id:id };\r\n\t\tui.views[id] = this;\r\n\t},\r\n\tsetValue:function(value){\r\n\t\tthis.data = value;\r\n\t\tthis.callEvent(\"onChange\", [value]);\r\n\t},\r\n\tgetValue:function(){\r\n\t\treturn this.data;\r\n\t},\r\n\trefresh:function(){ this.callEvent(\"onBindRequest\"); }\r\n}, EventSystem, BaseBind);\r\n\r\n\r\nexport default DataValue;","import {extend} from \"../webix/helpers\";\r\nimport {proto} from \"../ui/core\";\r\n\r\nimport TreeDataLoader from \"../core/treedataloader\";\r\nimport DataCollection from \"../core/datacollection\";\r\nimport TreeStore from \"../core/treestore\";\r\nimport TreeDataMove from \"../core/treedatamove\";\r\n\r\n\r\nconst TreeCollection = proto({\r\n\tname:\"TreeCollection\",\r\n\t$init:function(){\r\n\t\textend(this.data, TreeStore, true);\r\n\t\tthis.data.provideApi(this,true);\r\n\t\textend(this, TreeDataMove, true);\r\n\t}\r\n}, TreeDataLoader, DataCollection);\r\n\r\n\r\nexport default TreeCollection;","import {callEvent} from \"./customevents\";\r\n\r\nexport function editStop(){\r\n\tcallEvent(\"onEditEnd\", []);\r\n}\r\n","const filters = {\r\n\tnumber:{\r\n\t\tgreater: function(a, b){ return a > b; },\r\n\t\tless: function(a, b){ return a < b; },\r\n\t\tgreaterOrEqual: function(a, b){ return a >= b; },\r\n\t\tlessOrEqual: function(a, b){ return a <= b; },\r\n\t\tequal: function(a, b){ return a == b; },\r\n\t\tnotEqual: function(a, b){ return a != b; },\r\n\r\n\t\tcontains: function(a, b){ return a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1; },\r\n\t\tnotContains: function(a, b){ return a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1; }\r\n\t},\r\n\ttext:{\r\n\t\tequal: function(a, b){ return a.toLowerCase() === b.toLowerCase(); },\r\n\t\tnotEqual: function(a, b){ return a.toLowerCase() !== b.toLowerCase(); },\r\n\t\tcontains: function(a, b){ return a.toLowerCase().indexOf(b.toLowerCase()) !== -1; },\r\n\t\tnotContains: function(a, b){ return a.toLowerCase().indexOf(b.toLowerCase()) === -1; },\r\n\r\n\t\tbeginsWith: function(a, b){ return a.toLowerCase().lastIndexOf(b.toLowerCase(), 0) === 0; },\r\n\t\tnotBeginsWith: function(a, b){ return a.toLowerCase().lastIndexOf(b.toLowerCase(), 0) !== 0; },\r\n\t\tendsWith: function(a, b){ return a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1; },\r\n\t\tnotEndsWith: function(a, b){ return a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1; }\r\n\t},\r\n\tdate:{\r\n\t\tgreater: function(a, b){ return a > b; },\r\n\t\tless: function(a, b){ return a < b; },\r\n\t\tgreaterOrEqual: function(a, b){ return a >= b; },\r\n\t\tlessOrEqual: function(a, b){ return a <= b; },\r\n\t\tequal: function(a, b){\r\n\t\t\tif (!a || !b) return false;\r\n\t\t\treturn a.valueOf() === b.valueOf();\r\n\t\t},\r\n\t\tnotEqual: function(a, b){\r\n\t\t\tif (!a || !b) return true;\r\n\t\t\treturn a.valueOf() !== b.valueOf();\r\n\t\t},\r\n\t\tbetween: function(a, b){ return (!b.start || a > b.start) && (!b.end || a < b.end); },\r\n\t\tnotBetween: function(a, b){ return (!b.start || a <= b.start) || (!b.end || a >= b.end); }\r\n\t}\r\n};\r\n\r\nexport default filters;","export const version=\"VERSION\";\r\nexport const name = \"core\";","import {create} from \"../webix/html\";\r\n\r\n/*submits values*/\r\nexport default function send(url, values, method, target){\r\n\tvar form = create(\"FORM\",{\r\n\t\t\"target\":(target||\"_self\"),\r\n\t\t\"action\":url,\r\n\t\t\"method\":(method||\"POST\")\r\n\t},\"\");\r\n\tfor (var k in values) {\r\n\t\tvar field = create(\"INPUT\",{\"type\":\"hidden\",\"name\": k,\"value\": values[k]},\"\");\r\n\t\tform.appendChild(field);\r\n\t}\r\n\tform.style.display = \"none\";\r\n\tdocument.body.appendChild(form);\r\n\tform.submit();\r\n\tdocument.body.removeChild(form);\r\n}","import {errorMessage, getExportScheme, getExportData} from \"./common\";\r\n\r\nimport csv from \"../../webix/csv\";\r\nimport promise from \"../../thirdparty/promiz\";\r\n\r\nimport {download} from \"../../webix/html\";\r\nimport {$$} from \"../../ui/core\";\r\nimport {assert} from \"../../webix/debug\";\r\n\r\nexport const toCSV = function(id, options){\r\n\toptions = options || {};\r\n\r\n\tvar view = $$(id);\r\n\tif (view && view.$exportView)\r\n\t\tview = view.$exportView(options);\r\n\tassert(view, errorMessage);\r\n\tif(!view) return promise.reject(errorMessage);\r\n\r\n\toptions.export_mode = \"csv\";\r\n\toptions.filterHTML = true;\r\n\r\n\tvar scheme = getExportScheme(view, options);\r\n\tvar result = getExportData(view, options, scheme);\r\n\r\n\tvar data = getCsvData(result, scheme);\r\n\tvar filename =  (options.filename || \"Data\")+\".csv\";\r\n\r\n\tvar blob = new Blob([\"\\uFEFF\" + data], { type: \"text/csv\" });\r\n\tif(options.download !== false)\r\n\t\tdownload(blob, filename);\r\n\r\n\treturn promise.resolve(blob);\r\n};\r\n\r\nfunction getCsvData(data) {\r\n\treturn csv.stringify(data);\r\n}","import {errorMessage} from \"./common\";\r\n\r\nimport promise from \"../../thirdparty/promiz\";\r\nimport require from \"../../load/require\";\r\nimport env from \"../../webix/env\";\r\n\r\nimport {assert} from \"../../webix/debug\";\r\nimport {toNode} from \"../../webix/helpers\";\r\nimport {download} from \"../../webix/html\";\r\nimport {$$} from \"../../ui/core\";\r\n\r\nexport const toPNG = function(id, options){\r\n\tvar defer = promise.defer();\r\n\r\n\treturn require(env.cdn + \"/extras/html2canvas-1.0.min.js\").then(function(){\r\n\t\t//backward compatibility\r\n\t\tif (typeof options === \"string\") options = { filename: options };\r\n\t\toptions = options || {};\r\n\r\n\t\tvar view = $$(id);\r\n\t\tif (view && view.$exportView)\r\n\t\t\tview = view.$exportView(options);\r\n\t\tassert(view, errorMessage);\r\n\t\tif(!view) return defer.reject(errorMessage);\r\n\r\n\t\tvar node = view ? view.$view : toNode(id);\r\n\t\tvar filename = (options.filename||\"Data\")+\".png\";\r\n\r\n\t\twindow.html2canvas(node, {background:\"#fff\", logging:false, useCORS:true}).then(function(canvas) {\r\n\t\t\tvar callback = function(data){\r\n\t\t\t\tif(options.download !== false)\r\n\t\t\t\t\tdownload(data, filename);\r\n\t\t\t\tdefer.resolve(data);\r\n\t\t\t};\r\n\t\t\tif(canvas.msToBlob)\r\n\t\t\t\tcallback(canvas.msToBlob());\r\n\t\t\telse\r\n\t\t\t\tcanvas.toBlob(callback, \"image/png\");\r\n\t\t});\r\n\t\treturn defer;\r\n\t});\r\n};"],"names":["global","window","queueId","queue","isRunningTask","nextTick","fn","setImmediate","importScripts","addEventListener","setTimeout","postMessage","Deferred","resolver","undefined","TypeError","this","then","er","self","state","val","next","v","fire","_fn","_er","_d","d","resolve","reject","push","_handler","handler","value","_value","finish","type","i","length","p","e","thennable","ref","cb","ec","cn","cnt","call","source","data","all","arr","Array","done","reduce","map","r","race","defer","services","define","name","debug_mode","clone","f","_function","prototype","extend","base","force","$protoWait","_power_array","insertAt","method","defaults","$init","copy","target","esModern","Map","Set","WeakMap","WeakSet","arguments","isArray","from","RegExp","isDate","Date","bind","functor","object","apply","exec","code","execScript","eval","isUndefined","a","delay","obj","params","$destructed","ret","once","flag","_seed","valueOf","uid","toNode","node","document","getElementById","toFunctor","str","scope","replace","Object","toString","_to_array","array","removeAt","pos","len","splice","remove","find","each","master","filter","i18n","parseFormat","parseTimeFormat","stringify","result","origin","toJSON","parseFormatStr","JSON","EventSystem","_evs_events","_evs_handlers","_evs_map","blockEvent","_block","unblockEvent","mapEvent","on_setter","config","$scope","sub","indexOf","substr","attachEvent","callEvent","_event_master","toLowerCase","event_stack","return_value","$eventSource","id","unshift","t","detachEvent","hasEvent","stack","parent","evs","b","c","xml","_isValidXML","documentElement","getElementsByTagName","toObject","text","response","rawxml","fromString","getRecords","xpath","records","child","getDetails","tagToObject","getOptions","getInfo","assignTypes","size","getAttribute","path","XPathResult","nodeName","ownerDocument","res","col","evaluate","ANY_TYPE","temp","iterateNext","test","selectNodes","split","pop","k","tag","z","hasSubTags","nodeType","childNodes","attributes","tagName","nodeValue","firstChild","wholeText","xmlString","DOMParser","parseFromString","ActiveXObject","loadXML","json","isodate","parseDates","parse","key","collections","total_count","ajax","url","get","getXHR","count","XMLHttpRequest","_send","mode","success","error","promise","x","headers","_header","json_mode","found","FormData","encodeURIComponent","join","open","_sync","_response","responseType","setRequestHeader","onreadystatechange","is_error","readyState","status","responseText","_data","$callback","_timeout","timeout","send","responseXML","post","put","del","patch","sync","num","header","owner","proxy","$proxy","load","parts","ext","options","dataurl","save","u","console","log","operation","newid","processResult","view","update","_save_logic","query","mark","charAt","xhr","rest","GraphQL","variables","lkey","unbox","extra","makeCopy","init","$parse","binary","debug","graphql","jsarray","idColumn","html","createElement","innerHTML","env","strict","webix_strict","https","location","protocol","agent","navigator","userAgent","isMac","mobile","touch","platform","maxTouchPoints","isOpera","isIE","parseFloat","appVersion","isIE8","isEdge","isFF","isWebKit","isSafari","maxHTMLElementSize","isAndroid","isIEMobile","transform","transition","jp","found_index","js_list","j","style","cssPrefix","jsPrefix","transitionDuration","translate","transitionEnd","pointerevents","passiveEventListeners","opts","defineProperty","removeEventListener","svg","implementation","hasFeature","svganimation","_native_on_selectstart","_style_element","_style_cache","denySelect","onselectstart","stopEvent","allowSelect","index","previousSibling","createCss","rule","sufix","addStyle","group","setAttribute","appendChild","styleSheet","cssText","createTextNode","removeStyle","box","create","attrs","attr_name","className","getValue","parentNode","removeChild","insertBefore","before","rescue","locate","trg","event","offset","elem","getBoundingClientRect","body","docElem","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","top","left","y","Math","round","width","offsetWidth","height","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","posRelative","ev","offsetX","layerX","layerY","offsetY","touches","pageX","pageY","compatMode","clientX","clientY","preventEvent","preventDefault","returnValue","stopPropagation","cancelBubble","triggerEvent","createEventObject","fireEvent","createEvent","initEvent","dispatchEvent","addCss","check","removeCss","getTextSize","css","basewidth","max","download","filename","objUrl","msSaveBlob","URL","createObjectURL","link","href","click","revokeObjectURL","_getClassName","baseVal","setSelectionRange","start","end","textRange","focus","createTextRange","collapse","moveEnd","moveStart","select","getSelectionRange","selectionStart","selectionEnd","bookmark","selection","createRange","getBookmark","moveToBookmark","addMeta","item","content","htmltable","tr","rows","new_data","_webix_skip","td","getConfig","columns","_de_json","_get_attrs","el","attr","hash","_modules","require","module","callback","Promise","disabled","callback2","file","fullpath","newScript","onerror","calls","onload","rel","src","escapeChar","chr","escape","excel","_urlToOptions","reader","FileReader","parseData","readAsArrayBuffer","Uint8Array","String","fromCharCode","cdn","wb","XLS","read","cellStyles","cellDates","XLSX","sheets","Sheets","names","SheetNames","ranges","Workbook","Names","getSheet","sheetToArray","min","sheet","spans","styles","sizes","types","cellTypes","n","s","range","utils","decode_range","xCorrection","yCorrection","row","ncell","cell","nrow","encode_cell","math","dateFormatStr","merges","widths","wch","heights","hpx","details","DataDriver","csv","stringToArray","silentErrorMarker","AtomDataLoader","waitData","_settings","datatype","$ready","_load_when_ready","_ready_for_data","url_setter","data_setter","_fetch","_this","_onLoad","_onLoadError","driver","gen","_data_generation","_this2","generation","_syncData","_call_onready","_parse","record","parsed","setValues","_onLoadContinue","$onLoad","_this3","xhttp","_check_data_feed","dataFeed","_ignore_feed","loader","CodeParser","collapseNames","prefix","prop","expandNames","lastIndex","_cache","_csp_cache","newlines","quotes","slashes","badChars","template","teststr","temp_res","search","s1","s2","s3","_","common","sort","lastPos","addStr","n0","n1","slice","helpers","Function","empty","AtomRender","_toHTML","$empty","render","cfg","isVisible","_dataobj","_backbone_sync","refresh","pull","template_setter","AutoScroll","_auto_scroll","yScroll","xScroll","dragscroll","layout","_body","$view","sense","rowHeight","isNaN","reset","_auto_y_scroll","_auto_x_scroll","_auto_scroll_delay","_auto_scroll_column","headerRowHeight","topSplitPos","bottom","scroll","getScrollState","topSplit","_cellPosition","getIdByIndex","columnId","_auto_scrollTo","right","scrollTo","_events","_events_final_destructor","eventRemove","_event","inner","context","info","capture","passive","_webix_type_wait","baseType","codebase","top_views","_global_scope","_global_collection","_child_sizing_active","_responsive_exception","_responsive_tinkery","_freeze_resize","_parent_cell","_focus_time","_ui_creation","_edit_open_time","_final_destruction","destructors","_noselect_element","_modality","_popups","_wait_animate","views","ui","top_node","multiset","container","getChildViews","_body_cell","_deleteIds","$$","_correctId","moving","body_child","$topView","_inner","getParentView","_view","setPosition","$apiOnly","use","_hidden","_container","_appendDom","destructor","_replace","_remove","_ui_creator","_viewobj","fullscreen","position","_destructor_handler","skipResize","adjust","uis","current","_destroy_with_me","cols","cells","accordion","align","headerlayout","multiview","spacer","protoUI","selfname","origins","proto","compilation","has_constructor","construct","def","$skin","_parseSettings","element","touchable","applyChanges","getNode","_focus_action","on_click","popup","readonly","show","getInputNode","TooltipControl","_tooltip_masters","_tooltip_exist","addTooltip","ctrl","Element","webix_tooltip","_tooltip","tooltip","_webix_tooltip_mm","_move_tooltip","_webix_tooltip_ml","_hide_tooltip","_drag_event","_click_event","getTooltip","_last","$tooltipOut","$tooltipIn","$tooltipMove","parentElement","clearTimeout","_before_show_delay","hide","getMaster","removeTooltip","tip","m","dx","dy","getPos","_uid","_namecount","freeze","trigger","any","resize","_force_resize","_each","logic","include","children","zIndex","zIndexBase","ready","_ready","_ready_code","doit","webix_ready","concat","set","exit","$html","_pos","_setPosition","viewConfig","_fullscreen","head","_getHeadConfig","borderless","_sizes","minWidth","maxWidth","minHeight","maxHeight","_parent","active","getActiveId","replaceChild","getBody","addView","_setSizes","_set_inner","_cells","close","_clearValues","restore","oldStyles","forEach","icon","UIManager","_hotkeys","_tab_time","_mouse_time","_controls","_inputs","_enable","_keypress","_focus_click","_focus_tab","getFocus","_focus_was_there","setFocus","only_api","tab","blur","_applyChanges","hasFocus","_focus","canFocus","contains","_top_modal","queryView","isEnabled","_moveChildFocus","check_view","_is_child_of","_focus_logic","_keypress_timed","which","keyCode","_key_press_timeout","keyPressTimeout","_check_keycode","dir","marker","$fmarker","activeElement","_tab_logic","shiftKey","_custom_tab_handler","_in_edit_mode","editNext","editStop","getTop","getNext","_inner_call","p_cells","getPrev","addHotKey","keys","_parse_keys","removeHotKey","func","_keycode","shift","alt","meta","is_any","ctrlKey","altKey","metaKey","_process_calls","temp_result","controls","letter","getState","gravity","collapsed","activeCell","setState","states","setValue","form","getFormView","_skipSubmit","editCancel","getTopParentView","_hide","Settings","property","_parseSeetingColl","_define","setter","coll","initial","settings","_mergeSettings","Destruction","_last_editor","$id","_destroy_child","_htmlmap","_htmlrows","_html","_contentobj","unbind","release","CollectionBind","_cursor","sel","getSelectedId","setCursor","_update_binds","getCursor","oldid","refreshCursor","getItem","_bind_update","format","getBranch","importData","defaultData","_bind_update_common","ValueBind","pod","silent","RecordBind","getValues","BindSource","_bind_hash","_bind_updated","_ignore_binds","_bind_specific_rules","saveBatch","_do_not_update_binds","setBindData","updateItem","add","getBindData","addBind","removeBind","clear","BaseBind","_initBindSource","_bind_ready","_bind_source","_bind_id","_bind_refresh_handler","_on_sync","old_render","_in_bind_processing","validate","values","setDirty","UIExtension","webix_view","api","$setNode","_recollect_elements","confirm","results","direction","_queryGoUp","_queryGoDown","_queryView","kids","base_id","hidden","_hidden_render","_hidden_hash","_disable_cover","disable","enable","removeAttribute","disabled_setter","container_setter","css_setter","id_setter","oldvalue","_prev_global_col","_elements","_translate_ids","$setSize","last","_last_size","$width","_content_width","_scroll_y","scrollSize","$height","_content_height","_scroll_x","flex","$getSize","animate_settings","animate","_show","_render_hidden_views","_signal_hidden_cells","ui_to_render","_onKeyPress","role","hidden_setter","clientWidth","clientHeight","resizeChildren","border_not_set","borderWidth","_borders","SingleRender","templateStart","templateEnd","customize","AutoTooltip","_visible","_alt_render","w","h","positionX","positionY","_disabled","innerWidth","innerHeight","display","tooltip_setter","_init_tooltip_once","_show_tooltip","_get_tooltip_data","Canvas","_canvas_labels","_canvas_series","series","_obj","devicePixelRatio","_prepareCanvas","title","_canvas","canvas_id","getCanvas","ctx","getContext","_webixDevicePixelRatio","scale","_resizeCanvas","renderText","renderTextAt","valign","clearCanvas","skipMap","areas","_getMapAreas","clearRect","floor","toggleCanvas","_toggleCanvas","showCanvas","hideCanvas","html_element","animation","animation_copy","subtype","_has_animation","isSupported","formLine","defAniPos","keepViews","nextSibling","breakLine","line","duration","timing","skew_options","scale_type","css_general","css_transition","css_transform","transitionEnded","tid","$active","$name","skin","material","topLayout","barHeight","tabbarHeight","sidebarTitleHeight","toolbarHeight","listItemHeight","inputHeight","buttonHeight","inputPadding","menuHeight","labelTopHeight","propertyItemHeight","timelineItemHeight","unitHeaderHeight","inputSpacing","sliderHandleWidth","sliderPadding","sliderBorder","vSliderPadding","vSliderHeight","switchHeight","switchWidth","layoutMargin","space","wide","clean","toolbar","layoutPadding","tabMargin","tabOffset","tabBottomOffset","tabTopOffset","tabBorder","customCheckbox","customRadio","sidebarMarkAll","popupNoPoint","borderlessPopup","popupPadding","dataPadding","calendarWeekHeaderHeight","padding","accordionType","optionHeight","organogramLineColor","timelineColor","backColor","mini","flat","compact","contrast","webix_skin","Touch","longTouchDelay","scrollDelay","deltaStep","speed","ellastic","limit","_limited","mouse","down","_touchstart","move","_touchmove","up","_touchend","_clear_artefacts","_scroll","_start_context","_current_context","_prev_context","_scroll_context","_scroll_mode","_scroll_node","_scroll_stat","_long_touched","_delta","_x_moment","_y_moment","_time","_css_button_remove","_long_touch_timer","_was_not_moved","_axis_x","_axis_y","_active_transion","_scroll_end","delta","nx","ny","cnx","cny","_get_matrix","_get_delta","$scroll","_correct_minmax","px","py","abs","adjustScroll","_set_matrix","_scroll_master","_sync_scroll","_set_scroll","_translate_event","_set_scroll_pos","_axis_check","_x","_y","_get_event_view","_init_scroller","$hasYScroll","prev","edx","edy","xv","yv","trans","tmatrix","matrix","getComputedStyle","WebKitCSSMatrix","MSCSSMatrix","_tmatrix","tkey","_sync_pos","allow","sqrt","_init_scroll_node","scroll_enabled","_create_scroll","visibility","dim","old","_long_move","_locate","_stop_old_scroll","_stop_scroll","_is_scroll","$touchCapture","_long_touch","stop_mode","time","_get_sizes","locate_mode","_get_context","_get_context_m","setMouse","touchInit","radiusX","$touch","pointerEnabled","msPointerEnabled","DragControl","_drag_masters","addDrop","master_mode","webix_drop","_getCtrl","webix_master","unlink","_active","webix_drag","_stopDrag","_createTouchDrag","dragCtrl","_getActiveDragMaster","_getDragItemPos","createDrag","longtouch_drag","_drag_context","x_offset","y_offset","addDrag","_preStart","_saved_event","_preStartFalse","destroyDrag","evobj","_start_pos","_webix_drag_mm","_startDrag","_webix_drag_mu","_clean_dom_after_drag","_touch_animation","cancelable","sendSignal","_moveDrag","$drop","$dragOut","still_drag","customPos","$dragPos","_skip","elementFromPoint","Proxy","_checkLand","_landing","$dragIn","signal","dragCtl","drag_container","$dragCreate","_setDragOffset","$drag","_skipDropH","_skip_mark","$dragDestroy","_dropHTML","itemPos","Movable","move_setter","Move","_headobj","elOffset","elPos","drag","Modality","_modal_set","_modal_cover","_previous_modality","overflow","_ignore_clicks","ResizeArea","resize_setter","_resizeHandlers","_renderResizeHandler","rp","_rwHandle","_wrDown","_showResizeFrame","_resizeFrame","_wsReady","_resizeHandlersMove","_wrMove","_resizeHandlersUp","_wrUp","progress","$resizeMove","_wsProgress","$resizeEnd","_bodyobj","_head_cell","toFront","modal","_modal","popups","click_view","zIndex_setter","body_setter","new_view","old_view","isBody","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","point","fin_x","fin_y","point_y","point_x","fit","nochange","delta_x","delta_y","delta_point","deltax","deltay","fixed","relative","autofit","_checkFixedPosition","_set_point","_hide_point","_hide_timer","autofocus","_prev_focus","escHide","showpopup","getTopMenu","_hide_single","_hide_sub_popups","_hiding_process","_hide_callback","order","_inner_body_set","head_setter","getHead","baseview","_topPositionCallback","head_size","headMinWidth","headHeight","self_size","ContextHelper","attachTo","on_context","_show_at_ui","_show_at_node","_area","setContext","area","_show_at","_show_on_mouse_out","master_setter","clipbuffer","_blur_id","_ctrl","_paste","_isSelectRange","getSelection","last_active","getEditor","CopyPaste","clipboard_setter","templateCopy","clipboard","_selected","insert","modify","custom","templateCopy_setter","CustomPrint","$customPrint","htmlOnly","_prePrint","tableData","_getTableArray","table","_getTableHTML","doc","docFooter","print","prerender","autoheight","xCount","nobreaks","_getPageWidth","printPPI","printMargin","newTableStart","Infinity","_getVisibleRange","_dx","tableArray","colrow","colnum","cellValue","_itemClassName","txt","$css","br","tableHTML","column","span","colspan","colSpan","rowspan","rowSpan","DataMarks","addRowCss","hasCss","getItemNode","addMark","removeMark","getMark","clearCss","clearMark","DataMove","sid","tindex","tobj","new_id","newId","_externalData","_next_move_index","nid","new_index","getIndexById","$blockRender","moveUp","step","moveDown","moveTop","moveBottom","newdata","$template","externalData","rules","isEmail","isNumber","isChecked","isNotEmpty","ValidateData","clearValidation","elements","_clear_invalid","subview","subresult","input","validator","failed","_validate_details","isHidden","validateHidden","validateDisabled","$obj","_validate","$all","complexData","required","_mark_invalid","_pull","dp","getOnly","DataProcessor","masterId","autoupdate","updateFromResponse","operationName","trackMove","_ignore","_after_init_call","_updates","store","_promise","_waitSave","_onStoreUpdated","_onDataMove","ignore","off","on","_copy_data","_save_inner","now","_scheme_serialize","$parent","_invalid","_check_unique","_sendData","targetid","webix_move_index","webix_move_id","webix_move_parent","one","_in_progress","triggerId","wait","marked","to_send","tosave","precise_url","_scheme_save","_updatesData","_proxy_on_save","saveAll","processed","_processResult","_processError","attachProgress","_innerProcessResult","getItemState","setItemState","exists","changeId","undoOnError","undo","removeUndo","finalResult","_get_stack_index","DataStore","setDriver","_marks","_filter_order","recs","_inner_parse","_scheme_group","_group_processing","_not_grouped_order","_scheme_sort","subload","marks","_removeMissed","_scheme_update","_scheme_init","delid","endpos","_render_change_id","changeTrack","_skip_refresh","getRange","to","$min","startOffset","$max","endOffset","getIndexRange","sindex","_move_inner","scheme","_scheme","$save","$change","$update","$serialize","$group","$sort","_scheme_export","$export","serialize","_make_full_copy","oldpull","branch","_filter_branch","_extraParser","_datadriver_child","_set_child_scheme","unsync","_sync_source","sync_logic","_skip_next_sync","_sync_events","_back_sync_handler","original_index","data_size","clearAll","soft","getNextId","getFirstId","getLastId","getPrevId","by","as","sorter","parameters","_sort_init","sorting","_sort_core","pre","$freeze","neworder","_filter_reset","preserve","_filter_core","first","match","_filterMode","_obj_array","_methodPush","provideApi","eventable","onbeforesort","onaftersort","onbeforeadd","onafteradd","onbeforedelete","onafterdelete","ondataupdate","list","old_css","current_css","ids","_multi","_dir","_by","methods","DataLoader","_feed_last","_call_onclearall","_call_on_config","feed","_feed","_load_count","_feed_common","_feed_on_load","_feed_callback","filterValue","loadNext","datathrottle","datafetch","_throttle_request","_maybe_loading_already","removeMissed_setter","_init_dataprocessor","save_setter","waitSave","many","scheme_setter","dataFeed_setter","filtervalue","urldata","_this4","_ready_was_used","DataState","cols_n","fillspace","_hidden_column_order","_last_order","_last_sorted","_filter_elements","_dtable_fully_ready","any_filter","_hidden_column_hash","markSorting","_hidden_split","leftSplit","rightSplit","hihash","hideColumn","hikey","reorder","getColumnConfig","refreshColumns","_setColumnWidth","_updateColsSizeSettings","multi","_sort","filterByAll","contentid","contentId","_active_headers","unselect","_select","DragItem","_initHandlers","$dragMark","_auto_scroll_force","drag_setter","_inner_drag_only","fragile","_drag_pause","$dropAllow","_target_to_id","_define_index","_context_to_move","getBranchIndex","getParentId","hash_id","_touch_scroll","$dragHTML","_toMultipleHTML","multiple","_marked","_remove_css","_add_css","$dropHTML","_set_drop_area","DragOrder","_close_branches","_drag_order_stored_left","_drag_order_complex","$level","_init_drop_area","ofs","_drag_direction","_marked_item_id","_header_height","ot","nt","_id","Undo","_undoHistory","_undoCursor","undo_setter","_init_undo","_draggedItem","$index","_addToHistory","_deletedItem","$branch","oldId","action","_skipHistory","_skipCursorInc","ignoreUndo","_undoAction","parentId","attach_editend","suggest","setMasterValue","_editor_initialized","create_suggest","linkInput","getLabel","editValue","label","editors","editor","boxobj","init_suggest","checked","$inline","collection","rec","isplain","destroy","getPopup","$popup","createPopup","pobj","_linked","popupType","popupInit","moveSelection","color","date","_is_string","stringResult","combo","_create_suggest","_shared_suggest","_suggest","showPopup","getList","_initial_value","showItem","_last_input_target","afterRender","sobj","getItemText","getSuggestion","richselect","_show_selection","password","multicombo","uploader","icons","multiselect","button","selectAll","EditAbility","editaction","_editors","onDblClick","_refocus_inline_editor","editable","_init_edit_events_once","_refocus_try","newnode","_locateInput","editable_setter","e1","e2","_changeEditorId","edit","_reset_active_editor","_component_specific_edit_init","_handle_live_edits","liveEdit","_set_new_value","_show_editor_form","realform","_get_editor_type","_init_editor","_live_edits_handler","_on_editor_change","$fixEditor","globalState","edit_open_time","getEditorValue","_get_edit_config","_addEditor","_sizeToCell","_locate_cell","_removeEditor","focusEditor","ed","_edit_stop","cancel","_editStop","_for_each_editor","inline","_get_new_value","validateEditor","getEditState","editor_next","_find_cell_next","_after_edit_next","new_value","FlexLayout","_fix_vertical_layout","_beforeResetBorders","_afterResetBorders","g","_padding","_set_child_size","st","margin","_margin","paddingTop","paddingBottom","paddingLeft","paddingRight","flexBasis","flexGrow","whs","scrollHeight","GroupMethods","sum","summ","some","string","GroupStore","ungroup","_ungroupLevel","_not_grouped_pull","level","changed","$footer","_unregisterItem","_fix_group_levels","_group_prop_accessor","acc","missing","_group_tree","groups","labels","missed","misGroup","$row","_map_group","_fill_pull","topbranch","newitem","ancestor","_formath","footer","$count","Group","HTMLOptions","customRadio_setter","_moveSelection","_getInputNode","_blur","inp","getOption","optionIndex","addOption","removeOption","_setNextVisible","_getFirstActive","_filterOptions","_setOptionState","field","hideOption","showOption","disableOption","enableOption","HtmlMap","_key","_map","_areas","addRect","points","userdata","_createMapArea","addPoly","shape","coords","extra_data","addSector","alpha0","alpha1","R","ky","PI","cos","sin","querySelectorAll","nodes","nod","coordsdis","IdSpace","_get_self","_run_inner_init_logic","_run_after_inner_init_logic","innerId","onitemclick","KeysNavigation","_set_focusable_item","_set_item_focus","querySelector","_navigation_helper","navigation","selected","x_layout","_parent_menu","_hide_sub_menu","_skip_item","getSubMenu","_mouse_move_activation","navigation_setter","_global_nav_grid_hotkeys","MapCollection","_create_scheme_init","_scheme_init_order","_build_data_map","_process_field_map","_process_single_map","getSource","dateStr","parseFormatDate","_map_options","_create_collection","options_view","_bind_collection","_map_header_options","refreshFilter","_bind_template","optionslist","separator","MouseEvents","_clickstamp","_dbl_sensetive","_item_clicked","_mouse_action_extend","onClick","onContext","onMouseMove","_onClick","on_dblclick","_onDblClick","_onContext","on_mouse_move","_enable_mouse_move","_mouse_move_enabled","_onMouse","_mouse_move_timer","stamp","_mouseEvent","_onMouseMove","_onMouseOut","mouseEventDelay","pair","vid","wid","w_view","NavigationButtons","_moveActive","_showNavItem","_navPanel","_renderPanel","_renderNavItems","_renderNavButtons","_setLinkEventHandler","bindId","_linkAttr","_showPanelBind","_prevNavButton","_nextNavButton","inc","_active_cell","setActiveIndex","items","linkAttr","_clearPanel","buttons","aria","prevTab","OverlayBox","showOverlay","message","_overlay","hideOverlay","PagingAbility","pager_setter","pager","ui_pager","_count_pager_total","check_pager_sizes","repeat","autosize","getVisibleCount","page","_count_pager_index","$pagesize","_pager","$master","setPage","getPage","getPager","ProgressBar","_progress","showProgress","hideProgress","incss","scrollWidth","_progress_animate","_progressTimer","clearInterval","setInterval","_progress_hide","RenderStack","_call_onclick","item_setter","type_setter","_toHTMLObject","search_id","txmin","txmax","tymin","tymax","_setItemActive","cont","_renderobj","Scrollable","_one_time_scroll","scroll_setter","auto","$customScroll","CustomScroll","overflowX","overflowY","_onoff_scroll","SelectionModel","_data_updated","_data_loaded","_data_filtered","_select_check","_id_changed","_set_noselect","loadBranch","$selected","_select_mark","need_unselect","sname","_silent_selection","unselectAll","_refresh_selection","ename","isSelected","as_array","getSelectedItem","_is_mass_selection","_toHex","toHex","number","rgbToHex","rgb","hexToDec","hex","toRgb","rgbArr","lastIndexOf","hsvToRgb","hi","q","rgbToHsv","r0","g0","b0","min0","max0","joinAttributes","SVG","xmlns","version","viewBox","_handlers","cp0","cp1","radius","angle0","angle1","definePath","toUpperCase","_linePoints","setOpacity","rawColor","opacity","rgbColor","_curvePoints","getPath","getSector","lines","getCurve","getLine","p0","p1","getCircle","getRect","paddingX","paddingY","eventRadius","Line","draw","getPoints","renderer","_applyColor","_getLinePoints","graph","_drawItems","_drawEventItems","styleMap","lineColor","webix_area","minValue","maxValue","unitX","yNum","unitY","ceil","Area","BaseLine","itemCss","Bar","negativeColor","_getOrigin","evPoints","_getEventPoints","evItems","barWidth","originY","Pie","_defColorsCursor","_defColors","_getColor","colorsCount","sectors","getAngles","x0","y0","_context","a1","a0","ratios","_getRatios","_getTotalValue","prevSum","totalValue","Spline","Base","linePoints","_getControlPoints","p2","defaultsArea","SplineArea","Sparklines","linePath","areaPoints","itemPoints","getTemplate","customConfig","slConstructor","_template","getData","sparklines","delimiter","sep","_split_clip_data","_substr_count","chunk","tline","quoted","substring","reg","TablePaste","_sel_to_clip","_clip_to_sel","_get_sel_text","mapSelection","row_ind","newvalue","block","leftTop","mapCells","col_ind","TreeAPI","openAll","eachSubItem","closeAll","_tree_check_uncheck","threeState","_tree_check_uncheck_3","isBranchOpen","getOpenItems","_repeat_set_state","tree","TreeClick","webix_tree_open","webix_tree_close","webix_tree_checkbox","TreeDataLoader","_sync_hierarchy","_feed_commonA","_sync_to_order","TreeDataMove","_check_branch_child","_remove_childs","target_parent","copy_data","$child","tbranch","sbranch","_set_level_rec","TreeRenderStack","_toHTMLItem","_toHTMLItemObject","_toHTMLLevel","leaves","_tree_branch_render_state","leafs","getNextSiblingId","_branch_render_supported","TreeStateCheckbox","_init_render_tree_state","updated","_setThirdState","threeState_setter","checkedParents","parents","_getAllLeaves","_setParentThirdState","_setCheckboxIndeterminate","chElem","indeterminate","itemId","checkedCount","unsureCount","needrender","eachChild","getChecked","_correctThreeState","checkItem","uncheckItem","_checkUncheckAll","checkAll","uncheckAll","TreeStore","showSubItems","filterMode_setter","filterMode","_filter_branch_rec","newsub","child_run","openParents","eachOpen","_change_branch_id","branches","getPrevSiblingId","getFirstChildId","isBranch","parse_name","pItem","pBranch","webix_kids","parent_branch","itemid","_sync_each_child","getTopRange","eachLeaf","bset","pid","refresh_parent","_rec_remove","_filter_removed","out","TreeTablePaste","TreeType","checkbox","nocheckbox","folder","UploadDriver","$render","input_config","_upload_area","files","_stop_file","tabindex","accept","directory","webkitdirectory","mozdirectory","_add_files","_upload_timer_click","fileDialog","_directoryEntry","isDirectory","_directoryDrop","isFile","addFile","createReader","readEntries","entries","dataTransfer","webkitGetAsEntry","_last_file_context","inputs","_last_assigned_upload_callback","upload","formData","append","inputName","globalData","_get_active_url","$updateProgress","loaded","total","aborted","_file_complete","complete","_upload_complete","_complete","percent","stopUpload","abort","ValidateCollection","_validate_init_once","rules_setter","Values","_inner_setValues","_is_form_dirty","_values","$allowsClear","isDirty","getDirtyValues","_inner_getValues","defaultValue","$compareValue","getCleanValues","markInvalid","invalidMessage","invalid","setBottomText","VirtualRenderStack","_render_visible_rows","_unrendered_area","ind","_render_delayed","_wait_for_render","_create_placeholder","viewport","_max","_from","_height","_filled","holder","holder_row","nextpoint","loading","delta2","loadahead","_top","VRenderStack","_footer","_run_load_next","cid","conf","errorMessage","getHeaderText","getHeaderContent","$icon","getStyles","getExportScheme","treeColumn","h_count","f_count","isTable","raw","rawValues","isTree","treeLines","_columns","flatTree","flatKey","fill","fillMode","noExport","sourceColumn","rawColumn","_columns_pull","getDataHelper","export_mode","exportType","exportFormat","diff","getExportData","filterHTML","htmlFilter","docHeader","_headers","treeline","plainOutput","_spans_pull","getSpan","trim","footers","_footers","toPDF","_export_font","font","fontName","viewOptions","$exportView","autowidth","getAutowidth","exportData","cloneNodeWithStyles","cloneNode","dataOnly","getPdfData","pdf","getBlob","pdfjs","fontURL","err","buf","TTFFont","blob","Blob","orientation","Document","threshold","addPDFDoc","promises","html2canvas","background","logging","useCORS","canvas","image","toDataURL","binary_string","atob","bytes","charCodeAt","Image","buffer","getPDFImage","images","textBefore","addText","colWidths","tableOps","lineHeight","borderColor","backgroundColor","textAlign","headerRows","headerOps","borderRightColor","borderBottomColor","footerOps","beforeCount","addPDFTable","textAfter","pageBreak","dataExport","pageNumber","of","pageCount","horder","docHeaderImage","img","addPDFHeader","toExcel","getHeaderSpans","xc","yc","sc","getColumnIndex","sr","getSpans","WBProps","ws","C","cell_ref","stringValue","isFormula","cellStyle","SSF","getTime","getTimezoneOffset","excelDate","encode_range","hpt","getRowHeights","wscols","getColumnsWidths","getExcelData","xls","write","bookType","bookSST","ArrayBuffer","str2array","inputBox","_box","usercall","modalbox","modal_key","keyboard","lastModalbox","hasInput","modality","cover","onkeydown","_boxStructure","ok","placeholder","oninput","onclick","_createBox","containerWidth","containerHeight","alertPopup","confirmPopup","boxPopup","promptPopup","box_params","expire","timers","hideAll","wDate","startOnMonday","toFixed","ms","weekStart","getDay","datePart","monthStart","setDate","yearStart","setMonth","dayStart","dateToStr","utc","getMonth","getDate","getFullYear","calendar","dayShort","dayFull","monthShort","monthFull","getHours","getMinutes","pm","am","getSeconds","getMilliseconds","getISOWeek","strToDate","mask","splt","monthShort_hash","monthFull_hash","UTC","ndate","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","_correctDate","d0","checkFunc","incorrect","setHours","getYear","setYear","setMinutes","setSeconds","setMilliseconds","timePart","equal","isHoliday","day","Number","decimalSize","groupSize","dot","decimalDelimiter","groupDelimiter","decimal","sign","decimalOptional","int_value","numToStr","setLocale","locale","locales","priceSettings","_price_format","price","_price_settings","intFormat","priceFormat","numberFormat","dateFormat","timeFormat","longDateFormat","fullDateFormat","fileSize","hours","minutes","today","PDFviewer","automaticZoom","actualSize","pageFit","pageWidth","pageHeight","enterPassword","passwordError","increaseValue","decreaseValue","navMonth","navYear","navDecade","monthFormat","yearFormat","hourFormat","minuteFormat","removeItem","pages","headermenu","openGroup","closeGroup","closeTab","showTabs","resetTreeMap","navTreeMap","nextTab","multitextSection","multitextextraSection","showChart","hideChart","resizeChart","richtext","underline","bold","italic","comments","confirmMessage","moreComments","less","lessOrEqual","greater","greaterOrEqual","notContains","notEqual","beginsWith","notBeginsWith","endsWith","notEndsWith","between","notBetween","storage","local","localStorage","setItem","session","sessionStorage","cookie","domain","expires","toUTCString","getRaw","check_name","a_all_cookies","a_temp_cookie","cookie_value","b_cookie_found","unescape","cookies","papers","fits","modes","portrait","landscape","_getHeaderFooter","patterns","phone","card","error_key","RemoteContext","_proxy","_queue","_url","_process","getApi","_getProxy","remote","$key","$vars","_proxy_call","_call","args","_deffer","_start_queue","_timer","_run_queue","request","pack","defs","$sync","$args","_pack","$context","pr","payload","scripts","new_orientation","datafilter","textWaitDelay","trackCells","getHelper","uncheck","checkValue","uncheckValue","component","registerFilter","_comp_id","_on_key_down","_filter_timer","compare","_get_data","emptyOption","option","_on_change","_collectValues","collectValues","collect","serverFilter","$server","textFilter","serverSelectFilter","selectFilter","numberFilter","prepare","equality","intvalue","_greater","_lesser","_equal","dateFilter","reverse","dateFormatDate","div","setSkin","_detectScrollSize","aniset","ani","animateView","stateHandler","getHTML","currentStyle","currentState","newState","tempParent","fullScreen","fix","onrotate","factory","configOnly","_restore","$layout","serializer","childs","movePortlet","_parse_cells","_layout_sizes","_responsive","isolate","rows_setter","_vertical_orientation","_collection","cols_setter","whiteSpace","_beforeRemoveView","_fix_hidden_cells","_hiddencells","$nospace","target_id","_insertBeforeView","_fill_data","verticalAlign","newui","removeView","reconstruct","showBatch","visibleBatch","batch","_parse_cells_ext_end","_fix_container_borders","_bubble_size","vertical","fixed_count","_master_size","_desired_size","responsive","_set_child_size_a","ps","_set_size_delta","_set_size_gravity","_responsive_hide","_responsive_width","_responsive_height","_responsive_marker","_responsive_show","responsiveCell","_responsive_cells","oldIndex","_next","_first","_template_types","_correct_height","section","onClick_setter","_render_me","_not_render_me","_probably_render_me","src_setter","content_setter","setHTML","setContent","_template_resize_timer","_get_auto_height","scrollSpeed","_resizeChildren","cx","cy","desired_size","self_sizes","scroll_size","_native_scroll","showView","topPos","getIframe","getWindow","contentWindow","_parse_cells_ext","_parse_once","defined","_hasBorders","_render_borders","correction","viewA","structure_changed","_cleanlayout","maxlength","s_next","s_inner","contrstyle","contrpadding","_margin_set","_padding_set","panelClass","newview","collapsed_setter","panel","_skin_render_collapse","_accLastChild","_afterOpen","_canCollapse","_headlabel","_headbutton","header_setter","headerAlt_setter","fixedHeight","_getHeaderSize","headerHeight","webix_accordionitem_header","_toggle","webix_accordionitem_header_v","_collapse","sibl","expand","_expand","$noresize","headerAlt","headerAltHeight","headerSize","_last_set_header_size","_last_size_y","_key_property","_dragobj","_originobj","border","cursor","_moveev","_onmove","_upev","_onup","_last_result","eventPos","_rsDown","_getResizeDir","_rs_started","_resizer_dir","_resizer_dim","marginRight","marginBottom","_getResizerCells","_rs_process","_rsLimit","_rsStart","_rsUp","cellOffset","posParent","_rs_progress","_resizeStick","resizearea","_rsEnd","_rsResizeHandler","cDiff","limits","limitSizes","totalSize","_rsGetDiffCellSizes","_rsGetLimitCellSizes","_getRsCell","_resizerStick","_rsGetCellSizes","cell_size","size1","size2","styleDim","align_setter","_x_align","_y_align","_p_align","marginLeft","marginTop","_back_queue","_ask_render","cell_id","view_id","_render_hash","_render_queue","_render_activation","subcell","baselayout","_animation_promise","cells_setter","_getDirection","vx","animation_options","tabBar","getTabbar","callback_original","_next_cell","wait_animation","fitBiggest","other","back","viewId","getMultiview","_init_tabview_handlers","tabs","tabbar","mview","_layout","_initLayout","_fix_after_view_add","layoutProp","layoutConfig","_setScroll","getLayout","_size","_nextCell","showNext","showPrev","getActiveIndex","layoutSizes","selfSizes","setActive","selfSize","layoutType","_init_drag_area","_refreshChildScrolls","_restore_scroll_state","markDropArea","_markerbox","isv","_removeEmptySource","childview","maxcount","_portlet_drop_target","_portlet_drop_mode","evObj","_getPortletTarget","_markPortletDrag","erx","ery","drop","autoplace","gridColumns","gridRows","gridRows_setter","_actual_rows","abslayout","_do_compact","_check_default_pos","_buildMatrix","_isFree","exceed","_reserveSpace","_silent","sx","sy","_markMatrix","_canMoveRight","mx","_canMoveLeft","_canMoveTop","_compact","_apply_new_grid","my","compacted","cross","moveView","cellWidth","cellHeight","_getActualSize","_isDragNode","sview","dashboard","_addDragMarker","_dragMarker","_getPosFromCoords","rx","ry","external","inpos","dash","fx","_origin_cells","subcount","_save_data","clickHandler","_point_element","_form_classname","_form_vertical","onbeforetabclick","onaftertabclick","onchange","elementsConfig","_rec_apply_settings","nextsettings","_default_height","$cssName","label_setter","_body_view","_last_body_size","labelWidth","labelAlign","_inputPadding","_inputSpacing","_labelTopHeight","lw","labelPosition","labelWidth_setter","bottomLabel","_invalidMessage","_tagname","_attribute","_get_html_value","tagname","_get_value","radio","textarea","selectedIndex","_set_html_value","_set_value","firstElementChild","_default_values","_copy_inner_content","_parse_inputs","cant_clear","nameWidth","on_render","on_edit","webix_property_check","registerType","elements_setter","_idToLine","alter_type","_data_width","_clear","_props_dataset","els","monthSelect","weekHeader","monthHeader","weekNumber","skipEmptyWeeks","calendarHeader","events","DateHelper","minuteStep","timeIcon","timepickerHeight","dayTemplate","dayTemplate_setter","calendarHeader_setter","calendarTime_setter","_calendarTime","date_setter","_string_to_date","maxDate_setter","minDate_setter","minTime_setter","parseTimeFormatDate","maxTime_setter","_ariaFocus","relatedTarget","_locate_day","_locate_date","_special_dates","_selected_days","_zoom_level","minuteStep_setter","_zoom_in","_fixed","_getDateBoundaries","_rows","timepicker","_icons","_content_padding","getSelectedDate","getVisibleDate","_zoom_logic","_keyshift","month","year","days","_set_date_bounds","_month","_start","_getColumnConfigSizes","bounds","_columnsHeight","_columnsWidth","columnsNumber","rowsNumber","icons_setter","_icons2","_zoom_size","cpad","_current_time","_week_template","_body_template","_timepicker_template","_icons_template","_changeZoomLevel","calendarTime","timeFormatStr","clock","tpl","range_date","week_template","calendarWeekHeader","day_index","blockDates_setter","_day_css","isOutside","_checkDate","_selectedDay","sqSize","alabel","_getCalSizesString","_changeDate","_changeStep","_changeDateInternal","_update_zoom_level","showCalendar","_isBlocked","isBlocked","minHour","minTime","maxHour","maxTime","minMinute","maxMinute","blockTime","_setContent","_findActive","newdate","selectDate","minYear","maxYear","blocked","minDate","maxDate","_getTitle","_getContent","_zoom_start_date","setFullYear","_correctBlockedTime","zlogic","sections","_reserve_box_height","_reserve_box_width","timeColNum","enLocale","_timeHeaderTemplate","_timeButtonsTemplate","w2","zoom","oldzoom","_mode_selected","_selectDate","cind","rind","webix_cal_prev_button","webix_cal_next_button","webix_cal_day_disabled","webix_cal_outside","webix_cal_day","webix_cal_time","webix_range_time_start","_time_mode","webix_range_time_end","webix_cal_done","webix_cal_month_name","webix_cal_block","blockedDate","blockDates","palette","minLightness","maxLightness","_findIndex","pal","_getBox","$prepareValue","value_setter","$setValue","_selectBox","_getSelectBox","lastChild","_initPalette","numToHex","hue2rgb","colors","colorRows","colorStep","lightStep","colorRange","colCount","gray","renderGrayBar","l","lt","itemTpl","firstRow","renderRow","rowHtml","$renderInput","badge","awidth","aheight","_set_default_css","_calc_size","hotkey_setter","control","_addElementHotKey","_get_class","webix_danger","webix_transparent","webix_primary","_types","_set_inner_size","imageTop","iconTop","_findAllInputs","tagNames","_disabledTabIndex","_rendered_input","$getValue","_sqrt_2","_calck_input_size","_input_width","inputWidth","_input_height","_inputHeight","bheight","cheight","dheight","handle","cssFloat","_init_once","_handle_tab_click","opt","webix_all_segments","webix_all_tabs","webix_inp_counter_next","webix_inp_counter_prev","webix_input_icon","webix_inp_checkbox_border","toggle","webix_inp_checkbox_label","webix_inp_radio_border","webix_tab_more_icon","webix_tab_close","_check_options","_get_div_placeholder","nav_controls","_init_onchange","_onBlur","_custom_format","$renderIcon","addSection","relatedView_setter","relatedAction","viewid","relatedView","validateEvent_setter","bottomLabel_setter","bottomPadding","_getInvalidText","_restorePadding","heightInc","_get_input_width","iconWidth","_render_div_block","inputAlign","_baseInputHTML","$renderLabel","_getLabelHeight","div_start","_pattern","setValueHere","symbol","suggest_setter","pattern","format_setter","_on_key_pressed","_after_render","getText","_getRawValue","_matchPattern","pattern_setter","_patternScheme","_init_validation","_pattern_chars","_pattern_allows","_property_stamp","chars","_pattern_scheme","isCapsLock","getModifierState","_getCaretPos","_input_code","_fixCaretPos","rchar","rawIndex","rawLength","nind","lind","icode","DataCollection","optview","options_setter","rightlabel","labelRight","ch","customCheckbox_setter","eachid","isDisabled","optlabel","rd","focusable","newline","_editable","_init_popup","_prepareSingleValue","timeMode","_formatDate","_get_visible_text","_get_visible_text_single","formatStr","_formatStr","fullDateFormatStr","_set_visible_text","_get_value_single","timeFormatDate","fullDateFormatDate","parseTimeFormatStr","_getColorNode","datepicker","popupWidth","_revertValue","_suggest_config","_reset_value","dynamic","_ignoreLabelClick","isFinite","_show_view","borders","optionWidth","tabbarPopup","isPressed","onLabel","offLabel","onIcon","offIcon","getValueHere","_full_value","_subs","seg","removeSection","_subOnChange","newConfig","subConfig","newone","_listClassName","_auto_resize","dynamic_setter","webix_list_item","_no_animation","_one_height","yCount","_auto_height_calc","_auto_width_calc","getUnits","widthSize","heightSize","classname","webix_selected","disableItem","_set_item_disabled","enableItem","isItemEnabled","isobj","buttonText","fitMaster","$checked","keepText","tagMode","tagTemplate","_render_value_block","_removeValue","newValues","_click_stamp","_addNewValue","_inputValue","toArray","_addValue","newValue","isObj","$customWidth","_dont_unfilter","_suggest_after_filter","inputValue","inputStyle","_inputWidth","readOnly","_getValueListBox","textArr","_toMultiValue","listbox","_getMultiComboInputWidth","_resizeToContent","_focusAtEnd","inputEl","FieldRange","elemLen","cHeight","topView","inputDiv","_getInputDiv","calcHeight","_typing","_enter","_getSelectedOptions","_valueHistory","_calcInputWidth","tmp","calcWidth","_windowHeight","getItemId","_backspaceTime","moveTitle","_handle_id","title_setter","_get_slider_handle","corner1","corner2","cornerStr","sizeStr","part","_sliderPadding","_sliderHandleWidth","_sliderBorder","_set_title","half","pos1","pos2","_set_value_now","_on_mouse_down_start","_handle_move_keyboard","_activeIndex","_handle_drag_events","_mouse_down_process","_start_value","_start_handle_dnd","_get_value_from_event","_handle_move_process","_handle_move_stop","touchContext","ax","_get_value_from_pos","corner","handles","_get_left_pos","_set_left_pos","_set_value_pos","left0","left1","parentBox","handle0","handle1","_title_hidden","_hide_title","sibling","_set_title_n","srcElement","_set_handle_active","hActive","pos0","_calck_switch_size","_switchWidth","_switchHeight","onWidth","offWidth","topOffset","bottomOffset","tabMinWidth","tabMoreWidth","_getTabbarSizes","totalWidth","limitWidth","popupTemplate","_popupInnerClick","moreTemplate_setter","popupTemplate_setter","moreTemplate","leafWidth","resultHTML","verticalOffset","selectedTab","lastTab","_getTabHTML","_tabTemplate","segmented","_setLayout","_button","_add_data","editField","onAfterRender","_updateValue","_getselection","webix_richtext_editor","editorToolbar","rangeCount","queryCommandState","_execCommandOnElement","commandName","selText","anchorNode","focusNode","textValue","focusEl","focustext","wordBegining","wordEnd","startWord","endWord","getRangeAt","isCollapsed","textContent","anchorOffset","setStart","setEnd","removeAllRanges","addRange","execCommand","removeIcon","fileName","autosend","apiOnly_setter","link_setter","_format_size","file_struct","sizetext","webkitRelativePath","urlData","subline","addDropZone","hover_text","extra_css","fullcss","timer","isUploaded","$onUploadComplete","original_name","highlight","scrollEv","_syncText","_updatePos","_handleInput","_getHighlightNode","_lastText","_handleScroll","highlightStyles","filter_setter","_show_on_key_press","etemp","_get_extendable_cell","_set_on_popup_click","_old_text","_get_details","_set_input_value","_preselectMasterOption","prev_text","$setValueHere","getMasterValue","input_setter","webix_master_id","_suggestions","_non_ui_mode","_last_delay","_tab_key","_escape_key","$enterKey","_navigate","contentEditable","lastValue","_resolve_popup","innerText","_before_filtering","visible","onItemClick","_toggleOption","getButton","onChange","_is_all_selected","_onReady","multisuggest","autoConfig","_getText","grid","_last_cursor_pos","calendarCount","_correct_value","skinConf","cwidth","rheight","rwidth","basecss","_steps","_isInRange","_footer_row","_after_init","_cals","_changeDateSilent","_related_date","addToRange","_add_date","itemplate","icons_template","tomorrow","yesterday","cals","_cals_hash","_on_date_select","_before_zoom","_month_change","_after_zoom","_getIndexById","_shift","_set_time","reldate","vis","_setValue","formatDate","iValue","_formatValue","getInput","setSheets","google","script","_init_video","poster","autoplay","getVideo","chart","displayMode","region","resolution","_waitMap","_refreshColumns","_drawData","getMap","waitMap","_getCallBack","_initMap","charts","visualization","GeoChart","_mapEvents","setOnLoadCallback","_defineColumns","DataTable","addColumn","addRows","DataView","arrayToDataTable","setDisplayMode","setRegion","clearChart","isHtml","_getColumnType","addListener","selnow","_selprev","maps","libraries","center","LatLng","mapTypeId","MapTypeId","mapType","center_setter","setCenter","mapType_setter","setMapTypeId","zoom_setter","setZoom","layerType_setter","_layerApi","drawData","layerType","$marker","_getItemConfig","setMap","lat","lng","Marker","getDraggable","_onDrag","getPosition","heatmap","heatmapConfig_setter","_heatmap","hdata","_getConfig","heatmapConfig","HeatmapLayer","getHeatmap","isAxisTitle","eachStockCanvas","canvases","_series","_legend_labels","preset","_definePreset","ariaLabel","alpha","cant","shadow","gradient","labelOffset","webix_chart_legend_item","legend","showSeries","hideSeries","yAxis","xAxis","removeAllSeries","_legendObj","changes","_getChartData","_createCanvas","_drawLegend","_getChartBounds","_applyBounds","$hidden","newData","units","valuesHash","axis","axisConfig","$unit","series_setter","addSeries","xValue_setter","yValue_setter","alpha_setter","lineColor_setter","borderColor_setter","pieInnerText_setter","gradient_setter","colormap","_rainbow","color_setter","fill_setter","preset_setter","presets","legend_setter","_converToTemplate","line_setter","padding_setter","xAxis_setter","_configXAxis","yAxis_setter","bg","_configYAxis","_drawScales","point0","point1","_drawYAxis","_drawXAxis","unitPos","x1","labelY","_drawXAxisLabel","_drawXAxisLine","_drawLine","scaleParam","y1","lineX","_calculateScale","_logScaleCalc","_setYAxisTitle","stepHeight","pow","fixNum","power","corr","yi","_log10","_calculateLogScale","nmin","nmax","_normStep","calculStep","stepVal","logMin","logMax","absNmin","powerStart","nminVal","_getLimits","maxI","minI","LN10","y2","x2","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","_getRelativeValue","relValue","_getActiveSeries","getOffset","legendContainer","legendHeight","legendItems","legendWidth","itemColor","_drawLegendText","disableColor","_drawLegendMarker","markerType","fillStyle","disableLines","globalAlpha","_strokeChartItem","_path","lineCap","chartX0","chartY0","chartX1","chartY1","_getStackedLimits","$sum","_setBarGradient","hsv","rawColor0","stops","createLinearGradient","_gradient","_getPositionByAngle","addColorStop","_addMapRect","sIndex","$render_pie","_renderPie","coord","_getPieParameters","_getValues","_addShadow","angles","_showRadialGradient","arc","pieInnerText","_drawSectorLabel","_createLowerSector","a2","_drawSectorLine","pieHeight","shadows","_getGrayGradient","createRadialGradient","alpha2","in_width","corr_x","left_end","left_start","$render_pie3D","$render_donut","pieRadius","innerRadius","$render_bar","valueFactor","relativeValues","startValue","unit","totalHeight","yax","xax","seriesNumber","seriesIndex","barOffset","inner_gradient","_drawBar","_drawBarGradient","_drawBarBorder","_correctBarParams","axisStart","rotate","_setBarPoints","_setBorderStyles","gradParam","skipBottom","cosA","angle_corr","acos","x3","y3","x5","$render_line","res1","res2","_calculateLineParams","_getPointY","fixOverflow","_calcOverflowX","_mapStart","_drawItem","areaPos","mapStart","alphas","$render_barH","innerGradient","_drawHScales","_drawBarHBorder","_drawBarH","_drawBarHGradient","_setBarHPoints","skipLeft","sinA","asin","y5","_drawHXAxis","_drawHYAxis","yAxisX","yAxisStart","xi","_correctBarHParams","$render_stackedBar","xAxisY","total_height","firstSector","negValue","$startYN","$startY","_setStakedBarPoints","minY","$render_stackedBarH","total_width","$startX","$render_spline","sparam","_getSplineParameters","sY1","_getSplineYPoint","sY2","$render_area","mapRect","$render_stackedArea","yPos","setOffset","$render_radar","_renderRadarChart","ratioUnits","_drawRadarAxises","_drawRadarData","r1","value0","value1","unitArr","startAlpha","posArr","_fillRadarChart","_strokeRadarChart","disableItems","_drawRadarItemMarkers","configY","configX","_drawScaleSector","lineShape","_drawRadarScaleLabel","closePath","corr_y","$render_scatter","xValue","limitsY","limitsX","_getScatterParams","_calculateScatterItemPosition","di","_drawScatterItem","_fillScatterChart","_calcScatterUnit","$render_splineArea","sParams","_stockRenderHandler","animateDuration","filterStockData","_stockAnimationOffset","_stockAnimationStart","requestAnimationFrame","timestamp","_stockAnimateHandler","setCanvasOffset","skipRight","setLabelsOffset","isScroll","setHtmlMapSizes","startAnimation","_stockXAxisHandler","drawXAxis","_onClear","_nested_cursor","_nested_chain","_is_level_down","getOpenState","lastChain","next_div","animArr","_prev_nested_chain_length","_back_scroll_states","templateBack_setter","templateBack","templateItem_setter","templateItem","templateGroup_setter","templateGroup","uniteBy_setter","uniteBy","$unitValue","_setUnits","_getUnitRange","getUnitList","templateStartHeader","templateHeader","dbllist","selectOne","deselectAll","deselectOne","_moved","_inRight","_inLeft","_updateAndResize","_data_ready","_refresh","_getButtons","_getButton","dbllist_button","_update_list","_getList","onBeforeDrop","onItemDblClick","labelLeft","labelBottomLeft","labelBottomRight","webix_tree_item","activeTitle","multimode","templateCommon","_icon_src","lines_level","branch_id","parent_id","pbranch","activeItem","subRender","headerTemplate","headerTemplate_setter","_htmlElement","$values","$xy","_renderHeader","_renderBranch","pId","$value","bad","_worst","_renderRow","contra","showBranch","webix_treemap_item","webix_treemap_header_item","webix_treemap_reset","_getCssText","resetIcon","headerItem","xy","cssClass","sizeToContent","_tilesPadding","webix_dataview_item","templateLoading","_calck_autoheight","autoheight_setter","_autowidth","_autoheight","_recalk_counts","_remove_master","_animate","_clone","_refresh_clone","newPage","old_page","old_limit","old_count","_pgInAnimation","_pgAnimateTimeout","flip","snode","isDataTable","onode","sendAction","_configList","moreButton","_configForm","_initMenu","_initUsers","users","_afterInit","_list","_form","_sendButton","_input","localId","mentions","_initMentions","_clickHandler","_listMenu","_userList","_changeTextarea","_fillList","more","_moreCall","getUsers","_users","getMenu","setCurrentUser","currentUser","_saveComment","user_id","_removeComment","increase","_text_expanded","_toggleButton","onShow","onHide","onTimedKeyPress","_this5","newv","onKeyPress","_highlightMention","getMention","_markedText","_markedHTML","name1","_c","name2","_this6","_wrapName","user","templateStatus","templateUser","_this7","templateMenu","templateDate","templateLinks","templateMentioned","templateText","templateAvatar","avatar","listItem","listConfig","menuPosition","_this8","_initUserList","_this9","_findMentioned","mentioned","_b","_this10","templateValue","templateDetails","commonStyle","circleSize","lwidth","templateValue_setter","templateDetails_setter","templateDate_setter","_autowidth_submenu","_mouse_move_menu","_menu_was_activated","openAction","_child_menu_active","_submenu","_show_child_on_click","_hide_on_item_click","_hidden_items","texts","isSubmenu","submenu","subsign","templateSeparator","templateSpacer","subid","_get_submenu","menu","getMenuItem","_create_sub_menu","_open_sub_menu","subMenuPos","_set_item_hidden","hideItem","submenuConfig","parentData","_dummy_cell_interface","position_setter","prevPosition","_desired_sizes","_state","_isAnimationSupported","beforeShow","collapsedWidth","titleHeight","_initSidebar","_initContextMenu","_fullWidth","multipleOpen","_showPopup","_markMenu","_onMasterSelect","_updateTitle","_updateList","selectedId","dirClassName","menuTemplate","popupConfig","webix_template","onBeforeSelect","onAfterSelect","onMenuItemClick","popupId","topOnly","_isChild","newPos","oldPos","popupEl","arrow","scrollPos","scrollVisible","_onscroll","_last_set_size","scrollStep","_check_quantum","scrollWidth_setter","scrollHeight_setter","sizeTo","pointerEvents","getScroll","getSize","_fixSize","_onscroll_inner","activeArea","x_mode","_x_scroll_mode","_on_wheel","_add_touch_events","pointerType","_start_scroll_pos","deltaMode","deltaX","deltaY","detail","_scroll_trg","Mixin","server","isColumnVisible","originvalue","inputvalue","_multi_compare","_runServerFilter","itemValue","getFilter","_get_filter","checks","lineId","hover_setter","_hover_initialized","experimental","_last_hover","removeRowCss","hover","select_setter","_selections","_commonselect","_select_css","_reinit_selection","webix_cell","_click_before_select","_data_cleared","_data_synced","_selected_rows","_selected_areas","_select_key","_selected_pull","asArray","plain","_id_to_string","_unselect","_clear_selection","_finalize_select","_post_select","clearSelection","selectRange","_post_unselect","_add_item_select","_selectRange","_mapSelection","row_id","end_row_id","row_start_ind","row_end_ind","column_id","end_column_id","col_start_ind","col_end_ind","_render_header_and_footer","column_start_ind","column_end_ind","getSelectArea","removeSelectArea","sind","eind","srow","erow","rid","_extendAreaRange","addSelectArea","refreshSelectArea","blockselect_setter","_block_sel_flag","_bs_down","_bs_move","_bs_ready","_bs_progress","_update_block_selection","_childOf","_bs_position","_bs_up_init","_bs_up","_block_panel","_bs_select","theend","_locate_cell_xy","startx","starty","endx","endy","startn","endn","startWidth","endWidth","_bs_do_select","_right_width","_left_width","_center_width","_scrollTop","_getTopSplitOffset","_bs_start","blockselect","splitPos","inTopSplit","_x_scroll","_render_scroll_top","fixedRowHeight","_getHeightByIndex","startPos","startIndex","resizeRow_setter","scrollAlignY","resizeColumn_setter","_rs_init_flag","_rs_move","_rs_down","_rs_up","_rs_ready","_rs_start","_rs_end","newsize","oldwidth","oldheight","_rightSplit","_getRowHeight","setRowHeight","element_class","in_body","in_header","resizeRow","resizeColumn","headerOnly","_cursor_timer","_mark_resize_ready","_last_cursor_mode","row_editors","col_settings","showCell","editFormat","editMath","_editor_pos","liveValidation","_bind_live_validation","that","parser","editParse","_last_editor_scroll","attached","_spans_areas","_yr0","_yr1","editCell","editRow","eachColumn","editColumn","eachRow","_checkCellMerge","_correct_after_focus_y","_ignore_after_focus_scroll","_y_scroll","_correct_after_focus_x","_update_editor_y_pos","onscroll","ydiff","xdiff","_scrollLeft","_dtable_offset_height","_scrollSizeX","dropArea","_checkDragTopSplit","frozen","_scrollSizeY","_getValue","getHeaderNode","row_index","_getHeaderNode","getFooterNode","hind","rowindex","_get_y_range","minRow","x_range","_get_x_range","colindex","specific","nodeIndex","_isDraggable","dragColumn_setter","_relative_column_drag","_limit_column_drag","_column_dnd_temp_block","_last_sort_dnd_node","start_index","end_index","_dragTarget","moveColumn","_drag_column_last","columnWidth","scrollX","scrollY","minRowHeight","minColumnWidth","webix_excel_filter","webix_richfilter","webix_table_checkbox","checkboxRefresh","webix_table_radio","rowid","_top_id","_call_onparse","_first_render","_rows_cache","_sort_signs","_sort_signs_order","_footer_height","_config_table_from_file","_config_options_from_file","_refresh_any_header_content","_setLeftScroll","_clean_config_struct","_adjust_rows","_render_initial","rowLineHeight","_refresh_tracking_header_content","_delayRender","_renderDelay","_delayedLeftScroll","_autoDetectConfig","_define_structure","fast_mode","_render_timer","_apply_headers","_repaint_single_row","_check_rendered_cols","_dtable_height","_get_total_height","_set_split_sizes_y","_render_timer_id","colls","nformat","cssFormat","_correctColumnWidth","rawTemplate","_normalize_headers","_define_structure_and_render","_dtable_width","nr","nl","last_index","_create_scrolls","_set_columns_positions","_set_split_sizes_x","_header_fix_width","_refreshHeaderContent","_summ","_render_header_section","refreshHeaderContent","_size_header_footer_fix","col_id","_getHeaderHeight","_find_header_content","sec","alltd","_summ_next","_render_subheader","hcss","cell_height","sheight","_has_active_headers","showItemByIndex","column_ind","_getHeightByIndexSumm","dataHeight","itemHeight","_top_split_height","cur_ind","itemWidth","_scrollTo_touch","_getScrollState_touch","_render_scroll_shift","_render_scroll_diff","_dtable_column_refresh","_scroll_with_header","trackedOnly","cellTrackOnly","byId","activeId","headerContent","_set_size_scroll_area","hdx","_header_scroll","_footer_scroll","_update_scroll","hasX","hasY","scrx","scry","vscroll_view","_onscroll_x","_onscroll_y","_getNodeBox","xs","xe","ye","ys","zone","idOnly","cs","cdiv","_correctScrollSize","setColumnWidth","skip_update","by_user","maxColumnWidth","$subopen","$subHeight","index1","index2","spanNode","getSpanNode","leftcolumn","split_column","rowId","old_height","maxRowHeight","scrollChange","conts","_minimize_dom_changes","full","xind","xend","dep","xdef","freezeCss","_getCss","x_scroll","_clearColumnCache","xr","yr","_hideColumn","_render_full_rows","_renderColumn","_check_and_render_full_rows","_check_load_next","_delete_full_rows","_rows_cache_start","_rows_cache_end","_rows_body","_render_full_row_some","$sub","topDelta","paging","fetch","_last_valid_render_pos","_data_request_flag","_check_rows","_preserveScrollTarget","columnNode","newNode","_scrollWheelTrg","getCss","per_css","row_css","mark_marker","css_marker","$cellCss","editIcon","trashIcon","single","_yr2","_render_single_cell","ariaSelect","isOpen","wanted_height","desired","minwidth","oldw","oldh","_on_header_click","_get_header_cell","maybe","_mouseEventCall","css_call","getIndex","_datatable_overlay","startrow","startcol","numrows","numcols","_getTableHeader","headerArray","hcell","rightRestriction","bottomRestriction","rowItem","rowIndex","datarow","spanStart","colIndex","$inspan","skiprows","_correctWidth","_clear_invalid_css","addCellCss","newmark","removeCellCss","_getExportStyles","_style_hash","_getExportDocStyle","_getExportHStyles","cnode","cellCss","columnCss","spanCss","_getExportCellStyle","hs","hrow","hsc","hsr","_getBorderColor","defaultColor","parentStyle","_getRules","fontSize","borderLeftColor","borderTopColor","_getExcelCellRules","cssStr","alignment","sz","strike","horizontal","wrapText","textRotation","fgColor","DragMixin","_getVisibleSelection","areaselect","_subViewStorage","openSub","closeSub","_clear_hidden_state","_hideInitialColumns","_getInitialSpans","$colspan","hidden_index","_refresh_columns","_init_horder","hhash","$groupSpan","hindex","_fixColspansHidden","mod","elName","spanSource","spanSize","colConfig","showColumn","showColumnBatch","EditMixin","math_setter","_math_init","_math_pref","_parse_row_math","_parse_math","_remove_old_triggers","_exprs_by_columns","_math_recalc","_parse_cell_math","_calculate","depends","_set_original_value","_parse_relative_expr","expr","_get_calc_value","_in_math_trace","_start_math_trace","_to_math_trace","operations","_get_operations","triggers","_get_refs","_replace_refs","_parse_args","exc","_math_exception","_from_math_trace","_add_trigger","_compute","_trim","dell","delr","cell_value","op","_split_by","arg","ex","splitter","_math_trace","depend","_adjustColumns","_resizeColumns","_adjustColumn","colfil","_fillColumnSize","_getColumnConfigSize","adjustBatch","adjustColumn","adjustRowHeight","_adjustRowHeight","_touchNative","_touch","scrollMode","elastic","isScrollX","isScrollY","_fix_f","ResizeMixin","BlockSelectMixin","SelectionMixin","FilterMixin","_unwrap_id","treetable","treecheckbox","original","datatable","DataRecord","DataValue","TreeCollection","$printView","paper","_beforePrint","_checkOptions","drawImage","_print","_afterPrint","submit","instance","_reinit","msToBlob","toBlob","wrap"],"mappings":"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"}